var ho = Object.defineProperty;
var Us = (n) => {
  throw TypeError(n);
};
var mo = (n, e, t) => e in n ? ho(n, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : n[e] = t;
var I = (n, e, t) => mo(n, typeof e != "symbol" ? e + "" : e, t), Er = (n, e, t) => e.has(n) || Us("Cannot " + t);
var u = (n, e, t) => (Er(n, e, "read from private field"), t ? t.call(n) : e.get(n)), N = (n, e, t) => e.has(n) ? Us("Cannot add the same private member more than once") : e instanceof WeakSet ? e.add(n) : e.set(n, t), k = (n, e, t, r) => (Er(n, e, "write to private field"), r ? r.call(n, t) : e.set(n, t), t), L = (n, e, t) => (Er(n, e, "access private method"), t);
const Zr = {
  version: "0.3.3"
};
async function ms(n) {
  try {
    return [null, await n()];
  } catch (e) {
    return [e, null];
  }
}
function go(n) {
  const e = Object.values(n).filter((r) => typeof r == "number");
  return Object.entries(n).filter(([r, s]) => e.indexOf(+r) === -1).map(([r, s]) => s);
}
class za {
  constructor() {
    this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map();
  }
  add(e, ...t) {
    const r = t[0];
    if (this._map.set(e, r), r && typeof r == "object" && "id" in r) {
      if (this._idmap.has(r.id))
        throw new Error(`ID ${r.id} already exists in the registry`);
      this._idmap.set(r.id, e);
    }
    return this;
  }
  clear() {
    return this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map(), this;
  }
  remove(e) {
    const t = this._map.get(e);
    return t && typeof t == "object" && "id" in t && this._idmap.delete(t.id), this._map.delete(e), this;
  }
  get(e) {
    const t = e._zod.parent;
    if (t) {
      const r = { ...this.get(t) ?? {} };
      return delete r.id, { ...r, ...this._map.get(e) };
    }
    return this._map.get(e);
  }
  has(e) {
    return this._map.has(e);
  }
}
function yo() {
  return new za();
}
const _o = /* @__PURE__ */ yo();
class Zs {
  constructor(e) {
    this.counter = 0, this.metadataRegistry = (e == null ? void 0 : e.metadata) ?? _o, this.target = (e == null ? void 0 : e.target) ?? "draft-2020-12", this.unrepresentable = (e == null ? void 0 : e.unrepresentable) ?? "throw", this.override = (e == null ? void 0 : e.override) ?? (() => {
    }), this.io = (e == null ? void 0 : e.io) ?? "output", this.seen = /* @__PURE__ */ new Map();
  }
  process(e, t = { path: [], schemaPath: [] }) {
    var l, h, g;
    var r;
    const s = e._zod.def, a = {
      guid: "uuid",
      url: "uri",
      datetime: "date-time",
      json_string: "json-string",
      regex: ""
      // do not set
    }, o = this.seen.get(e);
    if (o)
      return o.count++, t.schemaPath.includes(e) && (o.cycle = t.path), o.schema;
    const i = { schema: {}, count: 1, cycle: void 0, path: t.path };
    this.seen.set(e, i);
    const c = (h = (l = e._zod).toJSONSchema) == null ? void 0 : h.call(l);
    if (c)
      i.schema = c;
    else {
      const y = {
        ...t,
        schemaPath: [...t.schemaPath, e],
        path: t.path
      }, S = e._zod.parent;
      if (S)
        i.ref = S, this.process(S, y), this.seen.get(S).isParent = !0;
      else {
        const _ = i.schema;
        switch (s.type) {
          case "string": {
            const m = _;
            m.type = "string";
            const { minimum: x, maximum: w, format: D, patterns: T, contentEncoding: O } = e._zod.bag;
            if (typeof x == "number" && (m.minLength = x), typeof w == "number" && (m.maxLength = w), D && (m.format = a[D] ?? D, m.format === "" && delete m.format), O && (m.contentEncoding = O), T && T.size > 0) {
              const M = [...T];
              M.length === 1 ? m.pattern = M[0].source : M.length > 1 && (i.schema.allOf = [
                ...M.map((W) => ({
                  ...this.target === "draft-7" ? { type: "string" } : {},
                  pattern: W.source
                }))
              ]);
            }
            break;
          }
          case "number": {
            const m = _, { minimum: x, maximum: w, format: D, multipleOf: T, exclusiveMaximum: O, exclusiveMinimum: M } = e._zod.bag;
            typeof D == "string" && D.includes("int") ? m.type = "integer" : m.type = "number", typeof M == "number" && (m.exclusiveMinimum = M), typeof x == "number" && (m.minimum = x, typeof M == "number" && (M >= x ? delete m.minimum : delete m.exclusiveMinimum)), typeof O == "number" && (m.exclusiveMaximum = O), typeof w == "number" && (m.maximum = w, typeof O == "number" && (O <= w ? delete m.maximum : delete m.exclusiveMaximum)), typeof T == "number" && (m.multipleOf = T);
            break;
          }
          case "boolean": {
            const m = _;
            m.type = "boolean";
            break;
          }
          case "bigint": {
            if (this.unrepresentable === "throw")
              throw new Error("BigInt cannot be represented in JSON Schema");
            break;
          }
          case "symbol": {
            if (this.unrepresentable === "throw")
              throw new Error("Symbols cannot be represented in JSON Schema");
            break;
          }
          case "null": {
            _.type = "null";
            break;
          }
          case "any":
            break;
          case "unknown":
            break;
          case "undefined": {
            if (this.unrepresentable === "throw")
              throw new Error("Undefined cannot be represented in JSON Schema");
            break;
          }
          case "void": {
            if (this.unrepresentable === "throw")
              throw new Error("Void cannot be represented in JSON Schema");
            break;
          }
          case "never": {
            _.not = {};
            break;
          }
          case "date": {
            if (this.unrepresentable === "throw")
              throw new Error("Date cannot be represented in JSON Schema");
            break;
          }
          case "array": {
            const m = _, { minimum: x, maximum: w } = e._zod.bag;
            typeof x == "number" && (m.minItems = x), typeof w == "number" && (m.maxItems = w), m.type = "array", m.items = this.process(s.element, { ...y, path: [...y.path, "items"] });
            break;
          }
          case "object": {
            const m = _;
            m.type = "object", m.properties = {};
            const x = s.shape;
            for (const T in x)
              m.properties[T] = this.process(x[T], {
                ...y,
                path: [...y.path, "properties", T]
              });
            const w = new Set(Object.keys(x)), D = new Set([...w].filter((T) => {
              const O = s.shape[T]._zod;
              return this.io === "input" ? O.optin === void 0 : O.optout === void 0;
            }));
            D.size > 0 && (m.required = Array.from(D)), ((g = s.catchall) == null ? void 0 : g._zod.def.type) === "never" ? m.additionalProperties = !1 : s.catchall ? s.catchall && (m.additionalProperties = this.process(s.catchall, {
              ...y,
              path: [...y.path, "additionalProperties"]
            })) : this.io === "output" && (m.additionalProperties = !1);
            break;
          }
          case "union": {
            const m = _;
            m.anyOf = s.options.map((x, w) => this.process(x, {
              ...y,
              path: [...y.path, "anyOf", w]
            }));
            break;
          }
          case "intersection": {
            const m = _, x = this.process(s.left, {
              ...y,
              path: [...y.path, "allOf", 0]
            }), w = this.process(s.right, {
              ...y,
              path: [...y.path, "allOf", 1]
            }), D = (O) => "allOf" in O && Object.keys(O).length === 1, T = [
              ...D(x) ? x.allOf : [x],
              ...D(w) ? w.allOf : [w]
            ];
            m.allOf = T;
            break;
          }
          case "tuple": {
            const m = _;
            m.type = "array";
            const x = s.items.map((T, O) => this.process(T, { ...y, path: [...y.path, "prefixItems", O] }));
            if (this.target === "draft-2020-12" ? m.prefixItems = x : m.items = x, s.rest) {
              const T = this.process(s.rest, {
                ...y,
                path: [...y.path, "items"]
              });
              this.target === "draft-2020-12" ? m.items = T : m.additionalItems = T;
            }
            s.rest && (m.items = this.process(s.rest, {
              ...y,
              path: [...y.path, "items"]
            }));
            const { minimum: w, maximum: D } = e._zod.bag;
            typeof w == "number" && (m.minItems = w), typeof D == "number" && (m.maxItems = D);
            break;
          }
          case "record": {
            const m = _;
            m.type = "object", m.propertyNames = this.process(s.keyType, { ...y, path: [...y.path, "propertyNames"] }), m.additionalProperties = this.process(s.valueType, {
              ...y,
              path: [...y.path, "additionalProperties"]
            });
            break;
          }
          case "map": {
            if (this.unrepresentable === "throw")
              throw new Error("Map cannot be represented in JSON Schema");
            break;
          }
          case "set": {
            if (this.unrepresentable === "throw")
              throw new Error("Set cannot be represented in JSON Schema");
            break;
          }
          case "enum": {
            const m = _, x = go(s.entries);
            x.every((w) => typeof w == "number") && (m.type = "number"), x.every((w) => typeof w == "string") && (m.type = "string"), m.enum = x;
            break;
          }
          case "literal": {
            const m = _, x = [];
            for (const w of s.values)
              if (w === void 0) {
                if (this.unrepresentable === "throw")
                  throw new Error("Literal `undefined` cannot be represented in JSON Schema");
              } else if (typeof w == "bigint") {
                if (this.unrepresentable === "throw")
                  throw new Error("BigInt literals cannot be represented in JSON Schema");
                x.push(Number(w));
              } else
                x.push(w);
            if (x.length !== 0) if (x.length === 1) {
              const w = x[0];
              m.type = w === null ? "null" : typeof w, m.const = w;
            } else
              x.every((w) => typeof w == "number") && (m.type = "number"), x.every((w) => typeof w == "string") && (m.type = "string"), x.every((w) => typeof w == "boolean") && (m.type = "string"), x.every((w) => w === null) && (m.type = "null"), m.enum = x;
            break;
          }
          case "file": {
            const m = _, x = {
              type: "string",
              format: "binary",
              contentEncoding: "binary"
            }, { minimum: w, maximum: D, mime: T } = e._zod.bag;
            w !== void 0 && (x.minLength = w), D !== void 0 && (x.maxLength = D), T ? T.length === 1 ? (x.contentMediaType = T[0], Object.assign(m, x)) : m.anyOf = T.map((O) => ({ ...x, contentMediaType: O })) : Object.assign(m, x);
            break;
          }
          case "transform": {
            if (this.unrepresentable === "throw")
              throw new Error("Transforms cannot be represented in JSON Schema");
            break;
          }
          case "nullable": {
            const m = this.process(s.innerType, y);
            _.anyOf = [m, { type: "null" }];
            break;
          }
          case "nonoptional": {
            this.process(s.innerType, y), i.ref = s.innerType;
            break;
          }
          case "success": {
            const m = _;
            m.type = "boolean";
            break;
          }
          case "default": {
            this.process(s.innerType, y), i.ref = s.innerType, _.default = JSON.parse(JSON.stringify(s.defaultValue));
            break;
          }
          case "prefault": {
            this.process(s.innerType, y), i.ref = s.innerType, this.io === "input" && (_._prefault = JSON.parse(JSON.stringify(s.defaultValue)));
            break;
          }
          case "catch": {
            this.process(s.innerType, y), i.ref = s.innerType;
            let m;
            try {
              m = s.catchValue(void 0);
            } catch {
              throw new Error("Dynamic catch values are not supported in JSON Schema");
            }
            _.default = m;
            break;
          }
          case "nan": {
            if (this.unrepresentable === "throw")
              throw new Error("NaN cannot be represented in JSON Schema");
            break;
          }
          case "template_literal": {
            const m = _, x = e._zod.pattern;
            if (!x)
              throw new Error("Pattern not found in template literal");
            m.type = "string", m.pattern = x.source;
            break;
          }
          case "pipe": {
            const m = this.io === "input" ? s.in._zod.def.type === "transform" ? s.out : s.in : s.out;
            this.process(m, y), i.ref = m;
            break;
          }
          case "readonly": {
            this.process(s.innerType, y), i.ref = s.innerType, _.readOnly = !0;
            break;
          }
          // passthrough types
          case "promise": {
            this.process(s.innerType, y), i.ref = s.innerType;
            break;
          }
          case "optional": {
            this.process(s.innerType, y), i.ref = s.innerType;
            break;
          }
          case "lazy": {
            const m = e._zod.innerType;
            this.process(m, y), i.ref = m;
            break;
          }
          case "custom": {
            if (this.unrepresentable === "throw")
              throw new Error("Custom types cannot be represented in JSON Schema");
            break;
          }
        }
      }
    }
    const d = this.metadataRegistry.get(e);
    return d && Object.assign(i.schema, d), this.io === "input" && ce(e) && (delete i.schema.examples, delete i.schema.default), this.io === "input" && i.schema._prefault && ((r = i.schema).default ?? (r.default = i.schema._prefault)), delete i.schema._prefault, this.seen.get(e).schema;
  }
  emit(e, t) {
    var f, l, h, g, y, S;
    const r = {
      cycles: (t == null ? void 0 : t.cycles) ?? "ref",
      reused: (t == null ? void 0 : t.reused) ?? "inline",
      // unrepresentable: _params?.unrepresentable ?? "throw",
      // uri: _params?.uri ?? ((id) => `${id}`),
      external: (t == null ? void 0 : t.external) ?? void 0
    }, s = this.seen.get(e);
    if (!s)
      throw new Error("Unprocessed schema. This is a bug in Zod.");
    const a = (_) => {
      var T;
      const m = this.target === "draft-2020-12" ? "$defs" : "definitions";
      if (r.external) {
        const O = (T = r.external.registry.get(_[0])) == null ? void 0 : T.id, M = r.external.uri ?? ((J) => J);
        if (O)
          return { ref: M(O) };
        const W = _[1].defId ?? _[1].schema.id ?? `schema${this.counter++}`;
        return _[1].defId = W, { defId: W, ref: `${M("__shared")}#/${m}/${W}` };
      }
      if (_[1] === s)
        return { ref: "#" };
      const w = `#/${m}/`, D = _[1].schema.id ?? `__schema${this.counter++}`;
      return { defId: D, ref: w + D };
    }, o = (_) => {
      if (_[1].schema.$ref)
        return;
      const m = _[1], { ref: x, defId: w } = a(_);
      m.def = { ...m.schema }, w && (m.defId = w);
      const D = m.schema;
      for (const T in D)
        delete D[T];
      D.$ref = x;
    };
    if (r.cycles === "throw")
      for (const _ of this.seen.entries()) {
        const m = _[1];
        if (m.cycle)
          throw new Error(`Cycle detected: #/${(f = m.cycle) == null ? void 0 : f.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);
      }
    for (const _ of this.seen.entries()) {
      const m = _[1];
      if (e === _[0]) {
        o(_);
        continue;
      }
      if (r.external) {
        const w = (l = r.external.registry.get(_[0])) == null ? void 0 : l.id;
        if (e !== _[0] && w) {
          o(_);
          continue;
        }
      }
      if ((h = this.metadataRegistry.get(_[0])) == null ? void 0 : h.id) {
        o(_);
        continue;
      }
      if (m.cycle) {
        o(_);
        continue;
      }
      if (m.count > 1 && r.reused === "ref") {
        o(_);
        continue;
      }
    }
    const i = (_, m) => {
      const x = this.seen.get(_), w = x.def ?? x.schema, D = { ...w };
      if (x.ref === null)
        return;
      const T = x.ref;
      if (x.ref = null, T) {
        i(T, m);
        const O = this.seen.get(T).schema;
        O.$ref && m.target === "draft-7" ? (w.allOf = w.allOf ?? [], w.allOf.push(O)) : (Object.assign(w, O), Object.assign(w, D));
      }
      x.isParent || this.override({
        zodSchema: _,
        jsonSchema: w,
        path: x.path ?? []
      });
    };
    for (const _ of [...this.seen.entries()].reverse())
      i(_[0], { target: this.target });
    const c = {};
    if (this.target === "draft-2020-12" ? c.$schema = "https://json-schema.org/draft/2020-12/schema" : this.target === "draft-7" ? c.$schema = "http://json-schema.org/draft-07/schema#" : console.warn(`Invalid target: ${this.target}`), (g = r.external) != null && g.uri) {
      const _ = (y = r.external.registry.get(e)) == null ? void 0 : y.id;
      if (!_)
        throw new Error("Schema is missing an `id` property");
      c.$id = r.external.uri(_);
    }
    Object.assign(c, s.def);
    const d = ((S = r.external) == null ? void 0 : S.defs) ?? {};
    for (const _ of this.seen.entries()) {
      const m = _[1];
      m.def && m.defId && (d[m.defId] = m.def);
    }
    r.external || Object.keys(d).length > 0 && (this.target === "draft-2020-12" ? c.$defs = d : c.definitions = d);
    try {
      return JSON.parse(JSON.stringify(c));
    } catch {
      throw new Error("Error converting schema to JSON.");
    }
  }
}
function vo(n, e) {
  if (n instanceof za) {
    const r = new Zs(e), s = {};
    for (const i of n._idmap.entries()) {
      const [c, d] = i;
      r.process(d);
    }
    const a = {}, o = {
      registry: n,
      uri: e == null ? void 0 : e.uri,
      defs: s
    };
    for (const i of n._idmap.entries()) {
      const [c, d] = i;
      a[c] = r.emit(d, {
        ...e,
        external: o
      });
    }
    if (Object.keys(s).length > 0) {
      const i = r.target === "draft-2020-12" ? "$defs" : "definitions";
      a.__shared = {
        [i]: s
      };
    }
    return { schemas: a };
  }
  const t = new Zs(e);
  return t.process(n), t.emit(n, e);
}
function ce(n, e) {
  const t = e ?? { seen: /* @__PURE__ */ new Set() };
  if (t.seen.has(n))
    return !1;
  t.seen.add(n);
  const s = n._zod.def;
  switch (s.type) {
    case "string":
    case "number":
    case "bigint":
    case "boolean":
    case "date":
    case "symbol":
    case "undefined":
    case "null":
    case "any":
    case "unknown":
    case "never":
    case "void":
    case "literal":
    case "enum":
    case "nan":
    case "file":
    case "template_literal":
      return !1;
    case "array":
      return ce(s.element, t);
    case "object": {
      for (const a in s.shape)
        if (ce(s.shape[a], t))
          return !0;
      return !1;
    }
    case "union": {
      for (const a of s.options)
        if (ce(a, t))
          return !0;
      return !1;
    }
    case "intersection":
      return ce(s.left, t) || ce(s.right, t);
    case "tuple": {
      for (const a of s.items)
        if (ce(a, t))
          return !0;
      return !!(s.rest && ce(s.rest, t));
    }
    case "record":
      return ce(s.keyType, t) || ce(s.valueType, t);
    case "map":
      return ce(s.keyType, t) || ce(s.valueType, t);
    case "set":
      return ce(s.valueType, t);
    // inner types
    case "promise":
    case "optional":
    case "nonoptional":
    case "nullable":
    case "readonly":
      return ce(s.innerType, t);
    case "lazy":
      return ce(s.getter(), t);
    case "default":
      return ce(s.innerType, t);
    case "prefault":
      return ce(s.innerType, t);
    case "custom":
      return !1;
    case "transform":
      return !0;
    case "pipe":
      return ce(s.in, t) || ce(s.out, t);
    case "success":
      return !1;
    case "catch":
      return !1;
  }
  throw new Error(`Unknown schema type: ${s.type}`);
}
function wo(n, e) {
  const t = { ...n };
  return Object.defineProperties(t, {
    $brand: {
      value: "auto-parseable-response-format",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    }
  }), t;
}
const bo = Symbol("Let zodToJsonSchema decide on which parser to use"), qs = {
  name: void 0,
  $refStrategy: "root",
  effectStrategy: "input",
  pipeStrategy: "all",
  dateStrategy: "format:date-time",
  mapStrategy: "entries",
  nullableStrategy: "from-target",
  removeAdditionalStrategy: "passthrough",
  definitionPath: "definitions",
  target: "jsonSchema7",
  strictUnions: !1,
  errorMessages: !1,
  markdownDescription: !1,
  patternStrategy: "escape",
  applyRegexFlags: !1,
  emailStrategy: "format:email",
  base64Strategy: "contentEncoding:base64",
  nameStrategy: "ref"
}, Io = (n) => typeof n == "string" ? {
  ...qs,
  basePath: ["#"],
  definitions: {},
  name: n
} : {
  ...qs,
  basePath: ["#"],
  definitions: {},
  ...n
}, qr = (n) => "_def" in n ? n._def : n;
function xo(n) {
  if (!n)
    return !0;
  for (const e in n)
    return !1;
  return !0;
}
const So = (n) => {
  const e = Io(n), t = e.name !== void 0 ? [...e.basePath, e.definitionPath, e.name] : e.basePath;
  return {
    ...e,
    currentPath: t,
    propertyPath: void 0,
    seenRefs: /* @__PURE__ */ new Set(),
    seen: new Map(Object.entries(e.definitions).map(([r, s]) => [
      qr(s),
      {
        def: qr(s),
        path: [...e.basePath, e.definitionPath, r],
        // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
        jsonSchema: void 0
      }
    ]))
  };
};
function Ga(n, e, t, r) {
  r != null && r.errorMessages && t && (n.errorMessage = {
    ...n.errorMessage,
    [e]: t
  });
}
function X(n, e, t, r, s) {
  n[e] = t, Ga(n, e, r, s);
}
var K;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const a = {};
    for (const o of s)
      a[o] = o;
    return a;
  }, n.getValidEnumValues = (s) => {
    const a = n.objectKeys(s).filter((i) => typeof s[s[i]] != "number"), o = {};
    for (const i of a)
      o[i] = s[i];
    return n.objectValues(o);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(a) {
    return s[a];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const a = [];
    for (const o in s)
      Object.prototype.hasOwnProperty.call(s, o) && a.push(o);
    return a;
  }, n.find = (s, a) => {
    for (const o of s)
      if (a(o))
        return o;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, a = " | ") {
    return s.map((o) => typeof o == "string" ? `'${o}'` : o).join(a);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, a) => typeof a == "bigint" ? a.toString() : a;
})(K || (K = {}));
var Js;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(Js || (Js = {}));
const P = K.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]), st = (n) => {
  switch (typeof n) {
    case "undefined":
      return P.undefined;
    case "string":
      return P.string;
    case "number":
      return Number.isNaN(n) ? P.nan : P.number;
    case "boolean":
      return P.boolean;
    case "function":
      return P.function;
    case "bigint":
      return P.bigint;
    case "symbol":
      return P.symbol;
    case "object":
      return Array.isArray(n) ? P.array : n === null ? P.null : n.then && typeof n.then == "function" && n.catch && typeof n.catch == "function" ? P.promise : typeof Map < "u" && n instanceof Map ? P.map : typeof Set < "u" && n instanceof Set ? P.set : typeof Date < "u" && n instanceof Date ? P.date : P.object;
    default:
      return P.unknown;
  }
}, A = K.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class $e extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(a) {
      return a.message;
    }, r = { _errors: [] }, s = (a) => {
      for (const o of a.issues)
        if (o.code === "invalid_union")
          o.unionErrors.map(s);
        else if (o.code === "invalid_return_type")
          s(o.returnTypeError);
        else if (o.code === "invalid_arguments")
          s(o.argumentsError);
        else if (o.path.length === 0)
          r._errors.push(t(o));
        else {
          let i = r, c = 0;
          for (; c < o.path.length; ) {
            const d = o.path[c];
            c === o.path.length - 1 ? (i[d] = i[d] || { _errors: [] }, i[d]._errors.push(t(o))) : i[d] = i[d] || { _errors: [] }, i = i[d], c++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof $e))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, K.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      if (s.path.length > 0) {
        const a = s.path[0];
        t[a] = t[a] || [], t[a].push(e(s));
      } else
        r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
}
$e.create = (n) => new $e(n);
const Jr = (n, e) => {
  let t;
  switch (n.code) {
    case A.invalid_type:
      n.received === P.undefined ? t = "Required" : t = `Expected ${n.expected}, received ${n.received}`;
      break;
    case A.invalid_literal:
      t = `Invalid literal value, expected ${JSON.stringify(n.expected, K.jsonStringifyReplacer)}`;
      break;
    case A.unrecognized_keys:
      t = `Unrecognized key(s) in object: ${K.joinValues(n.keys, ", ")}`;
      break;
    case A.invalid_union:
      t = "Invalid input";
      break;
    case A.invalid_union_discriminator:
      t = `Invalid discriminator value. Expected ${K.joinValues(n.options)}`;
      break;
    case A.invalid_enum_value:
      t = `Invalid enum value. Expected ${K.joinValues(n.options)}, received '${n.received}'`;
      break;
    case A.invalid_arguments:
      t = "Invalid function arguments";
      break;
    case A.invalid_return_type:
      t = "Invalid function return type";
      break;
    case A.invalid_date:
      t = "Invalid date";
      break;
    case A.invalid_string:
      typeof n.validation == "object" ? "includes" in n.validation ? (t = `Invalid input: must include "${n.validation.includes}"`, typeof n.validation.position == "number" && (t = `${t} at one or more positions greater than or equal to ${n.validation.position}`)) : "startsWith" in n.validation ? t = `Invalid input: must start with "${n.validation.startsWith}"` : "endsWith" in n.validation ? t = `Invalid input: must end with "${n.validation.endsWith}"` : K.assertNever(n.validation) : n.validation !== "regex" ? t = `Invalid ${n.validation}` : t = "Invalid";
      break;
    case A.too_small:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "more than"} ${n.minimum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "over"} ${n.minimum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "bigint" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${new Date(Number(n.minimum))}` : t = "Invalid input";
      break;
    case A.too_big:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "less than"} ${n.maximum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "under"} ${n.maximum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "bigint" ? t = `BigInt must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly" : n.inclusive ? "smaller than or equal to" : "smaller than"} ${new Date(Number(n.maximum))}` : t = "Invalid input";
      break;
    case A.custom:
      t = "Invalid input";
      break;
    case A.invalid_intersection_types:
      t = "Intersection results could not be merged";
      break;
    case A.not_multiple_of:
      t = `Number must be a multiple of ${n.multipleOf}`;
      break;
    case A.not_finite:
      t = "Number must be finite";
      break;
    default:
      t = e.defaultError, K.assertNever(n);
  }
  return { message: t };
};
let To = Jr;
function ko() {
  return To;
}
const Ao = (n) => {
  const { data: e, path: t, errorMaps: r, issueData: s } = n, a = [...t, ...s.path || []], o = {
    ...s,
    path: a
  };
  if (s.message !== void 0)
    return {
      ...s,
      path: a,
      message: s.message
    };
  let i = "";
  const c = r.filter((d) => !!d).slice().reverse();
  for (const d of c)
    i = d(o, { data: e, defaultError: i }).message;
  return {
    ...s,
    path: a,
    message: i
  };
};
function R(n, e) {
  const t = ko(), r = Ao({
    issueData: e,
    data: n.data,
    path: n.path,
    errorMaps: [
      n.common.contextualErrorMap,
      // contextual error map is first priority
      n.schemaErrorMap,
      // then schema-bound map if available
      t,
      // then global override map
      t === Jr ? void 0 : Jr
      // then global default map
    ].filter((s) => !!s)
  });
  n.common.issues.push(r);
}
class _e {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e, t) {
    const r = [];
    for (const s of t) {
      if (s.status === "aborted")
        return q;
      s.status === "dirty" && e.dirty(), r.push(s.value);
    }
    return { status: e.value, value: r };
  }
  static async mergeObjectAsync(e, t) {
    const r = [];
    for (const s of t) {
      const a = await s.key, o = await s.value;
      r.push({
        key: a,
        value: o
      });
    }
    return _e.mergeObjectSync(e, r);
  }
  static mergeObjectSync(e, t) {
    const r = {};
    for (const s of t) {
      const { key: a, value: o } = s;
      if (a.status === "aborted" || o.status === "aborted")
        return q;
      a.status === "dirty" && e.dirty(), o.status === "dirty" && e.dirty(), a.value !== "__proto__" && (typeof o.value < "u" || s.alwaysSet) && (r[a.value] = o.value);
    }
    return { status: e.value, value: r };
  }
}
const q = Object.freeze({
  status: "aborted"
}), pn = (n) => ({ status: "dirty", value: n }), Ae = (n) => ({ status: "valid", value: n }), Bs = (n) => n.status === "aborted", zs = (n) => n.status === "dirty", sn = (n) => n.status === "valid", rr = (n) => typeof Promise < "u" && n instanceof Promise;
var $;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})($ || ($ = {}));
class Fe {
  constructor(e, t, r, s) {
    this._cachedPath = [], this.parent = e, this.data = t, this._path = r, this._key = s;
  }
  get path() {
    return this._cachedPath.length || (Array.isArray(this._key) ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
}
const Gs = (n, e) => {
  if (sn(e))
    return { success: !0, data: e.value };
  if (!n.common.issues.length)
    throw new Error("Validation failed but no issues detected.");
  return {
    success: !1,
    get error() {
      if (this._error)
        return this._error;
      const t = new $e(n.common.issues);
      return this._error = t, this._error;
    }
  };
};
function z(n) {
  if (!n)
    return {};
  const { errorMap: e, invalid_type_error: t, required_error: r, description: s } = n;
  if (e && (t || r))
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e ? { errorMap: e, description: s } : { errorMap: (o, i) => {
    const { message: c } = n;
    return o.code === "invalid_enum_value" ? { message: c ?? i.defaultError } : typeof i.data > "u" ? { message: c ?? r ?? i.defaultError } : o.code !== "invalid_type" ? { message: i.defaultError } : { message: c ?? t ?? i.defaultError };
  }, description: s };
}
class H {
  get description() {
    return this._def.description;
  }
  _getType(e) {
    return st(e.data);
  }
  _getOrReturnCtx(e, t) {
    return t || {
      common: e.parent.common,
      data: e.data,
      parsedType: st(e.data),
      schemaErrorMap: this._def.errorMap,
      path: e.path,
      parent: e.parent
    };
  }
  _processInputParams(e) {
    return {
      status: new _e(),
      ctx: {
        common: e.parent.common,
        data: e.data,
        parsedType: st(e.data),
        schemaErrorMap: this._def.errorMap,
        path: e.path,
        parent: e.parent
      }
    };
  }
  _parseSync(e) {
    const t = this._parse(e);
    if (rr(t))
      throw new Error("Synchronous parse encountered promise.");
    return t;
  }
  _parseAsync(e) {
    const t = this._parse(e);
    return Promise.resolve(t);
  }
  parse(e, t) {
    const r = this.safeParse(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  safeParse(e, t) {
    const r = {
      common: {
        issues: [],
        async: (t == null ? void 0 : t.async) ?? !1,
        contextualErrorMap: t == null ? void 0 : t.errorMap
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    }, s = this._parseSync({ data: e, path: r.path, parent: r });
    return Gs(r, s);
  }
  "~validate"(e) {
    var r, s;
    const t = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    };
    if (!this["~standard"].async)
      try {
        const a = this._parseSync({ data: e, path: [], parent: t });
        return sn(a) ? {
          value: a.value
        } : {
          issues: t.common.issues
        };
      } catch (a) {
        (s = (r = a == null ? void 0 : a.message) == null ? void 0 : r.toLowerCase()) != null && s.includes("encountered") && (this["~standard"].async = !0), t.common = {
          issues: [],
          async: !0
        };
      }
    return this._parseAsync({ data: e, path: [], parent: t }).then((a) => sn(a) ? {
      value: a.value
    } : {
      issues: t.common.issues
    });
  }
  async parseAsync(e, t) {
    const r = await this.safeParseAsync(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  async safeParseAsync(e, t) {
    const r = {
      common: {
        issues: [],
        contextualErrorMap: t == null ? void 0 : t.errorMap,
        async: !0
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    }, s = this._parse({ data: e, path: r.path, parent: r }), a = await (rr(s) ? s : Promise.resolve(s));
    return Gs(r, a);
  }
  refine(e, t) {
    const r = (s) => typeof t == "string" || typeof t > "u" ? { message: t } : typeof t == "function" ? t(s) : t;
    return this._refinement((s, a) => {
      const o = e(s), i = () => a.addIssue({
        code: A.custom,
        ...r(s)
      });
      return typeof Promise < "u" && o instanceof Promise ? o.then((c) => c ? !0 : (i(), !1)) : o ? !0 : (i(), !1);
    });
  }
  refinement(e, t) {
    return this._refinement((r, s) => e(r) ? !0 : (s.addIssue(typeof t == "function" ? t(r, s) : t), !1));
  }
  _refinement(e) {
    return new Dt({
      schema: this,
      typeName: C.ZodEffects,
      effect: { type: "refinement", refinement: e }
    });
  }
  superRefine(e) {
    return this._refinement(e);
  }
  constructor(e) {
    this.spa = this.safeParseAsync, this._def = e, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this), this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (t) => this["~validate"](t)
    };
  }
  optional() {
    return et.create(this, this._def);
  }
  nullable() {
    return Mt.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return je.create(this);
  }
  promise() {
    return lr.create(this, this._def);
  }
  or(e) {
    return ar.create([this, e], this._def);
  }
  and(e) {
    return ir.create(this, e, this._def);
  }
  transform(e) {
    return new Dt({
      ...z(this._def),
      schema: this,
      typeName: C.ZodEffects,
      effect: { type: "transform", transform: e }
    });
  }
  default(e) {
    const t = typeof e == "function" ? e : () => e;
    return new dr({
      ...z(this._def),
      innerType: this,
      defaultValue: t,
      typeName: C.ZodDefault
    });
  }
  brand() {
    return new Ka({
      typeName: C.ZodBranded,
      type: this,
      ...z(this._def)
    });
  }
  catch(e) {
    const t = typeof e == "function" ? e : () => e;
    return new pr({
      ...z(this._def),
      innerType: this,
      catchValue: t,
      typeName: C.ZodCatch
    });
  }
  describe(e) {
    const t = this.constructor;
    return new t({
      ...this._def,
      description: e
    });
  }
  pipe(e) {
    return ys.create(this, e);
  }
  readonly() {
    return fr.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const Oo = /^c[^\s-]{8,}$/i, Co = /^[0-9a-z]+$/, Eo = /^[0-9A-HJKMNP-TV-Z]{26}$/i, No = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i, Ro = /^[a-z0-9_-]{21}$/i, Po = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/, Do = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/, Mo = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i, jo = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
let Nr;
const $o = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, Fo = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/, Lo = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/, Uo = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, Zo = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/, qo = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/, Va = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))", Jo = new RegExp(`^${Va}$`);
function Wa(n) {
  let e = "[0-5]\\d";
  n.precision ? e = `${e}\\.\\d{${n.precision}}` : n.precision == null && (e = `${e}(\\.\\d+)?`);
  const t = n.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`;
}
function Bo(n) {
  return new RegExp(`^${Wa(n)}$`);
}
function zo(n) {
  let e = `${Va}T${Wa(n)}`;
  const t = [];
  return t.push(n.local ? "Z?" : "Z"), n.offset && t.push("([+-]\\d{2}:?\\d{2})"), e = `${e}(${t.join("|")})`, new RegExp(`^${e}$`);
}
function Go(n, e) {
  return !!((e === "v4" || !e) && $o.test(n) || (e === "v6" || !e) && Lo.test(n));
}
function Vo(n, e) {
  if (!Po.test(n))
    return !1;
  try {
    const [t] = n.split(".");
    if (!t)
      return !1;
    const r = t.replace(/-/g, "+").replace(/_/g, "/").padEnd(t.length + (4 - t.length % 4) % 4, "="), s = JSON.parse(atob(r));
    return !(typeof s != "object" || s === null || "typ" in s && (s == null ? void 0 : s.typ) !== "JWT" || !s.alg || e && s.alg !== e);
  } catch {
    return !1;
  }
}
function Wo(n, e) {
  return !!((e === "v4" || !e) && Fo.test(n) || (e === "v6" || !e) && Uo.test(n));
}
class Qe extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = String(e.data)), this._getType(e) !== P.string) {
      const a = this._getOrReturnCtx(e);
      return R(a, {
        code: A.invalid_type,
        expected: P.string,
        received: a.parsedType
      }), q;
    }
    const r = new _e();
    let s;
    for (const a of this._def.checks)
      if (a.kind === "min")
        e.data.length < a.value && (s = this._getOrReturnCtx(e, s), R(s, {
          code: A.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "max")
        e.data.length > a.value && (s = this._getOrReturnCtx(e, s), R(s, {
          code: A.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "length") {
        const o = e.data.length > a.value, i = e.data.length < a.value;
        (o || i) && (s = this._getOrReturnCtx(e, s), o ? R(s, {
          code: A.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }) : i && R(s, {
          code: A.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }), r.dirty());
      } else if (a.kind === "email")
        Mo.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
          validation: "email",
          code: A.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "emoji")
        Nr || (Nr = new RegExp(jo, "u")), Nr.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
          validation: "emoji",
          code: A.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "uuid")
        No.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
          validation: "uuid",
          code: A.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "nanoid")
        Ro.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
          validation: "nanoid",
          code: A.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid")
        Oo.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
          validation: "cuid",
          code: A.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid2")
        Co.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
          validation: "cuid2",
          code: A.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "ulid")
        Eo.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
          validation: "ulid",
          code: A.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "url")
        try {
          new URL(e.data);
        } catch {
          s = this._getOrReturnCtx(e, s), R(s, {
            validation: "url",
            code: A.invalid_string,
            message: a.message
          }), r.dirty();
        }
      else a.kind === "regex" ? (a.regex.lastIndex = 0, a.regex.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
        validation: "regex",
        code: A.invalid_string,
        message: a.message
      }), r.dirty())) : a.kind === "trim" ? e.data = e.data.trim() : a.kind === "includes" ? e.data.includes(a.value, a.position) || (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.invalid_string,
        validation: { includes: a.value, position: a.position },
        message: a.message
      }), r.dirty()) : a.kind === "toLowerCase" ? e.data = e.data.toLowerCase() : a.kind === "toUpperCase" ? e.data = e.data.toUpperCase() : a.kind === "startsWith" ? e.data.startsWith(a.value) || (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.invalid_string,
        validation: { startsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "endsWith" ? e.data.endsWith(a.value) || (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.invalid_string,
        validation: { endsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "datetime" ? zo(a).test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.invalid_string,
        validation: "datetime",
        message: a.message
      }), r.dirty()) : a.kind === "date" ? Jo.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.invalid_string,
        validation: "date",
        message: a.message
      }), r.dirty()) : a.kind === "time" ? Bo(a).test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.invalid_string,
        validation: "time",
        message: a.message
      }), r.dirty()) : a.kind === "duration" ? Do.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
        validation: "duration",
        code: A.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "ip" ? Go(e.data, a.version) || (s = this._getOrReturnCtx(e, s), R(s, {
        validation: "ip",
        code: A.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "jwt" ? Vo(e.data, a.alg) || (s = this._getOrReturnCtx(e, s), R(s, {
        validation: "jwt",
        code: A.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "cidr" ? Wo(e.data, a.version) || (s = this._getOrReturnCtx(e, s), R(s, {
        validation: "cidr",
        code: A.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64" ? Zo.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
        validation: "base64",
        code: A.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64url" ? qo.test(e.data) || (s = this._getOrReturnCtx(e, s), R(s, {
        validation: "base64url",
        code: A.invalid_string,
        message: a.message
      }), r.dirty()) : K.assertNever(a);
    return { status: r.value, value: e.data };
  }
  _regex(e, t, r) {
    return this.refinement((s) => e.test(s), {
      validation: t,
      code: A.invalid_string,
      ...$.errToObj(r)
    });
  }
  _addCheck(e) {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  email(e) {
    return this._addCheck({ kind: "email", ...$.errToObj(e) });
  }
  url(e) {
    return this._addCheck({ kind: "url", ...$.errToObj(e) });
  }
  emoji(e) {
    return this._addCheck({ kind: "emoji", ...$.errToObj(e) });
  }
  uuid(e) {
    return this._addCheck({ kind: "uuid", ...$.errToObj(e) });
  }
  nanoid(e) {
    return this._addCheck({ kind: "nanoid", ...$.errToObj(e) });
  }
  cuid(e) {
    return this._addCheck({ kind: "cuid", ...$.errToObj(e) });
  }
  cuid2(e) {
    return this._addCheck({ kind: "cuid2", ...$.errToObj(e) });
  }
  ulid(e) {
    return this._addCheck({ kind: "ulid", ...$.errToObj(e) });
  }
  base64(e) {
    return this._addCheck({ kind: "base64", ...$.errToObj(e) });
  }
  base64url(e) {
    return this._addCheck({
      kind: "base64url",
      ...$.errToObj(e)
    });
  }
  jwt(e) {
    return this._addCheck({ kind: "jwt", ...$.errToObj(e) });
  }
  ip(e) {
    return this._addCheck({ kind: "ip", ...$.errToObj(e) });
  }
  cidr(e) {
    return this._addCheck({ kind: "cidr", ...$.errToObj(e) });
  }
  datetime(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "datetime",
      precision: null,
      offset: !1,
      local: !1,
      message: e
    }) : this._addCheck({
      kind: "datetime",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      offset: (e == null ? void 0 : e.offset) ?? !1,
      local: (e == null ? void 0 : e.local) ?? !1,
      ...$.errToObj(e == null ? void 0 : e.message)
    });
  }
  date(e) {
    return this._addCheck({ kind: "date", message: e });
  }
  time(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "time",
      precision: null,
      message: e
    }) : this._addCheck({
      kind: "time",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      ...$.errToObj(e == null ? void 0 : e.message)
    });
  }
  duration(e) {
    return this._addCheck({ kind: "duration", ...$.errToObj(e) });
  }
  regex(e, t) {
    return this._addCheck({
      kind: "regex",
      regex: e,
      ...$.errToObj(t)
    });
  }
  includes(e, t) {
    return this._addCheck({
      kind: "includes",
      value: e,
      position: t == null ? void 0 : t.position,
      ...$.errToObj(t == null ? void 0 : t.message)
    });
  }
  startsWith(e, t) {
    return this._addCheck({
      kind: "startsWith",
      value: e,
      ...$.errToObj(t)
    });
  }
  endsWith(e, t) {
    return this._addCheck({
      kind: "endsWith",
      value: e,
      ...$.errToObj(t)
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e,
      ...$.errToObj(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e,
      ...$.errToObj(t)
    });
  }
  length(e, t) {
    return this._addCheck({
      kind: "length",
      value: e,
      ...$.errToObj(t)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(e) {
    return this.min(1, $.errToObj(e));
  }
  trim() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((e) => e.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e) => e.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e) => e.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e) => e.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e) => e.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e) => e.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e) => e.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e) => e.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e) => e.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e) => e.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e) => e.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e) => e.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e) => e.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((e) => e.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((e) => e.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((e) => e.kind === "base64url");
  }
  get minLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Qe.create = (n) => new Qe({
  checks: [],
  typeName: C.ZodString,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...z(n)
});
function Ho(n, e) {
  const t = (n.toString().split(".")[1] || "").length, r = (e.toString().split(".")[1] || "").length, s = t > r ? t : r, a = Number.parseInt(n.toFixed(s).replace(".", "")), o = Number.parseInt(e.toFixed(s).replace(".", ""));
  return a % o / 10 ** s;
}
class an extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e) {
    if (this._def.coerce && (e.data = Number(e.data)), this._getType(e) !== P.number) {
      const a = this._getOrReturnCtx(e);
      return R(a, {
        code: A.invalid_type,
        expected: P.number,
        received: a.parsedType
      }), q;
    }
    let r;
    const s = new _e();
    for (const a of this._def.checks)
      a.kind === "int" ? K.isInteger(e.data) || (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.invalid_type,
        expected: "integer",
        received: "float",
        message: a.message
      }), s.dirty()) : a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.too_small,
        minimum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.too_big,
        maximum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? Ho(e.data, a.value) !== 0 && (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : a.kind === "finite" ? Number.isFinite(e.data) || (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.not_finite,
        message: a.message
      }), s.dirty()) : K.assertNever(a);
    return { status: s.value, value: e.data };
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, $.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, $.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, $.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, $.toString(t));
  }
  setLimit(e, t, r, s) {
    return new an({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: $.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new an({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  int(e) {
    return this._addCheck({
      kind: "int",
      message: $.toString(e)
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !1,
      message: $.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !1,
      message: $.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !0,
      message: $.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !0,
      message: $.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: $.toString(t)
    });
  }
  finite(e) {
    return this._addCheck({
      kind: "finite",
      message: $.toString(e)
    });
  }
  safe(e) {
    return this._addCheck({
      kind: "min",
      inclusive: !0,
      value: Number.MIN_SAFE_INTEGER,
      message: $.toString(e)
    })._addCheck({
      kind: "max",
      inclusive: !0,
      value: Number.MAX_SAFE_INTEGER,
      message: $.toString(e)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
  get isInt() {
    return !!this._def.checks.find((e) => e.kind === "int" || e.kind === "multipleOf" && K.isInteger(e.value));
  }
  get isFinite() {
    let e = null, t = null;
    for (const r of this._def.checks) {
      if (r.kind === "finite" || r.kind === "int" || r.kind === "multipleOf")
        return !0;
      r.kind === "min" ? (t === null || r.value > t) && (t = r.value) : r.kind === "max" && (e === null || r.value < e) && (e = r.value);
    }
    return Number.isFinite(t) && Number.isFinite(e);
  }
}
an.create = (n) => new an({
  checks: [],
  typeName: C.ZodNumber,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...z(n)
});
class _n extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e) {
    if (this._def.coerce)
      try {
        e.data = BigInt(e.data);
      } catch {
        return this._getInvalidInput(e);
      }
    if (this._getType(e) !== P.bigint)
      return this._getInvalidInput(e);
    let r;
    const s = new _e();
    for (const a of this._def.checks)
      a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.too_small,
        type: "bigint",
        minimum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.too_big,
        type: "bigint",
        maximum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? e.data % a.value !== BigInt(0) && (r = this._getOrReturnCtx(e, r), R(r, {
        code: A.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : K.assertNever(a);
    return { status: s.value, value: e.data };
  }
  _getInvalidInput(e) {
    const t = this._getOrReturnCtx(e);
    return R(t, {
      code: A.invalid_type,
      expected: P.bigint,
      received: t.parsedType
    }), q;
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, $.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, $.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, $.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, $.toString(t));
  }
  setLimit(e, t, r, s) {
    return new _n({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: $.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new _n({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !1,
      message: $.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !1,
      message: $.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !0,
      message: $.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !0,
      message: $.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: $.toString(t)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
_n.create = (n) => new _n({
  checks: [],
  typeName: C.ZodBigInt,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...z(n)
});
class Br extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = !!e.data), this._getType(e) !== P.boolean) {
      const r = this._getOrReturnCtx(e);
      return R(r, {
        code: A.invalid_type,
        expected: P.boolean,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Br.create = (n) => new Br({
  typeName: C.ZodBoolean,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...z(n)
});
class sr extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = new Date(e.data)), this._getType(e) !== P.date) {
      const a = this._getOrReturnCtx(e);
      return R(a, {
        code: A.invalid_type,
        expected: P.date,
        received: a.parsedType
      }), q;
    }
    if (Number.isNaN(e.data.getTime())) {
      const a = this._getOrReturnCtx(e);
      return R(a, {
        code: A.invalid_date
      }), q;
    }
    const r = new _e();
    let s;
    for (const a of this._def.checks)
      a.kind === "min" ? e.data.getTime() < a.value && (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.too_small,
        message: a.message,
        inclusive: !0,
        exact: !1,
        minimum: a.value,
        type: "date"
      }), r.dirty()) : a.kind === "max" ? e.data.getTime() > a.value && (s = this._getOrReturnCtx(e, s), R(s, {
        code: A.too_big,
        message: a.message,
        inclusive: !0,
        exact: !1,
        maximum: a.value,
        type: "date"
      }), r.dirty()) : K.assertNever(a);
    return {
      status: r.value,
      value: new Date(e.data.getTime())
    };
  }
  _addCheck(e) {
    return new sr({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e.getTime(),
      message: $.toString(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e.getTime(),
      message: $.toString(t)
    });
  }
  get minDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
  get maxDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
}
sr.create = (n) => new sr({
  checks: [],
  coerce: (n == null ? void 0 : n.coerce) || !1,
  typeName: C.ZodDate,
  ...z(n)
});
class Vs extends H {
  _parse(e) {
    if (this._getType(e) !== P.symbol) {
      const r = this._getOrReturnCtx(e);
      return R(r, {
        code: A.invalid_type,
        expected: P.symbol,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Vs.create = (n) => new Vs({
  typeName: C.ZodSymbol,
  ...z(n)
});
class zr extends H {
  _parse(e) {
    if (this._getType(e) !== P.undefined) {
      const r = this._getOrReturnCtx(e);
      return R(r, {
        code: A.invalid_type,
        expected: P.undefined,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
zr.create = (n) => new zr({
  typeName: C.ZodUndefined,
  ...z(n)
});
class Gr extends H {
  _parse(e) {
    if (this._getType(e) !== P.null) {
      const r = this._getOrReturnCtx(e);
      return R(r, {
        code: A.invalid_type,
        expected: P.null,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Gr.create = (n) => new Gr({
  typeName: C.ZodNull,
  ...z(n)
});
class vn extends H {
  constructor() {
    super(...arguments), this._any = !0;
  }
  _parse(e) {
    return Ae(e.data);
  }
}
vn.create = (n) => new vn({
  typeName: C.ZodAny,
  ...z(n)
});
class Ws extends H {
  constructor() {
    super(...arguments), this._unknown = !0;
  }
  _parse(e) {
    return Ae(e.data);
  }
}
Ws.create = (n) => new Ws({
  typeName: C.ZodUnknown,
  ...z(n)
});
class pt extends H {
  _parse(e) {
    const t = this._getOrReturnCtx(e);
    return R(t, {
      code: A.invalid_type,
      expected: P.never,
      received: t.parsedType
    }), q;
  }
}
pt.create = (n) => new pt({
  typeName: C.ZodNever,
  ...z(n)
});
class Hs extends H {
  _parse(e) {
    if (this._getType(e) !== P.undefined) {
      const r = this._getOrReturnCtx(e);
      return R(r, {
        code: A.invalid_type,
        expected: P.void,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Hs.create = (n) => new Hs({
  typeName: C.ZodVoid,
  ...z(n)
});
class je extends H {
  _parse(e) {
    const { ctx: t, status: r } = this._processInputParams(e), s = this._def;
    if (t.parsedType !== P.array)
      return R(t, {
        code: A.invalid_type,
        expected: P.array,
        received: t.parsedType
      }), q;
    if (s.exactLength !== null) {
      const o = t.data.length > s.exactLength.value, i = t.data.length < s.exactLength.value;
      (o || i) && (R(t, {
        code: o ? A.too_big : A.too_small,
        minimum: i ? s.exactLength.value : void 0,
        maximum: o ? s.exactLength.value : void 0,
        type: "array",
        inclusive: !0,
        exact: !0,
        message: s.exactLength.message
      }), r.dirty());
    }
    if (s.minLength !== null && t.data.length < s.minLength.value && (R(t, {
      code: A.too_small,
      minimum: s.minLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.minLength.message
    }), r.dirty()), s.maxLength !== null && t.data.length > s.maxLength.value && (R(t, {
      code: A.too_big,
      maximum: s.maxLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.maxLength.message
    }), r.dirty()), t.common.async)
      return Promise.all([...t.data].map((o, i) => s.type._parseAsync(new Fe(t, o, t.path, i)))).then((o) => _e.mergeArray(r, o));
    const a = [...t.data].map((o, i) => s.type._parseSync(new Fe(t, o, t.path, i)));
    return _e.mergeArray(r, a);
  }
  get element() {
    return this._def.type;
  }
  min(e, t) {
    return new je({
      ...this._def,
      minLength: { value: e, message: $.toString(t) }
    });
  }
  max(e, t) {
    return new je({
      ...this._def,
      maxLength: { value: e, message: $.toString(t) }
    });
  }
  length(e, t) {
    return new je({
      ...this._def,
      exactLength: { value: e, message: $.toString(t) }
    });
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
je.create = (n, e) => new je({
  type: n,
  minLength: null,
  maxLength: null,
  exactLength: null,
  typeName: C.ZodArray,
  ...z(e)
});
function Lt(n) {
  if (n instanceof ie) {
    const e = {};
    for (const t in n.shape) {
      const r = n.shape[t];
      e[t] = et.create(Lt(r));
    }
    return new ie({
      ...n._def,
      shape: () => e
    });
  } else return n instanceof je ? new je({
    ...n._def,
    type: Lt(n.element)
  }) : n instanceof et ? et.create(Lt(n.unwrap())) : n instanceof Mt ? Mt.create(Lt(n.unwrap())) : n instanceof Rt ? Rt.create(n.items.map((e) => Lt(e))) : n;
}
class ie extends H {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const e = this._def.shape(), t = K.objectKeys(e);
    return this._cached = { shape: e, keys: t }, this._cached;
  }
  _parse(e) {
    if (this._getType(e) !== P.object) {
      const d = this._getOrReturnCtx(e);
      return R(d, {
        code: A.invalid_type,
        expected: P.object,
        received: d.parsedType
      }), q;
    }
    const { status: r, ctx: s } = this._processInputParams(e), { shape: a, keys: o } = this._getCached(), i = [];
    if (!(this._def.catchall instanceof pt && this._def.unknownKeys === "strip"))
      for (const d in s.data)
        o.includes(d) || i.push(d);
    const c = [];
    for (const d of o) {
      const f = a[d], l = s.data[d];
      c.push({
        key: { status: "valid", value: d },
        value: f._parse(new Fe(s, l, s.path, d)),
        alwaysSet: d in s.data
      });
    }
    if (this._def.catchall instanceof pt) {
      const d = this._def.unknownKeys;
      if (d === "passthrough")
        for (const f of i)
          c.push({
            key: { status: "valid", value: f },
            value: { status: "valid", value: s.data[f] }
          });
      else if (d === "strict")
        i.length > 0 && (R(s, {
          code: A.unrecognized_keys,
          keys: i
        }), r.dirty());
      else if (d !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      const d = this._def.catchall;
      for (const f of i) {
        const l = s.data[f];
        c.push({
          key: { status: "valid", value: f },
          value: d._parse(
            new Fe(s, l, s.path, f)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: f in s.data
        });
      }
    }
    return s.common.async ? Promise.resolve().then(async () => {
      const d = [];
      for (const f of c) {
        const l = await f.key, h = await f.value;
        d.push({
          key: l,
          value: h,
          alwaysSet: f.alwaysSet
        });
      }
      return d;
    }).then((d) => _e.mergeObjectSync(r, d)) : _e.mergeObjectSync(r, c);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e) {
    return $.errToObj, new ie({
      ...this._def,
      unknownKeys: "strict",
      ...e !== void 0 ? {
        errorMap: (t, r) => {
          var a, o;
          const s = ((o = (a = this._def).errorMap) == null ? void 0 : o.call(a, t, r).message) ?? r.defaultError;
          return t.code === "unrecognized_keys" ? {
            message: $.errToObj(e).message ?? s
          } : {
            message: s
          };
        }
      } : {}
    });
  }
  strip() {
    return new ie({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new ie({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(e) {
    return new ie({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...e
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(e) {
    return new ie({
      unknownKeys: e._def.unknownKeys,
      catchall: e._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...e._def.shape()
      }),
      typeName: C.ZodObject
    });
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(e, t) {
    return this.augment({ [e]: t });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(e) {
    return new ie({
      ...this._def,
      catchall: e
    });
  }
  pick(e) {
    const t = {};
    for (const r of K.objectKeys(e))
      e[r] && this.shape[r] && (t[r] = this.shape[r]);
    return new ie({
      ...this._def,
      shape: () => t
    });
  }
  omit(e) {
    const t = {};
    for (const r of K.objectKeys(this.shape))
      e[r] || (t[r] = this.shape[r]);
    return new ie({
      ...this._def,
      shape: () => t
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return Lt(this);
  }
  partial(e) {
    const t = {};
    for (const r of K.objectKeys(this.shape)) {
      const s = this.shape[r];
      e && !e[r] ? t[r] = s : t[r] = s.optional();
    }
    return new ie({
      ...this._def,
      shape: () => t
    });
  }
  required(e) {
    const t = {};
    for (const r of K.objectKeys(this.shape))
      if (e && !e[r])
        t[r] = this.shape[r];
      else {
        let a = this.shape[r];
        for (; a instanceof et; )
          a = a._def.innerType;
        t[r] = a;
      }
    return new ie({
      ...this._def,
      shape: () => t
    });
  }
  keyof() {
    return Ha(K.objectKeys(this.shape));
  }
}
ie.create = (n, e) => new ie({
  shape: () => n,
  unknownKeys: "strip",
  catchall: pt.create(),
  typeName: C.ZodObject,
  ...z(e)
});
ie.strictCreate = (n, e) => new ie({
  shape: () => n,
  unknownKeys: "strict",
  catchall: pt.create(),
  typeName: C.ZodObject,
  ...z(e)
});
ie.lazycreate = (n, e) => new ie({
  shape: n,
  unknownKeys: "strip",
  catchall: pt.create(),
  typeName: C.ZodObject,
  ...z(e)
});
class ar extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = this._def.options;
    function s(a) {
      for (const i of a)
        if (i.result.status === "valid")
          return i.result;
      for (const i of a)
        if (i.result.status === "dirty")
          return t.common.issues.push(...i.ctx.common.issues), i.result;
      const o = a.map((i) => new $e(i.ctx.common.issues));
      return R(t, {
        code: A.invalid_union,
        unionErrors: o
      }), q;
    }
    if (t.common.async)
      return Promise.all(r.map(async (a) => {
        const o = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await a._parseAsync({
            data: t.data,
            path: t.path,
            parent: o
          }),
          ctx: o
        };
      })).then(s);
    {
      let a;
      const o = [];
      for (const c of r) {
        const d = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        }, f = c._parseSync({
          data: t.data,
          path: t.path,
          parent: d
        });
        if (f.status === "valid")
          return f;
        f.status === "dirty" && !a && (a = { result: f, ctx: d }), d.common.issues.length && o.push(d.common.issues);
      }
      if (a)
        return t.common.issues.push(...a.ctx.common.issues), a.result;
      const i = o.map((c) => new $e(c));
      return R(t, {
        code: A.invalid_union,
        unionErrors: i
      }), q;
    }
  }
  get options() {
    return this._def.options;
  }
}
ar.create = (n, e) => new ar({
  options: n,
  typeName: C.ZodUnion,
  ...z(e)
});
const Be = (n) => n instanceof ur ? Be(n.schema) : n instanceof Dt ? Be(n.innerType()) : n instanceof cr ? [n.value] : n instanceof Pt ? n.options : n instanceof Wr ? K.objectValues(n.enum) : n instanceof dr ? Be(n._def.innerType) : n instanceof zr ? [void 0] : n instanceof Gr ? [null] : n instanceof et ? [void 0, ...Be(n.unwrap())] : n instanceof Mt ? [null, ...Be(n.unwrap())] : n instanceof Ka || n instanceof fr ? Be(n.unwrap()) : n instanceof pr ? Be(n._def.innerType) : [];
class gs extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== P.object)
      return R(t, {
        code: A.invalid_type,
        expected: P.object,
        received: t.parsedType
      }), q;
    const r = this.discriminator, s = t.data[r], a = this.optionsMap.get(s);
    return a ? t.common.async ? a._parseAsync({
      data: t.data,
      path: t.path,
      parent: t
    }) : a._parseSync({
      data: t.data,
      path: t.path,
      parent: t
    }) : (R(t, {
      code: A.invalid_union_discriminator,
      options: Array.from(this.optionsMap.keys()),
      path: [r]
    }), q);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  /**
   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
   * have a different value for each object in the union.
   * @param discriminator the name of the discriminator property
   * @param types an array of object schemas
   * @param params
   */
  static create(e, t, r) {
    const s = /* @__PURE__ */ new Map();
    for (const a of t) {
      const o = Be(a.shape[e]);
      if (!o.length)
        throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);
      for (const i of o) {
        if (s.has(i))
          throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);
        s.set(i, a);
      }
    }
    return new gs({
      typeName: C.ZodDiscriminatedUnion,
      discriminator: e,
      options: t,
      optionsMap: s,
      ...z(r)
    });
  }
}
function Vr(n, e) {
  const t = st(n), r = st(e);
  if (n === e)
    return { valid: !0, data: n };
  if (t === P.object && r === P.object) {
    const s = K.objectKeys(e), a = K.objectKeys(n).filter((i) => s.indexOf(i) !== -1), o = { ...n, ...e };
    for (const i of a) {
      const c = Vr(n[i], e[i]);
      if (!c.valid)
        return { valid: !1 };
      o[i] = c.data;
    }
    return { valid: !0, data: o };
  } else if (t === P.array && r === P.array) {
    if (n.length !== e.length)
      return { valid: !1 };
    const s = [];
    for (let a = 0; a < n.length; a++) {
      const o = n[a], i = e[a], c = Vr(o, i);
      if (!c.valid)
        return { valid: !1 };
      s.push(c.data);
    }
    return { valid: !0, data: s };
  } else return t === P.date && r === P.date && +n == +e ? { valid: !0, data: n } : { valid: !1 };
}
class ir extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = (a, o) => {
      if (Bs(a) || Bs(o))
        return q;
      const i = Vr(a.value, o.value);
      return i.valid ? ((zs(a) || zs(o)) && t.dirty(), { status: t.value, value: i.data }) : (R(r, {
        code: A.invalid_intersection_types
      }), q);
    };
    return r.common.async ? Promise.all([
      this._def.left._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      }),
      this._def.right._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      })
    ]).then(([a, o]) => s(a, o)) : s(this._def.left._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }), this._def.right._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }));
  }
}
ir.create = (n, e, t) => new ir({
  left: n,
  right: e,
  typeName: C.ZodIntersection,
  ...z(t)
});
class Rt extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== P.array)
      return R(r, {
        code: A.invalid_type,
        expected: P.array,
        received: r.parsedType
      }), q;
    if (r.data.length < this._def.items.length)
      return R(r, {
        code: A.too_small,
        minimum: this._def.items.length,
        inclusive: !0,
        exact: !1,
        type: "array"
      }), q;
    !this._def.rest && r.data.length > this._def.items.length && (R(r, {
      code: A.too_big,
      maximum: this._def.items.length,
      inclusive: !0,
      exact: !1,
      type: "array"
    }), t.dirty());
    const a = [...r.data].map((o, i) => {
      const c = this._def.items[i] || this._def.rest;
      return c ? c._parse(new Fe(r, o, r.path, i)) : null;
    }).filter((o) => !!o);
    return r.common.async ? Promise.all(a).then((o) => _e.mergeArray(t, o)) : _e.mergeArray(t, a);
  }
  get items() {
    return this._def.items;
  }
  rest(e) {
    return new Rt({
      ...this._def,
      rest: e
    });
  }
}
Rt.create = (n, e) => {
  if (!Array.isArray(n))
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new Rt({
    items: n,
    typeName: C.ZodTuple,
    rest: null,
    ...z(e)
  });
};
class or extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== P.object)
      return R(r, {
        code: A.invalid_type,
        expected: P.object,
        received: r.parsedType
      }), q;
    const s = [], a = this._def.keyType, o = this._def.valueType;
    for (const i in r.data)
      s.push({
        key: a._parse(new Fe(r, i, r.path, i)),
        value: o._parse(new Fe(r, r.data[i], r.path, i)),
        alwaysSet: i in r.data
      });
    return r.common.async ? _e.mergeObjectAsync(t, s) : _e.mergeObjectSync(t, s);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e, t, r) {
    return t instanceof H ? new or({
      keyType: e,
      valueType: t,
      typeName: C.ZodRecord,
      ...z(r)
    }) : new or({
      keyType: Qe.create(),
      valueType: e,
      typeName: C.ZodRecord,
      ...z(t)
    });
  }
}
class Ks extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== P.map)
      return R(r, {
        code: A.invalid_type,
        expected: P.map,
        received: r.parsedType
      }), q;
    const s = this._def.keyType, a = this._def.valueType, o = [...r.data.entries()].map(([i, c], d) => ({
      key: s._parse(new Fe(r, i, r.path, [d, "key"])),
      value: a._parse(new Fe(r, c, r.path, [d, "value"]))
    }));
    if (r.common.async) {
      const i = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const c of o) {
          const d = await c.key, f = await c.value;
          if (d.status === "aborted" || f.status === "aborted")
            return q;
          (d.status === "dirty" || f.status === "dirty") && t.dirty(), i.set(d.value, f.value);
        }
        return { status: t.value, value: i };
      });
    } else {
      const i = /* @__PURE__ */ new Map();
      for (const c of o) {
        const d = c.key, f = c.value;
        if (d.status === "aborted" || f.status === "aborted")
          return q;
        (d.status === "dirty" || f.status === "dirty") && t.dirty(), i.set(d.value, f.value);
      }
      return { status: t.value, value: i };
    }
  }
}
Ks.create = (n, e, t) => new Ks({
  valueType: e,
  keyType: n,
  typeName: C.ZodMap,
  ...z(t)
});
class wn extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== P.set)
      return R(r, {
        code: A.invalid_type,
        expected: P.set,
        received: r.parsedType
      }), q;
    const s = this._def;
    s.minSize !== null && r.data.size < s.minSize.value && (R(r, {
      code: A.too_small,
      minimum: s.minSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.minSize.message
    }), t.dirty()), s.maxSize !== null && r.data.size > s.maxSize.value && (R(r, {
      code: A.too_big,
      maximum: s.maxSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.maxSize.message
    }), t.dirty());
    const a = this._def.valueType;
    function o(c) {
      const d = /* @__PURE__ */ new Set();
      for (const f of c) {
        if (f.status === "aborted")
          return q;
        f.status === "dirty" && t.dirty(), d.add(f.value);
      }
      return { status: t.value, value: d };
    }
    const i = [...r.data.values()].map((c, d) => a._parse(new Fe(r, c, r.path, d)));
    return r.common.async ? Promise.all(i).then((c) => o(c)) : o(i);
  }
  min(e, t) {
    return new wn({
      ...this._def,
      minSize: { value: e, message: $.toString(t) }
    });
  }
  max(e, t) {
    return new wn({
      ...this._def,
      maxSize: { value: e, message: $.toString(t) }
    });
  }
  size(e, t) {
    return this.min(e, t).max(e, t);
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
wn.create = (n, e) => new wn({
  valueType: n,
  minSize: null,
  maxSize: null,
  typeName: C.ZodSet,
  ...z(e)
});
class ur extends H {
  get schema() {
    return this._def.getter();
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    return this._def.getter()._parse({ data: t.data, path: t.path, parent: t });
  }
}
ur.create = (n, e) => new ur({
  getter: n,
  typeName: C.ZodLazy,
  ...z(e)
});
class cr extends H {
  _parse(e) {
    if (e.data !== this._def.value) {
      const t = this._getOrReturnCtx(e);
      return R(t, {
        received: t.data,
        code: A.invalid_literal,
        expected: this._def.value
      }), q;
    }
    return { status: "valid", value: e.data };
  }
  get value() {
    return this._def.value;
  }
}
cr.create = (n, e) => new cr({
  value: n,
  typeName: C.ZodLiteral,
  ...z(e)
});
function Ha(n, e) {
  return new Pt({
    values: n,
    typeName: C.ZodEnum,
    ...z(e)
  });
}
class Pt extends H {
  _parse(e) {
    if (typeof e.data != "string") {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return R(t, {
        expected: K.joinValues(r),
        received: t.parsedType,
        code: A.invalid_type
      }), q;
    }
    if (this._cache || (this._cache = new Set(this._def.values)), !this._cache.has(e.data)) {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return R(t, {
        received: t.data,
        code: A.invalid_enum_value,
        options: r
      }), q;
    }
    return Ae(e.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Values() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  extract(e, t = this._def) {
    return Pt.create(e, {
      ...this._def,
      ...t
    });
  }
  exclude(e, t = this._def) {
    return Pt.create(this.options.filter((r) => !e.includes(r)), {
      ...this._def,
      ...t
    });
  }
}
Pt.create = Ha;
class Wr extends H {
  _parse(e) {
    const t = K.getValidEnumValues(this._def.values), r = this._getOrReturnCtx(e);
    if (r.parsedType !== P.string && r.parsedType !== P.number) {
      const s = K.objectValues(t);
      return R(r, {
        expected: K.joinValues(s),
        received: r.parsedType,
        code: A.invalid_type
      }), q;
    }
    if (this._cache || (this._cache = new Set(K.getValidEnumValues(this._def.values))), !this._cache.has(e.data)) {
      const s = K.objectValues(t);
      return R(r, {
        received: r.data,
        code: A.invalid_enum_value,
        options: s
      }), q;
    }
    return Ae(e.data);
  }
  get enum() {
    return this._def.values;
  }
}
Wr.create = (n, e) => new Wr({
  values: n,
  typeName: C.ZodNativeEnum,
  ...z(e)
});
class lr extends H {
  unwrap() {
    return this._def.type;
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== P.promise && t.common.async === !1)
      return R(t, {
        code: A.invalid_type,
        expected: P.promise,
        received: t.parsedType
      }), q;
    const r = t.parsedType === P.promise ? t.data : Promise.resolve(t.data);
    return Ae(r.then((s) => this._def.type.parseAsync(s, {
      path: t.path,
      errorMap: t.common.contextualErrorMap
    })));
  }
}
lr.create = (n, e) => new lr({
  type: n,
  typeName: C.ZodPromise,
  ...z(e)
});
class Dt extends H {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === C.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = this._def.effect || null, a = {
      addIssue: (o) => {
        R(r, o), o.fatal ? t.abort() : t.dirty();
      },
      get path() {
        return r.path;
      }
    };
    if (a.addIssue = a.addIssue.bind(a), s.type === "preprocess") {
      const o = s.transform(r.data, a);
      if (r.common.async)
        return Promise.resolve(o).then(async (i) => {
          if (t.value === "aborted")
            return q;
          const c = await this._def.schema._parseAsync({
            data: i,
            path: r.path,
            parent: r
          });
          return c.status === "aborted" ? q : c.status === "dirty" || t.value === "dirty" ? pn(c.value) : c;
        });
      {
        if (t.value === "aborted")
          return q;
        const i = this._def.schema._parseSync({
          data: o,
          path: r.path,
          parent: r
        });
        return i.status === "aborted" ? q : i.status === "dirty" || t.value === "dirty" ? pn(i.value) : i;
      }
    }
    if (s.type === "refinement") {
      const o = (i) => {
        const c = s.refinement(i, a);
        if (r.common.async)
          return Promise.resolve(c);
        if (c instanceof Promise)
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return i;
      };
      if (r.common.async === !1) {
        const i = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return i.status === "aborted" ? q : (i.status === "dirty" && t.dirty(), o(i.value), { status: t.value, value: i.value });
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((i) => i.status === "aborted" ? q : (i.status === "dirty" && t.dirty(), o(i.value).then(() => ({ status: t.value, value: i.value }))));
    }
    if (s.type === "transform")
      if (r.common.async === !1) {
        const o = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        if (!sn(o))
          return q;
        const i = s.transform(o.value, a);
        if (i instanceof Promise)
          throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
        return { status: t.value, value: i };
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((o) => sn(o) ? Promise.resolve(s.transform(o.value, a)).then((i) => ({
          status: t.value,
          value: i
        })) : q);
    K.assertNever(s);
  }
}
Dt.create = (n, e, t) => new Dt({
  schema: n,
  typeName: C.ZodEffects,
  effect: e,
  ...z(t)
});
Dt.createWithPreprocess = (n, e, t) => new Dt({
  schema: e,
  effect: { type: "preprocess", transform: n },
  typeName: C.ZodEffects,
  ...z(t)
});
class et extends H {
  _parse(e) {
    return this._getType(e) === P.undefined ? Ae(void 0) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
et.create = (n, e) => new et({
  innerType: n,
  typeName: C.ZodOptional,
  ...z(e)
});
class Mt extends H {
  _parse(e) {
    return this._getType(e) === P.null ? Ae(null) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Mt.create = (n, e) => new Mt({
  innerType: n,
  typeName: C.ZodNullable,
  ...z(e)
});
class dr extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    let r = t.data;
    return t.parsedType === P.undefined && (r = this._def.defaultValue()), this._def.innerType._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
dr.create = (n, e) => new dr({
  innerType: n,
  typeName: C.ZodDefault,
  defaultValue: typeof e.default == "function" ? e.default : () => e.default,
  ...z(e)
});
class pr extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = {
      ...t,
      common: {
        ...t.common,
        issues: []
      }
    }, s = this._def.innerType._parse({
      data: r.data,
      path: r.path,
      parent: {
        ...r
      }
    });
    return rr(s) ? s.then((a) => ({
      status: "valid",
      value: a.status === "valid" ? a.value : this._def.catchValue({
        get error() {
          return new $e(r.common.issues);
        },
        input: r.data
      })
    })) : {
      status: "valid",
      value: s.status === "valid" ? s.value : this._def.catchValue({
        get error() {
          return new $e(r.common.issues);
        },
        input: r.data
      })
    };
  }
  removeCatch() {
    return this._def.innerType;
  }
}
pr.create = (n, e) => new pr({
  innerType: n,
  typeName: C.ZodCatch,
  catchValue: typeof e.catch == "function" ? e.catch : () => e.catch,
  ...z(e)
});
class Ys extends H {
  _parse(e) {
    if (this._getType(e) !== P.nan) {
      const r = this._getOrReturnCtx(e);
      return R(r, {
        code: A.invalid_type,
        expected: P.nan,
        received: r.parsedType
      }), q;
    }
    return { status: "valid", value: e.data };
  }
}
Ys.create = (n) => new Ys({
  typeName: C.ZodNaN,
  ...z(n)
});
class Ka extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = t.data;
    return this._def.type._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class ys extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.common.async)
      return (async () => {
        const a = await this._def.in._parseAsync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? q : a.status === "dirty" ? (t.dirty(), pn(a.value)) : this._def.out._parseAsync({
          data: a.value,
          path: r.path,
          parent: r
        });
      })();
    {
      const s = this._def.in._parseSync({
        data: r.data,
        path: r.path,
        parent: r
      });
      return s.status === "aborted" ? q : s.status === "dirty" ? (t.dirty(), {
        status: "dirty",
        value: s.value
      }) : this._def.out._parseSync({
        data: s.value,
        path: r.path,
        parent: r
      });
    }
  }
  static create(e, t) {
    return new ys({
      in: e,
      out: t,
      typeName: C.ZodPipeline
    });
  }
}
class fr extends H {
  _parse(e) {
    const t = this._def.innerType._parse(e), r = (s) => (sn(s) && (s.value = Object.freeze(s.value)), s);
    return rr(t) ? t.then((s) => r(s)) : r(t);
  }
  unwrap() {
    return this._def.innerType;
  }
}
fr.create = (n, e) => new fr({
  innerType: n,
  typeName: C.ZodReadonly,
  ...z(e)
});
function Xs(n, e) {
  const t = typeof n == "function" ? n(e) : typeof n == "string" ? { message: n } : n;
  return typeof t == "string" ? { message: t } : t;
}
function Ko(n, e = {}, t) {
  return n ? vn.create().superRefine((r, s) => {
    const a = n(r);
    if (a instanceof Promise)
      return a.then((o) => {
        if (!o) {
          const i = Xs(e, r), c = i.fatal ?? t ?? !0;
          s.addIssue({ code: "custom", ...i, fatal: c });
        }
      });
    if (!a) {
      const o = Xs(e, r), i = o.fatal ?? t ?? !0;
      s.addIssue({ code: "custom", ...o, fatal: i });
    }
  }) : vn.create();
}
var C;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(C || (C = {}));
const Ya = (n, e = {
  message: `Input not instance of ${n.name}`
}) => Ko((t) => t instanceof n, e), p = Qe.create, E = an.create, Nt = Br.create, V = vn.create;
pt.create;
const B = je.create, v = ie.create, tt = ar.create, ge = gs.create;
ir.create;
Rt.create;
const ee = or.create, Yo = ur.create, b = cr.create, oe = Pt.create;
lr.create;
et.create;
Mt.create;
function Xo() {
  return {};
}
function Qo(n, e) {
  var r, s;
  const t = {
    type: "array"
  };
  return ((s = (r = n.type) == null ? void 0 : r._def) == null ? void 0 : s.typeName) !== C.ZodAny && (t.items = Y(n.type._def, {
    ...e,
    currentPath: [...e.currentPath, "items"]
  })), n.minLength && X(t, "minItems", n.minLength.value, n.minLength.message, e), n.maxLength && X(t, "maxItems", n.maxLength.value, n.maxLength.message, e), n.exactLength && (X(t, "minItems", n.exactLength.value, n.exactLength.message, e), X(t, "maxItems", n.exactLength.value, n.exactLength.message, e)), t;
}
function eu(n, e) {
  const t = {
    type: "integer",
    format: "int64"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? X(t, "minimum", r.value, r.message, e) : X(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), X(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? X(t, "maximum", r.value, r.message, e) : X(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), X(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        X(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function tu() {
  return {
    type: "boolean"
  };
}
function nu(n, e) {
  return Y(n.type._def, e);
}
const ru = (n, e) => Y(n.innerType._def, e);
function Xa(n, e, t) {
  const r = t ?? e.dateStrategy;
  if (Array.isArray(r))
    return {
      anyOf: r.map((s, a) => Xa(n, e, s))
    };
  switch (r) {
    case "string":
    case "format:date-time":
      return {
        type: "string",
        format: "date-time"
      };
    case "format:date":
      return {
        type: "string",
        format: "date"
      };
    case "integer":
      return su(n, e);
  }
}
const su = (n, e) => {
  const t = {
    type: "integer",
    format: "unix-time"
  };
  if (e.target === "openApi3")
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        X(
          t,
          "minimum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
      case "max":
        X(
          t,
          "maximum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
    }
  return t;
};
function au(n, e) {
  return {
    ...Y(n.innerType._def, e),
    default: n.defaultValue()
  };
}
function iu(n, e, t) {
  return e.effectStrategy === "input" ? Y(n.schema._def, e, t) : {};
}
function ou(n) {
  return {
    type: "string",
    enum: [...n.values]
  };
}
const uu = (n) => "type" in n && n.type === "string" ? !1 : "allOf" in n;
function cu(n, e) {
  const t = [
    Y(n.left._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "0"]
    }),
    Y(n.right._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "1"]
    })
  ].filter((a) => !!a);
  let r = e.target === "jsonSchema2019-09" ? { unevaluatedProperties: !1 } : void 0;
  const s = [];
  return t.forEach((a) => {
    if (uu(a))
      s.push(...a.allOf), a.unevaluatedProperties === void 0 && (r = void 0);
    else {
      let o = a;
      if ("additionalProperties" in a && a.additionalProperties === !1) {
        const { additionalProperties: i, ...c } = a;
        o = c;
      } else
        r = void 0;
      s.push(o);
    }
  }), s.length ? {
    allOf: s,
    ...r
  } : void 0;
}
function lu(n, e) {
  const t = typeof n.value;
  return t !== "bigint" && t !== "number" && t !== "boolean" && t !== "string" ? {
    type: Array.isArray(n.value) ? "array" : "object"
  } : e.target === "openApi3" ? {
    type: t === "bigint" ? "integer" : t,
    enum: [n.value]
  } : {
    type: t === "bigint" ? "integer" : t,
    const: n.value
  };
}
let Rr;
const mt = {
  /**
   * `c` was changed to `[cC]` to replicate /i flag
   */
  cuid: /^[cC][^\s-]{8,}$/,
  cuid2: /^[0-9a-z]+$/,
  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,
  /**
   * `a-z` was added to replicate /i flag
   */
  email: /^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,
  /**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */
  emoji: () => (Rr === void 0 && (Rr = RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$", "u")), Rr),
  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,
  nanoid: /^[a-zA-Z0-9_-]{21}$/
};
function Qa(n, e) {
  const t = {
    type: "string"
  };
  function r(s) {
    return e.patternStrategy === "escape" ? du(s) : s;
  }
  if (n.checks)
    for (const s of n.checks)
      switch (s.kind) {
        case "min":
          X(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e);
          break;
        case "max":
          X(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "email":
          switch (e.emailStrategy) {
            case "format:email":
              Oe(t, "email", s.message, e);
              break;
            case "format:idn-email":
              Oe(t, "idn-email", s.message, e);
              break;
            case "pattern:zod":
              Ce(t, mt.email, s.message, e);
              break;
          }
          break;
        case "url":
          Oe(t, "uri", s.message, e);
          break;
        case "uuid":
          Oe(t, "uuid", s.message, e);
          break;
        case "regex":
          Ce(t, s.regex, s.message, e);
          break;
        case "cuid":
          Ce(t, mt.cuid, s.message, e);
          break;
        case "cuid2":
          Ce(t, mt.cuid2, s.message, e);
          break;
        case "startsWith":
          Ce(t, RegExp(`^${r(s.value)}`), s.message, e);
          break;
        case "endsWith":
          Ce(t, RegExp(`${r(s.value)}$`), s.message, e);
          break;
        case "datetime":
          Oe(t, "date-time", s.message, e);
          break;
        case "date":
          Oe(t, "date", s.message, e);
          break;
        case "time":
          Oe(t, "time", s.message, e);
          break;
        case "duration":
          Oe(t, "duration", s.message, e);
          break;
        case "length":
          X(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e), X(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "includes": {
          Ce(t, RegExp(r(s.value)), s.message, e);
          break;
        }
        case "ip": {
          s.version !== "v6" && Oe(t, "ipv4", s.message, e), s.version !== "v4" && Oe(t, "ipv6", s.message, e);
          break;
        }
        case "emoji":
          Ce(t, mt.emoji, s.message, e);
          break;
        case "ulid": {
          Ce(t, mt.ulid, s.message, e);
          break;
        }
        case "base64": {
          switch (e.base64Strategy) {
            case "format:binary": {
              Oe(t, "binary", s.message, e);
              break;
            }
            case "contentEncoding:base64": {
              X(t, "contentEncoding", "base64", s.message, e);
              break;
            }
            case "pattern:zod": {
              Ce(t, mt.base64, s.message, e);
              break;
            }
          }
          break;
        }
        case "nanoid":
          Ce(t, mt.nanoid, s.message, e);
      }
  return t;
}
const du = (n) => Array.from(n).map((e) => /[a-zA-Z0-9]/.test(e) ? e : `\\${e}`).join(""), Oe = (n, e, t, r) => {
  var s;
  n.format || (s = n.anyOf) != null && s.some((a) => a.format) ? (n.anyOf || (n.anyOf = []), n.format && (n.anyOf.push({
    format: n.format,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { format: n.errorMessage.format }
    }
  }), delete n.format, n.errorMessage && (delete n.errorMessage.format, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.anyOf.push({
    format: e,
    ...t && r.errorMessages && { errorMessage: { format: t } }
  })) : X(n, "format", e, t, r);
}, Ce = (n, e, t, r) => {
  var s;
  n.pattern || (s = n.allOf) != null && s.some((a) => a.pattern) ? (n.allOf || (n.allOf = []), n.pattern && (n.allOf.push({
    pattern: n.pattern,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { pattern: n.errorMessage.pattern }
    }
  }), delete n.pattern, n.errorMessage && (delete n.errorMessage.pattern, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.allOf.push({
    pattern: Qs(e, r),
    ...t && r.errorMessages && { errorMessage: { pattern: t } }
  })) : X(n, "pattern", Qs(e, r), t, r);
}, Qs = (n, e) => {
  var d;
  const t = typeof n == "function" ? n() : n;
  if (!e.applyRegexFlags || !t.flags)
    return t.source;
  const r = {
    i: t.flags.includes("i"),
    // Case-insensitive
    m: t.flags.includes("m"),
    // `^` and `$` matches adjacent to newline characters
    s: t.flags.includes("s")
    // `.` matches newlines
  }, s = r.i ? t.source.toLowerCase() : t.source;
  let a = "", o = !1, i = !1, c = !1;
  for (let f = 0; f < s.length; f++) {
    if (o) {
      a += s[f], o = !1;
      continue;
    }
    if (r.i) {
      if (i) {
        if (s[f].match(/[a-z]/)) {
          c ? (a += s[f], a += `${s[f - 2]}-${s[f]}`.toUpperCase(), c = !1) : s[f + 1] === "-" && ((d = s[f + 2]) != null && d.match(/[a-z]/)) ? (a += s[f], c = !0) : a += `${s[f]}${s[f].toUpperCase()}`;
          continue;
        }
      } else if (s[f].match(/[a-z]/)) {
        a += `[${s[f]}${s[f].toUpperCase()}]`;
        continue;
      }
    }
    if (r.m) {
      if (s[f] === "^") {
        a += `(^|(?<=[\r
]))`;
        continue;
      } else if (s[f] === "$") {
        a += `($|(?=[\r
]))`;
        continue;
      }
    }
    if (r.s && s[f] === ".") {
      a += i ? `${s[f]}\r
` : `[${s[f]}\r
]`;
      continue;
    }
    a += s[f], s[f] === "\\" ? o = !0 : i && s[f] === "]" ? i = !1 : !i && s[f] === "[" && (i = !0);
  }
  try {
    const f = new RegExp(a);
  } catch {
    return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`), t.source;
  }
  return a;
};
function ei(n, e) {
  var r, s, a, o;
  if (e.target === "openApi3" && ((r = n.keyType) == null ? void 0 : r._def.typeName) === C.ZodEnum)
    return {
      type: "object",
      required: n.keyType._def.values,
      properties: n.keyType._def.values.reduce((i, c) => ({
        ...i,
        [c]: Y(n.valueType._def, {
          ...e,
          currentPath: [...e.currentPath, "properties", c]
        }) ?? {}
      }), {}),
      additionalProperties: !1
    };
  const t = {
    type: "object",
    additionalProperties: Y(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalProperties"]
    }) ?? {}
  };
  if (e.target === "openApi3")
    return t;
  if (((s = n.keyType) == null ? void 0 : s._def.typeName) === C.ZodString && ((a = n.keyType._def.checks) != null && a.length)) {
    const i = Object.entries(Qa(n.keyType._def, e)).reduce((c, [d, f]) => d === "type" ? c : { ...c, [d]: f }, {});
    return {
      ...t,
      propertyNames: i
    };
  } else if (((o = n.keyType) == null ? void 0 : o._def.typeName) === C.ZodEnum)
    return {
      ...t,
      propertyNames: {
        enum: n.keyType._def.values
      }
    };
  return t;
}
function pu(n, e) {
  if (e.mapStrategy === "record")
    return ei(n, e);
  const t = Y(n.keyType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "0"]
  }) || {}, r = Y(n.valueType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "1"]
  }) || {};
  return {
    type: "array",
    maxItems: 125,
    items: {
      type: "array",
      items: [t, r],
      minItems: 2,
      maxItems: 2
    }
  };
}
function fu(n) {
  const e = n.values, r = Object.keys(n.values).filter((a) => typeof e[e[a]] != "number").map((a) => e[a]), s = Array.from(new Set(r.map((a) => typeof a)));
  return {
    type: s.length === 1 ? s[0] === "string" ? "string" : "number" : ["string", "number"],
    enum: r
  };
}
function hu() {
  return {
    not: {}
  };
}
function mu(n) {
  return n.target === "openApi3" ? {
    enum: ["null"],
    nullable: !0
  } : {
    type: "null"
  };
}
const hr = {
  ZodString: "string",
  ZodNumber: "number",
  ZodBigInt: "integer",
  ZodBoolean: "boolean",
  ZodNull: "null"
};
function gu(n, e) {
  if (e.target === "openApi3")
    return ea(n, e);
  const t = n.options instanceof Map ? Array.from(n.options.values()) : n.options;
  if (t.every((r) => r._def.typeName in hr && (!r._def.checks || !r._def.checks.length))) {
    const r = t.reduce((s, a) => {
      const o = hr[a._def.typeName];
      return o && !s.includes(o) ? [...s, o] : s;
    }, []);
    return {
      type: r.length > 1 ? r : r[0]
    };
  } else if (t.every((r) => r._def.typeName === "ZodLiteral" && !r.description)) {
    const r = t.reduce((s, a) => {
      const o = typeof a._def.value;
      switch (o) {
        case "string":
        case "number":
        case "boolean":
          return [...s, o];
        case "bigint":
          return [...s, "integer"];
        case "object":
          if (a._def.value === null)
            return [...s, "null"];
        case "symbol":
        case "undefined":
        case "function":
        default:
          return s;
      }
    }, []);
    if (r.length === t.length) {
      const s = r.filter((a, o, i) => i.indexOf(a) === o);
      return {
        type: s.length > 1 ? s : s[0],
        enum: t.reduce((a, o) => a.includes(o._def.value) ? a : [...a, o._def.value], [])
      };
    }
  } else if (t.every((r) => r._def.typeName === "ZodEnum"))
    return {
      type: "string",
      enum: t.reduce((r, s) => [...r, ...s._def.values.filter((a) => !r.includes(a))], [])
    };
  return ea(n, e);
}
const ea = (n, e) => {
  const t = (n.options instanceof Map ? Array.from(n.options.values()) : n.options).map((r, s) => Y(r._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", `${s}`]
  })).filter((r) => !!r && (!e.strictUnions || typeof r == "object" && Object.keys(r).length > 0));
  return t.length ? { anyOf: t } : void 0;
};
function yu(n, e) {
  if (["ZodString", "ZodNumber", "ZodBigInt", "ZodBoolean", "ZodNull"].includes(n.innerType._def.typeName) && (!n.innerType._def.checks || !n.innerType._def.checks.length))
    return e.target === "openApi3" || e.nullableStrategy === "property" ? {
      type: hr[n.innerType._def.typeName],
      nullable: !0
    } : {
      type: [hr[n.innerType._def.typeName], "null"]
    };
  if (e.target === "openApi3") {
    const r = Y(n.innerType._def, {
      ...e,
      currentPath: [...e.currentPath]
    });
    return r && "$ref" in r ? { allOf: [r], nullable: !0 } : r && { ...r, nullable: !0 };
  }
  const t = Y(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "0"]
  });
  return t && { anyOf: [t, { type: "null" }] };
}
function _u(n, e) {
  const t = {
    type: "number"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "int":
        t.type = "integer", Ga(t, "type", r.message, e);
        break;
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? X(t, "minimum", r.value, r.message, e) : X(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), X(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? X(t, "maximum", r.value, r.message, e) : X(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), X(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        X(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function vu(n, e) {
  return e.removeAdditionalStrategy === "strict" ? n.catchall._def.typeName === "ZodNever" ? n.unknownKeys !== "strict" : Y(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0 : n.catchall._def.typeName === "ZodNever" ? n.unknownKeys === "passthrough" : Y(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0;
}
function wu(n, e) {
  const t = {
    type: "object",
    ...Object.entries(n.shape()).reduce((r, [s, a]) => {
      var c;
      if (a === void 0 || a._def === void 0)
        return r;
      const o = [...e.currentPath, "properties", s], i = Y(a._def, {
        ...e,
        currentPath: o,
        propertyPath: o
      });
      if (i === void 0)
        return r;
      if (e.openaiStrictMode && a.isOptional() && !a.isNullable() && typeof ((c = a._def) == null ? void 0 : c.defaultValue) > "u")
        throw new Error(`Zod field at \`${o.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
      return {
        properties: {
          ...r.properties,
          [s]: i
        },
        required: a.isOptional() && !e.openaiStrictMode ? r.required : [...r.required, s]
      };
    }, { properties: {}, required: [] }),
    additionalProperties: vu(n, e)
  };
  return t.required.length || delete t.required, t;
}
const bu = (n, e) => {
  if (e.propertyPath && e.currentPath.slice(0, e.propertyPath.length).toString() === e.propertyPath.toString())
    return Y(n.innerType._def, { ...e, currentPath: e.currentPath });
  const t = Y(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "1"]
  });
  return t ? {
    anyOf: [
      {
        not: {}
      },
      t
    ]
  } : {};
}, Iu = (n, e) => {
  if (e.pipeStrategy === "input")
    return Y(n.in._def, e);
  if (e.pipeStrategy === "output")
    return Y(n.out._def, e);
  const t = Y(n.in._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", "0"]
  }), r = Y(n.out._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", t ? "1" : "0"]
  });
  return {
    allOf: [t, r].filter((s) => s !== void 0)
  };
};
function xu(n, e) {
  return Y(n.type._def, e);
}
function Su(n, e) {
  const r = {
    type: "array",
    uniqueItems: !0,
    items: Y(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "items"]
    })
  };
  return n.minSize && X(r, "minItems", n.minSize.value, n.minSize.message, e), n.maxSize && X(r, "maxItems", n.maxSize.value, n.maxSize.message, e), r;
}
function Tu(n, e) {
  return n.rest ? {
    type: "array",
    minItems: n.items.length,
    items: n.items.map((t, r) => Y(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], []),
    additionalItems: Y(n.rest._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalItems"]
    })
  } : {
    type: "array",
    minItems: n.items.length,
    maxItems: n.items.length,
    items: n.items.map((t, r) => Y(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], [])
  };
}
function ku() {
  return {
    not: {}
  };
}
function Au() {
  return {};
}
const Ou = (n, e) => Y(n.innerType._def, e);
function Y(n, e, t = !1) {
  var o;
  const r = e.seen.get(n);
  if (e.override) {
    const i = (o = e.override) == null ? void 0 : o.call(e, n, e, r, t);
    if (i !== bo)
      return i;
  }
  if (r && !t) {
    const i = Cu(r, e);
    if (i !== void 0)
      return "$ref" in i && e.seenRefs.add(i.$ref), i;
  }
  const s = { def: n, path: e.currentPath, jsonSchema: void 0 };
  e.seen.set(n, s);
  const a = Nu(n, n.typeName, e, t);
  return a && Ru(n, e, a), s.jsonSchema = a, a;
}
const Cu = (n, e) => {
  switch (e.$refStrategy) {
    case "root":
      return { $ref: n.path.join("/") };
    // this case is needed as OpenAI strict mode doesn't support top-level `$ref`s, i.e.
    // the top-level schema *must* be `{"type": "object", "properties": {...}}` but if we ever
    // need to define a `$ref`, relative `$ref`s aren't supported, so we need to extract
    // the schema to `#/definitions/` and reference that.
    //
    // e.g. if we need to reference a schema at
    // `["#","definitions","contactPerson","properties","person1","properties","name"]`
    // then we'll extract it out to `contactPerson_properties_person1_properties_name`
    case "extract-to-root":
      const t = n.path.slice(e.basePath.length + 1).join("_");
      return t !== e.name && e.nameStrategy === "duplicate-ref" && (e.definitions[t] = n.def), { $ref: [...e.basePath, e.definitionPath, t].join("/") };
    case "relative":
      return { $ref: Eu(e.currentPath, n.path) };
    case "none":
    case "seen":
      return n.path.length < e.currentPath.length && n.path.every((r, s) => e.currentPath[s] === r) ? (console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`), {}) : e.$refStrategy === "seen" ? {} : void 0;
  }
}, Eu = (n, e) => {
  let t = 0;
  for (; t < n.length && t < e.length && n[t] === e[t]; t++)
    ;
  return [(n.length - t).toString(), ...e.slice(t)].join("/");
}, Nu = (n, e, t, r) => {
  switch (e) {
    case C.ZodString:
      return Qa(n, t);
    case C.ZodNumber:
      return _u(n, t);
    case C.ZodObject:
      return wu(n, t);
    case C.ZodBigInt:
      return eu(n, t);
    case C.ZodBoolean:
      return tu();
    case C.ZodDate:
      return Xa(n, t);
    case C.ZodUndefined:
      return ku();
    case C.ZodNull:
      return mu(t);
    case C.ZodArray:
      return Qo(n, t);
    case C.ZodUnion:
    case C.ZodDiscriminatedUnion:
      return gu(n, t);
    case C.ZodIntersection:
      return cu(n, t);
    case C.ZodTuple:
      return Tu(n, t);
    case C.ZodRecord:
      return ei(n, t);
    case C.ZodLiteral:
      return lu(n, t);
    case C.ZodEnum:
      return ou(n);
    case C.ZodNativeEnum:
      return fu(n);
    case C.ZodNullable:
      return yu(n, t);
    case C.ZodOptional:
      return bu(n, t);
    case C.ZodMap:
      return pu(n, t);
    case C.ZodSet:
      return Su(n, t);
    case C.ZodLazy:
      return Y(n.getter()._def, t);
    case C.ZodPromise:
      return xu(n, t);
    case C.ZodNaN:
    case C.ZodNever:
      return hu();
    case C.ZodEffects:
      return iu(n, t, r);
    case C.ZodAny:
      return Xo();
    case C.ZodUnknown:
      return Au();
    case C.ZodDefault:
      return au(n, t);
    case C.ZodBranded:
      return nu(n, t);
    case C.ZodReadonly:
      return Ou(n, t);
    case C.ZodCatch:
      return ru(n, t);
    case C.ZodPipeline:
      return Iu(n, t);
    case C.ZodFunction:
    case C.ZodVoid:
    case C.ZodSymbol:
      return;
    default:
      return /* @__PURE__ */ ((s) => {
      })();
  }
}, Ru = (n, e, t) => (n.description && (t.description = n.description, e.markdownDescription && (t.markdownDescription = n.description)), t), Pu = (n, e) => {
  const t = So(e), r = typeof e == "string" ? e : (e == null ? void 0 : e.nameStrategy) === "title" || e == null ? void 0 : e.name, s = Y(n._def, r === void 0 ? t : {
    ...t,
    currentPath: [...t.basePath, t.definitionPath, r]
  }, !1) ?? {}, a = typeof e == "object" && e.name !== void 0 && e.nameStrategy === "title" ? e.name : void 0;
  a !== void 0 && (s.title = a);
  const o = (() => {
    if (xo(t.definitions))
      return;
    const c = {}, d = /* @__PURE__ */ new Set();
    for (let f = 0; f < 500; f++) {
      const l = Object.entries(t.definitions).filter(([h]) => !d.has(h));
      if (l.length === 0)
        break;
      for (const [h, g] of l)
        c[h] = Y(qr(g), { ...t, currentPath: [...t.basePath, t.definitionPath, h] }, !0) ?? {}, d.add(h);
    }
    return c;
  })(), i = r === void 0 ? o ? {
    ...s,
    [t.definitionPath]: o
  } : s : t.nameStrategy === "duplicate-ref" ? {
    ...s,
    ...o || t.seenRefs.size ? {
      [t.definitionPath]: {
        ...o,
        // only actually duplicate the schema definition if it was ever referenced
        // otherwise the duplication is completely pointless
        ...t.seenRefs.size ? { [r]: s } : void 0
      }
    } : void 0
  } : {
    $ref: [...t.$refStrategy === "relative" ? [] : t.basePath, t.definitionPath, r].join("/"),
    [t.definitionPath]: {
      ...o,
      [r]: s
    }
  };
  return t.target === "jsonSchema7" ? i.$schema = "http://json-schema.org/draft-07/schema#" : t.target === "jsonSchema2019-09" && (i.$schema = "https://json-schema.org/draft/2019-09/schema#"), i;
};
function Du(n, { parser: e, callback: t }) {
  const r = { ...n };
  return Object.defineProperties(r, {
    $brand: {
      value: "auto-parseable-tool",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    },
    $callback: {
      value: t,
      enumerable: !1
    }
  }), r;
}
function Mu(n) {
  if (n.type !== "object")
    throw new Error(`Root schema must have type: 'object' but got type: ${n.type ? `'${n.type}'` : "undefined"}`);
  const e = structuredClone(n);
  return ze(e, [], e);
}
function Hr(n) {
  if (typeof n == "boolean")
    return !1;
  if (n.type === "null")
    return !0;
  for (const e of n.oneOf ?? [])
    if (Hr(e))
      return !0;
  for (const e of n.anyOf ?? [])
    if (Hr(e))
      return !0;
  return !1;
}
function ze(n, e, t) {
  if (typeof n == "boolean")
    throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);
  if (!yt(n))
    throw new TypeError(`Expected ${JSON.stringify(n)} to be an object; path=${e.join("/")}`);
  const r = n.$defs;
  if (yt(r))
    for (const [h, g] of Object.entries(r))
      ze(g, [...e, "$defs", h], t);
  const s = n.definitions;
  if (yt(s))
    for (const [h, g] of Object.entries(s))
      ze(g, [...e, "definitions", h], t);
  n.type === "object" && !("additionalProperties" in n) && (n.additionalProperties = !1);
  const o = n.required ?? [], i = n.properties;
  if (yt(i)) {
    for (const [h, g] of Object.entries(i))
      if (!Hr(g) && !o.includes(h))
        throw new Error(`Zod field at \`${[...e, "properties", h].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
    n.required = Object.keys(i), n.properties = Object.fromEntries(Object.entries(i).map(([h, g]) => [
      h,
      ze(g, [...e, "properties", h], t)
    ]));
  }
  const c = n.items;
  yt(c) && (n.items = ze(c, [...e, "items"], t));
  const d = n.anyOf;
  Array.isArray(d) && (n.anyOf = d.map((h, g) => ze(h, [...e, "anyOf", String(g)], t)));
  const f = n.allOf;
  if (Array.isArray(f))
    if (f.length === 1) {
      const h = ze(f[0], [...e, "allOf", "0"], t);
      Object.assign(n, h), delete n.allOf;
    } else
      n.allOf = f.map((h, g) => ze(h, [...e, "allOf", String(g)], t));
  n.default === null && delete n.default;
  const l = n.$ref;
  if (l && $u(n, 1)) {
    if (typeof l != "string")
      throw new TypeError(`Received non-string $ref - ${l}; path=${e.join("/")}`);
    const h = ju(t, l);
    if (typeof h == "boolean")
      throw new Error(`Expected \`$ref: ${l}\` to resolve to an object schema but got boolean`);
    if (!yt(h))
      throw new Error(`Expected \`$ref: ${l}\` to resolve to an object but got ${JSON.stringify(h)}`);
    return Object.assign(n, { ...h, ...n }), delete n.$ref, ze(n, e, t);
  }
  return n;
}
function ju(n, e) {
  if (!e.startsWith("#/"))
    throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);
  const t = e.slice(2).split("/");
  let r = n;
  for (const s of t) {
    if (!yt(r))
      throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);
    const a = r[s];
    if (a === void 0)
      throw new Error(`Key ${s} not found while resolving ${e}`);
    r = a;
  }
  return r;
}
function yt(n) {
  return typeof n == "object" && n !== null && !Array.isArray(n);
}
function $u(n, e) {
  let t = 0;
  for (const r in n)
    if (t++, t > e)
      return !0;
  return !1;
}
function ti(n, e) {
  return Pu(n, {
    openaiStrictMode: !0,
    name: e.name,
    nameStrategy: "duplicate-ref",
    $refStrategy: "extract-to-root",
    nullableStrategy: "property"
  });
}
function ni(n) {
  return Mu(vo(n, {
    target: "draft-7"
  }));
}
function ri(n) {
  return "_zod" in n;
}
function Fu(n, e, t) {
  return wo({
    type: "json_schema",
    ...t,
    name: e,
    strict: !0,
    schema: ri(n) ? ni(n) : ti(n, { name: e })
  }, (r) => n.parse(JSON.parse(r)));
}
function Lu(n) {
  return Du({
    type: "function",
    name: n.name,
    parameters: ri(n.parameters) ? ni(n.parameters) : ti(n.parameters, { name: n.name }),
    strict: !0,
    ...n.description ? { description: n.description } : void 0
  }, {
    callback: n.function,
    parser: (e) => n.parameters.parse(JSON.parse(e))
  });
}
class ht extends Error {
  constructor(t, r) {
    super(t);
    I(this, "state");
    this.state = r;
  }
}
class Uu extends ht {
}
class ta extends ht {
}
class we extends ht {
}
class ne extends ht {
}
class na extends ht {
  constructor(t, r, s) {
    super(t, s);
    I(this, "error");
    this.error = r;
  }
}
class Zu extends ht {
  constructor(t, r, s) {
    super(t, s);
    I(this, "error");
    this.error = r;
  }
}
class ra extends ht {
  constructor(t, r, s) {
    super(t, s);
    I(this, "result");
    this.result = r;
  }
}
class Kr extends ht {
  constructor(t, r, s) {
    super(t, s);
    I(this, "result");
    this.result = r;
  }
}
function un(n) {
  var t;
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  return ((t = e._zod) == null ? void 0 : t.def) || e._def || e.def;
}
function wr(n) {
  const e = un(n);
  if (!e)
    return;
  const t = typeof e.typeName == "string" && e.typeName || typeof e.type == "string" && e.type;
  if (typeof t != "string")
    return;
  const r = t.toLowerCase();
  return r.startsWith("zod") ? r.slice(3) : r;
}
function jt(n) {
  return un(n) ? wr(n) === "object" : !1;
}
function qu(n) {
  return typeof n == "object" && n !== null && "input" in n && typeof n.input == "string";
}
const Ju = "http://json-schema.org/draft-07/schema#", Bu = /* @__PURE__ */ new Set(["optional"]), zu = /* @__PURE__ */ new Set([
  "brand",
  "branded",
  "catch",
  "default",
  "effects",
  "pipeline",
  "pipe",
  "prefault",
  "readonly",
  "refinement",
  "transform"
]), sa = {
  string: { type: "string" },
  number: { type: "number" },
  bigint: { type: "integer" },
  boolean: { type: "boolean" },
  date: { type: "string", format: "date-time" }
};
function si(n) {
  return typeof n == "object" && n !== null && n.type === "object" && "properties" in n && "additionalProperties" in n;
}
function Gu(n) {
  const e = ai(n);
  if (e)
    return Array.isArray(e.required) || (e.required = []), typeof e.additionalProperties > "u" && (e.additionalProperties = !1), typeof e.$schema != "string" && (e.$schema = Ju), e;
}
function ai(n) {
  const e = sc(n);
  if (!e)
    return;
  const t = {}, r = [];
  for (const [s, a] of Object.entries(e)) {
    const { schema: o, optional: i } = Vu(a);
    if (!o)
      return;
    t[s] = o, i || r.push(s);
  }
  return { type: "object", properties: t, required: r, additionalProperties: !1 };
}
function Vu(n) {
  let e = Yr(n), t = !1;
  for (; Bu.has(wr(e) ?? ""); ) {
    t = !0;
    const r = un(e), s = Yr(r == null ? void 0 : r.innerType);
    if (!s || s === e)
      break;
    e = s;
  }
  return { schema: Le(e), optional: t };
}
function Le(n) {
  if (n === void 0)
    return;
  const e = Yr(n), t = wr(e), r = un(e);
  if (t) {
    if (t in sa)
      return sa[t];
    switch (t) {
      case "object":
        return ai(e);
      case "array":
        return Wu(r);
      case "tuple":
        return Hu(r);
      case "union":
        return Ku(r);
      case "intersection":
        return Yu(r);
      case "literal":
        return nc(r);
      case "enum":
      case "nativeenum":
        return rc(r);
      case "record":
        return Xu(r);
      case "map":
        return Qu(r);
      case "set":
        return ec(r);
      case "nullable":
        return tc(r);
      default:
        return;
    }
  }
}
function Wu(n) {
  const e = Le(ii(n, "element", "items", "type"));
  return e ? { type: "array", items: e } : void 0;
}
function Hu(n) {
  const e = oi(n == null ? void 0 : n.items).map((r) => Le(r)).filter(Boolean);
  if (!e.length)
    return;
  const t = {
    type: "array",
    items: e,
    minItems: e.length
  };
  return n != null && n.rest || (t.maxItems = e.length), t;
}
function Ku(n) {
  const e = oi((n == null ? void 0 : n.options) ?? (n == null ? void 0 : n.schemas)).map((t) => Le(t)).filter(Boolean);
  return e.length ? { anyOf: e } : void 0;
}
function Yu(n) {
  const e = Le(n == null ? void 0 : n.left), t = Le(n == null ? void 0 : n.right);
  return e && t ? { allOf: [e, t] } : void 0;
}
function Xu(n) {
  const e = Le((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "object", additionalProperties: e } : void 0;
}
function Qu(n) {
  const e = Le((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "array", items: e } : void 0;
}
function ec(n) {
  const e = Le(n == null ? void 0 : n.valueType);
  return e ? { type: "array", items: e, uniqueItems: !0 } : void 0;
}
function tc(n) {
  const e = Le((n == null ? void 0 : n.innerType) ?? (n == null ? void 0 : n.type));
  return e ? { anyOf: [e, { type: "null" }] } : void 0;
}
function Yr(n) {
  let e = n;
  for (; zu.has(wr(e) ?? ""); ) {
    const t = un(e), r = (t == null ? void 0 : t.innerType) ?? (t == null ? void 0 : t.schema) ?? (t == null ? void 0 : t.base) ?? (t == null ? void 0 : t.type) ?? (t == null ? void 0 : t.wrapped) ?? (t == null ? void 0 : t.underlying);
    if (!r || r === e)
      return e;
    e = r;
  }
  return e;
}
function ii(n, ...e) {
  if (n) {
    for (const t of e)
      if (t in n && n[t] !== void 0)
        return n[t];
  }
}
function oi(n) {
  return Array.isArray(n) ? n : n === void 0 ? [] : [n];
}
function nc(n) {
  if (!n)
    return;
  const e = ii(n, "value", "literal");
  if (e !== void 0)
    return {
      const: e,
      type: e === null ? "null" : typeof e
    };
}
function rc(n) {
  if (n) {
    if (Array.isArray(n.values))
      return { enum: n.values };
    if (Array.isArray(n.options))
      return { enum: n.options };
    if (n.values && typeof n.values == "object")
      return { enum: Object.values(n.values) };
    if (n.enum && typeof n.enum == "object")
      return { enum: Object.values(n.enum) };
  }
}
function sc(n) {
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  if (e.shape && typeof e.shape == "object")
    return e.shape;
  if (typeof e.shape == "function")
    try {
      return e.shape();
    } catch {
      return;
    }
  const t = un(e), r = t == null ? void 0 : t.shape;
  if (r && typeof r == "object")
    return r;
  if (typeof r == "function")
    try {
      return r();
    } catch {
      return;
    }
}
const ac = Lu, ic = Fu;
function ui(n) {
  return Gu(n);
}
function mr(n) {
  if (n = n.replace(/\s/g, "_"), n = n.replace(/[^a-zA-Z0-9]/g, "_"), n.length === 0)
    throw new Error("Tool name cannot be empty");
  return n;
}
function _s(n, e) {
  const t = (r) => JSON.parse(r);
  if (jt(n)) {
    const r = (a) => {
      const o = ui(n);
      if (o)
        return {
          schema: o,
          parser: (c) => n.parse(JSON.parse(c))
        };
      const i = a instanceof Error ? ` Upstream helper error: ${a.message}` : "";
      throw new ne(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${i}`);
    };
    let s;
    try {
      s = ac({
        name: e,
        parameters: n,
        function: () => {
        },
        // empty function here to satisfy the OpenAI helper
        description: ""
      });
    } catch (a) {
      return r(a);
    }
    return si(s.parameters) ? {
      schema: s.parameters,
      parser: s.$parseRaw
    } : r();
  } else if (typeof n == "object" && n !== null)
    return {
      schema: n,
      parser: t
    };
  throw new ne("Input type is not a ZodObject or a valid JSON schema");
}
function aa(n) {
  if (n === "text")
    return "text";
  if (jt(n)) {
    const e = (r, s) => {
      const a = ui(n);
      if (a)
        return {
          type: (r == null ? void 0 : r.type) ?? "json_schema",
          name: (r == null ? void 0 : r.name) ?? "output",
          strict: (r == null ? void 0 : r.strict) ?? !1,
          schema: a
        };
      const o = s instanceof Error ? ` Upstream helper error: ${s.message}` : "";
      throw new ne(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${o}`);
    };
    let t;
    try {
      t = ic(n, "output");
    } catch (r) {
      return e(void 0, r);
    }
    return si(t.schema) ? {
      type: t.type,
      name: t.name,
      strict: t.strict || !1,
      schema: t.schema
    } : e(t);
  }
  return n;
}
function oc(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
}
var Yn = { exports: {} }, Pr, ia;
function uc() {
  if (ia) return Pr;
  ia = 1;
  var n = 1e3, e = n * 60, t = e * 60, r = t * 24, s = r * 7, a = r * 365.25;
  Pr = function(f, l) {
    l = l || {};
    var h = typeof f;
    if (h === "string" && f.length > 0)
      return o(f);
    if (h === "number" && isFinite(f))
      return l.long ? c(f) : i(f);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(f)
    );
  };
  function o(f) {
    if (f = String(f), !(f.length > 100)) {
      var l = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        f
      );
      if (l) {
        var h = parseFloat(l[1]), g = (l[2] || "ms").toLowerCase();
        switch (g) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return h * a;
          case "weeks":
          case "week":
          case "w":
            return h * s;
          case "days":
          case "day":
          case "d":
            return h * r;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return h * t;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return h * e;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return h * n;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return h;
          default:
            return;
        }
      }
    }
  }
  function i(f) {
    var l = Math.abs(f);
    return l >= r ? Math.round(f / r) + "d" : l >= t ? Math.round(f / t) + "h" : l >= e ? Math.round(f / e) + "m" : l >= n ? Math.round(f / n) + "s" : f + "ms";
  }
  function c(f) {
    var l = Math.abs(f);
    return l >= r ? d(f, l, r, "day") : l >= t ? d(f, l, t, "hour") : l >= e ? d(f, l, e, "minute") : l >= n ? d(f, l, n, "second") : f + " ms";
  }
  function d(f, l, h, g) {
    var y = l >= h * 1.5;
    return Math.round(f / h) + " " + g + (y ? "s" : "");
  }
  return Pr;
}
var Dr, oa;
function cc() {
  if (oa) return Dr;
  oa = 1;
  function n(e) {
    r.debug = r, r.default = r, r.coerce = d, r.disable = i, r.enable = a, r.enabled = c, r.humanize = uc(), r.destroy = f, Object.keys(e).forEach((l) => {
      r[l] = e[l];
    }), r.names = [], r.skips = [], r.formatters = {};
    function t(l) {
      let h = 0;
      for (let g = 0; g < l.length; g++)
        h = (h << 5) - h + l.charCodeAt(g), h |= 0;
      return r.colors[Math.abs(h) % r.colors.length];
    }
    r.selectColor = t;
    function r(l) {
      let h, g = null, y, S;
      function _(...m) {
        if (!_.enabled)
          return;
        const x = _, w = Number(/* @__PURE__ */ new Date()), D = w - (h || w);
        x.diff = D, x.prev = h, x.curr = w, h = w, m[0] = r.coerce(m[0]), typeof m[0] != "string" && m.unshift("%O");
        let T = 0;
        m[0] = m[0].replace(/%([a-zA-Z%])/g, (M, W) => {
          if (M === "%%")
            return "%";
          T++;
          const J = r.formatters[W];
          if (typeof J == "function") {
            const F = m[T];
            M = J.call(x, F), m.splice(T, 1), T--;
          }
          return M;
        }), r.formatArgs.call(x, m), (x.log || r.log).apply(x, m);
      }
      return _.namespace = l, _.useColors = r.useColors(), _.color = r.selectColor(l), _.extend = s, _.destroy = r.destroy, Object.defineProperty(_, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => g !== null ? g : (y !== r.namespaces && (y = r.namespaces, S = r.enabled(l)), S),
        set: (m) => {
          g = m;
        }
      }), typeof r.init == "function" && r.init(_), _;
    }
    function s(l, h) {
      const g = r(this.namespace + (typeof h > "u" ? ":" : h) + l);
      return g.log = this.log, g;
    }
    function a(l) {
      r.save(l), r.namespaces = l, r.names = [], r.skips = [];
      const h = (typeof l == "string" ? l : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean);
      for (const g of h)
        g[0] === "-" ? r.skips.push(g.slice(1)) : r.names.push(g);
    }
    function o(l, h) {
      let g = 0, y = 0, S = -1, _ = 0;
      for (; g < l.length; )
        if (y < h.length && (h[y] === l[g] || h[y] === "*"))
          h[y] === "*" ? (S = y, _ = g, y++) : (g++, y++);
        else if (S !== -1)
          y = S + 1, _++, g = _;
        else
          return !1;
      for (; y < h.length && h[y] === "*"; )
        y++;
      return y === h.length;
    }
    function i() {
      const l = [
        ...r.names,
        ...r.skips.map((h) => "-" + h)
      ].join(",");
      return r.enable(""), l;
    }
    function c(l) {
      for (const h of r.skips)
        if (o(l, h))
          return !1;
      for (const h of r.names)
        if (o(l, h))
          return !0;
      return !1;
    }
    function d(l) {
      return l instanceof Error ? l.stack || l.message : l;
    }
    function f() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return r.enable(r.load()), r;
  }
  return Dr = n, Dr;
}
var ua;
function lc() {
  return ua || (ua = 1, (function(n, e) {
    e.formatArgs = r, e.save = s, e.load = a, e.useColors = t, e.storage = o(), e.destroy = /* @__PURE__ */ (() => {
      let c = !1;
      return () => {
        c || (c = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), e.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function t() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let c;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (c = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(c[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function r(c) {
      if (c[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + c[0] + (this.useColors ? "%c " : " ") + "+" + n.exports.humanize(this.diff), !this.useColors)
        return;
      const d = "color: " + this.color;
      c.splice(1, 0, d, "color: inherit");
      let f = 0, l = 0;
      c[0].replace(/%[a-zA-Z%]/g, (h) => {
        h !== "%%" && (f++, h === "%c" && (l = f));
      }), c.splice(l, 0, d);
    }
    e.log = console.debug || console.log || (() => {
    });
    function s(c) {
      try {
        c ? e.storage.setItem("debug", c) : e.storage.removeItem("debug");
      } catch {
      }
    }
    function a() {
      let c;
      try {
        c = e.storage.getItem("debug") || e.storage.getItem("DEBUG");
      } catch {
      }
      return !c && typeof process < "u" && "env" in process && (c = process.env.DEBUG), c;
    }
    function o() {
      try {
        return localStorage;
      } catch {
      }
    }
    n.exports = cc()(e);
    const { formatters: i } = n.exports;
    i.j = function(c) {
      try {
        return JSON.stringify(c);
      } catch (d) {
        return "[UnexpectedJSONParseError]: " + d.message;
      }
    };
  })(Yn, Yn.exports)), Yn.exports;
}
var dc = lc();
const pc = /* @__PURE__ */ oc(dc);
function ci() {
  return bc();
}
function ca(n) {
  const e = ci();
  return typeof e < "u" && (e[n] === "true" || e[n] === "1");
}
const li = {
  get disabled() {
    return !0;
  }
}, di = {
  get dontLogModelData() {
    return ca("OPENAI_AGENTS_DONT_LOG_MODEL_DATA");
  },
  get dontLogToolData() {
    return ca("OPENAI_AGENTS_DONT_LOG_TOOL_DATA");
  }
}, fc = di.dontLogModelData, hc = di.dontLogToolData;
function pi(n = "openai-agents") {
  return {
    namespace: n,
    debug: pc(n),
    error: console.error,
    warn: console.warn,
    dontLogModelData: fc,
    dontLogToolData: hc
  };
}
const j = pi("openai-agents:core"), la = 20;
function ft(n) {
  if (n == null)
    return String(n);
  if (fi(n))
    return yn(new Uint8Array(n));
  if (Hn(n)) {
    const e = n;
    return yn(new Uint8Array(e.buffer, e.byteOffset, e.byteLength));
  }
  if (typeof n == "string")
    return n;
  if (typeof n == "object")
    try {
      return JSON.stringify(n, gc);
    } catch {
      return "[object with circular references]";
    }
  return String(n);
}
function fi(n) {
  if (n instanceof ArrayBuffer)
    return !0;
  const e = globalThis.SharedArrayBuffer;
  return !!(e && n instanceof e);
}
function Hn(n) {
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView(n);
}
function br(n) {
  return typeof n == "object" && n !== null && n.type === "Buffer" && Array.isArray(n.data);
}
function vs(n) {
  const e = globalThis.Buffer;
  return !!(e && typeof e.isBuffer == "function" && e.isBuffer(n));
}
function yn(n) {
  if (n.length === 0)
    return "[byte array (0 bytes)]";
  const e = Math.min(n.length, la), t = [];
  for (let a = 0; a < e; a++)
    t.push(mc(n[a]));
  const r = n.length > la ? " " : "";
  return `[byte array ${t.join(" ")}${r} (${n.length} bytes)]`;
}
function mc(n) {
  return `0x${n.toString(16).padStart(2, "0")}`;
}
function gc(n, e) {
  if (fi(e))
    return yn(new Uint8Array(e));
  if (Hn(e)) {
    const t = e;
    return yn(new Uint8Array(t.buffer, t.byteOffset, t.byteLength));
  }
  return br(e) ? yn(Uint8Array.from(e.data)) : e;
}
function yc(n, e) {
  return `An error occurred while running the tool. Please try again. Error: ${e instanceof Error ? e.toString() : String(e)}`;
}
function Xr(n) {
  const e = n.name ? mr(n.name) : mr(n.execute.name), t = typeof n.errorFunction > "u" ? yc : n.errorFunction;
  if (!e)
    throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");
  const r = n.strict ?? !0;
  if (!r && jt(n.parameters))
    throw new ne("Strict mode is required for Zod parameters");
  const { parser: s, schema: a } = _s(n.parameters, e);
  async function o(f, l, h) {
    const [g, y] = await ms(() => s(l));
    if (g !== null)
      throw j.dontLogToolData ? j.debug(`Invalid JSON input for tool ${e}`) : j.debug(`Invalid JSON input for tool ${e}: ${l}`), new we("Invalid JSON input for tool");
    j.dontLogToolData ? j.debug(`Invoking tool ${e}`) : j.debug(`Invoking tool ${e} with input ${l}`);
    const S = await n.execute(y, f, h), _ = ft(S);
    return j.dontLogToolData ? j.debug(`Tool ${e} completed`) : j.debug(`Tool ${e} returned: ${_}`), S;
  }
  async function i(f, l, h) {
    return o(f, l, h).catch((g) => {
      if (t) {
        const y = Sn();
        return y == null || y.setError({
          message: "Error running tool (non-fatal)",
          data: {
            tool_name: e,
            error: g.toString()
          }
        }), t(f, g);
      }
      throw g;
    });
  }
  const c = typeof n.needsApproval == "function" ? n.needsApproval : async () => typeof n.needsApproval == "boolean" ? n.needsApproval : !1, d = typeof n.isEnabled == "function" ? async (f, l) => {
    const h = n.isEnabled;
    return !!await h({ runContext: f, agent: l });
  } : async () => typeof n.isEnabled == "boolean" ? n.isEnabled : !0;
  return {
    type: "function",
    name: e,
    description: n.description,
    parameters: a,
    strict: r,
    invoke: i,
    needsApproval: c,
    isEnabled: d
  };
}
v({
  name: p(),
  description: p().optional(),
  inputSchema: v({
    type: b("object"),
    properties: ee(p(), V()),
    required: B(p()),
    additionalProperties: Nt()
  })
});
const Mr = {};
async function _c({ server: n, convertSchemasToStrict: e, runContext: t, agent: r }) {
  if (n.cacheToolsList && Mr[n.name])
    return Mr[n.name].map((a) => da(a, n, e));
  const s = async (a) => {
    const o = await n.listTools();
    let i = o;
    if (t && r) {
      const d = { runContext: t, agent: r, serverName: n.name }, f = [];
      for (const l of o) {
        const h = n.toolFilter;
        if (h)
          if (typeof h == "function") {
            if (!await h(d, l)) {
              j.debug(`MCP Tool (server: ${n.name}, tool: ${l.name}) is blocked by the callable filter.`);
              continue;
            }
          } else {
            const g = h.allowedToolNames ?? [], y = h.blockedToolNames ?? [];
            if (g.length > 0 || y.length > 0) {
              const S = g.length > 0 ? g.includes(l.name) : !0, _ = y.length > 0 ? y.includes(l.name) : !1;
              if (!S || _) {
                _ ? j.debug(`MCP Tool (server: ${n.name}, tool: ${l.name}) is blocked by the static filter.`) : S || j.debug(`MCP Tool (server: ${n.name}, tool: ${l.name}) is not allowed by the static filter.`);
                continue;
              }
            }
          }
        f.push(l);
      }
      i = f;
    }
    a && (a.spanData.result = i.map((d) => d.name));
    const c = i.map((d) => da(d, n, e));
    return n.cacheToolsList && (Mr[n.name] = i), c;
  };
  return on() ? El(s, {
    data: { server: n.name }
  }) : s();
}
async function vc(n, e, t, r = !1) {
  const s = Array.isArray(n) ? {
    mcpServers: n,
    runContext: e,
    agent: t,
    convertSchemasToStrict: r
  } : n, { mcpServers: a, convertSchemasToStrict: o = !1, runContext: i, agent: c } = s, d = [], f = /* @__PURE__ */ new Set();
  for (const l of a) {
    const h = await _c({
      server: l,
      convertSchemasToStrict: o,
      runContext: i,
      agent: c
    }), y = [...new Set(h.map((S) => S.name))].filter((S) => f.has(S));
    if (y.length > 0)
      throw new ne(`Duplicate tool names found across MCP servers: ${y.join(", ")}`);
    for (const S of h)
      f.add(S.name), d.push(S);
  }
  return d;
}
function da(n, e, t) {
  var o, i, c, d;
  async function r(f, l) {
    let h = {};
    typeof f == "string" && f ? h = JSON.parse(f) : typeof f == "object" && f != null && (h = f);
    const g = Sn();
    g && (g.spanData.mcp_data = { server: e.name });
    const y = await e.callTool(n.name, h);
    return y.length === 1 ? y[0] : y;
  }
  const s = {
    ...n.inputSchema,
    type: ((o = n.inputSchema) == null ? void 0 : o.type) ?? "object",
    properties: ((i = n.inputSchema) == null ? void 0 : i.properties) ?? {},
    required: ((c = n.inputSchema) == null ? void 0 : c.required) ?? [],
    additionalProperties: ((d = n.inputSchema) == null ? void 0 : d.additionalProperties) ?? !1
  };
  if (t || s.additionalProperties === !0)
    try {
      const f = wc(s);
      return Xr({
        name: n.name,
        description: n.description || "",
        parameters: f,
        strict: !0,
        execute: r
      });
    } catch (f) {
      j.warn(`Error converting MCP schema to strict mode: ${f}`);
    }
  const a = {
    ...s,
    additionalProperties: !0
  };
  return Xr({
    name: n.name,
    description: n.description || "",
    parameters: a,
    strict: !1,
    execute: r
  });
}
function wc(n) {
  const e = {
    ...n,
    additionalProperties: !1
  };
  return e.required || (e.required = []), e;
}
function bc() {
  return {};
}
var Bt, wt;
class Ir {
  constructor() {
    N(this, Bt, new EventTarget());
    N(this, wt, /* @__PURE__ */ new Map());
  }
  on(e, t) {
    const r = e;
    let s = u(this, wt).get(r);
    s || (s = /* @__PURE__ */ new Map(), u(this, wt).set(r, s));
    let a = s.get(t);
    a || (a = /* @__PURE__ */ new Set(), s.set(t, a));
    const o = ((i) => t(...i.detail ?? []));
    return a.add(o), u(this, Bt).addEventListener(r, o), this;
  }
  off(e, t) {
    const r = e, s = u(this, wt).get(r), a = s == null ? void 0 : s.get(t);
    if (a != null && a.size) {
      for (const o of a)
        u(this, Bt).removeEventListener(r, o);
      s == null || s.delete(t), (s == null ? void 0 : s.size) === 0 && u(this, wt).delete(r);
    }
    return this;
  }
  emit(e, ...t) {
    const r = new CustomEvent(e, { detail: t });
    return u(this, Bt).dispatchEvent(r);
  }
  once(e, t) {
    const r = (...s) => {
      this.off(e, r), t(...s);
    };
    return this.on(e, r), this;
  }
}
Bt = new WeakMap(), wt = new WeakMap();
const hi = () => typeof crypto < "u" && crypto.randomUUID ? crypto.randomUUID() : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(n) {
  const e = Math.random() * 16 | 0;
  return (n === "x" ? e : e & 3 | 8).toString(16);
}), Ic = class {
  constructor() {
  }
  pipeTo(e, t) {
  }
  pipeThrough(e, t) {
  }
}, xc = globalThis.ReadableStream, Sc = globalThis.TransformStream;
class Tc {
  constructor() {
    I(this, "context", null);
  }
  run(e, t) {
    return this.context = e, t();
  }
  getStore() {
    return this.context;
  }
  enterWith(e) {
    this.context = e;
  }
}
class kc {
  constructor() {
  }
  setTimeout(e, t) {
    const r = setTimeout(e, t);
    return r.ref = typeof r.ref == "function" ? r.ref : () => r, r.unref = typeof r.unref == "function" ? r.unref : () => r, r.hasRef = typeof r.hasRef == "function" ? r.hasRef : () => !0, r.refresh = typeof r.refresh == "function" ? r.refresh : () => r, r;
  }
  clearTimeout(e) {
    window.clearTimeout(e);
  }
}
const Ac = new kc();
class ws {
  on(e, t) {
    return this.eventEmitter.on(e, t), this.eventEmitter;
  }
  off(e, t) {
    return this.eventEmitter.off(e, t), this.eventEmitter;
  }
  emit(e, ...t) {
    return this.eventEmitter.emit(e, ...t);
  }
  once(e, t) {
    return this.eventEmitter.once(e, t), this.eventEmitter;
  }
}
class Oc extends ws {
  constructor() {
    super(...arguments);
    I(this, "eventEmitter", new Ir());
  }
}
class Cc extends ws {
  constructor() {
    super(...arguments);
    I(this, "eventEmitter", new Ir());
  }
}
const Ec = "OPENAI_DEFAULT_MODEL";
function xr(n) {
  return n.startsWith("gpt-5-chat") ? !1 : n.startsWith("gpt-5");
}
function mi() {
  return xr(gi());
}
function gi() {
  var e;
  return ((e = ci()[Ec]) == null ? void 0 : e.toLowerCase()) ?? "gpt-4.1";
}
function Nc(n) {
  const e = gi();
  return xr(e) ? {
    // We chose "low" instead of "minimal" because some of the built-in tools
    // (e.g., file search, image generation, etc.) do not support "minimal"
    // If you want to use "minimal" reasoning effort, you can pass your own model settings
    reasoning: { effort: "low" },
    text: { verbosity: "low" }
  } : {};
}
function yi(n) {
  return JSON.stringify({ assistant: n.name });
}
function Rc(n) {
  return `transfer_to_${mr(n.name)}`;
}
function Pc(n) {
  return `Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription ?? ""}`;
}
class _i {
  constructor(e, t) {
    /**
     * The name of the tool that represents the handoff.
     */
    I(this, "toolName");
    /**
     * The description of the tool that represents the handoff.
     */
    I(this, "toolDescription");
    /**
     * The JSON schema for the handoff input. Can be empty if the handoff does not take an input
     */
    I(this, "inputJsonSchema", {
      type: "object",
      properties: {},
      required: [],
      additionalProperties: !1
    });
    /**
     * Whether the input JSON schema is in strict mode. We **strongly** recommend setting this to
     * true, as it increases the likelihood of correct JSON input.
     */
    I(this, "strictJsonSchema", !0);
    /**
     * The function that invokes the handoff. The parameters passed are:
     * 1. The handoff run context
     * 2. The arguments from the LLM, as a JSON string. Empty string if inputJsonSchema is empty.
     *
     * Must return an agent
     */
    I(this, "onInvokeHandoff");
    /**
     * The name of the agent that is being handed off to.
     */
    I(this, "agentName");
    /**
     * A function that filters the inputs that are passed to the next agent. By default, the new agent
     * sees the entire conversation history. In some cases, you may want to filter inputs e.g. to
     * remove older inputs, or remove tools from existing inputs.
     *
     * The function will receive the entire conversation hisstory so far, including the input item
     * that triggered the handoff and a tool call output item representing the handoff tool's output.
     *
     * You are free to modify the input history or new items as you see fit. The next agent that runs
     * will receive `handoffInputData.allItems
     */
    I(this, "inputFilter");
    /**
     * The agent that is being handed off to.
     */
    I(this, "agent");
    I(this, "isEnabled", async () => !0);
    this.agentName = e.name, this.onInvokeHandoff = t, this.toolName = Rc(e), this.toolDescription = Pc(e), this.agent = e;
  }
  /**
   * Returns a function tool definition that can be used to invoke the handoff.
   */
  getHandoffAsFunctionTool() {
    return {
      type: "function",
      name: this.toolName,
      description: this.toolDescription,
      parameters: this.inputJsonSchema,
      strict: this.strictJsonSchema
    };
  }
}
function vi(n, e = {}) {
  let t;
  const r = !!e.onHandoff, s = !!e.inputType;
  if (!(r === s))
    throw new ne("You must provide either both `onHandoff` and `inputType` or neither.");
  async function o(c, d) {
    var f;
    if (t) {
      if (!d)
        throw Xe({
          message: `Handoff function expected non empty input but got: ${d}`,
          data: {
            details: "input is empty"
          }
        }), new we("Handoff function expected non empty input");
      try {
        const l = await t(d);
        e.onHandoff && await e.onHandoff(c, l);
      } catch (l) {
        throw Xe({
          message: "Invalid JSON provided",
          data: {}
        }), j.dontLogToolData || j.error(`Invalid JSON when parsing: ${d}. Error: ${l}`), new we("Invalid JSON provided");
      }
    } else
      await ((f = e.onHandoff) == null ? void 0 : f.call(e, c));
    return n;
  }
  const i = new _i(n, o);
  if (typeof e.isEnabled == "function") {
    const c = e.isEnabled;
    i.isEnabled = async ({ runContext: d, agent: f }) => !!await c({ runContext: d, agent: f });
  } else typeof e.isEnabled == "boolean" && (i.isEnabled = async () => e.isEnabled);
  if (e.inputType) {
    const c = _s(e.inputType, i.toolName);
    i.inputJsonSchema = c.schema, i.strictJsonSchema = !0, t = c.parser;
  }
  return e.toolNameOverride && (i.toolName = e.toolNameOverride), e.toolDescriptionOverride && (i.toolDescription = e.toolDescriptionOverride), e.inputFilter && (i.inputFilter = e.inputFilter), i;
}
function Dc(n) {
  return n instanceof _i ? n : vi(n);
}
function wi(n) {
  if (n.type !== "message" || n.role !== "assistant")
    return;
  const e = n.content[n.content.length - 1];
  if (e.type === "output_text")
    return e.text;
}
function Mc(n) {
  return n.output.length === 0 ? "" : wi(n.output[n.output.length - 1]) || "";
}
const Qr = /* @__PURE__ */ new WeakMap();
function jc(n, e) {
  n && Qr.set(n, e);
}
function $c(n) {
  const e = Qr.get(n);
  return e && Qr.delete(n), e;
}
const Fc = v({ input: p() }), Jt = class Jt extends Oc {
  constructor(t) {
    super();
    I(this, "name");
    I(this, "instructions");
    I(this, "prompt");
    I(this, "handoffDescription");
    I(this, "handoffs");
    I(this, "model");
    I(this, "modelSettings");
    I(this, "tools");
    I(this, "mcpServers");
    I(this, "inputGuardrails");
    I(this, "outputGuardrails");
    I(this, "outputType", "text");
    I(this, "toolUseBehavior");
    I(this, "resetToolChoice");
    I(this, "_toolsExplicitlyConfigured");
    if (typeof t.name != "string" || t.name.trim() === "")
      throw new ne("Agent must have a name.");
    if (this.name = t.name, this.instructions = t.instructions ?? Jt.DEFAULT_MODEL_PLACEHOLDER, this.prompt = t.prompt, this.handoffDescription = t.handoffDescription ?? "", this.handoffs = t.handoffs ?? [], this.model = t.model ?? "", this.modelSettings = t.modelSettings ?? Nc(), this.tools = t.tools ?? [], this._toolsExplicitlyConfigured = t.tools !== void 0, this.mcpServers = t.mcpServers ?? [], this.inputGuardrails = t.inputGuardrails ?? [], this.outputGuardrails = t.outputGuardrails ?? [], t.outputType && (this.outputType = t.outputType), this.toolUseBehavior = t.toolUseBehavior ?? "run_llm_again", this.resetToolChoice = t.resetToolChoice ?? !0, // The user sets a non-default model
    t.model !== void 0 && // The default model is gpt-5
    mi() && // However, the specified model is not a gpt-5 model
    (typeof t.model != "string" || !xr(t.model)) && // The model settings are not customized for the specified model
    t.modelSettings === void 0 && (this.modelSettings = {}), (t.handoffOutputTypeWarningEnabled === void 0 || t.handoffOutputTypeWarningEnabled) && this.handoffs && this.outputType) {
      const r = /* @__PURE__ */ new Set([JSON.stringify(this.outputType)]);
      for (const s of this.handoffs)
        "outputType" in s && s.outputType ? r.add(JSON.stringify(s.outputType)) : "agent" in s && s.agent.outputType && r.add(JSON.stringify(s.agent.outputType));
      r.size > 1 && j.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`);
    }
  }
  /**
   * Create an Agent with handoffs and automatically infer the union type for TOutput from the handoff agents' output types.
   */
  static create(t) {
    return new Jt({
      ...t,
      handoffs: t.handoffs,
      outputType: t.outputType,
      handoffOutputTypeWarningEnabled: !1
    });
  }
  /**
   * Output schema name.
   */
  get outputSchemaName() {
    if (this.outputType === "text")
      return "text";
    if (jt(this.outputType))
      return "ZodOutput";
    if (typeof this.outputType == "object")
      return this.outputType.name;
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Makes a copy of the agent, with the given arguments changed. For example, you could do:
   *
   * ```
   * const newAgent = agent.clone({ instructions: 'New instructions' })
   * ```
   *
   * @param config - A partial configuration to change.
   * @returns A new agent with the given changes.
   */
  clone(t) {
    return new Jt({
      ...this,
      ...t
    });
  }
  /**
   * Transform this agent into a tool, callable by other agents.
   *
   * This is different from handoffs in two ways:
   * 1. In handoffs, the new agent receives the conversation history. In this tool, the new agent
   *    receives generated input.
   * 2. In handoffs, the new agent takes over the conversation. In this tool, the new agent is
   *    called as a tool, and the conversation is continued by the original agent.
   *
   * @param options - Options for the tool.
   * @returns A tool that runs the agent and returns the output text.
   */
  asTool(t) {
    const { toolName: r, toolDescription: s, customOutputExtractor: a, needsApproval: o, runConfig: i, runOptions: c, isEnabled: d } = t;
    return Xr({
      name: r ?? mr(this.name),
      description: s ?? "",
      parameters: Fc,
      strict: !0,
      needsApproval: o,
      isEnabled: d,
      execute: async (f, l, h) => {
        if (!qu(f))
          throw new we("Agent tool called with invalid input");
        const S = await new fd(i ?? {}).run(this, f.input, {
          context: l,
          ...c ?? {}
        }), _ = typeof this.toolUseBehavior == "object" && this.toolUseBehavior !== null && "stopAtToolNames" in this.toolUseBehavior;
        typeof a != "function" && _ && j.debug(`You're passing the agent (name: ${this.name}) with toolUseBehavior.stopAtToolNames configured as a tool to a different agent; this may not work as you expect. You may want to have a wrapper function tool to consistently return the final output.`);
        const m = typeof a == "function" ? await a(S) : Mc(S.rawResponses[S.rawResponses.length - 1]);
        return h != null && h.toolCall && jc(h.toolCall, S), m;
      }
    });
  }
  /**
   * Returns the system prompt for the agent.
   *
   * If the agent has a function as its instructions, this function will be called with the
   * runContext and the agent instance.
   */
  async getSystemPrompt(t) {
    return typeof this.instructions == "function" ? await this.instructions(t, this) : this.instructions;
  }
  /**
   * Returns the prompt template for the agent, if defined.
   *
   * If the agent has a function as its prompt, this function will be called with the
   * runContext and the agent instance.
   */
  async getPrompt(t) {
    return typeof this.prompt == "function" ? await this.prompt(t, this) : this.prompt;
  }
  /**
   * Fetches the available tools from the MCP servers.
   * @returns the MCP powered tools
   */
  async getMcpTools(t) {
    return this.mcpServers.length > 0 ? vc({
      mcpServers: this.mcpServers,
      runContext: t,
      agent: this,
      convertSchemasToStrict: !1
    }) : [];
  }
  /**
   * ALl agent tools, including the MCPl and function tools.
   *
   * @returns all configured tools
   */
  async getAllTools(t) {
    const r = await this.getMcpTools(t), s = [];
    for (const a of this.tools) {
      if (a.type === "function") {
        const o = a.isEnabled;
        if (!(typeof o == "function" ? await o(t, this) : typeof o == "boolean" ? o : !0))
          continue;
      }
      s.push(a);
    }
    return [...r, ...s];
  }
  hasExplicitToolConfig() {
    return this._toolsExplicitlyConfigured;
  }
  /**
   * Returns the handoffs that should be exposed to the model for the current run.
   *
   * Handoffs that provide an `isEnabled` function returning `false` are omitted.
   */
  async getEnabledHandoffs(t) {
    var a;
    const r = ((a = this.handoffs) == null ? void 0 : a.map((o) => Dc(o))) ?? [], s = [];
    for (const o of r)
      await o.isEnabled({ runContext: t, agent: this }) && s.push(o);
    return s;
  }
  /**
   * Processes the final output of the agent.
   *
   * @param output - The output of the agent.
   * @returns The parsed out.
   */
  processFinalOutput(t) {
    if (this.outputType === "text")
      return t;
    if (typeof this.outputType == "object") {
      const r = JSON.parse(t);
      return jt(this.outputType) ? this.outputType.parse(r) : r;
    }
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Returns a JSON representation of the agent, which is serializable.
   *
   * @returns A JSON object containing the agent's name.
   */
  toJSON() {
    return {
      name: this.name
    };
  }
};
I(Jt, "DEFAULT_MODEL_PLACEHOLDER", "");
let nt = Jt;
function pa({ name: n, execute: e, runInParallel: t = !0 }) {
  return {
    type: "input",
    name: n,
    runInParallel: t,
    guardrailFunction: e,
    async run(r) {
      return {
        guardrail: { type: "input", name: n },
        output: await e(r)
      };
    }
  };
}
function es({ name: n, execute: e }) {
  return {
    type: "output",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "output", name: n },
        agent: t.agent,
        agentOutput: t.agentOutput,
        output: await e(t)
      };
    }
  };
}
function Lc() {
  throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.");
}
const le = v({
  /**
   * Additional optional provider specific data. Used for custom functionality or model provider
   * specific fields.
   */
  providerData: ee(p(), V()).optional()
}), Ee = le.extend({
  /**
   * An ID to identify the item. This is optional by default. If a model provider absolutely
   * requires this field, it will be validated on the model level.
   */
  id: p().optional()
}), Uc = le.extend({
  type: b("refusal"),
  /**
   * The refusal explanation from the model.
   */
  refusal: p()
}), Zc = le.extend({
  type: b("output_text"),
  /**
   * The text output from the model.
   */
  text: p()
}), bs = le.extend({
  type: b("input_text"),
  /**
   * A text input for example a message from a user
   */
  text: p()
}), qc = le.extend({
  type: b("reasoning_text"),
  /**
   * A text input for example a message from a user
   */
  text: p()
}), bi = le.extend({
  type: b("input_image"),
  /**
   * The image input to the model. Could be provided inline (`image`), as a URL, or by reference to a
   * previously uploaded OpenAI file.
   */
  image: p().or(v({ id: p().describe("OpenAI file ID") })).describe("Either base64 encoded image data, a data URL, or an object with a file ID.").optional(),
  /**
   * Controls the level of detail requested for image understanding tasks.
   * Future models may add new values, therefore this accepts any string.
   */
  detail: p().optional()
}), Ii = le.extend({
  type: b("input_file"),
  /**
   * The file input to the model. Could be raw data, a URL, or an OpenAI file ID.
   */
  file: p().describe("Either base64 encoded file data or a publicly accessible file URL").or(v({ id: p().describe("OpenAI file ID") })).or(v({ url: p().describe("Publicly accessible file URL") })).describe("Contents of the file or an object with a file ID.").optional(),
  /**
   * Optional filename metadata when uploading file data inline.
   */
  filename: p().optional()
}), xi = le.extend({
  type: b("audio"),
  /**
   * The audio input to the model. Could be base64 encoded audio data or an object with a file ID.
   */
  audio: p().or(v({
    id: p()
  })).describe("Base64 encoded audio data or file id"),
  /**
   * The format of the audio.
   */
  format: p().nullable().optional(),
  /**
   * The transcript of the audio.
   */
  transcript: p().nullable().optional()
}), Jc = le.extend({
  type: b("image"),
  /**
   * The image input to the model. Could be base64 encoded image data or an object with a file ID.
   */
  image: p().describe("Base64 encoded image data")
}), Bc = le.extend({
  type: b("text"),
  /**
   * The text output from the model.
   */
  text: p()
}), zc = v({
  data: tt([p(), Ya(Uint8Array)]).describe("Base64 image data, or raw bytes that will be base64 encoded automatically."),
  mediaType: p().optional()
}), Gc = v({
  url: p().describe("Publicly accessible URL pointing to the image content")
}), Vc = v({
  fileId: p().describe("OpenAI file ID referencing uploaded image content")
}), Wc = tt([zc, Gc, Vc]).describe("Inline image data or references to uploaded content."), Hc = v({
  data: tt([p(), Ya(Uint8Array)]).describe("Base64 encoded file data, or raw bytes that will be encoded automatically."),
  mediaType: p().describe("IANA media type describing the file contents"),
  filename: p().describe("Filename associated with the inline data")
}), Kc = v({
  url: p().describe("Publicly accessible URL for the file content"),
  filename: p().optional()
}), Yc = v({
  id: p().describe("OpenAI file ID referencing uploaded content"),
  filename: p().optional()
}), Xc = tt([
  p().describe("Existing data URL or base64 string"),
  Hc,
  Kc,
  Yc
]).describe("Inline data (with metadata) or references pointing to file contents."), Qc = (...n) => p(), el = le.extend({
  type: b("image"),
  /**
   * Inline image content or a reference to an uploaded file. Accepts a URL/data URL string or an
   * object describing the data/url/fileId source.
   */
  image: p().or(Wc).optional(),
  /**
   * Controls the requested level of detail for vision models.
   * Use a string to avoid constraining future model capabilities.
   */
  detail: Qc("low", "high", "auto").optional()
}), tl = le.extend({
  type: b("file"),
  /**
   * File output reference. Provide either a string (data URL / base64), a data object (requires
   * mediaType + filename), or an object pointing to an uploaded file/URL.
   */
  file: Xc
}), nl = le.extend({
  type: b("computer_screenshot"),
  /**
   * A base64 encoded image data or a URL representing the screenshot.
   */
  data: p().describe("Base64 encoded image data or URL")
}), rl = ge("type", [
  v({ type: b("screenshot") }),
  v({
    type: b("click"),
    x: E(),
    y: E(),
    button: oe(["left", "right", "wheel", "back", "forward"])
  }),
  v({
    type: b("double_click"),
    x: E(),
    y: E()
  }),
  v({
    type: b("scroll"),
    x: E(),
    y: E(),
    scroll_x: E(),
    scroll_y: E()
  }),
  v({
    type: b("type"),
    text: p()
  }),
  v({ type: b("wait") }),
  v({
    type: b("move"),
    x: E(),
    y: E()
  }),
  v({
    type: b("keypress"),
    keys: B(p())
  }),
  v({
    type: b("drag"),
    path: B(v({ x: E(), y: E() }))
  })
]), sl = ge("type", [
  Zc,
  Uc,
  xi,
  Jc
]), Is = Ee.extend({
  /**
   * Any item without a type is treated as a message
   */
  type: b("message").optional()
}), Sr = Is.extend({
  /**
   * Representing a message from the assistant (i.e. the model)
   */
  role: b("assistant"),
  /**
   * The status of the message.
   */
  status: oe(["in_progress", "completed", "incomplete"]),
  /**
   * The content of the message.
   */
  content: B(sl)
}), al = ge("type", [
  bs,
  bi,
  Ii,
  xi
]), Si = Is.extend({
  // type: z.literal('message'),
  /**
   * Representing a message from the user
   */
  role: b("user"),
  /**
   * The content of the message.
   */
  content: B(al).or(p())
}), Ti = Is.extend({
  // type: z.literal('message'),
  /**
   * Representing a system message to the user
   */
  role: b("system"),
  /**
   * The content of the message.
   */
  content: p()
});
ge("role", [
  Ti,
  Sr,
  Si
]);
const bn = Ee.extend({
  type: b("hosted_tool_call"),
  /**
   * The name of the hosted tool. For example `web_search_call` or `file_search_call`
   */
  name: p().describe("The name of the hosted tool"),
  /**
   * The arguments of the hosted tool call.
   */
  arguments: p().describe("The arguments of the hosted tool call").optional(),
  /**
   * The status of the tool call.
   */
  status: p().optional(),
  /**
   * The primary output of the tool call. Additional output might be in the `providerData` field.
   */
  output: p().optional()
}), In = Ee.extend({
  type: b("function_call"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: p().describe("The ID of the tool call"),
  /**
   * The name of the function.
   */
  name: p().describe("The name of the function"),
  /**
   * The status of the function call.
   */
  status: oe(["in_progress", "completed", "incomplete"]).optional(),
  /**
   * The arguments of the function call.
   */
  arguments: p()
}), il = ge("type", [
  Bc,
  el,
  tl
]), ol = ge("type", [
  bs,
  bi,
  Ii
]), gr = Ee.extend({
  type: b("function_call_result"),
  /**
   * The name of the tool that was called
   */
  name: p().describe("The name of the tool"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: p().describe("The ID of the tool call"),
  /**
   * The status of the tool call.
   */
  status: oe(["in_progress", "completed", "incomplete"]),
  /**
   * The output of the tool call.
   */
  output: tt([
    p(),
    il,
    B(ol)
  ]).describe("Output returned by the tool call. Supports plain strings, legacy ToolOutput items, or structured input_* items.")
}), xs = Ee.extend({
  type: b("computer_call"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: p().describe("The ID of the computer call"),
  /**
   * The status of the computer call.
   */
  status: oe(["in_progress", "completed", "incomplete"]),
  /**
   * The action to be performed by the computer.
   */
  action: rl
}), ul = Ee.extend({
  type: b("computer_call_result"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: p().describe("The ID of the computer call"),
  /**
   * The output of the computer call.
   */
  output: nl
}), cl = v({
  commands: B(p()),
  timeoutMs: E().int().min(0).optional(),
  maxOutputLength: E().int().min(0).optional()
}), Tr = Ee.extend({
  type: b("shell_call"),
  callId: p(),
  status: oe(["in_progress", "completed", "incomplete"]).optional(),
  action: cl
}), ll = ge("type", [
  v({ type: b("timeout") }),
  v({
    type: b("exit"),
    exitCode: E().int().nullable()
  })
]), dl = v({
  stdout: p(),
  stderr: p(),
  outcome: ll
}).passthrough(), ki = Ee.extend({
  type: b("shell_call_output"),
  callId: p(),
  maxOutputLength: E().optional(),
  output: B(dl)
}), pl = v({
  type: b("create_file"),
  path: p(),
  diff: p()
}), fl = v({
  type: b("update_file"),
  path: p(),
  diff: p()
}), hl = v({
  type: b("delete_file"),
  path: p()
}), ml = ge("type", [
  pl,
  fl,
  hl
]), kr = Ee.extend({
  type: b("apply_patch_call"),
  callId: p(),
  status: oe(["in_progress", "completed"]),
  operation: ml
}), Ai = Ee.extend({
  type: b("apply_patch_call_output"),
  callId: p(),
  status: oe(["completed", "failed"]),
  output: p().optional()
}), gl = ge("type", [
  xs,
  Tr,
  kr,
  In,
  bn
]), Ss = le.extend({
  id: p().optional(),
  type: b("reasoning"),
  /**
   * The user facing representation of the reasoning. Additional information might be in the `providerData` field.
   */
  content: B(bs),
  /**
   * The raw reasoning text from the model.
   */
  rawContent: B(qc).optional()
}), Oi = Ee.extend({
  type: b("unknown")
}), Ts = ge("type", [
  Sr,
  bn,
  In,
  xs,
  Tr,
  kr,
  gr,
  ki,
  Ai,
  Ss,
  Oi
]), yl = tt([
  Si,
  Sr,
  Ti,
  bn,
  In,
  xs,
  Tr,
  kr,
  gr,
  ul,
  ki,
  Ai,
  Ss,
  Oi
]), _l = v({
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: ee(p(), E()).optional(),
  outputTokensDetails: ee(p(), E()).optional()
}), vl = v({
  requests: E().optional(),
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: tt([
    ee(p(), E()),
    B(ee(p(), E()))
  ]).optional(),
  outputTokensDetails: tt([
    ee(p(), E()),
    B(ee(p(), E()))
  ]).optional(),
  requestUsageEntries: B(_l).optional()
}), Ci = le.extend({
  type: b("output_text_delta"),
  /**
   * The delta text that was streamed by the modelto the user.
   */
  delta: p()
}), wl = le.extend({
  type: b("response_started")
}), Ei = le.extend({
  type: b("response_done"),
  /**
   * The response from the model.
   */
  response: le.extend({
    /**
     * The ID of the response.
     */
    id: p(),
    /**
     * The usage data for the response.
     */
    usage: vl,
    /**
     * The output from the model.
     */
    output: B(Ts)
  })
}), bl = le.extend({
  type: b("model"),
  event: V().describe("The event from the model")
});
ge("type", [
  Ci,
  Ei,
  wl,
  bl
]);
class dn {
  constructor(e) {
    /**
     * The number of input tokens used for this request.
     */
    I(this, "inputTokens");
    /**
     * The number of output tokens used for this request.
     */
    I(this, "outputTokens");
    /**
     * The total number of tokens sent and received for this request.
     */
    I(this, "totalTokens");
    /**
     * Details about the input tokens used for this request.
     */
    I(this, "inputTokensDetails");
    /**
     * Details about the output tokens used for this request.
     */
    I(this, "outputTokensDetails");
    this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
    const t = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
    this.inputTokensDetails = t || {};
    const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
    this.outputTokensDetails = r || {};
  }
}
class Ar {
  constructor(e) {
    /**
     * The number of requests made to the LLM API.
     */
    I(this, "requests");
    /**
     * The number of input tokens used across all requests.
     */
    I(this, "inputTokens");
    /**
     * The number of output tokens used across all requests.
     */
    I(this, "outputTokens");
    /**
     * The total number of tokens sent and received, across all requests.
     */
    I(this, "totalTokens");
    /**
     * Details about the input tokens used across all requests.
     */
    I(this, "inputTokensDetails", []);
    /**
     * Details about the output tokens used across all requests.
     */
    I(this, "outputTokensDetails", []);
    /**
     * List of per-request usage entries for detailed cost calculations.
     */
    I(this, "requestUsageEntries");
    if (typeof e > "u")
      this.requests = 0, this.inputTokens = 0, this.outputTokens = 0, this.totalTokens = 0, this.inputTokensDetails = [], this.outputTokensDetails = [], this.requestUsageEntries = void 0;
    else {
      this.requests = (e == null ? void 0 : e.requests) ?? 1, this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
      const t = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
      Array.isArray(t) ? this.inputTokensDetails = t : this.inputTokensDetails = t ? [t] : [];
      const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
      Array.isArray(r) ? this.outputTokensDetails = r : this.outputTokensDetails = r ? [r] : [];
      const s = (e == null ? void 0 : e.requestUsageEntries) ?? (e == null ? void 0 : e.request_usage_entries), a = Array.isArray(s) ? s.map((o) => o instanceof dn ? o : new dn(o)) : void 0;
      this.requestUsageEntries = a && a.length > 0 ? a : void 0;
    }
  }
  add(e) {
    var t, r;
    this.requests += e.requests ?? 0, this.inputTokens += e.inputTokens ?? 0, this.outputTokens += e.outputTokens ?? 0, this.totalTokens += e.totalTokens ?? 0, e.inputTokensDetails && this.inputTokensDetails.push(...e.inputTokensDetails), e.outputTokensDetails && this.outputTokensDetails.push(...e.outputTokensDetails), Array.isArray(e.requestUsageEntries) && e.requestUsageEntries.length > 0 ? (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(...e.requestUsageEntries.map((s) => s instanceof dn ? s : new dn(s)))) : e.requests === 1 && e.totalTokens > 0 && (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(new dn({
      inputTokens: e.inputTokens,
      outputTokens: e.outputTokens,
      totalTokens: e.totalTokens,
      inputTokensDetails: (t = e.inputTokensDetails) == null ? void 0 : t[0],
      outputTokensDetails: (r = e.outputTokensDetails) == null ? void 0 : r[0]
    })));
  }
}
var Ie;
class Zt {
  constructor(e = {}) {
    /**
     * The context object you passed to the `Runner.run()` method.
     */
    I(this, "context");
    /**
     * The usage of the agent run so far. For streamed responses, the usage will be stale until the
     * last chunk of the stream is processed.
     */
    I(this, "usage");
    /**
     * A map of tool names to whether they have been approved.
     */
    N(this, Ie);
    this.context = e, this.usage = new Ar(), k(this, Ie, /* @__PURE__ */ new Map());
  }
  /**
   * Rebuild the approvals map from a serialized state.
   * @internal
   *
   * @param approvals - The approvals map to rebuild.
   */
  _rebuildApprovals(e) {
    k(this, Ie, new Map(Object.entries(e)));
  }
  /**
   * Check if a tool call has been approved.
   *
   * @param approval - Details about the tool call being evaluated.
   * @returns `true` if the tool call has been approved, `false` if blocked and `undefined` if not yet approved or rejected.
   */
  isToolApproved(e) {
    const { toolName: t, callId: r } = e, s = u(this, Ie).get(t);
    if ((s == null ? void 0 : s.approved) === !0 && s.rejected === !0)
      return j.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"), !0;
    if ((s == null ? void 0 : s.approved) === !0)
      return !0;
    if ((s == null ? void 0 : s.rejected) === !0)
      return !1;
    const a = Array.isArray(s == null ? void 0 : s.approved) ? s.approved.includes(r) : !1, o = Array.isArray(s == null ? void 0 : s.rejected) ? s.rejected.includes(r) : !1;
    if (a && o)
      return j.warn(`Tool call ${r} is both approved and rejected at the same time. Approval takes precedence`), !0;
    if (a)
      return !0;
    if (o)
      return !1;
  }
  /**
   * Approve a tool call.
   *
   * @param approvalItem - The tool approval item to approve.
   * @param options - Additional approval behavior options.
   */
  approveTool(e, { alwaysApprove: t = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (t) {
      u(this, Ie).set(r, {
        approved: !0,
        rejected: []
      });
      return;
    }
    const s = u(this, Ie).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.approved)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.approved.push(a);
    }
    u(this, Ie).set(r, s);
  }
  /**
   * Reject a tool call.
   *
   * @param approvalItem - The tool approval item to reject.
   */
  rejectTool(e, { alwaysReject: t = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (t) {
      u(this, Ie).set(r, {
        approved: !1,
        rejected: !0
      });
      return;
    }
    const s = u(this, Ie).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.rejected)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.rejected.push(a);
    }
    u(this, Ie).set(r, s);
  }
  toJSON() {
    return {
      context: this.context,
      usage: this.usage,
      approvals: Object.fromEntries(u(this, Ie).entries())
    };
  }
}
Ie = new WeakMap();
function Il(n) {
  return n.type === "function" ? {
    type: "function",
    name: n.name,
    description: n.description,
    parameters: n.parameters,
    strict: n.strict
  } : n.type === "computer" ? {
    type: "computer",
    name: n.name,
    environment: n.computer.environment,
    dimensions: n.computer.dimensions
  } : n.type === "shell" ? {
    type: "shell",
    name: n.name
  } : n.type === "apply_patch" ? {
    type: "apply_patch",
    name: n.name
  } : {
    type: "hosted_tool",
    name: n.name,
    providerData: n.providerData
  };
}
function xl(n) {
  return {
    toolName: n.toolName,
    toolDescription: n.toolDescription,
    inputJsonSchema: n.inputJsonSchema,
    strictJsonSchema: n.strictJsonSchema
  };
}
class Ft {
  constructor() {
    I(this, "type", "base_item");
    I(this, "rawItem");
  }
  toJSON() {
    return {
      type: this.type,
      rawItem: this.rawItem
    };
  }
}
class Or extends Ft {
  constructor(t, r) {
    super();
    I(this, "rawItem");
    I(this, "agent");
    I(this, "type", "message_output_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
  get content() {
    let t = "";
    for (const r of this.rawItem.content)
      r.type === "output_text" && (t += r.text);
    return t;
  }
}
class Ye extends Ft {
  constructor(t, r) {
    super();
    I(this, "rawItem");
    I(this, "agent");
    I(this, "type", "tool_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Ue extends Ft {
  constructor(t, r, s) {
    super();
    I(this, "rawItem");
    I(this, "agent");
    I(this, "output");
    I(this, "type", "tool_call_output_item");
    this.rawItem = t, this.agent = r, this.output = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      output: ft(this.output)
    };
  }
}
class ks extends Ft {
  constructor(t, r) {
    super();
    I(this, "rawItem");
    I(this, "agent");
    I(this, "type", "reasoning_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class As extends Ft {
  constructor(t, r) {
    super();
    I(this, "rawItem");
    I(this, "agent");
    I(this, "type", "handoff_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Os extends Ft {
  constructor(t, r, s) {
    super();
    I(this, "rawItem");
    I(this, "sourceAgent");
    I(this, "targetAgent");
    I(this, "type", "handoff_output_item");
    this.rawItem = t, this.sourceAgent = r, this.targetAgent = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      sourceAgent: this.sourceAgent.toJSON(),
      targetAgent: this.targetAgent.toJSON()
    };
  }
}
class ye extends Ft {
  constructor(t, r, s) {
    super();
    I(this, "rawItem");
    I(this, "agent");
    I(this, "toolName");
    I(this, "type", "tool_approval_item");
    this.rawItem = t, this.agent = r, this.toolName = s, this.toolName = s ?? t.name;
  }
  /**
   * Returns the tool name if available on the raw item or provided explicitly.
   * Kept for backwards compatibility with code that previously relied on `rawItem.name`.
   */
  get name() {
    return this.toolName ?? this.rawItem.name;
  }
  /**
   * Returns the arguments if the raw item has an arguments property otherwise this will be undefined.
   */
  get arguments() {
    return "arguments" in this.rawItem ? this.rawItem.arguments : void 0;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      toolName: this.toolName
    };
  }
}
function Cr(n) {
  return async (e, ...t) => us(async () => {
    const r = n(...t);
    Ns(r);
    try {
      return r.start(), await e(r);
    } catch (s) {
      throw r.setError({
        message: s.message,
        data: s.data
      }), s;
    } finally {
      r.end(), hn();
    }
  });
}
function Sl(n, e) {
  var t;
  return qe().createSpan({
    ...n,
    data: {
      type: "agent",
      name: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.name) ?? "Agent",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
function Tl(n, e) {
  var t, r;
  return qe().createSpan({
    ...n,
    data: {
      type: "function",
      input: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.input) ?? "",
      output: ((r = n == null ? void 0 : n.data) == null ? void 0 : r.output) ?? "",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const fa = Cr(Tl);
function kl(n, e) {
  return qe().createSpan({
    ...n,
    data: { type: "handoff", ...n == null ? void 0 : n.data }
  }, e);
}
const Al = Cr(kl);
function Ol(n, e) {
  return qe().createSpan({
    ...n,
    data: {
      type: "guardrail",
      triggered: !1,
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const ha = Cr(Ol);
function Cl(n, e) {
  return qe().createSpan({
    ...n,
    data: {
      type: "mcp_tools",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const El = Cr(Cl);
function ke(n) {
  if (n.length === 0)
    return "";
  const e = typeof globalThis < "u" && globalThis.Buffer ? globalThis.Buffer : void 0;
  if (e)
    return e.from(n).toString("base64");
  let t = "";
  for (let o = 0; o < n.length; o += 1)
    t += String.fromCharCode(n[o]);
  if (typeof globalThis.btoa == "function")
    return globalThis.btoa(t);
  const r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  let s = "", a = 0;
  for (; a < t.length; ) {
    const o = t.charCodeAt(a++), i = t.charCodeAt(a++), c = t.charCodeAt(a++), d = o >> 2, f = (o & 3) << 4 | i >> 4, l = isNaN(i) ? 64 : (i & 15) << 2 | c >> 6, h = isNaN(c) ? 64 : c & 63;
    s += r.charAt(d) + r.charAt(f) + r.charAt(l) + r.charAt(h);
  }
  return s;
}
class Nl {
  /**
   * @param data The raw responses stream events from the LLM.
   */
  constructor(e) {
    I(this, "data");
    /**
     * The type of the event.
     */
    I(this, "type", "raw_model_stream_event");
    this.data = e;
  }
}
class Rl {
  /**
   * @param name The name of the event.
   * @param item The item that was created.
   */
  constructor(e, t) {
    I(this, "name");
    I(this, "item");
    I(this, "type", "run_item_stream_event");
    this.name = e, this.item = t;
  }
}
class Pl {
  /**
   * @param agent The new agent
   */
  constructor(e) {
    I(this, "agent");
    I(this, "type", "agent_updated_stream_event");
    this.agent = e;
  }
}
function Dl(n) {
  if (!n || typeof n != "object" || !("rawItem" in n))
    return !1;
  const e = n.rawItem;
  if (!e || typeof e != "object")
    return !1;
  const t = e.type;
  return t === "function_call" || t === "hosted_tool_call";
}
function ma(n) {
  const e = n.rawItem;
  if (!e)
    return;
  if (e.type === "function_call" && e.callId)
    return `function_call:${e.callId}`;
  if ("callId" in e && e.callId)
    return `${e.type}:${e.callId}`;
  const t = "id" in e ? e.id : void 0;
  if (t)
    return `${e.type}:${t}`;
  const r = typeof e.providerData == "object" && e.providerData ? e.providerData : void 0;
  if (r != null && r.id)
    return `${e.type}:provider:${r.id}`;
  const s = "agent" in n && n.agent ? n.agent.name : "";
  try {
    return `${s}:${e.type}:${JSON.stringify(e)}`;
  } catch {
    return `${s}:${e.type}`;
  }
}
function Ml(n) {
  try {
    if (n instanceof $e) {
      const e = n.issues[0];
      if (e) {
        const t = Array.isArray(e.path) ? e.path : [], r = t.length > 0 ? t.map((a) => String(a)).join(".") : "(root)", s = ga(e.message ?? "");
        return `Invalid output type: final assistant output failed schema validation at "${r}" (${s}).`;
      }
      return "Invalid output type: final assistant output failed schema validation.";
    }
    if (n instanceof Error && n.message)
      return `Invalid output type: ${ga(n.message)}`;
  } catch {
  }
  return "Invalid output type: final assistant output did not match the expected schema.";
}
function ga(n, e = 160) {
  const t = n.trim();
  return t ? t.length <= e ? t : `${t.slice(0, e - 3)}...` : "Schema validation failed.";
}
function ya(n, e, t, r) {
  var x;
  const s = [], a = [], o = [], i = [], c = [], d = [], f = [], l = [], h = new Map(r.map((w) => [w.toolName, w])), g = new Map(t.filter((w) => w.type === "function").map((w) => [w.name, w])), y = t.find((w) => w.type === "computer"), S = t.find((w) => w.type === "shell"), _ = t.find((w) => w.type === "apply_patch"), m = new Map(t.filter((w) => {
    var D;
    return w.type === "hosted_tool" && ((D = w.providerData) == null ? void 0 : D.type) === "mcp";
  }).map((w) => w).map((w) => [w.providerData.server_label, w]));
  for (const w of n.output) {
    if (w.type === "message")
      w.role === "assistant" && s.push(new Or(w, e));
    else if (w.type === "hosted_tool_call") {
      s.push(new Ye(w, e));
      const T = w.name;
      if (l.push(T), ((x = w.providerData) == null ? void 0 : x.type) === "mcp_approval_request" || w.name === "mcp_approval_request") {
        const O = w.providerData, M = O.server_label, W = m.get(M);
        if (typeof W > "u") {
          const F = `MCP server (${M}) not found in Agent (${e.name})`;
          throw Xe({
            message: F,
            data: { mcp_server_label: M }
          }), new we(F);
        }
        const J = new ye({
          type: "hosted_tool_call",
          // We must use this name to align with the name sent from the servers
          name: O.name,
          id: O.id,
          status: "in_progress",
          providerData: O
        }, e);
        f.push({
          requestItem: J,
          mcpTool: W
        }), W.providerData.on_approval || s.push(J);
      }
    } else if (w.type === "reasoning")
      s.push(new ks(w, e));
    else if (w.type === "computer_call") {
      if (s.push(new Ye(w, e)), l.push("computer_use"), !y)
        throw Xe({
          message: "Model produced computer action without a computer tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced computer action without a computer tool.");
      i.push({
        toolCall: w,
        computer: y
      });
    } else if (w.type === "shell_call") {
      if (s.push(new Ye(w, e)), l.push("shell"), !S)
        throw Xe({
          message: "Model produced shell action without a shell tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced shell action without a shell tool.");
      c.push({
        toolCall: w,
        shell: S
      });
    } else if (w.type === "apply_patch_call") {
      if (s.push(new Ye(w, e)), l.push("apply_patch"), !_)
        throw Xe({
          message: "Model produced apply_patch action without an apply_patch tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced apply_patch action without an apply_patch tool.");
      d.push({
        toolCall: w,
        applyPatch: _
      });
    }
    if (w.type !== "function_call")
      continue;
    l.push(w.name);
    const D = h.get(w.name);
    if (D)
      s.push(new As(w, e)), a.push({
        toolCall: w,
        handoff: D
      });
    else {
      const T = g.get(w.name);
      if (!T)
        throw Xe({
          message: `Tool ${w.name} not found in agent ${e.name}.`,
          data: {
            tool_name: w.name,
            agent_name: e.name
          }
        }), new we(`Tool ${w.name} not found in agent ${e.name}.`);
      s.push(new Ye(w, e)), o.push({
        toolCall: w,
        tool: T
      });
    }
  }
  return {
    newItems: s,
    handoffs: a,
    functions: o,
    computerActions: i,
    shellActions: c,
    applyPatchActions: d,
    mcpApprovalRequests: f,
    toolsUsed: l,
    hasToolsOrApprovalsToRun() {
      return a.length > 0 || o.length > 0 || f.length > 0 || i.length > 0 || c.length > 0 || d.length > 0;
    }
  };
}
const jl = ge("type", [
  v({
    type: b("next_step_handoff"),
    newAgent: V()
  }),
  v({
    type: b("next_step_final_output"),
    output: p()
  }),
  v({
    type: b("next_step_run_again")
  }),
  v({
    type: b("next_step_interruption"),
    data: ee(p(), V())
  })
]);
class Me {
  constructor(e, t, r, s, a) {
    I(this, "originalInput");
    I(this, "modelResponse");
    I(this, "preStepItems");
    I(this, "newStepItems");
    I(this, "nextStep");
    this.originalInput = e, this.modelResponse = t, this.preStepItems = r, this.newStepItems = s, this.nextStep = a;
  }
  /**
   * The items generated during the agent run (i.e. everything generated after originalInput)
   */
  get generatedItems() {
    return this.preStepItems.concat(this.newStepItems);
  }
}
function $l(n, e, t) {
  return n.resetToolChoice && e.hasUsedTools(n) ? { ...t, toolChoice: void 0 } : t;
}
async function _a(n, e, t, r, s, a, o) {
  const i = t.filter((T) => T instanceof ye && "callId" in T.rawItem && T.rawItem.type === "function_call").map((T) => T.rawItem.callId), c = o.getInterruptions().filter(Dl);
  if (c.length > 0) {
    const T = /* @__PURE__ */ new Set();
    for (const O of c) {
      const M = ma(O);
      M && T.add(M);
    }
    if (T.size > 0) {
      let O = 0;
      for (let M = t.length - 1; M >= 0; M--) {
        const W = t[M];
        if (!(W instanceof ye))
          continue;
        const J = ma(W);
        if (J && T.has(J) && (O++, T.delete(J), T.size === 0))
          break;
      }
      O > 0 && (o._currentTurnPersistedItemCount = Math.max(0, o._currentTurnPersistedItemCount - O));
    }
  }
  const d = s.functions.filter((T) => i.includes(T.toolCall.callId)), f = await Ri(n, d, a, o), l = s.computerActions.length > 0 ? await Di(n, s.computerActions, a, o._context) : [], h = new Set(t), g = [], y = /* @__PURE__ */ new Set(), S = (T) => {
    h.has(T) || y.has(T) || (g.push(T), y.add(T));
  };
  for (const T of f)
    S(T.runItem);
  for (const T of l)
    S(T);
  const _ = s.mcpApprovalRequests.filter((T) => {
    var O;
    return T.requestItem.type === "tool_approval_item" && T.requestItem.rawItem.type === "hosted_tool_call" && ((O = T.requestItem.rawItem.providerData) == null ? void 0 : O.type) === "mcp_approval_request";
  }), m = /* @__PURE__ */ new Set(), x = /* @__PURE__ */ new Set();
  for (const T of _) {
    const O = T.requestItem.rawItem;
    if (O.type !== "hosted_tool_call")
      continue;
    const M = O.id, W = o._context.isToolApproved({
      // Since this item name must be the same with the one sent from Responses API server
      toolName: O.name,
      callId: M
    });
    if (typeof W < "u") {
      const J = {
        approve: W,
        approval_request_id: M,
        reason: void 0
      }, F = new Ye({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: J
      }, n);
      S(F);
    } else
      m.add(T.requestItem), x.add(M), f.push({
        type: "hosted_mcp_tool_approval",
        tool: T.mcpTool,
        runItem: T.requestItem
      }), S(T.requestItem);
  }
  const w = t.filter((T) => {
    var O;
    if (!(T instanceof ye))
      return !0;
    if (T.rawItem.type === "hosted_tool_call" && ((O = T.rawItem.providerData) == null ? void 0 : O.type) === "mcp_approval_request") {
      if (m.has(T))
        return !0;
      const M = T.rawItem.id;
      return M ? x.has(M) : !1;
    }
    return !1;
  }), D = await Ni({
    agent: n,
    runner: a,
    state: o,
    functionResults: f,
    originalInput: e,
    newResponse: r,
    preStepItems: w,
    newItems: g
  });
  return D || new Me(e, r, w, g, { type: "next_step_run_again" });
}
async function va(n, e, t, r, s, a, o) {
  var D, T, O, M, W, J;
  const i = t, c = new Set(t), d = [], f = (F) => {
    c.has(F) || (d.push(F), c.add(F));
  };
  for (const F of s.newItems)
    f(F);
  const [l, h, g, y] = await Promise.all([
    Ri(n, s.functions, a, o),
    Di(n, s.computerActions, a, o._context),
    ql(n, s.shellActions, a, o._context),
    Jl(n, s.applyPatchActions, a, o._context)
  ]);
  for (const F of l)
    f(F.runItem);
  for (const F of h)
    f(F);
  for (const F of g)
    f(F);
  for (const F of y)
    f(F);
  if (s.mcpApprovalRequests.length > 0)
    for (const F of s.mcpApprovalRequests) {
      const he = F.mcpTool.providerData, se = F.requestItem.rawItem.providerData;
      if (he.on_approval) {
        const ue = await he.on_approval(o._context, F.requestItem), Je = {
          approve: ue.approve,
          approval_request_id: se.id,
          reason: ue.reason
        };
        d.push(new Ye({
          type: "hosted_tool_call",
          name: "mcp_approval_response",
          providerData: Je
        }, n));
      } else {
        d.push(F.requestItem);
        const ue = {
          type: "hosted_mcp_tool_approval",
          tool: F.mcpTool,
          runItem: new ye({
            type: "hosted_tool_call",
            name: se.name,
            id: se.id,
            arguments: se.arguments,
            status: "in_progress",
            providerData: se
          }, n)
        };
        l.push(ue);
      }
    }
  if (s.handoffs.length > 0)
    return await Bl(n, e, i, d, r, s.handoffs, a, o._context);
  const S = await Ni({
    agent: n,
    runner: a,
    state: o,
    functionResults: l,
    originalInput: e,
    newResponse: r,
    preStepItems: i,
    newItems: d
  });
  if (S)
    return S;
  if ((((D = s.functions) == null ? void 0 : D.length) ?? 0) > 0 || (((T = s.computerActions) == null ? void 0 : T.length) ?? 0) > 0 || (((O = s.shellActions) == null ? void 0 : O.length) ?? 0) > 0 || (((M = s.applyPatchActions) == null ? void 0 : M.length) ?? 0) > 0 || (((W = s.mcpApprovalRequests) == null ? void 0 : W.length) ?? 0) > 0 || (((J = s.handoffs) == null ? void 0 : J.length) ?? 0) > 0)
    return new Me(e, r, i, d, { type: "next_step_run_again" });
  const m = d.filter((F) => F instanceof Or), x = m.length > 0 ? wi(m[m.length - 1].rawItem) : void 0;
  if (typeof x > "u")
    return new Me(e, r, i, d, { type: "next_step_run_again" });
  if (!l.some((F) => F.runItem instanceof ye)) {
    if (n.outputType === "text")
      return new Me(e, r, i, d, {
        type: "next_step_final_output",
        output: x
      });
    if (n.outputType !== "text" && x) {
      const { parser: F } = _s(n.outputType, "final_output"), [he] = await ms(() => F(x));
      if (he) {
        const se = Ml(he);
        throw Xe({
          message: se,
          data: {
            error: String(he)
          }
        }), new we(se);
      }
      return new Me(e, r, i, d, { type: "next_step_final_output", output: x });
    }
  }
  return new Me(e, r, i, d, { type: "next_step_run_again" });
}
async function Ni({ agent: n, runner: e, state: t, functionResults: r, originalInput: s, newResponse: a, preStepItems: o, newItems: i }) {
  const c = await zl(n, r, t);
  return c.isFinalOutput ? (e.emit("agent_end", t._context, n, c.finalOutput), n.emit("agent_end", t._context, c.finalOutput), new Me(s, a, o, i, {
    type: "next_step_final_output",
    output: c.finalOutput
  })) : c.isInterrupted ? new Me(s, a, o, i, {
    type: "next_step_interruption",
    data: {
      interruptions: c.interruptions
    }
  }) : null;
}
function yr(n, e) {
  const t = td(e);
  if (t) {
    const r = t.map(nd);
    return {
      type: "function_call_result",
      name: n.name,
      callId: n.callId,
      status: "completed",
      output: r
    };
  }
  return {
    type: "function_call_result",
    name: n.name,
    callId: n.callId,
    status: "completed",
    output: {
      type: "text",
      text: ft(e)
    }
  };
}
function Fl(n) {
  const e = n.file;
  if (typeof e == "string" && e.length > 0)
    return e;
  const t = Ll(e);
  if (t)
    return t;
  const r = Ul(n);
  return r || null;
}
function Ll(n) {
  if (!_t(n))
    return null;
  if ("data" in n && n.data !== void 0) {
    const t = n.data, r = typeof t == "string" && t.length > 0, s = t instanceof Uint8Array && t.length > 0;
    return !r && !s || !pe(n.mediaType) || !pe(n.filename) ? null : {
      data: typeof t == "string" ? t : new Uint8Array(t),
      mediaType: n.mediaType,
      filename: n.filename
    };
  }
  if (pe(n.url)) {
    const t = { url: n.url };
    return pe(n.filename) && (t.filename = n.filename), t;
  }
  const e = pe(n.id) && n.id || pe(n.fileId) && n.fileId;
  if (e) {
    const t = { id: e };
    return pe(n.filename) && (t.filename = n.filename), t;
  }
  return null;
}
function Ul(n) {
  const e = typeof n.filename == "string" && n.filename.length > 0 ? n.filename : void 0, t = typeof n.mediaType == "string" && n.mediaType.length > 0 ? n.mediaType : void 0;
  if (typeof n.fileData == "string" && n.fileData.length > 0)
    return !t || !e ? null : { data: n.fileData, mediaType: t, filename: e };
  if (n.fileData instanceof Uint8Array && n.fileData.length > 0)
    return !t || !e ? null : { data: new Uint8Array(n.fileData), mediaType: t, filename: e };
  if (typeof n.fileUrl == "string" && n.fileUrl.length > 0) {
    const r = { url: n.fileUrl };
    return e && (r.filename = e), r;
  }
  if (typeof n.fileId == "string" && n.fileId.length > 0) {
    const r = { id: n.fileId };
    return e && (r.filename = e), r;
  }
  return null;
}
function _t(n) {
  return typeof n == "object" && n !== null;
}
function pe(n) {
  return typeof n == "string" && n.length > 0;
}
function Xn(n, e) {
  if (typeof n == "string")
    return e && !n.startsWith("data:") ? qt(n, e) : n;
  const t = ke(n);
  return qt(t, e);
}
function qt(n, e) {
  return e ? `data:${e};base64,${n}` : n;
}
async function Ri(n, e, t, r) {
  async function s(a) {
    let o = a.toolCall.arguments;
    if (a.tool.parameters && (jt(a.tool.parameters) ? o = a.tool.parameters.parse(o) : o = JSON.parse(o)), await a.tool.needsApproval(r._context, o, a.toolCall.callId)) {
      const c = r._context.isToolApproved({
        toolName: a.tool.name,
        callId: a.toolCall.callId
      });
      if (c === !1)
        return fa(async (d) => {
          const f = "Tool execution was not approved.";
          return d.setError({
            message: f,
            data: {
              tool_name: a.tool.name,
              error: `Tool execution for ${a.toolCall.callId} was manually rejected by user.`
            }
          }), d.spanData.output = f, {
            type: "function_output",
            tool: a.tool,
            output: f,
            runItem: new Ue(yr(a.toolCall, f), n, f)
          };
        }, {
          data: {
            name: a.tool.name
          }
        });
      if (c !== !0)
        return {
          type: "function_approval",
          tool: a.tool,
          runItem: new ye(a.toolCall, n)
        };
    }
    return fa(async (c) => {
      t.config.traceIncludeSensitiveData && (c.spanData.input = a.toolCall.arguments);
      try {
        t.emit("agent_tool_start", r._context, n, a.tool, {
          toolCall: a.toolCall
        }), n.emit("agent_tool_start", r._context, a.tool, {
          toolCall: a.toolCall
        });
        const d = await a.tool.invoke(r._context, a.toolCall.arguments, { toolCall: a.toolCall }), f = ft(d);
        t.emit("agent_tool_end", r._context, n, a.tool, f, { toolCall: a.toolCall }), n.emit("agent_tool_end", r._context, a.tool, f, { toolCall: a.toolCall }), t.config.traceIncludeSensitiveData && (c.spanData.output = f);
        const l = {
          type: "function_output",
          tool: a.tool,
          output: d,
          runItem: new Ue(yr(a.toolCall, d), n, d)
        }, h = $c(a.toolCall);
        if (h) {
          l.agentRunResult = h;
          const g = h.interruptions;
          g.length > 0 && (l.interruptions = g);
        }
        return l;
      } catch (d) {
        throw c.setError({
          message: "Error running tool",
          data: {
            tool_name: a.tool.name,
            error: String(d)
          }
        }), d;
      }
    }, {
      data: {
        name: a.tool.name
      }
    });
  }
  try {
    return await Promise.all(e.map(s));
  } catch (a) {
    throw new Zu(`Failed to run function tools: ${a}`, a, r);
  }
}
async function Zl(n, e) {
  const t = e.action;
  let r;
  switch (t.type) {
    case "click":
      await n.click(t.x, t.y, t.button);
      break;
    case "double_click":
      await n.doubleClick(t.x, t.y);
      break;
    case "drag":
      await n.drag(t.path.map((s) => [s.x, s.y]));
      break;
    case "keypress":
      await n.keypress(t.keys);
      break;
    case "move":
      await n.move(t.x, t.y);
      break;
    case "screenshot":
      r = await n.screenshot();
      break;
    case "scroll":
      await n.scroll(t.x, t.y, t.scroll_x, t.scroll_y);
      break;
    case "type":
      await n.type(t.text);
      break;
    case "wait":
      await n.wait();
      break;
  }
  if (typeof r < "u" || typeof n.screenshot == "function" && (r = await n.screenshot(), typeof r < "u"))
    return r;
  throw new Error("Computer does not implement screenshot()");
}
function Pi(n) {
  if (n instanceof Error)
    return n.message || n.toString();
  try {
    return JSON.stringify(n);
  } catch {
    return String(n);
  }
}
async function ql(n, e, t, r, s = void 0) {
  const a = s ?? j, o = [];
  for (const i of e) {
    const c = i.shell, d = i.toolCall, f = new ye(d, n, c.name);
    if (await c.needsApproval(r, d.action, d.callId)) {
      if (c.onApproval) {
        const m = await c.onApproval(r, f);
        m.approve === !0 ? r.approveTool(f) : m.approve === !1 && r.rejectTool(f);
      }
      const _ = r.isToolApproved({
        toolName: c.name,
        callId: d.callId
      });
      if (_ === !1) {
        const m = "Tool execution was not approved.", x = {
          stdout: "",
          stderr: m,
          outcome: { type: "exit", exitCode: null }
        };
        o.push(new Ue({
          type: "shell_call_output",
          callId: d.callId,
          output: [x]
        }, n, m));
        continue;
      }
      if (_ !== !0) {
        o.push(f);
        continue;
      }
    }
    t.emit("agent_tool_start", r, n, c, {
      toolCall: d
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, c, { toolCall: d });
    let h;
    const g = {};
    let y;
    try {
      const _ = await c.shell.run(d.action);
      h = _.output ?? [], _.providerData && Object.assign(g, _.providerData), typeof _.maxOutputLength == "number" && (y = _.maxOutputLength);
    } catch (_) {
      h = [
        {
          stdout: "",
          stderr: Pi(_),
          outcome: { type: "exit", exitCode: null }
        }
      ], a.error("Failed to execute shell action:", _);
    }
    h = h ?? [], t.emit("agent_tool_end", r, n, c, JSON.stringify(h), {
      toolCall: d
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, c, JSON.stringify(h), {
      toolCall: d
    });
    const S = {
      type: "shell_call_output",
      callId: d.callId,
      output: h ?? []
    };
    typeof y == "number" && (S.maxOutputLength = y), Object.keys(g).length > 0 && (S.providerData = g), o.push(new Ue(S, n, S.output));
  }
  return o;
}
async function Jl(n, e, t, r, s = void 0) {
  const a = s ?? j, o = [];
  for (const i of e) {
    const c = i.applyPatch, d = i.toolCall, f = new ye(d, n, c.name);
    if (await c.needsApproval(r, d.operation, d.callId)) {
      if (c.onApproval) {
        const _ = await c.onApproval(r, f);
        _.approve === !0 ? r.approveTool(f) : _.approve === !1 && r.rejectTool(f);
      }
      const S = r.isToolApproved({
        toolName: c.name,
        callId: d.callId
      });
      if (S === !1) {
        const _ = "Tool execution was not approved.";
        o.push(new Ue({
          type: "apply_patch_call_output",
          callId: d.callId,
          status: "failed",
          output: _
        }, n, _));
        continue;
      }
      if (S !== !0) {
        o.push(f);
        continue;
      }
    }
    t.emit("agent_tool_start", r, n, c, {
      toolCall: d
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, c, {
      toolCall: d
    });
    let h = "completed", g = "";
    try {
      let S;
      switch (d.operation.type) {
        case "create_file":
          S = await c.editor.createFile(d.operation);
          break;
        case "update_file":
          S = await c.editor.updateFile(d.operation);
          break;
        case "delete_file":
          S = await c.editor.deleteFile(d.operation);
          break;
        default:
          throw new Error("Unsupported apply_patch operation");
      }
      S && typeof S.status == "string" && (h = S.status), S && typeof S.output == "string" && (g = S.output);
    } catch (S) {
      h = "failed", g = Pi(S), a.error("Failed to execute apply_patch operation:", S);
    }
    t.emit("agent_tool_end", r, n, c, g, {
      toolCall: d
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, c, g, {
      toolCall: d
    });
    const y = {
      type: "apply_patch_call_output",
      callId: d.callId,
      status: h
    };
    g && (y.output = g), o.push(new Ue(y, n, g));
  }
  return o;
}
async function Di(n, e, t, r, s = void 0) {
  const a = s ?? j, o = [];
  for (const i of e) {
    const c = i.computer.computer, d = i.toolCall;
    t.emit("agent_tool_start", r, n, i.computer, {
      toolCall: d
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, i.computer, { toolCall: d });
    let f;
    try {
      c.invoke ? f = await c.invoke(r, d) : f = await Zl(c, d);
    } catch (g) {
      a.error("Failed to execute computer action:", g), f = "";
    }
    t.emit("agent_tool_end", r, n, i.computer, f, {
      toolCall: d
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, i.computer, f, {
      toolCall: d
    });
    const l = f ? `data:image/png;base64,${f}` : "", h = {
      type: "computer_call_result",
      callId: d.callId,
      output: { type: "computer_screenshot", data: l }
    };
    o.push(new Ue(h, n, l));
  }
  return o;
}
async function Bl(n, e, t, r, s, a, o, i) {
  if (r = [...r], a.length === 0)
    return j.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."), new Me(e, s, t, r, { type: "next_step_run_again" });
  if (a.length > 1) {
    const d = "Multiple handoffs detected, ignoring this one.";
    for (let f = 1; f < a.length; f++)
      r.push(new Ue(yr(a[f].toolCall, d), n, d));
  }
  const c = a[0];
  return Al(async (d) => {
    const f = c.handoff, l = await f.onInvokeHandoff(i, c.toolCall.arguments);
    if (d.spanData.to_agent = l.name, a.length > 1) {
      const g = a.map((y) => y.handoff.agentName);
      d.setError({
        message: "Multiple handoffs requested",
        data: {
          requested_agents: g
        }
      });
    }
    r.push(new Os(yr(c.toolCall, yi(l)), n, l)), o.emit("agent_handoff", i, n, l), n.emit("agent_handoff", i, l);
    const h = f.inputFilter ?? o.config.handoffInputFilter;
    if (h) {
      j.debug("Filtering inputs for handoff"), typeof h != "function" && d.setError({
        message: "Invalid input filter",
        data: {
          details: "not callable"
        }
      });
      const g = {
        inputHistory: Array.isArray(e) ? [...e] : e,
        preHandoffItems: [...t],
        newItems: [...r],
        runContext: i
      }, y = h(g);
      e = y.inputHistory, t = y.preHandoffItems, r = y.newItems;
    }
    return new Me(e, s, t, r, { type: "next_step_handoff", newAgent: l });
  }, {
    data: {
      from_agent: n.name
    }
  });
}
const Qn = {
  isFinalOutput: !1,
  isInterrupted: void 0
};
async function zl(n, e, t) {
  if (e.length === 0)
    return Qn;
  const r = [];
  for (const o of e)
    if (o.runItem instanceof ye && r.push(o.runItem), o.type === "function_output") {
      if (Array.isArray(o.interruptions))
        r.push(...o.interruptions);
      else if (o.agentRunResult) {
        const i = o.agentRunResult.interruptions;
        i.length > 0 && r.push(...i);
      }
    }
  if (r.length > 0)
    return {
      isFinalOutput: !1,
      isInterrupted: !0,
      interruptions: r
    };
  if (n.toolUseBehavior === "run_llm_again")
    return Qn;
  const s = e[0];
  if (n.toolUseBehavior === "stop_on_first_tool")
    return (s == null ? void 0 : s.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: ft(s.output)
    } : Qn;
  const a = n.toolUseBehavior;
  if (typeof a == "object") {
    const o = e.find((i) => a.stopAtToolNames.includes(i.tool.name));
    return (o == null ? void 0 : o.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: ft(o.output)
    } : Qn;
  }
  if (typeof a == "function")
    return a(t._context, e);
  throw new ne(`Invalid toolUseBehavior: ${a}`, t);
}
function Gl(n) {
  if (n instanceof Or)
    return "message_output_created";
  if (n instanceof As)
    return "handoff_requested";
  if (n instanceof Os)
    return "handoff_occurred";
  if (n instanceof Ye)
    return "tool_called";
  if (n instanceof Ue)
    return "tool_output";
  if (n instanceof ks)
    return "reasoning_item_created";
  if (n instanceof ye)
    return "tool_approval_requested";
}
function Mi(n, e) {
  const t = Gl(e);
  if (!t) {
    j.warn("Unknown item type: ", e);
    return;
  }
  n._addItem(new Rl(t, e));
}
function Vl(n, e) {
  for (const t of e)
    Mi(n, t);
}
function wa(n, e, t) {
  const r = t == null ? void 0 : t.skipItems;
  for (const s of e.newStepItems)
    r != null && r.has(s) || Mi(n, s);
}
var zt;
class ba {
  constructor() {
    N(this, zt, /* @__PURE__ */ new Map());
  }
  addToolUse(e, t) {
    u(this, zt).set(e, t);
  }
  hasUsedTools(e) {
    return u(this, zt).has(e);
  }
  toJSON() {
    return Object.fromEntries(Array.from(u(this, zt).entries()).map(([e, t]) => [e.name, t]));
  }
}
zt = new WeakMap();
function Wl(n) {
  return typeof n == "string" ? [
    {
      type: "message",
      role: "user",
      content: n
    }
  ] : [...n];
}
function ji(n) {
  return n.filter((e) => e.type !== "tool_approval_item").map((e) => e.rawItem);
}
function Cs(n) {
  return n.map((e) => ts(ns(e)));
}
function ts(n, e = {}) {
  if (n == null)
    return n;
  const t = Hl(n);
  if (t)
    return Kl(t, e.mediaType);
  if (Array.isArray(n))
    return n.map((o) => ts(o, e));
  if (!$i(n))
    return n;
  const r = n, s = {}, a = typeof r.mediaType == "string" && r.mediaType.length > 0 ? r.mediaType : e.mediaType;
  for (const [o, i] of Object.entries(r)) {
    const c = o === "data" || o === "fileData" ? { mediaType: a } : e;
    s[o] = ts(i, c);
  }
  return s;
}
function Hl(n) {
  if (n instanceof ArrayBuffer)
    return new Uint8Array(n);
  if (Hn(n)) {
    const e = n;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (vs(n)) {
    const e = n;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (br(n)) {
    const e = n;
    return Uint8Array.from(e.data);
  }
}
function Kl(n, e) {
  const t = ke(n);
  return `data:${e && !e.startsWith("data:") ? e : "text/plain"};base64,${t}`;
}
function $i(n) {
  if (typeof n != "object" || n === null)
    return !1;
  const e = Object.getPrototypeOf(n);
  return e === Object.prototype || e === null;
}
function ns(n) {
  if (n == null)
    return n;
  if (Array.isArray(n))
    return n.map((a) => ns(a));
  if (!$i(n))
    return n;
  const e = n, t = {}, s = typeof e.type == "string" && e.type.length > 0 && Yl(e.type);
  for (const [a, o] of Object.entries(e))
    s && a === "id" || (t[a] = ns(o));
  return t;
}
function Yl(n) {
  switch (n) {
    case "function_call":
    case "function_call_result":
      return !0;
    default:
      return !1;
  }
}
async function Xl(n, e, t) {
  if (!n)
    return;
  const r = e ?? [], s = t.state, a = s._currentTurnPersistedItemCount ?? 0, o = t.newItems.slice(a);
  process.env.OPENAI_AGENTS__DEBUG_SAVE_SESSION && console.debug("saveToSession:newRunItems", o.map((f) => f.type));
  const i = ji(o), c = [...r, ...i];
  if (c.length === 0) {
    s._currentTurnPersistedItemCount = a + o.length;
    return;
  }
  const d = Cs(c);
  await n.addItems(d), s._currentTurnPersistedItemCount = a + o.length;
}
async function Ql(n, e) {
  if (!n || !e || e.length === 0)
    return;
  const t = Cs(e);
  await n.addItems(t);
}
async function Ia(n, e) {
  if (!n)
    return;
  const t = e.state, r = t._currentTurnPersistedItemCount ?? 0, s = e.newItems.slice(r), a = ji(s);
  if (a.length === 0) {
    t._currentTurnPersistedItemCount = r + s.length;
    return;
  }
  const o = Cs(a);
  await n.addItems(o), t._currentTurnPersistedItemCount = r + s.length;
}
async function ed(n, e, t, r) {
  if (!e)
    return {
      preparedInput: n,
      sessionItems: void 0
    };
  const s = (r == null ? void 0 : r.includeHistoryInPreparedInput) ?? !0, a = (r == null ? void 0 : r.preserveDroppedNewItems) ?? !1, o = await e.getItems(), i = Array.isArray(n) ? [...n] : Wl(n);
  if (!t)
    return {
      preparedInput: s ? [...o, ...i] : i,
      sessionItems: i
    };
  const c = o.slice(), d = i.slice(), f = await t(o, i);
  if (!Array.isArray(f))
    throw new ne("Session input callback must return an array of AgentInputItem objects.");
  const l = Sa(c), h = Sa(d), g = Ta(c), y = Ta(d), S = [];
  for (const m of f) {
    const x = Es(m);
    if (ka(y, x, m)) {
      Aa(h, x), S.push(m);
      continue;
    }
    if (ka(g, x, m)) {
      Aa(l, x);
      continue;
    }
    const w = l.get(x) ?? 0;
    if (w > 0) {
      l.set(x, w - 1);
      continue;
    }
    const D = h.get(x) ?? 0;
    if (D > 0) {
      h.set(x, D - 1), S.push(m);
      continue;
    }
    S.push(m);
  }
  return {
    preparedInput: s ? f : S.length > 0 ? S : a ? d : [],
    // Respect callbacks that intentionally drop the latest inputs (e.g. to redact sensitive
    // values) by persisting only the items they kept in the combined array.
    sessionItems: S
  };
}
function td(n) {
  if (Array.isArray(n)) {
    const t = [];
    for (const r of n) {
      const s = xa(r);
      if (!s)
        return null;
      t.push(s);
    }
    return t;
  }
  const e = xa(n);
  return e ? [e] : null;
}
function xa(n) {
  if (!_t(n))
    return null;
  const e = n.type;
  if (e === "text" && typeof n.text == "string") {
    const t = { type: "text", text: n.text };
    return _t(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "image") {
    const t = { type: "image" };
    let r, s;
    const a = pe(n.mediaType) ? n.mediaType : void 0, o = n.image;
    if (typeof o == "string" && o.length > 0)
      r = o;
    else if (_t(o)) {
      const i = o, c = pe(i.mediaType) ? i.mediaType : a;
      if (pe(i.url) ? r = i.url : (pe(i.data) || i.data instanceof Uint8Array && i.data.length > 0) && (r = Xn(i.data, c)), !r) {
        const d = pe(i.fileId) && i.fileId || pe(i.id) && i.id || void 0;
        d && (s = d);
      }
    }
    if (!r && typeof n.imageUrl == "string" && n.imageUrl.length > 0 && (r = n.imageUrl), !s && typeof n.fileId == "string" && n.fileId.length > 0 && (s = n.fileId), !r && typeof n.data == "string" && n.data.length > 0 ? r = a ? Xn(n.data, a) : n.data : !r && n.data instanceof Uint8Array && n.data.length > 0 && (r = Xn(n.data, a)), typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), r)
      t.image = r;
    else if (s)
      t.image = { fileId: s };
    else
      return null;
    return _t(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "file") {
    const t = Fl(n);
    if (!t)
      return null;
    const r = { type: "file", file: t };
    return _t(n.providerData) && (r.providerData = n.providerData), r;
  }
  return null;
}
function nd(n) {
  if (n.type === "text") {
    const t = {
      type: "input_text",
      text: n.text
    };
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "image") {
    const t = { type: "input_image" };
    if (typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), typeof n.image == "string" && n.image.length > 0)
      t.image = n.image;
    else if (_t(n.image)) {
      const r = n.image, s = pe(r.mediaType) ? r.mediaType : void 0;
      if (pe(r.url))
        t.image = r.url;
      else if (pe(r.data))
        t.image = s && !r.data.startsWith("data:") ? qt(r.data, s) : r.data;
      else if (r.data instanceof Uint8Array && r.data.length > 0) {
        const a = ke(r.data);
        t.image = qt(a, s);
      } else {
        const a = pe(r.fileId) && r.fileId || pe(r.id) && r.id || void 0;
        a && (t.image = { id: a });
      }
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "file") {
    const t = { type: "input_file" }, r = n.file;
    if (typeof r == "string")
      t.file = r;
    else if (r && typeof r == "object") {
      const s = r;
      if ("data" in s && s.data) {
        const a = s.mediaType ?? "text/plain";
        if (typeof s.data == "string")
          t.file = qt(s.data, a);
        else {
          const o = ke(s.data);
          t.file = qt(o, a);
        }
      } else if (typeof s.url == "string" && s.url.length > 0)
        t.file = { url: s.url };
      else {
        const a = typeof s.id == "string" && s.id.length > 0 && s.id || (typeof s.fileId == "string" && s.fileId.length > 0 ? s.fileId : void 0);
        a && (t.file = { id: a });
      }
      typeof s.filename == "string" && s.filename.length > 0 && (t.filename = s.filename);
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  return n;
}
function Sa(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = Es(t);
    e.set(r, (e.get(r) ?? 0) + 1);
  }
  return e;
}
function Ta(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = Es(t), s = e.get(r);
    s ? s.push(t) : e.set(r, [t]);
  }
  return e;
}
function ka(n, e, t) {
  const r = n.get(e);
  if (!r || r.length === 0)
    return !1;
  const s = r.findIndex((a) => a === t);
  return s === -1 ? !1 : (r.splice(s, 1), r.length === 0 && n.delete(e), !0);
}
function Aa(n, e) {
  const t = (n.get(e) ?? 0) - 1;
  t <= 0 ? n.delete(e) : n.set(e, t);
}
function Es(n) {
  return JSON.stringify(n, rd);
}
function rd(n, e) {
  if (e instanceof ArrayBuffer)
    return {
      __type: "ArrayBuffer",
      data: ke(new Uint8Array(e))
    };
  if (Hn(e)) {
    const t = e;
    return {
      __type: t.constructor.name,
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  if (vs(e)) {
    const t = e;
    return {
      __type: "Buffer",
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  return br(e) ? {
    __type: "Buffer",
    data: ke(Uint8Array.from(e.data))
  } : e;
}
const tr = "1.0", sd = b(tr), Pe = v({
  name: p()
}), ad = v({
  object: b("trace.span"),
  id: p(),
  trace_id: p(),
  parent_id: p().nullable(),
  started_at: p().nullable(),
  ended_at: p().nullable(),
  error: v({
    message: p(),
    data: ee(p(), V()).optional()
  }).nullable(),
  span_data: ee(p(), V())
}), Fi = ad.extend({
  previous_span: Yo(() => Fi).optional()
}), id = v({
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: ee(p(), E()).optional(),
  outputTokensDetails: ee(p(), E()).optional()
}), Li = v({
  requests: E(),
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: B(ee(p(), E())).optional(),
  outputTokensDetails: B(ee(p(), E())).optional(),
  requestUsageEntries: B(id).optional()
}), Oa = v({
  usage: Li,
  output: B(Ts),
  responseId: p().optional(),
  providerData: ee(p(), V()).optional()
}), Ui = ge("type", [
  v({
    type: b("message_output_item"),
    rawItem: Sr,
    agent: Pe
  }),
  v({
    type: b("tool_call_item"),
    rawItem: gl.or(bn),
    agent: Pe
  }),
  v({
    type: b("tool_call_output_item"),
    rawItem: gr,
    agent: Pe,
    output: p()
  }),
  v({
    type: b("reasoning_item"),
    rawItem: Ss,
    agent: Pe
  }),
  v({
    type: b("handoff_call_item"),
    rawItem: In,
    agent: Pe
  }),
  v({
    type: b("handoff_output_item"),
    rawItem: gr,
    sourceAgent: Pe,
    targetAgent: Pe
  }),
  v({
    type: b("tool_approval_item"),
    rawItem: In.or(bn).or(Tr).or(kr),
    agent: Pe,
    toolName: p().optional()
  })
]), od = v({
  object: b("trace"),
  id: p(),
  workflow_name: p(),
  group_id: p().nullable(),
  metadata: ee(p(), V())
}), ud = v({
  newItems: B(Ui),
  toolsUsed: B(p()),
  handoffs: B(v({
    toolCall: V(),
    handoff: V()
  })),
  functions: B(v({
    toolCall: V(),
    tool: V()
  })),
  computerActions: B(v({
    toolCall: V(),
    computer: V()
  })),
  shellActions: B(v({
    toolCall: V(),
    shell: V()
  })).optional(),
  applyPatchActions: B(v({
    toolCall: V(),
    applyPatch: V()
  })).optional(),
  mcpApprovalRequests: B(v({
    requestItem: v({
      // protocol.HostedToolCallItem
      rawItem: v({
        type: b("hosted_tool_call"),
        name: p(),
        arguments: p().optional(),
        status: p().optional(),
        output: p().optional(),
        // this always exists but marked as optional for early version compatibility; when releasing 1.0, we can remove the nullable and optional
        providerData: ee(p(), V()).nullable().optional()
      })
    }),
    // HostedMCPTool
    mcpTool: v({
      type: b("hosted_tool"),
      name: b("hosted_mcp"),
      providerData: ee(p(), V())
    })
  })).optional()
}), Zi = v({
  tripwireTriggered: Nt(),
  outputInfo: V()
}), cd = v({
  guardrail: v({
    type: b("input"),
    name: p()
  }),
  output: Zi
}), ld = v({
  guardrail: v({
    type: b("output"),
    name: p()
  }),
  agentOutput: V(),
  agent: Pe,
  output: Zi
}), Ca = v({
  $schemaVersion: sd,
  currentTurn: E(),
  currentAgent: Pe,
  originalInput: p().or(B(yl)),
  modelResponses: B(Oa),
  context: v({
    usage: Li,
    approvals: ee(p(), v({
      approved: B(p()).or(Nt()),
      rejected: B(p()).or(Nt())
    })),
    context: ee(p(), V())
  }),
  toolUseTracker: ee(p(), B(p())),
  maxTurns: E(),
  currentAgentSpan: Fi.nullable().optional(),
  noActiveAgentRun: Nt(),
  inputGuardrailResults: B(cd),
  outputGuardrailResults: B(ld),
  currentStep: jl.optional(),
  lastModelResponse: Oa.optional(),
  generatedItems: B(Ui),
  lastProcessedResponse: ud.optional(),
  currentTurnPersistedItemCount: E().int().min(0).optional(),
  trace: od.nullable()
});
class Ge {
  constructor(e, t, r, s) {
    /**
     * Current turn number in the conversation.
     */
    I(this, "_currentTurn", 0);
    /**
     * The agent currently handling the conversation.
     */
    I(this, "_currentAgent");
    /**
     * Original user input prior to any processing.
     */
    I(this, "_originalInput");
    /**
     * Responses from the model so far.
     */
    I(this, "_modelResponses");
    /**
     * Active tracing span for the current agent if tracing is enabled.
     */
    I(this, "_currentAgentSpan");
    /**
     * Run context tracking approvals, usage, and other metadata.
     */
    I(this, "_context");
    /**
     * Tracks what tools each agent has used.
     */
    I(this, "_toolUseTracker");
    /**
     * Items generated by the agent during the run.
     */
    I(this, "_generatedItems");
    /**
     * Number of `_generatedItems` already flushed to session storage for the current turn.
     *
     * Persisting the entire turn on every save would duplicate responses and tool outputs.
     * Instead, `saveToSession` appends only the delta since the previous write. This counter
     * tracks how many generated run items from *this turn* were already written so the next
     * save can slice off only the new entries. When a turn is interrupted (e.g., awaiting tool
     * approval) and later resumed, we rewind the counter before continuing so the pending tool
     * output still gets stored.
     */
    I(this, "_currentTurnPersistedItemCount");
    /**
     * Maximum allowed turns before forcing termination.
     */
    I(this, "_maxTurns");
    /**
     * Whether the run has an active agent step in progress.
     */
    I(this, "_noActiveAgentRun", !0);
    /**
     * Last model response for the previous turn.
     */
    I(this, "_lastTurnResponse");
    /**
     * Results from input guardrails applied to the run.
     */
    I(this, "_inputGuardrailResults");
    /**
     * Results from output guardrails applied to the run.
     */
    I(this, "_outputGuardrailResults");
    /**
     * Next step computed for the agent to take.
     */
    I(this, "_currentStep");
    /**
     * Parsed model response after applying guardrails and tools.
     */
    I(this, "_lastProcessedResponse");
    /**
     * Trace associated with this run if tracing is enabled.
     */
    I(this, "_trace", null);
    this._context = e, this._originalInput = structuredClone(t), this._modelResponses = [], this._currentAgentSpan = void 0, this._currentAgent = r, this._toolUseTracker = new ba(), this._generatedItems = [], this._currentTurnPersistedItemCount = 0, this._maxTurns = s, this._inputGuardrailResults = [], this._outputGuardrailResults = [], this._trace = on();
  }
  /**
   * The usage aggregated for this run. This includes per-request breakdowns when available.
   */
  get usage() {
    return this._context.usage;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during the run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return xn(this._originalInput, this._generatedItems);
  }
  /**
   * Returns all interruptions if the current step is an interruption otherwise returns an empty array.
   */
  getInterruptions() {
    var e;
    return ((e = this._currentStep) == null ? void 0 : e.type) !== "next_step_interruption" ? [] : this._currentStep.data.interruptions;
  }
  /**
   * Approves a tool call requested by the agent through an interruption and approval item request.
   *
   * To approve the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only approve the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysApprove` option to `true`.
   *
   * @param approvalItem - The tool call approval item to approve.
   * @param options - Options for the approval.
   */
  approve(e, t = { alwaysApprove: !1 }) {
    this._context.approveTool(e, t);
  }
  /**
   * Rejects a tool call requested by the agent through an interruption and approval item request.
   *
   * To reject the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only reject the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysReject` option to `true`.
   *
   * @param approvalItem - The tool call approval item to reject.
   * @param options - Options for the rejection.
   */
  reject(e, t = { alwaysReject: !1 }) {
    this._context.rejectTool(e, t);
  }
  /**
   * Serializes the run state to a JSON object.
   *
   * This method is used to serialize the run state to a JSON object that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toJSON() {
    var r;
    const e = {
      $schemaVersion: tr,
      currentTurn: this._currentTurn,
      currentAgent: {
        name: this._currentAgent.name
      },
      originalInput: this._originalInput,
      modelResponses: this._modelResponses.map((s) => ({
        usage: {
          requests: s.usage.requests,
          inputTokens: s.usage.inputTokens,
          outputTokens: s.usage.outputTokens,
          totalTokens: s.usage.totalTokens,
          inputTokensDetails: s.usage.inputTokensDetails,
          outputTokensDetails: s.usage.outputTokensDetails,
          ...s.usage.requestUsageEntries && s.usage.requestUsageEntries.length > 0 ? {
            requestUsageEntries: s.usage.requestUsageEntries.map((a) => ({
              inputTokens: a.inputTokens,
              outputTokens: a.outputTokens,
              totalTokens: a.totalTokens,
              inputTokensDetails: a.inputTokensDetails,
              outputTokensDetails: a.outputTokensDetails
            }))
          } : {}
        },
        output: s.output,
        responseId: s.responseId,
        providerData: s.providerData
      })),
      context: this._context.toJSON(),
      toolUseTracker: this._toolUseTracker.toJSON(),
      maxTurns: this._maxTurns,
      currentAgentSpan: (r = this._currentAgentSpan) == null ? void 0 : r.toJSON(),
      noActiveAgentRun: this._noActiveAgentRun,
      inputGuardrailResults: this._inputGuardrailResults,
      outputGuardrailResults: this._outputGuardrailResults.map((s) => ({
        ...s,
        agent: s.agent.toJSON()
      })),
      currentStep: this._currentStep,
      lastModelResponse: this._lastTurnResponse,
      generatedItems: this._generatedItems.map((s) => s.toJSON()),
      currentTurnPersistedItemCount: this._currentTurnPersistedItemCount,
      lastProcessedResponse: this._lastProcessedResponse,
      trace: this._trace ? this._trace.toJSON() : null
    }, t = Ca.safeParse(e);
    if (!t.success)
      throw new Uu(`Failed to serialize run state. ${t.error.message}`);
    return t.data;
  }
  /**
   * Serializes the run state to a string.
   *
   * This method is used to serialize the run state to a string that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toString() {
    return JSON.stringify(this.toJSON());
  }
  /**
   * Deserializes a run state from a string.
   *
   * This method is used to deserialize a run state from a string that was serialized using the
   * `toString` method.
   */
  static async fromString(e, t) {
    var l, h, g, y, S;
    const [r, s] = await ms(() => JSON.parse(t));
    if (r)
      throw new ne(`Failed to parse run state. ${r instanceof Error ? r.message : String(r)}`);
    const a = s.$schemaVersion;
    if (!a)
      throw new ne("Run state is missing schema version");
    if (a !== tr)
      throw new ne(`Run state schema version ${a} is not supported. Please use version ${tr}`);
    const o = Ca.parse(JSON.parse(t)), i = dd(e), c = new Zt(o.context.context);
    c._rebuildApprovals(o.context.approvals);
    const d = i.get(o.currentAgent.name);
    if (!d)
      throw new ne(`Agent ${o.currentAgent.name} not found`);
    const f = new Ge(c, "", d, o.maxTurns);
    f._currentTurn = o.currentTurn, f._toolUseTracker = new ba();
    for (const [_, m] of Object.entries(o.toolUseTracker))
      f._toolUseTracker.addToolUse(i.get(_), m);
    if (o.currentAgentSpan) {
      o.trace || j.warn("Trace is not set, skipping tracing setup");
      const _ = qe().createTrace({
        traceId: (l = o.trace) == null ? void 0 : l.id,
        name: (h = o.trace) == null ? void 0 : h.workflow_name,
        groupId: ((g = o.trace) == null ? void 0 : g.group_id) ?? void 0,
        metadata: (y = o.trace) == null ? void 0 : y.metadata
      });
      f._currentAgentSpan = qi(_, o.currentAgentSpan), f._trace = _;
    }
    return f._noActiveAgentRun = o.noActiveAgentRun, f._inputGuardrailResults = o.inputGuardrailResults, f._outputGuardrailResults = o.outputGuardrailResults.map((_) => ({
      ..._,
      agent: i.get(_.agent.name)
    })), f._currentStep = o.currentStep, f._originalInput = o.originalInput, f._modelResponses = o.modelResponses.map(Ea), f._lastTurnResponse = o.lastModelResponse ? Ea(o.lastModelResponse) : void 0, f._generatedItems = o.generatedItems.map((_) => Ji(_, i)), f._currentTurnPersistedItemCount = o.currentTurnPersistedItemCount ?? 0, f._lastProcessedResponse = o.lastProcessedResponse ? await pd(i, f._currentAgent, f._context, o.lastProcessedResponse) : void 0, ((S = o.currentStep) == null ? void 0 : S.type) === "next_step_handoff" && (f._currentStep = {
      type: "next_step_handoff",
      newAgent: i.get(o.currentStep.newAgent.name)
    }), f;
  }
}
function dd(n) {
  const e = /* @__PURE__ */ new Map(), t = [n];
  for (; t.length > 0; ) {
    const r = t.shift();
    if (!e.has(r.name)) {
      e.set(r.name, r);
      for (const s of r.handoffs)
        s instanceof nt ? e.has(s.name) || t.push(s) : s.agent && (e.has(s.agent.name) || t.push(s.agent));
    }
  }
  return e;
}
function qi(n, e) {
  const t = e.span_data, r = e.previous_span ? qi(n, e.previous_span) : void 0, s = qe().createSpan({
    spanId: e.id,
    traceId: e.trace_id,
    parentId: e.parent_id ?? void 0,
    startedAt: e.started_at ?? void 0,
    endedAt: e.ended_at ?? void 0,
    data: t
  }, n);
  return s.previousSpan = r, s;
}
function Ea(n) {
  return {
    usage: new Ar(n.usage),
    output: n.output.map((t) => Ts.parse(t)),
    responseId: n.responseId,
    providerData: n.providerData
  };
}
function Ji(n, e) {
  switch (n.type) {
    case "message_output_item":
      return new Or(n.rawItem, e.get(n.agent.name));
    case "tool_call_item":
      return new Ye(n.rawItem, e.get(n.agent.name));
    case "tool_call_output_item":
      return new Ue(n.rawItem, e.get(n.agent.name), n.output);
    case "reasoning_item":
      return new ks(n.rawItem, e.get(n.agent.name));
    case "handoff_call_item":
      return new As(n.rawItem, e.get(n.agent.name));
    case "handoff_output_item":
      return new Os(n.rawItem, e.get(n.sourceAgent.name), e.get(n.targetAgent.name));
    case "tool_approval_item":
      return new ye(n.rawItem, e.get(n.agent.name), n.toolName);
  }
}
async function pd(n, e, t, r) {
  const s = await e.getAllTools(t), a = new Map(s.filter((l) => l.type === "function").map((l) => [l.name, l])), o = new Map(s.filter((l) => l.type === "computer").map((l) => [l.name, l])), i = new Map(s.filter((l) => l.type === "shell").map((l) => [l.name, l])), c = new Map(s.filter((l) => l.type === "apply_patch").map((l) => [l.name, l])), d = new Map(e.handoffs.map((l) => l instanceof nt ? [l.name, vi(l)] : [l.toolName, l])), f = {
    newItems: r.newItems.map((l) => Ji(l, n)),
    toolsUsed: r.toolsUsed,
    handoffs: r.handoffs.map((l) => {
      if (!d.has(l.handoff.toolName))
        throw new ne(`Handoff ${l.handoff.toolName} not found`);
      return {
        toolCall: l.toolCall,
        handoff: d.get(l.handoff.toolName)
      };
    }),
    functions: await Promise.all(r.functions.map(async (l) => {
      if (!a.has(l.tool.name))
        throw new ne(`Tool ${l.tool.name} not found`);
      return {
        toolCall: l.toolCall,
        tool: a.get(l.tool.name)
      };
    })),
    computerActions: r.computerActions.map((l) => {
      const h = l.computer.name;
      if (!o.has(h))
        throw new ne(`Computer tool ${h} not found`);
      return {
        toolCall: l.toolCall,
        computer: o.get(h)
      };
    }),
    shellActions: (r.shellActions ?? []).map((l) => {
      const h = l.shell.name;
      if (!i.has(h))
        throw new ne(`Shell tool ${h} not found`);
      return {
        toolCall: l.toolCall,
        shell: i.get(h)
      };
    }),
    applyPatchActions: (r.applyPatchActions ?? []).map((l) => {
      const h = l.applyPatch.name;
      if (!c.has(h))
        throw new ne(`Apply patch tool ${h} not found`);
      return {
        toolCall: l.toolCall,
        applyPatch: c.get(h)
      };
    }),
    mcpApprovalRequests: (r.mcpApprovalRequests ?? []).map((l) => ({
      requestItem: new ye(l.requestItem.rawItem, e),
      mcpTool: l.mcpTool
    }))
  };
  return {
    ...f,
    hasToolsOrApprovalsToRun() {
      return f.handoffs.length > 0 || f.functions.length > 0 || f.mcpApprovalRequests.length > 0 || f.computerActions.length > 0 || f.shellActions.length > 0 || f.applyPatchActions.length > 0;
    }
  };
}
var re, rs, ss, Bi, zi, Gi, Vi, fn, as, is;
class fd extends Cc {
  /**
   * Creates a runner with optional defaults that apply to every subsequent run invocation.
   *
   * @param config - Overrides for models, guardrails, tracing, or session behavior.
   */
  constructor(t = {}) {
    super();
    N(this, re);
    I(this, "config");
    // --------------------------------------------------------------
    //  Internals
    // --------------------------------------------------------------
    I(this, "inputGuardrailDefs");
    I(this, "outputGuardrailDefs");
    this.config = {
      modelProvider: t.modelProvider ?? Lc(),
      model: t.model,
      modelSettings: t.modelSettings,
      handoffInputFilter: t.handoffInputFilter,
      inputGuardrails: t.inputGuardrails,
      outputGuardrails: t.outputGuardrails,
      tracingDisabled: t.tracingDisabled ?? !1,
      traceIncludeSensitiveData: t.traceIncludeSensitiveData ?? !0,
      workflowName: t.workflowName ?? "Agent workflow",
      traceId: t.traceId,
      groupId: t.groupId,
      traceMetadata: t.traceMetadata,
      sessionInputCallback: t.sessionInputCallback,
      callModelInputFilter: t.callModelInputFilter
    }, this.inputGuardrailDefs = (t.inputGuardrails ?? []).map(pa), this.outputGuardrailDefs = (t.outputGuardrails ?? []).map(es);
  }
  async run(t, r, s = {
    stream: !1,
    context: void 0
  }) {
    const a = s ?? { stream: !1, context: void 0 }, o = a.sessionInputCallback ?? this.config.sessionInputCallback, i = a.callModelInputFilter ?? this.config.callModelInputFilter, c = !!i, d = {
      ...a,
      sessionInputCallback: o,
      callModelInputFilter: i
    }, f = !!d.conversationId || !!d.previousResponseId, l = d.session, h = r instanceof Ge;
    let g = l && h ? [] : void 0, y, S = l && h ? /* @__PURE__ */ new Map() : void 0;
    const _ = (T, O) => {
      const M = S;
      if (O !== void 0) {
        if (!M) {
          y = O.map((se) => structuredClone(se));
          return;
        }
        const J = [], F = /* @__PURE__ */ new WeakMap();
        for (const se of T) {
          if (!se || typeof se != "object")
            continue;
          const ue = (F.get(se) ?? 0) + 1;
          F.set(se, ue);
        }
        const he = () => {
          for (const [se, ue] of M)
            if (ue > 0)
              return M.set(se, ue - 1), !0;
          return !1;
        };
        for (let se = 0; se < O.length; se++) {
          const ue = O[se];
          if (!ue)
            continue;
          let Je = !1;
          const Ne = T[se];
          if (Ne && typeof Ne == "object") {
            const $s = (F.get(Ne) ?? 0) - 1;
            if (F.set(Ne, $s), $s > 0)
              continue;
            const Fs = vt(Ne), Ls = M.get(Fs) ?? 0;
            if (Ls > 0) {
              M.set(Fs, Ls - 1), J.push(structuredClone(ue)), Je = !0;
              continue;
            }
          }
          const ln = vt(ue), Kn = M.get(ln) ?? 0;
          if (Kn > 0) {
            M.set(ln, Kn - 1), J.push(structuredClone(ue)), Je = !0;
            continue;
          }
          !Ne && he() && (J.push(structuredClone(ue)), Je = !0), !Je && !Ne && y === void 0 && J.push(structuredClone(ue));
        }
        (J.length > 0 || y === void 0) && (y = J);
        return;
      }
      const W = [];
      if (M)
        for (const J of T) {
          if (!J)
            continue;
          const F = vt(J), he = M.get(F) ?? 0;
          he <= 0 || (M.set(F, he - 1), W.push(structuredClone(J)));
        }
      else
        for (const J of T)
          J && W.push(structuredClone(J));
      W.length > 0 ? y = W : y === void 0 && (y = []);
    }, m = () => {
      if (y !== void 0)
        return y;
      if (!c)
        return g;
    };
    let x = r;
    if (!(x instanceof Ge)) {
      if (l && Array.isArray(x) && !o)
        throw new ne("RunConfig.sessionInputCallback must be provided when using session history with list inputs.");
      const T = await ed(x, l, o, {
        // When the server tracks conversation state we only send the new turn inputs;
        // previous messages are recovered via conversationId/previousResponseId.
        includeHistoryInPreparedInput: !f,
        preserveDroppedNewItems: f
      });
      if (f && l) {
        const O = T.sessionItems;
        O && O.length > 0 ? x = O : x = T.preparedInput;
      } else
        x = T.preparedInput;
      if (l) {
        const O = T.sessionItems ?? [];
        g = O.map((M) => structuredClone(M)), S = /* @__PURE__ */ new Map();
        for (const M of O) {
          const W = vt(M);
          S.set(W, (S.get(W) ?? 0) + 1);
        }
      }
    }
    let w;
    if (l && !f) {
      let T = !1;
      w = async () => {
        if (T)
          return;
        const O = m();
        !O || O.length === 0 || (T = !0, await Ql(l, O));
      };
    }
    const D = async () => {
      if (d.stream)
        return await L(this, re, Vi).call(this, t, x, d, w, _);
      const T = await L(this, re, zi).call(this, t, x, d, _);
      return l && !f && await Xl(l, m(), T), T;
    };
    return x instanceof Ge && x._trace ? wd(x._trace, async () => (x._currentAgentSpan && Ns(x._currentAgentSpan), D())) : bd(async () => D(), {
      traceId: this.config.traceId,
      name: this.config.workflowName,
      groupId: this.config.groupId,
      metadata: this.config.traceMetadata
    });
  }
}
re = new WeakSet(), rs = function(t) {
  return this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(pa));
}, ss = function(t) {
  const r = L(this, re, rs).call(this, t), s = [], a = [];
  for (const o of r)
    o.runInParallel === !1 ? s.push(o) : a.push(o);
  return { blocking: s, parallel: a };
}, Bi = async function(t) {
  const r = t.model !== void 0 && t.model !== nt.DEFAULT_MODEL_PLACEHOLDER || this.config.model !== void 0 && this.config.model !== nt.DEFAULT_MODEL_PLACEHOLDER;
  let s = hd(t.model, this.config.model);
  return typeof s == "string" && (s = await this.config.modelProvider.getModel(s)), { model: s, explictlyModelSet: r };
}, zi = async function(t, r, s, a) {
  return us(async () => {
    var d, f;
    const o = r instanceof Ge, i = o ? r : new Ge(s.context instanceof Zt ? s.context : new Zt(s.context), r, t, s.maxTurns ?? Na), c = s.conversationId || s.previousResponseId ? new Pa({
      conversationId: s.conversationId,
      previousResponseId: s.previousResponseId
    }) : void 0;
    c && o && c.primeFromState({
      originalInput: i._originalInput,
      generatedItems: i._generatedItems,
      modelResponses: i._modelResponses
    });
    try {
      for (; ; ) {
        if (i._currentStep = i._currentStep ?? {
          type: "next_step_run_again"
        }, i._currentStep.type === "next_step_interruption") {
          if (j.debug("Continuing from interruption"), !i._lastTurnResponse || !i._lastProcessedResponse)
            throw new ne("No model response found in previous state", i);
          const l = await _a(i._currentAgent, i._originalInput, i._generatedItems, i._lastTurnResponse, i._lastProcessedResponse, this, i);
          if (i._toolUseTracker.addToolUse(i._currentAgent, i._lastProcessedResponse.toolsUsed), i._originalInput = l.originalInput, i._generatedItems = l.generatedItems, l.nextStep.type === "next_step_run_again" && (i._currentTurnPersistedItemCount = 0), i._currentStep = l.nextStep, l.nextStep.type === "next_step_interruption")
            return new jr(i);
          continue;
        }
        if (i._currentStep.type === "next_step_run_again") {
          const l = await Da(i);
          if (i._currentTurn++, i._currentTurnPersistedItemCount = 0, i._currentTurn > i._maxTurns)
            throw (d = i._currentAgentSpan) == null || d.setError({
              message: "Max turns exceeded",
              data: { max_turns: i._maxTurns }
            }), new ta(`Max turns (${i._maxTurns}) exceeded`, i);
          j.debug(`Running agent ${i._currentAgent.name} (turn ${i._currentTurn})`);
          let h;
          if (i._currentTurn === 1) {
            const m = L(this, re, ss).call(this, i);
            m.blocking.length > 0 && await L(this, re, fn).call(this, i, m.blocking), m.parallel.length > 0 && (h = L(this, re, fn).call(this, i, m.parallel), h.catch(() => {
            }));
          }
          const g = c ? c.prepareInput(i._originalInput, i._generatedItems) : xn(i._originalInput, i._generatedItems);
          i._noActiveAgentRun && (i._currentAgent.emit("agent_start", i._context, i._currentAgent), this.emit("agent_start", i._context, i._currentAgent));
          const y = await L(this, re, is).call(this, i, s, l, g, c, a);
          i._lastTurnResponse = await y.model.getResponse({
            systemInstructions: y.modelInput.instructions,
            prompt: y.prompt,
            // Explicit agent/run config models should take precedence over prompt defaults.
            ...y.explictlyModelSet ? { overridePromptModel: !0 } : {},
            input: y.modelInput.input,
            previousResponseId: y.previousResponseId,
            conversationId: y.conversationId,
            modelSettings: y.modelSettings,
            tools: y.serializedTools,
            toolsExplicitlyProvided: y.toolsExplicitlyProvided,
            outputType: aa(i._currentAgent.outputType),
            handoffs: y.serializedHandoffs,
            tracing: Ra(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: s.signal
          }), i._modelResponses.push(i._lastTurnResponse), i._context.usage.add(i._lastTurnResponse.usage), i._noActiveAgentRun = !1, c == null || c.trackServerItems(i._lastTurnResponse);
          const S = ya(i._lastTurnResponse, i._currentAgent, y.tools, y.handoffs);
          i._lastProcessedResponse = S;
          const _ = await va(i._currentAgent, i._originalInput, i._generatedItems, i._lastTurnResponse, i._lastProcessedResponse, this, i);
          i._toolUseTracker.addToolUse(i._currentAgent, i._lastProcessedResponse.toolsUsed), i._originalInput = _.originalInput, i._generatedItems = _.generatedItems, _.nextStep.type === "next_step_run_again" && (i._currentTurnPersistedItemCount = 0), i._currentStep = _.nextStep, h && await h;
        }
        if (i._currentStep && i._currentStep.type === "next_step_final_output")
          return await L(this, re, as).call(this, i, i._currentStep.output), this.emit("agent_end", i._context, i._currentAgent, i._currentStep.output), i._currentAgent.emit("agent_end", i._context, i._currentStep.output), new jr(i);
        if (i._currentStep && i._currentStep.type === "next_step_handoff")
          i._currentAgent = i._currentStep.newAgent, i._currentAgentSpan && (i._currentAgentSpan.end(), hn(), i._currentAgentSpan = void 0), i._noActiveAgentRun = !0, i._currentStep = { type: "next_step_run_again" };
        else {
          if (i._currentStep && i._currentStep.type === "next_step_interruption")
            return new jr(i);
          j.debug("Running next loop");
        }
      }
    } catch (l) {
      throw i._currentAgentSpan && i._currentAgentSpan.setError({
        message: "Error in agent run",
        data: { error: String(l) }
      }), l;
    } finally {
      i._currentAgentSpan && (((f = i._currentStep) == null ? void 0 : f.type) !== "next_step_interruption" && i._currentAgentSpan.end(), hn());
    }
  });
}, Gi = async function(t, r, s, a, o) {
  var h, g, y;
  const i = !!r.conversationId || !!r.previousResponseId, c = i ? new Pa({
    conversationId: r.conversationId,
    previousResponseId: r.previousResponseId
  }) : void 0;
  let d = !1, f = !1;
  const l = async () => {
    f || !a || (await a(), f = !0);
  };
  c && s && c.primeFromState({
    originalInput: t.state._originalInput,
    generatedItems: t.state._generatedItems,
    modelResponses: t.state._modelResponses
  });
  try {
    for (; ; ) {
      const S = t.state._currentAgent;
      if (t.state._currentStep = t.state._currentStep ?? {
        type: "next_step_run_again"
      }, t.state._currentStep.type === "next_step_interruption") {
        if (j.debug("Continuing from interruption"), !t.state._lastTurnResponse || !t.state._lastProcessedResponse)
          throw new ne("No model response found in previous state", t.state);
        const _ = await _a(t.state._currentAgent, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        if (wa(t, _), t.state._toolUseTracker.addToolUse(t.state._currentAgent, t.state._lastProcessedResponse.toolsUsed), t.state._originalInput = _.originalInput, t.state._generatedItems = _.generatedItems, _.nextStep.type === "next_step_run_again" && (t.state._currentTurnPersistedItemCount = 0), t.state._currentStep = _.nextStep, _.nextStep.type === "next_step_interruption")
          return;
        continue;
      }
      if (t.state._currentStep.type === "next_step_run_again") {
        const _ = await Da(t.state);
        if (t.state._currentTurn++, t.state._currentTurnPersistedItemCount = 0, t.state._currentTurn > t.state._maxTurns)
          throw (h = t.state._currentAgentSpan) == null || h.setError({
            message: "Max turns exceeded",
            data: { max_turns: t.state._maxTurns }
          }), new ta(`Max turns (${t.state._maxTurns}) exceeded`, t.state);
        j.debug(`Running agent ${S.name} (turn ${t.state._currentTurn})`);
        let m, x;
        if (t.state._currentTurn === 1) {
          const J = L(this, re, ss).call(this, t.state);
          J.blocking.length > 0 && await L(this, re, fn).call(this, t.state, J.blocking), J.parallel.length > 0 && (x = L(this, re, fn).call(this, t.state, J.parallel).catch((he) => (m = he, [])));
        }
        const w = c ? c.prepareInput(t.input, t.newItems) : xn(t.input, t.newItems);
        t.state._noActiveAgentRun && (S.emit("agent_start", t.state._context, S), this.emit("agent_start", t.state._context, S));
        let D;
        const T = await L(this, re, is).call(this, t.state, r, _, w, c, o);
        if (m)
          throw m;
        d = !0, await l();
        for await (const J of T.model.getStreamedResponse({
          systemInstructions: T.modelInput.instructions,
          prompt: T.prompt,
          // Streaming requests should also honor explicitly chosen models.
          ...T.explictlyModelSet ? { overridePromptModel: !0 } : {},
          input: T.modelInput.input,
          previousResponseId: T.previousResponseId,
          conversationId: T.conversationId,
          modelSettings: T.modelSettings,
          tools: T.serializedTools,
          toolsExplicitlyProvided: T.toolsExplicitlyProvided,
          handoffs: T.serializedHandoffs,
          outputType: aa(S.outputType),
          tracing: Ra(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
          signal: r.signal
        })) {
          if (m)
            throw m;
          if (J.type === "response_done") {
            const F = Ei.parse(J);
            D = {
              usage: new Ar(F.response.usage),
              output: F.response.output,
              responseId: F.response.id
            };
          }
          if (t.cancelled)
            return;
          t._addItem(new Nl(J));
        }
        if (x && (await x, m))
          throw m;
        if (t.state._noActiveAgentRun = !1, !D)
          throw new we("Model did not produce a final response!", t.state);
        t.state._lastTurnResponse = D, c == null || c.trackServerItems(D), t.state._modelResponses.push(t.state._lastTurnResponse);
        const O = ya(t.state._lastTurnResponse, S, T.tools, T.handoffs);
        t.state._lastProcessedResponse = O;
        const M = new Set(O.newItems);
        M.size > 0 && Vl(t, O.newItems);
        const W = await va(S, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        wa(t, W, {
          skipItems: M
        }), t.state._toolUseTracker.addToolUse(S, O.toolsUsed), t.state._originalInput = W.originalInput, t.state._generatedItems = W.generatedItems, W.nextStep.type === "next_step_run_again" && (t.state._currentTurnPersistedItemCount = 0), t.state._currentStep = W.nextStep;
      }
      if (t.state._currentStep.type === "next_step_final_output") {
        await L(this, re, as).call(this, t.state, t.state._currentStep.output), await l(), i || await Ia(r.session, t), this.emit("agent_end", t.state._context, S, t.state._currentStep.output), S.emit("agent_end", t.state._context, t.state._currentStep.output);
        return;
      } else if (t.state._currentStep.type === "next_step_interruption") {
        await l(), i || await Ia(r.session, t);
        return;
      } else t.state._currentStep.type === "next_step_handoff" ? (t.state._currentAgent = (g = t.state._currentStep) == null ? void 0 : g.newAgent, t.state._currentAgentSpan && (t.state._currentAgentSpan.end(), hn()), t.state._currentAgentSpan = void 0, t._addItem(new Pl(t.state._currentAgent)), t.state._noActiveAgentRun = !0, t.state._currentStep = {
        type: "next_step_run_again"
      }) : j.debug("Running next loop");
    }
  } catch (S) {
    throw d && !f && await l(), t.state._currentAgentSpan && t.state._currentAgentSpan.setError({
      message: "Error in agent run",
      data: { error: String(S) }
    }), S;
  } finally {
    t.state._currentAgentSpan && (((y = t.state._currentStep) == null ? void 0 : y.type) !== "next_step_interruption" && t.state._currentAgentSpan.end(), hn());
  }
}, Vi = async function(t, r, s, a, o) {
  return s = s ?? {}, us(async () => {
    const i = r instanceof Ge, c = i ? r : new Ge(s.context instanceof Zt ? s.context : new Zt(s.context), r, t, s.maxTurns ?? Na), d = new Hi({
      signal: s.signal,
      state: c
    });
    d.maxTurns = s.maxTurns ?? c._maxTurns;
    const f = L(this, re, Gi).call(this, d, s, i, a, o).then(() => {
      d._done();
    }, (l) => {
      d._raiseError(l);
    });
    return d._setStreamLoopPromise(f), d;
  });
}, fn = async function(t, r) {
  const s = r ?? L(this, re, rs).call(this, t);
  if (s.length > 0) {
    const a = {
      agent: t._currentAgent,
      input: t._originalInput,
      context: t._context
    };
    try {
      const o = await Promise.all(s.map(async (i) => ha(async (c) => {
        const d = await i.run(a);
        return c.spanData.triggered = d.output.tripwireTriggered, d;
      }, { data: { name: i.name } }, t._currentAgentSpan)));
      t._inputGuardrailResults.push(...o);
      for (const i of o)
        if (i.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: i.guardrail.name }
          }), new ra(`Input guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`, i, t);
      return o;
    } catch (o) {
      throw o instanceof ra ? o : (t._currentTurn--, new na(`Input guardrail failed to complete: ${o}`, o, t));
    }
  }
  return [];
}, as = async function(t, r) {
  const s = this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(es));
  if (s.length > 0) {
    const a = t._currentAgent.processFinalOutput(r), o = {
      agent: t._currentAgent,
      agentOutput: a,
      context: t._context,
      details: { modelResponse: t._lastTurnResponse }
    };
    try {
      const i = await Promise.all(s.map(async (c) => ha(async (d) => {
        const f = await c.run(o);
        return d.spanData.triggered = f.output.tripwireTriggered, f;
      }, { data: { name: c.name } }, t._currentAgentSpan)));
      for (const c of i)
        if (c.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: c.guardrail.name }
          }), new Kr(`Output guardrail triggered: ${JSON.stringify(c.output.outputInfo)}`, c, t);
    } catch (i) {
      throw i instanceof Kr ? i : new na(`Output guardrail failed to complete: ${i}`, i, t);
    }
  }
}, is = async function(t, r, s, a, o, i) {
  const { model: c, explictlyModelSet: d } = await L(this, re, Bi).call(this, t._currentAgent);
  let f = {
    ...this.config.modelSettings,
    ...t._currentAgent.modelSettings
  };
  f = gd(d, t._currentAgent.modelSettings, c, f), f = $l(t._currentAgent, t._toolUseTracker, f);
  const l = await t._currentAgent.getSystemPrompt(t._context), h = await t._currentAgent.getPrompt(t._context), { modelInput: g, sourceItems: y, persistedItems: S, filterApplied: _ } = await md(t._currentAgent, r.callModelInputFilter, t._context, a, l);
  o == null || o.markInputAsSent(y), i == null || i(y, _ ? S : void 0);
  const m = (o == null ? void 0 : o.previousResponseId) ?? r.previousResponseId, x = (o == null ? void 0 : o.conversationId) ?? r.conversationId;
  return {
    ...s,
    model: c,
    explictlyModelSet: d,
    modelSettings: f,
    modelInput: g,
    prompt: h,
    previousResponseId: m,
    conversationId: x
  };
};
function xn(n, e) {
  const t = e.filter((r) => r.type !== "tool_approval_item").map((r) => r.rawItem);
  return [...os(n), ...t];
}
const Na = 10;
function hd(n, e) {
  return typeof n == "string" && n !== nt.DEFAULT_MODEL_PLACEHOLDER || n ? n : e ?? n ?? nt.DEFAULT_MODEL_PLACEHOLDER;
}
function Ra(n, e) {
  return n ? !1 : e ? !0 : "enabled_without_data";
}
async function md(n, e, t, r, s) {
  const a = (g, y) => g.map((S) => {
    const _ = structuredClone(S);
    return y && _ && typeof _ == "object" && y.set(_, S), _;
  }), o = /* @__PURE__ */ new WeakMap(), i = yd(r), c = [];
  for (const g of r)
    g && typeof g == "object" && c.push(g);
  const d = (g) => {
    if (!g || typeof g != "object")
      return;
    const y = c.findIndex((S) => S === g);
    y !== -1 && c.splice(y, 1);
  }, f = () => {
    const g = c.shift();
    return g && Ma(i, g), g;
  }, h = {
    input: a(r, o),
    instructions: s
  };
  if (!e)
    return {
      modelInput: h,
      sourceItems: [...r],
      persistedItems: [],
      filterApplied: !1
    };
  try {
    const g = await e({
      modelData: h,
      agent: n,
      context: t.context
    });
    if (!g || !Array.isArray(g.input))
      throw new ne("callModelInputFilter must return a ModelInputData object with an input array.");
    const y = g.input.map((_) => {
      if (!_ || typeof _ != "object")
        return;
      const m = o.get(_);
      if (m)
        return d(m), Ma(i, m), m;
      const x = vt(_), w = _d(i, x);
      if (w)
        return d(w), w;
      const D = f();
      if (D)
        return D;
    }), S = a(g.input);
    return {
      modelInput: {
        input: S,
        instructions: typeof g.instructions > "u" ? s : g.instructions
      },
      sourceItems: y,
      persistedItems: S.map((_) => structuredClone(_)),
      filterApplied: !0
    };
  } catch (g) {
    throw Xe({
      message: "Error in callModelInputFilter",
      data: { error: String(g) }
    }), g;
  }
}
class Pa {
  constructor({ conversationId: e, previousResponseId: t }) {
    // Conversation ID:
    // - https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#using-the-conversations-api
    // - https://platform.openai.com/docs/api-reference/conversations/create
    I(this, "conversationId");
    // Previous Response ID:
    // https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#passing-context-from-the-previous-response
    I(this, "previousResponseId");
    // Using this flag because WeakSet does not provide a way to check its size
    I(this, "sentInitialInput", !1);
    // The items already sent to the model; using WeakSet for memory efficiency
    I(this, "sentItems", /* @__PURE__ */ new WeakSet());
    // The items received from the server; using WeakSet for memory efficiency
    I(this, "serverItems", /* @__PURE__ */ new WeakSet());
    // Track initial input items that have not yet been sent so they can be retried on later turns.
    I(this, "remainingInitialInput", null);
    this.conversationId = e ?? void 0, this.previousResponseId = t ?? void 0;
  }
  /**
   * Pre-populates tracker caches from an existing RunState when resuming server-managed runs.
   */
  primeFromState({ originalInput: e, generatedItems: t, modelResponses: r }) {
    if (this.sentInitialInput)
      return;
    for (const a of os(e))
      a && typeof a == "object" && this.sentItems.add(a);
    this.sentInitialInput = !0, this.remainingInitialInput = null;
    const s = r[r.length - 1];
    for (const a of r)
      for (const o of a.output)
        o && typeof o == "object" && this.serverItems.add(o);
    !this.conversationId && (s != null && s.responseId) && (this.previousResponseId = s.responseId);
    for (const a of t) {
      const o = a.rawItem;
      !o || typeof o != "object" || this.serverItems.has(o) && this.sentItems.add(o);
    }
  }
  /**
   * Records the raw items returned by the server so future delta calculations skip them.
   * Also captures the latest response identifier to chain follow-up calls when possible.
   */
  trackServerItems(e) {
    if (e) {
      for (const t of e.output)
        t && typeof t == "object" && this.serverItems.add(t);
      !this.conversationId && e.responseId && (this.previousResponseId = e.responseId);
    }
  }
  /**
   * Returns the minimum set of items that still need to be delivered to the server for the
   * current turn. This includes the original turn inputs (until acknowledged) plus any
   * newly generated items that have not yet been echoed back by the API.
   */
  prepareInput(e, t) {
    const r = [];
    if (this.sentInitialInput)
      this.remainingInitialInput && this.remainingInitialInput.length > 0 && r.push(...this.remainingInitialInput);
    else {
      const s = os(e);
      r.push(...s), this.remainingInitialInput = s.filter((a) => !!a && typeof a == "object"), this.sentInitialInput = !0;
    }
    for (const s of t) {
      if (s.type === "tool_approval_item")
        continue;
      const a = s.rawItem;
      !a || typeof a != "object" || this.sentItems.has(a) || this.serverItems.has(a) || r.push(a);
    }
    return r;
  }
  /**
   * Marks the provided originals as delivered so future turns do not resend them and any
   * pending initial inputs can be dropped once the server acknowledges receipt.
   */
  markInputAsSent(e) {
    if (!e.length)
      return;
    const t = /* @__PURE__ */ new Set();
    for (const r of e)
      !r || typeof r != "object" || t.has(r) || (t.add(r), this.sentItems.add(r));
    !this.remainingInitialInput || this.remainingInitialInput.length === 0 || (this.remainingInitialInput = this.remainingInitialInput.filter((r) => !t.has(r)), this.remainingInitialInput.length === 0 && (this.remainingInitialInput = null));
  }
}
function gd(n, e, t, r) {
  var s, a, o, i, c, d, f, l;
  if (
    // gpt-5 is enabled for the default model for agents
    mi() && // explicitly set model for the agent
    n && // this runner uses a non-gpt-5 model
    (typeof t != "string" || !xr(t)) && ((s = e.providerData) != null && s.reasoning || (o = (a = e.providerData) == null ? void 0 : a.text) != null && o.verbosity || (i = e.providerData) != null && i.reasoning_effort)
  ) {
    const h = { ...r };
    return (c = h.providerData) == null || delete c.reasoning, (f = (d = h.providerData) == null ? void 0 : d.text) == null || delete f.verbosity, (l = h.providerData) == null || delete l.reasoning_effort, h.reasoning && (delete h.reasoning.effort, delete h.reasoning.summary), h.text && delete h.text.verbosity, h;
  }
  return r;
}
async function Da(n) {
  const e = await n._currentAgent.getEnabledHandoffs(n._context), t = await n._currentAgent.getAllTools(n._context);
  if (n._currentAgentSpan)
    n._currentAgentSpan.spanData.tools = t.map((r) => r.name);
  else {
    const r = e.map((s) => s.agentName);
    n._currentAgentSpan = Sl({
      data: {
        name: n._currentAgent.name,
        handoffs: r,
        tools: t.map((s) => s.name),
        output_type: n._currentAgent.outputSchemaName
      }
    }), n._currentAgentSpan.start(), Ns(n._currentAgentSpan);
  }
  return {
    handoffs: e,
    tools: t,
    serializedHandoffs: e.map((r) => xl(r)),
    serializedTools: t.map((r) => Il(r)),
    toolsExplicitlyProvided: n._currentAgent.hasExplicitToolConfig()
  };
}
function vt(n) {
  return JSON.stringify(n, vd);
}
function yd(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = vt(t), s = e.get(r);
    s ? s.push(t) : e.set(r, [t]);
  }
  return e;
}
function _d(n, e) {
  const t = n.get(e);
  if (!t || t.length === 0)
    return;
  const [r] = t;
  return t.shift(), t.length === 0 && n.delete(e), r;
}
function Ma(n, e) {
  const t = vt(e), r = n.get(t);
  if (!r || r.length === 0)
    return;
  const s = r.findIndex((a) => a === e);
  s !== -1 && (r.splice(s, 1), r.length === 0 && n.delete(t));
}
function vd(n, e) {
  if (e instanceof ArrayBuffer)
    return {
      __type: "ArrayBuffer",
      data: ke(new Uint8Array(e))
    };
  if (Hn(e)) {
    const t = e;
    return {
      __type: t.constructor.name,
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  if (vs(e)) {
    const t = e;
    return {
      __type: "Buffer",
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  return br(e) ? {
    __type: "Buffer",
    data: ke(Uint8Array.from(e.data))
  } : e;
}
function os(n) {
  return typeof n == "string" ? [{ type: "message", role: "user", content: n }] : [...n];
}
class Wi {
  constructor(e) {
    I(this, "state");
    this.state = e;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during
   * the agent run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return xn(this.input, this.newItems);
  }
  /**
   * The new items generated during the agent run. These include things like new messages, tool
   * calls and their outputs, etc.
   *
   * It does not include information about the agents and instead represents the model data.
   *
   * For the output including the agents, use the `newItems` property.
   */
  get output() {
    return xn([], this.newItems);
  }
  /**
   * A copy of the original input items.
   */
  get input() {
    return this.state._originalInput;
  }
  /**
   * The run items generated during the agent run. This associates the model data with the agents.
   *
   * For the model data that can be used as inputs for the next agent run, use the `output` property.
   */
  get newItems() {
    return this.state._generatedItems;
  }
  /**
   * The raw LLM responses generated by the model during the agent run.
   */
  get rawResponses() {
    return this.state._modelResponses;
  }
  /**
   * The last response ID generated by the model during the agent run.
   */
  get lastResponseId() {
    const e = this.rawResponses;
    return e && e.length > 0 ? e[e.length - 1].responseId : void 0;
  }
  /**
   * The last agent that was run
   */
  get lastAgent() {
    return this.state._currentAgent;
  }
  /**
   * Guardrail results for the input messages.
   */
  get inputGuardrailResults() {
    return this.state._inputGuardrailResults;
  }
  /**
   * Guardrail results for the final output of the agent.
   */
  get outputGuardrailResults() {
    return this.state._outputGuardrailResults;
  }
  /**
   * Any interruptions that occurred during the agent run for example for tool approvals.
   */
  get interruptions() {
    var e;
    return ((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_interruption" ? this.state._currentStep.data.interruptions : [];
  }
  /**
   * The final output of the agent. If the output type was set to anything other than `text`,
   * this will be parsed either as JSON or using the Zod schema you provided.
   */
  get finalOutput() {
    var e;
    if (((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_final_output")
      return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);
    j.warn("Accessed finalOutput before agent run is completed.");
  }
}
class jr extends Wi {
  constructor(e) {
    super(e);
  }
}
var An, at, xe, Ve, Gt, Vt, On, bt, Cn;
class Hi extends Wi {
  constructor(t = {}) {
    super(t.state);
    /**
     * The current turn number
     */
    I(this, "currentTurn", 0);
    /**
     * The maximum number of turns that can be run
     */
    I(this, "maxTurns");
    N(this, An, null);
    N(this, at);
    N(this, xe);
    N(this, Ve);
    N(this, Gt);
    N(this, Vt);
    N(this, On);
    N(this, bt, !1);
    N(this, Cn);
    if (k(this, at, t.signal), k(this, Ve, new xc({
      start: (r) => {
        k(this, xe, r);
      },
      cancel: () => {
        k(this, bt, !0);
      }
    })), k(this, Gt, new Promise((r, s) => {
      k(this, Vt, r), k(this, On, s);
    })), u(this, at)) {
      const r = () => {
        var a, o;
        if (u(this, bt))
          return;
        k(this, bt, !0);
        const s = u(this, xe);
        if (k(this, xe, void 0), u(this, Ve).locked) {
          if (s)
            try {
              s.close();
            } catch (i) {
              j.debug(`Failed to close readable stream on abort: ${i}`);
            }
        } else
          u(this, Ve).cancel((a = u(this, at)) == null ? void 0 : a.reason).catch((i) => {
            j.debug(`Failed to cancel readable stream on abort: ${i}`);
          });
        (o = u(this, Vt)) == null || o.call(this);
      };
      u(this, at).aborted ? r() : u(this, at).addEventListener("abort", r, { once: !0 });
    }
  }
  /**
   * The current agent that is running
   */
  get currentAgent() {
    return this.lastAgent;
  }
  /**
   * @internal
   * Adds an item to the stream of output items
   */
  _addItem(t) {
    var r;
    this.cancelled || (r = u(this, xe)) == null || r.enqueue(t);
  }
  /**
   * @internal
   * Indicates that the stream has been completed
   */
  _done() {
    var t;
    !this.cancelled && u(this, xe) && (u(this, xe).close(), k(this, xe, void 0), (t = u(this, Vt)) == null || t.call(this));
  }
  /**
   * @internal
   * Handles an error in the stream loop.
   */
  _raiseError(t) {
    var r;
    !this.cancelled && u(this, xe) && (u(this, xe).error(t), k(this, xe, void 0)), k(this, An, t), (r = u(this, On)) == null || r.call(this, t), u(this, Gt).catch((s) => {
      j.debug(`Resulted in an error: ${s}`);
    });
  }
  /**
   * Returns true if the stream has been cancelled.
   */
  get cancelled() {
    return u(this, bt);
  }
  /**
   * Returns the underlying readable stream.
   * @returns A readable stream of the agent run.
   */
  toStream() {
    return u(this, Ve);
  }
  /**
   * Await this promise to ensure that the stream has been completed if you are not consuming the
   * stream directly.
   */
  get completed() {
    return u(this, Gt);
  }
  /**
   * Error thrown during the run, if any.
   */
  get error() {
    return u(this, An);
  }
  toTextStream(t = {}) {
    const r = u(this, Ve).pipeThrough(new Sc({
      transform(s, a) {
        if (s.type === "raw_model_stream_event" && s.data.type === "output_text_delta") {
          const o = Ci.parse(s.data);
          a.enqueue(o.delta);
        }
      }
    }));
    return t.compatibleWithNodeStreams ? Ic.fromWeb(r) : r;
  }
  [Symbol.asyncIterator]() {
    return u(this, Ve)[Symbol.asyncIterator]();
  }
  /**
   * @internal
   * Sets the stream loop promise that completes when the internal stream loop finishes.
   * This is used to defer trace end until all agent work is complete.
   */
  _setStreamLoopPromise(t) {
    k(this, Cn, t);
  }
  /**
   * @internal
   * Returns a promise that resolves when the stream loop completes.
   * This is used by the tracing system to wait for all agent work before ending the trace.
   */
  _getStreamLoopPromise() {
    return u(this, Cn);
  }
}
An = new WeakMap(), at = new WeakMap(), xe = new WeakMap(), Ve = new WeakMap(), Gt = new WeakMap(), Vt = new WeakMap(), On = new WeakMap(), bt = new WeakMap(), Cn = new WeakMap();
let ja;
function Ze() {
  return ja ?? (ja = new Tc()), ja;
}
function on() {
  const n = Ze().getStore();
  return n != null && n.trace ? n.trace : null;
}
function Sn() {
  const n = Ze().getStore();
  return n != null && n.span ? n.span : null;
}
function Ki(n) {
  return async () => {
    const e = on();
    if (!e)
      throw new Error("No trace found");
    await e.start();
    const t = await n(e);
    if (t instanceof Hi) {
      const r = t._getStreamLoopPromise();
      if (r)
        return r.finally(() => e.end()), t;
    }
    return await e.end(), t;
  };
}
async function wd(n, e, t = {}) {
  const r = typeof n == "string" ? qe().createTrace({
    ...t,
    name: n
  }) : n;
  return Ze().run({ trace: r }, Ki(e));
}
async function bd(n, e = {}) {
  if (on())
    return await n();
  const r = qe().createTrace(e);
  return Ze().run({ trace: r }, Ki(n));
}
function Ns(n) {
  const e = Ze().getStore();
  if (!e)
    throw new Error("No existing trace found");
  e.span && (e.span.previousSpan = e.previousSpan, e.previousSpan = e.span), e.span = n, Ze().enterWith(e);
}
function hn() {
  var e;
  const n = Ze().getStore();
  n && (n.span = n.previousSpan, n.previousSpan = (e = n.previousSpan) == null ? void 0 : e.previousSpan, Ze().enterWith(n));
}
function Xe(n) {
  const e = Sn();
  e && e.setError(n);
}
function Id(n) {
  var e, t, r;
  return {
    trace: (e = n.trace) == null ? void 0 : e.clone(),
    span: (t = n.span) == null ? void 0 : t.clone(),
    previousSpan: (r = n.previousSpan) == null ? void 0 : r.clone()
  };
}
function us(n) {
  const e = Ze().getStore();
  if (!e)
    throw new Error("No existing trace found");
  const t = Id(e);
  return Ze().run(t, n);
}
class xd {
  async export(e) {
    if (li.disabled) {
      j.debug("Tracing is disabled. Skipping export");
      return;
    }
    for (const t of e)
      t.type === "trace" ? console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}${t.groupId ? ` groupId=${t.groupId}` : ""}`) : console.log(`[Exporter] Export span: ${JSON.stringify(t)}`);
  }
}
var En, Wt, Nn, Rn, Ht, me, We, it, ot, Kt, be, cs, ls, Ut;
class Sd {
  constructor(e, {
    maxQueueSize: t = 1e3,
    maxBatchSize: r = 100,
    scheduleDelay: s = 5e3,
    // 5 seconds
    exportTriggerRatio: a = 0.8
  } = {}) {
    N(this, be);
    N(this, En);
    N(this, Wt);
    N(this, Nn);
    N(this, Rn);
    N(this, Ht);
    N(this, me, []);
    N(this, We);
    N(this, it, null);
    N(this, ot, !1);
    N(this, Kt, null);
    k(this, En, t), k(this, Wt, r), k(this, Nn, s), k(this, Rn, t * a), k(this, Ht, e), k(this, We, Ac), j.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.");
  }
  start() {
    k(this, Kt, new AbortController()), L(this, be, ls).call(this);
  }
  async onTraceStart(e) {
    await L(this, be, cs).call(this, e);
  }
  async onTraceEnd(e) {
  }
  async onSpanStart(e) {
  }
  async onSpanEnd(e) {
    await L(this, be, cs).call(this, e);
  }
  async shutdown(e) {
    var t;
    for (e && u(this, We).setTimeout(() => {
      var r;
      (r = u(this, Kt)) == null || r.abort();
    }, e), j.debug("Shutting down gracefully"); u(this, me).length > 0; ) {
      if (j.debug(`Waiting for buffer to empty. Items left: ${u(this, me).length}`), u(this, ot) || await L(this, be, Ut).call(this, !0), (t = u(this, Kt)) != null && t.signal.aborted) {
        j.debug("Timeout reached, force flushing"), await L(this, be, Ut).call(this, !0);
        break;
      }
      await new Promise((r) => u(this, We).setTimeout(r, 500));
    }
    j.debug("Buffer empty. Exiting"), u(this, We) && u(this, it) && u(this, We).clearTimeout(u(this, it));
  }
  async forceFlush() {
    u(this, me).length > 0 && await L(this, be, Ut).call(this, !0);
  }
}
En = new WeakMap(), Wt = new WeakMap(), Nn = new WeakMap(), Rn = new WeakMap(), Ht = new WeakMap(), me = new WeakMap(), We = new WeakMap(), it = new WeakMap(), ot = new WeakMap(), Kt = new WeakMap(), be = new WeakSet(), cs = async function(e) {
  if (u(this, me).length + 1 > u(this, En)) {
    j.error("Dropping trace because buffer is full");
    return;
  }
  u(this, me).push(e), u(this, me).length > u(this, Rn) && await L(this, be, Ut).call(this);
}, ls = function() {
  k(this, it, u(this, We).setTimeout(async () => {
    await L(this, be, Ut).call(this), L(this, be, ls).call(this);
  }, u(this, Nn))), typeof u(this, it).unref == "function" && u(this, it).unref();
}, Ut = async function(e = !1) {
  if (u(this, me).length !== 0) {
    if (j.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this, me).length}`), e || u(this, me).length < u(this, Wt)) {
      const t = [...u(this, me)];
      k(this, me, []), k(this, ot, !0), await u(this, Ht).export(t), k(this, ot, !1);
    } else if (u(this, me).length > 0) {
      const t = u(this, me).splice(0, u(this, Wt));
      k(this, ot, !0), await u(this, Ht).export(t), k(this, ot, !1);
    }
  }
};
var Se;
class Td {
  constructor() {
    N(this, Se, []);
  }
  start() {
    for (const e of u(this, Se))
      e.start && e.start();
  }
  addTraceProcessor(e) {
    u(this, Se).push(e);
  }
  setProcessors(e) {
    j.debug("Shutting down old processors");
    for (const t of u(this, Se))
      t.shutdown();
    k(this, Se, e);
  }
  async onTraceStart(e) {
    for (const t of u(this, Se))
      await t.onTraceStart(e);
  }
  async onTraceEnd(e) {
    for (const t of u(this, Se))
      await t.onTraceEnd(e);
  }
  async onSpanStart(e) {
    for (const t of u(this, Se))
      await t.onSpanStart(e);
  }
  async onSpanEnd(e) {
    for (const t of u(this, Se))
      await t.onSpanEnd(e);
  }
  async shutdown(e) {
    for (const t of u(this, Se))
      await t.shutdown(e);
  }
  async forceFlush() {
    for (const e of u(this, Se))
      await e.forceFlush();
  }
}
Se = new WeakMap();
let $r = null, Fr = null;
function kd() {
  return $r || ($r = new xd()), $r;
}
function Yi() {
  return Fr || (Fr = new Sd(kd())), Fr;
}
function $a() {
  return (/* @__PURE__ */ new Date()).toISOString();
}
function Xi() {
  return `trace_${hi().replace(/-/g, "")}`;
}
function Ad() {
  return `span_${hi().replace(/-/g, "").slice(0, 24)}`;
}
function Od(n) {
  return Object.fromEntries(Object.entries(n).filter(([e]) => !e.startsWith("_")));
}
var Pn, Dn, Mn, jn, It, ut, ct, xt, $n;
const Ps = class Ps {
  constructor(e, t) {
    I(this, "type", "trace.span");
    N(this, Pn);
    N(this, Dn);
    N(this, Mn);
    N(this, jn);
    N(this, It);
    N(this, ut);
    N(this, ct);
    N(this, xt);
    N(this, $n);
    k(this, Dn, e.traceId), k(this, Mn, e.spanId ?? Ad()), k(this, Pn, e.data), k(this, It, t), k(this, jn, e.parentId ?? null), k(this, xt, e.error ?? null), k(this, ut, e.startedAt ?? null), k(this, ct, e.endedAt ?? null);
  }
  get traceId() {
    return u(this, Dn);
  }
  get spanData() {
    return u(this, Pn);
  }
  get spanId() {
    return u(this, Mn);
  }
  get parentId() {
    return u(this, jn);
  }
  get previousSpan() {
    return u(this, $n);
  }
  set previousSpan(e) {
    k(this, $n, e);
  }
  start() {
    if (u(this, ut)) {
      j.warn("Span already started");
      return;
    }
    k(this, ut, $a()), u(this, It).onSpanStart(this);
  }
  end() {
    if (u(this, ct)) {
      j.debug("Span already finished", this.spanData);
      return;
    }
    k(this, ct, $a()), u(this, It).onSpanEnd(this);
  }
  setError(e) {
    k(this, xt, e);
  }
  get error() {
    return u(this, xt);
  }
  get startedAt() {
    return u(this, ut);
  }
  get endedAt() {
    return u(this, ct);
  }
  clone() {
    var t;
    const e = new Ps({
      traceId: this.traceId,
      spanId: this.spanId,
      parentId: this.parentId ?? void 0,
      data: this.spanData,
      startedAt: u(this, ut) ?? void 0,
      endedAt: u(this, ct) ?? void 0,
      error: u(this, xt) ?? void 0
    }, u(this, It));
    return e.previousSpan = (t = this.previousSpan) == null ? void 0 : t.clone(), e;
  }
  toJSON() {
    return {
      object: this.type,
      id: this.spanId,
      trace_id: this.traceId,
      parent_id: this.parentId,
      started_at: this.startedAt,
      ended_at: this.endedAt,
      span_data: Od(this.spanData),
      error: this.error
    };
  }
};
Pn = new WeakMap(), Dn = new WeakMap(), Mn = new WeakMap(), jn = new WeakMap(), It = new WeakMap(), ut = new WeakMap(), ct = new WeakMap(), xt = new WeakMap(), $n = new WeakMap();
let Tn = Ps;
class rt extends Tn {
  constructor(e, t) {
    super({ traceId: "no-op", spanId: "no-op", data: e }, t);
  }
  start() {
  }
  end() {
  }
  setError() {
  }
  toJSON() {
    return null;
  }
}
var Yt, He;
const Ds = class Ds {
  constructor(e, t) {
    I(this, "type", "trace");
    I(this, "traceId");
    I(this, "name");
    I(this, "groupId", null);
    I(this, "metadata");
    N(this, Yt);
    N(this, He);
    this.traceId = e.traceId ?? Xi(), this.name = e.name ?? "Agent workflow", this.groupId = e.groupId ?? null, this.metadata = e.metadata ?? {}, k(this, Yt, t ?? Yi()), k(this, He, e.started ?? !1);
  }
  async start() {
    u(this, He) || (k(this, He, !0), await u(this, Yt).onTraceStart(this));
  }
  async end() {
    u(this, He) && (k(this, He, !1), await u(this, Yt).onTraceEnd(this));
  }
  clone() {
    return new Ds({
      traceId: this.traceId,
      name: this.name,
      groupId: this.groupId ?? void 0,
      metadata: this.metadata,
      started: u(this, He)
    });
  }
  toJSON() {
    return {
      object: this.type,
      id: this.traceId,
      workflow_name: this.name,
      group_id: this.groupId,
      metadata: this.metadata
    };
  }
};
Yt = new WeakMap(), He = new WeakMap();
let kn = Ds;
class Lr extends kn {
  constructor() {
    super({});
  }
  async start() {
  }
  async end() {
  }
  toJSON() {
    return null;
  }
}
var fe, St, vr, Qi;
class Cd {
  constructor() {
    N(this, vr);
    N(this, fe);
    N(this, St);
    k(this, fe, new Td()), k(this, St, li.disabled), L(this, vr, Qi).call(this);
  }
  /**
   * Add a processor to the list of processors. Each processor will receive all traces/spans.
   *
   * @param processor - The processor to add.
   */
  registerProcessor(e) {
    u(this, fe).addTraceProcessor(e);
  }
  /**
   * Set the list of processors. This will replace any existing processors.
   *
   * @param processors - The list of processors to set.
   */
  setProcessors(e) {
    u(this, fe).setProcessors(e);
  }
  /**
   * Get the current trace.
   *
   * @returns The current trace.
   */
  getCurrentTrace() {
    return on();
  }
  getCurrentSpan() {
    return Sn();
  }
  setDisabled(e) {
    k(this, St, e);
  }
  startExportLoop() {
    u(this, fe).start();
  }
  createTrace(e) {
    if (u(this, St))
      return j.debug("Tracing is disabled, Not creating trace %o", e), new Lr();
    const t = e.traceId ?? Xi(), r = e.name ?? "Agent workflow";
    return j.debug("Creating trace %s with name %s", t, r), new kn({ ...e, name: r, traceId: t }, u(this, fe));
  }
  createSpan(e, t) {
    if (u(this, St) || e.disabled)
      return j.debug("Tracing is disabled, Not creating span %o", e), new rt(e.data, u(this, fe));
    let r, s;
    if (t) {
      if (t instanceof kn) {
        if (t instanceof Lr)
          return j.debug("Parent trace is no-op, returning NoopSpan"), new rt(e.data, u(this, fe));
        s = t.traceId;
      } else if (t instanceof Tn) {
        if (t instanceof rt)
          return j.debug("Parent span is no-op, returning NoopSpan"), new rt(e.data, u(this, fe));
        r = t.spanId, s = t.traceId;
      }
    } else {
      const a = on(), o = Sn();
      if (!a)
        return j.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new rt(e.data, u(this, fe));
      if (o instanceof rt || a instanceof Lr)
        return j.debug(`Parent ${o} or ${a} is no-op, returning NoopSpan`), new rt(e.data, u(this, fe));
      s = a.traceId, o ? (j.debug("Using parent span %s", o.spanId), r = o.spanId) : j.debug("No parent span, using current trace %s", a.traceId);
    }
    return s ? (j.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId ?? s}`), new Tn({
      ...e,
      traceId: s,
      parentId: r
    }, u(this, fe))) : (j.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new rt(e.data, u(this, fe)));
  }
  async shutdown(e) {
    try {
      j.debug("Shutting down tracing provider"), await u(this, fe).shutdown(e);
    } catch (t) {
      j.error("Error shutting down tracing provider %o", t);
    }
  }
  async forceFlush() {
    await u(this, fe).forceFlush();
  }
}
fe = new WeakMap(), St = new WeakMap(), vr = new WeakSet(), /** Adds listeners to `process` to ensure `shutdown` occurs before exit. */
Qi = function() {
  if (typeof process < "u" && typeof process.on == "function") {
    const e = async () => {
      const t = setTimeout(() => {
        console.warn("Cleanup timeout, forcing exit"), process.exit(1);
      }, 5e3);
      try {
        await this.shutdown();
      } finally {
        clearTimeout(t);
      }
    };
    process.on("beforeExit", e), process.on("SIGINT", async () => {
      await e(), Fa("SIGINT") || process.exit(130);
    }), process.on("SIGTERM", async () => {
      await e(), Fa("SIGTERM") || process.exit(0);
    }), process.on("unhandledRejection", async (t, r) => {
      j.error("Unhandled rejection", t, r), await e(), Ed("unhandledRejection") || process.exit(1);
    });
  }
};
function Fa(n) {
  return process.listeners(n).length > 1;
}
function Ed(n) {
  return process.listeners(n).length > 1;
}
let Ur;
function qe() {
  return Ur || (Ur = new Cd()), Ur;
}
function Nd(n) {
  qe().registerProcessor(n);
}
Nd(Yi());
function eo(n) {
  const e = atob(n), t = e.length, r = new Uint8Array(t);
  for (let s = 0; s < t; s++)
    r[s] = e.charCodeAt(s);
  return r.buffer;
}
function to(n) {
  const e = String.fromCharCode(...new Uint8Array(n));
  return btoa(e);
}
function no(n) {
  if (typeof n > "u" || n === null || typeof n != "object" || !("type" in n) || typeof n.type != "string" || !n.type || n.type !== "message" || !("content" in n) || !Array.isArray(n.content) || n.content.length < 1)
    return;
  const e = n.content[n.content.length - 1];
  if (!(!("type" in e) || typeof e.type != "string")) {
    if (e.type === "output_text")
      return typeof e.text == "string" ? e.text : void 0;
    if (e.type === "output_audio")
      return typeof e.transcript == "string" ? e.transcript : void 0;
  }
}
function Rd(n, e) {
  const t = n.filter((a) => !e.some((o) => o.itemId === a.itemId)), r = e.filter((a) => !n.some((o) => o.itemId === a.itemId)), s = e.filter((a) => n.some((o) => o.itemId === a.itemId && JSON.stringify(o) !== JSON.stringify(a)));
  return {
    removals: t,
    additions: r,
    updates: s
  };
}
function Pd() {
  return typeof window > "u" ? !1 : typeof window.RTCPeerConnection < "u";
}
function La(n) {
  return n.role === "system" ? n : n.role === "assistant" ? {
    ...n,
    content: n.content.map((e) => e.type === "output_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n.role === "user" ? {
    ...n,
    content: n.content.map((e) => e.type === "input_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n;
}
function Dd(n, e) {
  if (n.role !== "assistant" || e.role !== "assistant")
    return e;
  const t = e.content.map((r, s) => {
    if (r.type !== "output_audio" || !(typeof r.transcript != "string" || r.transcript.length === 0))
      return r;
    const o = n.content[s];
    return o && o.type === "output_audio" && typeof o.transcript == "string" && o.transcript.length > 0 ? {
      ...r,
      transcript: o.transcript
    } : r;
  });
  return {
    ...e,
    content: t
  };
}
function Ua(n, e, t) {
  if (e.type === "conversation.item.input_audio_transcription.completed")
    return n.map((a) => {
      if (a.itemId === e.item_id && a.type === "message" && "role" in a && a.role === "user") {
        const o = a.content.map((i) => i.type === "input_audio" ? {
          ...i,
          transcript: e.transcript
        } : i);
        return {
          ...a,
          content: o,
          status: "completed"
        };
      }
      return a;
    });
  const r = !t && e.type === "message" ? La(e) : e, s = n.findIndex((a) => a.itemId === e.itemId);
  if (s !== -1) {
    const a = n[s], o = r.type === "message" && a.type === "message" ? Dd(a, r) : r;
    return n.map((i, c) => c === s ? o : !t && i.type === "message" ? La(i) : i);
  } else if (e.previousItemId) {
    const a = n.findIndex((o) => o.itemId === e.previousItemId);
    return a !== -1 ? [
      ...n.slice(0, a + 1),
      r,
      ...n.slice(a + 1)
    ] : [...n, r];
  } else
    return [...n, r];
}
const ro = {
  "User-Agent": `Agents/JavaScript ${Zr.version}`,
  "X-OpenAI-Agents-SDK": `openai-agents-sdk.${Zr.version}`
}, Md = `openai-agents-sdk.${Zr.version}`;
function jd(n, e) {
  const { name: t, arguments: r, ...s } = e;
  return new ye({
    type: "hosted_tool_call",
    name: t,
    arguments: JSON.stringify(r),
    status: "in_progress",
    providerData: {
      ...s
    }
  }, n);
}
function Za(n) {
  if (n.rawItem.type !== "function_call" && n.rawItem.type !== "hosted_tool_call")
    throw new Error("Invalid approval item type for Realtime MCP approval request");
  const { name: e, arguments: t, providerData: r } = n.rawItem, { itemId: s, serverLabel: a, ...o } = r ?? {};
  if (!s || !a)
    throw new Error("Invalid approval item for Realtime MCP approval request");
  return {
    type: "mcp_approval_request",
    itemId: s,
    serverLabel: a,
    ...o,
    name: e,
    arguments: t ? JSON.parse(t) : {},
    approved: null
  };
}
class Yp extends nt {
  constructor(t) {
    super(t);
    /**
     * The voice intended to be used by the agent. If another agent already spoke during the
     * RealtimeSession, changing the voice during a handoff will fail.
     */
    I(this, "voice");
    this.voice = t.voice;
  }
}
function $d(n) {
  return {
    debounceTextLength: n.debounceTextLength ?? 100
  };
}
function Fd({ policyHint: n, ...e }) {
  const t = es(e), r = n ?? t.name;
  return {
    ...t,
    policyHint: r,
    run: async (s) => {
      const a = await t.run(s);
      return {
        ...a,
        guardrail: { ...a.guardrail, policyHint: r }
      };
    }
  };
}
function Ld(n) {
  return `
 Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo ?? {})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim();
}
function gt(n, e) {
  return n in e && typeof e[n] < "u";
}
function Ud(n) {
  return gt("modalities", n) || gt("inputAudioFormat", n) || gt("outputAudioFormat", n) || gt("inputAudioTranscription", n) || gt("turnDetection", n) || gt("inputAudioNoiseReduction", n) || gt("speed", n);
}
function Zd(n) {
  var e, t, r, s, a, o, i, c;
  if (!Ud(n)) {
    const d = (e = n.audio) != null && e.input ? {
      format: er(n.audio.input.format),
      noiseReduction: n.audio.input.noiseReduction ?? null,
      transcription: n.audio.input.transcription,
      turnDetection: n.audio.input.turnDetection
    } : void 0, f = ((r = (t = n.audio) == null ? void 0 : t.output) == null ? void 0 : r.voice) ?? n.voice, l = (s = n.audio) != null && s.output || typeof f < "u" ? {
      format: er((o = (a = n.audio) == null ? void 0 : a.output) == null ? void 0 : o.format),
      voice: f,
      speed: (c = (i = n.audio) == null ? void 0 : i.output) == null ? void 0 : c.speed
    } : void 0;
    return {
      model: n.model,
      instructions: n.instructions,
      toolChoice: n.toolChoice,
      tools: n.tools,
      tracing: n.tracing,
      providerData: n.providerData,
      prompt: n.prompt,
      outputModalities: n.outputModalities,
      audio: d || l ? {
        input: d,
        output: l
      } : void 0
    };
  }
  return {
    model: n.model,
    instructions: n.instructions,
    toolChoice: n.toolChoice,
    tools: n.tools,
    tracing: n.tracing,
    providerData: n.providerData,
    prompt: n.prompt,
    outputModalities: n.modalities,
    audio: {
      input: {
        format: er(n.inputAudioFormat),
        noiseReduction: n.inputAudioNoiseReduction ?? null,
        transcription: n.inputAudioTranscription,
        turnDetection: n.turnDetection
      },
      output: {
        format: er(n.outputAudioFormat),
        voice: n.voice,
        speed: n.speed
      }
    }
  };
}
function er(n) {
  if (!n)
    return;
  if (typeof n == "object")
    return n;
  const e = String(n);
  return e === "pcm16" ? { type: "audio/pcm", rate: 24e3 } : e === "g711_ulaw" ? { type: "audio/pcmu" } : e === "g711_alaw" ? { type: "audio/pcma" } : { type: "audio/pcm", rate: 24e3 };
}
v({
  itemId: p()
});
const qa = ge("role", [
  v({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: b("message"),
    role: b("system"),
    content: B(v({ type: b("input_text"), text: p() }))
  }),
  v({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: b("message"),
    role: b("user"),
    status: oe(["in_progress", "completed"]),
    content: B(v({ type: b("input_text"), text: p() }).or(v({
      type: b("input_audio"),
      audio: p().nullable().optional(),
      transcript: p().nullable()
    })))
  }),
  v({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: b("message"),
    role: b("assistant"),
    status: oe(["in_progress", "completed", "incomplete"]),
    content: B(v({ type: b("output_text"), text: p() }).or(v({
      type: b("output_audio"),
      audio: p().nullable().optional(),
      transcript: p().nullable().optional()
    })))
  })
]), Ja = v({
  itemId: p(),
  previousItemId: p().nullable().optional(),
  type: b("function_call"),
  status: oe(["in_progress", "completed", "incomplete"]),
  arguments: p(),
  name: p(),
  output: p().nullable()
}), Ba = v({
  itemId: p(),
  previousItemId: p().nullable().optional(),
  type: oe(["mcp_call", "mcp_tool_call"]),
  status: oe(["in_progress", "completed", "incomplete"]),
  arguments: p(),
  name: p(),
  output: p().nullable()
}), qd = v({
  itemId: p(),
  type: b("mcp_approval_request"),
  serverLabel: p(),
  name: p(),
  arguments: ee(p(), V()),
  approved: Nt().optional().nullable()
}), Te = pi("openai-agents:realtime"), so = v({
  id: p().optional().nullable(),
  conversation_id: p().optional().nullable(),
  max_output_tokens: E().or(b("inf")).optional().nullable(),
  metadata: ee(p(), V()).optional().nullable(),
  // GA rename: modalities -> output_modalities
  output_modalities: B(p()).optional().nullable(),
  object: b("realtime.response").optional().nullable(),
  output: B(V()).optional().nullable(),
  // GA grouping: audio.output.{format,voice}
  audio: v({
    output: v({
      format: V().optional().nullable(),
      voice: p().optional().nullable()
    }).optional().nullable()
  }).optional().nullable(),
  status: oe(["completed", "incomplete", "failed", "cancelled", "in_progress"]).optional().nullable(),
  status_details: ee(p(), V()).optional().nullable(),
  usage: v({
    input_tokens: E().optional(),
    input_token_details: ee(p(), V()).optional().nullable(),
    output_tokens: E().optional(),
    output_token_details: ee(p(), V()).optional().nullable()
  }).optional().nullable()
}), Jd = v({
  id: p().optional(),
  audio: p().nullable().optional(),
  text: p().nullable().optional(),
  transcript: p().nullable().optional(),
  type: tt([
    b("input_text"),
    b("input_audio"),
    b("item_reference"),
    b("output_text"),
    b("output_audio")
  ])
}), cn = v({
  id: p().optional(),
  arguments: p().optional(),
  call_id: p().optional(),
  content: B(Jd).optional(),
  name: p().optional(),
  output: p().nullable().optional(),
  role: oe(["user", "assistant", "system"]).optional(),
  status: oe(["completed", "incomplete", "in_progress"]).optional(),
  type: oe([
    "message",
    "function_call",
    "function_call_output",
    "mcp_list_tools",
    "mcp_tool_call",
    "mcp_call",
    "mcp_approval_request",
    "mcp_approval_response"
  ]).optional(),
  approval_request_id: p().nullable().optional(),
  approve: Nt().nullable().optional(),
  reason: p().nullable().optional(),
  server_label: p().optional(),
  error: V().nullable().optional(),
  tools: B(v({
    name: p(),
    description: p(),
    input_schema: ee(V()).optional()
  }).passthrough()).optional()
}).passthrough(), Bd = v({
  type: b("conversation.created"),
  event_id: p(),
  conversation: v({
    id: p().optional(),
    object: b("realtime.conversation").optional()
  })
}), zd = v({
  type: b("conversation.item.added"),
  event_id: p(),
  item: cn,
  previous_item_id: p().nullable().optional()
}), Gd = v({
  type: b("conversation.item.done"),
  event_id: p(),
  item: cn,
  previous_item_id: p().nullable().optional()
}), Vd = v({
  type: b("conversation.item.deleted"),
  event_id: p(),
  item_id: p()
}), Wd = v({
  type: b("conversation.item.input_audio_transcription.completed"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  transcript: p(),
  logprobs: B(V()).nullable().optional()
}), Hd = v({
  type: b("conversation.item.input_audio_transcription.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E().optional(),
  delta: p().optional(),
  logprobs: B(V()).nullable().optional()
}), Kd = v({
  type: b("conversation.item.input_audio_transcription.failed"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  error: v({
    code: p().optional(),
    message: p().optional(),
    param: p().optional(),
    type: p().optional()
  })
}), Yd = v({
  type: b("conversation.item.retrieved"),
  event_id: p(),
  item: cn
}), Xd = v({
  type: b("conversation.item.truncated"),
  event_id: p(),
  item_id: p(),
  audio_end_ms: E(),
  content_index: E()
}), Qd = v({
  type: b("conversation.item.create"),
  item: cn,
  event_id: p().optional(),
  previous_item_id: p().nullable().optional()
}), ep = v({
  type: b("conversation.item.delete"),
  item_id: p(),
  event_id: p().optional()
}), tp = v({
  type: b("conversation.item.retrieve"),
  item_id: p(),
  event_id: p().optional()
}), np = v({
  type: b("conversation.item.truncate"),
  item_id: p(),
  audio_end_ms: E(),
  content_index: E(),
  event_id: p().optional()
}), rp = v({
  type: b("error"),
  event_id: p().optional(),
  error: V().optional()
}), sp = v({
  type: b("input_audio_buffer.cleared"),
  event_id: p()
}), ap = v({
  type: b("input_audio_buffer.append"),
  audio: p(),
  event_id: p().optional()
}), ip = v({
  type: b("input_audio_buffer.clear"),
  event_id: p().optional()
}), op = v({
  type: b("input_audio_buffer.commit"),
  event_id: p().optional()
}), up = v({
  type: b("input_audio_buffer.committed"),
  event_id: p(),
  item_id: p(),
  previous_item_id: p().nullable().optional()
}), cp = v({
  type: b("input_audio_buffer.speech_started"),
  event_id: p(),
  item_id: p(),
  audio_start_ms: E()
}), lp = v({
  type: b("input_audio_buffer.speech_stopped"),
  event_id: p(),
  item_id: p(),
  audio_end_ms: E()
}), dp = v({
  type: b("output_audio_buffer.started"),
  event_id: p()
}).passthrough(), pp = v({
  type: b("output_audio_buffer.stopped"),
  event_id: p()
}).passthrough(), fp = v({
  type: b("output_audio_buffer.cleared"),
  event_id: p()
}), hp = v({
  type: b("rate_limits.updated"),
  event_id: p(),
  rate_limits: B(v({
    limit: E().optional(),
    name: oe(["requests", "tokens"]).optional(),
    remaining: E().optional(),
    reset_seconds: E().optional()
  }))
}), mp = v({
  type: b("response.output_audio.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), gp = v({
  type: b("response.output_audio.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p()
}), yp = v({
  type: b("response.output_audio_transcript.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), _p = v({
  //  GA may introduce response.output_audio_transcript.done
  type: b("response.output_audio_transcript.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  transcript: p(),
  output_index: E(),
  response_id: p()
}), vp = v({
  type: b("response.content_part.added"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p(),
  part: v({
    audio: p().optional(),
    text: p().optional(),
    transcript: p().optional(),
    type: oe(["text", "audio"]).optional()
  })
}), wp = v({
  type: b("response.content_part.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p(),
  part: v({
    audio: p().optional(),
    text: p().optional(),
    transcript: p().optional(),
    type: oe(["text", "audio"]).optional()
  })
}), bp = v({
  type: b("response.created"),
  event_id: p(),
  response: so
}), ao = v({
  type: b("response.done"),
  event_id: p(),
  response: so
}), Ip = v({
  type: b("response.function_call_arguments.delta"),
  event_id: p(),
  item_id: p(),
  call_id: p(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), xp = v({
  type: b("response.function_call_arguments.done"),
  event_id: p(),
  item_id: p(),
  call_id: p(),
  arguments: p(),
  output_index: E(),
  response_id: p()
}), Sp = v({
  type: b("response.output_item.added"),
  event_id: p(),
  item: cn,
  output_index: E(),
  response_id: p()
}), Tp = v({
  type: b("response.output_item.done"),
  event_id: p(),
  item: cn,
  output_index: E(),
  response_id: p()
}), kp = v({
  type: b("response.output_text.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), Ap = v({
  // No rename specified for done; keep response.text.done
  type: b("response.output_text.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  text: p(),
  output_index: E(),
  response_id: p()
}), Op = v({
  type: b("session.created"),
  event_id: p(),
  session: V()
}), Cp = v({
  type: b("session.updated"),
  event_id: p(),
  session: V()
}), Ep = v({
  type: b("response.cancel"),
  event_id: p().optional(),
  response_id: p().optional()
}), Np = v({
  type: b("response.create"),
  event_id: p().optional(),
  response: V().optional()
}), Rp = v({
  type: b("session.update"),
  event_id: p().optional(),
  session: V()
}), Pp = v({
  type: b("mcp_list_tools.in_progress"),
  event_id: p().optional(),
  item_id: p().optional()
}), Dp = v({
  type: b("mcp_list_tools.completed"),
  event_id: p().optional(),
  item_id: p().optional()
}), Mp = v({
  type: b("response.mcp_call_arguments.delta"),
  event_id: p(),
  response_id: p(),
  item_id: p(),
  output_index: E(),
  delta: p(),
  obfuscation: p()
}), jp = v({
  type: b("response.mcp_call_arguments.done"),
  event_id: p(),
  response_id: p(),
  item_id: p(),
  output_index: E(),
  arguments: p()
}), $p = v({
  type: b("response.mcp_call.in_progress"),
  event_id: p(),
  output_index: E(),
  item_id: p()
}), Fp = v({
  type: b("response.mcp_call.completed"),
  event_id: p(),
  output_index: E(),
  item_id: p()
}), Lp = v({
  type: b("mcp_list_tools.failed"),
  event_id: p().optional(),
  item_id: p().optional()
}), Up = v({
  type: p(),
  event_id: p().optional().nullable()
}).passthrough(), Zp = ge("type", [
  Bd,
  zd,
  Gd,
  Vd,
  Wd,
  Hd,
  Kd,
  Yd,
  Xd,
  rp,
  sp,
  up,
  cp,
  lp,
  dp,
  pp,
  fp,
  hp,
  mp,
  gp,
  yp,
  _p,
  vp,
  wp,
  bp,
  ao,
  Ip,
  xp,
  Sp,
  Tp,
  kp,
  Ap,
  Op,
  Cp,
  Pp,
  Dp,
  Lp,
  Mp,
  jp,
  $p,
  Fp
]);
ge("type", [
  Qd,
  ep,
  tp,
  np,
  ap,
  ip,
  op,
  Ep,
  Np,
  Rp
]);
function Rs(n) {
  const e = JSON.parse(n.data.toString()), t = Zp.safeParse(e);
  if (!t.success) {
    const r = Up.safeParse(e);
    return r.success ? { data: r.data, isGeneric: !0 } : { data: null, isGeneric: !0 };
  }
  return { data: t.data, isGeneric: !1 };
}
const qp = "gpt-realtime", Re = {
  outputModalities: ["audio"],
  audio: {
    input: {
      format: { type: "audio/pcm", rate: 24e3 },
      transcription: { model: "gpt-4o-mini-transcribe" },
      turnDetection: { type: "semantic_vad" },
      noiseReduction: null
    },
    output: {
      format: { type: "audio/pcm", rate: 24e3 },
      speed: 1
    }
  }
};
var Tt, Fn, ve, Ln;
const Ms = class Ms extends ws {
  constructor(t = {}) {
    super();
    N(this, Tt);
    N(this, Fn);
    N(this, ve, null);
    N(this, Ln, null);
    I(this, "eventEmitter", new Ir());
    k(this, Tt, t.model ?? qp), k(this, Fn, t.apiKey);
  }
  /**
   * The current model that is being used by the transport layer.
   */
  get currentModel() {
    return u(this, Tt);
  }
  /**
   * The current model that is being used by the transport layer.
   * **Note**: The model cannot be changed mid conversation.
   */
  set currentModel(t) {
    k(this, Tt, t);
  }
  /**
   * Hook for subclasses to clean up transport-specific state when audio
   * playback finishes. Defaults to a no-op.
   */
  _afterAudioDoneEvent() {
  }
  get _rawSessionConfig() {
    return u(this, Ln) ?? null;
  }
  async _getApiKey(t) {
    const r = t.apiKey ?? u(this, Fn);
    return typeof r == "function" ? await r() : r;
  }
  _onMessage(t) {
    var a, o, i, c, d, f;
    const { data: r, isGeneric: s } = Rs(t);
    if (r !== null && (this.emit("*", r), !s)) {
      if (r.type === "error" ? this.emit("error", { type: "error", error: r }) : this.emit(r.type, r), r.type === "response.created") {
        this.emit("turn_started", {
          type: "response_started",
          providerData: {
            ...r
          }
        });
        return;
      }
      if (r.type === "session.updated" && k(this, Ln, r.session), r.type === "response.done") {
        const l = ao.safeParse(r);
        if (!l.success) {
          Te.error("Error parsing response done event", l.error);
          return;
        }
        const h = ((a = l.data.response.usage) == null ? void 0 : a.input_tokens) ?? 0, g = ((o = l.data.response.usage) == null ? void 0 : o.output_tokens) ?? 0, y = h + g, S = new Ar({
          inputTokens: h,
          inputTokensDetails: ((i = l.data.response.usage) == null ? void 0 : i.input_token_details) ?? {},
          outputTokens: g,
          outputTokensDetails: ((c = l.data.response.usage) == null ? void 0 : c.output_token_details) ?? {},
          totalTokens: y
        });
        this.emit("usage_update", S), this.emit("turn_done", {
          type: "response_done",
          response: {
            id: l.data.response.id ?? "",
            output: l.data.response.output ?? [],
            usage: {
              inputTokens: h,
              inputTokensDetails: ((d = l.data.response.usage) == null ? void 0 : d.input_token_details) ?? {},
              outputTokens: g,
              outputTokensDetails: ((f = l.data.response.usage) == null ? void 0 : f.output_token_details) ?? {},
              totalTokens: y
            }
          }
        });
        return;
      }
      if (r.type === "response.output_audio.done") {
        this.emit("audio_done"), this._afterAudioDoneEvent();
        return;
      }
      if (r.type === "conversation.item.deleted") {
        this.emit("item_deleted", {
          itemId: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.completed" || r.type === "conversation.item.truncated") {
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.delta" || r.type === "response.output_text.delta" || r.type === "response.output_audio_transcript.delta" || r.type === "response.function_call_arguments.delta") {
        r.type === "response.output_audio_transcript.delta" && this.emit("audio_transcript_delta", {
          type: "transcript_delta",
          delta: r.delta,
          itemId: r.item_id,
          responseId: r.response_id
        });
        return;
      }
      if (r.type === "conversation.item.added" || r.type === "conversation.item.done" || r.type === "conversation.item.retrieved") {
        if (r.item.type === "mcp_list_tools" && r.type === "conversation.item.done") {
          const l = r.item.server_label ?? "", h = r.item.tools ?? [];
          try {
            this.emit("mcp_tools_listed", {
              serverLabel: l,
              tools: h
            });
          } catch (g) {
            Te.error("Error emitting mcp_tools_listed", g, r.item);
          }
          return;
        }
        if (r.item.type === "message") {
          const l = r.type === "conversation.item.added" || r.type === "conversation.item.done" ? r.previous_item_id : null, h = qa.parse({
            itemId: r.item.id,
            previousItemId: l,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.item.status
          });
          this.emit("item_update", h);
          return;
        }
        if (r.item.type === "mcp_approval_request" && r.type === "conversation.item.done") {
          const l = r.item, h = qd.parse({
            itemId: l.id,
            type: l.type,
            serverLabel: l.server_label,
            name: l.name,
            arguments: JSON.parse(l.arguments || "{}"),
            approved: l.approved
          });
          this.emit("item_update", h), this.emit("mcp_approval_request", h);
          return;
        }
        if (r.item.type === "mcp_tool_call" || r.item.type === "mcp_call") {
          const l = r.type === "conversation.item.done" ? "completed" : "in_progress", h = Ba.parse({
            itemId: r.item.id,
            type: r.item.type,
            status: l,
            arguments: r.item.arguments,
            name: r.item.name,
            output: r.item.output
          });
          this.emit("item_update", h), r.type === "conversation.item.done" && this.emit("mcp_tool_call_completed", h);
          return;
        }
      }
      if (r.type === "response.mcp_call.in_progress") {
        const l = r;
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: l.item_id
        });
        return;
      }
      if (r.type === "mcp_list_tools.in_progress") {
        const l = r;
        l.item_id && this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: l.item_id
        });
        return;
      }
      if (r.type === "response.output_item.done" || r.type === "response.output_item.added") {
        const l = r.item;
        if (l.type === "function_call" && l.status === "completed") {
          const h = Ja.parse({
            itemId: l.id,
            type: l.type,
            status: "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: l.arguments,
            name: l.name,
            output: null
          });
          this.emit("item_update", h), this.emit("function_call", {
            id: l.id,
            type: "function_call",
            callId: l.call_id ?? "",
            arguments: l.arguments ?? "",
            name: l.name ?? ""
          });
          return;
        }
        if (l.type === "mcp_tool_call" || l.type === "mcp_call") {
          const h = Ba.parse({
            itemId: l.id,
            type: l.type,
            status: r.type === "response.output_item.done" ? "completed" : "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: l.arguments,
            name: l.name,
            output: l.output
          });
          this.emit("item_update", h);
          return;
        }
        if (l.type === "message") {
          const h = qa.parse({
            itemId: r.item.id,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.type === "response.output_item.done" ? l.status ?? "completed" : l.status ?? "in_progress"
          });
          this.emit("item_update", h);
          return;
        }
      }
    }
  }
  _onError(t) {
    this.emit("error", {
      type: "error",
      error: t
    });
  }
  _onOpen() {
    this.emit("connected");
  }
  _onClose() {
    this.emit("disconnected");
  }
  /**
   * Send a message to the Realtime API. This will create a new item in the conversation and
   * trigger a response.
   *
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r, { triggerResponse: s = !0 } = {}) {
    const a = typeof t == "string" ? [
      {
        type: "input_text",
        text: t
      }
    ] : t.content.map((o) => o.type === "input_image" ? {
      type: "input_image",
      image_url: o.image,
      ...o.providerData ?? {}
    } : o);
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "message",
        role: "user",
        content: a
      },
      ...r
    }), s && this.sendEvent({
      type: "response.create"
    });
  }
  addImage(t, { triggerResponse: r = !0 } = {}) {
    this.sendMessage({
      type: "message",
      role: "user",
      content: [{ type: "input_image", image: t }]
    }, {}, { triggerResponse: r });
  }
  _getMergedSessionConfig(t) {
    var a, o, i, c, d, f, l, h, g, y, S, _, m, x, w, D, T, O, M, W, J, F, he, se, ue, Je, Ne, ln;
    const r = Zd(t), s = {
      type: "realtime",
      instructions: r.instructions,
      model: r.model ?? u(this, Tt),
      output_modalities: r.outputModalities ?? Re.outputModalities,
      audio: {
        input: {
          format: ((o = (a = r.audio) == null ? void 0 : a.input) == null ? void 0 : o.format) ?? ((c = (i = Re.audio) == null ? void 0 : i.input) == null ? void 0 : c.format),
          noise_reduction: ((f = (d = r.audio) == null ? void 0 : d.input) == null ? void 0 : f.noiseReduction) ?? ((h = (l = Re.audio) == null ? void 0 : l.input) == null ? void 0 : h.noiseReduction),
          transcription: ((y = (g = r.audio) == null ? void 0 : g.input) == null ? void 0 : y.transcription) ?? ((_ = (S = Re.audio) == null ? void 0 : S.input) == null ? void 0 : _.transcription),
          turn_detection: Ms.buildTurnDetectionConfig((x = (m = r.audio) == null ? void 0 : m.input) == null ? void 0 : x.turnDetection) ?? ((D = (w = Re.audio) == null ? void 0 : w.input) == null ? void 0 : D.turnDetection)
        },
        output: {
          format: ((O = (T = r.audio) == null ? void 0 : T.output) == null ? void 0 : O.format) ?? ((W = (M = Re.audio) == null ? void 0 : M.output) == null ? void 0 : W.format),
          voice: ((F = (J = r.audio) == null ? void 0 : J.output) == null ? void 0 : F.voice) ?? ((se = (he = Re.audio) == null ? void 0 : he.output) == null ? void 0 : se.voice),
          speed: ((Je = (ue = r.audio) == null ? void 0 : ue.output) == null ? void 0 : Je.speed) ?? ((ln = (Ne = Re.audio) == null ? void 0 : Ne.output) == null ? void 0 : ln.speed)
        }
      },
      tool_choice: r.toolChoice ?? Re.toolChoice,
      // We don't set tracing here to make sure that we don't try to override it on every
      // session.update as it might lead to errors
      ...r.providerData ?? {}
    };
    return r.prompt && (s.prompt = {
      id: r.prompt.promptId,
      version: r.prompt.version,
      variables: r.prompt.variables
    }), r.tools && r.tools.length > 0 && (s.tools = r.tools.map((Kn) => ({
      ...Kn,
      strict: void 0
    }))), s;
  }
  /**
   * Build the payload object expected by the Realtime API when creating or updating a session.
   *
   * The helper centralises the conversion from camelCase runtime config to the snake_case payload
   * required by the Realtime API so transports that need a one-off payload (for example SIP call
   * acceptance) can reuse the same logic without duplicating private state.
   *
   * @param config - The session config to merge with defaults.
   */
  buildSessionPayload(t) {
    return this._getMergedSessionConfig(t);
  }
  static buildTurnDetectionConfig(t) {
    if (typeof t > "u")
      return;
    const { type: r, createResponse: s, create_response: a, eagerness: o, interruptResponse: i, interrupt_response: c, prefixPaddingMs: d, prefix_padding_ms: f, silenceDurationMs: l, silence_duration_ms: h, threshold: g, idleTimeoutMs: y, idle_timeout_ms: S, ..._ } = t, m = {
      type: r,
      create_response: s || a,
      eagerness: o,
      interrupt_response: i || c,
      prefix_padding_ms: d || f,
      silence_duration_ms: l || h,
      idle_timeout_ms: y || S,
      threshold: g,
      ..._
    };
    return Object.keys(m).forEach((x) => {
      m[x] === void 0 && delete m[x];
    }), Object.keys(m).length > 0 ? m : void 0;
  }
  /**
   * Sets the internal tracing config. This is used to track the tracing config that has been set
   * during the session.create event.
   */
  set _tracingConfig(t) {
    k(this, ve, t);
  }
  /**
   * Sets the tracing config for the session. This will send the tracing config to the Realtime API.
   *
   * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists
   */
  _updateTracingConfig(t) {
    var r, s, a;
    if (typeof u(this, ve) > "u" && k(this, ve, null), t === "auto") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: "auto"
        }
      });
      return;
    }
    if (u(this, ve) !== null && typeof u(this, ve) != "string" && typeof t != "string") {
      Te.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");
      return;
    }
    if (t === null) {
      Te.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."), this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: null
        }
      });
      return;
    }
    if (u(this, ve) === null || typeof u(this, ve) == "string") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: t
        }
      });
      return;
    }
    if ((t == null ? void 0 : t.group_id) !== ((r = u(this, ve)) == null ? void 0 : r.group_id) || (t == null ? void 0 : t.metadata) !== ((s = u(this, ve)) == null ? void 0 : s.metadata) || (t == null ? void 0 : t.workflow_name) !== ((a = u(this, ve)) == null ? void 0 : a.workflow_name)) {
      Te.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s", JSON.stringify(u(this, ve)), JSON.stringify(t));
      return;
    }
    this.sendEvent({
      type: "session.update",
      session: {
        type: "realtime",
        tracing: t
      }
    });
  }
  /**
   * Updates the session config. This will merge it with the current session config with the default
   * values and send it to the Realtime API.
   *
   * @param config - The session config to update.
   */
  updateSessionConfig(t) {
    const r = this.buildSessionPayload(t);
    this.sendEvent({
      type: "session.update",
      session: r
    });
  }
  /**
   * Send the output of a function call to the Realtime API.
   *
   * @param toolCall - The tool call to send the output for.
   * @param output - The output of the function call.
   * @param startResponse - Whether to start a new response after sending the output.
   */
  sendFunctionCallOutput(t, r, s = !0) {
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "function_call_output",
        output: r,
        call_id: t.callId
      }
    });
    try {
      const a = Ja.parse({
        itemId: t.id,
        previousItemId: t.previousItemId,
        type: "function_call",
        status: "completed",
        arguments: t.arguments,
        name: t.name,
        output: r
      });
      this.emit("item_update", a);
    } catch (a) {
      Te.error("Error parsing tool call item", a, t);
    }
    s && this.sendEvent({
      type: "response.create"
    });
  }
  /**
   * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer
   * will be committed and the model will start processing it. This is necessary if you have
   * disabled turn detection / voice activity detection (VAD).
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, { commit: r = !1 } = {}) {
    this.sendEvent({
      type: "input_audio_buffer.append",
      audio: to(t)
    }), r && this.sendEvent({
      type: "input_audio_buffer.commit"
    });
  }
  /**
   * Reset the history of the conversation. This will create a diff between the old and new history
   * and send the necessary events to the Realtime API to update the history.
   *
   * @param oldHistory - The old history of the conversation.
   * @param newHistory - The new history of the conversation.
   */
  resetHistory(t, r) {
    const { removals: s, additions: a, updates: o } = Rd(t, r), i = new Set(s.map((d) => d.itemId));
    for (const d of o)
      i.add(d.itemId);
    if (i.size > 0)
      for (const d of i)
        this.sendEvent({
          type: "conversation.item.delete",
          item_id: d
        });
    const c = [...a, ...o];
    for (const d of c)
      if (d.type === "message") {
        const f = {
          type: "message",
          role: d.role,
          content: d.content,
          id: d.itemId
        };
        d.role !== "system" && d.status && (f.status = d.status), this.sendEvent({
          type: "conversation.item.create",
          item: f
        });
      } else d.type === "function_call" && Te.warn("Function calls cannot be manually added or updated at the moment. Ignoring.");
  }
  sendMcpResponse(t, r) {
    this.sendEvent({
      type: "conversation.item.create",
      previous_item_id: t.itemId,
      item: {
        type: "mcp_approval_response",
        approval_request_id: t.itemId,
        approve: r
      }
    });
  }
};
Tt = new WeakMap(), Fn = new WeakMap(), ve = new WeakMap(), Ln = new WeakMap();
let _r = Ms;
var Un, Q, Zn, lt, qn;
class Jp extends _r {
  constructor(t = {}) {
    if (typeof RTCPeerConnection > "u")
      throw new Error("WebRTC is not supported in this environment");
    super(t);
    I(this, "options");
    N(this, Un);
    N(this, Q, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    });
    N(this, Zn);
    N(this, lt, !1);
    N(this, qn, !1);
    this.options = t, k(this, Un, t.baseUrl ?? "https://api.openai.com/v1/realtime/calls"), k(this, Zn, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current call ID of the WebRTC connection.
   */
  get callId() {
    return u(this, Q).callId;
  }
  /**
   * The current status of the WebRTC connection.
   */
  get status() {
    return u(this, Q).status;
  }
  /**
   * The current connection state of the WebRTC connection including the peer connection and data
   * channel.
   */
  get connectionState() {
    return u(this, Q);
  }
  /**
   * Whether the session is muted.
   */
  get muted() {
    return u(this, qn);
  }
  /**
   * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API
   * via WebRTC.
   *
   * If you are using a browser, the transport layer will also automatically configure the
   * microphone and audio output to be used by the session.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    if (u(this, Q).status === "connected")
      return;
    u(this, Q).status === "connecting" && Te.warn("Realtime connection already in progress. Please await original promise");
    const r = t.model ?? this.currentModel;
    this.currentModel = r;
    const s = t.url ?? u(this, Un), a = await this._getApiKey(t), o = typeof a == "string" && a.startsWith("ek_");
    if (!u(this, Zn) && !o)
      throw new ne("Using the WebRTC connection in a browser environment requires an ephemeral client key. If you need to use a regular API key, use the WebSocket transport or set the `useInsecureApiKey` option to true.");
    return new Promise(async (i, c) => {
      var d, f;
      try {
        const l = {
          ...t.initialSessionConfig || {},
          model: this.currentModel
        }, h = new URL(s);
        let g = new RTCPeerConnection();
        const y = g.createDataChannel("oai-events");
        let S;
        const _ = (O) => {
          O.onconnectionstatechange = () => {
            switch (O.connectionState) {
              case "disconnected":
              case "failed":
              case "closed":
                this.close();
                break;
            }
          };
        };
        _(g), k(this, Q, {
          status: "connecting",
          peerConnection: g,
          dataChannel: y,
          callId: S
        }), this.emit("connection_change", u(this, Q).status), y.addEventListener("open", () => {
          k(this, Q, {
            status: "connected",
            peerConnection: g,
            dataChannel: y,
            callId: S
          }), this.updateSessionConfig(l), this.emit("connection_change", u(this, Q).status), this._onOpen(), i();
        }), y.addEventListener("error", (O) => {
          this.close(), this._onError(O), c(O);
        }), y.addEventListener("message", (O) => {
          this._onMessage(O);
          const { data: M, isGeneric: W } = Rs(O);
          if (!(!M || W) && (M.type === "response.created" ? k(this, lt, !0) : M.type === "response.done" && k(this, lt, !1), M.type === "session.created")) {
            this._tracingConfig = M.session.tracing;
            const J = typeof l.tracing > "u" ? "auto" : l.tracing;
            this._updateTracingConfig(J);
          }
        });
        const m = this.options.audioElement ?? document.createElement("audio");
        m.autoplay = !0, g.ontrack = (O) => {
          m.srcObject = O.streams[0];
        };
        const x = this.options.mediaStream ?? await navigator.mediaDevices.getUserMedia({
          audio: !0
        });
        if (g.addTrack(x.getAudioTracks()[0]), this.options.changePeerConnection) {
          const O = g;
          g = await this.options.changePeerConnection(g), O !== g && (O.onconnectionstatechange = null), _(g), k(this, Q, { ...u(this, Q), peerConnection: g });
        }
        const w = await g.createOffer();
        if (await g.setLocalDescription(w), !w.sdp)
          throw new Error("Failed to create offer");
        const D = await fetch(h, {
          method: "POST",
          body: w.sdp,
          headers: {
            "Content-Type": "application/sdp",
            Authorization: `Bearer ${a}`,
            "X-OpenAI-Agents-SDK": ro["X-OpenAI-Agents-SDK"]
          }
        });
        S = (f = (d = D.headers) == null ? void 0 : d.get("Location")) == null ? void 0 : f.split("/").pop(), k(this, Q, { ...u(this, Q), callId: S });
        const T = {
          type: "answer",
          sdp: await D.text()
        };
        await g.setRemoteDescription(T);
      } catch (l) {
        this.close(), this._onError(l), c(l);
      }
    });
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, Q).dataChannel || u(this, Q).dataChannel.readyState !== "open")
      throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");
    u(this, Q).dataChannel.send(JSON.stringify(t));
  }
  /**
   * Mute or unmute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    k(this, qn, t), u(this, Q).peerConnection && u(this, Q).peerConnection.getSenders().forEach((s) => {
      s.track && (s.track.enabled = !t);
    });
  }
  _afterAudioDoneEvent() {
    k(this, lt, !1);
  }
  /**
   * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.
   */
  close() {
    if (u(this, Q).dataChannel && u(this, Q).dataChannel.close(), u(this, Q).peerConnection) {
      const t = u(this, Q).peerConnection;
      t.onconnectionstatechange = null, t.getSenders().forEach((r) => {
        var s;
        (s = r.track) == null || s.stop();
      }), t.close();
    }
    u(this, Q).status !== "disconnected" && (k(this, Q, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    }), this.emit("connection_change", u(this, Q).status), this._onClose());
  }
  /**
   * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent
   * stops talking.
   */
  interrupt() {
    u(this, lt) && (this.sendEvent({
      type: "response.cancel"
    }), k(this, lt, !1)), this.sendEvent({
      type: "output_audio_buffer.clear"
    });
  }
}
Un = new WeakMap(), Q = new WeakMap(), Zn = new WeakMap(), lt = new WeakMap(), qn = new WeakMap();
const Bp = globalThis.WebSocket;
var dt, kt, At, de, Jn, Ke, Ot, Ct, Xt, Bn, $t, ds, oo;
class io extends _r {
  constructor(t = {}) {
    super(t);
    N(this, $t);
    N(this, dt);
    N(this, kt);
    N(this, At);
    N(this, de, {
      status: "disconnected",
      websocket: void 0
    });
    N(this, Jn);
    N(this, Ke);
    N(this, Ot);
    /**
     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time
     * since the response started to compute the right interruption time.
     *
     * Mostly internal but might be used by extended transport layers for their interruption
     * calculation.
     */
    I(this, "_firstAudioTimestamp");
    I(this, "_audioLengthMs", 0);
    N(this, Ct, !1);
    N(this, Xt);
    N(this, Bn);
    k(this, kt, t.url), k(this, At, t.url), k(this, Jn, t.useInsecureApiKey ?? !1), k(this, Xt, t.createWebSocket), k(this, Bn, t.skipOpenEventListeners ?? !1);
  }
  getCommonRequestHeaders() {
    return ro;
  }
  /**
   * The current status of the WebSocket connection.
   */
  get status() {
    return u(this, de).status;
  }
  /**
   * The current connection state of the WebSocket connection.
   */
  get connectionState() {
    return u(this, de);
  }
  /**
   * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,
   * this should be handled by the client by not triggering the `sendAudio` method.
   */
  get muted() {
    return null;
  }
  /**
   * The current item ID of the ongoing response.
   */
  get currentItemId() {
    return u(this, Ke);
  }
  /**
   * Triggers the `audio` event that a client might listen to to receive the audio buffer.
   * Protected for you to be able to override and disable emitting this event in case your extended
   * transport layer handles audio internally.
   *
   * @param audioEvent - The audio event to emit.
   */
  _onAudio(t) {
    this.emit("audio", t);
  }
  _afterAudioDoneEvent() {
    L(this, $t, ds).call(this);
  }
  async connect(t) {
    const r = t.model ?? this.currentModel;
    this.currentModel = r, k(this, dt, await this._getApiKey(t));
    const s = t.callId;
    let a;
    t.url ? (a = t.url, k(this, At, t.url)) : s ? a = `wss://api.openai.com/v1/realtime?call_id=${s}` : u(this, At) ? a = u(this, At) : a = `wss://api.openai.com/v1/realtime?model=${this.currentModel}`, k(this, kt, a);
    const o = {
      ...t.initialSessionConfig || {},
      model: this.currentModel
    };
    await new Promise((i, c) => {
      L(this, $t, oo).call(this, i, c, o).catch(c);
    }), await this.updateSessionConfig(o);
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, de).websocket)
      throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");
    u(this, de).websocket.send(JSON.stringify(t));
  }
  /**
   * Close the WebSocket connection.
   *
   * This will also reset any internal connection tracking used for interruption handling.
   */
  close() {
    var t;
    (t = u(this, de).websocket) == null || t.close(), k(this, Ke, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, k(this, Ot, void 0);
  }
  /**
   * Will throw an error as the WebSocket transport layer does not support muting.
   */
  mute(t) {
    throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.");
  }
  /**
   * Send an audio buffer to the Realtime API. This is used for your client to send audio to the
   * model to respond.
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, r = {}) {
    u(this, de).status === "connected" && super.sendAudio(t, r);
  }
  /**
   * Send a cancel response event to the Realtime API. This is used to cancel an ongoing
   *  response that the model is currently generating.
   */
  _cancelResponse() {
    u(this, Ct) && (this.sendEvent({
      type: "response.cancel"
    }), k(this, Ct, !1));
  }
  /**
   * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.
   *
   * This method is used to send the right events to the API to inform the model that the user has
   * interrupted the response. It might be overridden/extended by an extended transport layer. See
   * the `TwilioRealtimeTransportLayer` for an example.
   *
   * @param elapsedTime - The elapsed time since the response started.
   */
  _interrupt(t, r = !0) {
    if (t < 0)
      return;
    r && this._cancelResponse();
    const s = this._audioLengthMs ?? Number.POSITIVE_INFINITY, a = Math.max(0, Math.floor(Math.min(t, s)));
    this.emit("audio_interrupted"), this.sendEvent({
      type: "conversation.item.truncate",
      item_id: u(this, Ke),
      content_index: u(this, Ot),
      audio_end_ms: a
    });
  }
  /**
   * Interrupt the ongoing response. This method is triggered automatically by the client when
   * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got
   * triggered.
   *
   * You can also call this method directly if you want to interrupt the conversation for example
   * based on an event in the client.
   */
  interrupt(t = !0) {
    if (!u(this, Ke) || typeof this._firstAudioTimestamp != "number")
      return;
    const r = Date.now() - this._firstAudioTimestamp;
    r >= 0 && this._interrupt(r, t), L(this, $t, ds).call(this);
  }
}
dt = new WeakMap(), kt = new WeakMap(), At = new WeakMap(), de = new WeakMap(), Jn = new WeakMap(), Ke = new WeakMap(), Ot = new WeakMap(), Ct = new WeakMap(), Xt = new WeakMap(), Bn = new WeakMap(), $t = new WeakSet(), ds = function() {
  k(this, Ke, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, k(this, Ot, void 0);
}, oo = async function(t, r, s) {
  if (u(this, de).websocket) {
    t();
    return;
  }
  if (!u(this, dt))
    throw new ne("API key is not set. Please call `connect()` with an API key first.");
  if (!u(this, dt).startsWith("ek_") && !u(this, Jn))
    throw new ne("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");
  let a = null;
  if (u(this, Xt))
    a = await u(this, Xt).call(this, {
      url: u(this, kt),
      apiKey: u(this, dt)
    });
  else {
    const i = [
      "realtime",
      // Auth
      "openai-insecure-api-key." + u(this, dt),
      // Version header
      Md
    ];
    a = new Bp(u(this, kt), i);
  }
  k(this, de, {
    status: "connecting",
    websocket: a
  }), this.emit("connection_change", u(this, de).status);
  const o = () => {
    k(this, de, {
      status: "connected",
      websocket: a
    }), this.emit("connection_change", u(this, de).status), this._onOpen(), t();
  };
  u(this, Bn) === !0 ? o() : a.addEventListener("open", o), a.addEventListener("error", (i) => {
    this._onError(i), k(this, de, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, de).status), r(i);
  }), a.addEventListener("message", (i) => {
    var f, l, h, g, y, S, _;
    this._onMessage(i);
    const { data: c, isGeneric: d } = Rs(i);
    if (!(!c || d)) {
      if (c.type === "response.output_audio.delta") {
        k(this, Ot, c.content_index), k(this, Ke, c.item_id), this._firstAudioTimestamp === void 0 && (this._firstAudioTimestamp = Date.now(), this._audioLengthMs = 0);
        const m = eo(c.delta), x = (h = (l = (f = this._rawSessionConfig) == null ? void 0 : f.audio) == null ? void 0 : l.output) == null ? void 0 : h.format;
        if (x && typeof x == "object") {
          const D = x.type;
          if (D === "audio/pcmu" || D === "audio/pcma")
            this._audioLengthMs += m.byteLength / 8;
          else if (D === "audio/pcm") {
            const T = x.rate ?? 24e3;
            this._audioLengthMs += m.byteLength / 2 / T * 1e3;
          } else
            this._audioLengthMs += m.byteLength / 24 / 2;
        } else typeof x == "string" ? x.startsWith("g711_") ? this._audioLengthMs += m.byteLength / 8 : this._audioLengthMs += m.byteLength / 24 / 2 : this._audioLengthMs += m.byteLength / 24 / 2;
        const w = {
          type: "audio",
          data: m,
          responseId: c.response_id
        };
        this._onAudio(w);
      } else if (c.type === "input_audio_buffer.speech_started") {
        const m = ((_ = (S = (y = (g = this._rawSessionConfig) == null ? void 0 : g.audio) == null ? void 0 : y.input) == null ? void 0 : S.turn_detection) == null ? void 0 : _.interrupt_response) ?? !1;
        this.interrupt(!m);
      } else if (c.type === "response.created")
        k(this, Ct, !0);
      else if (c.type === "response.done")
        k(this, Ct, !1);
      else if (c.type === "session.created") {
        this._tracingConfig = c.session.tracing;
        const m = typeof s.tracing > "u" ? "auto" : s.tracing;
        this._updateTracingConfig(m);
      }
    }
  }), a.addEventListener("close", () => {
    k(this, de, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, de).status), this._onClose();
  });
};
const uo = Symbol("backgroundResult");
function Xp(n) {
  return {
    [uo]: !0,
    content: n
  };
}
function zp(n) {
  return typeof n == "object" && n !== null && uo in n;
}
function Gp(n) {
  return n.type === "function" || n.type === "hosted_tool" && n.name === "hosted_mcp";
}
function Vp(n) {
  if (n.type === "function")
    return n;
  if (n.type === "hosted_tool" && n.name === "hosted_mcp") {
    const e = n.providerData.server_url && n.providerData.server_url.length > 0 ? n.providerData.server_url : void 0;
    return {
      type: "mcp",
      server_label: n.providerData.server_label,
      server_url: e,
      headers: n.providerData.headers,
      allowed_tools: n.providerData.allowed_tools,
      require_approval: n.providerData.require_approval
    };
  }
  throw new ne(`Invalid tool type: ${n}`);
}
function Wp() {
  return JSON.parse(JSON.stringify(Re));
}
var G, U, Qt, Z, en, tn, zn, ae, nn, rn, De, Gn, Et, Vn, Wn, te, mn, gn, co, nr, lo, fs, po, hs;
const js = class js extends Ir {
  constructor(t, r = {}) {
    super();
    N(this, te);
    I(this, "initialAgent");
    I(this, "options");
    N(this, G);
    N(this, U);
    N(this, Qt);
    N(this, Z);
    N(this, en, []);
    N(this, tn);
    N(this, zn, {});
    N(this, ae, []);
    N(this, nn);
    N(this, rn, {});
    N(this, De, !1);
    // Tracks all MCP tools fetched per server label (from mcp_list_tools results).
    N(this, Gn, /* @__PURE__ */ new Map());
    // Tracks currently available MCP tools based on the active agent's configured server_labels.
    N(this, Et, []);
    // Keeps track of the last full session config we sent (camelCase keys) so that
    // subsequent updates (e.g. during agent handoffs) preserve properties that are
    // not explicitly recalculated here (such as inputAudioFormat, outputAudioFormat,
    // modalities, speed, toolChoice, turnDetection, etc.). Without this, updating
    // the agent would drop audio format overrides (e.g. g711_ulaw) and revert to
    // transport defaults causing issues for integrations like Twilio.
    N(this, Vn, Wp());
    N(this, Wn, !0);
    this.initialAgent = t, this.options = r, typeof r.transport > "u" && Pd() || r.transport === "webrtc" ? k(this, G, new Jp()) : r.transport === "websocket" || typeof r.transport > "u" ? k(this, G, new io()) : k(this, G, r.transport), k(this, U, t), k(this, Z, new Zt({
      ...r.context ?? {},
      history: u(this, ae)
    })), k(this, en, (r.outputGuardrails ?? []).map(Fd)), k(this, tn, $d(r.outputGuardrailSettings ?? {})), k(this, nn, r.historyStoreAudio ?? !1), k(this, Wn, r.automaticallyTriggerResponseForMcpToolCalls ?? !0);
  }
  /**
   * The transport layer used by the session.
   */
  get transport() {
    return u(this, G);
  }
  /**
   * The current agent in the session.
   */
  get currentAgent() {
    return u(this, U);
  }
  /**
   * The current usage of the session.
   */
  get usage() {
    return u(this, Z).usage;
  }
  /**
   * The current context of the session.
   */
  get context() {
    return u(this, Z);
  }
  /**
   * Whether the session is muted. Might be `null` if the underlying transport layer does not
   * support muting.
   */
  get muted() {
    return u(this, G).muted;
  }
  /**
   * The history of the session.
   */
  get history() {
    return u(this, ae);
  }
  get availableMcpTools() {
    return u(this, Et);
  }
  /**
   * Compute the initial session config that the current session will use when connecting.
   *
   * This mirrors the configuration payload we send during `connect`, including dynamic values
   * such as the upstream agent instructions, tool definitions, and prompt content generated at
   * runtime. Keeping this helper exposed allows transports or orchestration layers to precompute
   * a CallAccept-compatible payload without opening a socket.
   *
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  async getInitialSessionConfig(t = {}) {
    return await L(this, te, mn).call(this, this.initialAgent), L(this, te, gn).call(this, {
      ...this.options.config ?? {},
      ...t ?? {}
    });
  }
  /**
   * Convenience helper to compute the initial session config without manually instantiating and connecting a session.
   *
   * This is primarily useful for integrations that must provide the session configuration to a
   * third party (for example the SIP `calls.accept` endpoint) before the actual realtime session
   * is attached. The helper instantiates a throwaway session so all agent-driven dynamic fields
   * resolve in exactly the same way as the live session path.
   *
   * @param agent - The starting agent for the session.
   * @param options - Session options used to seed the config calculation.
   * @param overrides - Additional config overrides applied on top of the provided options.
   */
  static async computeInitialSessionConfig(t, r = {}, s = {}) {
    const a = new js(t, r);
    try {
      return await a.getInitialSessionConfig(s);
    } finally {
      a.close();
    }
  }
  async updateAgent(t) {
    return u(this, U).emit("agent_handoff", u(this, Z), t), this.emit("agent_handoff", u(this, Z), u(this, U), t), await L(this, te, mn).call(this, t), await u(this, G).updateSessionConfig(await L(this, te, gn).call(this)), t;
  }
  /**
   * Connect to the session. This will establish the connection to the underlying transport layer
   * and start the session.
   *
   * After connecting, the session will also emit a `history_updated` event with an empty history.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    await L(this, te, mn).call(this, this.initialAgent), L(this, te, po).call(this), await u(this, G).connect({
      apiKey: t.apiKey ?? this.options.apiKey,
      model: this.options.model,
      url: t.url,
      callId: t.callId,
      initialSessionConfig: await L(this, te, gn).call(this, this.options.config)
    }), k(this, ae, []), this.emit("history_updated", u(this, ae));
  }
  /**
   * Update the history of the session.
   * @param newHistory - The new history to set.
   */
  updateHistory(t) {
    let r;
    typeof t == "function" ? r = t(u(this, ae)) : r = t, u(this, G).resetHistory(u(this, ae), r);
  }
  /**
   * Send a message to the session.
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r = {}) {
    u(this, G).sendMessage(t, r);
  }
  /**
   * Add image to the session
   * @param image - The image to add.
   */
  addImage(t, { triggerResponse: r = !0 } = {}) {
    u(this, G).addImage(t, { triggerResponse: r });
  }
  /**
   * Mute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    u(this, G).mute(t);
  }
  /**
   * Disconnect from the session.
   */
  close() {
    k(this, rn, {}), u(this, G).close();
  }
  /**
   * Send audio to the session.
   * @param audio - The audio to send.
   * @param options - Additional options.
   * @param options.commit - Whether to finish the turn with this audio.
   */
  sendAudio(t, r = {}) {
    u(this, G).sendAudio(t, r);
  }
  /**
   * Interrupt the session artificially for example if you want to build a "stop talking"
   * button.
   */
  interrupt() {
    u(this, G).interrupt();
  }
  /**
   * Approve a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to approve.
   * @param options - Additional options.
   * @param options.alwaysApprove - Whether to always approve the tool call.
   */
  async approve(t, r = { alwaysApprove: !1 }) {
    u(this, Z).approveTool(t, r);
    const s = t.toolName ?? t.rawItem.name, a = u(this, U).tools.find((o) => o.name === s);
    if (a && a.type === "function" && t.rawItem.type === "function_call")
      await L(this, te, nr).call(this, t.rawItem, a);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysApprove && Te.warn("Always approving MCP tools is not supported. Use the allowed tools configuration instead.");
      const o = Za(t);
      u(this, G).sendMcpResponse(o, !0);
    } else
      throw new we(`Tool ${s ?? "unknown"} not found`);
  }
  /**
   * Reject a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to reject.
   * @param options - Additional options.
   * @param options.alwaysReject - Whether to always reject the tool call.
   */
  async reject(t, r = { alwaysReject: !1 }) {
    u(this, Z).rejectTool(t, r);
    const s = t.toolName ?? t.rawItem.name, a = u(this, U).tools.find((o) => o.name === s);
    if (a && a.type === "function" && t.rawItem.type === "function_call")
      await L(this, te, nr).call(this, t.rawItem, a);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysReject && Te.warn("Always rejecting MCP tools is not supported. Use the allowed tools configuration instead.");
      const o = Za(t);
      u(this, G).sendMcpResponse(o, !1);
    } else
      throw new we(`Tool ${s ?? "unknown"} not found`);
  }
};
G = new WeakMap(), U = new WeakMap(), Qt = new WeakMap(), Z = new WeakMap(), en = new WeakMap(), tn = new WeakMap(), zn = new WeakMap(), ae = new WeakMap(), nn = new WeakMap(), rn = new WeakMap(), De = new WeakMap(), Gn = new WeakMap(), Et = new WeakMap(), Vn = new WeakMap(), Wn = new WeakMap(), te = new WeakSet(), mn = async function(t) {
  k(this, U, t);
  const r = await u(this, U).getEnabledHandoffs(u(this, Z)), s = r.map((c) => c.getHandoffAsFunctionTool()), a = (await u(this, U).getAllTools(u(this, Z))).filter(Gp).map(Vp), o = typeof u(this, U).tools < "u" || typeof u(this, U).mcpServers < "u", i = r.length > 0;
  k(this, Qt, o || i ? [...a, ...s] : void 0), L(this, te, hs).call(this);
}, gn = async function(t = {}) {
  const r = t ?? {}, s = this.options.config ?? {}, a = await u(this, U).getSystemPrompt(u(this, Z)), o = (g) => {
    var S;
    const y = g.audio;
    return (S = y == null ? void 0 : y.output) == null ? void 0 : S.voice;
  }, i = this.options.tracingDisabled ? null : this.options.workflowName ? {
    workflow_name: this.options.workflowName
  } : "auto";
  i !== null && i !== "auto" ? (this.options.groupId && (i.group_id = this.options.groupId), this.options.traceMetadata && (i.metadata = this.options.traceMetadata)) : (this.options.groupId || this.options.traceMetadata) && Te.warn("In order to set traceMetadata or a groupId you need to specify a workflowName.");
  const c = o(r) ?? o(s), d = r.voice ?? s.voice, f = typeof c < "u" ? c : typeof d < "u" ? d : u(this, U).voice, h = {
    ...{
      ...u(this, Vn) ?? {},
      ...s,
      ...r
    },
    instructions: a,
    voice: f,
    model: this.options.model,
    tools: u(this, Qt),
    tracing: i,
    prompt: typeof u(this, U).prompt == "function" ? await u(this, U).prompt(u(this, Z), u(this, U)) : u(this, U).prompt
  };
  return k(this, Vn, h), h;
}, co = async function(t, r) {
  const s = await r.onInvokeHandoff(u(this, Z), t.arguments);
  u(this, U).emit("agent_handoff", u(this, Z), s), this.emit("agent_handoff", u(this, Z), u(this, U), s), await L(this, te, mn).call(this, s), await u(this, G).updateSessionConfig(await L(this, te, gn).call(this));
  const a = yi(s);
  return u(this, G).sendFunctionCallOutput(t, a, !0), s;
}, nr = async function(t, r) {
  u(this, Z).context.history = JSON.parse(JSON.stringify(u(this, ae)));
  let s = t.arguments;
  if (r.parameters && (jt(r.parameters) ? s = r.parameters.parse(s) : s = JSON.parse(s)), await r.needsApproval(u(this, Z), s, t.callId)) {
    const c = this.context.isToolApproved({
      toolName: r.name,
      callId: t.callId
    });
    if (c === !1) {
      this.emit("agent_tool_start", u(this, Z), u(this, U), r, {
        toolCall: t
      }), u(this, U).emit("agent_tool_start", u(this, Z), r, {
        toolCall: t
      });
      const d = "Tool execution was not approved.";
      u(this, G).sendFunctionCallOutput(t, d, !0), this.emit("agent_tool_end", u(this, Z), u(this, U), r, d, { toolCall: t }), u(this, U).emit("agent_tool_end", u(this, Z), r, d, {
        toolCall: t
      });
      return;
    } else if (typeof c > "u") {
      this.emit("tool_approval_requested", u(this, Z), u(this, U), {
        type: "function_approval",
        tool: r,
        approvalItem: new ye(t, u(this, U))
      });
      return;
    }
  }
  this.emit("agent_tool_start", u(this, Z), u(this, U), r, {
    toolCall: t
  }), u(this, U).emit("agent_tool_start", u(this, Z), r, {
    toolCall: t
  }), u(this, Z).context.history = JSON.parse(JSON.stringify(u(this, ae)));
  const o = await r.invoke(u(this, Z), t.arguments, {
    toolCall: t
  });
  let i;
  zp(o) ? (i = ft(o.content), u(this, G).sendFunctionCallOutput(t, i, !1)) : (i = ft(o), u(this, G).sendFunctionCallOutput(t, i, !0)), this.emit("agent_tool_end", u(this, Z), u(this, U), r, i, { toolCall: t }), u(this, U).emit("agent_tool_end", u(this, Z), r, i, { toolCall: t });
}, lo = async function(t) {
  const r = await u(this, U).getEnabledHandoffs(u(this, Z)), s = new Map(r.map((c) => [c.toolName, c])), a = await u(this, U).getAllTools(u(this, Z)), o = new Map(a.map((c) => [c.name, c])), i = s.get(t.name);
  if (i)
    await L(this, te, co).call(this, t, i);
  else {
    const c = o.get(t.name);
    if (c && c.type === "function")
      await L(this, te, nr).call(this, t, c);
    else
      throw new we(`Tool ${t.name} not found`);
  }
}, fs = async function(t, r, s) {
  if (u(this, en).length === 0)
    return;
  const a = {
    agent: u(this, U),
    agentOutput: t,
    context: u(this, Z)
  }, i = (await Promise.all(u(this, en).map((c) => c.run(a)))).find((c) => c.output.tripwireTriggered);
  if (i) {
    if (u(this, rn)[r])
      return;
    u(this, rn)[r] = !0;
    const c = new Kr(`Output guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`, i);
    this.emit("guardrail_tripped", u(this, Z), u(this, U), c, {
      itemId: s
    }), this.interrupt();
    const d = Ld(i);
    this.sendMessage(d);
    return;
  }
}, po = function() {
  u(this, G).on("*", (s) => {
    if (this.emit("transport_event", s), s.type === "conversation.item.input_audio_transcription.completed")
      try {
        const a = s;
        k(this, ae, Ua(u(this, ae), a, u(this, nn))), u(this, Z).context.history = u(this, ae), this.emit("history_updated", u(this, ae));
      } catch (a) {
        this.emit("error", {
          type: "error",
          error: a
        });
      }
  }), u(this, G).on("mcp_tools_listed", ({ serverLabel: s, tools: a }) => {
    try {
      u(this, Gn).set(s, a ?? []), L(this, te, hs).call(this);
    } catch (o) {
      this.emit("error", { type: "error", error: o });
    }
  }), u(this, G).on("audio", (s) => {
    u(this, De) || (k(this, De, !0), this.emit("audio_start", u(this, Z), u(this, U))), this.emit("audio", s);
  }), u(this, G).on("turn_started", () => {
    k(this, De, !1), this.emit("agent_start", u(this, Z), u(this, U)), u(this, U).emit("agent_start", u(this, Z), u(this, U));
  }), u(this, G).on("turn_done", (s) => {
    const a = s.response.output[s.response.output.length - 1], o = no(a) ?? "", i = (a == null ? void 0 : a.id) ?? "";
    this.emit("agent_end", u(this, Z), u(this, U), o), u(this, U).emit("agent_end", u(this, Z), o), L(this, te, fs).call(this, o, s.response.id, i);
  }), u(this, G).on("audio_done", () => {
    u(this, De) && k(this, De, !1), this.emit("audio_stopped", u(this, Z), u(this, U));
  });
  let t = 0, r;
  u(this, G).on("audio_transcript_delta", (s) => {
    try {
      const a = s.delta, o = s.itemId, i = s.responseId;
      r !== o && (r = o, t = 0);
      const d = (u(this, zn)[o] ?? "") + a;
      if (u(this, zn)[o] = d, u(this, tn).debounceTextLength < 0)
        return;
      const f = Math.floor(d.length / u(this, tn).debounceTextLength);
      f > t && (t = f, L(this, te, fs).call(this, d, i, o));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, G).on("item_update", (s) => {
    try {
      const a = !u(this, ae).some((o) => o.itemId === s.itemId);
      if (k(this, ae, Ua(u(this, ae), s, u(this, nn))), u(this, Z).context.history = u(this, ae), a) {
        const o = u(this, ae).find((i) => i.itemId === s.itemId);
        o && this.emit("history_added", o);
      }
      this.emit("history_updated", u(this, ae));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, G).on("item_deleted", (s) => {
    try {
      k(this, ae, u(this, ae).filter((a) => a.itemId !== s.itemId)), u(this, Z).context.history = u(this, ae), this.emit("history_updated", u(this, ae));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, G).on("function_call", async (s) => {
    try {
      await L(this, te, lo).call(this, s);
    } catch (a) {
      Te.error("Error handling function call", a), this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, G).on("usage_update", (s) => {
    u(this, Z).usage.add(s);
  }), u(this, G).on("audio_interrupted", () => {
    u(this, De) && k(this, De, !1), this.emit("audio_interrupted", u(this, Z), u(this, U));
  }), u(this, G).on("error", (s) => {
    this.emit("error", s);
  }), u(this, G).on("mcp_tool_call_completed", (s) => {
    this.emit("mcp_tool_call_completed", u(this, Z), u(this, U), s), u(this, Wn) && u(this, G).sendEvent({
      type: "response.create"
    });
  }), u(this, G).on("mcp_approval_request", (s) => {
    this.emit("tool_approval_requested", u(this, Z), u(this, U), {
      type: "mcp_approval_request",
      approvalItem: jd(u(this, U), s)
    });
  });
}, /**
 * Recomputes the currently available MCP tools based on the current agent's active
 * MCP server configurations and the cached per-server tool listings. Emits
 * `mcp_tools_changed` if the set changed.
 */
hs = function() {
  var c;
  const t = (c = u(this, Qt)) == null ? void 0 : c.filter((d) => d.type === "mcp"), r = (d) => {
    const f = d.allowed_tools;
    if (f) {
      if (Array.isArray(f))
        return f;
      if (f && Array.isArray(f.tool_names))
        return f.tool_names;
    }
  }, s = /* @__PURE__ */ new Map();
  for (const d of t) {
    const f = u(this, Gn).get(d.server_label) ?? [], l = r(d);
    for (const h of f)
      l && !l.includes(h.name) || s.has(h.name) || s.set(h.name, h);
  }
  const a = Array.from(s.values()), o = u(this, Et);
  (o.length !== a.length || JSON.stringify(o.map((d) => d.name).sort()) !== JSON.stringify(a.map((d) => d.name).sort())) && (k(this, Et, a), this.emit("mcp_tools_changed", u(this, Et)));
};
let ps = js;
class fo extends io {
  constructor(e = {}) {
    super(e);
  }
  /**
   * Build the initial session payload for a SIP-attached session, matching the config that a RealtimeSession would send on connect.
   *
   * This enables SIP deployments to accept an incoming call with a payload that already reflects
   * the active agent's instructions, tools, prompt, and tracing metadata without duplicating the
   * session logic outside of the SDK. The returned object structurally matches the REST
   * `CallAcceptParams` interface, so it can be forwarded directly to
   * `openai.realtime.calls.accept(...)`.
   *
   * @param agent - The starting agent used to seed the session instructions, tools, and prompt.
   * @param options - Optional session options that mirror the ones passed to the RealtimeSession constructor.
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  static async buildInitialConfig(e, t = {}, r = {}) {
    const s = await ps.computeInitialSessionConfig(e, t, r);
    return new fo().buildSessionPayload(s);
  }
  sendAudio(e, t = {}) {
    throw new Error("OpenAIRealtimeSIP does not support sending audio buffers; audio is handled by the SIP call.");
  }
  async connect(e) {
    if (!e.callId)
      throw new ne("OpenAIRealtimeSIP requires `callId` in the connect options.");
    await super.connect(e);
  }
}
const Qp = {
  base64ToArrayBuffer: eo,
  arrayBufferToBase64: to,
  getLastTextFromAudioOutputMessage: no
};
export {
  qp as DEFAULT_OPENAI_REALTIME_MODEL,
  Re as DEFAULT_OPENAI_REALTIME_SESSION_CONFIG,
  we as ModelBehaviorError,
  _r as OpenAIRealtimeBase,
  fo as OpenAIRealtimeSIP,
  Jp as OpenAIRealtimeWebRTC,
  io as OpenAIRealtimeWebSocket,
  Kr as OutputGuardrailTripwireTriggered,
  Yp as RealtimeAgent,
  ps as RealtimeSession,
  ne as UserError,
  Xp as backgroundResult,
  zp as isBackgroundResult,
  Xr as tool,
  Qp as utils
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy5tanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcmVnaXN0cmllcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3BhcnNlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS91dGlsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvUmVmcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL2Vycm9yTWVzc2FnZXMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL1pvZEVycm9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9sb2NhbGVzL2VuLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvcGFyc2VVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL2Vycm9yVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjMvdHlwZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hcnJheS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9icmFuZGVkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGVmYXVsdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZWZmZWN0cy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvaW50ZXJzZWN0aW9uLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zdHJpbmcubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbWFwLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmVFbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGxhYmxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL29iamVjdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb3B0aW9uYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3BpcGVsaW5lLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3R1cGxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmRlZmluZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Vua25vd24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlYWRvbmx5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2VEZWYubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvUmVzcG9uc2VzUGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3RyYW5zZm9ybS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2hlbHBlcnMvem9kLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXJyb3JzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvem9kQ29tcGF0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdHlwZUd1YXJkcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3pvZEpzb25TY2hlbWFDb21wYXQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbWNwLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3Qvc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2xpZmVjeWNsZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2RlZmF1bHRNb2RlbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2hhbmRvZmYubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9tZXNzYWdlcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZ3VhcmRyYWlsLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9iYXNlNjQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ldmVudHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5JbXBsZW1lbnRhdGlvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1blN0YXRlLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcmVzdWx0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jb250ZXh0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9wcm9jZXNzb3IubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9zcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdHJhY2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9wcm92aWRlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvaW5kZXgubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pbmRleC5tanMiLCIuLi91dGlscy5tanMiLCIuLi9yZWFsdGltZUFnZW50Lm1qcyIsIi4uL2d1YXJkcmFpbC5tanMiLCIuLi9jbGllbnRNZXNzYWdlcy5tanMiLCIuLi9pdGVtcy5tanMiLCIuLi9sb2dnZXIubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qcyIsIi4uL3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzIiwiLi4vdG9vbC5tanMiLCIuLi9yZWFsdGltZVNlc3Npb24ubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVTaXAubWpzIiwiLi4vaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZFxuZXhwb3J0IGNvbnN0IE1FVEFEQVRBID0ge1xuICAgIFwibmFtZVwiOiBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCIsXG4gICAgXCJ2ZXJzaW9uXCI6IFwiMC4zLjNcIixcbiAgICBcInZlcnNpb25zXCI6IHtcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiOiBcIjAuMy4zXCIsXG4gICAgICAgIFwiQG9wZW5haS9hZ2VudHMtY29yZVwiOiBcIndvcmtzcGFjZToqXCJcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgTUVUQURBVEE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhZGF0YS5tanMubWFwIiwiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhZmVFeGVjdXRlKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIFtudWxsLCBhd2FpdCBmbigpXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBbZXJyb3IsIG51bGxdO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhZmVFeGVjdXRlLm1qcy5tYXAiLCIvLyBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRFcXVhbCh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE5vdEVxdWFsKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoXykgeyB9XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW51bVZhbHVlcyhlbnRyaWVzKSB7XG4gICAgY29uc3QgbnVtZXJpY1ZhbHVlcyA9IE9iamVjdC52YWx1ZXMoZW50cmllcykuZmlsdGVyKCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIik7XG4gICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmVudHJpZXMoZW50cmllcylcbiAgICAgICAgLmZpbHRlcigoW2ssIF9dKSA9PiBudW1lcmljVmFsdWVzLmluZGV4T2YoK2spID09PSAtMSlcbiAgICAgICAgLm1hcCgoW18sIHZdKSA9PiB2KTtcbiAgICByZXR1cm4gdmFsdWVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwifFwiKSB7XG4gICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiBzdHJpbmdpZnlQcmltaXRpdmUodmFsKSkuam9pbihzZXBhcmF0b3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGpzb25TdHJpbmdpZnlSZXBsYWNlcihfLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjYWNoZWQoZ2V0dGVyKSB7XG4gICAgY29uc3Qgc2V0ID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICAgICAgaWYgKCFzZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldHRlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHsgdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FjaGVkIHZhbHVlIGFscmVhZHkgc2V0XCIpO1xuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbnVsbGlzaChpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuUmVnZXgoc291cmNlKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBzb3VyY2Uuc3RhcnRzV2l0aChcIl5cIikgPyAxIDogMDtcbiAgICBjb25zdCBlbmQgPSBzb3VyY2UuZW5kc1dpdGgoXCIkXCIpID8gc291cmNlLmxlbmd0aCAtIDEgOiBzb3VyY2UubGVuZ3RoO1xuICAgIHJldHVybiBzb3VyY2Uuc2xpY2Uoc3RhcnQsIGVuZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gTnVtYmVyLnBhcnNlSW50KHN0ZXAudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIHJldHVybiAodmFsSW50ICUgc3RlcEludCkgLyAxMCAqKiBkZWNDb3VudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVMYXp5KG9iamVjdCwga2V5LCBnZXR0ZXIpIHtcbiAgICBjb25zdCBzZXQgPSBmYWxzZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgaWYgKCFzZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldHRlcigpO1xuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FjaGVkIHZhbHVlIGFscmVhZHkgc2V0XCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodikge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHYsXG4gICAgICAgICAgICAgICAgLy8gY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBvYmplY3Rba2V5XSA9IHY7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25Qcm9wKHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wLCB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRBdFBhdGgob2JqLCBwYXRoKSB7XG4gICAgaWYgKCFwYXRoKVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIHJldHVybiBwYXRoLnJlZHVjZSgoYWNjLCBrZXkpID0+IGFjYz8uW2tleV0sIG9iaik7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJvbWlzZUFsbE9iamVjdChwcm9taXNlc09iaikge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9taXNlc09iaik7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBrZXlzLm1hcCgoa2V5KSA9PiBwcm9taXNlc09ialtrZXldKTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRPYmogPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXNvbHZlZE9ialtrZXlzW2ldXSA9IHJlc3VsdHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmVkT2JqO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbVN0cmluZyhsZW5ndGggPSAxMCkge1xuICAgIGNvbnN0IGNoYXJzID0gXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiO1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RyICs9IGNoYXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCldO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVzYyhzdHIpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RyKTtcbn1cbmV4cG9ydCBjb25zdCBjYXB0dXJlU3RhY2tUcmFjZSA9IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlXG4gICAgPyBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZVxuICAgIDogKC4uLl9hcmdzKSA9PiB7IH07XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoZGF0YSkge1xuICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpO1xufVxuZXhwb3J0IGNvbnN0IGFsbG93c0V2YWwgPSBjYWNoZWQoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvcj8udXNlckFnZW50Py5pbmNsdWRlcyhcIkNsb3VkZmxhcmVcIikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBGID0gRnVuY3Rpb247XG4gICAgICAgIG5ldyBGKFwiXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qobykge1xuICAgIGlmIChpc09iamVjdChvKSA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBtb2RpZmllZCBjb25zdHJ1Y3RvclxuICAgIGNvbnN0IGN0b3IgPSBvLmNvbnN0cnVjdG9yO1xuICAgIGlmIChjdG9yID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIG1vZGlmaWVkIHByb3RvdHlwZVxuICAgIGNvbnN0IHByb3QgPSBjdG9yLnByb3RvdHlwZTtcbiAgICBpZiAoaXNPYmplY3QocHJvdCkgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gY3RvciBkb2Vzbid0IGhhdmUgc3RhdGljIGBpc1Byb3RvdHlwZU9mYFxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvdCwgXCJpc1Byb3RvdHlwZU9mXCIpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bUtleXMoZGF0YSkge1xuICAgIGxldCBrZXlDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgIGtleUNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleUNvdW50O1xufVxuZXhwb3J0IGNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gXCJuYW5cIiA6IFwibnVtYmVyXCI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYmlnaW50XCI7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN5bWJvbFwiO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInByb21pc2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtYXBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzZXRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImRhdGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRmlsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdFwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRhdGEgdHlwZTogJHt0fWApO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgcHJvcGVydHlLZXlUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwic3ltYm9sXCJdKTtcbmV4cG9ydCBjb25zdCBwcmltaXRpdmVUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYmlnaW50XCIsIFwiYm9vbGVhblwiLCBcInN5bWJvbFwiLCBcInVuZGVmaW5lZFwiXSk7XG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG59XG4vLyB6b2Qtc3BlY2lmaWMgdXRpbHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShpbnN0LCBkZWYsIHBhcmFtcykge1xuICAgIGNvbnN0IGNsID0gbmV3IGluc3QuX3pvZC5jb25zdHIoZGVmID8/IGluc3QuX3pvZC5kZWYpO1xuICAgIGlmICghZGVmIHx8IHBhcmFtcz8ucGFyZW50KVxuICAgICAgICBjbC5fem9kLnBhcmVudCA9IGluc3Q7XG4gICAgcmV0dXJuIGNsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKSB7XG4gICAgY29uc3QgcGFyYW1zID0gX3BhcmFtcztcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4geyBlcnJvcjogKCkgPT4gcGFyYW1zIH07XG4gICAgaWYgKHBhcmFtcz8ubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChwYXJhbXM/LmVycm9yICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc3BlY2lmeSBib3RoIGBtZXNzYWdlYCBhbmQgYGVycm9yYCBwYXJhbXNcIik7XG4gICAgICAgIHBhcmFtcy5lcnJvciA9IHBhcmFtcy5tZXNzYWdlO1xuICAgIH1cbiAgICBkZWxldGUgcGFyYW1zLm1lc3NhZ2U7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMuZXJyb3IgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IC4uLnBhcmFtcywgZXJyb3I6ICgpID0+IHBhcmFtcy5lcnJvciB9O1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNwYXJlbnRQcm94eShnZXR0ZXIpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0KF8sIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHByb3AsIHZhbHVlLCByZWNlaXZlcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBoYXMoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBvd25LZXlzKF8pIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmaW5lUHJvcGVydHkoXywgcHJvcCwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIGRlc2NyaXB0b3IpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeVByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpICsgXCJuXCI7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9wdGlvbmFsS2V5cyhzaGFwZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzaGFwZSkuZmlsdGVyKChrKSA9PiB7XG4gICAgICAgIHJldHVybiBzaGFwZVtrXS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIgJiYgc2hhcGVba10uX3pvZC5vcHRvdXQgPT09IFwib3B0aW9uYWxcIjtcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBOVU1CRVJfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBzYWZlaW50OiBbTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXSxcbiAgICBpbnQzMjogWy0yMTQ3NDgzNjQ4LCAyMTQ3NDgzNjQ3XSxcbiAgICB1aW50MzI6IFswLCA0Mjk0OTY3Mjk1XSxcbiAgICBmbG9hdDMyOiBbLTMuNDAyODIzNDY2Mzg1Mjg4NmUzOCwgMy40MDI4MjM0NjYzODUyODg2ZTM4XSxcbiAgICBmbG9hdDY0OiBbLU51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUVdLFxufTtcbmV4cG9ydCBjb25zdCBCSUdJTlRfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludChcIi05MjIzMzcyMDM2ODU0Nzc1ODA4XCIpLCAvKiBAX19QVVJFX18qLyBCaWdJbnQoXCI5MjIzMzcyMDM2ODU0Nzc1ODA3XCIpXSxcbiAgICB1aW50NjQ6IFsvKiBAX19QVVJFX18qLyBCaWdJbnQoMCksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjE4NDQ2NzQ0MDczNzA5NTUxNjE1XCIpXSxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGljayhzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgIGNvbnN0IGN1cnJEZWYgPSBzY2hlbWEuX3pvZC5kZWY7IC8vLnNoYXBlO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGN1cnJEZWYuc2hhcGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAvLyBwaWNrIGtleVxuICAgICAgICBuZXdTaGFwZVtrZXldID0gY3VyckRlZi5zaGFwZVtrZXldO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGU6IG5ld1NoYXBlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9taXQoc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgbmV3U2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSB9O1xuICAgIGNvbnN0IGN1cnJEZWYgPSBzY2hlbWEuX3pvZC5kZWY7IC8vLnNoYXBlO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGN1cnJEZWYuc2hhcGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBkZWxldGUgbmV3U2hhcGVba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIHNoYXBlOiBuZXdTaGFwZSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoc2NoZW1hLCBzaGFwZSkge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChzaGFwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCB0byBleHRlbmQ6IGV4cGVjdGVkIGEgcGxhaW4gb2JqZWN0XCIpO1xuICAgIH1cbiAgICBjb25zdCBkZWYgPSB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgY29uc3QgX3NoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUsIC4uLnNoYXBlIH07XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgX3NoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gX3NoYXBlO1xuICAgICAgICB9LFxuICAgICAgICBjaGVja3M6IFtdLCAvLyBkZWxldGUgZXhpc3RpbmcgY2hlY2tzXG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKGEsIGIpIHtcbiAgICByZXR1cm4gY2xvbmUoYSwge1xuICAgICAgICAuLi5hLl96b2QuZGVmLFxuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLmEuX3pvZC5kZWYuc2hhcGUsIC4uLmIuX3pvZC5kZWYuc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGNoYWxsOiBiLl96b2QuZGVmLmNhdGNoYWxsLFxuICAgICAgICBjaGVja3M6IFtdLCAvLyBkZWxldGUgZXhpc3RpbmcgY2hlY2tzXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFydGlhbChDbGFzcywgc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3Qgb2xkU2hhcGUgPSBzY2hlbWEuX3pvZC5kZWYuc2hhcGU7XG4gICAgY29uc3Qgc2hhcGUgPSB7IC4uLm9sZFNoYXBlIH07XG4gICAgaWYgKG1hc2spIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9sZFNoYXBlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAvLyBpZiAob2xkU2hhcGVba2V5XSEuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSBjb250aW51ZTtcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBDbGFzc1xuICAgICAgICAgICAgICAgID8gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IG9sZFNoYXBlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFNoYXBlKSB7XG4gICAgICAgICAgICAvLyBpZiAob2xkU2hhcGVba2V5XSEuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSBjb250aW51ZTtcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBDbGFzc1xuICAgICAgICAgICAgICAgID8gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IG9sZFNoYXBlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVkKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICBjb25zdCBzaGFwZSA9IHsgLi4ub2xkU2hhcGUgfTtcbiAgICBpZiAobWFzaykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gc2hhcGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSB3aXRoIG5vbi1vcHRpb25hbFxuICAgICAgICAgICAgc2hhcGVba2V5XSA9IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJub25vcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTaGFwZSkge1xuICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICBzaGFwZVtrZXldID0gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICAvLyBvcHRpb25hbDogW10sXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYWJvcnRlZCh4LCBzdGFydEluZGV4ID0gMCkge1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgeC5pc3N1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHguaXNzdWVzW2ldPy5jb250aW51ZSAhPT0gdHJ1ZSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJlZml4SXNzdWVzKHBhdGgsIGlzc3Vlcykge1xuICAgIHJldHVybiBpc3N1ZXMubWFwKChpc3MpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSBpc3MpLnBhdGggPz8gKF9hLnBhdGggPSBbXSk7XG4gICAgICAgIGlzcy5wYXRoLnVuc2hpZnQocGF0aCk7XG4gICAgICAgIHJldHVybiBpc3M7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW53cmFwTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29uZmlnKSB7XG4gICAgY29uc3QgZnVsbCA9IHsgLi4uaXNzLCBwYXRoOiBpc3MucGF0aCA/PyBbXSB9O1xuICAgIC8vIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgIGlmICghaXNzLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHVud3JhcE1lc3NhZ2UoaXNzLmluc3Q/Ll96b2QuZGVmPy5lcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGN0eD8uZXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjb25maWcuY3VzdG9tRXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjb25maWcubG9jYWxlRXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgIGZ1bGwubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIC8vIGRlbGV0ZSAoZnVsbCBhcyBhbnkpLmRlZjtcbiAgICBkZWxldGUgZnVsbC5pbnN0O1xuICAgIGRlbGV0ZSBmdWxsLmNvbnRpbnVlO1xuICAgIGlmICghY3R4Py5yZXBvcnRJbnB1dCkge1xuICAgICAgICBkZWxldGUgZnVsbC5pbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6YWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFNldClcbiAgICAgICAgcmV0dXJuIFwic2V0XCI7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgTWFwKVxuICAgICAgICByZXR1cm4gXCJtYXBcIjtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBGaWxlKVxuICAgICAgICByZXR1cm4gXCJmaWxlXCI7XG4gICAgcmV0dXJuIFwidW5rbm93blwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpXG4gICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgcmV0dXJuIFwidW5rbm93blwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzc3VlKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBbaXNzLCBpbnB1dCwgaW5zdF0gPSBhcmdzO1xuICAgIGlmICh0eXBlb2YgaXNzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXNzYWdlOiBpc3MsXG4gICAgICAgICAgICBjb2RlOiBcImN1c3RvbVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5pc3MgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkVudW0ob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iailcbiAgICAgICAgLmZpbHRlcigoW2ssIF9dKSA9PiB7XG4gICAgICAgIC8vIHJldHVybiB0cnVlIGlmIE5hTiwgbWVhbmluZyBpdCdzIG5vdCBhIG51bWJlciwgdGh1cyBhIHN0cmluZyBrZXlcbiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihOdW1iZXIucGFyc2VJbnQoaywgMTApKTtcbiAgICB9KVxuICAgICAgICAubWFwKChlbCkgPT4gZWxbMV0pO1xufVxuLy8gaW5zdGFuY2VvZlxuZXhwb3J0IGNsYXNzIENsYXNzIHtcbiAgICBjb25zdHJ1Y3RvciguLi5fYXJncykgeyB9XG59XG4iLCJleHBvcnQgY29uc3QgJG91dHB1dCA9IFN5bWJvbChcIlpvZE91dHB1dFwiKTtcbmV4cG9ydCBjb25zdCAkaW5wdXQgPSBTeW1ib2woXCJab2RJbnB1dFwiKTtcbmV4cG9ydCBjbGFzcyAkWm9kUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2lkbWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBhZGQoc2NoZW1hLCAuLi5fbWV0YSkge1xuICAgICAgICBjb25zdCBtZXRhID0gX21ldGFbMF07XG4gICAgICAgIHRoaXMuX21hcC5zZXQoc2NoZW1hLCBtZXRhKTtcbiAgICAgICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIG1ldGEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pZG1hcC5oYXMobWV0YS5pZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYElEICR7bWV0YS5pZH0gYWxyZWFkeSBleGlzdHMgaW4gdGhlIHJlZ2lzdHJ5YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9pZG1hcC5zZXQobWV0YS5pZCwgc2NoZW1hKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5faWRtYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZW1vdmUoc2NoZW1hKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09PSBcIm9iamVjdFwiICYmIFwiaWRcIiBpbiBtZXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9pZG1hcC5kZWxldGUobWV0YS5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWFwLmRlbGV0ZShzY2hlbWEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0KHNjaGVtYSkge1xuICAgICAgICAvLyByZXR1cm4gdGhpcy5fbWFwLmdldChzY2hlbWEpIGFzIGFueTtcbiAgICAgICAgLy8gaW5oZXJpdCBtZXRhZGF0YVxuICAgICAgICBjb25zdCBwID0gc2NoZW1hLl96b2QucGFyZW50O1xuICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgY29uc3QgcG0gPSB7IC4uLih0aGlzLmdldChwKSA/PyB7fSkgfTtcbiAgICAgICAgICAgIGRlbGV0ZSBwbS5pZDsgLy8gZG8gbm90IGluaGVyaXQgaWRcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnBtLCAuLi50aGlzLl9tYXAuZ2V0KHNjaGVtYSkgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmdldChzY2hlbWEpO1xuICAgIH1cbiAgICBoYXMoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuaGFzKHNjaGVtYSk7XG4gICAgfVxufVxuLy8gcmVnaXN0cmllc1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdHJ5KCkge1xuICAgIHJldHVybiBuZXcgJFpvZFJlZ2lzdHJ5KCk7XG59XG5leHBvcnQgY29uc3QgZ2xvYmFsUmVnaXN0cnkgPSAvKkBfX1BVUkVfXyovIHJlZ2lzdHJ5KCk7XG4iLCJpbXBvcnQgeyAkWm9kUmVnaXN0cnksIGdsb2JhbFJlZ2lzdHJ5IH0gZnJvbSBcIi4vcmVnaXN0cmllcy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW51bVZhbHVlcyB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmV4cG9ydCBjbGFzcyBKU09OU2NoZW1hR2VuZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5ID0gcGFyYW1zPy5tZXRhZGF0YSA/PyBnbG9iYWxSZWdpc3RyeTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBwYXJhbXM/LnRhcmdldCA/PyBcImRyYWZ0LTIwMjAtMTJcIjtcbiAgICAgICAgdGhpcy51bnJlcHJlc2VudGFibGUgPSBwYXJhbXM/LnVucmVwcmVzZW50YWJsZSA/PyBcInRocm93XCI7XG4gICAgICAgIHRoaXMub3ZlcnJpZGUgPSBwYXJhbXM/Lm92ZXJyaWRlID8/ICgoKSA9PiB7IH0pO1xuICAgICAgICB0aGlzLmlvID0gcGFyYW1zPy5pbyA/PyBcIm91dHB1dFwiO1xuICAgICAgICB0aGlzLnNlZW4gPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHByb2Nlc3Moc2NoZW1hLCBfcGFyYW1zID0geyBwYXRoOiBbXSwgc2NoZW1hUGF0aDogW10gfSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICAgICAgY29uc3QgZm9ybWF0TWFwID0ge1xuICAgICAgICAgICAgZ3VpZDogXCJ1dWlkXCIsXG4gICAgICAgICAgICB1cmw6IFwidXJpXCIsXG4gICAgICAgICAgICBkYXRldGltZTogXCJkYXRlLXRpbWVcIixcbiAgICAgICAgICAgIGpzb25fc3RyaW5nOiBcImpzb24tc3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogXCJcIiwgLy8gZG8gbm90IHNldFxuICAgICAgICB9O1xuICAgICAgICAvLyBjaGVjayBmb3Igc2NoZW1hIGluIHNlZW5zXG4gICAgICAgIGNvbnN0IHNlZW4gPSB0aGlzLnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmIChzZWVuKSB7XG4gICAgICAgICAgICBzZWVuLmNvdW50Kys7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiBjeWNsZVxuICAgICAgICAgICAgY29uc3QgaXNDeWNsZSA9IF9wYXJhbXMuc2NoZW1hUGF0aC5pbmNsdWRlcyhzY2hlbWEpO1xuICAgICAgICAgICAgaWYgKGlzQ3ljbGUpIHtcbiAgICAgICAgICAgICAgICBzZWVuLmN5Y2xlID0gX3BhcmFtcy5wYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlZW4uc2NoZW1hO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluaXRpYWxpemVcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBzY2hlbWE6IHt9LCBjb3VudDogMSwgY3ljbGU6IHVuZGVmaW5lZCwgcGF0aDogX3BhcmFtcy5wYXRoIH07XG4gICAgICAgIHRoaXMuc2Vlbi5zZXQoc2NoZW1hLCByZXN1bHQpO1xuICAgICAgICAvLyBjdXN0b20gbWV0aG9kIG92ZXJyaWRlcyBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgIGNvbnN0IG92ZXJyaWRlU2NoZW1hID0gc2NoZW1hLl96b2QudG9KU09OU2NoZW1hPy4oKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlU2NoZW1hKSB7XG4gICAgICAgICAgICByZXN1bHQuc2NoZW1hID0gb3ZlcnJpZGVTY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uX3BhcmFtcyxcbiAgICAgICAgICAgICAgICBzY2hlbWFQYXRoOiBbLi4uX3BhcmFtcy5zY2hlbWFQYXRoLCBzY2hlbWFdLFxuICAgICAgICAgICAgICAgIHBhdGg6IF9wYXJhbXMucGF0aCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBzY2hlbWEuX3pvZC5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gc2NoZW1hIHdhcyBjbG9uZWQgZnJvbSBhbm90aGVyIHNjaGVtYVxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKHBhcmVudCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlZW4uZ2V0KHBhcmVudCkuaXNQYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgX2pzb24gPSByZXN1bHQuc2NoZW1hO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGVmLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBmb3JtYXQsIHBhdHRlcm5zLCBjb250ZW50RW5jb2RpbmcgfSA9IHNjaGVtYS5fem9kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhMZW5ndGggPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VzdG9tIHBhdHRlcm4gb3ZlcnJpZGVzIGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZm9ybWF0ID0gZm9ybWF0TWFwW2Zvcm1hdF0gPz8gZm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmZvcm1hdCA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24uZm9ybWF0OyAvLyBlbXB0eSBmb3JtYXQgaXMgbm90IHZhbGlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudEVuY29kaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uY29udGVudEVuY29kaW5nID0gY29udGVudEVuY29kaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdHRlcm5zICYmIHBhdHRlcm5zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnZXhlcyA9IFsuLi5wYXR0ZXJuc107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2V4ZXMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnBhdHRlcm4gPSByZWdleGVzWzBdLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWdleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNjaGVtYS5hbGxPZiA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlZ2V4ZXMubWFwKChyZWdleCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4odGhpcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiID8geyB0eXBlOiBcInN0cmluZ1wiIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybjogcmVnZXguc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBmb3JtYXQsIG11bHRpcGxlT2YsIGV4Y2x1c2l2ZU1heGltdW0sIGV4Y2x1c2l2ZU1pbmltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSBcInN0cmluZ1wiICYmIGZvcm1hdC5pbmNsdWRlcyhcImludFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImludGVnZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZXhjbHVzaXZlTWluaW11bSA9IGV4Y2x1c2l2ZU1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbmltdW0gPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjbHVzaXZlTWluaW11bSA+PSBtaW5pbXVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24ubWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24uZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5leGNsdXNpdmVNYXhpbXVtID0gZXhjbHVzaXZlTWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWF4aW11bSA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNYXhpbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNsdXNpdmVNYXhpbXVtIDw9IG1heGltdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5tYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5leGNsdXNpdmVNYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXVsdGlwbGVPZiA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm11bHRpcGxlT2YgPSBtdWx0aXBsZU9mO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJib29sZWFuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmlnaW50XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmlnSW50IGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzeW1ib2xcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeW1ib2xzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudWxsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLnR5cGUgPSBcIm51bGxcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhbnlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVua25vd25cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZGVmaW5lZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidm9pZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZvaWQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5ldmVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLm5vdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRhdGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRlIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbkl0ZW1zID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heEl0ZW1zID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiYXJyYXlcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaXRlbXMgPSB0aGlzLnByb2Nlc3MoZGVmLmVsZW1lbnQsIHsgLi4ucGFyYW1zLCBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiaXRlbXNcIl0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwib2JqZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gZGVmLnNoYXBlOyAvLyBwYXJhbXMuc2hhcGVDYWNoZS5nZXQoc2NoZW1hKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzaGFwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydGllc1trZXldID0gdGhpcy5wcm9jZXNzKHNoYXBlW2tleV0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwicHJvcGVydGllc1wiLCBrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVxdWlyZWQga2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsS2V5cyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoc2hhcGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IG9wdGlvbmFsS2V5cyA9IG5ldyBTZXQoZGVmLm9wdGlvbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkS2V5cyA9IG5ldyBTZXQoWy4uLmFsbEtleXNdLmZpbHRlcigoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IGRlZi5zaGFwZVtrZXldLl96b2Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5vcHRpbiA9PT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYub3B0b3V0ID09PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVpcmVkS2V5cy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucmVxdWlyZWQgPSBBcnJheS5mcm9tKHJlcXVpcmVkS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXRjaGFsbFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5jYXRjaGFsbD8uX3pvZC5kZWYudHlwZSA9PT0gXCJuZXZlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RyaWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWRlZi5jYXRjaGFsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ3VsYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJvdXRwdXRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IHRoaXMucHJvY2VzcyhkZWYuY2F0Y2hhbGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5pb25cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hbnlPZiA9IGRlZi5vcHRpb25zLm1hcCgoeCwgaSkgPT4gdGhpcy5wcm9jZXNzKHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFueU9mXCIsIGldLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImludGVyc2VjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gdGhpcy5wcm9jZXNzKGRlZi5sZWZ0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhbGxPZlwiLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMucHJvY2VzcyhkZWYucmlnaHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NpbXBsZUludGVyc2VjdGlvbiA9ICh2YWwpID0+IFwiYWxsT2ZcIiBpbiB2YWwgJiYgT2JqZWN0LmtleXModmFsKS5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxPZiA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4oaXNTaW1wbGVJbnRlcnNlY3Rpb24oYSkgPyBhLmFsbE9mIDogW2FdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4oaXNTaW1wbGVJbnRlcnNlY3Rpb24oYikgPyBiLmFsbE9mIDogW2JdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFsbE9mID0gYWxsT2Y7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVwbGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZml4SXRlbXMgPSBkZWYuaXRlbXMubWFwKCh4LCBpKSA9PiB0aGlzLnByb2Nlc3MoeCwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcmVmaXhJdGVtc1wiLCBpXSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wcmVmaXhJdGVtcyA9IHByZWZpeEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHByZWZpeEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5yZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMucHJvY2VzcyhkZWYucmVzdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaXRlbXMgPSByZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsSXRlbXMgPSByZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZGl0aW9uYWxJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5yZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHRoaXMucHJvY2VzcyhkZWYucmVzdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtIH0gPSBzY2hlbWEuX3pvZC5iYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5taW5JdGVtcyA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhJdGVtcyA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVjb3JkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwib2JqZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByb3BlcnR5TmFtZXMgPSB0aGlzLnByb2Nlc3MoZGVmLmtleVR5cGUsIHsgLi4ucGFyYW1zLCBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwicHJvcGVydHlOYW1lc1wiXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSB0aGlzLnByb2Nlc3MoZGVmLnZhbHVlVHlwZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtYXBcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXAgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNldFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNldCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW51bVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBnZXRFbnVtVmFsdWVzKGRlZi5lbnRyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE51bWJlciBlbnVtcyBjYW4gaGF2ZSBib3RoIHN0cmluZyBhbmQgbnVtYmVyIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlcy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZW51bSA9IHZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsaXRlcmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsIG9mIGRlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxpdGVyYWwgYHVuZGVmaW5lZGAgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGFkZCB0byB2YWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmlnSW50IGxpdGVyYWxzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaChOdW1iZXIodmFsKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaCh2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcgKGFuIHVuZGVmaW5lZCBsaXRlcmFsIHdhcyBzdHJpcHBlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdmFsc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSB2YWwgPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5jb25zdCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdiA9PT0gbnVsbCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVsbFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZW51bSA9IHZhbHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcImJpbmFyeVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbmNvZGluZzogXCJiaW5hcnlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIG1pbWUgfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW5pbXVtICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5taW5MZW5ndGggPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heGltdW0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLm1heExlbmd0aCA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW1lLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLmNvbnRlbnRNZWRpYVR5cGUgPSBtaW1lWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGpzb24sIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hbnlPZiA9IG1pbWUubWFwKChtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtRmlsZSA9IHsgLi4uZmlsZSwgY29udGVudE1lZGlhVHlwZTogbSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1GaWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGpzb24sIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKFwiRmlsZSBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNmb3JtXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNmb3JtcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibnVsbGFibGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLmFueU9mID0gW2lubmVyLCB7IHR5cGU6IFwibnVsbFwiIH1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vbm9wdGlvbmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3VjY2Vzc1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkZWZhdWx0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5kZWZhdWx0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWYuZGVmYXVsdFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHJlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uX3ByZWZhdWx0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWYuZGVmYXVsdFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2F0Y2hcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGNvbmRpdGlvbmFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXRjaFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaFZhbHVlID0gZGVmLmNhdGNoVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEeW5hbWljIGNhdGNoIHZhbHVlcyBhcmUgbm90IHN1cHBvcnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLmRlZmF1bHQgPSBjYXRjaFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5hTiBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGVtcGxhdGVfbGl0ZXJhbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2NoZW1hLl96b2QucGF0dGVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGF0dGVybilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXR0ZXJuIG5vdCBmb3VuZCBpbiB0ZW1wbGF0ZSBsaXRlcmFsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucGF0dGVybiA9IHBhdHRlcm4uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBpcGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJUeXBlID0gdGhpcy5pbyA9PT0gXCJpbnB1dFwiID8gKGRlZi5pbi5fem9kLmRlZi50eXBlID09PSBcInRyYW5zZm9ybVwiID8gZGVmLm91dCA6IGRlZi5pbikgOiBkZWYub3V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBpbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVhZG9ubHlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIHBhc3N0aHJvdWdoIHR5cGVzXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwcm9taXNlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3B0aW9uYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsYXp5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyVHlwZSA9IHNjaGVtYS5fem9kLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzcyhpbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImN1c3RvbVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0eXBlcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWV0YWRhdGFcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMubWV0YWRhdGFSZWdpc3RyeS5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKG1ldGEpXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdC5zY2hlbWEsIG1ldGEpO1xuICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJpbnB1dFwiICYmIGlzVHJhbnNmb3JtaW5nKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIC8vIGV4YW1wbGVzL2RlZmF1bHRzIG9ubHkgYXBwbHkgdG8gb3V0cHV0IHR5cGUgb2YgcGlwZVxuICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zY2hlbWEuZXhhbXBsZXM7XG4gICAgICAgICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5kZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBwcmVmYXVsdCBhcyBkZWZhdWx0XG4gICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIgJiYgcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQpXG4gICAgICAgICAgICAoX2EgPSByZXN1bHQuc2NoZW1hKS5kZWZhdWx0ID8/IChfYS5kZWZhdWx0ID0gcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQpO1xuICAgICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQ7XG4gICAgICAgIC8vIHB1bGxpbmcgZnJlc2ggZnJvbSB0aGlzLnNlZW4gaW4gY2FzZSBpdCB3YXMgb3ZlcndyaXR0ZW5cbiAgICAgICAgY29uc3QgX3Jlc3VsdCA9IHRoaXMuc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICAgICAgcmV0dXJuIF9yZXN1bHQuc2NoZW1hO1xuICAgIH1cbiAgICBlbWl0KHNjaGVtYSwgX3BhcmFtcykge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBjeWNsZXM6IF9wYXJhbXM/LmN5Y2xlcyA/PyBcInJlZlwiLFxuICAgICAgICAgICAgcmV1c2VkOiBfcGFyYW1zPy5yZXVzZWQgPz8gXCJpbmxpbmVcIixcbiAgICAgICAgICAgIC8vIHVucmVwcmVzZW50YWJsZTogX3BhcmFtcz8udW5yZXByZXNlbnRhYmxlID8/IFwidGhyb3dcIixcbiAgICAgICAgICAgIC8vIHVyaTogX3BhcmFtcz8udXJpID8/ICgoaWQpID0+IGAke2lkfWApLFxuICAgICAgICAgICAgZXh0ZXJuYWw6IF9wYXJhbXM/LmV4dGVybmFsID8/IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHNlZW4gbWFwO1xuICAgICAgICBjb25zdCByb290ID0gdGhpcy5zZWVuLmdldChzY2hlbWEpO1xuICAgICAgICBpZiAoIXJvb3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnByb2Nlc3NlZCBzY2hlbWEuIFRoaXMgaXMgYSBidWcgaW4gWm9kLlwiKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgd2l0aCByb290IHNjaGVtYSBmaWVsZHNcbiAgICAgICAgLy8gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHNlZW4uY2FjaGVkKTtcbiAgICAgICAgLy8gcmV0dXJucyBhIHJlZiB0byB0aGUgc2NoZW1hXG4gICAgICAgIC8vIGRlZklkIHdpbGwgYmUgZW1wdHkgaWYgdGhlIHJlZiBwb2ludHMgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hIChvciAjKVxuICAgICAgICBjb25zdCBtYWtlVVJJID0gKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAvLyBjb21wYXJpbmcgdGhlIHNlZW4gb2JqZWN0cyBiZWNhdXNlIHNvbWV0aW1lc1xuICAgICAgICAgICAgLy8gbXVsdGlwbGUgc2NoZW1hcyBtYXAgdG8gdGhlIHNhbWUgc2VlbiBvYmplY3QuXG4gICAgICAgICAgICAvLyBlLmcuIGxhenlcbiAgICAgICAgICAgIC8vIGV4dGVybmFsIGlzIGNvbmZpZ3VyZWRcbiAgICAgICAgICAgIGNvbnN0IGRlZnNTZWdtZW50ID0gdGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCIkZGVmc1wiIDogXCJkZWZpbml0aW9uc1wiO1xuICAgICAgICAgICAgaWYgKHBhcmFtcy5leHRlcm5hbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsSWQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7IC8vID8/IFwiX19zaGFyZWRcIjsvLyBgX19zY2hlbWEke3RoaXMuY291bnRlcisrfWA7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgc2NoZW1hIGlzIGluIHRoZSBleHRlcm5hbCByZWdpc3RyeVxuICAgICAgICAgICAgICAgIGNvbnN0IHVyaUdlbmVyYXRvciA9IHBhcmFtcy5leHRlcm5hbC51cmkgPz8gKChpZCkgPT4gaWQpO1xuICAgICAgICAgICAgICAgIGlmIChleHRlcm5hbElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZjogdXJpR2VuZXJhdG9yKGV4dGVybmFsSWQpIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgYWRkIHRvIF9fc2hhcmVkXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBlbnRyeVsxXS5kZWZJZCA/PyBlbnRyeVsxXS5zY2hlbWEuaWQgPz8gYHNjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgICAgICBlbnRyeVsxXS5kZWZJZCA9IGlkOyAvLyBzZXQgZGVmSWQgc28gaXQgd2lsbCBiZSByZXVzZWQgaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGVmSWQ6IGlkLCByZWY6IGAke3VyaUdlbmVyYXRvcihcIl9fc2hhcmVkXCIpfSMvJHtkZWZzU2VnbWVudH0vJHtpZH1gIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW50cnlbMV0gPT09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWY6IFwiI1wiIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZWxmLWNvbnRhaW5lZCBzY2hlbWFcbiAgICAgICAgICAgIGNvbnN0IHVyaVByZWZpeCA9IGAjYDtcbiAgICAgICAgICAgIGNvbnN0IGRlZlVyaVByZWZpeCA9IGAke3VyaVByZWZpeH0vJHtkZWZzU2VnbWVudH0vYDtcbiAgICAgICAgICAgIGNvbnN0IGRlZklkID0gZW50cnlbMV0uc2NoZW1hLmlkID8/IGBfX3NjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgIHJldHVybiB7IGRlZklkLCByZWY6IGRlZlVyaVByZWZpeCArIGRlZklkIH07XG4gICAgICAgIH07XG4gICAgICAgIC8vIHN0b3JlZCBjYWNoZWQgdmVyc2lvbiBpbiBgZGVmYCBwcm9wZXJ0eVxuICAgICAgICAvLyByZW1vdmUgYWxsIHByb3BlcnRpZXMsIHNldCAkcmVmXG4gICAgICAgIGNvbnN0IGV4dHJhY3RUb0RlZiA9IChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgdGhlIHNjaGVtYSBpcyBhbHJlYWR5IGEgcmVmZXJlbmNlLCBkbyBub3QgZXh0cmFjdCBpdFxuICAgICAgICAgICAgaWYgKGVudHJ5WzFdLnNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgY29uc3QgeyByZWYsIGRlZklkIH0gPSBtYWtlVVJJKGVudHJ5KTtcbiAgICAgICAgICAgIHNlZW4uZGVmID0geyAuLi5zZWVuLnNjaGVtYSB9O1xuICAgICAgICAgICAgLy8gZGVmSWQgd29uJ3QgYmUgc2V0IGlmIHRoZSBzY2hlbWEgaXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hXG4gICAgICAgICAgICBpZiAoZGVmSWQpXG4gICAgICAgICAgICAgICAgc2Vlbi5kZWZJZCA9IGRlZklkO1xuICAgICAgICAgICAgLy8gd2lwZSBhd2F5IGFsbCBwcm9wZXJ0aWVzIGV4Y2VwdCAkcmVmXG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSBzZWVuLnNjaGVtYTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWFba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjaGVtYS4kcmVmID0gcmVmO1xuICAgICAgICB9O1xuICAgICAgICAvLyB0aHJvdyBvbiBjeWNsZXNcbiAgICAgICAgLy8gYnJlYWsgY3ljbGVzXG4gICAgICAgIGlmIChwYXJhbXMuY3ljbGVzID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5jeWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDeWNsZSBkZXRlY3RlZDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCMvJHtzZWVuLmN5Y2xlPy5qb2luKFwiL1wiKX0vPHJvb3Q+YCArXG4gICAgICAgICAgICAgICAgICAgICAgICAnXFxuXFxuU2V0IHRoZSBgY3ljbGVzYCBwYXJhbWV0ZXIgdG8gYFwicmVmXCJgIHRvIHJlc29sdmUgY3ljbGljYWwgc2NoZW1hcyB3aXRoIGRlZnMuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyBpbnRvICRkZWZzXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgLy8gY29udmVydCByb290IHNjaGVtYSB0byAjICRyZWZcbiAgICAgICAgICAgIGlmIChzY2hlbWEgPT09IGVudHJ5WzBdKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTsgLy8gdGhpcyBoYXMgc3BlY2lhbCBoYW5kbGluZyBmb3IgdGhlIHJvb3Qgc2NoZW1hXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHRyYWN0IHNjaGVtYXMgdGhhdCBhcmUgaW4gdGhlIGV4dGVybmFsIHJlZ2lzdHJ5XG4gICAgICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ID0gcGFyYW1zLmV4dGVybmFsLnJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWEgIT09IGVudHJ5WzBdICYmIGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHRyYWN0IHNjaGVtYXMgd2l0aCBgaWRgIG1ldGFcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGJyZWFrIGN5Y2xlc1xuICAgICAgICAgICAgaWYgKHNlZW4uY3ljbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBhbnlcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXh0cmFjdCByZXVzZWQgc2NoZW1hc1xuICAgICAgICAgICAgaWYgKHNlZW4uY291bnQgPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5yZXVzZWQgPT09IFwicmVmXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBmbGF0dGVuIF9yZWZzXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5SZWYgPSAoem9kU2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSB0aGlzLnNlZW4uZ2V0KHpvZFNjaGVtYSk7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSBzZWVuLmRlZiA/PyBzZWVuLnNjaGVtYTtcbiAgICAgICAgICAgIGNvbnN0IF9jYWNoZWQgPSB7IC4uLnNjaGVtYSB9O1xuICAgICAgICAgICAgLy8gYWxyZWFkeSBzZWVuXG4gICAgICAgICAgICBpZiAoc2Vlbi5yZWYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmbGF0dGVuIHJlZiBpZiBkZWZpbmVkXG4gICAgICAgICAgICBjb25zdCByZWYgPSBzZWVuLnJlZjtcbiAgICAgICAgICAgIHNlZW4ucmVmID0gbnVsbDsgLy8gcHJldmVudCByZWN1cnNpb25cbiAgICAgICAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgICAgICAgICBmbGF0dGVuUmVmKHJlZiwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAvLyBtZXJnZSByZWZlcmVuY2VkIHNjaGVtYSBpbnRvIGN1cnJlbnRcbiAgICAgICAgICAgICAgICBjb25zdCByZWZTY2hlbWEgPSB0aGlzLnNlZW4uZ2V0KHJlZikuc2NoZW1hO1xuICAgICAgICAgICAgICAgIGlmIChyZWZTY2hlbWEuJHJlZiAmJiBwYXJhbXMudGFyZ2V0ID09PSBcImRyYWZ0LTdcIikge1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWEuYWxsT2YgPSBzY2hlbWEuYWxsT2YgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHJlZlNjaGVtYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNjaGVtYSwgcmVmU2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzY2hlbWEsIF9jYWNoZWQpOyAvLyBwcmV2ZW50IG92ZXJ3cml0aW5nIGFueSBmaWVsZHMgaW4gdGhlIG9yaWdpbmFsIHNjaGVtYVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4ZWN1dGUgb3ZlcnJpZGVzXG4gICAgICAgICAgICBpZiAoIXNlZW4uaXNQYXJlbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5vdmVycmlkZSh7XG4gICAgICAgICAgICAgICAgICAgIHpvZFNjaGVtYTogem9kU2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiBzY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHNlZW4ucGF0aCA/PyBbXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBbLi4udGhpcy5zZWVuLmVudHJpZXMoKV0ucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICBmbGF0dGVuUmVmKGVudHJ5WzBdLCB7IHRhcmdldDogdGhpcy50YXJnZXQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdC4kc2NoZW1hID0gXCJodHRwczovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC8yMDIwLTEyL3NjaGVtYVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTdcIikge1xuICAgICAgICAgICAgcmVzdWx0LiRzY2hlbWEgPSBcImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hI1wiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIHRhcmdldDogJHt0aGlzLnRhcmdldH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsPy51cmkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyYW1zLmV4dGVybmFsLnJlZ2lzdHJ5LmdldChzY2hlbWEpPy5pZDtcbiAgICAgICAgICAgIGlmICghaWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIGlzIG1pc3NpbmcgYW4gYGlkYCBwcm9wZXJ0eVwiKTtcbiAgICAgICAgICAgIHJlc3VsdC4kaWQgPSBwYXJhbXMuZXh0ZXJuYWwudXJpKGlkKTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdCwgcm9vdC5kZWYpO1xuICAgICAgICAvLyBidWlsZCBkZWZzIG9iamVjdFxuICAgICAgICBjb25zdCBkZWZzID0gcGFyYW1zLmV4dGVybmFsPy5kZWZzID8/IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIGlmIChzZWVuLmRlZiAmJiBzZWVuLmRlZklkKSB7XG4gICAgICAgICAgICAgICAgZGVmc1tzZWVuLmRlZklkXSA9IHNlZW4uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBkZWZpbml0aW9ucyBpbiByZXN1bHRcbiAgICAgICAgaWYgKHBhcmFtcy5leHRlcm5hbCkge1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRlZnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC4kZGVmcyA9IGRlZnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZGVmaW5pdGlvbnMgPSBkZWZzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gdGhpcyBcImZpbmFsaXplc1wiIHRoaXMgc2NoZW1hIGFuZCBlbnN1cmVzIGFsbCBjeWNsZXMgYXJlIHJlbW92ZWRcbiAgICAgICAgICAgIC8vIGVhY2ggY2FsbCB0byAuZW1pdCgpIGlzIGZ1bmN0aW9uYWxseSBpbmRlcGVuZGVudFxuICAgICAgICAgICAgLy8gdGhvdWdoIHRoZSBzZWVuIG1hcCBpcyBzaGFyZWRcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBjb252ZXJ0aW5nIHNjaGVtYSB0byBKU09OLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB0b0pTT05TY2hlbWEoaW5wdXQsIF9wYXJhbXMpIHtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiAkWm9kUmVnaXN0cnkpIHtcbiAgICAgICAgY29uc3QgZ2VuID0gbmV3IEpTT05TY2hlbWFHZW5lcmF0b3IoX3BhcmFtcyk7XG4gICAgICAgIGNvbnN0IGRlZnMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBpbnB1dC5faWRtYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBbXywgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgZ2VuLnByb2Nlc3Moc2NoZW1hKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2hlbWFzID0ge307XG4gICAgICAgIGNvbnN0IGV4dGVybmFsID0ge1xuICAgICAgICAgICAgcmVnaXN0cnk6IGlucHV0LFxuICAgICAgICAgICAgdXJpOiBfcGFyYW1zPy51cmksXG4gICAgICAgICAgICBkZWZzLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGlucHV0Ll9pZG1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHNjaGVtYV0gPSBlbnRyeTtcbiAgICAgICAgICAgIHNjaGVtYXNba2V5XSA9IGdlbi5lbWl0KHNjaGVtYSwge1xuICAgICAgICAgICAgICAgIC4uLl9wYXJhbXMsXG4gICAgICAgICAgICAgICAgZXh0ZXJuYWwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZGVmc1NlZ21lbnQgPSBnZW4udGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIiA/IFwiJGRlZnNcIiA6IFwiZGVmaW5pdGlvbnNcIjtcbiAgICAgICAgICAgIHNjaGVtYXMuX19zaGFyZWQgPSB7XG4gICAgICAgICAgICAgICAgW2RlZnNTZWdtZW50XTogZGVmcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc2NoZW1hcyB9O1xuICAgIH1cbiAgICBjb25zdCBnZW4gPSBuZXcgSlNPTlNjaGVtYUdlbmVyYXRvcihfcGFyYW1zKTtcbiAgICBnZW4ucHJvY2VzcyhpbnB1dCk7XG4gICAgcmV0dXJuIGdlbi5lbWl0KGlucHV0LCBfcGFyYW1zKTtcbn1cbmZ1bmN0aW9uIGlzVHJhbnNmb3JtaW5nKF9zY2hlbWEsIF9jdHgpIHtcbiAgICBjb25zdCBjdHggPSBfY3R4ID8/IHsgc2VlbjogbmV3IFNldCgpIH07XG4gICAgaWYgKGN0eC5zZWVuLmhhcyhfc2NoZW1hKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGN0eC5zZWVuLmFkZChfc2NoZW1hKTtcbiAgICBjb25zdCBzY2hlbWEgPSBfc2NoZW1hO1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBzd2l0Y2ggKGRlZi50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICBjYXNlIFwibnVsbFwiOlxuICAgICAgICBjYXNlIFwiYW55XCI6XG4gICAgICAgIGNhc2UgXCJ1bmtub3duXCI6XG4gICAgICAgIGNhc2UgXCJuZXZlclwiOlxuICAgICAgICBjYXNlIFwidm9pZFwiOlxuICAgICAgICBjYXNlIFwibGl0ZXJhbFwiOlxuICAgICAgICBjYXNlIFwiZW51bVwiOlxuICAgICAgICBjYXNlIFwibmFuXCI6XG4gICAgICAgIGNhc2UgXCJmaWxlXCI6XG4gICAgICAgIGNhc2UgXCJ0ZW1wbGF0ZV9saXRlcmFsXCI6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNhc2UgXCJhcnJheVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmVsZW1lbnQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkZWYuc2hhcGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcoZGVmLnNoYXBlW2tleV0sIGN0eCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ1bmlvblwiOiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBkZWYub3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhvcHRpb24sIGN0eCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJpbnRlcnNlY3Rpb25cIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5sZWZ0LCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi5yaWdodCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidHVwbGVcIjoge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRlZi5pdGVtcykge1xuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhpdGVtLCBjdHgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWYucmVzdCAmJiBpc1RyYW5zZm9ybWluZyhkZWYucmVzdCwgY3R4KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicmVjb3JkXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYua2V5VHlwZSwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYudmFsdWVUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJtYXBcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInNldFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLnZhbHVlVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbm5lciB0eXBlc1xuICAgICAgICBjYXNlIFwicHJvbWlzZVwiOlxuICAgICAgICBjYXNlIFwib3B0aW9uYWxcIjpcbiAgICAgICAgY2FzZSBcIm5vbm9wdGlvbmFsXCI6XG4gICAgICAgIGNhc2UgXCJudWxsYWJsZVwiOlxuICAgICAgICBjYXNlIFwicmVhZG9ubHlcIjpcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuaW5uZXJUeXBlLCBjdHgpO1xuICAgICAgICBjYXNlIFwibGF6eVwiOlxuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5nZXR0ZXIoKSwgY3R4KTtcbiAgICAgICAgY2FzZSBcImRlZmF1bHRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInByZWZhdWx0XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuaW5uZXJUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjdXN0b21cIjoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjoge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInBpcGVcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbiwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYub3V0LCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY2F0Y2hcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBkZWY7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBzY2hlbWEgdHlwZTogJHtkZWYudHlwZX1gKTtcbn1cbiIsImltcG9ydCB7IENvbnRlbnRGaWx0ZXJGaW5pc2hSZWFzb25FcnJvciwgTGVuZ3RoRmluaXNoUmVhc29uRXJyb3IsIE9wZW5BSUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2wodG9vbCkge1xuICAgIHJldHVybiB0b29sICE9PSB1bmRlZmluZWQgJiYgJ2Z1bmN0aW9uJyBpbiB0b29sICYmIHRvb2wuZnVuY3Rpb24gIT09IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlUmVzcG9uc2VGb3JtYXQocmVzcG9uc2VfZm9ybWF0LCBwYXJzZXIpIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnJlc3BvbnNlX2Zvcm1hdCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0JyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCkge1xuICAgIHJldHVybiByZXNwb25zZV9mb3JtYXQ/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVUb29sKHRvb2wsIHsgcGFyc2VyLCBjYWxsYmFjaywgfSkge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4udG9vbCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtdG9vbCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRjYWxsYmFjazoge1xuICAgICAgICAgICAgdmFsdWU6IGNhbGxiYWNrLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dG9QYXJzYWJsZVRvb2wodG9vbCkge1xuICAgIHJldHVybiB0b29sPy5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtdG9vbCc7XG59XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zIHx8ICFoYXNBdXRvUGFyc2VhYmxlSW5wdXQocGFyYW1zKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uY29tcGxldGlvbixcbiAgICAgICAgICAgIGNob2ljZXM6IGNvbXBsZXRpb24uY2hvaWNlcy5tYXAoKGNob2ljZSkgPT4ge1xuICAgICAgICAgICAgICAgIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHMoY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBjb25zdCBjaG9pY2VzID0gY29tcGxldGlvbi5jaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiB7XG4gICAgICAgIGlmIChjaG9pY2UuZmluaXNoX3JlYXNvbiA9PT0gJ2xlbmd0aCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBMZW5ndGhGaW5pc2hSZWFzb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaG9pY2UuZmluaXNoX3JlYXNvbiA9PT0gJ2NvbnRlbnRfZmlsdGVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IENvbnRlbnRGaWx0ZXJGaW5pc2hSZWFzb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHMoY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jaG9pY2UsXG4gICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzPy5tYXAoKHRvb2xDYWxsKSA9PiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpKSA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgIHBhcnNlZDogY2hvaWNlLm1lc3NhZ2UuY29udGVudCAmJiAhY2hvaWNlLm1lc3NhZ2UucmVmdXNhbCA/XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlUmVzcG9uc2VGb3JtYXQocGFyYW1zLCBjaG9pY2UubWVzc2FnZS5jb250ZW50KVxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiB7IC4uLmNvbXBsZXRpb24sIGNob2ljZXMgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlUmVzcG9uc2VGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChwYXJhbXMucmVzcG9uc2VfZm9ybWF0Py50eXBlID09PSAnanNvbl9zY2hlbWEnKSB7XG4gICAgICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZV9mb3JtYXQgPSBwYXJhbXMucmVzcG9uc2VfZm9ybWF0O1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlX2Zvcm1hdC4kcGFyc2VSYXcoY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJiBpbnB1dFRvb2wuZnVuY3Rpb24/Lm5hbWUgPT09IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUpOyAvLyBUUyBkb2Vzbid0IG5hcnJvdyBiYXNlZCBvbiBpc0NoYXRDb21wbGV0aW9uVG9vbFxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgLi4udG9vbENhbGwuZnVuY3Rpb24sXG4gICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogaW5wdXRUb29sPy5mdW5jdGlvbi5zdHJpY3QgPyBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkUGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgISgndG9vbHMnIGluIHBhcmFtcykgfHwgIXBhcmFtcy50b29scykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGlucHV0VG9vbCA9IHBhcmFtcy50b29scz8uZmluZCgoaW5wdXRUb29sKSA9PiBpc0NoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sKGlucHV0VG9vbCkgJiYgaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTtcbiAgICByZXR1cm4gKGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJlxuICAgICAgICAoaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgfHwgaW5wdXRUb29sPy5mdW5jdGlvbi5zdHJpY3QgfHwgZmFsc2UpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNBdXRvUGFyc2VhYmxlSW5wdXQocGFyYW1zKSB7XG4gICAgaWYgKGlzQXV0b1BhcnNhYmxlUmVzcG9uc2VGb3JtYXQocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAocGFyYW1zLnRvb2xzPy5zb21lKCh0KSA9PiBpc0F1dG9QYXJzYWJsZVRvb2wodCkgfHwgKHQudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0LmZ1bmN0aW9uLnN0cmljdCA9PT0gdHJ1ZSkpID8/IGZhbHNlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUb29sQ2FsbHNBcmVDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbENhbGxzKHRvb2xDYWxscykge1xuICAgIGZvciAoY29uc3QgdG9vbENhbGwgb2YgdG9vbENhbGxzIHx8IFtdKSB7XG4gICAgICAgIGlmICh0b29sQ2FsbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgY2FsbHMgYXJlIHN1cHBvcnRlZDsgUmVjZWl2ZWQgXFxgJHt0b29sQ2FsbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZXIubWpzLm1hcCIsImV4cG9ydCBjb25zdCBpZ25vcmVPdmVycmlkZSA9IFN5bWJvbCgnTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZScpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogJ3Jvb3QnLFxuICAgIGVmZmVjdFN0cmF0ZWd5OiAnaW5wdXQnLFxuICAgIHBpcGVTdHJhdGVneTogJ2FsbCcsXG4gICAgZGF0ZVN0cmF0ZWd5OiAnZm9ybWF0OmRhdGUtdGltZScsXG4gICAgbWFwU3RyYXRlZ3k6ICdlbnRyaWVzJyxcbiAgICBudWxsYWJsZVN0cmF0ZWd5OiAnZnJvbS10YXJnZXQnLFxuICAgIHJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneTogJ3Bhc3N0aHJvdWdoJyxcbiAgICBkZWZpbml0aW9uUGF0aDogJ2RlZmluaXRpb25zJyxcbiAgICB0YXJnZXQ6ICdqc29uU2NoZW1hNycsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICBtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcbiAgICBwYXR0ZXJuU3RyYXRlZ3k6ICdlc2NhcGUnLFxuICAgIGFwcGx5UmVnZXhGbGFnczogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogJ2Zvcm1hdDplbWFpbCcsXG4gICAgYmFzZTY0U3RyYXRlZ3k6ICdjb250ZW50RW5jb2Rpbmc6YmFzZTY0JyxcbiAgICBuYW1lU3RyYXRlZ3k6ICdyZWYnLFxufTtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgYGRlZmluaXRpb25zYCBoZXJlIGFzIHdlIG1heSBtdXRhdGUgaXRcbiAgICByZXR1cm4gKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9ucy5tanMubWFwIiwiZXhwb3J0IGNvbnN0IHpvZERlZiA9ICh6b2RTY2hlbWEpID0+IHtcbiAgICByZXR1cm4gJ19kZWYnIGluIHpvZFNjaGVtYSA/IHpvZFNjaGVtYS5fZGVmIDogem9kU2NoZW1hO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgIGlmICghb2JqKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IF9rIGluIG9iailcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmV4cG9ydCBjb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gX29wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgX29wdGlvbnMubmFtZV1cbiAgICAgICAgOiBfb3B0aW9ucy5iYXNlUGF0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5fb3B0aW9ucyxcbiAgICAgICAgY3VycmVudFBhdGg6IGN1cnJlbnRQYXRoLFxuICAgICAgICBwcm9wZXJ0eVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VlblJlZnM6IG5ldyBTZXQoKSxcbiAgICAgICAgc2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW1xuICAgICAgICAgICAgem9kRGVmKGRlZiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVmOiB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHV0aW9uIG9mIHJlZmVyZW5jZXMgd2lsbCBiZSBmb3JjZWQgZXZlbiB0aG91Z2ggc2Vlbiwgc28gaXQncyBvayB0aGF0IHRoZSBzY2hlbWEgaXMgdW5kZWZpbmVkIGhlcmUgZm9yIG5vdy5cbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWZzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5yZXMuZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgW2tleV06IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIGtleSwgdmFsdWUsIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5tanMubWFwIiwiZXhwb3J0IHZhciB1dGlsO1xuKGZ1bmN0aW9uICh1dGlsKSB7XG4gICAgdXRpbC5hc3NlcnRFcXVhbCA9IChfKSA9PiB7IH07XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKSkuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG5leHBvcnQgdmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBab2RQYXJzZWRUeXBlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJzdHJpbmdcIixcbiAgICBcIm5hblwiLFxuICAgIFwibnVtYmVyXCIsXG4gICAgXCJpbnRlZ2VyXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiYm9vbGVhblwiLFxuICAgIFwiZGF0ZVwiLFxuICAgIFwiYmlnaW50XCIsXG4gICAgXCJzeW1ib2xcIixcbiAgICBcImZ1bmN0aW9uXCIsXG4gICAgXCJ1bmRlZmluZWRcIixcbiAgICBcIm51bGxcIixcbiAgICBcImFycmF5XCIsXG4gICAgXCJvYmplY3RcIixcbiAgICBcInVua25vd25cIixcbiAgICBcInByb21pc2VcIixcbiAgICBcInZvaWRcIixcbiAgICBcIm5ldmVyXCIsXG4gICAgXCJtYXBcIixcbiAgICBcInNldFwiLFxuXSk7XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuZXhwb3J0IGNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGZvcm1hdChfbWFwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWUudW5pb25FcnJvcnMubWFwKHByb2Nlc3NFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfYXJndW1lbnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLmFyZ3VtZW50c0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRFcnJvcnMuX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlLnBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGlzc3VlLnBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc3QgZXJyb3JBcnJheTogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlcnJvckFycmF5Ll9lcnJvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgZXJyb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3VycltlbF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRXJyb3JzO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgWm9kRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBhIFpvZEVycm9yOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0RWwgPSBzdWIucGF0aFswXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tmaXJzdEVsXSA9IGZpZWxkRXJyb3JzW2ZpcnN0RWxdIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW2ZpcnN0RWxdLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUVycm9ycy5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmb3JtRXJyb3JzLCBmaWVsZEVycm9ycyB9O1xuICAgIH1cbiAgICBnZXQgZm9ybUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdHRlbigpO1xuICAgIH1cbn1cblpvZEVycm9yLmNyZWF0ZSA9IChpc3N1ZXMpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihpc3N1ZXMpO1xuICAgIHJldHVybiBlcnJvcjtcbn07XG4iLCJpbXBvcnQgeyBab2RJc3N1ZUNvZGUgfSBmcm9tIFwiLi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUgfSBmcm9tIFwiLi4vaGVscGVycy91dGlsLmpzXCI7XG5jb25zdCBlcnJvck1hcCA9IChpc3N1ZSwgX2N0eCkgPT4ge1xuICAgIGxldCBtZXNzYWdlO1xuICAgIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGU6XG4gICAgICAgICAgICBpZiAoaXNzdWUucmVjZWl2ZWQgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWw6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgbGl0ZXJhbCB2YWx1ZSwgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5leHBlY3RlZCwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYFVucmVjb2duaXplZCBrZXkocykgaW4gb2JqZWN0OiAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5rZXlzLCBcIiwgXCIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGVudW0gdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfSwgcmVjZWl2ZWQgJyR7aXNzdWUucmVjZWl2ZWR9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIHJldHVybiB0eXBlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGF0ZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbmNsdWRlc1wiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24ucG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBhdCBvbmUgb3IgbW9yZSBwb3NpdGlvbnMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7aXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IHN0YXJ0IHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uc3RhcnRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwiZW5kc1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlLnZhbGlkYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnZhbGlkYXRpb24gIT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCAke2lzc3VlLnZhbGlkYXRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fc21hbGw6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgbW9yZSB0aGFuYH0gJHtpc3N1ZS5taW5pbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1pbmltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fYmlnOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYHVuZGVyYH0gJHtpc3N1ZS5tYXhpbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0b2AgOiBgc21hbGxlciB0aGFuYH0gJHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWF4aW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmN1c3RvbTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlLm11bHRpcGxlT2Z9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfZmluaXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiTnVtYmVyIG11c3QgYmUgZmluaXRlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZXJyb3JNYXA7XG4iLCJpbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuL2xvY2FsZXMvZW4uanNcIjtcbmxldCBvdmVycmlkZUVycm9yTWFwID0gZGVmYXVsdEVycm9yTWFwO1xuZXhwb3J0IHsgZGVmYXVsdEVycm9yTWFwIH07XG5leHBvcnQgZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwKSB7XG4gICAgb3ZlcnJpZGVFcnJvck1hcCA9IG1hcDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1hcCgpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVFcnJvck1hcDtcbn1cbiIsImltcG9ydCB7IGdldEVycm9yTWFwIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi4vbG9jYWxlcy9lbi5qc1wiO1xuZXhwb3J0IGNvbnN0IG1ha2VJc3N1ZSA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZnVsbFBhdGggPSBbLi4ucGF0aCwgLi4uKGlzc3VlRGF0YS5wYXRoIHx8IFtdKV07XG4gICAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgIH07XG4gICAgaWYgKGlzc3VlRGF0YS5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgbWVzc2FnZTogaXNzdWVEYXRhLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIGNvbnN0IG1hcHMgPSBlcnJvck1hcHNcbiAgICAgICAgLmZpbHRlcigobSkgPT4gISFtKVxuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAucmV2ZXJzZSgpO1xuICAgIGZvciAoY29uc3QgbWFwIG9mIG1hcHMpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gbWFwKGZ1bGxJc3N1ZSwgeyBkYXRhLCBkZWZhdWx0RXJyb3I6IGVycm9yTWVzc2FnZSB9KS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVNYXAgPSBnZXRFcnJvck1hcCgpO1xuICAgIGNvbnN0IGlzc3VlID0gbWFrZUlzc3VlKHtcbiAgICAgICAgaXNzdWVEYXRhOiBpc3N1ZURhdGEsXG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgLy8gY29udGV4dHVhbCBlcnJvciBtYXAgaXMgZmlyc3QgcHJpb3JpdHlcbiAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCwgLy8gdGhlbiBzY2hlbWEtYm91bmQgbWFwIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAsIC8vIHRoZW4gZ2xvYmFsIG92ZXJyaWRlIG1hcFxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAgPT09IGRlZmF1bHRFcnJvck1hcCA/IHVuZGVmaW5lZCA6IGRlZmF1bHRFcnJvck1hcCwgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgfSk7XG4gICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG5leHBvcnQgY2xhc3MgUGFyc2VTdGF0dXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICAgIH1cbiAgICBkaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IFwidmFsaWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImRpcnR5XCI7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJhYm9ydGVkXCI7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cykge1xuICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBhcnJheVZhbHVlLnB1c2gocy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBhcnJheVZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBtZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiYgKHR5cGVvZiB2YWx1ZS52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiB8fCBwYWlyLmFsd2F5c1NldCkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbE9iamVjdFtrZXkudmFsdWVdID0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE9iamVjdCB9O1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJTlZBTElEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuZXhwb3J0IGNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgT0sgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBpc0Fib3J0ZWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmV4cG9ydCBjb25zdCBpc1ZhbGlkID0gKHgpID0+IHguc3RhdHVzID09PSBcInZhbGlkXCI7XG5leHBvcnQgY29uc3QgaXNBc3luYyA9ICh4KSA9PiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgaWYgKCFoZWFkZXIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIENvbnZlcnQgYmFzZTY0dXJsIHRvIGJhc2U2NFxuICAgICAgICBjb25zdCBiYXNlNjQgPSBoZWFkZXJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csIFwiK1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoL18vZywgXCIvXCIpXG4gICAgICAgICAgICAucGFkRW5kKGhlYWRlci5sZW5ndGggKyAoKDQgLSAoaGVhZGVyLmxlbmd0aCAlIDQpKSAlIDQpLCBcIj1cIik7XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBKU09OLnBhcnNlKGF0b2IoYmFzZTY0KSk7XG4gICAgICAgIGlmICh0eXBlb2YgZGVjb2RlZCAhPT0gXCJvYmplY3RcIiB8fCBkZWNvZGVkID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoXCJ0eXBcIiBpbiBkZWNvZGVkICYmIGRlY29kZWQ/LnR5cCAhPT0gXCJKV1RcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFkZWNvZGVkLmFsZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGFsZyAmJiBkZWNvZGVkLmFsZyAhPT0gYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNWYWxpZENpZHIoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NENpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZDaWRyUmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBjbGFzcyBab2RTdHJpbmcgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBTdHJpbmcoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3RyaW5nLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImxlbmd0aFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb0JpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbW9qaVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVtb2ppUmVnZXggPSBuZXcgUmVnRXhwKF9lbW9qaVJlZ2V4LCBcInVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW1vamlSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1vamlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInV1aWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXVpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1dWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJuYW5vaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghbmFub2lkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcIm5hbm9pZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImN1aWQyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWQyUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1bGlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVsaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgY2hlY2sucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gY2hlY2sucmVnZXgudGVzdChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRlc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJyZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidHJpbVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpbmNsdWRlc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmluY2x1ZGVzKGNoZWNrLnZhbHVlLCBjaGVjay5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBpbmNsdWRlczogY2hlY2sudmFsdWUsIHBvc2l0aW9uOiBjaGVjay5wb3NpdGlvbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9Mb3dlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRvVXBwZXJDYXNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJzdGFydHNXaXRoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuc3RhcnRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBzdGFydHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW5kc1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5lbmRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBlbmRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGV0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGVSZWdleDtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IHRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidGltZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZHVyYXRpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICghZHVyYXRpb25SZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZHVyYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImlwXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRJUChpbnB1dC5kYXRhLCBjaGVjay52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJqd3RcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZEpXVChpbnB1dC5kYXRhLCBjaGVjay5hbGcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiand0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjaWRyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRDaWRyKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY2lkclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImJhc2U2NHVybFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlNjR1cmxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9yZWdleChyZWdleCwgdmFsaWRhdGlvbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZpbmVtZW50KChkYXRhKSA9PiByZWdleC50ZXN0KGRhdGEpLCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbWFpbFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVybChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXJsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgZW1vamkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtb2ppXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXVpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXVpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIG5hbm9pZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwibmFub2lkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY3VpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGN1aWQyKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkMlwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVsaWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVsaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBiYXNlNjQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImJhc2U2NFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NHVybChtZXNzYWdlKSB7XG4gICAgICAgIC8vIGJhc2U2NHVybCBlbmNvZGluZyBpcyBhIG1vZGlmaWNhdGlvbiBvZiBiYXNlNjQgdGhhdCBjYW4gc2FmZWx5IGJlIHVzZWQgaW4gVVJMcyBhbmQgZmlsZW5hbWVzXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgand0KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJqd3RcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBpcChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiaXBcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBjaWRyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjaWRyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zKSB9KTtcbiAgICB9XG4gICAgZGF0ZXRpbWUob3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICBvZmZzZXQ6IG9wdGlvbnM/Lm9mZnNldCA/PyBmYWxzZSxcbiAgICAgICAgICAgIGxvY2FsOiBvcHRpb25zPy5sb2NhbCA/PyBmYWxzZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRhdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImRhdGVcIiwgbWVzc2FnZSB9KTtcbiAgICB9XG4gICAgdGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucz8ubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkdXJhdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZHVyYXRpb25cIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJyZWdleFwiLFxuICAgICAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5jbHVkZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBvcHRpb25zPy5wb3NpdGlvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0c1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwic3RhcnRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5kc1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZW5kc1dpdGhcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluTGVuZ3RoLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhMZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZW5ndGgobGVuLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImxlbmd0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IGxlbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYC5taW4oMSlgXG4gICAgICovXG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgdHJpbSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgeyBraW5kOiBcInRyaW1cIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvTG93ZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9Mb3dlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvVXBwZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9VcHBlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBpc0RhdGV0aW1lKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGV0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEYXRlKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGVcIik7XG4gICAgfVxuICAgIGdldCBpc1RpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidGltZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZHVyYXRpb25cIik7XG4gICAgfVxuICAgIGdldCBpc0VtYWlsKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtYWlsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVUkwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidXJsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNFbW9qaSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJlbW9qaVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVVVJRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1dWlkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNOQU5PSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwibmFub2lkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQyKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWQyXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVTElEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInVsaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0lQKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImlwXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDSURSKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImNpZHJcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjRcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NHVybCgpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjR1cmxcIik7XG4gICAgfVxuICAgIGdldCBtaW5MZW5ndGgoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZFN0cmluZy5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5NjY0ODQvd2h5LWRvZXMtbW9kdWx1cy1vcGVyYXRvci1yZXR1cm4tZnJhY3Rpb25hbC1udW1iZXItaW4tamF2YXNjcmlwdC8zMTcxMTAzNCMzMTcxMTAzNFxuZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gTnVtYmVyLnBhcnNlSW50KHN0ZXAudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIHJldHVybiAodmFsSW50ICUgc3RlcEludCkgLyAxMCAqKiBkZWNDb3VudDtcbn1cbmV4cG9ydCBjbGFzcyBab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICAgICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBOdW1iZXIoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVtYmVyLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJpbnRlZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZDogXCJmbG9hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRTYWZlUmVtYWluZGVyKGlucHV0LmRhdGEsIGNoZWNrLnZhbHVlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfZmluaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGd0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIHNldExpbWl0KGtpbmQsIHZhbHVlLCBpbmNsdXNpdmUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbnRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbXVsdGlwbGVPZih2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJmaW5pdGVcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNhZmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSkuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGdldCBpc0ludCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fCAoY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIgJiYgdXRpbC5pc0ludGVnZXIoY2gudmFsdWUpKSk7XG4gICAgfVxuICAgIGdldCBpc0Zpbml0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8IGNoLmtpbmQgPT09IFwiaW50XCIgfHwgY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG1pbikgJiYgTnVtYmVyLmlzRmluaXRlKG1heCk7XG4gICAgfVxufVxuWm9kTnVtYmVyLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJpZ0ludCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IEJpZ0ludChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJpZ2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEludmFsaWRJbnB1dChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YSAlIGNoZWNrLnZhbHVlICE9PSBCaWdJbnQoMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZixcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlT2Y6IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBfZ2V0SW52YWxpZElucHV0KGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYmlnaW50LFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbnBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pblZhbHVlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW47XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZEJpZ0ludC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RCb29sZWFuIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gQm9vbGVhbihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYm9vbGVhbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RCb29sZWFuLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJvb2xlYW4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW4sXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGF0ZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IG5ldyBEYXRlKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5kYXRlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc05hTihpbnB1dC5kYXRhLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpIDwgY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoaW5wdXQuZGF0YS5nZXRUaW1lKCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5EYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IG1pbkRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heERhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogbWF4RGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluRGF0ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluICE9IG51bGwgPyBuZXcgRGF0ZShtaW4pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IG1heERhdGUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heCAhPSBudWxsID8gbmV3IERhdGUobWF4KSA6IG51bGw7XG4gICAgfVxufVxuWm9kRGF0ZS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REYXRlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFN5bWJvbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN5bWJvbCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zeW1ib2wsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kU3ltYm9sLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN5bWJvbCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm51bGwsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kTnVsbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEFueSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvLyB0byBwcmV2ZW50IGluc3RhbmNlcyBvZiBvdGhlciBjbGFzc2VzIGZyb20gZXh0ZW5kaW5nIFpvZEFueS4gdGhpcyBjYXVzZXMgaXNzdWVzIHdpdGggY2F0Y2hhbGwgaW4gWm9kT2JqZWN0LlxuICAgICAgICB0aGlzLl9hbnkgPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEFueS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBbnkoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2ROZXZlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5ldmVyLFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxufVxuWm9kTmV2ZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmV2ZXIoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFZvaWQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUudm9pZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RWb2lkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFZvaWQoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE9iamVjdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgSW4gbW9zdCBjYXNlcywgdGhpcyBpcyBubyBsb25nZXIgbmVlZGVkIC0gdW5rbm93biBwcm9wZXJ0aWVzIGFyZSBub3cgc2lsZW50bHkgc3RyaXBwZWQuXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHBhc3MgdGhyb3VnaCB1bmtub3duIHByb3BlcnRpZXMsIHVzZSBgLnBhc3N0aHJvdWdoKClgIGluc3RlYWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5vbnN0cmljdCA9IHRoaXMucGFzc3Rocm91Z2g7XG4gICAgICAgIC8vIGV4dGVuZDxcbiAgICAgICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZSxcbiAgICAgICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgT3V0cHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgICAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgICAgIC8vICAgICAgID8gT3V0cHV0W2tdXG4gICAgICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgICAgIC8vICAgfT4sXG4gICAgICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgSW5wdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgICAgIC8vICAgICAgID8gSW5wdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PlxuICAgICAgICAvLyA+KFxuICAgICAgICAvLyAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICk6IFpvZE9iamVjdDxcbiAgICAgICAgLy8gICBleHRlbmRTaGFwZTxULCBBdWdtZW50YXRpb24+LFxuICAgICAgICAvLyAgIFVua25vd25LZXlzLFxuICAgICAgICAvLyAgIENhdGNoYWxsLFxuICAgICAgICAvLyAgIE5ld091dHB1dCxcbiAgICAgICAgLy8gICBOZXdJbnB1dFxuICAgICAgICAvLyA+IHtcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIC8vICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgIC8vICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgLy8gICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgIC8vICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgLy8gICAgIH0pLFxuICAgICAgICAvLyAgIH0pIGFzIGFueTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIGAuZXh0ZW5kYCBpbnN0ZWFkXG4gICAgICAgICAqICAqL1xuICAgICAgICB0aGlzLmF1Z21lbnQgPSB0aGlzLmV4dGVuZDtcbiAgICB9XG4gICAgX2dldENhY2hlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlZCAhPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5fZGVmLnNoYXBlKCk7XG4gICAgICAgIGNvbnN0IGtleXMgPSB1dGlsLm9iamVjdEtleXMoc2hhcGUpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSB7IHNoYXBlLCBrZXlzIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCB7IHNoYXBlLCBrZXlzOiBzaGFwZUtleXMgfSA9IHRoaXMuX2dldENhY2hlZCgpO1xuICAgICAgICBjb25zdCBleHRyYUtleXMgPSBbXTtcbiAgICAgICAgaWYgKCEodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIgJiYgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBwYWlyLmFsd2F5c1NldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jUGFpcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChzeW5jUGFpcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICB9XG4gICAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3JVdGlsLmVyclRvT2JqO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IChpc3N1ZSwgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSB0aGlzLl9kZWYuZXJyb3JNYXA/Lihpc3N1ZSwgY3R4KS5tZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJ1bnJlY29nbml6ZWRfa2V5c1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKS5tZXNzYWdlID8/IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0cmlwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGFzc3Rocm91Z2goKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gICAgLy8gICA8RGVmIGV4dGVuZHMgWm9kT2JqZWN0RGVmPihkZWY6IERlZikgPT5cbiAgICAvLyAgIDxBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZT4oXG4gICAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgLy8gICApOiBab2RPYmplY3Q8XG4gICAgLy8gICAgIGV4dGVuZFNoYXBlPFJldHVyblR5cGU8RGVmW1wic2hhcGVcIl0+LCBBdWdtZW50YXRpb24+LFxuICAgIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgICAgRGVmW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyAgID4gPT4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgICAgLi4uZGVmLFxuICAgIC8vICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gICAgLy8gICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgLy8gICAgICAgfSksXG4gICAgLy8gICAgIH0pIGFzIGFueTtcbiAgICAvLyAgIH07XG4gICAgZXh0ZW5kKGF1Z21lbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW9yIHRvIHpvZEAxLjAuMTIgdGhlcmUgd2FzIGEgYnVnIGluIHRoZVxuICAgICAqIGluZmVycmVkIHR5cGUgb2YgbWVyZ2VkIG9iamVjdHMuIFBsZWFzZVxuICAgICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgICAqL1xuICAgIG1lcmdlKG1lcmdpbmcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLm1lcmdpbmcuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIC8vIG1lcmdlPFxuICAgIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBJbmNvbWluZ1tcInNoYXBlXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfb3V0cHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfSxcbiAgICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9pbnB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9XG4gICAgLy8gPihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgICAvLyAgIE5ld091dHB1dCxcbiAgICAvLyAgIE5ld0lucHV0XG4gICAgLy8gPiB7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgc2V0S2V5KGtleSwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICAgIH1cbiAgICAvLyBtZXJnZTxJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdD4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IC8vWm9kT2JqZWN0PFQgJiBJbmNvbWluZ1tcIl9zaGFwZVwiXSwgVW5rbm93bktleXMsIENhdGNoYWxsPiA9IChtZXJnaW5nKSA9PiB7XG4gICAgLy8gWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXVxuICAgIC8vID4ge1xuICAgIC8vICAgLy8gY29uc3QgbWVyZ2VkU2hhcGUgPSBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKFxuICAgIC8vICAgLy8gICB0aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgICAvLyAgIC8vICk7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgY2F0Y2hhbGwoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGljayhtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyhtYXNrKSkge1xuICAgICAgICAgICAgaWYgKG1hc2tba2V5XSAmJiB0aGlzLnNoYXBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9taXQobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmICghbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIGRlZXBQYXJ0aWFsKCkge1xuICAgICAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gICAgfVxuICAgIHBhcnRpYWwobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgaWYgKG1hc2sgJiYgIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYS5vcHRpb25hbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlcXVpcmVkKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKSB7XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgICAgIGxldCBuZXdGaWVsZCA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuZXdGaWVsZCBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkID0gbmV3RmllbGQuX2RlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBuZXdGaWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBrZXlvZigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgICB9XG59XG5ab2RPYmplY3QuY3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5zdHJpY3RDcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGZpcnN0IGlzc3VlLWZyZWUgdmFsaWRhdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGlzc3VlcyBmcm9tIGRpcnR5IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiBpbnZhbGlkXG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IG5ldyBab2RFcnJvcihyZXN1bHQuY3R4LmNvbW1vbi5pc3N1ZXMpKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICAgICAgICAgIHVuaW9uRXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGF3YWl0IG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGN0eDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKS50aGVuKGhhbmRsZVJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRpcnR5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIgJiYgIWRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5ID0geyByZXN1bHQsIGN0eDogY2hpbGRDdHggfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3Vlcy5wdXNoKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXJ0eSkge1xuICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4uZGlydHkuY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXJ0eS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IGlzc3Vlcy5tYXAoKGlzc3VlcykgPT4gbmV3IFpvZEVycm9yKGlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxufVxuWm9kVW5pb24uY3JlYXRlID0gKHR5cGVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuaW9uKHtcbiAgICAgICAgb3B0aW9uczogdHlwZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5pb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgZ2V0RGlzY3JpbWluYXRvciA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMYXp5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2NoZW1hKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVmZmVjdHMpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5pbm5lclR5cGUoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMaXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBbdHlwZS52YWx1ZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB0eXBlLm9wdGlvbnM7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROYXRpdmVFbnVtKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyh0eXBlLmVudW0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsKSB7XG4gICAgICAgIHJldHVybiBbbnVsbF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RPcHRpb25hbCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gW251bGwsIC4uLmdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSldO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQnJhbmRlZCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFJlYWRvbmx5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQ2F0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5fZGVmLmlubmVyVHlwZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcbmV4cG9ydCBjbGFzcyBab2REaXNjcmltaW5hdGVkVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUub2JqZWN0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvciA9IHRoaXMuZGlzY3JpbWluYXRvcjtcbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlID0gY3R4LmRhdGFbZGlzY3JpbWluYXRvcl07XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9uc01hcC5nZXQoZGlzY3JpbWluYXRvclZhbHVlKTtcbiAgICAgICAgaWYgKCFvcHRpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnNNYXAua2V5cygpKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbZGlzY3JpbWluYXRvcl0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkaXNjcmltaW5hdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRpc2NyaW1pbmF0b3I7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxuICAgIGdldCBvcHRpb25zTWFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnNNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZGlzY3JpbWluYXRlZCB1bmlvbiBzY2hlbWEuIEl0cyBiZWhhdmlvdXIgaXMgdmVyeSBzaW1pbGFyIHRvIHRoYXQgb2YgdGhlIG5vcm1hbCB6LnVuaW9uKCkgY29uc3RydWN0b3IuXG4gICAgICogSG93ZXZlciwgaXQgb25seSBhbGxvd3MgYSB1bmlvbiBvZiBvYmplY3RzLCBhbGwgb2Ygd2hpY2ggbmVlZCB0byBzaGFyZSBhIGRpc2NyaW1pbmF0b3IgcHJvcGVydHkuIFRoaXMgcHJvcGVydHkgbXVzdFxuICAgICAqIGhhdmUgYSBkaWZmZXJlbnQgdmFsdWUgZm9yIGVhY2ggb2JqZWN0IGluIHRoZSB1bmlvbi5cbiAgICAgKiBAcGFyYW0gZGlzY3JpbWluYXRvciB0aGUgbmFtZSBvZiB0aGUgZGlzY3JpbWluYXRvciBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB0eXBlcyBhbiBhcnJheSBvZiBvYmplY3Qgc2NoZW1hc1xuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykge1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSB2YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlc1xuICAgICAgICBjb25zdCBvcHRpb25zTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyB0cnkge1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlcyA9IGdldERpc2NyaW1pbmF0b3IodHlwZS5zaGFwZVtkaXNjcmltaW5hdG9yXSk7XG4gICAgICAgICAgICBpZiAoIWRpc2NyaW1pbmF0b3JWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIGRpc2NyaW1pbmF0b3IgdmFsdWUgZm9yIGtleSBcXGAke2Rpc2NyaW1pbmF0b3J9XFxgIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBhbGwgc2NoZW1hIG9wdGlvbnNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGlzY3JpbWluYXRvclZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zTWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yIHByb3BlcnR5ICR7U3RyaW5nKGRpc2NyaW1pbmF0b3IpfSBoYXMgZHVwbGljYXRlIHZhbHVlICR7U3RyaW5nKHZhbHVlKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uc01hcC5zZXQodmFsdWUsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGlzY3JpbWluYXRlZFVuaW9uKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zTWFwLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7XG4gICAgY29uc3QgYVR5cGUgPSBnZXRQYXJzZWRUeXBlKGEpO1xuICAgIGNvbnN0IGJUeXBlID0gZ2V0UGFyc2VkVHlwZShiKTtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gdXRpbC5vYmplY3RLZXlzKGIpO1xuICAgICAgICBjb25zdCBzaGFyZWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKGEpLmZpbHRlcigoa2V5KSA9PiBiS2V5cy5pbmRleE9mKGtleSkgIT09IC0xKTtcbiAgICAgICAgY29uc3QgbmV3T2JqID0geyAuLi5hLCAuLi5iIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNoYXJlZEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBzaGFyZWRWYWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdPYmogfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtQSA9IGFbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgaXRlbUIgPSBiW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoaXRlbUEsIGl0ZW1CKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld0FycmF5LnB1c2goc2hhcmVkVmFsdWUuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld0FycmF5IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLmRhdGUgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiArYSA9PT0gK2IpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RJbnRlcnNlY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgaGFuZGxlUGFyc2VkID0gKHBhcnNlZExlZnQsIHBhcnNlZFJpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNBYm9ydGVkKHBhcnNlZExlZnQpIHx8IGlzQWJvcnRlZChwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlVmFsdWVzKHBhcnNlZExlZnQudmFsdWUsIHBhcnNlZFJpZ2h0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RpcnR5KHBhcnNlZExlZnQpIHx8IGlzRGlydHkocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IG1lcmdlZC5kYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYucmlnaHQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4gaGFuZGxlUGFyc2VkKGxlZnQsIHJpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlUGFyc2VkKHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSksIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZEludGVyc2VjdGlvbi5jcmVhdGUgPSAobGVmdCwgcmlnaHQsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kSW50ZXJzZWN0aW9uKHtcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEludGVyc2VjdGlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIHR5cGUgWm9kVHVwbGVJdGVtcyA9IFtab2RUeXBlQW55LCAuLi5ab2RUeXBlQW55W11dO1xuZXhwb3J0IGNsYXNzIFpvZFR1cGxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPCB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3QgPSB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgaWYgKCFyZXN0ICYmIGN0eC5kYXRhLmxlbmd0aCA+IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLmN0eC5kYXRhXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLl9kZWYuaXRlbXNbaXRlbUluZGV4XSB8fCB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgICAgIGlmICghc2NoZW1hKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpdGVtSW5kZXgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCk7IC8vIGZpbHRlciBudWxsc1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZW1zKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCBpdGVtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLml0ZW1zO1xuICAgIH1cbiAgICByZXN0KHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXN0LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RUdXBsZS5jcmVhdGUgPSAoc2NoZW1hcywgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgb2Ygc2NoZW1hcyB0byB6LnR1cGxlKFsgLi4uIF0pXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgaXRlbXM6IHNjaGVtYXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGUsXG4gICAgICAgIHJlc3Q6IG51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUmVjb3JkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgY3R4LmRhdGFba2V5XSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCBpbnN0YW5jZW9mIFpvZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXlUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IHNlY29uZCxcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXJkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgIGtleVR5cGU6IFpvZFN0cmluZy5jcmVhdGUoKSxcbiAgICAgICAgICAgIHZhbHVlVHlwZTogZmlyc3QsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMoc2Vjb25kKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE1hcCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBrZXlTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5tYXApIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubWFwLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBjb25zdCBwYWlycyA9IFsuLi5jdHguZGF0YS5lbnRyaWVzKCldLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBbaW5kZXgsIFwia2V5XCJdKSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwgW2luZGV4LCBcInZhbHVlXCJdKSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5ab2RNYXAuY3JlYXRlID0gKGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RNYXAoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIGtleVR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTWFwLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFNldCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc2V0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnNldCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZiA9IHRoaXMuX2RlZjtcbiAgICAgICAgaWYgKGRlZi5taW5TaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA8IGRlZi5taW5TaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5TaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pblNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1heFNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplID4gZGVmLm1heFNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IGRlZi5tYXhTaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heFNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZVNldChlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIHBhcnNlZFNldC5hZGQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHBhcnNlZFNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gWy4uLmN0eC5kYXRhLnZhbHVlcygpXS5tYXAoKGl0ZW0sIGkpID0+IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSkpO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGVsZW1lbnRzKS50aGVuKChlbGVtZW50cykgPT4gZmluYWxpemVTZXQoZWxlbWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNldChlbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluKG1pblNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluU2l6ZTogeyB2YWx1ZTogbWluU2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4U2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtYXhTaXplOiB7IHZhbHVlOiBtYXhTaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpemUoc2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oc2l6ZSwgbWVzc2FnZSkubWF4KHNpemUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgICB9XG59XG5ab2RTZXQuY3JlYXRlID0gKHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIG1pblNpemU6IG51bGwsXG4gICAgICAgIG1heFNpemU6IG51bGwsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEZ1bmN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c0Vycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZVJldHVybnNJc3N1ZShyZXR1cm5zLCBlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VJc3N1ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogcmV0dXJucyxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvck1hcHM6IFtjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgY3R4LnNjaGVtYUVycm9yTWFwLCBnZXRFcnJvck1hcCgpLCBkZWZhdWx0RXJyb3JNYXBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICAgICAgICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblR5cGVFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwIH07XG4gICAgICAgIGNvbnN0IGZuID0gY3R4LmRhdGE7XG4gICAgICAgIGlmICh0aGlzLl9kZWYucmV0dXJucyBpbnN0YW5jZW9mIFpvZFByb21pc2UpIHtcbiAgICAgICAgICAgIC8vIFdvdWxkIGxvdmUgYSB3YXkgdG8gYXZvaWQgZGlzYWJsaW5nIHRoaXMgcnVsZSwgYnV0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFuIGFsaWFzICh1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3YXMgd2hhdCBjYXVzZWQgMjY1MSkuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBPSyhhc3luYyBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKFtdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gYXdhaXQgbWUuX2RlZi5hcmdzLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlQXJnc0lzc3VlKGFyZ3MsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IGF3YWl0IG1lLl9kZWYucmV0dXJucy5fZGVmLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMocmVzdWx0LCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IG1lLl9kZWYuYXJncy5zYWZlUGFyc2UoYXJncywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZEFyZ3Muc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VBcmdzSXNzdWUoYXJncywgcGFyc2VkQXJncy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncy5kYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gbWUuX2RlZi5yZXR1cm5zLnNhZmVQYXJzZShyZXN1bHQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRSZXR1cm5zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgcGFyc2VkUmV0dXJucy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnMuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuYXJncztcbiAgICB9XG4gICAgcmV0dXJuVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5yZXR1cm5zO1xuICAgIH1cbiAgICBhcmdzKC4uLml0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgYXJnczogWm9kVHVwbGUuY3JlYXRlKGl0ZW1zKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJucyhyZXR1cm5UeXBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmV0dXJuczogcmV0dXJuVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RyaWN0SW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGFyZ3MsIHJldHVybnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIGFyZ3M6IChhcmdzID8gYXJncyA6IFpvZFR1cGxlLmNyZWF0ZShbXSkucmVzdChab2RVbmtub3duLmNyZWF0ZSgpKSksXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5zIHx8IFpvZFVua25vd24uY3JlYXRlKCksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEZ1bmN0aW9uLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTGF6eSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgbGF6eVNjaGVtYSA9IHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGxhenlTY2hlbWEuX3BhcnNlKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICB9XG59XG5ab2RMYXp5LmNyZWF0ZSA9IChnZXR0ZXIsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGF6eSh7XG4gICAgICAgIGdldHRlcjogZ2V0dGVyLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTGl0ZXJhbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YSAhPT0gdGhpcy5fZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdGhpcy5fZGVmLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICAgIH1cbn1cblpvZExpdGVyYWwuY3JlYXRlID0gKHZhbHVlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVpvZEVudW0odmFsdWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNsYXNzIFpvZEVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5kYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgICAgICByZXR1cm4gWm9kRW51bS5jcmVhdGUodmFsdWVzLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICAuLi5uZXdEZWYsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGNsdWRlKHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSksIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuWm9kRW51bS5jcmVhdGUgPSBjcmVhdGVab2RFbnVtO1xuZXhwb3J0IGNsYXNzIFpvZE5hdGl2ZUVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlRW51bVZhbHVlcyA9IHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcgJiYgY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubnVtYmVyKSB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IFNldCh1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgZW51bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxufVxuWm9kTmF0aXZlRW51bS5jcmVhdGUgPSAodmFsdWVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE5hdGl2ZUVudW0oe1xuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYXRpdmVFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFByb21pc2UgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJiBjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5wcm9taXNlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzaWZpZWQgPSBjdHgucGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlID8gY3R4LmRhdGEgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgICAgICByZXR1cm4gT0socHJvbWlzaWZpZWQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLnBhcnNlQXN5bmMoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuWm9kUHJvbWlzZS5jcmVhdGUgPSAoc2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFZmZlY3RzIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgaW5uZXJUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgc291cmNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHNcbiAgICAgICAgICAgID8gdGhpcy5fZGVmLnNjaGVtYS5zb3VyY2VUeXBlKClcbiAgICAgICAgICAgIDogdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuX2RlZi5lZmZlY3QgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgY2hlY2tDdHggPSB7XG4gICAgICAgICAgICBhZGRJc3N1ZTogKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgYXJnKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmZhdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBwYXRoKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdHgucGF0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrQ3R4LmFkZElzc3VlID0gY2hlY2tDdHguYWRkSXNzdWUuYmluZChjaGVja0N0eCk7XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJwcmVwcm9jZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGVmZmVjdC50cmFuc2Zvcm0oY3R4LmRhdGEsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9jZXNzZWQpLnRoZW4oYXN5bmMgKHByb2Nlc3NlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwcm9jZXNzZWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwicmVmaW5lbWVudFwiKSB7XG4gICAgICAgICAgICBjb25zdCBleGVjdXRlUmVmaW5lbWVudCA9IChhY2MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QucmVmaW5lbWVudChhY2MsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIHJlZmluZW1lbnQgZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoaW5uZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKGJhc2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzeW5jaHJvbm91cyB0cmFuc2Zvcm0gZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoYmFzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KSkudGhlbigocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXRpbC5hc3NlcnROZXZlcihlZmZlY3QpO1xuICAgIH1cbn1cblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgZWZmZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicHJlcHJvY2Vzc1wiLCB0cmFuc2Zvcm06IHByZXByb2Nlc3MgfSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IHsgWm9kRWZmZWN0cyBhcyBab2RUcmFuc2Zvcm1lciB9O1xuZXhwb3J0IGNsYXNzIFpvZE9wdGlvbmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZE9wdGlvbmFsLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9wdGlvbmFsKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9wdGlvbmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGxhYmxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUubnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9LKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kTnVsbGFibGUuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGVmYXVsdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgbGV0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2REZWZhdWx0LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5kZWZhdWx0IDogKCkgPT4gcGFyYW1zLmRlZmF1bHQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQ2F0Y2ggZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIC8vIG5ld0N0eCBpcyB1c2VkIHRvIG5vdCBjb2xsZWN0IGlzc3VlcyBmcm9tIGlubmVyIHR5cGVzIGluIGN0eFxuICAgICAgICBjb25zdCBuZXdDdHggPSB7XG4gICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhOiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IG5ld0N0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgLi4ubmV3Q3R4LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUNhdGNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RDYXRjaC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgY2F0Y2hWYWx1ZTogdHlwZW9mIHBhcmFtcy5jYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmNhdGNoIDogKCkgPT4gcGFyYW1zLmNhdGNoLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5hTiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm5hbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG59XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmFOKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgQlJBTkQgPSBTeW1ib2woXCJ6b2RfYnJhbmRcIik7XG5leHBvcnQgY2xhc3MgWm9kQnJhbmRlZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKGluUmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVBc3luYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5SZXN1bHQgPSB0aGlzLl9kZWYuaW4uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImRpcnR5XCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpblJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kUGlwZWxpbmUoe1xuICAgICAgICAgICAgaW46IGEsXG4gICAgICAgICAgICBvdXQ6IGIsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUmVhZG9ubHkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBjb25zdCBmcmVlemUgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gT2JqZWN0LmZyZWV6ZShkYXRhLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaXNBc3luYyhyZXN1bHQpID8gcmVzdWx0LnRoZW4oKGRhdGEpID0+IGZyZWV6ZShkYXRhKSkgOiBmcmVlemUocmVzdWx0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RSZWFkb25seS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RSZWFkb25seSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICB6LmN1c3RvbSAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIGNsZWFuUGFyYW1zKHBhcmFtcywgZGF0YSkge1xuICAgIGNvbnN0IHAgPSB0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMoZGF0YSkgOiB0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwYXJhbXMgfSA6IHBhcmFtcztcbiAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgIHJldHVybiBwMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXN0b20oY2hlY2ssIF9wYXJhbXMgPSB7fSwgXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKlxuICogUGFzcyBgZmF0YWxgIGludG8gdGhlIHBhcmFtcyBvYmplY3QgaW5zdGVhZDpcbiAqXG4gKiBgYGB0c1xuICogei5zdHJpbmcoKS5jdXN0b20oKHZhbCkgPT4gdmFsLmxlbmd0aCA+IDUsIHsgZmF0YWw6IGZhbHNlIH0pXG4gKiBgYGBcbiAqXG4gKi9cbmZhdGFsKSB7XG4gICAgaWYgKGNoZWNrKVxuICAgICAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpLnN1cGVyUmVmaW5lKChkYXRhLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBjaGVjayhkYXRhKTtcbiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHsgY29kZTogXCJjdXN0b21cIiwgLi4ucGFyYW1zLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfZmF0YWwgPSBwYXJhbXMuZmF0YWwgPz8gZmF0YWwgPz8gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCk7XG59XG5leHBvcnQgeyBab2RUeXBlIGFzIFNjaGVtYSwgWm9kVHlwZSBhcyBab2RTY2hlbWEgfTtcbmV4cG9ydCBjb25zdCBsYXRlID0ge1xuICAgIG9iamVjdDogWm9kT2JqZWN0LmxhenljcmVhdGUsXG59O1xuZXhwb3J0IHZhciBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7XG4oZnVuY3Rpb24gKFpvZEZpcnN0UGFydHlUeXBlS2luZCkge1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVtYmVyXCJdID0gXCJab2ROdW1iZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYU5cIl0gPSBcIlpvZE5hTlwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQm9vbGVhblwiXSA9IFwiWm9kQm9vbGVhblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERhdGVcIl0gPSBcIlpvZERhdGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuZGVmaW5lZFwiXSA9IFwiWm9kVW5kZWZpbmVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbFwiXSA9IFwiWm9kTnVsbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5rbm93blwiXSA9IFwiWm9kVW5rbm93blwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5ldmVyXCJdID0gXCJab2ROZXZlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBcnJheVwiXSA9IFwiWm9kQXJyYXlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPYmplY3RcIl0gPSBcIlpvZE9iamVjdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiXSA9IFwiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kSW50ZXJzZWN0aW9uXCJdID0gXCJab2RJbnRlcnNlY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWNvcmRcIl0gPSBcIlpvZFJlY29yZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE1hcFwiXSA9IFwiWm9kTWFwXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RGdW5jdGlvblwiXSA9IFwiWm9kRnVuY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMYXp5XCJdID0gXCJab2RMYXp5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVudW1cIl0gPSBcIlpvZEVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFZmZlY3RzXCJdID0gXCJab2RFZmZlY3RzXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9wdGlvbmFsXCJdID0gXCJab2RPcHRpb25hbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxhYmxlXCJdID0gXCJab2ROdWxsYWJsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RDYXRjaFwiXSA9IFwiWm9kQ2F0Y2hcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQcm9taXNlXCJdID0gXCJab2RQcm9taXNlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFBpcGVsaW5lXCJdID0gXCJab2RQaXBlbGluZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlYWRvbmx5XCJdID0gXCJab2RSZWFkb25seVwiO1xufSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpO1xuLy8gcmVxdWlyZXMgVFMgNC40K1xuY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl8pIHsgfVxufVxuY29uc3QgaW5zdGFuY2VPZlR5cGUgPSAoXG4vLyBjb25zdCBpbnN0YW5jZU9mVHlwZSA9IDxUIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbmNscywgcGFyYW1zID0ge1xuICAgIG1lc3NhZ2U6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkgPT4gY3VzdG9tKChkYXRhKSA9PiBkYXRhIGluc3RhbmNlb2YgY2xzLCBwYXJhbXMpO1xuY29uc3Qgc3RyaW5nVHlwZSA9IFpvZFN0cmluZy5jcmVhdGU7XG5jb25zdCBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbmNvbnN0IG5hblR5cGUgPSBab2ROYU4uY3JlYXRlO1xuY29uc3QgYmlnSW50VHlwZSA9IFpvZEJpZ0ludC5jcmVhdGU7XG5jb25zdCBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xuY29uc3QgZGF0ZVR5cGUgPSBab2REYXRlLmNyZWF0ZTtcbmNvbnN0IHN5bWJvbFR5cGUgPSBab2RTeW1ib2wuY3JlYXRlO1xuY29uc3QgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG5jb25zdCBudWxsVHlwZSA9IFpvZE51bGwuY3JlYXRlO1xuY29uc3QgYW55VHlwZSA9IFpvZEFueS5jcmVhdGU7XG5jb25zdCB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xuY29uc3QgbmV2ZXJUeXBlID0gWm9kTmV2ZXIuY3JlYXRlO1xuY29uc3Qgdm9pZFR5cGUgPSBab2RWb2lkLmNyZWF0ZTtcbmNvbnN0IGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbmNvbnN0IG9iamVjdFR5cGUgPSBab2RPYmplY3QuY3JlYXRlO1xuY29uc3Qgc3RyaWN0T2JqZWN0VHlwZSA9IFpvZE9iamVjdC5zdHJpY3RDcmVhdGU7XG5jb25zdCB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG5jb25zdCBkaXNjcmltaW5hdGVkVW5pb25UeXBlID0gWm9kRGlzY3JpbWluYXRlZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGludGVyc2VjdGlvblR5cGUgPSBab2RJbnRlcnNlY3Rpb24uY3JlYXRlO1xuY29uc3QgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xuY29uc3QgcmVjb3JkVHlwZSA9IFpvZFJlY29yZC5jcmVhdGU7XG5jb25zdCBtYXBUeXBlID0gWm9kTWFwLmNyZWF0ZTtcbmNvbnN0IHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xuY29uc3QgZnVuY3Rpb25UeXBlID0gWm9kRnVuY3Rpb24uY3JlYXRlO1xuY29uc3QgbGF6eVR5cGUgPSBab2RMYXp5LmNyZWF0ZTtcbmNvbnN0IGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG5jb25zdCBlbnVtVHlwZSA9IFpvZEVudW0uY3JlYXRlO1xuY29uc3QgbmF0aXZlRW51bVR5cGUgPSBab2ROYXRpdmVFbnVtLmNyZWF0ZTtcbmNvbnN0IHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG5jb25zdCBlZmZlY3RzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlO1xuY29uc3Qgb3B0aW9uYWxUeXBlID0gWm9kT3B0aW9uYWwuY3JlYXRlO1xuY29uc3QgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xuY29uc3QgcHJlcHJvY2Vzc1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzO1xuY29uc3QgcGlwZWxpbmVUeXBlID0gWm9kUGlwZWxpbmUuY3JlYXRlO1xuY29uc3Qgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb251bWJlciA9ICgpID0+IG51bWJlclR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb2Jvb2xlYW4gPSAoKSA9PiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCk7XG5leHBvcnQgY29uc3QgY29lcmNlID0ge1xuICAgIHN0cmluZzogKChhcmcpID0+IFpvZFN0cmluZy5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG4gICAgbnVtYmVyOiAoKGFyZykgPT4gWm9kTnVtYmVyLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBib29sZWFuOiAoKGFyZykgPT4gWm9kQm9vbGVhbi5jcmVhdGUoe1xuICAgICAgICAuLi5hcmcsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICB9KSksXG4gICAgYmlnaW50OiAoKGFyZykgPT4gWm9kQmlnSW50LmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBkYXRlOiAoKGFyZykgPT4gWm9kRGF0ZS5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG59O1xuZXhwb3J0IHsgYW55VHlwZSBhcyBhbnksIGFycmF5VHlwZSBhcyBhcnJheSwgYmlnSW50VHlwZSBhcyBiaWdpbnQsIGJvb2xlYW5UeXBlIGFzIGJvb2xlYW4sIGRhdGVUeXBlIGFzIGRhdGUsIGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgYXMgZGlzY3JpbWluYXRlZFVuaW9uLCBlZmZlY3RzVHlwZSBhcyBlZmZlY3QsIGVudW1UeXBlIGFzIGVudW0sIGZ1bmN0aW9uVHlwZSBhcyBmdW5jdGlvbiwgaW5zdGFuY2VPZlR5cGUgYXMgaW5zdGFuY2VvZiwgaW50ZXJzZWN0aW9uVHlwZSBhcyBpbnRlcnNlY3Rpb24sIGxhenlUeXBlIGFzIGxhenksIGxpdGVyYWxUeXBlIGFzIGxpdGVyYWwsIG1hcFR5cGUgYXMgbWFwLCBuYW5UeXBlIGFzIG5hbiwgbmF0aXZlRW51bVR5cGUgYXMgbmF0aXZlRW51bSwgbmV2ZXJUeXBlIGFzIG5ldmVyLCBudWxsVHlwZSBhcyBudWxsLCBudWxsYWJsZVR5cGUgYXMgbnVsbGFibGUsIG51bWJlclR5cGUgYXMgbnVtYmVyLCBvYmplY3RUeXBlIGFzIG9iamVjdCwgb2Jvb2xlYW4sIG9udW1iZXIsIG9wdGlvbmFsVHlwZSBhcyBvcHRpb25hbCwgb3N0cmluZywgcGlwZWxpbmVUeXBlIGFzIHBpcGVsaW5lLCBwcmVwcm9jZXNzVHlwZSBhcyBwcmVwcm9jZXNzLCBwcm9taXNlVHlwZSBhcyBwcm9taXNlLCByZWNvcmRUeXBlIGFzIHJlY29yZCwgc2V0VHlwZSBhcyBzZXQsIHN0cmljdE9iamVjdFR5cGUgYXMgc3RyaWN0T2JqZWN0LCBzdHJpbmdUeXBlIGFzIHN0cmluZywgc3ltYm9sVHlwZSBhcyBzeW1ib2wsIGVmZmVjdHNUeXBlIGFzIHRyYW5zZm9ybWVyLCB0dXBsZVR5cGUgYXMgdHVwbGUsIHVuZGVmaW5lZFR5cGUgYXMgdW5kZWZpbmVkLCB1bmlvblR5cGUgYXMgdW5pb24sIHVua25vd25UeXBlIGFzIHVua25vd24sIHZvaWRUeXBlIGFzIHZvaWQsIH07XG5leHBvcnQgY29uc3QgTkVWRVIgPSBJTlZBTElEO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQW55RGVmKCkge1xuICAgIHJldHVybiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFueS5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXJyYXlEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgIH07XG4gICAgaWYgKGRlZi50eXBlPy5fZGVmPy50eXBlTmFtZSAhPT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSkge1xuICAgICAgICByZXMuaXRlbXMgPSBwYXJzZURlZihkZWYudHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWYubWluTGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYubWluTGVuZ3RoLnZhbHVlLCBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1heExlbmd0aCkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heEl0ZW1zJywgZGVmLm1heExlbmd0aC52YWx1ZSwgZGVmLm1heExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgaWYgKGRlZi5leGFjdExlbmd0aCkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbkl0ZW1zJywgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlLCBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5Lm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnaW50ZWdlcicsXG4gICAgICAgIGZvcm1hdDogJ2ludDY0JyxcbiAgICB9O1xuICAgIGlmICghZGVmLmNoZWNrcylcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWE3Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2V4Y2x1c2l2ZU1pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5pbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbXVsdGlwbGVPZic6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtdWx0aXBsZU9mJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaWdpbnQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUJvb2xlYW5EZWYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ib29sZWFuLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJyYW5kZWREZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiBwYXJzZURlZihfZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1icmFuZGVkLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZUNhdGNoRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgb3ZlcnJpZGVEYXRlU3RyYXRlZ3kpIHtcbiAgICBjb25zdCBzdHJhdGVneSA9IG92ZXJyaWRlRGF0ZVN0cmF0ZWd5ID8/IHJlZnMuZGF0ZVN0cmF0ZWd5O1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0cmF0ZWd5KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYW55T2Y6IHN0cmF0ZWd5Lm1hcCgoaXRlbSwgaSkgPT4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgaXRlbSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGNhc2UgJ2Zvcm1hdDpkYXRlLXRpbWUnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlLXRpbWUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgJ2ludGVnZXInOlxuICAgICAgICAgICAgcmV0dXJuIGludGVnZXJEYXRlUGFyc2VyKGRlZiwgcmVmcyk7XG4gICAgfVxufVxuY29uc3QgaW50ZWdlckRhdGVQYXJzZXIgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnaW50ZWdlcicsXG4gICAgICAgIGZvcm1hdDogJ3VuaXgtdGltZScsXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZm9yIChjb25zdCBjaGVjayBvZiBkZWYuY2hlY2tzKSB7XG4gICAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIC8vIFRoaXMgaXMgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRlLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZmF1bHREZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnBhcnNlRGVmKF9kZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpLFxuICAgICAgICBkZWZhdWx0OiBfZGVmLmRlZmF1bHRWYWx1ZSgpLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVmZmVjdHNEZWYoX2RlZiwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIHJlZnMuZWZmZWN0U3RyYXRlZ3kgPT09ICdpbnB1dCcgPyBwYXJzZURlZihfZGVmLnNjaGVtYS5fZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIDoge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lZmZlY3RzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VFbnVtRGVmKGRlZikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICBlbnVtOiBbLi4uZGVmLnZhbHVlc10sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudW0ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuY29uc3QgaXNKc29uU2NoZW1hN0FsbE9mVHlwZSA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKCd0eXBlJyBpbiB0eXBlICYmIHR5cGUudHlwZSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gJ2FsbE9mJyBpbiB0eXBlO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUludGVyc2VjdGlvbkRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBhbGxPZiA9IFtcbiAgICAgICAgcGFyc2VEZWYoZGVmLmxlZnQuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FsbE9mJywgJzAnXSxcbiAgICAgICAgfSksXG4gICAgICAgIHBhcnNlRGVmKGRlZi5yaWdodC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMSddLFxuICAgICAgICB9KSxcbiAgICBdLmZpbHRlcigoeCkgPT4gISF4KTtcbiAgICBsZXQgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gcmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hMjAxOS0wOScgPyB7IHVuZXZhbHVhdGVkUHJvcGVydGllczogZmFsc2UgfSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtZXJnZWRBbGxPZiA9IFtdO1xuICAgIC8vIElmIGVpdGhlciBvZiB0aGUgc2NoZW1hcyBpcyBhbiBhbGxPZiwgbWVyZ2UgdGhlbSBpbnRvIGEgc2luZ2xlIGFsbE9mXG4gICAgYWxsT2YuZm9yRWFjaCgoc2NoZW1hKSA9PiB7XG4gICAgICAgIGlmIChpc0pzb25TY2hlbWE3QWxsT2ZUeXBlKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIG1lcmdlZEFsbE9mLnB1c2goLi4uc2NoZW1hLmFsbE9mKTtcbiAgICAgICAgICAgIGlmIChzY2hlbWEudW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBvbmUgb2YgdGhlIHNjaGVtYXMgaGFzIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXQsXG4gICAgICAgICAgICAgICAgLy8gdGhlIG1lcmdlZCBzY2hlbWEgc2hvdWxkIGFsc28gaGF2ZSBubyB1bmV2YWx1YXRlZFByb3BlcnRpZXMgc2V0XG4gICAgICAgICAgICAgICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5lc3RlZFNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgICAgIGlmICgnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIHNjaGVtYSAmJiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBhZGRpdGlvbmFsUHJvcGVydGllcywgLi4ucmVzdCB9ID0gc2NoZW1hO1xuICAgICAgICAgICAgICAgIG5lc3RlZFNjaGVtYSA9IHJlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBcyBzb29uIGFzIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgYWRkaXRpb25hbFByb3BlcnRpZXMgc2V0IG5vdCB0byBmYWxzZSwgd2UgYWxsb3cgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaChuZXN0ZWRTY2hlbWEpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1lcmdlZEFsbE9mLmxlbmd0aCA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIGFsbE9mOiBtZXJnZWRBbGxPZixcbiAgICAgICAgICAgIC4uLnVuZXZhbHVhdGVkUHJvcGVydGllcyxcbiAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyc2VjdGlvbi5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTGl0ZXJhbERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBwYXJzZWRUeXBlID0gdHlwZW9mIGRlZi52YWx1ZTtcbiAgICBpZiAocGFyc2VkVHlwZSAhPT0gJ2JpZ2ludCcgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ251bWJlcicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ2Jvb2xlYW4nICYmXG4gICAgICAgIHBhcnNlZFR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBBcnJheS5pc0FycmF5KGRlZi52YWx1ZSkgPyAnYXJyYXknIDogJ29iamVjdCcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICAgICAgZW51bTogW2RlZi52YWx1ZV0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHBhcnNlZFR5cGUgPT09ICdiaWdpbnQnID8gJ2ludGVnZXInIDogcGFyc2VkVHlwZSxcbiAgICAgICAgY29uc3Q6IGRlZi52YWx1ZSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0ZXJhbC5tanMubWFwIiwiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xubGV0IGVtb2ppUmVnZXg7XG4vKipcbiAqIEdlbmVyYXRlZCBmcm9tIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zIGZvdW5kIGhlcmUgYXMgb2YgMjAyNC0wNS0yMjpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9ibG9iL21hc3Rlci9zcmMvdHlwZXMudHMuXG4gKlxuICogRXhwcmVzc2lvbnMgd2l0aCAvaSBmbGFnIGhhdmUgYmVlbiBjaGFuZ2VkIGFjY29yZGluZ2x5LlxuICovXG5leHBvcnQgY29uc3Qgem9kUGF0dGVybnMgPSB7XG4gICAgLyoqXG4gICAgICogYGNgIHdhcyBjaGFuZ2VkIHRvIGBbY0NdYCB0byByZXBsaWNhdGUgL2kgZmxhZ1xuICAgICAqL1xuICAgIGN1aWQ6IC9eW2NDXVteXFxzLV17OCx9JC8sXG4gICAgY3VpZDI6IC9eWzAtOWEtel0rJC8sXG4gICAgdWxpZDogL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC8sXG4gICAgLyoqXG4gICAgICogYGEtemAgd2FzIGFkZGVkIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgZW1haWw6IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbYS16QS1aMC05XycrXFwtXFwuXSopW2EtekEtWjAtOV8rLV1AKFthLXpBLVowLTldW2EtekEtWjAtOVxcLV0qXFwuKStbYS16QS1aXXsyLH0kLyxcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RlZCBhIHZhbGlkIFVuaWNvZGUgUmVnRXhwXG4gICAgICpcbiAgICAgKiBMYXppbHkgaW5zdGFudGlhdGUgc2luY2UgdGhpcyB0eXBlIG9mIHJlZ2V4IGlzbid0IHN1cHBvcnRlZFxuICAgICAqIGluIGFsbCBlbnZzIChlLmcuIFJlYWN0IE5hdGl2ZSkuXG4gICAgICpcbiAgICAgKiBTZWU6XG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2lzc3Vlcy8yNDMzXG4gICAgICogRml4IGluIFpvZDpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvY29tbWl0LzkzNDBmZDUxZTQ4NTc2YTc1YWRjOTE5YmZmNjVkYmM0YTVkNGM5OWJcbiAgICAgKi9cbiAgICBlbW9qaTogKCkgPT4ge1xuICAgICAgICBpZiAoZW1vamlSZWdleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbW9qaVJlZ2V4ID0gUmVnRXhwKCdeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJCcsICd1Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtb2ppUmVnZXg7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICB1dWlkOiAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvLFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIGlwdjQ6IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NjogL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC8sXG4gICAgYmFzZTY0OiAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC8sXG4gICAgbmFub2lkOiAvXlthLXpBLVowLTlfLV17MjF9JC8sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3RyaW5nRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgfTtcbiAgICBmdW5jdGlvbiBwcm9jZXNzUGF0dGVybih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcmVmcy5wYXR0ZXJuU3RyYXRlZ3kgPT09ICdlc2NhcGUnID8gZXNjYXBlTm9uQWxwaGFOdW1lcmljKHZhbHVlKSA6IHZhbHVlO1xuICAgIH1cbiAgICBpZiAoZGVmLmNoZWNrcykge1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtYXgnOlxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuZW1haWxTdHJhdGVneSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0OmVtYWlsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnZW1haWwnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDppZG4tZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpZG4tZW1haWwnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuZW1haWwsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VybCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd1cmknLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXVpZCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd1dWlkJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JlZ2V4JzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIGNoZWNrLnJlZ2V4LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3VpZCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3VpZDInOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuY3VpZDIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzdGFydHNXaXRoJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIFJlZ0V4cChgXiR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfWApLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kc1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGAke3Byb2Nlc3NQYXR0ZXJuKGNoZWNrLnZhbHVlKX0kYCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkYXRlLXRpbWUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkYXRlJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAndGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkdXJhdGlvbicsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbkxlbmd0aCcsIHR5cGVvZiByZXMubWluTGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWF4KHJlcy5taW5MZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhMZW5ndGgnLCB0eXBlb2YgcmVzLm1heExlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1pbihyZXMubWF4TGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2luY2x1ZGVzJzoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKHByb2Nlc3NQYXR0ZXJuKGNoZWNrLnZhbHVlKSksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnaXAnOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSAndjYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnaXB2NCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSAndjQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnaXB2NicsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdlbW9qaSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbW9qaSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VsaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy51bGlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZWZzLmJhc2U2NFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6YmluYXJ5Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdiaW5hcnknLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnRFbmNvZGluZzpiYXNlNjQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdjb250ZW50RW5jb2RpbmcnLCAnYmFzZTY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXR0ZXJuOnpvZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuYmFzZTY0LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnbmFub2lkJzoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMubmFub2lkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAndG9Mb3dlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvVXBwZXJDYXNlJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmltJzpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgKChfKSA9PiB7IH0pKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuY29uc3QgZXNjYXBlTm9uQWxwaGFOdW1lcmljID0gKHZhbHVlKSA9PiBBcnJheS5mcm9tKHZhbHVlKVxuICAgIC5tYXAoKGMpID0+ICgvW2EtekEtWjAtOV0vLnRlc3QoYykgPyBjIDogYFxcXFwke2N9YCkpXG4gICAgLmpvaW4oJycpO1xuY29uc3QgYWRkRm9ybWF0ID0gKHNjaGVtYSwgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpID0+IHtcbiAgICBpZiAoc2NoZW1hLmZvcm1hdCB8fCBzY2hlbWEuYW55T2Y/LnNvbWUoKHgpID0+IHguZm9ybWF0KSkge1xuICAgICAgICBpZiAoIXNjaGVtYS5hbnlPZikge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjaGVtYS5mb3JtYXQpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHNjaGVtYS5mb3JtYXQsXG4gICAgICAgICAgICAgICAgLi4uKHNjaGVtYS5lcnJvck1lc3NhZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogc2NoZW1hLmVycm9yTWVzc2FnZS5mb3JtYXQgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5mb3JtYXQ7XG4gICAgICAgICAgICBpZiAoc2NoZW1hLmVycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdDtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYW55T2YucHVzaCh7XG4gICAgICAgICAgICBmb3JtYXQ6IHZhbHVlLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogbWVzc2FnZSB9IH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnZm9ybWF0JywgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbn07XG5jb25zdCBhZGRQYXR0ZXJuID0gKHNjaGVtYSwgcmVnZXgsIG1lc3NhZ2UsIHJlZnMpID0+IHtcbiAgICBpZiAoc2NoZW1hLnBhdHRlcm4gfHwgc2NoZW1hLmFsbE9mPy5zb21lKCh4KSA9PiB4LnBhdHRlcm4pKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFsbE9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYWxsT2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLnBhdHRlcm4pIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiBzY2hlbWEucGF0dGVybixcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgcGF0dGVybjogc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEucGF0dGVybjtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UucGF0dGVybjtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYWxsT2YucHVzaCh7XG4gICAgICAgICAgICBwYXR0ZXJuOiBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSxcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICYmIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7IGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdwYXR0ZXJuJywgcHJvY2Vzc1JlZ0V4cChyZWdleCwgcmVmcyksIG1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbn07XG4vLyBNdXRhdGUgei5zdHJpbmcucmVnZXgoKSBpbiBhIGJlc3QgYXR0ZW1wdCB0byBhY2NvbW1vZGF0ZSBmb3IgcmVnZXggZmxhZ3Mgd2hlbiBhcHBseVJlZ2V4RmxhZ3MgaXMgdHJ1ZVxuY29uc3QgcHJvY2Vzc1JlZ0V4cCA9IChyZWdleE9yRnVuY3Rpb24sIHJlZnMpID0+IHtcbiAgICBjb25zdCByZWdleCA9IHR5cGVvZiByZWdleE9yRnVuY3Rpb24gPT09ICdmdW5jdGlvbicgPyByZWdleE9yRnVuY3Rpb24oKSA6IHJlZ2V4T3JGdW5jdGlvbjtcbiAgICBpZiAoIXJlZnMuYXBwbHlSZWdleEZsYWdzIHx8ICFyZWdleC5mbGFncylcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICAvLyBDdXJyZW50bHkgaGFuZGxlZCBmbGFnc1xuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgICBpOiByZWdleC5mbGFncy5pbmNsdWRlcygnaScpLCAvLyBDYXNlLWluc2Vuc2l0aXZlXG4gICAgICAgIG06IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdtJyksIC8vIGBeYCBhbmQgYCRgIG1hdGNoZXMgYWRqYWNlbnQgdG8gbmV3bGluZSBjaGFyYWN0ZXJzXG4gICAgICAgIHM6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdzJyksIC8vIGAuYCBtYXRjaGVzIG5ld2xpbmVzXG4gICAgfTtcbiAgICAvLyBUaGUgZ2VuZXJhbCBwcmluY2lwbGUgaGVyZSBpcyB0byBzdGVwIHRocm91Z2ggZWFjaCBjaGFyYWN0ZXIsIG9uZSBhdCBhIHRpbWUsIGFwcGx5aW5nIG11dGF0aW9ucyBhcyBmbGFncyByZXF1aXJlLiBXZSBrZWVwIHRyYWNrIHdoZW4gdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGlzIGVzY2FwZWQsIGFuZCB3aGVuIGl0J3MgaW5zaWRlIGEgZ3JvdXAgL2xpa2UgW3RoaXNdLyBvciAoYWxzbykgYSByYW5nZSBsaWtlIC9bYS16XS8uIFRoZSBmb2xsb3dpbmcgaXMgZmFpcmx5IGJyaXR0bGUgaW1wZXJhdGl2ZSBjb2RlOyBlZGl0IGF0IHlvdXIgcGVyaWwhXG4gICAgY29uc3Qgc291cmNlID0gZmxhZ3MuaSA/IHJlZ2V4LnNvdXJjZS50b0xvd2VyQ2FzZSgpIDogcmVnZXguc291cmNlO1xuICAgIGxldCBwYXR0ZXJuID0gJyc7XG4gICAgbGV0IGlzRXNjYXBlZCA9IGZhbHNlO1xuICAgIGxldCBpbkNoYXJHcm91cCA9IGZhbHNlO1xuICAgIGxldCBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpc0VzY2FwZWQpIHtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICAgICAgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MuaSkge1xuICAgICAgICAgICAgaWYgKGluQ2hhckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZVtpXS5tYXRjaCgvW2Etel0vKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5DaGFyUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBgJHtzb3VyY2VbaSAtIDJdfS0ke3NvdXJjZVtpXX1gLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZVtpICsgMV0gPT09ICctJyAmJiBzb3VyY2VbaSArIDJdPy5tYXRjaCgvW2Etel0vKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkNoYXJSYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpXX0ke3NvdXJjZVtpXS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgWyR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9XWA7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzLm0pIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2VbaV0gPT09ICdeJykge1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYChefCg/PD1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZVtpXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKCR8KD89W1xcclxcbl0pKWA7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzLnMgJiYgc291cmNlW2ldID09PSAnLicpIHtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gaW5DaGFyR3JvdXAgPyBgJHtzb3VyY2VbaV19XFxyXFxuYCA6IGBbJHtzb3VyY2VbaV19XFxyXFxuXWA7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ10nKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbkNoYXJHcm91cCAmJiBzb3VyY2VbaV0gPT09ICdbJykge1xuICAgICAgICAgICAgaW5DaGFyR3JvdXAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZ2V4VGVzdCA9IG5ldyBSZWdFeHAocGF0dGVybik7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgY29udmVydCByZWdleCBwYXR0ZXJuIGF0ICR7cmVmcy5jdXJyZW50UGF0aC5qb2luKCcvJyl9IHRvIGEgZmxhZy1pbmRlcGVuZGVudCBmb3JtISBGYWxsaW5nIGJhY2sgdG8gdGhlIGZsYWctaWdub3JhbnQgc291cmNlYCk7XG4gICAgICAgIHJldHVybiByZWdleC5zb3VyY2U7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmluZy5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdHJpbmdEZWYgfSBmcm9tIFwiLi9zdHJpbmcubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnICYmIGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICByZXF1aXJlZDogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmFjYyxcbiAgICAgICAgICAgICAgICBba2V5XTogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLFxuICAgICAgICAgICAgICAgIH0pID8/IHt9LFxuICAgICAgICAgICAgfSksIHt9KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgIH0pID8/IHt9LFxuICAgIH07XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxuICAgIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyAmJiBkZWYua2V5VHlwZS5fZGVmLmNoZWNrcz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSBPYmplY3QuZW50cmllcyhwYXJzZVN0cmluZ0RlZihkZWYua2V5VHlwZS5fZGVmLCByZWZzKSkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4gKGtleSA9PT0gJ3R5cGUnID8gYWNjIDogeyAuLi5hY2MsIFtrZXldOiB2YWx1ZSB9KSwge30pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lczoga2V5VHlwZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiB7XG4gICAgICAgICAgICAgICAgZW51bTogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVjb3JkLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVjb3JkRGVmIH0gZnJvbSBcIi4vcmVjb3JkLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWFwRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChyZWZzLm1hcFN0cmF0ZWd5ID09PSAncmVjb3JkJykge1xuICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICB9XG4gICAgY29uc3Qga2V5cyA9IHBhcnNlRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCAnaXRlbXMnLCAnMCddLFxuICAgIH0pIHx8IHt9O1xuICAgIGNvbnN0IHZhbHVlcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcxJ10sXG4gICAgfSkgfHwge307XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgbWF4SXRlbXM6IDEyNSxcbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBpdGVtczogW2tleXMsIHZhbHVlc10sXG4gICAgICAgICAgICBtaW5JdGVtczogMixcbiAgICAgICAgICAgIG1heEl0ZW1zOiAyLFxuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gZGVmLnZhbHVlcztcbiAgICBjb25zdCBhY3R1YWxLZXlzID0gT2JqZWN0LmtleXMoZGVmLnZhbHVlcykuZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3Rbb2JqZWN0W2tleV1dICE9PSAnbnVtYmVyJztcbiAgICB9KTtcbiAgICBjb25zdCBhY3R1YWxWYWx1ZXMgPSBhY3R1YWxLZXlzLm1hcCgoa2V5KSA9PiBvYmplY3Rba2V5XSk7XG4gICAgY29uc3QgcGFyc2VkVHlwZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWN0dWFsVmFsdWVzLm1hcCgodmFsdWVzKSA9PiB0eXBlb2YgdmFsdWVzKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHBhcnNlZFR5cGVzLmxlbmd0aCA9PT0gMSA/XG4gICAgICAgICAgICBwYXJzZWRUeXBlc1swXSA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgOiAnbnVtYmVyJ1xuICAgICAgICAgICAgOiBbJ3N0cmluZycsICdudW1iZXInXSxcbiAgICAgICAgZW51bTogYWN0dWFsVmFsdWVzLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXRpdmVFbnVtLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOZXZlckRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3Q6IHt9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTnVsbERlZihyZWZzKSB7XG4gICAgcmV0dXJuIHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnID9cbiAgICAgICAge1xuICAgICAgICAgICAgZW51bTogWydudWxsJ10sXG4gICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIHR5cGU6ICdudWxsJyxcbiAgICAgICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGwubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZU1hcHBpbmdzID0ge1xuICAgIFpvZFN0cmluZzogJ3N0cmluZycsXG4gICAgWm9kTnVtYmVyOiAnbnVtYmVyJyxcbiAgICBab2RCaWdJbnQ6ICdpbnRlZ2VyJyxcbiAgICBab2RCb29sZWFuOiAnYm9vbGVhbicsXG4gICAgWm9kTnVsbDogJ251bGwnLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVuaW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJylcbiAgICAgICAgcmV0dXJuIGFzQW55T2YoZGVmLCByZWZzKTtcbiAgICBjb25zdCBvcHRpb25zID0gZGVmLm9wdGlvbnMgaW5zdGFuY2VvZiBNYXAgPyBBcnJheS5mcm9tKGRlZi5vcHRpb25zLnZhbHVlcygpKSA6IGRlZi5vcHRpb25zO1xuICAgIC8vIFRoaXMgYmxvY2tzIHRyaWVzIHRvIGxvb2sgYWhlYWQgYSBiaXQgdG8gcHJvZHVjZSBuaWNlciBsb29raW5nIHNjaGVtYXMgd2l0aCB0eXBlIGFycmF5IGluc3RlYWQgb2YgYW55T2YuXG4gICAgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSBpbiBwcmltaXRpdmVNYXBwaW5ncyAmJiAoIXguX2RlZi5jaGVja3MgfHwgIXguX2RlZi5jaGVja3MubGVuZ3RoKSkpIHtcbiAgICAgICAgLy8gYWxsIHR5cGVzIGluIHVuaW9uIGFyZSBwcmltaXRpdmUgYW5kIGxhY2sgY2hlY2tzLCBzbyBtaWdodCBhcyB3ZWxsIHNxdWFzaCBpbnRvIHt0eXBlOiBbLi4uXX1cbiAgICAgICAgY29uc3QgdHlwZXMgPSBvcHRpb25zLnJlZHVjZSgodHlwZXMsIHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBwcmltaXRpdmVNYXBwaW5nc1t4Ll9kZWYudHlwZU5hbWVdOyAvL0NhbiBiZSBzYWZlbHkgY2FzdGVkIGR1ZSB0byByb3cgNDNcbiAgICAgICAgICAgIHJldHVybiB0eXBlICYmICF0eXBlcy5pbmNsdWRlcyh0eXBlKSA/IFsuLi50eXBlcywgdHlwZV0gOiB0eXBlcztcbiAgICAgICAgfSwgW10pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdHlwZXMubGVuZ3RoID4gMSA/IHR5cGVzIDogdHlwZXNbMF0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZExpdGVyYWwnICYmICF4LmRlc2NyaXB0aW9uKSkge1xuICAgICAgICAvLyBhbGwgb3B0aW9ucyBsaXRlcmFsc1xuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgeC5fZGVmLnZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgdHlwZV07XG4gICAgICAgICAgICAgICAgY2FzZSAnYmlnaW50JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdpbnRlZ2VyJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHguX2RlZi52YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCAnbnVsbCddO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW10pO1xuICAgICAgICBpZiAodHlwZXMubGVuZ3RoID09PSBvcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gYWxsIHRoZSBsaXRlcmFscyBhcmUgcHJpbWl0aXZlLCBhcyBmYXIgYXMgbnVsbCBjYW4gYmUgY29uc2lkZXJlZCBwcmltaXRpdmVcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVR5cGVzID0gdHlwZXMuZmlsdGVyKCh4LCBpLCBhKSA9PiBhLmluZGV4T2YoeCkgPT09IGkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlxdWVUeXBlcy5sZW5ndGggPiAxID8gdW5pcXVlVHlwZXMgOiB1bmlxdWVUeXBlc1swXSxcbiAgICAgICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2MuaW5jbHVkZXMoeC5fZGVmLnZhbHVlKSA/IGFjYyA6IFsuLi5hY2MsIHguX2RlZi52YWx1ZV07XG4gICAgICAgICAgICAgICAgfSwgW10pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zLmV2ZXJ5KCh4KSA9PiB4Ll9kZWYudHlwZU5hbWUgPT09ICdab2RFbnVtJykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgZW51bTogb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4gWy4uLmFjYywgLi4ueC5fZGVmLnZhbHVlcy5maWx0ZXIoKHgpID0+ICFhY2MuaW5jbHVkZXMoeCkpXSwgW10pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xufVxuY29uc3QgYXNBbnlPZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCBhbnlPZiA9IChkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnMpXG4gICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsIGAke2l9YF0sXG4gICAgfSkpXG4gICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCAmJiAoIXJlZnMuc3RyaWN0VW5pb25zIHx8ICh0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoeCkubGVuZ3RoID4gMCkpKTtcbiAgICByZXR1cm4gYW55T2YubGVuZ3RoID8geyBhbnlPZiB9IDogdW5kZWZpbmVkO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IHByaW1pdGl2ZU1hcHBpbmdzIH0gZnJvbSBcIi4vdW5pb24ubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAoWydab2RTdHJpbmcnLCAnWm9kTnVtYmVyJywgJ1pvZEJpZ0ludCcsICdab2RCb29sZWFuJywgJ1pvZE51bGwnXS5pbmNsdWRlcyhkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWUpICYmXG4gICAgICAgICghZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcyB8fCAhZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcy5sZW5ndGgpKSB7XG4gICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJyB8fCByZWZzLm51bGxhYmxlU3RyYXRlZ3kgPT09ICdwcm9wZXJ0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogcHJpbWl0aXZlTWFwcGluZ3NbZGVmLmlubmVyVHlwZS5fZGVmLnR5cGVOYW1lXSxcbiAgICAgICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFtwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLCAnbnVsbCddLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aF0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYmFzZSAmJiAnJHJlZicgaW4gYmFzZSlcbiAgICAgICAgICAgIHJldHVybiB7IGFsbE9mOiBbYmFzZV0sIG51bGxhYmxlOiB0cnVlIH07XG4gICAgICAgIHJldHVybiBiYXNlICYmIHsgLi4uYmFzZSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgYmFzZSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsICcwJ10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGJhc2UgJiYgeyBhbnlPZjogW2Jhc2UsIHsgdHlwZTogJ251bGwnIH1dIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udWxsYWJsZS5tanMubWFwIiwiaW1wb3J0IHsgYWRkRXJyb3JNZXNzYWdlLCBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VOdW1iZXJEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICB9O1xuICAgIGlmICghZGVmLmNoZWNrcylcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdpbnQnOlxuICAgICAgICAgICAgICAgIHJlcy50eXBlID0gJ2ludGVnZXInO1xuICAgICAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZShyZXMsICd0eXBlJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWE3Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2V4Y2x1c2l2ZU1pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5pbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbXVsdGlwbGVPZic6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtdWx0aXBsZU9mJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udW1iZXIubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZnVuY3Rpb24gZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMucmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5ID09PSAnc3RyaWN0Jykge1xuICAgICAgICByZXR1cm4gZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgPT09ICdab2ROZXZlcicgP1xuICAgICAgICAgICAgZGVmLnVua25vd25LZXlzICE9PSAnc3RyaWN0J1xuICAgICAgICAgICAgOiBwYXJzZURlZihkZWYuY2F0Y2hhbGwuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgICAgIH0pID8/IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgPT09ICdab2ROZXZlcicgP1xuICAgICAgICAgICAgZGVmLnVua25vd25LZXlzID09PSAncGFzc3Rocm91Z2gnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgLi4uT2JqZWN0LmVudHJpZXMoZGVmLnNoYXBlKCkpLnJlZHVjZSgoYWNjLCBbcHJvcE5hbWUsIHByb3BEZWZdKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcERlZiA9PT0gdW5kZWZpbmVkIHx8IHByb3BEZWYuX2RlZiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVBhdGggPSBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ3Byb3BlcnRpZXMnLCBwcm9wTmFtZV07XG4gICAgICAgICAgICBjb25zdCBwYXJzZWREZWYgPSBwYXJzZURlZihwcm9wRGVmLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICAgICAgcHJvcGVydHlQYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocGFyc2VkRGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGlmIChyZWZzLm9wZW5haVN0cmljdE1vZGUgJiZcbiAgICAgICAgICAgICAgICBwcm9wRGVmLmlzT3B0aW9uYWwoKSAmJlxuICAgICAgICAgICAgICAgICFwcm9wRGVmLmlzTnVsbGFibGUoKSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBwcm9wRGVmLl9kZWY/LmRlZmF1bHRWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFpvZCBmaWVsZCBhdCBcXGAke3Byb3BlcnR5UGF0aC5qb2luKCcvJyl9XFxgIHVzZXMgXFxgLm9wdGlvbmFsKClcXGAgd2l0aG91dCBcXGAubnVsbGFibGUoKVxcYCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBUEkuIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL3N0cnVjdHVyZWQtb3V0cHV0cz9hcGktbW9kZT1yZXNwb25zZXMjYWxsLWZpZWxkcy1tdXN0LWJlLXJlcXVpcmVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYWNjLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIFtwcm9wTmFtZV06IHBhcnNlZERlZixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBwcm9wRGVmLmlzT3B0aW9uYWwoKSAmJiAhcmVmcy5vcGVuYWlTdHJpY3RNb2RlID8gYWNjLnJlcXVpcmVkIDogWy4uLmFjYy5yZXF1aXJlZCwgcHJvcE5hbWVdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwgeyBwcm9wZXJ0aWVzOiB7fSwgcmVxdWlyZWQ6IFtdIH0pLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMoZGVmLCByZWZzKSxcbiAgICB9O1xuICAgIGlmICghcmVzdWx0LnJlcXVpcmVkLmxlbmd0aClcbiAgICAgICAgZGVsZXRlIHJlc3VsdC5yZXF1aXJlZDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqZWN0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZU9wdGlvbmFsRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnByb3BlcnR5UGF0aCAmJlxuICAgICAgICByZWZzLmN1cnJlbnRQYXRoLnNsaWNlKDAsIHJlZnMucHJvcGVydHlQYXRoLmxlbmd0aCkudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGgudG9TdHJpbmcoKSkge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7IC4uLnJlZnMsIGN1cnJlbnRQYXRoOiByZWZzLmN1cnJlbnRQYXRoIH0pO1xuICAgIH1cbiAgICBjb25zdCBpbm5lclNjaGVtYSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsICcxJ10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGlubmVyU2NoZW1hID9cbiAgICAgICAge1xuICAgICAgICAgICAgYW55T2Y6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5vdDoge30sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbm5lclNjaGVtYSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH1cbiAgICAgICAgOiB7fTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcHRpb25hbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcGFyc2VQaXBlbGluZURlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBpZiAocmVmcy5waXBlU3RyYXRlZ3kgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbi5fZGVmLCByZWZzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVmcy5waXBlU3RyYXRlZ3kgPT09ICdvdXRwdXQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBhID0gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgIH0pO1xuICAgIGNvbnN0IGIgPSBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCBhID8gJzEnIDogJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhbGxPZjogW2EsIGJdLmZpbHRlcigoeCkgPT4geCAhPT0gdW5kZWZpbmVkKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcGVsaW5lLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVByb21pc2VEZWYoZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvbWlzZS5tanMubWFwIiwiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZXREZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnXSxcbiAgICB9KTtcbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIHVuaXF1ZUl0ZW1zOiB0cnVlLFxuICAgICAgICBpdGVtcyxcbiAgICB9O1xuICAgIGlmIChkZWYubWluU2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21pbkl0ZW1zJywgZGVmLm1pblNpemUudmFsdWUsIGRlZi5taW5TaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1heFNpemUpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdtYXhJdGVtcycsIGRlZi5tYXhTaXplLnZhbHVlLCBkZWYubWF4U2l6ZS5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGl0ZW1zOiBkZWYuaXRlbXNcbiAgICAgICAgICAgICAgICAubWFwKCh4LCBpKSA9PiBwYXJzZURlZih4Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgYCR7aX1gXSxcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgeCkgPT4gKHggPT09IHVuZGVmaW5lZCA/IGFjYyA6IFsuLi5hY2MsIHhdKSwgW10pLFxuICAgICAgICAgICAgYWRkaXRpb25hbEl0ZW1zOiBwYXJzZURlZihkZWYucmVzdC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsSXRlbXMnXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIG1heEl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHVwbGUubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZVVuZGVmaW5lZERlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3Q6IHt9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmRlZmluZWQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZVVua25vd25EZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5rbm93bi5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcGFyc2VSZWFkb25seURlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCByZWZzKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFkb25seS5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hbnkubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUFycmF5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hcnJheS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQmlnaW50RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9iaWdpbnQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUJvb2xlYW5EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2Jvb2xlYW4ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUJyYW5kZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JyYW5kZWQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUNhdGNoRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9jYXRjaC5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGF0ZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmYXVsdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGVmYXVsdC5tanNcIjtcbmltcG9ydCB7IHBhcnNlRWZmZWN0c0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvZWZmZWN0cy5tanNcIjtcbmltcG9ydCB7IHBhcnNlRW51bURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZW51bS5tanNcIjtcbmltcG9ydCB7IHBhcnNlSW50ZXJzZWN0aW9uRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUxpdGVyYWxEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2xpdGVyYWwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU1hcERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbWFwLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOYXRpdmVFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uYXRpdmVFbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOZXZlckRlZiB9IGZyb20gXCIuL3BhcnNlcnMvbmV2ZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU51bGxEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU51bGxhYmxlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udWxsYWJsZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVtYmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udW1iZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9iamVjdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvb2JqZWN0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VPcHRpb25hbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvb3B0aW9uYWwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVBpcGVsaW5lRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9waXBlbGluZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUHJvbWlzZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcHJvbWlzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVjb3JkRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWNvcmQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVNldERlZiB9IGZyb20gXCIuL3BhcnNlcnMvc2V0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdHJpbmdEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3N0cmluZy5tanNcIjtcbmltcG9ydCB7IHBhcnNlVHVwbGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3R1cGxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmRlZmluZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3VuZGVmaW5lZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlVW5pb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3VuaW9uLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmtub3duRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy91bmtub3duLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFkb25seURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcmVhZG9ubHkubWpzXCI7XG5pbXBvcnQgeyBpZ25vcmVPdmVycmlkZSB9IGZyb20gXCIuL09wdGlvbnMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24gPSBmYWxzZSkge1xuICAgIGNvbnN0IHNlZW5JdGVtID0gcmVmcy5zZWVuLmdldChkZWYpO1xuICAgIGlmIChyZWZzLm92ZXJyaWRlKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlUmVzdWx0ID0gcmVmcy5vdmVycmlkZT8uKGRlZiwgcmVmcywgc2Vlbkl0ZW0sIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGlmIChvdmVycmlkZVJlc3VsdCAhPT0gaWdub3JlT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvdmVycmlkZVJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2Vlbkl0ZW0gJiYgIWZvcmNlUmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCBzZWVuU2NoZW1hID0gZ2V0JHJlZihzZWVuSXRlbSwgcmVmcyk7XG4gICAgICAgIGlmIChzZWVuU2NoZW1hICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICgnJHJlZicgaW4gc2VlblNjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJlZnMuc2VlblJlZnMuYWRkKHNlZW5TY2hlbWEuJHJlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VlblNjaGVtYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXdJdGVtID0geyBkZWYsIHBhdGg6IHJlZnMuY3VycmVudFBhdGgsIGpzb25TY2hlbWE6IHVuZGVmaW5lZCB9O1xuICAgIHJlZnMuc2Vlbi5zZXQoZGVmLCBuZXdJdGVtKTtcbiAgICBjb25zdCBqc29uU2NoZW1hID0gc2VsZWN0UGFyc2VyKGRlZiwgZGVmLnR5cGVOYW1lLCByZWZzLCBmb3JjZVJlc29sdXRpb24pO1xuICAgIGlmIChqc29uU2NoZW1hKSB7XG4gICAgICAgIGFkZE1ldGEoZGVmLCByZWZzLCBqc29uU2NoZW1hKTtcbiAgICB9XG4gICAgbmV3SXRlbS5qc29uU2NoZW1hID0ganNvblNjaGVtYTtcbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn1cbmNvbnN0IGdldCRyZWYgPSAoaXRlbSwgcmVmcykgPT4ge1xuICAgIHN3aXRjaCAocmVmcy4kcmVmU3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAncm9vdCc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBpdGVtLnBhdGguam9pbignLycpIH07XG4gICAgICAgIC8vIHRoaXMgY2FzZSBpcyBuZWVkZWQgYXMgT3BlbkFJIHN0cmljdCBtb2RlIGRvZXNuJ3Qgc3VwcG9ydCB0b3AtbGV2ZWwgYCRyZWZgcywgaS5lLlxuICAgICAgICAvLyB0aGUgdG9wLWxldmVsIHNjaGVtYSAqbXVzdCogYmUgYHtcInR5cGVcIjogXCJvYmplY3RcIiwgXCJwcm9wZXJ0aWVzXCI6IHsuLi59fWAgYnV0IGlmIHdlIGV2ZXJcbiAgICAgICAgLy8gbmVlZCB0byBkZWZpbmUgYSBgJHJlZmAsIHJlbGF0aXZlIGAkcmVmYHMgYXJlbid0IHN1cHBvcnRlZCwgc28gd2UgbmVlZCB0byBleHRyYWN0XG4gICAgICAgIC8vIHRoZSBzY2hlbWEgdG8gYCMvZGVmaW5pdGlvbnMvYCBhbmQgcmVmZXJlbmNlIHRoYXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGUuZy4gaWYgd2UgbmVlZCB0byByZWZlcmVuY2UgYSBzY2hlbWEgYXRcbiAgICAgICAgLy8gYFtcIiNcIixcImRlZmluaXRpb25zXCIsXCJjb250YWN0UGVyc29uXCIsXCJwcm9wZXJ0aWVzXCIsXCJwZXJzb24xXCIsXCJwcm9wZXJ0aWVzXCIsXCJuYW1lXCJdYFxuICAgICAgICAvLyB0aGVuIHdlJ2xsIGV4dHJhY3QgaXQgb3V0IHRvIGBjb250YWN0UGVyc29uX3Byb3BlcnRpZXNfcGVyc29uMV9wcm9wZXJ0aWVzX25hbWVgXG4gICAgICAgIGNhc2UgJ2V4dHJhY3QtdG8tcm9vdCc6XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gaXRlbS5wYXRoLnNsaWNlKHJlZnMuYmFzZVBhdGgubGVuZ3RoICsgMSkuam9pbignXycpO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBleHRyYWN0IHRoZSByb290IHNjaGVtYSBpbiB0aGlzIGNhc2UsIGFzIGl0J3MgYWxyZWFkeVxuICAgICAgICAgICAgLy8gYmVlbiBhZGRlZCB0byB0aGUgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSByZWZzLm5hbWUgJiYgcmVmcy5uYW1lU3RyYXRlZ3kgPT09ICdkdXBsaWNhdGUtcmVmJykge1xuICAgICAgICAgICAgICAgIHJlZnMuZGVmaW5pdGlvbnNbbmFtZV0gPSBpdGVtLmRlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXS5qb2luKCcvJykgfTtcbiAgICAgICAgY2FzZSAncmVsYXRpdmUnOlxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogZ2V0UmVsYXRpdmVQYXRoKHJlZnMuY3VycmVudFBhdGgsIGl0ZW0ucGF0aCkgfTtcbiAgICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgIGNhc2UgJ3NlZW4nOiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5wYXRoLmxlbmd0aCA8IHJlZnMuY3VycmVudFBhdGgubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgaXRlbS5wYXRoLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHJlZnMuY3VycmVudFBhdGhbaW5kZXhdID09PSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlY3Vyc2l2ZSByZWZlcmVuY2UgZGV0ZWN0ZWQgYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0hIERlZmF1bHRpbmcgdG8gYW55YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlZnMuJHJlZlN0cmF0ZWd5ID09PSAnc2VlbicgPyB7fSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBnZXRSZWxhdGl2ZVBhdGggPSAocGF0aEEsIHBhdGhCKSA9PiB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoOyBpIDwgcGF0aEEubGVuZ3RoICYmIGkgPCBwYXRoQi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocGF0aEFbaV0gIT09IHBhdGhCW2ldKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBbKHBhdGhBLmxlbmd0aCAtIGkpLnRvU3RyaW5nKCksIC4uLnBhdGhCLnNsaWNlKGkpXS5qb2luKCcvJyk7XG59O1xuY29uc3Qgc2VsZWN0UGFyc2VyID0gKGRlZiwgdHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgPT4ge1xuICAgIHN3aXRjaCAodHlwZU5hbWUpIHtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlU3RyaW5nRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3Q6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQmlnaW50RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW46XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCb29sZWFuRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuZGVmaW5lZDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVVuZGVmaW5lZERlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVsbERlZihyZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQXJyYXk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFR1cGxlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVHVwbGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUmVjb3JkRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExpdGVyYWw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW06XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VFbnVtRGVmKGRlZik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW06XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOYXRpdmVFbnVtRGVmKGRlZik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVsbGFibGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VPcHRpb25hbERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXA6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VNYXBEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlU2V0RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmdldHRlcigpLl9kZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU46XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTmV2ZXJEZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0czpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVmZmVjdHNEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBbnk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VBbnlEZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVVua25vd25EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZmF1bHREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJyYW5kZWREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVhZG9ubHk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWFkb25seURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUNhdGNoRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUGlwZWxpbmVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb246XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQ6XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN5bWJvbDpcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gKChfKSA9PiB1bmRlZmluZWQpKHR5cGVOYW1lKTtcbiAgICB9XG59O1xuY29uc3QgYWRkTWV0YSA9IChkZWYsIHJlZnMsIGpzb25TY2hlbWEpID0+IHtcbiAgICBpZiAoZGVmLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGpzb25TY2hlbWEuZGVzY3JpcHRpb24gPSBkZWYuZGVzY3JpcHRpb247XG4gICAgICAgIGlmIChyZWZzLm1hcmtkb3duRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGpzb25TY2hlbWEubWFya2Rvd25EZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZURlZi5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IGdldFJlZnMgfSBmcm9tIFwiLi9SZWZzLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmLCBpc0VtcHR5T2JqIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmNvbnN0IHpvZFRvSnNvblNjaGVtYSA9IChzY2hlbWEsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCByZWZzID0gZ2V0UmVmcyhvcHRpb25zKTtcbiAgICBjb25zdCBuYW1lID0gdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID8gb3B0aW9uc1xuICAgICAgICA6IG9wdGlvbnM/Lm5hbWVTdHJhdGVneSA9PT0gJ3RpdGxlJyA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgOiBvcHRpb25zPy5uYW1lO1xuICAgIGNvbnN0IG1haW4gPSBwYXJzZURlZihzY2hlbWEuX2RlZiwgbmFtZSA9PT0gdW5kZWZpbmVkID8gcmVmcyA6ICh7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5iYXNlUGF0aCwgcmVmcy5kZWZpbml0aW9uUGF0aCwgbmFtZV0sXG4gICAgfSksIGZhbHNlKSA/PyB7fTtcbiAgICBjb25zdCB0aXRsZSA9IHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JyAmJiBvcHRpb25zLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm5hbWVTdHJhdGVneSA9PT0gJ3RpdGxlJyA/XG4gICAgICAgIG9wdGlvbnMubmFtZVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtYWluLnRpdGxlID0gdGl0bGU7XG4gICAgfVxuICAgIGNvbnN0IGRlZmluaXRpb25zID0gKCgpID0+IHtcbiAgICAgICAgaWYgKGlzRW1wdHlPYmoocmVmcy5kZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbnMgPSB7fTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkRGVmaW5pdGlvbnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8vIHRoZSBjYWxsIHRvIGBwYXJzZURlZigpYCBoZXJlIG1pZ2h0IGl0c2VsZiBhZGQgbW9yZSBlbnRyaWVzIHRvIGAuZGVmaW5pdGlvbnNgXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY29udGludWFsbHkgZXZhbHVhdGUgZGVmaW5pdGlvbnMgdW50aWwgd2UndmUgcmVzb2x2ZWQgYWxsIG9mIHRoZW1cbiAgICAgICAgLy9cbiAgICAgICAgLy8gd2UgaGF2ZSBhIGdlbmVyb3VzIGl0ZXJhdGlvbiBsaW1pdCBoZXJlIHRvIGF2b2lkIGJsb3dpbmcgdXAgdGhlIHN0YWNrIGlmIHRoZXJlXG4gICAgICAgIC8vIGFyZSBhbnkgYnVncyB0aGF0IHdvdWxkIG90aGVyd2lzZSByZXN1bHQgaW4gdXMgaXRlcmF0aW5nIGluZGVmaW5pdGVseVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwMDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdEZWZpbml0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHJlZnMuZGVmaW5pdGlvbnMpLmZpbHRlcigoW2tleV0pID0+ICFwcm9jZXNzZWREZWZpbml0aW9ucy5oYXMoa2V5KSk7XG4gICAgICAgICAgICBpZiAobmV3RGVmaW5pdGlvbnMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBzY2hlbWFdIG9mIG5ld0RlZmluaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbnNba2V5XSA9XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRGVmKHpvZERlZihzY2hlbWEpLCB7IC4uLnJlZnMsIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5iYXNlUGF0aCwgcmVmcy5kZWZpbml0aW9uUGF0aCwga2V5XSB9LCB0cnVlKSA/PyB7fTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWREZWZpbml0aW9ucy5hZGQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbnM7XG4gICAgfSkoKTtcbiAgICBjb25zdCBjb21iaW5lZCA9IG5hbWUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgIGRlZmluaXRpb25zID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5tYWluLFxuICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXTogZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IG1haW5cbiAgICAgICAgOiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5tYWluLFxuICAgICAgICAgICAgICAgIC4uLihkZWZpbml0aW9ucyB8fCByZWZzLnNlZW5SZWZzLnNpemUgP1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kZWZpbml0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFjdHVhbGx5IGR1cGxpY2F0ZSB0aGUgc2NoZW1hIGRlZmluaXRpb24gaWYgaXQgd2FzIGV2ZXIgcmVmZXJlbmNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB0aGUgZHVwbGljYXRpb24gaXMgY29tcGxldGVseSBwb2ludGxlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4ocmVmcy5zZWVuUmVmcy5zaXplID8geyBbbmFtZV06IG1haW4gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICRyZWY6IFsuLi4ocmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdyZWxhdGl2ZScgPyBbXSA6IHJlZnMuYmFzZVBhdGgpLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXS5qb2luKCcvJyksXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBbbmFtZV06IG1haW4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgIGNvbWJpbmVkLiRzY2hlbWEgPSAnaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjJztcbiAgICB9XG4gICAgZWxzZSBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hMjAxOS0wOScpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwczovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC8yMDE5LTA5L3NjaGVtYSMnO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZWQ7XG59O1xuZXhwb3J0IHsgem9kVG9Kc29uU2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2RUb0pzb25TY2hlbWEubWpzLm1hcCIsImltcG9ydCB7IE9wZW5BSUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLm1qc1wiO1xuaW1wb3J0IHsgaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdCB9IGZyb20gXCIuLi9saWIvcGFyc2VyLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgIWhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5yZXNwb25zZSxcbiAgICAgICAgICAgIG91dHB1dF9wYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcykge1xuICAgIGNvbnN0IG91dHB1dCA9IHJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogcGFyc2VUb29sQ2FsbChwYXJhbXMsIGl0ZW0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBpdGVtLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZDogcGFyc2VUZXh0Rm9ybWF0KHBhcmFtcywgY29udGVudC50ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9KTtcbiAgICBjb25zdCBwYXJzZWQgPSBPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZSwgeyBvdXRwdXQgfSk7XG4gICAgaWYgKCFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHJlc3BvbnNlLCAnb3V0cHV0X3RleHQnKSkge1xuICAgICAgICBhZGRPdXRwdXRUZXh0KHBhcnNlZCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJzZWQsICdvdXRwdXRfcGFyc2VkJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBwYXJzZWQub3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnICYmIGNvbnRlbnQucGFyc2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudC5wYXJzZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyc2VkO1xufVxuZnVuY3Rpb24gcGFyc2VUZXh0Rm9ybWF0KHBhcmFtcywgY29udGVudCkge1xuICAgIGlmIChwYXJhbXMudGV4dD8uZm9ybWF0Py50eXBlICE9PSAnanNvbl9zY2hlbWEnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoJyRwYXJzZVJhdycgaW4gcGFyYW1zLnRleHQ/LmZvcm1hdCkge1xuICAgICAgICBjb25zdCB0ZXh0X2Zvcm1hdCA9IHBhcmFtcy50ZXh0Py5mb3JtYXQ7XG4gICAgICAgIHJldHVybiB0ZXh0X2Zvcm1hdC4kcGFyc2VSYXcoY29udGVudCk7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGNvbnRlbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMudGV4dD8uZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wodG9vbCwgeyBwYXJzZXIsIGNhbGxiYWNrLCB9KSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi50b29sIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS10b29sJyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJGNhbGxiYWNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2ssXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2w/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS10b29sJztcbn1cbmZ1bmN0aW9uIGdldElucHV0VG9vbEJ5TmFtZShpbnB1dF90b29scywgbmFtZSkge1xuICAgIHJldHVybiBpbnB1dF90b29scy5maW5kKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiYgdG9vbC5uYW1lID09PSBuYW1lKTtcbn1cbmZ1bmN0aW9uIHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGlucHV0VG9vbCA9IGdldElucHV0VG9vbEJ5TmFtZShwYXJhbXMudG9vbHMgPz8gW10sIHRvb2xDYWxsLm5hbWUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmFyZ3VtZW50cylcbiAgICAgICAgICAgIDogaW5wdXRUb29sPy5zdHJpY3QgPyBKU09OLnBhcnNlKHRvb2xDYWxsLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRQYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGlucHV0VG9vbCA9IGdldElucHV0VG9vbEJ5TmFtZShwYXJhbXMudG9vbHMgPz8gW10sIHRvb2xDYWxsLm5hbWUpO1xuICAgIHJldHVybiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSB8fCBpbnB1dFRvb2w/LnN0cmljdCB8fCBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUlucHV0VG9vbHModG9vbHMpIHtcbiAgICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMgPz8gW10pIHtcbiAgICAgICAgaWYgKHRvb2wudHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBDdXJyZW50bHkgb25seSBcXGBmdW5jdGlvblxcYCB0b29sIHR5cGVzIHN1cHBvcnQgYXV0by1wYXJzaW5nOyBSZWNlaXZlZCBcXGAke3Rvb2wudHlwZX1cXGBgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9vbC5mdW5jdGlvbi5zdHJpY3QgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgVGhlIFxcYCR7dG9vbC5mdW5jdGlvbi5uYW1lfVxcYCB0b29sIGlzIG5vdCBtYXJrZWQgd2l0aCBcXGBzdHJpY3Q6IHRydWVcXGAuIE9ubHkgc3RyaWN0IGZ1bmN0aW9uIHRvb2xzIGNhbiBiZSBhdXRvLXBhcnNlZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZE91dHB1dFRleHQocnNwKSB7XG4gICAgY29uc3QgdGV4dHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiByc3Aub3V0cHV0KSB7XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNvbnRlbnQgb2Ygb3V0cHV0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICB0ZXh0cy5wdXNoKGNvbnRlbnQudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcnNwLm91dHB1dF90ZXh0ID0gdGV4dHMuam9pbignJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXNwb25zZXNQYXJzZXIubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiB0b1N0cmljdEpzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYS50eXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJvb3Qgc2NoZW1hIG11c3QgaGF2ZSB0eXBlOiAnb2JqZWN0JyBidXQgZ290IHR5cGU6ICR7c2NoZW1hLnR5cGUgPyBgJyR7c2NoZW1hLnR5cGV9J2AgOiAndW5kZWZpbmVkJ31gKTtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hQ29weSA9IHN0cnVjdHVyZWRDbG9uZShzY2hlbWEpO1xuICAgIHJldHVybiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYUNvcHksIFtdLCBzY2hlbWFDb3B5KTtcbn1cbmZ1bmN0aW9uIGlzTnVsbGFibGUoc2NoZW1hKSB7XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEgPT09ICdib29sZWFuJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzY2hlbWEudHlwZSA9PT0gJ251bGwnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG9uZU9mVmFyaWFudCBvZiBzY2hlbWEub25lT2YgPz8gW10pIHtcbiAgICAgICAgaWYgKGlzTnVsbGFibGUob25lT2ZWYXJpYW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBhbGxPZlZhcmlhbnQgb2Ygc2NoZW1hLmFueU9mID8/IFtdKSB7XG4gICAgICAgIGlmIChpc051bGxhYmxlKGFsbE9mVmFyaWFudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogTXV0YXRlcyB0aGUgZ2l2ZW4gSlNPTiBzY2hlbWEgdG8gZW5zdXJlIGl0IGNvbmZvcm1zIHRvIHRoZSBgc3RyaWN0YCBzdGFuZGFyZFxuICogdGhhdCB0aGUgQVBJIGV4cGVjdHMuXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoanNvblNjaGVtYSwgcGF0aCwgcm9vdCkge1xuICAgIGlmICh0eXBlb2YganNvblNjaGVtYSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIG9iamVjdCBzY2hlbWEgYnV0IGdvdCBib29sZWFuOyBwYXRoPSR7cGF0aC5qb2luKCcvJyl9YCk7XG4gICAgfVxuICAgIGlmICghaXNPYmplY3QoanNvblNjaGVtYSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShqc29uU2NoZW1hKX0gdG8gYmUgYW4gb2JqZWN0OyBwYXRoPSR7cGF0aC5qb2luKCcvJyl9YCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSAkZGVmcyAobm9uLXN0YW5kYXJkIGJ1dCBzb21ldGltZXMgdXNlZClcbiAgICBjb25zdCBkZWZzID0ganNvblNjaGVtYS4kZGVmcztcbiAgICBpZiAoaXNPYmplY3QoZGVmcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbZGVmTmFtZSwgZGVmU2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhkZWZzKSkge1xuICAgICAgICAgICAgZW5zdXJlU3RyaWN0SnNvblNjaGVtYShkZWZTY2hlbWEsIFsuLi5wYXRoLCAnJGRlZnMnLCBkZWZOYW1lXSwgcm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSGFuZGxlIGRlZmluaXRpb25zIChkcmFmdC0wNCBzdHlsZSwgZGVwcmVjYXRlZCBpbiBkcmFmdC0wNyBidXQgc3RpbGwgdXNlZClcbiAgICBjb25zdCBkZWZpbml0aW9ucyA9IGpzb25TY2hlbWEuZGVmaW5pdGlvbnM7XG4gICAgaWYgKGlzT2JqZWN0KGRlZmluaXRpb25zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtkZWZpbml0aW9uTmFtZSwgZGVmaW5pdGlvblNjaGVtYV0gb2YgT2JqZWN0LmVudHJpZXMoZGVmaW5pdGlvbnMpKSB7XG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGRlZmluaXRpb25TY2hlbWEsIFsuLi5wYXRoLCAnZGVmaW5pdGlvbnMnLCBkZWZpbml0aW9uTmFtZV0sIHJvb3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFkZCBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UgdG8gb2JqZWN0IHR5cGVzXG4gICAgY29uc3QgdHlwID0ganNvblNjaGVtYS50eXBlO1xuICAgIGlmICh0eXAgPT09ICdvYmplY3QnICYmICEoJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJyBpbiBqc29uU2NoZW1hKSkge1xuICAgICAgICBqc29uU2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVpcmVkID0ganNvblNjaGVtYS5yZXF1aXJlZCA/PyBbXTtcbiAgICAvLyBIYW5kbGUgb2JqZWN0IHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ganNvblNjaGVtYS5wcm9wZXJ0aWVzO1xuICAgIGlmIChpc09iamVjdChwcm9wZXJ0aWVzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgaWYgKCFpc051bGxhYmxlKHZhbHVlKSAmJiAhcmVxdWlyZWQuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7Wy4uLnBhdGgsICdwcm9wZXJ0aWVzJywga2V5XS5qb2luKCcvJyl9XFxgIHVzZXMgXFxgLm9wdGlvbmFsKClcXGAgd2l0aG91dCBcXGAubnVsbGFibGUoKVxcYCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBUEkuIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL3N0cnVjdHVyZWQtb3V0cHV0cz9hcGktbW9kZT1yZXNwb25zZXMjYWxsLWZpZWxkcy1tdXN0LWJlLXJlcXVpcmVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAganNvblNjaGVtYS5yZXF1aXJlZCA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpO1xuICAgICAgICBqc29uU2NoZW1hLnByb3BlcnRpZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykubWFwKChba2V5LCBwcm9wU2NoZW1hXSkgPT4gW1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgZW5zdXJlU3RyaWN0SnNvblNjaGVtYShwcm9wU2NoZW1hLCBbLi4ucGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLCByb290KSxcbiAgICAgICAgXSkpO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgYXJyYXlzXG4gICAgY29uc3QgaXRlbXMgPSBqc29uU2NoZW1hLml0ZW1zO1xuICAgIGlmIChpc09iamVjdChpdGVtcykpIHtcbiAgICAgICAganNvblNjaGVtYS5pdGVtcyA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoaXRlbXMsIFsuLi5wYXRoLCAnaXRlbXMnXSwgcm9vdCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSB1bmlvbnMgKGFueU9mKVxuICAgIGNvbnN0IGFueU9mID0ganNvblNjaGVtYS5hbnlPZjtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhbnlPZikpIHtcbiAgICAgICAganNvblNjaGVtYS5hbnlPZiA9IGFueU9mLm1hcCgodmFyaWFudCwgaSkgPT4gZW5zdXJlU3RyaWN0SnNvblNjaGVtYSh2YXJpYW50LCBbLi4ucGF0aCwgJ2FueU9mJywgU3RyaW5nKGkpXSwgcm9vdCkpO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgaW50ZXJzZWN0aW9ucyAoYWxsT2YpXG4gICAgY29uc3QgYWxsT2YgPSBqc29uU2NoZW1hLmFsbE9mO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbE9mKSkge1xuICAgICAgICBpZiAoYWxsT2YubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlZCA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoYWxsT2ZbMF0sIFsuLi5wYXRoLCAnYWxsT2YnLCAnMCddLCByb290KTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvblNjaGVtYSwgcmVzb2x2ZWQpO1xuICAgICAgICAgICAgZGVsZXRlIGpzb25TY2hlbWEuYWxsT2Y7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqc29uU2NoZW1hLmFsbE9mID0gYWxsT2YubWFwKChlbnRyeSwgaSkgPT4gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShlbnRyeSwgWy4uLnBhdGgsICdhbGxPZicsIFN0cmluZyhpKV0sIHJvb3QpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTdHJpcCBgbnVsbGAgZGVmYXVsdHMgYXMgdGhlcmUncyBubyBtZWFuaW5nZnVsIGRpc3RpbmN0aW9uXG4gICAgaWYgKGpzb25TY2hlbWEuZGVmYXVsdCA9PT0gbnVsbCkge1xuICAgICAgICBkZWxldGUganNvblNjaGVtYS5kZWZhdWx0O1xuICAgIH1cbiAgICAvLyBIYW5kbGUgJHJlZiB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllc1xuICAgIGNvbnN0IHJlZiA9IGpzb25TY2hlbWEuJHJlZjtcbiAgICBpZiAocmVmICYmIGhhc01vcmVUaGFuTktleXMoanNvblNjaGVtYSwgMSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZWYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBSZWNlaXZlZCBub24tc3RyaW5nICRyZWYgLSAke3JlZn07IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNvbHZlZCA9IHJlc29sdmVSZWYocm9vdCwgcmVmKTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXNvbHZlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFxcYCRyZWY6ICR7cmVmfVxcYCB0byByZXNvbHZlIHRvIGFuIG9iamVjdCBzY2hlbWEgYnV0IGdvdCBib29sZWFuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc09iamVjdChyZXNvbHZlZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgXFxgJHJlZjogJHtyZWZ9XFxgIHRvIHJlc29sdmUgdG8gYW4gb2JqZWN0IGJ1dCBnb3QgJHtKU09OLnN0cmluZ2lmeShyZXNvbHZlZCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJvcGVydGllcyBmcm9tIHRoZSBqc29uIHNjaGVtYSB0YWtlIHByaW9yaXR5IG92ZXIgdGhlIG9uZXMgb24gdGhlIGAkcmVmYFxuICAgICAgICBPYmplY3QuYXNzaWduKGpzb25TY2hlbWEsIHsgLi4ucmVzb2x2ZWQsIC4uLmpzb25TY2hlbWEgfSk7XG4gICAgICAgIGRlbGV0ZSBqc29uU2NoZW1hLiRyZWY7XG4gICAgICAgIC8vIFNpbmNlIHRoZSBzY2hlbWEgZXhwYW5kZWQgZnJvbSBgJHJlZmAgbWlnaHQgbm90IGhhdmUgYGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZWAgYXBwbGllZCxcbiAgICAgICAgLy8gd2UgY2FsbCBgZW5zdXJlU3RyaWN0SnNvblNjaGVtYWAgYWdhaW4gdG8gZml4IHRoZSBpbmxpbmVkIHNjaGVtYSBhbmQgZW5zdXJlIGl0J3MgdmFsaWQuXG4gICAgICAgIHJldHVybiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGpzb25TY2hlbWEsIHBhdGgsIHJvb3QpO1xuICAgIH1cbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVSZWYocm9vdCwgcmVmKSB7XG4gICAgaWYgKCFyZWYuc3RhcnRzV2l0aCgnIy8nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgJHJlZiBmb3JtYXQgJHtKU09OLnN0cmluZ2lmeShyZWYpfTsgRG9lcyBub3Qgc3RhcnQgd2l0aCAjL2ApO1xuICAgIH1cbiAgICBjb25zdCBwYXRoUGFydHMgPSByZWYuc2xpY2UoMikuc3BsaXQoJy8nKTtcbiAgICBsZXQgcmVzb2x2ZWQgPSByb290O1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHBhdGhQYXJ0cykge1xuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc29sdmVkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBlbmNvdW50ZXJlZCBub24tb2JqZWN0IGVudHJ5IHdoaWxlIHJlc29sdmluZyAke3JlZn0gLSAke0pTT04uc3RyaW5naWZ5KHJlc29sdmVkKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJlc29sdmVkW2tleV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEtleSAke2tleX0gbm90IGZvdW5kIHdoaWxlIHJlc29sdmluZyAke3JlZn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlZCA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb2x2ZWQ7XG59XG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9iaik7XG59XG5mdW5jdGlvbiBoYXNNb3JlVGhhbk5LZXlzKG9iaiwgbikge1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IF8gaW4gb2JqKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgaWYgKGkgPiBuKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0ubWpzLm1hcCIsImltcG9ydCB7IHogYXMgejQgfSBmcm9tICd6b2QvdjQnO1xuaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0LCBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCwgbWFrZVBhcnNlYWJsZVRvb2wsIH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgYXMgX3pvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wgfSBmcm9tIFwiLi4vbGliL1Jlc3BvbnNlc1BhcnNlci5tanNcIjtcbmltcG9ydCB7IHRvU3RyaWN0SnNvblNjaGVtYSB9IGZyb20gXCIuLi9saWIvdHJhbnNmb3JtLm1qc1wiO1xuZnVuY3Rpb24gem9kVjNUb0pzb25TY2hlbWEoc2NoZW1hLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF96b2RUb0pzb25TY2hlbWEoc2NoZW1hLCB7XG4gICAgICAgIG9wZW5haVN0cmljdE1vZGU6IHRydWUsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgbmFtZVN0cmF0ZWd5OiAnZHVwbGljYXRlLXJlZicsXG4gICAgICAgICRyZWZTdHJhdGVneTogJ2V4dHJhY3QtdG8tcm9vdCcsXG4gICAgICAgIG51bGxhYmxlU3RyYXRlZ3k6ICdwcm9wZXJ0eScsXG4gICAgfSk7XG59XG5mdW5jdGlvbiB6b2RWNFRvSnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICByZXR1cm4gdG9TdHJpY3RKc29uU2NoZW1hKHo0LnRvSlNPTlNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgdGFyZ2V0OiAnZHJhZnQtNycsXG4gICAgfSkpO1xufVxuZnVuY3Rpb24gaXNab2RWNCh6b2RPYmplY3QpIHtcbiAgICByZXR1cm4gJ196b2QnIGluIHpvZE9iamVjdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgSlNPTlNjaGVtYWAgcmVzcG9uc2UgZm9ybWF0IG9iamVjdCBmcm9tXG4gKiB0aGUgZ2l2ZW4gWm9kIHNjaGVtYS5cbiAqXG4gKiBJZiB0aGlzIGlzIHBhc3NlZCB0byB0aGUgYC5wYXJzZSgpYCwgYC5zdHJlYW0oKWAgb3IgYC5ydW5Ub29scygpYFxuICogY2hhdCBjb21wbGV0aW9uIG1ldGhvZHMgdGhlbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSB3aWxsIGNvbnRhaW4gYVxuICogYC5wYXJzZWRgIHByb3BlcnR5IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSBjb250ZW50IHdpdGhcbiAqIHRoZSBnaXZlbiBab2Qgb2JqZWN0LlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMucGFyc2Uoe1xuICogICAgbW9kZWw6ICdncHQtNG8tMjAyNC0wOC0wNicsXG4gKiAgICBtZXNzYWdlczogW1xuICogICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgbWF0aCB0dXRvci4nIH0sXG4gKiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnc29sdmUgOHggKyAzMSA9IDInIH0sXG4gKiAgICBdLFxuICogICAgcmVzcG9uc2VfZm9ybWF0OiB6b2RSZXNwb25zZUZvcm1hdChcbiAqICAgICAgei5vYmplY3Qoe1xuICogICAgICAgIHN0ZXBzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAqICAgICAgICAgIGV4cGxhbmF0aW9uOiB6LnN0cmluZygpLFxuICogICAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICAgIH0pKSxcbiAqICAgICAgICBmaW5hbF9hbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgIH0pLFxuICogICAgICAnbWF0aF9hbnN3ZXInLFxuICogICAgKSxcbiAqICB9KTtcbiAqICBjb25zdCBtZXNzYWdlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlO1xuICogIGlmIChtZXNzYWdlPy5wYXJzZWQpIHtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkKTtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkLmZpbmFsX2Fuc3dlcik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIGAuY3JlYXRlKClgIG1ldGhvZCBidXQgd2lsbCBub3RcbiAqIHJlc3VsdCBpbiBhbnkgYXV0b21hdGljIHBhcnNpbmcsIHlvdSdsbCBoYXZlIHRvIHBhcnNlIHRoZSByZXNwb25zZSB5b3Vyc2VsZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlRm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjaGVtYTogaXNab2RWNCh6b2RPYmplY3QpID8gem9kVjRUb0pzb25TY2hlbWEoem9kT2JqZWN0KSA6IHpvZFYzVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgICAgICB9LFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFRleHRGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBuYW1lLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIHNjaGVtYTogaXNab2RWNCh6b2RPYmplY3QpID8gem9kVjRUb0pzb25TY2hlbWEoem9kT2JqZWN0KSA6IHpvZFYzVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBmdW5jdGlvbmAgdG9vbCB0aGF0IGNhbiBiZSBpbnZva2VkXG4gKiBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjaGF0IGNvbXBsZXRpb24gYC5ydW5Ub29scygpYCBtZXRob2Qgb3IgYXV0b21hdGljYWxseVxuICogcGFyc2VkIGJ5IGAucGFyc2UoKWAgLyBgLnN0cmVhbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZEZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE9cbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogaXNab2RWNChvcHRpb25zLnBhcmFtZXRlcnMpID9cbiAgICAgICAgICAgICAgICB6b2RWNFRvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgOiB6b2RWM1RvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMsIHsgbmFtZTogb3B0aW9ucy5uYW1lIH0pLFxuICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgICAgICB9LFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB6b2RSZXNwb25zZXNGdW5jdGlvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICAgIHBhcmFtZXRlcnM6IGlzWm9kVjQob3B0aW9ucy5wYXJhbWV0ZXJzKSA/XG4gICAgICAgICAgICB6b2RWNFRvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICA6IHpvZFYzVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZC5tanMubWFwIiwiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgZXJyb3JzIHRocm93biBieSB0aGUgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYXNab2RUeXBlKHNjaGVtYSkge1xuICAgIHJldHVybiBzY2hlbWE7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVhZFpvZERlZmluaXRpb24oaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbnB1dDtcbiAgICByZXR1cm4gY2FuZGlkYXRlLl96b2Q/LmRlZiB8fCBjYW5kaWRhdGUuX2RlZiB8fCBjYW5kaWRhdGUuZGVmO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRab2RUeXBlKGlucHV0KSB7XG4gICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oaW5wdXQpO1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJhd1R5cGUgPSAodHlwZW9mIGRlZi50eXBlTmFtZSA9PT0gJ3N0cmluZycgJiYgZGVmLnR5cGVOYW1lKSB8fFxuICAgICAgICAodHlwZW9mIGRlZi50eXBlID09PSAnc3RyaW5nJyAmJiBkZWYudHlwZSk7XG4gICAgaWYgKHR5cGVvZiByYXdUeXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsb3dlciA9IHJhd1R5cGUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbG93ZXIuc3RhcnRzV2l0aCgnem9kJykgPyBsb3dlci5zbGljZSgzKSA6IGxvd2VyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kQ29tcGF0Lm1qcy5tYXAiLCJpbXBvcnQgeyByZWFkWm9kRGVmaW5pdGlvbiwgcmVhZFpvZFR5cGUgfSBmcm9tIFwiLi96b2RDb21wYXQubWpzXCI7XG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IHJlYWRab2REZWZpbml0aW9uKGlucHV0KTtcbiAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gcmVhZFpvZFR5cGUoaW5wdXQpO1xuICAgIHJldHVybiB0eXBlID09PSAnb2JqZWN0Jztcbn1cbi8qKlxuICogVmVyaWZpZXMgdGhhdCBhbiBpbnB1dCBpcyBhbiBvYmplY3Qgd2l0aCBhbiBgaW5wdXRgIHByb3BlcnR5LlxuICogQHBhcmFtIGlucHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZ2VudFRvb2xJbnB1dChpbnB1dCkge1xuICAgIHJldHVybiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbnB1dCAhPT0gbnVsbCAmJlxuICAgICAgICAnaW5wdXQnIGluIGlucHV0ICYmXG4gICAgICAgIHR5cGVvZiBpbnB1dC5pbnB1dCA9PT0gJ3N0cmluZycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZUd1YXJkcy5tanMubWFwIiwiaW1wb3J0IHsgcmVhZFpvZERlZmluaXRpb24sIHJlYWRab2RUeXBlIH0gZnJvbSBcIi4vem9kQ29tcGF0Lm1qc1wiO1xuY29uc3QgSlNPTl9TQ0hFTUFfRFJBRlRfMDcgPSAnaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjJztcbmNvbnN0IE9QVElPTkFMX1dSQVBQRVJTID0gbmV3IFNldChbJ29wdGlvbmFsJ10pO1xuY29uc3QgREVDT1JBVE9SX1dSQVBQRVJTID0gbmV3IFNldChbXG4gICAgJ2JyYW5kJyxcbiAgICAnYnJhbmRlZCcsXG4gICAgJ2NhdGNoJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2VmZmVjdHMnLFxuICAgICdwaXBlbGluZScsXG4gICAgJ3BpcGUnLFxuICAgICdwcmVmYXVsdCcsXG4gICAgJ3JlYWRvbmx5JyxcbiAgICAncmVmaW5lbWVudCcsXG4gICAgJ3RyYW5zZm9ybScsXG5dKTtcbi8vIFByaW1pdGl2ZSBsZWFmIG5vZGVzIG1hcCAxOjEgdG8gSlNPTiBTY2hlbWEgdHlwZXM7IGV2ZXJ5dGhpbmcgZWxzZSBpcyBoYW5kbGVkXG4vLyBieSB0aGUgc3BlY2lhbGlzZWQgYnVpbGRlcnMgZnVydGhlciBkb3duLlxuY29uc3QgU0lNUExFX1RZUEVfTUFQUElORyA9IHtcbiAgICBzdHJpbmc6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICBudW1iZXI6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICBiaWdpbnQ6IHsgdHlwZTogJ2ludGVnZXInIH0sXG4gICAgYm9vbGVhbjogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICBkYXRlOiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlLXRpbWUnIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZSh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICB2YWx1ZS50eXBlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAncHJvcGVydGllcycgaW4gdmFsdWUgJiZcbiAgICAgICAgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJyBpbiB2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kSnNvblNjaGVtYUNvbXBhdChpbnB1dCkge1xuICAgIC8vIEF0dGVtcHQgdG8gYnVpbGQgYW4gb2JqZWN0IHNjaGVtYSBmcm9tIFpvZCdzIGludGVybmFsIHNoYXBlLiBJZiB3ZSBjYW5ub3RcbiAgICAvLyB1bmRlcnN0YW5kIHRoZSBzdHJ1Y3R1cmUgd2UgcmV0dXJuIHVuZGVmaW5lZCwgbGV0dGluZyBjYWxsZXJzIHJhaXNlIGFcbiAgICAvLyBkZXNjcmlwdGl2ZSBlcnJvciBpbnN0ZWFkIG9mIGVtaXR0aW5nIGFuIGludmFsaWQgc2NoZW1hLlxuICAgIGNvbnN0IHNjaGVtYSA9IGJ1aWxkT2JqZWN0U2NoZW1hKGlucHV0KTtcbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hLnJlcXVpcmVkKSkge1xuICAgICAgICBzY2hlbWEucmVxdWlyZWQgPSBbXTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjaGVtYS4kc2NoZW1hICE9PSAnc3RyaW5nJykge1xuICAgICAgICBzY2hlbWEuJHNjaGVtYSA9IEpTT05fU0NIRU1BX0RSQUZUXzA3O1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZnVuY3Rpb24gYnVpbGRPYmplY3RTY2hlbWEodmFsdWUpIHtcbiAgICBjb25zdCBzaGFwZSA9IHJlYWRTaGFwZSh2YWx1ZSk7XG4gICAgaWYgKCFzaGFwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ge307XG4gICAgY29uc3QgcmVxdWlyZWQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyhzaGFwZSkpIHtcbiAgICAgICAgY29uc3QgeyBzY2hlbWEsIG9wdGlvbmFsIH0gPSBjb252ZXJ0UHJvcGVydHkoZmllbGQpO1xuICAgICAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzW2tleV0gPSBzY2hlbWE7XG4gICAgICAgIGlmICghb3B0aW9uYWwpIHtcbiAgICAgICAgICAgIHJlcXVpcmVkLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnb2JqZWN0JywgcHJvcGVydGllcywgcmVxdWlyZWQsIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSB9O1xufVxuZnVuY3Rpb24gY29udmVydFByb3BlcnR5KHZhbHVlKSB7XG4gICAgLy8gUmVtb3ZlIHdyYXBwZXIgZGVjb3JhdG9ycyAoYnJhbmQsIHRyYW5zZm9ybSwgZXRjLikgYmVmb3JlIGF0dGVtcHRpbmcgdG9cbiAgICAvLyBjbGFzc2lmeSB0aGUgbm9kZSwgdHJhY2tpbmcgd2hldGhlciB3ZSBjcm9zc2VkIGFuIGBvcHRpb25hbGAgYm91bmRhcnkgc28gd2VcbiAgICAvLyBjYW4gcG9wdWxhdGUgdGhlIGByZXF1aXJlZGAgYXJyYXkgbGF0ZXIuXG4gICAgbGV0IGN1cnJlbnQgPSB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKTtcbiAgICBsZXQgb3B0aW9uYWwgPSBmYWxzZTtcbiAgICB3aGlsZSAoT1BUSU9OQUxfV1JBUFBFUlMuaGFzKHJlYWRab2RUeXBlKGN1cnJlbnQpID8/ICcnKSkge1xuICAgICAgICBvcHRpb25hbCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGN1cnJlbnQpO1xuICAgICAgICBjb25zdCBuZXh0ID0gdW53cmFwRGVjb3JhdG9ycyhkZWY/LmlubmVyVHlwZSk7XG4gICAgICAgIGlmICghbmV4dCB8fCBuZXh0ID09PSBjdXJyZW50KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHsgc2NoZW1hOiBjb252ZXJ0U2NoZW1hKGN1cnJlbnQpLCBvcHRpb25hbCB9O1xufVxuZnVuY3Rpb24gY29udmVydFNjaGVtYSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHVud3JhcHBlZCA9IHVud3JhcERlY29yYXRvcnModmFsdWUpO1xuICAgIGNvbnN0IHR5cGUgPSByZWFkWm9kVHlwZSh1bndyYXBwZWQpO1xuICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKHVud3JhcHBlZCk7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlIGluIFNJTVBMRV9UWVBFX01BUFBJTkcpIHtcbiAgICAgICAgcmV0dXJuIFNJTVBMRV9UWVBFX01BUFBJTkdbdHlwZV07XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkT2JqZWN0U2NoZW1hKHVud3JhcHBlZCk7XG4gICAgICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZEFycmF5U2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3R1cGxlJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFR1cGxlU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3VuaW9uJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFVuaW9uU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ2ludGVyc2VjdGlvbic6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRJbnRlcnNlY3Rpb25TY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbGl0ZXJhbCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRMaXRlcmFsKGRlZik7XG4gICAgICAgIGNhc2UgJ2VudW0nOlxuICAgICAgICBjYXNlICduYXRpdmVlbnVtJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZEVudW0oZGVmKTtcbiAgICAgICAgY2FzZSAncmVjb3JkJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFJlY29yZFNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdtYXAnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTWFwU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3NldCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRTZXRTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbnVsbGFibGUnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTnVsbGFibGVTY2hlbWEoZGVmKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLy8gLS0tIEpTT04gU2NoZW1hIGJ1aWxkZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGJ1aWxkQXJyYXlTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgaXRlbXMgPSBjb252ZXJ0U2NoZW1hKGV4dHJhY3RGaXJzdChkZWYsICdlbGVtZW50JywgJ2l0ZW1zJywgJ3R5cGUnKSk7XG4gICAgcmV0dXJuIGl0ZW1zID8geyB0eXBlOiAnYXJyYXknLCBpdGVtcyB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRUdXBsZVNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBpdGVtcyA9IGNvZXJjZUFycmF5KGRlZj8uaXRlbXMpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGNvbnZlcnRTY2hlbWEoaXRlbSkpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBpdGVtcyxcbiAgICAgICAgbWluSXRlbXM6IGl0ZW1zLmxlbmd0aCxcbiAgICB9O1xuICAgIGlmICghZGVmPy5yZXN0KSB7XG4gICAgICAgIHNjaGVtYS5tYXhJdGVtcyA9IGl0ZW1zLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIGJ1aWxkVW5pb25TY2hlbWEoZGVmKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvZXJjZUFycmF5KGRlZj8ub3B0aW9ucyA/PyBkZWY/LnNjaGVtYXMpXG4gICAgICAgIC5tYXAoKG9wdGlvbikgPT4gY29udmVydFNjaGVtYShvcHRpb24pKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIHJldHVybiBvcHRpb25zLmxlbmd0aCA/IHsgYW55T2Y6IG9wdGlvbnMgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkSW50ZXJzZWN0aW9uU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGxlZnQgPSBjb252ZXJ0U2NoZW1hKGRlZj8ubGVmdCk7XG4gICAgY29uc3QgcmlnaHQgPSBjb252ZXJ0U2NoZW1hKGRlZj8ucmlnaHQpO1xuICAgIHJldHVybiBsZWZ0ICYmIHJpZ2h0ID8geyBhbGxPZjogW2xlZnQsIHJpZ2h0XSB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRSZWNvcmRTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgdmFsdWVTY2hlbWEgPSBjb252ZXJ0U2NoZW1hKGRlZj8udmFsdWVUeXBlID8/IGRlZj8udmFsdWVzKTtcbiAgICByZXR1cm4gdmFsdWVTY2hlbWFcbiAgICAgICAgPyB7IHR5cGU6ICdvYmplY3QnLCBhZGRpdGlvbmFsUHJvcGVydGllczogdmFsdWVTY2hlbWEgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkTWFwU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSA/PyBkZWY/LnZhbHVlcyk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hID8geyB0eXBlOiAnYXJyYXknLCBpdGVtczogdmFsdWVTY2hlbWEgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkU2V0U2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hXG4gICAgICAgID8geyB0eXBlOiAnYXJyYXknLCBpdGVtczogdmFsdWVTY2hlbWEsIHVuaXF1ZUl0ZW1zOiB0cnVlIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZE51bGxhYmxlU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGlubmVyID0gY29udmVydFNjaGVtYShkZWY/LmlubmVyVHlwZSA/PyBkZWY/LnR5cGUpO1xuICAgIHJldHVybiBpbm5lciA/IHsgYW55T2Y6IFtpbm5lciwgeyB0eXBlOiAnbnVsbCcgfV0gfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHVud3JhcERlY29yYXRvcnModmFsdWUpIHtcbiAgICBsZXQgY3VycmVudCA9IHZhbHVlO1xuICAgIHdoaWxlIChERUNPUkFUT1JfV1JBUFBFUlMuaGFzKHJlYWRab2RUeXBlKGN1cnJlbnQpID8/ICcnKSkge1xuICAgICAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjdXJyZW50KTtcbiAgICAgICAgY29uc3QgbmV4dCA9IGRlZj8uaW5uZXJUeXBlID8/XG4gICAgICAgICAgICBkZWY/LnNjaGVtYSA/P1xuICAgICAgICAgICAgZGVmPy5iYXNlID8/XG4gICAgICAgICAgICBkZWY/LnR5cGUgPz9cbiAgICAgICAgICAgIGRlZj8ud3JhcHBlZCA/P1xuICAgICAgICAgICAgZGVmPy51bmRlcmx5aW5nO1xuICAgICAgICBpZiAoIW5leHQgfHwgbmV4dCA9PT0gY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50O1xufVxuZnVuY3Rpb24gZXh0cmFjdEZpcnN0KGRlZiwgLi4ua2V5cykge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgaWYgKGtleSBpbiBkZWYgJiYgZGVmW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlZltrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBjb2VyY2VBcnJheSh2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gW10gOiBbdmFsdWVdO1xufVxuZnVuY3Rpb24gYnVpbGRMaXRlcmFsKGRlZikge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxpdGVyYWwgPSBleHRyYWN0Rmlyc3QoZGVmLCAndmFsdWUnLCAnbGl0ZXJhbCcpO1xuICAgIGlmIChsaXRlcmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uc3Q6IGxpdGVyYWwsXG4gICAgICAgIHR5cGU6IGxpdGVyYWwgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgbGl0ZXJhbCxcbiAgICB9O1xufVxuZnVuY3Rpb24gYnVpbGRFbnVtKGRlZikge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRlZi52YWx1ZXMpKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IGRlZi52YWx1ZXMgfTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGVmLm9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IGRlZi5vcHRpb25zIH07XG4gICAgfVxuICAgIGlmIChkZWYudmFsdWVzICYmIHR5cGVvZiBkZWYudmFsdWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBPYmplY3QudmFsdWVzKGRlZi52YWx1ZXMpIH07XG4gICAgfVxuICAgIGlmIChkZWYuZW51bSAmJiB0eXBlb2YgZGVmLmVudW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IE9iamVjdC52YWx1ZXMoZGVmLmVudW0pIH07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiByZWFkU2hhcGUoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbnB1dDtcbiAgICBpZiAoY2FuZGlkYXRlLnNoYXBlICYmIHR5cGVvZiBjYW5kaWRhdGUuc2hhcGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBjYW5kaWRhdGUuc2hhcGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2FuZGlkYXRlLnNoYXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlLnNoYXBlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjYW5kaWRhdGUpO1xuICAgIGNvbnN0IHNoYXBlID0gZGVmPy5zaGFwZTtcbiAgICBpZiAoc2hhcGUgJiYgdHlwZW9mIHNoYXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2hhcGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzaGFwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZEpzb25TY2hlbWFDb21wYXQubWpzLm1hcCIsImltcG9ydCB7IHpvZFJlc3BvbnNlc0Z1bmN0aW9uLCB6b2RUZXh0Rm9ybWF0IH0gZnJvbSAnb3BlbmFpL2hlbHBlcnMvem9kJztcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyB6b2RKc29uU2NoZW1hQ29tcGF0LCBoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUsIH0gZnJvbSBcIi4vem9kSnNvblNjaGVtYUNvbXBhdC5tanNcIjtcbmltcG9ydCB7IGFzWm9kVHlwZSB9IGZyb20gXCIuL3pvZENvbXBhdC5tanNcIjtcbmNvbnN0IHpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0ID0gem9kUmVzcG9uc2VzRnVuY3Rpb247XG4vLyBUaGUgYC5zY2hlbWFgIHBheWxvYWQgaXMgYWxsIHdlIG5lZWQsIHNvIGEgbGlnaHR3ZWlnaHQgc2lnbmF0dXJlIGtlZXBzIHRoZSBjb21waWxlciBoYXBweS5cbmNvbnN0IHpvZFRleHRGb3JtYXRDb21wYXQgPSB6b2RUZXh0Rm9ybWF0O1xuLy8gb3BlbmFpL2hlbHBlcnMvem9kIGNhbm5vdCBlbWl0IHN0cmljdCBzY2hlbWFzIGZvciBldmVyeSBab2QgcnVudGltZVxuLy8gKG5vdGFibHkgWm9kIHY0KSwgc28gd2UgZGVsZWdhdGUgdG8gYSBzbWFsbCBsb2NhbCBjb252ZXJ0ZXIgbGl2aW5nIGluXG4vLyB6b2RKc29uU2NoZW1hQ29tcGF0LnRzIHdoZW5ldmVyIGl0cyBvdXRwdXQgaXMgbWlzc2luZyB0aGUgcmVxdWlyZWQgSlNPTiBTY2hlbWEgYml0cy5cbmZ1bmN0aW9uIGJ1aWxkSnNvblNjaGVtYUZyb21ab2QoaW5wdXRUeXBlKSB7XG4gICAgcmV0dXJuIHpvZEpzb25TY2hlbWFDb21wYXQoaW5wdXRUeXBlKTtcbn1cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0byBhIGZ1bmN0aW9uIHRvb2wgbmFtZSBieSByZXBsYWNpbmcgc3BhY2VzIHdpdGggdW5kZXJzY29yZXMgYW5kXG4gKiBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2l0aCB1bmRlcnNjb3Jlcy5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgZnVuY3Rpb24gdG9vbCBuYW1lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9GdW5jdGlvblRvb2xOYW1lKG5hbWUpIHtcbiAgICAvLyBSZXBsYWNlIHNwYWNlcyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvXFxzL2csICdfJyk7XG4gICAgLy8gUmVwbGFjZSBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2l0aCB1bmRlcnNjb3Jlc1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xuICAgIC8vIEVuc3VyZSB0aGUgbmFtZSBpcyBub3QgZW1wdHlcbiAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNjaGVtYSBhbmQgcGFyc2VyIGZyb20gYW4gaW5wdXQgdHlwZS4gSWYgdGhlIGlucHV0IHR5cGUgaXMgYSBab2RPYmplY3QsIHdlIHdpbGwgY29udmVydFxuICogaXQgaW50byBhIEpTT04gU2NoZW1hIGFuZCB1c2UgWm9kIGFzIHBhcnNlci4gSWYgdGhlIGlucHV0IHR5cGUgaXMgYSBKU09OIHNjaGVtYSwgd2UgdXNlIHRoZVxuICogSlNPTi5wYXJzZSBmdW5jdGlvbiB0byBnZXQgdGhlIHBhcnNlci5cbiAqIEBwYXJhbSBpbnB1dFR5cGUgLSBUaGUgaW5wdXQgdHlwZSB0byBnZXQgdGhlIHNjaGVtYSBhbmQgcGFyc2VyIGZyb20uXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0b29sLlxuICogQHJldHVybnMgVGhlIHNjaGVtYSBhbmQgcGFyc2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShpbnB1dFR5cGUsIG5hbWUpIHtcbiAgICBjb25zdCBwYXJzZXIgPSAoaW5wdXQpID0+IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgIGlmIChpc1pvZE9iamVjdChpbnB1dFR5cGUpKSB7XG4gICAgICAgIGNvbnN0IHVzZUZhbGxiYWNrID0gKG9yaWdpbmFsRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrU2NoZW1hID0gYnVpbGRKc29uU2NoZW1hRnJvbVpvZChpbnB1dFR5cGUpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBmYWxsYmFja1NjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyOiAocmF3SW5wdXQpID0+IGlucHV0VHlwZS5wYXJzZShKU09OLnBhcnNlKHJhd0lucHV0KSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICAgID8gYCBVcHN0cmVhbSBoZWxwZXIgZXJyb3I6ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVW5hYmxlIHRvIGNvbnZlcnQgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgdG8gSlNPTiBTY2hlbWEuIEVuc3VyZSB0aGF0IHRoZSBcXGB6b2RcXGAgcGFja2FnZSBpcyBhdmFpbGFibGUgYXQgcnVudGltZSBvciBwcm92aWRlIGEgSlNPTiBzY2hlbWEgb2JqZWN0IGluc3RlYWQuJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBmb3JtYXR0ZWRGdW5jdGlvbjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZEZ1bmN0aW9uID0gem9kUmVzcG9uc2VzRnVuY3Rpb25Db21wYXQoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogYXNab2RUeXBlKGlucHV0VHlwZSksXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2soZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUoZm9ybWF0dGVkRnVuY3Rpb24ucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHBhcnNlcjogZm9ybWF0dGVkRnVuY3Rpb24uJHBhcnNlUmF3LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2soKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0VHlwZSA9PT0gJ29iamVjdCcgJiYgaW5wdXRUeXBlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY2hlbWE6IGlucHV0VHlwZSxcbiAgICAgICAgICAgIHBhcnNlcixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVzZXJFcnJvcignSW5wdXQgdHlwZSBpcyBub3QgYSBab2RPYmplY3Qgb3IgYSB2YWxpZCBKU09OIHNjaGVtYScpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgYWdlbnQgb3V0cHV0IHR5cGUgcHJvdmlkZWQgdG8gYSBzZXJpYWxpemFibGUgdmVyc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKG91dHB1dFR5cGUpIHtcbiAgICBpZiAob3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIHJldHVybiAndGV4dCc7XG4gICAgfVxuICAgIGlmIChpc1pvZE9iamVjdChvdXRwdXRUeXBlKSkge1xuICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9IChleGlzdGluZywgb3JpZ2luYWxFcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tTY2hlbWEgPSBidWlsZEpzb25TY2hlbWFGcm9tWm9kKG91dHB1dFR5cGUpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXhpc3Rpbmc/LnR5cGUgPz8gJ2pzb25fc2NoZW1hJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZXhpc3Rpbmc/Lm5hbWUgPz8gJ291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHN0cmljdDogZXhpc3Rpbmc/LnN0cmljdCA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBmYWxsYmFja1NjaGVtYSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gb3JpZ2luYWxFcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgICAgICAgICAgPyBgIFVwc3RyZWFtIGhlbHBlciBlcnJvcjogJHtvcmlnaW5hbEVycm9yLm1lc3NhZ2V9YFxuICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBVbmFibGUgdG8gY29udmVydCB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSB0byBKU09OIFNjaGVtYS4gRW5zdXJlIHRoYXQgdGhlIFxcYHpvZFxcYCBwYWNrYWdlIGlzIGF2YWlsYWJsZSBhdCBydW50aW1lIG9yIHByb3ZpZGUgYSBKU09OIHNjaGVtYSBvYmplY3QgaW5zdGVhZC4ke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IHpvZFRleHRGb3JtYXRDb21wYXQoYXNab2RUeXBlKG91dHB1dFR5cGUpLCAnb3V0cHV0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2sodW5kZWZpbmVkLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZShvdXRwdXQuc2NoZW1hKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBvdXRwdXQubmFtZSxcbiAgICAgICAgICAgICAgICBzdHJpY3Q6IG91dHB1dC5zdHJpY3QgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2sob3V0cHV0KTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFR5cGU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29scy5tanMubWFwIiwiLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB3ID0gZCAqIDc7XG52YXIgeSA9IGQgKiAzNjUuMjU7XG5cbi8qKlxuICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC5cbiAqXG4gKiBPcHRpb25zOlxuICpcbiAqICAtIGBsb25nYCB2ZXJib3NlIGZvcm1hdHRpbmcgW2ZhbHNlXVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgdmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSBudW1iZXJcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKi9cblxuZnVuY3Rpb24gc2V0dXAoZW52KSB7XG5cdGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmRlZmF1bHQgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlO1xuXHRjcmVhdGVEZWJ1Zy5kaXNhYmxlID0gZGlzYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlID0gZW5hYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDtcblx0Y3JlYXRlRGVidWcuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXHRjcmVhdGVEZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTtcblxuXHRPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goa2V5ID0+IHtcblx0XHRjcmVhdGVEZWJ1Z1trZXldID0gZW52W2tleV07XG5cdH0pO1xuXG5cdC8qKlxuXHQqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuXHQqL1xuXG5cdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0LyoqXG5cdCogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuXHQqXG5cdCogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuXHQqL1xuXHRjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzID0ge307XG5cblx0LyoqXG5cdCogU2VsZWN0cyBhIGNvbG9yIGZvciBhIGRlYnVnIG5hbWVzcGFjZVxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBkZWJ1ZyBpbnN0YW5jZSB0byBiZSBjb2xvcmVkXG5cdCogQHJldHVybiB7TnVtYmVyfFN0cmluZ30gQW4gQU5TSSBjb2xvciBjb2RlIGZvciB0aGUgZ2l2ZW4gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHNlbGVjdENvbG9yKG5hbWVzcGFjZSkge1xuXHRcdGxldCBoYXNoID0gMDtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXNwYWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBuYW1lc3BhY2UuY2hhckNvZGVBdChpKTtcblx0XHRcdGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNyZWF0ZURlYnVnLmNvbG9yc1tNYXRoLmFicyhoYXNoKSAlIGNyZWF0ZURlYnVnLmNvbG9ycy5sZW5ndGhdO1xuXHR9XG5cdGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yID0gc2VsZWN0Q29sb3I7XG5cblx0LyoqXG5cdCogQ3JlYXRlIGEgZGVidWdnZXIgd2l0aCB0aGUgZ2l2ZW4gYG5hbWVzcGFjZWAuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQHJldHVybiB7RnVuY3Rpb259XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gY3JlYXRlRGVidWcobmFtZXNwYWNlKSB7XG5cdFx0bGV0IHByZXZUaW1lO1xuXHRcdGxldCBlbmFibGVPdmVycmlkZSA9IG51bGw7XG5cdFx0bGV0IG5hbWVzcGFjZXNDYWNoZTtcblx0XHRsZXQgZW5hYmxlZENhY2hlO1xuXG5cdFx0ZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuXHRcdFx0Ly8gRGlzYWJsZWQ/XG5cdFx0XHRpZiAoIWRlYnVnLmVuYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZWxmID0gZGVidWc7XG5cblx0XHRcdC8vIFNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuXHRcdFx0Y29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHRcdFx0c2VsZi5kaWZmID0gbXM7XG5cdFx0XHRzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0XHRcdHNlbGYuY3VyciA9IGN1cnI7XG5cdFx0XHRwcmV2VGltZSA9IGN1cnI7XG5cblx0XHRcdGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cblx0XHRcdFx0YXJncy51bnNoaWZ0KCclTycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXHRcdFx0bGV0IGluZGV4ID0gMDtcblx0XHRcdGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuXHRcdFx0XHQvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdFx0XHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0XHRcdHJldHVybiAnJSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0Y29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuXHRcdFx0XHRcdC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblx0XHRcdFx0XHRhcmdzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblx0XHRcdGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuXHRcdFx0Y29uc3QgbG9nRm4gPSBzZWxmLmxvZyB8fCBjcmVhdGVEZWJ1Zy5sb2c7XG5cdFx0XHRsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHRkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFx0ZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG5cdFx0ZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuXHRcdGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcblx0XHRkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsICdlbmFibGVkJywge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdFx0XHRnZXQ6ICgpID0+IHtcblx0XHRcdFx0aWYgKGVuYWJsZU92ZXJyaWRlICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVuYWJsZU92ZXJyaWRlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChuYW1lc3BhY2VzQ2FjaGUgIT09IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXMpIHtcblx0XHRcdFx0XHRuYW1lc3BhY2VzQ2FjaGUgPSBjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzO1xuXHRcdFx0XHRcdGVuYWJsZWRDYWNoZSA9IGNyZWF0ZURlYnVnLmVuYWJsZWQobmFtZXNwYWNlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBlbmFibGVkQ2FjaGU7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiB2ID0+IHtcblx0XHRcdFx0ZW5hYmxlT3ZlcnJpZGUgPSB2O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRW52LXNwZWNpZmljIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBkZWJ1ZyBpbnN0YW5jZXNcblx0XHRpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWJ1Zztcblx0fVxuXG5cdGZ1bmN0aW9uIGV4dGVuZChuYW1lc3BhY2UsIGRlbGltaXRlcikge1xuXHRcdGNvbnN0IG5ld0RlYnVnID0gY3JlYXRlRGVidWcodGhpcy5uYW1lc3BhY2UgKyAodHlwZW9mIGRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnOicgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcblx0XHRuZXdEZWJ1Zy5sb2cgPSB0aGlzLmxvZztcblx0XHRyZXR1cm4gbmV3RGVidWc7XG5cdH1cblxuXHQvKipcblx0KiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG5cdCogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcblx0XHRjcmVhdGVEZWJ1Zy5zYXZlKG5hbWVzcGFjZXMpO1xuXHRcdGNyZWF0ZURlYnVnLm5hbWVzcGFjZXMgPSBuYW1lc3BhY2VzO1xuXG5cdFx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0XHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdFx0Y29uc3Qgc3BsaXQgPSAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnID8gbmFtZXNwYWNlcyA6ICcnKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJywnKVxuXHRcdFx0LnNwbGl0KCcsJylcblx0XHRcdC5maWx0ZXIoQm9vbGVhbik7XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIHNwbGl0KSB7XG5cdFx0XHRpZiAobnNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5zLnNsaWNlKDEpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobnMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHN0cmluZyBtYXRjaGVzIGEgbmFtZXNwYWNlIHRlbXBsYXRlLCBob25vcmluZ1xuXHQgKiBhc3Rlcmlza3MgYXMgd2lsZGNhcmRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gbWF0Y2hlc1RlbXBsYXRlKHNlYXJjaCwgdGVtcGxhdGUpIHtcblx0XHRsZXQgc2VhcmNoSW5kZXggPSAwO1xuXHRcdGxldCB0ZW1wbGF0ZUluZGV4ID0gMDtcblx0XHRsZXQgc3RhckluZGV4ID0gLTE7XG5cdFx0bGV0IG1hdGNoSW5kZXggPSAwO1xuXG5cdFx0d2hpbGUgKHNlYXJjaEluZGV4IDwgc2VhcmNoLmxlbmd0aCkge1xuXHRcdFx0aWYgKHRlbXBsYXRlSW5kZXggPCB0ZW1wbGF0ZS5sZW5ndGggJiYgKHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSBzZWFyY2hbc2VhcmNoSW5kZXhdIHx8IHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpKSB7XG5cdFx0XHRcdC8vIE1hdGNoIGNoYXJhY3RlciBvciBwcm9jZWVkIHdpdGggd2lsZGNhcmRcblx0XHRcdFx0aWYgKHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdFx0XHRzdGFySW5kZXggPSB0ZW1wbGF0ZUluZGV4O1xuXHRcdFx0XHRcdG1hdGNoSW5kZXggPSBzZWFyY2hJbmRleDtcblx0XHRcdFx0XHR0ZW1wbGF0ZUluZGV4Kys7IC8vIFNraXAgdGhlICcqJ1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlYXJjaEluZGV4Kys7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHN0YXJJbmRleCAhPT0gLTEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZWdhdGVkLWNvbmRpdGlvblxuXHRcdFx0XHQvLyBCYWNrdHJhY2sgdG8gdGhlIGxhc3QgJyonIGFuZCB0cnkgdG8gbWF0Y2ggbW9yZSBjaGFyYWN0ZXJzXG5cdFx0XHRcdHRlbXBsYXRlSW5kZXggPSBzdGFySW5kZXggKyAxO1xuXHRcdFx0XHRtYXRjaEluZGV4Kys7XG5cdFx0XHRcdHNlYXJjaEluZGV4ID0gbWF0Y2hJbmRleDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gTm8gbWF0Y2hcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgdHJhaWxpbmcgJyonIGluIHRlbXBsYXRlXG5cdFx0d2hpbGUgKHRlbXBsYXRlSW5kZXggPCB0ZW1wbGF0ZS5sZW5ndGggJiYgdGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykge1xuXHRcdFx0dGVtcGxhdGVJbmRleCsrO1xuXHRcdH1cblxuXHRcdHJldHVybiB0ZW1wbGF0ZUluZGV4ID09PSB0ZW1wbGF0ZS5sZW5ndGg7XG5cdH1cblxuXHQvKipcblx0KiBEaXNhYmxlIGRlYnVnIG91dHB1dC5cblx0KlxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlc1xuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGRpc2FibGUoKSB7XG5cdFx0Y29uc3QgbmFtZXNwYWNlcyA9IFtcblx0XHRcdC4uLmNyZWF0ZURlYnVnLm5hbWVzLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKG5hbWVzcGFjZSA9PiAnLScgKyBuYW1lc3BhY2UpXG5cdFx0XS5qb2luKCcsJyk7XG5cdFx0Y3JlYXRlRGVidWcuZW5hYmxlKCcnKTtcblx0XHRyZXR1cm4gbmFtZXNwYWNlcztcblx0fVxuXG5cdC8qKlxuXHQqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCogQHJldHVybiB7Qm9vbGVhbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcblx0XHRmb3IgKGNvbnN0IHNraXAgb2YgY3JlYXRlRGVidWcuc2tpcHMpIHtcblx0XHRcdGlmIChtYXRjaGVzVGVtcGxhdGUobmFtZSwgc2tpcCkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgbnMgb2YgY3JlYXRlRGVidWcubmFtZXMpIHtcblx0XHRcdGlmIChtYXRjaGVzVGVtcGxhdGUobmFtZSwgbnMpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvZXJjZSBgdmFsYC5cblx0KlxuXHQqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuXHQqIEByZXR1cm4ge01peGVkfVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBjb2VyY2UodmFsKSB7XG5cdFx0aWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG5cblx0LyoqXG5cdCogWFhYIERPIE5PVCBVU0UuIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc3R1YiBmdW5jdGlvbi5cblx0KiBYWFggSXQgV0lMTCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cdCovXG5cdGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdH1cblxuXHRjcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtcblxuXHRyZXR1cm4gY3JlYXRlRGVidWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XG4iLCIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLnN0b3JhZ2UgPSBsb2NhbHN0b3JhZ2UoKTtcbmV4cG9ydHMuZGVzdHJveSA9ICgoKSA9PiB7XG5cdGxldCB3YXJuZWQgPSBmYWxzZTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGlmICghd2FybmVkKSB7XG5cdFx0XHR3YXJuZWQgPSB0cnVlO1xuXHRcdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG5cdCcjMDAwMENDJyxcblx0JyMwMDAwRkYnLFxuXHQnIzAwMzNDQycsXG5cdCcjMDAzM0ZGJyxcblx0JyMwMDY2Q0MnLFxuXHQnIzAwNjZGRicsXG5cdCcjMDA5OUNDJyxcblx0JyMwMDk5RkYnLFxuXHQnIzAwQ0MwMCcsXG5cdCcjMDBDQzMzJyxcblx0JyMwMENDNjYnLFxuXHQnIzAwQ0M5OScsXG5cdCcjMDBDQ0NDJyxcblx0JyMwMENDRkYnLFxuXHQnIzMzMDBDQycsXG5cdCcjMzMwMEZGJyxcblx0JyMzMzMzQ0MnLFxuXHQnIzMzMzNGRicsXG5cdCcjMzM2NkNDJyxcblx0JyMzMzY2RkYnLFxuXHQnIzMzOTlDQycsXG5cdCcjMzM5OUZGJyxcblx0JyMzM0NDMDAnLFxuXHQnIzMzQ0MzMycsXG5cdCcjMzNDQzY2Jyxcblx0JyMzM0NDOTknLFxuXHQnIzMzQ0NDQycsXG5cdCcjMzNDQ0ZGJyxcblx0JyM2NjAwQ0MnLFxuXHQnIzY2MDBGRicsXG5cdCcjNjYzM0NDJyxcblx0JyM2NjMzRkYnLFxuXHQnIzY2Q0MwMCcsXG5cdCcjNjZDQzMzJyxcblx0JyM5OTAwQ0MnLFxuXHQnIzk5MDBGRicsXG5cdCcjOTkzM0NDJyxcblx0JyM5OTMzRkYnLFxuXHQnIzk5Q0MwMCcsXG5cdCcjOTlDQzMzJyxcblx0JyNDQzAwMDAnLFxuXHQnI0NDMDAzMycsXG5cdCcjQ0MwMDY2Jyxcblx0JyNDQzAwOTknLFxuXHQnI0NDMDBDQycsXG5cdCcjQ0MwMEZGJyxcblx0JyNDQzMzMDAnLFxuXHQnI0NDMzMzMycsXG5cdCcjQ0MzMzY2Jyxcblx0JyNDQzMzOTknLFxuXHQnI0NDMzNDQycsXG5cdCcjQ0MzM0ZGJyxcblx0JyNDQzY2MDAnLFxuXHQnI0NDNjYzMycsXG5cdCcjQ0M5OTAwJyxcblx0JyNDQzk5MzMnLFxuXHQnI0NDQ0MwMCcsXG5cdCcjQ0NDQzMzJyxcblx0JyNGRjAwMDAnLFxuXHQnI0ZGMDAzMycsXG5cdCcjRkYwMDY2Jyxcblx0JyNGRjAwOTknLFxuXHQnI0ZGMDBDQycsXG5cdCcjRkYwMEZGJyxcblx0JyNGRjMzMDAnLFxuXHQnI0ZGMzMzMycsXG5cdCcjRkYzMzY2Jyxcblx0JyNGRjMzOTknLFxuXHQnI0ZGMzNDQycsXG5cdCcjRkYzM0ZGJyxcblx0JyNGRjY2MDAnLFxuXHQnI0ZGNjYzMycsXG5cdCcjRkY5OTAwJyxcblx0JyNGRjk5MzMnLFxuXHQnI0ZGQ0MwMCcsXG5cdCcjRkZDQzMzJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuXHQvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5XG5cdC8vIGluaXRpYWxpemVkLiBTaW5jZSB3ZSBrbm93IHdlJ3JlIGluIENocm9tZSwgd2UnbGwganVzdCBkZXRlY3QgdGhpcyBjYXNlXG5cdC8vIGV4cGxpY2l0bHlcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IGNvbG9ycy5cblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0bGV0IG07XG5cblx0Ly8gSXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcblx0Ly8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJldHVybi1hc3NpZ25cblx0cmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8XG5cdFx0Ly8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuXHRcdCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8XG5cdFx0Ly8gSXMgZmlyZWZveCA+PSB2MzE/XG5cdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgKG0gPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSkgJiYgcGFyc2VJbnQobVsxXSwgMTApID49IDMxKSB8fFxuXHRcdC8vIERvdWJsZSBjaGVjayB3ZWJraXQgaW4gdXNlckFnZW50IGp1c3QgaW4gY2FzZSB3ZSBhcmUgaW4gYSB3b3JrZXJcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2FwcGxld2Via2l0XFwvKFxcZCspLykpO1xufVxuXG4vKipcbiAqIENvbG9yaXplIGxvZyBhcmd1bWVudHMgaWYgZW5hYmxlZC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGZvcm1hdEFyZ3MoYXJncykge1xuXHRhcmdzWzBdID0gKHRoaXMudXNlQ29sb3JzID8gJyVjJyA6ICcnKSArXG5cdFx0dGhpcy5uYW1lc3BhY2UgK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICcgJWMnIDogJyAnKSArXG5cdFx0YXJnc1swXSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyVjICcgOiAnICcpICtcblx0XHQnKycgKyBtb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO1xuXG5cdGlmICghdGhpcy51c2VDb2xvcnMpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCBjID0gJ2NvbG9yOiAnICsgdGhpcy5jb2xvcjtcblx0YXJncy5zcGxpY2UoMSwgMCwgYywgJ2NvbG9yOiBpbmhlcml0Jyk7XG5cblx0Ly8gVGhlIGZpbmFsIFwiJWNcIiBpcyBzb21ld2hhdCB0cmlja3ksIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb3RoZXJcblx0Ly8gYXJndW1lbnRzIHBhc3NlZCBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIHRoZSAlYywgc28gd2UgbmVlZCB0b1xuXHQvLyBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGluZGV4IHRvIGluc2VydCB0aGUgQ1NTIGludG9cblx0bGV0IGluZGV4ID0gMDtcblx0bGV0IGxhc3RDID0gMDtcblx0YXJnc1swXS5yZXBsYWNlKC8lW2EtekEtWiVdL2csIG1hdGNoID0+IHtcblx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aW5kZXgrKztcblx0XHRpZiAobWF0Y2ggPT09ICclYycpIHtcblx0XHRcdC8vIFdlIG9ubHkgYXJlIGludGVyZXN0ZWQgaW4gdGhlICpsYXN0KiAlY1xuXHRcdFx0Ly8gKHRoZSB1c2VyIG1heSBoYXZlIHByb3ZpZGVkIHRoZWlyIG93bilcblx0XHRcdGxhc3RDID0gaW5kZXg7XG5cdFx0fVxuXHR9KTtcblxuXHRhcmdzLnNwbGljZShsYXN0QywgMCwgYyk7XG59XG5cbi8qKlxuICogSW52b2tlcyBgY29uc29sZS5kZWJ1ZygpYCB3aGVuIGF2YWlsYWJsZS5cbiAqIE5vLW9wIHdoZW4gYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhIFwiZnVuY3Rpb25cIi5cbiAqIElmIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYXZhaWxhYmxlLCBmYWxscyBiYWNrXG4gKiB0byBgY29uc29sZS5sb2dgLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydHMubG9nID0gY29uc29sZS5kZWJ1ZyB8fCBjb25zb2xlLmxvZyB8fCAoKCkgPT4ge30pO1xuXG4vKipcbiAqIFNhdmUgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG5cdHRyeSB7XG5cdFx0aWYgKG5hbWVzcGFjZXMpIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5zZXRJdGVtKCdkZWJ1ZycsIG5hbWVzcGFjZXMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbi8qKlxuICogTG9hZCBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfSByZXR1cm5zIHRoZSBwcmV2aW91c2x5IHBlcnNpc3RlZCBkZWJ1ZyBtb2Rlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGxvYWQoKSB7XG5cdGxldCByO1xuXHR0cnkge1xuXHRcdHIgPSBleHBvcnRzLnN0b3JhZ2UuZ2V0SXRlbSgnZGVidWcnKSB8fCBleHBvcnRzLnN0b3JhZ2UuZ2V0SXRlbSgnREVCVUcnKSA7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJpbXBvcnQgeyBsb2FkRW52IGFzIF9sb2FkRW52LCBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG4vKipcbiAqIExvYWRzIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIHRoZSBwcm9jZXNzIGVudmlyb25tZW50LlxuICpcbiAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRW52KCkge1xuICAgIHJldHVybiBfbG9hZEVudigpO1xufVxuLyoqXG4gKiBDaGVja3MgaWYgYSBmbGFnIGlzIGVuYWJsZWQgaW4gdGhlIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmbGFnTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmbGFnIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBmbGFnIGlzIGVuYWJsZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc0VuYWJsZWQoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBlbnYgPSBsb2FkRW52KCk7XG4gICAgcmV0dXJuICh0eXBlb2YgZW52ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAoZW52W2ZsYWdOYW1lXSA9PT0gJ3RydWUnIHx8IGVudltmbGFnTmFtZV0gPT09ICcxJykpO1xufVxuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgdHJhY2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IHRyYWNpbmcgPSB7XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobG9hZEVudigpLk5PREVfRU5WID09PSAndGVzdCcpIHtcbiAgICAgICAgICAgIC8vIGRpc2FibGluZyBieSBkZWZhdWx0IGluIHRlc3RzXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RJU0FCTEVfVFJBQ0lORycpO1xuICAgIH0sXG59O1xuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgbG9nZ2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ2dpbmcgPSB7XG4gICAgZ2V0IGRvbnRMb2dNb2RlbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfTU9ERUxfREFUQScpO1xuICAgIH0sXG4gICAgZ2V0IGRvbnRMb2dUb29sRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19UT09MX0RBVEEnKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5tanMubWFwIiwiaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IGxvZ2dpbmcgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIExMTSBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ01vZGVsRGF0YSA9IGxvZ2dpbmcuZG9udExvZ01vZGVsRGF0YTtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgdG9vbCBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ1Rvb2xEYXRhID0gbG9nZ2luZy5kb250TG9nVG9vbERhdGE7XG4vKipcbiAqIEdldCBhIGxvZ2dlciBmb3IgYSBnaXZlbiBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSBuYW1lc3BhY2UgLSB0aGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIGxvZ2dlci5cbiAqIEByZXR1cm5zIEEgbG9nZ2VyIG9iamVjdCB3aXRoIGBkZWJ1Z2AgYW5kIGBlcnJvcmAgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlcihuYW1lc3BhY2UgPSAnb3BlbmFpLWFnZW50cycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIGRlYnVnOiBkZWJ1ZyhuYW1lc3BhY2UpLFxuICAgICAgICBlcnJvcjogY29uc29sZS5lcnJvcixcbiAgICAgICAgd2FybjogY29uc29sZS53YXJuLFxuICAgICAgICBkb250TG9nTW9kZWxEYXRhLFxuICAgICAgICBkb250TG9nVG9vbERhdGEsXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ29wZW5haS1hZ2VudHM6Y29yZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJjb25zdCBCWVRFX1BSRVZJRVdfTElNSVQgPSAyMDtcbmV4cG9ydCBmdW5jdGlvbiB0b1NtYXJ0U3RyaW5nKHZhbHVlKSB7XG4gICAgLy8gUHJvZHVjZSBhIGh1bWFuLWZyaWVuZGx5IHN0cmluZyByZXByZXNlbnRhdGlvbiB3aGlsZSBwcmVzZXJ2aW5nIGVub3VnaCBkZXRhaWwgZm9yIGRlYnVnZ2luZyB3b3JrZmxvd3MuXG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyTGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2YWx1ZSkpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBzbWFydFN0cmluZ1JlcGxhY2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgICAgIHJldHVybiAnW29iamVjdCB3aXRoIGNpcmN1bGFyIHJlZmVyZW5jZXNdJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5QnVmZmVyTGlrZSh2YWx1ZSkge1xuICAgIC8vIERldGVjdCByYXcgQXJyYXlCdWZmZXItYmFja2VkIHBheWxvYWRzIHNvIGNhbGxlcnMgY2FuIGdlbmVyYXRlIGZ1bGwgcHJldmlld3MgcmF0aGVyIHRoYW4gdHJ1bmNhdGVkIGhhc2hlcy5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2hhcmVkQXJyYXlCdWZmZXJDdG9yID0gZ2xvYmFsVGhpcy5TaGFyZWRBcnJheUJ1ZmZlcjtcbiAgICByZXR1cm4gQm9vbGVhbihzaGFyZWRBcnJheUJ1ZmZlckN0b3IgJiYgdmFsdWUgaW5zdGFuY2VvZiBzaGFyZWRBcnJheUJ1ZmZlckN0b3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSB7XG4gICAgLy8gVHJlYXQgdHlwZWQgYXJyYXkgdmlld3MgYXMgYmluYXJ5IGRhdGEgZm9yIGNvbnNpc3RlbnQgc2VyaWFsaXphdGlvbi5cbiAgICByZXR1cm4gdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSB7XG4gICAgLy8gU3VwcG9ydCBzZXJpYWxpemVkIEJ1ZmZlciBzbmFwc2hvdHMgKGUuZy4sIGZyb20gSlNPTi5wYXJzZSkgZW1pdHRlZCBieSBzb21lIHRvb2wgb3V0cHV0cy5cbiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ0J1ZmZlcicgJiZcbiAgICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZS5kYXRhKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlQnVmZmVyKHZhbHVlKSB7XG4gICAgLy8gRGV0ZWN0IHJ1bnRpbWUgQnVmZmVycyB3aXRob3V0IGltcG9ydGluZyBub2RlLXNwZWNpZmljIHNoaW1zLCBoYW5kbGluZyBicm93c2VyIGJ1aWxkcyBncmFjZWZ1bGx5LlxuICAgIGNvbnN0IGJ1ZmZlckN0b3IgPSBnbG9iYWxUaGlzLkJ1ZmZlcjtcbiAgICByZXR1cm4gQm9vbGVhbihidWZmZXJDdG9yICYmXG4gICAgICAgIHR5cGVvZiBidWZmZXJDdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIGJ1ZmZlckN0b3IuaXNCdWZmZXIodmFsdWUpKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEJ5dGVBcnJheShieXRlcykge1xuICAgIGlmIChieXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICdbYnl0ZSBhcnJheSAoMCBieXRlcyldJztcbiAgICB9XG4gICAgY29uc3QgcHJldmlld0xlbmd0aCA9IE1hdGgubWluKGJ5dGVzLmxlbmd0aCwgQllURV9QUkVWSUVXX0xJTUlUKTtcbiAgICBjb25zdCBwcmV2aWV3UGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZpZXdMZW5ndGg7IGkrKykge1xuICAgICAgICBwcmV2aWV3UGFydHMucHVzaChmb3JtYXRCeXRlKGJ5dGVzW2ldKSk7XG4gICAgfVxuICAgIGNvbnN0IGVsbGlwc2lzID0gYnl0ZXMubGVuZ3RoID4gQllURV9QUkVWSUVXX0xJTUlUID8gJyDigKYnIDogJyc7XG4gICAgY29uc3QgcHJldmlldyA9IHByZXZpZXdQYXJ0cy5qb2luKCcgJyk7XG4gICAgcmV0dXJuIGBbYnl0ZSBhcnJheSAke3ByZXZpZXd9JHtlbGxpcHNpc30gKCR7Ynl0ZXMubGVuZ3RofSBieXRlcyldYDtcbn1cbmZ1bmN0aW9uIGZvcm1hdEJ5dGUoYnl0ZSkge1xuICAgIHJldHVybiBgMHgke2J5dGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbn1cbmZ1bmN0aW9uIHNtYXJ0U3RyaW5nUmVwbGFjZXIoX2tleSwgbmVzdGVkVmFsdWUpIHtcbiAgICBpZiAoaXNBcnJheUJ1ZmZlckxpa2UobmVzdGVkVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkobmVzdGVkVmFsdWUpKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KG5lc3RlZFZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gbmVzdGVkVmFsdWU7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGlmIChpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdChuZXN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShVaW50OEFycmF5LmZyb20obmVzdGVkVmFsdWUuZGF0YSkpO1xuICAgIH1cbiAgICByZXR1cm4gbmVzdGVkVmFsdWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zbWFydFN0cmluZy5tanMubWFwIiwiaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbmltcG9ydCB7IHRvRnVuY3Rpb25Ub29sTmFtZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHRvU21hcnRTdHJpbmcgfSBmcm9tIFwiLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbi8qKlxuICogRXhwb3NlcyBhIGNvbXB1dGVyIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGZvciB0aGUgY29tcHV0ZXIgdG9vbCBsaWtlIHNwZWNpZnlpbmcgdGhlIGxvY2F0aW9uIG9mIHlvdXIgYWdlbnRcbiAqIEByZXR1cm5zIGEgY29tcHV0ZXIgdG9vbCBkZWZpbml0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlclRvb2wob3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdjb21wdXRlcicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSA/PyAnY29tcHV0ZXJfdXNlX3ByZXZpZXcnLFxuICAgICAgICBjb21wdXRlcjogb3B0aW9ucy5jb21wdXRlcixcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNoZWxsVG9vbChvcHRpb25zKSB7XG4gICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgOiBhc3luYyAoKSA9PiB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnYm9vbGVhbidcbiAgICAgICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzaGVsbCcsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSA/PyAnc2hlbGwnLFxuICAgICAgICBzaGVsbDogb3B0aW9ucy5zaGVsbCxcbiAgICAgICAgbmVlZHNBcHByb3ZhbCxcbiAgICAgICAgb25BcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQYXRjaFRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXBwbHlfcGF0Y2gnLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgZWRpdG9yOiBvcHRpb25zLmVkaXRvcixcbiAgICAgICAgbmVlZHNBcHByb3ZhbCxcbiAgICAgICAgb25BcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBob3N0ZWQgTUNQIHRvb2wgZGVmaW5pdGlvbi5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gZm9yIHRoZSBob3N0ZWQgTUNQIHRvb2wsIGluY2x1ZGluZyBzZXJ2ZXIgY29ubmVjdGlvbiBkZXRhaWxzXG4gKiBhbmQgYXBwcm92YWwgcmVxdWlyZW1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdGVkTWNwVG9vbChvcHRpb25zKSB7XG4gICAgaWYgKCdzZXJ2ZXJVcmwnIGluIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gdGhlIE1DUCBzZXJ2ZXJzIGNvbWFwdGlibGUgd2l0aCB0aGUgc3BlY2lmaWNhdGlvblxuICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ25ldmVyJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IG9wdGlvbnMuc2VydmVyVXJsLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgc2VydmVyX3VybDogb3B0aW9ucy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogb3B0aW9ucy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgICAgIDogYnVpbGRSZXF1aXJlQXBwcm92YWwob3B0aW9ucy5yZXF1aXJlQXBwcm92YWwpLFxuICAgICAgICAgICAgICAgIG9uX2FwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoJ2Nvbm5lY3RvcklkJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIC8vIE9wZW5BSSdzIGNvbm5lY3RvcnNcbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBjb25uZWN0b3JfaWQ6IG9wdGlvbnMuY29ubmVjdG9ySWQsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogb3B0aW9ucy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6ICduZXZlcicsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBjb25uZWN0b3JfaWQ6IG9wdGlvbnMuY29ubmVjdG9ySWQsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogb3B0aW9ucy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgICAgIDogYnVpbGRSZXF1aXJlQXBwcm92YWwob3B0aW9ucy5yZXF1aXJlQXBwcm92YWwpLFxuICAgICAgICAgICAgICAgIG9uX2FwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHRoZSBNQ1Agc2VydmVycyBjb21hcHRpYmxlIHdpdGggdGhlIHNwZWNpZmljYXRpb25cbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgICAgIDogYnVpbGRSZXF1aXJlQXBwcm92YWwob3B0aW9ucy5yZXF1aXJlQXBwcm92YWwpLFxuICAgICAgICAgICAgICAgIG9uX2FwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIGFuIGVycm9yIG9jY3VycyB3aGlsZSBydW5uaW5nIHRoZSB0b29sLlxuICpcbiAqIEFsd2F5cyByZXR1cm5zIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBydW5uaW5nIHRoZSB0b29sLiBQbGVhc2UgdHJ5IGFnYWluLiBFcnJvcjogPGVycm9yIGRldGFpbHM+YFxuICpcbiAqIEBwYXJhbSBjb250ZXh0IEFuIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IFJ1bkNvbnRleHRcbiAqIEBwYXJhbSBlcnJvciBUaGUgZXJyb3IgdGhhdCBvY2N1cnJlZFxuICovXG5mdW5jdGlvbiBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24oY29udGV4dCwgZXJyb3IpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnRvU3RyaW5nKCkgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6ICR7ZGV0YWlsc31gO1xufVxuLyoqXG4gKiBFeHBvc2VzIGEgZnVuY3Rpb24gdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIHRvb2xcbiAqIEByZXR1cm5zIEEgbmV3IHRvb2xcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICAgICAgPyB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5uYW1lKVxuICAgICAgICA6IHRvRnVuY3Rpb25Ub29sTmFtZShvcHRpb25zLmV4ZWN1dGUubmFtZSk7XG4gICAgY29uc3QgdG9vbEVycm9yRnVuY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5lcnJvckZ1bmN0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGRlZmF1bHRUb29sRXJyb3JGdW5jdGlvblxuICAgICAgICA6IG9wdGlvbnMuZXJyb3JGdW5jdGlvbjtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5LiBFaXRoZXIgbmFtZSB5b3VyIGZ1bmN0aW9uIG9yIHByb3ZpZGUgYSBuYW1lIGluIHRoZSBvcHRpb25zLicpO1xuICAgIH1cbiAgICBjb25zdCBzdHJpY3RNb2RlID0gb3B0aW9ucy5zdHJpY3QgPz8gdHJ1ZTtcbiAgICBpZiAoIXN0cmljdE1vZGUgJiYgaXNab2RPYmplY3Qob3B0aW9ucy5wYXJhbWV0ZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdTdHJpY3QgbW9kZSBpcyByZXF1aXJlZCBmb3IgWm9kIHBhcmFtZXRlcnMnKTtcbiAgICB9XG4gICAgY29uc3QgeyBwYXJzZXIsIHNjaGVtYTogcGFyYW1ldGVycyB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShvcHRpb25zLnBhcmFtZXRlcnMsIG5hbWUpO1xuICAgIGFzeW5jIGZ1bmN0aW9uIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpIHtcbiAgICAgICAgY29uc3QgW2Vycm9yLCBwYXJzZWRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKGlucHV0KSk7XG4gICAgICAgIGlmIChlcnJvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9OiAke2lucHV0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52b2tpbmcgdG9vbCAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfSB3aXRoIGlucHV0ICR7aW5wdXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW9ucy5leGVjdXRlKHBhcnNlZCwgcnVuQ29udGV4dCwgZGV0YWlscyk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IGNvbXBsZXRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUb29sICR7bmFtZX0gcmV0dXJuZWQ6ICR7c3RyaW5nUmVzdWx0fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscykge1xuICAgICAgICByZXR1cm4gX2ludm9rZShydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAodG9vbEVycm9yRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCAobm9uLWZhdGFsKScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sRXJyb3JGdW5jdGlvbihydW5Db250ZXh0LCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICBjb25zdCBpc0VuYWJsZWQgPSB0eXBlb2Ygb3B0aW9ucy5pc0VuYWJsZWQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBhc3luYyAocnVuQ29udGV4dCwgYWdlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByZWRpY2F0ZSA9IG9wdGlvbnMuaXNFbmFibGVkO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJlZGljYXRlKHsgcnVuQ29udGV4dCwgYWdlbnQgfSk7XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMuaXNFbmFibGVkID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmlzRW5hYmxlZCA6IHRydWU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgIHN0cmljdDogc3RyaWN0TW9kZSxcbiAgICAgICAgaW52b2tlLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgICAgICBpc0VuYWJsZWQsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVxdWlyZUFwcHJvdmFsKHJlcXVpcmVBcHByb3ZhbCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChyZXF1aXJlQXBwcm92YWwuYWx3YXlzKSB7XG4gICAgICAgIHJlc3VsdC5hbHdheXMgPSB7IHRvb2xfbmFtZXM6IHJlcXVpcmVBcHByb3ZhbC5hbHdheXMudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIGlmIChyZXF1aXJlQXBwcm92YWwubmV2ZXIpIHtcbiAgICAgICAgcmVzdWx0Lm5ldmVyID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwubmV2ZXIudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihhbGxvd2VkVG9vbHMpIHtcbiAgICBpZiAodHlwZW9mIGFsbG93ZWRUb29scyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsb3dlZFRvb2xzKSkge1xuICAgICAgICByZXR1cm4geyB0b29sX25hbWVzOiBhbGxvd2VkVG9vbHMgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzPy50b29sTmFtZXMgPz8gW10gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2wubWpzLm1hcCIsImltcG9ydCB7IHRvb2wgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgTUNQU2VydmVyU3RkaW8gYXMgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAsIE1DUFNlcnZlclNTRSBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU1NFLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UsIHdpdGhNQ1BMaXN0VG9vbHNTcGFuLCB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBsb2dnZXIgYXMgZ2xvYmFsTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVERJT19NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RkaW8tbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVFJFQU1BQkxFX0hUVFBfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0cmVhbWFibGUtaHR0cC1tY3AtY2xpZW50JztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NTRV9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3NlLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIHRvb2xGaWx0ZXI7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSk7XG4gICAgICAgIHRoaXMuY2FjaGVUb29sc0xpc3QgPSBvcHRpb25zLmNhY2hlVG9vbHNMaXN0ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLnRvb2xGaWx0ZXIgPSBvcHRpb25zLnRvb2xGaWx0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZ3MgYSBkZWJ1ZyBtZXNzYWdlIHdoZW4gZGVidWcgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSBidWlsZE1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqL1xuICAgIGRlYnVnTG9nKGJ1aWxkTWVzc2FnZSkge1xuICAgICAgICBpZiAoZGVidWcuZW5hYmxlZCh0aGlzLmxvZ2dlci5uYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHdoZW4gdGhpcyBpcyB0cnVlLCB0aGUgZnVuY3Rpb24gdG8gYnVpbGQgdGhlIHN0cmluZyBpcyBjYWxsZWRcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGJ1aWxkTWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/XG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclNTRSB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIHRvb2xGaWx0ZXI7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1NFX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1pbmltdW0gTUNQIHRvb2wgZGF0YSBkZWZpbml0aW9uLlxuICogVGhpcyB0eXBlIGRlZmluaXRpb24gZG9lcyBub3QgaW50ZW5kIHRvIGNvdmVyIGFsbCBwb3NzaWJsZSBwcm9wZXJ0aWVzLlxuICogSXQgc3VwcG9ydHMgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgdXNlZCBpbiB0aGlzIFNESy5cbiAqL1xuZXhwb3J0IGNvbnN0IE1DUFRvb2wgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0U2NoZW1hOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb2JqZWN0JyksXG4gICAgICAgIHByb3BlcnRpZXM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICByZXF1aXJlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHouYm9vbGVhbigpLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIFB1YmxpYyBpbnRlcmZhY2Ugb2YgYW4gTUNQIHNlcnZlciB0aGF0IHByb3ZpZGVzIHRvb2xzLlxuICogWW91IGNhbiB1c2UgdGhpcyBjbGFzcyB0byBwYXNzIE1DUCBzZXJ2ZXIgc2V0dGluZ3MgdG8geW91ciBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0ZGlvIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0ZGlvIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RkaW8ob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclNTRSBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTU0Uge1xuICAgIHVuZGVybHlpbmc7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nID0gbmV3IFVuZGVybHlpbmdNQ1BTZXJ2ZXJTU0Uob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBGZXRjaGVzIGFuZCBmbGF0dGVucyBhbGwgdG9vbHMgZnJvbSBtdWx0aXBsZSBNQ1Agc2VydmVycy5cbiAqIExvZ3MgYW5kIHNraXBzIGFueSBzZXJ2ZXJzIHRoYXQgZmFpbCB0byByZXNwb25kLlxuICovXG5jb25zdCBfY2FjaGVkVG9vbHMgPSB7fTtcbi8qKlxuICogUmVtb3ZlIGNhY2hlZCB0b29scyBmb3IgdGhlIGdpdmVuIHNlcnZlciBzbyB0aGUgbmV4dCBsb29rdXAgZmV0Y2hlcyBmcmVzaCBkYXRhLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJOYW1lIC0gTmFtZSBvZiB0aGUgTUNQIHNlcnZlciB3aG9zZSBjYWNoZSBzaG91bGQgYmUgY2xlYXJlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlKHNlcnZlck5hbWUpIHtcbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xufVxuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHsgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0LCBydW5Db250ZXh0LCBhZ2VudCwgfSkge1xuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXS5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgIH1cbiAgICBjb25zdCBsaXN0VG9vbHNGb3JTZXJ2ZXIgPSBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaGVkTWNwVG9vbHMgPSBhd2FpdCBzZXJ2ZXIubGlzdFRvb2xzKCk7XG4gICAgICAgIGxldCBtY3BUb29scyA9IGZldGNoZWRNY3BUb29scztcbiAgICAgICAgaWYgKHJ1bkNvbnRleHQgJiYgYWdlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7IHJ1bkNvbnRleHQsIGFnZW50LCBzZXJ2ZXJOYW1lOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRUb29scyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sIG9mIGZldGNoZWRNY3BUb29scykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHNlcnZlci50b29sRmlsdGVyO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gYXdhaXQgZmlsdGVyKGNvbnRleHQsIHRvb2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgY2FsbGFibGUgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZFRvb2xOYW1lcyA9IGZpbHRlci5hbGxvd2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZFRvb2xOYW1lcyA9IGZpbHRlci5ibG9ja2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWRUb29sTmFtZXMubGVuZ3RoID4gMCB8fCBibG9ja2VkVG9vbE5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWxsb3dlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja2VkID0gYmxvY2tlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxvY2tlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd2VkIHx8IGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYWxsb3dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBub3QgYWxsb3dlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRUb29scy5wdXNoKHRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWNwVG9vbHMgPSBmaWx0ZXJlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IG1jcFRvb2xzLm1hcCgodCkgPT4gbWNwVG9GdW5jdGlvblRvb2wodCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSk7XG4gICAgICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIF9jYWNoZWRUb29sc1tzZXJ2ZXIubmFtZV0gPSBtY3BUb29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfTtcbiAgICBpZiAoIWdldEN1cnJlbnRUcmFjZSgpKSB7XG4gICAgICAgIHJldHVybiBsaXN0VG9vbHNGb3JTZXJ2ZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhNQ1BMaXN0VG9vbHNTcGFuKGxpc3RUb29sc0ZvclNlcnZlciwge1xuICAgICAgICBkYXRhOiB7IHNlcnZlcjogc2VydmVyLm5hbWUgfSxcbiAgICB9KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxNY3BUb29scyhtY3BTZXJ2ZXJzT3JPcHRzLCBydW5Db250ZXh0LCBhZ2VudCwgY29udmVydFNjaGVtYXNUb1N0cmljdCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgb3B0cyA9IEFycmF5LmlzQXJyYXkobWNwU2VydmVyc09yT3B0cylcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBtY3BTZXJ2ZXJzOiBtY3BTZXJ2ZXJzT3JPcHRzLFxuICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgY29udmVydFNjaGVtYXNUb1N0cmljdCxcbiAgICAgICAgfVxuICAgICAgICA6IG1jcFNlcnZlcnNPck9wdHM7XG4gICAgY29uc3QgeyBtY3BTZXJ2ZXJzLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMgPSBmYWxzZSwgcnVuQ29udGV4dDogcnVuQ29udGV4dEZyb21PcHRzLCBhZ2VudDogYWdlbnRGcm9tT3B0cywgfSA9IG9wdHM7XG4gICAgY29uc3QgYWxsVG9vbHMgPSBbXTtcbiAgICBjb25zdCB0b29sTmFtZXMgPSBuZXcgU2V0KCk7XG4gICAgZm9yIChjb25zdCBzZXJ2ZXIgb2YgbWNwU2VydmVycykge1xuICAgICAgICBjb25zdCBzZXJ2ZXJUb29scyA9IGF3YWl0IGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHtcbiAgICAgICAgICAgIHNlcnZlcixcbiAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3Q6IGNvbnZlcnRTY2hlbWFzVG9TdHJpY3RGcm9tT3B0cyxcbiAgICAgICAgICAgIHJ1bkNvbnRleHQ6IHJ1bkNvbnRleHRGcm9tT3B0cyxcbiAgICAgICAgICAgIGFnZW50OiBhZ2VudEZyb21PcHRzLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2VydmVyVG9vbE5hbWVzID0gbmV3IFNldChzZXJ2ZXJUb29scy5tYXAoKHQpID0+IHQubmFtZSkpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBbLi4uc2VydmVyVG9vbE5hbWVzXS5maWx0ZXIoKG4pID0+IHRvb2xOYW1lcy5oYXMobikpO1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYER1cGxpY2F0ZSB0b29sIG5hbWVzIGZvdW5kIGFjcm9zcyBNQ1Agc2VydmVyczogJHtpbnRlcnNlY3Rpb24uam9pbignLCAnKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygc2VydmVyVG9vbHMpIHtcbiAgICAgICAgICAgIHRvb2xOYW1lcy5hZGQodC5uYW1lKTtcbiAgICAgICAgICAgIGFsbFRvb2xzLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFsbFRvb2xzO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBNQ1AgdG9vbCBkZWZpbml0aW9uIHRvIGEgZnVuY3Rpb24gdG9vbCBmb3IgdGhlIEFnZW50cyBTREsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtY3BUb0Z1bmN0aW9uVG9vbChtY3BUb29sLCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UoaW5wdXQsIF9jb250ZXh0KSB7XG4gICAgICAgIGxldCBhcmdzID0ge307XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnICYmIGlucHV0KSB7XG4gICAgICAgICAgICBhcmdzID0gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJiBpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgICAgICBhcmdzID0gaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgIGN1cnJlbnRTcGFuLnNwYW5EYXRhWydtY3BfZGF0YSddID0geyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHNlcnZlci5jYWxsVG9vbChtY3BUb29sLm5hbWUsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gY29udGVudC5sZW5ndGggPT09IDEgPyBjb250ZW50WzBdIDogY29udGVudDtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICAuLi5tY3BUb29sLmlucHV0U2NoZW1hLFxuICAgICAgICB0eXBlOiBtY3BUb29sLmlucHV0U2NoZW1hPy50eXBlID8/ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5wcm9wZXJ0aWVzID8/IHt9LFxuICAgICAgICByZXF1aXJlZDogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucmVxdWlyZWQgPz8gW10sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5hZGRpdGlvbmFsUHJvcGVydGllcyA/PyBmYWxzZSxcbiAgICB9O1xuICAgIGlmIChjb252ZXJ0U2NoZW1hc1RvU3RyaWN0IHx8IHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gdHJ1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RyaWN0U2NoZW1hID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRvb2woe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1jcFRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBzdHJpY3RTY2hlbWEsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnbG9iYWxMb2dnZXIud2FybihgRXJyb3IgY29udmVydGluZyBNQ1Agc2NoZW1hIHRvIHN0cmljdCBtb2RlOiAke2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uU3RyaWN0U2NoZW1hID0ge1xuICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIHRvb2woe1xuICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBtY3BUb29sLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBwYXJhbWV0ZXJzOiBub25TdHJpY3RTY2hlbWEsXG4gICAgICAgIHN0cmljdDogZmFsc2UsXG4gICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICB9KTtcbn1cbi8qKlxuICogRW5zdXJlcyB0aGUgZ2l2ZW4gSlNPTiBzY2hlbWEgaXMgc3RyaWN0IChubyBhZGRpdGlvbmFsIHByb3BlcnRpZXMsIHJlcXVpcmVkIGZpZWxkcyBzZXQpLlxuICovXG5mdW5jdGlvbiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYSkge1xuICAgIGNvbnN0IG91dCA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoIW91dC5yZXF1aXJlZClcbiAgICAgICAgb3V0LnJlcXVpcmVkID0gW107XG4gICAgcmV0dXJuIG91dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1jcC5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbi8vIFVzZSBmdW5jdGlvbiBpbnN0ZWFkIG9mIGV4cG9ydGluZyB0aGUgdmFsdWUgdG8gcHJldmVudFxuLy8gY2lyY3VsYXIgZGVwZW5kZW5jeSByZXNvbHV0aW9uIGlzc3VlcyBjYXVzZWQgYnkgb3RoZXIgZXhwb3J0cyBpbiAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnQgY2xhc3MgQnJvd3NlckV2ZW50RW1pdHRlciB7XG4gICAgI3RhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpO1xuICAgICNsaXN0ZW5lcldyYXBwZXJzID0gbmV3IE1hcCgpO1xuICAgIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IHR5cGU7XG4gICAgICAgIGxldCBsaXN0ZW5lcnNGb3JUeXBlID0gdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5nZXQoZXZlbnRUeXBlKTtcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnNGb3JUeXBlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5zZXQoZXZlbnRUeXBlLCBsaXN0ZW5lcnNGb3JUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgd3JhcHBlcnMgPSBsaXN0ZW5lcnNGb3JUeXBlLmdldChsaXN0ZW5lcik7XG4gICAgICAgIGlmICghd3JhcHBlcnMpIHtcbiAgICAgICAgICAgIHdyYXBwZXJzID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZS5zZXQobGlzdGVuZXIsIHdyYXBwZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVyID0gKChldmVudCkgPT4gbGlzdGVuZXIoLi4uKGV2ZW50LmRldGFpbCA/PyBbXSkpKTtcbiAgICAgICAgd3JhcHBlcnMuYWRkKHdyYXBwZXIpO1xuICAgICAgICB0aGlzLiN0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIHdyYXBwZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IHR5cGU7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyc0ZvclR5cGUgPSB0aGlzLiNsaXN0ZW5lcldyYXBwZXJzLmdldChldmVudFR5cGUpO1xuICAgICAgICBjb25zdCB3cmFwcGVycyA9IGxpc3RlbmVyc0ZvclR5cGU/LmdldChsaXN0ZW5lcik7XG4gICAgICAgIGlmICh3cmFwcGVycz8uc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB3cmFwcGVyIG9mIHdyYXBwZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCB3cmFwcGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGU/LmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXJzRm9yVHlwZT8uc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuZGVsZXRlKGV2ZW50VHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCh0eXBlLCB7IGRldGFpbDogYXJncyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RhcmdldC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIHRoaXMub2ZmKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgbGlzdGVuZXIoLi4uYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub24odHlwZSwgaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydCB7IEJyb3dzZXJFdmVudEVtaXR0ZXIgYXMgUnVudGltZUV2ZW50RW1pdHRlciB9O1xuZXhwb3J0IGNvbnN0IHJhbmRvbVVVSUQgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5yYW5kb21VVUlEKSB7XG4gICAgICAgIHJldHVybiBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIH1cbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwO1xuICAgICAgICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZSA9IGNsYXNzIFJlYWRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHBpcGVUbyhfZGVzdGluYXRpb24sIF9vcHRpb25zKSB7IH1cbiAgICBwaXBlVGhyb3VnaChfdHJhbnNmb3JtLCBfb3B0aW9ucykgeyB9XG59O1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlU3RyZWFtID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIgPSBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI7XG5leHBvcnQgY29uc3QgVHJhbnNmb3JtU3RyZWFtID0gZ2xvYmFsVGhpcy5UcmFuc2Zvcm1TdHJlYW07XG5leHBvcnQgY2xhc3MgQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGNvbnRleHQgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgcnVuKGNvbnRleHQsIGZuKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgICB9XG4gICAgZW50ZXJXaXRoKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IHsgTUNQU2VydmVyU3RkaW8sIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwLCBNQ1BTZXJ2ZXJTU0UsIH0gZnJvbSBcIi4vbWNwLXNlcnZlci9icm93c2VyLm1qc1wiO1xuY2xhc3MgQnJvd3NlclRpbWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKSB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XG4gICAgICAgIHRpbWVvdXQucmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC51bnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC51bnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQudW5yZWYgOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0Lmhhc1JlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5oYXNSZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0Lmhhc1JlZiA6ICgpID0+IHRydWU7XG4gICAgICAgIHRpbWVvdXQucmVmcmVzaCA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWZyZXNoID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5yZWZyZXNoIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgcmV0dXJuIHRpbWVvdXQ7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cbn1cbmNvbnN0IHRpbWVyID0gbmV3IEJyb3dzZXJUaW1lcigpO1xuZXhwb3J0IHsgdGltZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsImltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlcjtcbiAgICB9XG4gICAgZW1pdCh0eXBlLCAuLi5hcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KHR5cGUsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9uY2UodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxufVxuLyoqXG4gKiBFdmVudCBlbWl0dGVyIHRoYXQgZXZlcnkgQWdlbnQgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50SG9va3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IFJ1bm5lciBpbnN0YW5jZSBpbmhlcml0cyBmcm9tIGFuZCB0aGF0IGVtaXRzIGV2ZW50cyBmb3IgdGhlIGxpZmVjeWNsZVxuICogb2YgdGhlIG92ZXJhbGwgcnVuLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSG9va3MgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpZmVjeWNsZS5tanMubWFwIiwiaW1wb3J0IHsgbG9hZEVudiB9IGZyb20gXCIuL2NvbmZpZy5tanNcIjtcbmV4cG9ydCBjb25zdCBPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSA9ICdPUEVOQUlfREVGQVVMVF9NT0RFTCc7XG4vKipcbiAqIFJldHVybnMgVHJ1ZSBpZiB0aGUgbW9kZWwgbmFtZSBpcyBhIEdQVC01IG1vZGVsIGFuZCByZWFzb25pbmcgc2V0dGluZ3MgYXJlIHJlcXVpcmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQobW9kZWxOYW1lKSB7XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKCdncHQtNS1jaGF0JykpIHtcbiAgICAgICAgLy8gZ3B0LTUtY2hhdC1sYXRlc3QgZG9lcyBub3QgcmVxdWlyZSByZWFzb25pbmcgc2V0dGluZ3NcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBtYXRjaGVzIGFueSBvZiBncHQtNSBtb2RlbHNcbiAgICByZXR1cm4gbW9kZWxOYW1lLnN0YXJ0c1dpdGgoJ2dwdC01Jyk7XG59XG4vKipcbiAqIFJldHVybnMgVHJ1ZSBpZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IG1vZGVsLlxuICogVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSBpZiB0aGUgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncyBhcmUgY29tcGF0aWJsZSB3aXRoIEdQVC01IG1vZGVscy5cbiAqIElmIHRoZSBkZWZhdWx0IG1vZGVsIGlzIG5vdCBhIEdQVC01IG1vZGVsLCB0aGUgbW9kZWwgc2V0dGluZ3MgYXJlIGNvbXBhdGlibGUgd2l0aCBvdGhlciBtb2RlbHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0dwdDVEZWZhdWx0KCkge1xuICAgIHJldHVybiBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChnZXREZWZhdWx0TW9kZWwoKSk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgbW9kZWwgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbCgpIHtcbiAgICBjb25zdCBlbnYgPSBsb2FkRW52KCk7XG4gICAgcmV0dXJuIChlbnZbT1BFTkFJX0RFRkFVTFRfTU9ERUxfRU5WX1ZBUklBQkxFX05BTUVdPy50b0xvd2VyQ2FzZSgpID8/ICdncHQtNC4xJyk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MuXG4gKiBJZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IG1vZGVsLCByZXR1cm5zIHRoZSBHUFQtNSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzLlxuICogT3RoZXJ3aXNlLCByZXR1cm5zIHRoZSBsZWdhY3kgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFNldHRpbmdzKG1vZGVsKSB7XG4gICAgY29uc3QgX21vZGVsID0gbW9kZWwgPz8gZ2V0RGVmYXVsdE1vZGVsKCk7XG4gICAgaWYgKGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKF9tb2RlbCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8vIFdlIGNob3NlIFwibG93XCIgaW5zdGVhZCBvZiBcIm1pbmltYWxcIiBiZWNhdXNlIHNvbWUgb2YgdGhlIGJ1aWx0LWluIHRvb2xzXG4gICAgICAgICAgICAvLyAoZS5nLiwgZmlsZSBzZWFyY2gsIGltYWdlIGdlbmVyYXRpb24sIGV0Yy4pIGRvIG5vdCBzdXBwb3J0IFwibWluaW1hbFwiXG4gICAgICAgICAgICAvLyBJZiB5b3Ugd2FudCB0byB1c2UgXCJtaW5pbWFsXCIgcmVhc29uaW5nIGVmZm9ydCwgeW91IGNhbiBwYXNzIHlvdXIgb3duIG1vZGVsIHNldHRpbmdzXG4gICAgICAgICAgICByZWFzb25pbmc6IHsgZWZmb3J0OiAnbG93JyB9LFxuICAgICAgICAgICAgdGV4dDogeyB2ZXJib3NpdHk6ICdsb3cnIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHRNb2RlbC5tanMubWFwIiwiaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbWVzc2FnZSB0aGF0IHdpbGwgYmUgZ2l2ZW4gYXMgdG9vbCBvdXRwdXQgdG8gdGhlIG1vZGVsIHRoYXQgcmVxdWVzdGVkIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zlck1lc3NhZ2UoYWdlbnQpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoeyBhc3Npc3RhbnQ6IGFnZW50Lm5hbWUgfSk7XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICpcbiAqIEBwYXJhbSBhZ2VudCBUaGUgYWdlbnQgdG8gdHJhbnNmZXIgdG9cbiAqIEByZXR1cm5zIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KSB7XG4gICAgcmV0dXJuIGB0cmFuc2Zlcl90b18ke3RvRnVuY3Rpb25Ub29sTmFtZShhZ2VudC5uYW1lKX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KSB7XG4gICAgcmV0dXJuIGBIYW5kb2ZmIHRvIHRoZSAke2FnZW50Lm5hbWV9IGFnZW50IHRvIGhhbmRsZSB0aGUgcmVxdWVzdC4gJHthZ2VudC5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyd9YDtcbn1cbmV4cG9ydCBjbGFzcyBIYW5kb2ZmIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbE5hbWU7XG4gICAgLyoqXG4gICAgICogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICB0b29sRGVzY3JpcHRpb247XG4gICAgLyoqXG4gICAgICogVGhlIEpTT04gc2NoZW1hIGZvciB0aGUgaGFuZG9mZiBpbnB1dC4gQ2FuIGJlIGVtcHR5IGlmIHRoZSBoYW5kb2ZmIGRvZXMgbm90IHRha2UgYW4gaW5wdXRcbiAgICAgKi9cbiAgICBpbnB1dEpzb25TY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBpbnB1dCBKU09OIHNjaGVtYSBpcyBpbiBzdHJpY3QgbW9kZS4gV2UgKipzdHJvbmdseSoqIHJlY29tbWVuZCBzZXR0aW5nIHRoaXMgdG9cbiAgICAgKiB0cnVlLCBhcyBpdCBpbmNyZWFzZXMgdGhlIGxpa2VsaWhvb2Qgb2YgY29ycmVjdCBKU09OIGlucHV0LlxuICAgICAqL1xuICAgIHN0cmljdEpzb25TY2hlbWEgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIGhhbmRvZmYuIFRoZSBwYXJhbWV0ZXJzIHBhc3NlZCBhcmU6XG4gICAgICogMS4gVGhlIGhhbmRvZmYgcnVuIGNvbnRleHRcbiAgICAgKiAyLiBUaGUgYXJndW1lbnRzIGZyb20gdGhlIExMTSwgYXMgYSBKU09OIHN0cmluZy4gRW1wdHkgc3RyaW5nIGlmIGlucHV0SnNvblNjaGVtYSBpcyBlbXB0eS5cbiAgICAgKlxuICAgICAqIE11c3QgcmV0dXJuIGFuIGFnZW50XG4gICAgICovXG4gICAgb25JbnZva2VIYW5kb2ZmO1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBhZ2VudCB0aGF0IGlzIGJlaW5nIGhhbmRlZCBvZmYgdG8uXG4gICAgICovXG4gICAgYWdlbnROYW1lO1xuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBmaWx0ZXJzIHRoZSBpbnB1dHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBuZXh0IGFnZW50LiBCeSBkZWZhdWx0LCB0aGUgbmV3IGFnZW50XG4gICAgICogc2VlcyB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXN0b3J5LiBJbiBzb21lIGNhc2VzLCB5b3UgbWF5IHdhbnQgdG8gZmlsdGVyIGlucHV0cyBlLmcuIHRvXG4gICAgICogcmVtb3ZlIG9sZGVyIGlucHV0cywgb3IgcmVtb3ZlIHRvb2xzIGZyb20gZXhpc3RpbmcgaW5wdXRzLlxuICAgICAqXG4gICAgICogVGhlIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXNzdG9yeSBzbyBmYXIsIGluY2x1ZGluZyB0aGUgaW5wdXQgaXRlbVxuICAgICAqIHRoYXQgdHJpZ2dlcmVkIHRoZSBoYW5kb2ZmIGFuZCBhIHRvb2wgY2FsbCBvdXRwdXQgaXRlbSByZXByZXNlbnRpbmcgdGhlIGhhbmRvZmYgdG9vbCdzIG91dHB1dC5cbiAgICAgKlxuICAgICAqIFlvdSBhcmUgZnJlZSB0byBtb2RpZnkgdGhlIGlucHV0IGhpc3Rvcnkgb3IgbmV3IGl0ZW1zIGFzIHlvdSBzZWUgZml0LiBUaGUgbmV4dCBhZ2VudCB0aGF0IHJ1bnNcbiAgICAgKiB3aWxsIHJlY2VpdmUgYGhhbmRvZmZJbnB1dERhdGEuYWxsSXRlbXNcbiAgICAgKi9cbiAgICBpbnB1dEZpbHRlcjtcbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0b29sIGRlZmluaXRpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBpbnZva2UgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgZ2V0SGFuZG9mZkFzRnVuY3Rpb25Ub29sKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50b29sRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0aGlzLmlucHV0SnNvblNjaGVtYSxcbiAgICAgICAgICAgIHN0cmljdDogdGhpcy5zdHJpY3RKc29uU2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpc0VuYWJsZWQgPSBhc3luYyAoKSA9PiB0cnVlO1xuICAgIGNvbnN0cnVjdG9yKGFnZW50LCBvbkludm9rZUhhbmRvZmYpIHtcbiAgICAgICAgdGhpcy5hZ2VudE5hbWUgPSBhZ2VudC5uYW1lO1xuICAgICAgICB0aGlzLm9uSW52b2tlSGFuZG9mZiA9IG9uSW52b2tlSGFuZG9mZjtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IGRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUoYWdlbnQpO1xuICAgICAgICB0aGlzLnRvb2xEZXNjcmlwdGlvbiA9IGRlZmF1bHRIYW5kb2ZmVG9vbERlc2NyaXB0aW9uKGFnZW50KTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGhhbmRvZmYgZnJvbSBhbiBhZ2VudC4gSGFuZG9mZnMgYXJlIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCB3aGVuIHlvdSBwYXNzIGFuIGFnZW50XG4gKiBpbnRvIHRoZSBgaGFuZG9mZnNgIG9wdGlvbiBvZiB0aGUgYEFnZW50YCBjb25zdHJ1Y3Rvci4gQWx0ZXJuYXRpdmVseSwgeW91IGNhbiB1c2UgdGhpcyBmdW5jdGlvblxuICogdG8gY3JlYXRlIGEgaGFuZG9mZiBtYW51YWxseSwgZ2l2aW5nIHlvdSBtb3JlIGNvbnRyb2wgb3ZlciBjb25maWd1cmF0aW9uLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVElucHV0VHlwZSBUaGUgaW5wdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZG9mZihhZ2VudCwgY29uZmlnID0ge30pIHtcbiAgICBsZXQgcGFyc2VyID0gdW5kZWZpbmVkO1xuICAgIGNvbnN0IGhhc09uSGFuZG9mZiA9ICEhY29uZmlnLm9uSGFuZG9mZjtcbiAgICBjb25zdCBoYXNJbnB1dFR5cGUgPSAhIWNvbmZpZy5pbnB1dFR5cGU7XG4gICAgY29uc3QgaGFzQm90aE9yTmVpdGhlckhhbmRvZmZBbmRJbnB1dFR5cGUgPSBoYXNPbkhhbmRvZmYgPT09IGhhc0lucHV0VHlwZTtcbiAgICBpZiAoIWhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1lvdSBtdXN0IHByb3ZpZGUgZWl0aGVyIGJvdGggYG9uSGFuZG9mZmAgYW5kIGBpbnB1dFR5cGVgIG9yIG5laXRoZXIuJyk7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIG9uSW52b2tlSGFuZG9mZihjb250ZXh0LCBpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlcikge1xuICAgICAgICAgICAgaWYgKCFpbnB1dEpzb25TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQgYnV0IGdvdDogJHtpbnB1dEpzb25TdHJpbmd9YCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogYGlucHV0IGlzIGVtcHR5YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdIYW5kb2ZmIGZ1bmN0aW9uIGV4cGVjdGVkIG5vbiBlbXB0eSBpbnB1dCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyB2ZXJpZnkgdGhhdCBpdCdzIHZhbGlkIGlucHV0IGJ1dCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwYXJzZXIoaW5wdXRKc29uU3RyaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm9uSGFuZG9mZikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb25maWcub25IYW5kb2ZmKGNvbnRleHQsIHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgSlNPTiBwcm92aWRlZGAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbG9nZ2VyLmRvbnRMb2dUb29sRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEludmFsaWQgSlNPTiB3aGVuIHBhcnNpbmc6ICR7aW5wdXRKc29uU3RyaW5nfS4gRXJyb3I6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBwcm92aWRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZj8uKGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgY29uc3QgaGFuZG9mZiA9IG5ldyBIYW5kb2ZmKGFnZW50LCBvbkludm9rZUhhbmRvZmYpO1xuICAgIGlmICh0eXBlb2YgY29uZmlnLmlzRW5hYmxlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSBjb25maWcuaXNFbmFibGVkO1xuICAgICAgICBoYW5kb2ZmLmlzRW5hYmxlZCA9IGFzeW5jICh7IHJ1bkNvbnRleHQsIGFnZW50IH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByZWRpY2F0ZSh7IHJ1bkNvbnRleHQsIGFnZW50IH0pO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5pc0VuYWJsZWQgPT09ICdib29sZWFuJykge1xuICAgICAgICBoYW5kb2ZmLmlzRW5hYmxlZCA9IGFzeW5jICgpID0+IGNvbmZpZy5pc0VuYWJsZWQ7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRUeXBlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoY29uZmlnLmlucHV0VHlwZSwgaGFuZG9mZi50b29sTmFtZSk7XG4gICAgICAgIGhhbmRvZmYuaW5wdXRKc29uU2NoZW1hID0gcmVzdWx0LnNjaGVtYTtcbiAgICAgICAgaGFuZG9mZi5zdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyID0gcmVzdWx0LnBhcnNlcjtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sTmFtZU92ZXJyaWRlKSB7XG4gICAgICAgIGhhbmRvZmYudG9vbE5hbWUgPSBjb25maWcudG9vbE5hbWVPdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xEZXNjcmlwdGlvbiA9IGNvbmZpZy50b29sRGVzY3JpcHRpb25PdmVycmlkZTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5pbnB1dEZpbHRlcikge1xuICAgICAgICBoYW5kb2ZmLmlucHV0RmlsdGVyID0gY29uZmlnLmlucHV0RmlsdGVyO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZG9mZjtcbn1cbi8qKlxuICogUmV0dXJucyBhIGhhbmRvZmYgZm9yIHRoZSBnaXZlbiBhZ2VudC4gSWYgdGhlIGFnZW50IGlzIGFscmVhZHkgd3JhcHBlZCBpbnRvIGEgaGFuZG9mZixcbiAqIGl0IHdpbGwgYmUgcmV0dXJuZWQgYXMgaXMuIE90aGVyd2lzZSwgYSBuZXcgaGFuZG9mZiBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWQuXG4gKlxuICogQHRlbXBsYXRlIFRDb250ZXh0IFRoZSBjb250ZXh0IG9mIHRoZSBoYW5kb2ZmXG4gKiBAdGVtcGxhdGUgVE91dHB1dCBUaGUgb3V0cHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhhbmRvZmYoYWdlbnQpIHtcbiAgICBpZiAoYWdlbnQgaW5zdGFuY2VvZiBIYW5kb2ZmKSB7XG4gICAgICAgIHJldHVybiBhZ2VudDtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmYoYWdlbnQpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFuZG9mZi5tanMubWFwIiwiLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIHRoZSBvdXRwdXQgbWVzc2FnZS5cbiAqIEBwYXJhbSBvdXRwdXRNZXNzYWdlXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZShvdXRwdXRNZXNzYWdlKSB7XG4gICAgaWYgKG91dHB1dE1lc3NhZ2UudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXRNZXNzYWdlLnJvbGUgIT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RJdGVtID0gb3V0cHV0TWVzc2FnZS5jb250ZW50W291dHB1dE1lc3NhZ2UuY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdEl0ZW0udHlwZSAhPT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbGFzdEl0ZW0udGV4dDtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0cHV0VGV4dChvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0Lm91dHB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gKGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0Lm91dHB1dFtvdXRwdXQub3V0cHV0Lmxlbmd0aCAtIDFdKSB8fCAnJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXNzYWdlcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBBZ2VudEhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWxsTWNwVG9vbHMgfSBmcm9tIFwiLi9tY3AubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncywgZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQsIGlzR3B0NURlZmF1bHQsIH0gZnJvbSBcIi4vZGVmYXVsdE1vZGVsLm1qc1wiO1xuaW1wb3J0IHsgdG9vbCwgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgZ2V0SGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgeyBSdW5uZXIgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldE91dHB1dFRleHQgfSBmcm9tIFwiLi91dGlscy9tZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IGlzQWdlbnRUb29sSW5wdXQgfSBmcm9tIFwiLi91dGlscy90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8vIFBlci1wcm9jZXNzLCBlcGhlbWVyYWwgbWFwIGxpbmtpbmcgYSBmdW5jdGlvbiB0b29sIGNhbGwgdG8gaXRzIG5lc3RlZFxuLy8gQWdlbnQgcnVuIHJlc3VsdCB3aXRoaW4gdGhlIHNhbWUgcnVuOyBlbnRyeSBpcyByZW1vdmVkIGFmdGVyIGNvbnN1bXB0aW9uLlxuY29uc3QgYWdlbnRUb29sUnVuUmVzdWx0cyA9IG5ldyBXZWFrTWFwKCk7XG5leHBvcnQgZnVuY3Rpb24gc2F2ZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sQ2FsbCwgcnVuUmVzdWx0KSB7XG4gICAgaWYgKHRvb2xDYWxsKSB7XG4gICAgICAgIGFnZW50VG9vbFJ1blJlc3VsdHMuc2V0KHRvb2xDYWxsLCBydW5SZXN1bHQpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0KHRvb2xDYWxsKSB7XG4gICAgY29uc3QgcnVuUmVzdWx0ID0gYWdlbnRUb29sUnVuUmVzdWx0cy5nZXQodG9vbENhbGwpO1xuICAgIGlmIChydW5SZXN1bHQpIHtcbiAgICAgICAgYWdlbnRUb29sUnVuUmVzdWx0cy5kZWxldGUodG9vbENhbGwpO1xuICAgIH1cbiAgICByZXR1cm4gcnVuUmVzdWx0O1xufVxuLy8gVGhlIHBhcmFtZXRlciB0eXBlIGZvIG5lZWRBcHByb3ZhbCBmdW5jdGlvbiBmb3IgdGhlIHRvb2wgY3JlYXRlZCBieSBBZ2VudC5hc1Rvb2woKSBtZXRob2RcbmNvbnN0IEFnZW50QXNUb29sTmVlZEFwcHJvdmFsU2NoYW1lID0gei5vYmplY3QoeyBpbnB1dDogei5zdHJpbmcoKSB9KTtcbi8qKlxuICogVGhlIGNsYXNzIHJlcHJlc2VudGluZyBhbiBBSSBhZ2VudCBjb25maWd1cmVkIHdpdGggaW5zdHJ1Y3Rpb25zLCB0b29scywgZ3VhcmRyYWlscywgaGFuZG9mZnMgYW5kIG1vcmUuXG4gKlxuICogV2Ugc3Ryb25nbHkgcmVjb21tZW5kIHBhc3NpbmcgYGluc3RydWN0aW9uc2AsIHdoaWNoIGlzIHRoZSBcInN5c3RlbSBwcm9tcHRcIiBmb3IgdGhlIGFnZW50LiBJblxuICogYWRkaXRpb24sIHlvdSBjYW4gcGFzcyBgaGFuZG9mZkRlc2NyaXB0aW9uYCwgd2hpY2ggaXMgYSBodW1hbi1yZWFkYWJsZSBkZXNjcmlwdGlvbiBvZiB0aGVcbiAqIGFnZW50LCB1c2VkIHdoZW4gdGhlIGFnZW50IGlzIHVzZWQgaW5zaWRlIHRvb2xzL2hhbmRvZmZzLlxuICpcbiAqIEFnZW50cyBhcmUgZ2VuZXJpYyBvbiB0aGUgY29udGV4dCB0eXBlLiBUaGUgY29udGV4dCBpcyBhIChtdXRhYmxlKSBvYmplY3QgeW91IGNyZWF0ZS4gSXQgaXNcbiAqIHBhc3NlZCB0byB0b29sIGZ1bmN0aW9ucywgaGFuZG9mZnMsIGd1YXJkcmFpbHMsIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50IGV4dGVuZHMgQWdlbnRIb29rcyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIEFnZW50IHdpdGggaGFuZG9mZnMgYW5kIGF1dG9tYXRpY2FsbHkgaW5mZXIgdGhlIHVuaW9uIHR5cGUgZm9yIFRPdXRwdXQgZnJvbSB0aGUgaGFuZG9mZiBhZ2VudHMnIG91dHB1dCB0eXBlcy5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IEFnZW50KHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIGhhbmRvZmZzOiBjb25maWcuaGFuZG9mZnMsXG4gICAgICAgICAgICBvdXRwdXRUeXBlOiBjb25maWcub3V0cHV0VHlwZSxcbiAgICAgICAgICAgIGhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIERFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIgPSAnJztcbiAgICBuYW1lO1xuICAgIGluc3RydWN0aW9ucztcbiAgICBwcm9tcHQ7XG4gICAgaGFuZG9mZkRlc2NyaXB0aW9uO1xuICAgIGhhbmRvZmZzO1xuICAgIG1vZGVsO1xuICAgIG1vZGVsU2V0dGluZ3M7XG4gICAgdG9vbHM7XG4gICAgbWNwU2VydmVycztcbiAgICBpbnB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0R3VhcmRyYWlscztcbiAgICBvdXRwdXRUeXBlID0gJ3RleHQnO1xuICAgIHRvb2xVc2VCZWhhdmlvcjtcbiAgICByZXNldFRvb2xDaG9pY2U7XG4gICAgX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQ7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm5hbWUgIT09ICdzdHJpbmcnIHx8IGNvbmZpZy5uYW1lLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FnZW50IG11c3QgaGF2ZSBhIG5hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gY29uZmlnLm5hbWU7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gY29uZmlnLmluc3RydWN0aW9ucyA/PyBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSO1xuICAgICAgICB0aGlzLnByb21wdCA9IGNvbmZpZy5wcm9tcHQ7XG4gICAgICAgIHRoaXMuaGFuZG9mZkRlc2NyaXB0aW9uID0gY29uZmlnLmhhbmRvZmZEZXNjcmlwdGlvbiA/PyAnJztcbiAgICAgICAgdGhpcy5oYW5kb2ZmcyA9IGNvbmZpZy5oYW5kb2ZmcyA/PyBbXTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IGNvbmZpZy5tb2RlbCA/PyAnJztcbiAgICAgICAgdGhpcy5tb2RlbFNldHRpbmdzID0gY29uZmlnLm1vZGVsU2V0dGluZ3MgPz8gZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy50b29scyA9IGNvbmZpZy50b29scyA/PyBbXTtcbiAgICAgICAgdGhpcy5fdG9vbHNFeHBsaWNpdGx5Q29uZmlndXJlZCA9IGNvbmZpZy50b29scyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm1jcFNlcnZlcnMgPSBjb25maWcubWNwU2VydmVycyA/PyBbXTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbHMgPSBjb25maWcuaW5wdXRHdWFyZHJhaWxzID8/IFtdO1xuICAgICAgICB0aGlzLm91dHB1dEd1YXJkcmFpbHMgPSBjb25maWcub3V0cHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgaWYgKGNvbmZpZy5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFR5cGUgPSBjb25maWcub3V0cHV0VHlwZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvb2xVc2VCZWhhdmlvciA9IGNvbmZpZy50b29sVXNlQmVoYXZpb3IgPz8gJ3J1bl9sbG1fYWdhaW4nO1xuICAgICAgICB0aGlzLnJlc2V0VG9vbENob2ljZSA9IGNvbmZpZy5yZXNldFRvb2xDaG9pY2UgPz8gdHJ1ZTtcbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBUaGUgdXNlciBzZXRzIGEgbm9uLWRlZmF1bHQgbW9kZWxcbiAgICAgICAgY29uZmlnLm1vZGVsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIC8vIFRoZSBkZWZhdWx0IG1vZGVsIGlzIGdwdC01XG4gICAgICAgICAgICBpc0dwdDVEZWZhdWx0KCkgJiZcbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBzcGVjaWZpZWQgbW9kZWwgaXMgbm90IGEgZ3B0LTUgbW9kZWxcbiAgICAgICAgICAgICh0eXBlb2YgY29uZmlnLm1vZGVsICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgICAgICFncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChjb25maWcubW9kZWwpKSAmJlxuICAgICAgICAgICAgLy8gVGhlIG1vZGVsIHNldHRpbmdzIGFyZSBub3QgY3VzdG9taXplZCBmb3IgdGhlIHNwZWNpZmllZCBtb2RlbFxuICAgICAgICAgICAgY29uZmlnLm1vZGVsU2V0dGluZ3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBzY2VuYXJpbywgd2Ugc2hvdWxkIHVzZSBhIGdlbmVyaWMgbW9kZWwgc2V0dGluZ3NcbiAgICAgICAgICAgIC8vIGJlY2F1c2Ugbm9uLWdwdC01IG1vZGVscyBhcmUgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgZGVmYXVsdCBncHQtNSBtb2RlbCBzZXR0aW5ncy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBiZXN0LWVmZm9ydCBhdHRlbXB0IHRvIG1ha2UgdGhlIGFnZW50IHdvcmsgd2l0aCBub24tZ3B0LTUgbW9kZWxzLlxuICAgICAgICAgICAgdGhpcy5tb2RlbFNldHRpbmdzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgLy8gLS0tIFJ1bnRpbWUgd2FybmluZyBmb3IgaGFuZG9mZiBvdXRwdXQgdHlwZSBjb21wYXRpYmlsaXR5IC0tLVxuICAgICAgICBpZiAoY29uZmlnLmhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgY29uZmlnLmhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRvZmZzICYmIHRoaXMub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dFR5cGVzID0gbmV3IFNldChbSlNPTi5zdHJpbmdpZnkodGhpcy5vdXRwdXRUeXBlKV0pO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaCBvZiB0aGlzLmhhbmRvZmZzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgnb3V0cHV0VHlwZScgaW4gaCAmJiBoLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGVzLmFkZChKU09OLnN0cmluZ2lmeShoLm91dHB1dFR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgnYWdlbnQnIGluIGggJiYgaC5hZ2VudC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5hZ2VudC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dFR5cGVzLnNpemUgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBbQWdlbnRdIFdhcm5pbmc6IEhhbmRvZmYgYWdlbnRzIGhhdmUgZGlmZmVyZW50IG91dHB1dCB0eXBlczogJHtBcnJheS5mcm9tKG91dHB1dFR5cGVzKS5qb2luKCcsICcpfS4gWW91IGNhbiBtYWtlIGl0IHR5cGUtc2FmZSBieSB1c2luZyBBZ2VudC5jcmVhdGUoeyAuLi4gfSkgbWV0aG9kIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE91dHB1dCBzY2hlbWEgbmFtZS5cbiAgICAgKi9cbiAgICBnZXQgb3V0cHV0U2NoZW1hTmFtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnWm9kT3V0cHV0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgY29weSBvZiB0aGUgYWdlbnQsIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50cyBjaGFuZ2VkLiBGb3IgZXhhbXBsZSwgeW91IGNvdWxkIGRvOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogY29uc3QgbmV3QWdlbnQgPSBhZ2VudC5jbG9uZSh7IGluc3RydWN0aW9uczogJ05ldyBpbnN0cnVjdGlvbnMnIH0pXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gQSBwYXJ0aWFsIGNvbmZpZ3VyYXRpb24gdG8gY2hhbmdlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGFnZW50IHdpdGggdGhlIGdpdmVuIGNoYW5nZXMuXG4gICAgICovXG4gICAgY2xvbmUoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWdlbnQoe1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGlzIGFnZW50IGludG8gYSB0b29sLCBjYWxsYWJsZSBieSBvdGhlciBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIGhhbmRvZmZzIGluIHR3byB3YXlzOlxuICAgICAqIDEuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHJlY2VpdmVzIHRoZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50XG4gICAgICogICAgcmVjZWl2ZXMgZ2VuZXJhdGVkIGlucHV0LlxuICAgICAqIDIuIEluIGhhbmRvZmZzLCB0aGUgbmV3IGFnZW50IHRha2VzIG92ZXIgdGhlIGNvbnZlcnNhdGlvbi4gSW4gdGhpcyB0b29sLCB0aGUgbmV3IGFnZW50IGlzXG4gICAgICogICAgY2FsbGVkIGFzIGEgdG9vbCwgYW5kIHRoZSBjb252ZXJzYXRpb24gaXMgY29udGludWVkIGJ5IHRoZSBvcmlnaW5hbCBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHRvb2wuXG4gICAgICogQHJldHVybnMgQSB0b29sIHRoYXQgcnVucyB0aGUgYWdlbnQgYW5kIHJldHVybnMgdGhlIG91dHB1dCB0ZXh0LlxuICAgICAqL1xuICAgIGFzVG9vbChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgdG9vbE5hbWUsIHRvb2xEZXNjcmlwdGlvbiwgY3VzdG9tT3V0cHV0RXh0cmFjdG9yLCBuZWVkc0FwcHJvdmFsLCBydW5Db25maWcsIHJ1bk9wdGlvbnMsIGlzRW5hYmxlZCwgfSA9IG9wdGlvbnM7XG4gICAgICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2xOYW1lID8/IHRvRnVuY3Rpb25Ub29sTmFtZSh0aGlzLm5hbWUpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2xEZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IEFnZW50QXNUb29sTmVlZEFwcHJvdmFsU2NoYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgbmVlZHNBcHByb3ZhbCxcbiAgICAgICAgICAgIGlzRW5hYmxlZCxcbiAgICAgICAgICAgIGV4ZWN1dGU6IGFzeW5jIChkYXRhLCBjb250ZXh0LCBkZXRhaWxzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FnZW50VG9vbElucHV0KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0FnZW50IHRvb2wgY2FsbGVkIHdpdGggaW52YWxpZCBpbnB1dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBydW5uZXIgPSBuZXcgUnVubmVyKHJ1bkNvbmZpZyA/PyB7fSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVubmVyLnJ1bih0aGlzLCBkYXRhLmlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIC4uLihydW5PcHRpb25zID8/IHt9KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlc1N0b3BBdFRvb2xOYW1lcyA9IHR5cGVvZiB0aGlzLnRvb2xVc2VCZWhhdmlvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sVXNlQmVoYXZpb3IgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgJ3N0b3BBdFRvb2xOYW1lcycgaW4gdGhpcy50b29sVXNlQmVoYXZpb3I7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21PdXRwdXRFeHRyYWN0b3IgIT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgICAgICAgICAgdXNlc1N0b3BBdFRvb2xOYW1lcykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFlvdSdyZSBwYXNzaW5nIHRoZSBhZ2VudCAobmFtZTogJHt0aGlzLm5hbWV9KSB3aXRoIHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMgY29uZmlndXJlZCBhcyBhIHRvb2wgdG8gYSBkaWZmZXJlbnQgYWdlbnQ7IHRoaXMgbWF5IG5vdCB3b3JrIGFzIHlvdSBleHBlY3QuIFlvdSBtYXkgd2FudCB0byBoYXZlIGEgd3JhcHBlciBmdW5jdGlvbiB0b29sIHRvIGNvbnNpc3RlbnRseSByZXR1cm4gdGhlIGZpbmFsIG91dHB1dC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0VGV4dCA9IHR5cGVvZiBjdXN0b21PdXRwdXRFeHRyYWN0b3IgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyBhd2FpdCBjdXN0b21PdXRwdXRFeHRyYWN0b3IoY29tcGxldGVkUmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA6IGdldE91dHB1dFRleHQoY29tcGxldGVkUmVzdWx0LnJhd1Jlc3BvbnNlc1tjb21wbGV0ZWRSZXN1bHQucmF3UmVzcG9uc2VzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlscz8udG9vbENhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUFnZW50VG9vbFJ1blJlc3VsdChkZXRhaWxzLnRvb2xDYWxsLCBjb21wbGV0ZWRSZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0VGV4dDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYWdlbnQgaGFzIGEgZnVuY3Rpb24gYXMgaXRzIGluc3RydWN0aW9ucywgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgICAqIHJ1bkNvbnRleHQgYW5kIHRoZSBhZ2VudCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTeXN0ZW1Qcm9tcHQocnVuQ29udGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW5zdHJ1Y3Rpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnN0cnVjdGlvbnMocnVuQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcm9tcHQgdGVtcGxhdGUgZm9yIHRoZSBhZ2VudCwgaWYgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgcHJvbXB0LCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9tcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb21wdChydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0aGlzLm1jcFNlcnZlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEFsbE1jcFRvb2xzKHtcbiAgICAgICAgICAgICAgICBtY3BTZXJ2ZXJzOiB0aGlzLm1jcFNlcnZlcnMsXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgICAgICBhZ2VudDogdGhpcyxcbiAgICAgICAgICAgICAgICBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQUxsIGFnZW50IHRvb2xzLCBpbmNsdWRpbmcgdGhlIE1DUGwgYW5kIGZ1bmN0aW9uIHRvb2xzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYWxsIGNvbmZpZ3VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRBbGxUb29scyhydW5Db250ZXh0KSB7XG4gICAgICAgIGNvbnN0IG1jcFRvb2xzID0gYXdhaXQgdGhpcy5nZXRNY3BUb29scyhydW5Db250ZXh0KTtcbiAgICAgICAgY29uc3QgZW5hYmxlZFRvb2xzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHRoaXMudG9vbHMpIHtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heWJlSXNFbmFibGVkID0gY2FuZGlkYXRlLmlzRW5hYmxlZDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmFibGVkID0gdHlwZW9mIG1heWJlSXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgbWF5YmVJc0VuYWJsZWQocnVuQ29udGV4dCwgdGhpcylcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2YgbWF5YmVJc0VuYWJsZWQgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBtYXliZUlzRW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmFibGVkVG9vbHMucHVzaChjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ubWNwVG9vbHMsIC4uLmVuYWJsZWRUb29sc107XG4gICAgfVxuICAgIGhhc0V4cGxpY2l0VG9vbENvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhhbmRvZmZzIHRoYXQgc2hvdWxkIGJlIGV4cG9zZWQgdG8gdGhlIG1vZGVsIGZvciB0aGUgY3VycmVudCBydW4uXG4gICAgICpcbiAgICAgKiBIYW5kb2ZmcyB0aGF0IHByb3ZpZGUgYW4gYGlzRW5hYmxlZGAgZnVuY3Rpb24gcmV0dXJuaW5nIGBmYWxzZWAgYXJlIG9taXR0ZWQuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RW5hYmxlZEhhbmRvZmZzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLmhhbmRvZmZzPy5tYXAoKGgpID0+IGdldEhhbmRvZmYoaCkpID8/IFtdO1xuICAgICAgICBjb25zdCBlbmFibGVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBoYW5kb2Zmcykge1xuICAgICAgICAgICAgaWYgKGF3YWl0IGhhbmRvZmYuaXNFbmFibGVkKHsgcnVuQ29udGV4dCwgYWdlbnQ6IHRoaXMgfSkpIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkLnB1c2goaGFuZG9mZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyB0aGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBhZ2VudC5cbiAgICAgKiBAcmV0dXJucyBUaGUgcGFyc2VkIG91dC5cbiAgICAgKi9cbiAgICBwcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uob3V0cHV0KTtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VHlwZS5wYXJzZShwYXJzZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWdlbnQsIHdoaWNoIGlzIHNlcmlhbGl6YWJsZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgYWdlbnQncyBuYW1lLlxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZ2VudC5tanMubWFwIiwiLyoqXG4gKiBEZWZpbmVzIGFuIGlucHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lSW5wdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCBydW5JblBhcmFsbGVsID0gdHJ1ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpbnB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHJ1bkluUGFyYWxsZWwsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ2lucHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBvdXRwdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVPdXRwdXRHdWFyZHJhaWwoeyBuYW1lLCBleGVjdXRlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ291dHB1dCcsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGd1YXJkcmFpbEZ1bmN0aW9uOiBleGVjdXRlLFxuICAgICAgICBhc3luYyBydW4oYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBndWFyZHJhaWw6IHsgdHlwZTogJ291dHB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBhZ2VudDogYXJncy5hZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dDogYXJncy5hZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImxldCBERUZBVUxUX1BST1ZJREVSO1xuLyoqXG4gKiBTZXQgdGhlIG1vZGVsIHByb3ZpZGVyIHVzZWQgd2hlbiBubyBleHBsaWNpdCBwcm92aWRlciBpcyBzdXBwbGllZC5cbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gdXNlIGJ5IGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TW9kZWxQcm92aWRlcihwcm92aWRlcikge1xuICAgIERFRkFVTFRfUFJPVklERVIgPSBwcm92aWRlcjtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqXG4gKiBAcmV0dXJucyBUaGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCkge1xuICAgIGlmICh0eXBlb2YgREVGQVVMVF9QUk9WSURFUiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyIHNldC4gTWFrZSBzdXJlIHRvIHNldCBhIHByb3ZpZGVyIHVzaW5nIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyIGJlZm9yZSBjYWxsaW5nIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIG9yIHBhc3MgYW4gZXhwbGljaXQgcHJvdmlkZXIuJyk7XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXJzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNoYXJlZCBiYXNlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaW4gdGhlIHByb3RvY29sIHByb3ZpZGVzIGEgYHByb3ZpZGVyRGF0YWAgZmllbGQgdG8gYWNjb21tb2RhdGUgY3VzdG9tIGZ1bmN0aW9uYWxpdHlcbiAqIG9yIG5ldyBmaWVsZHNcbiAqL1xuZXhwb3J0IGNvbnN0IFNoYXJlZEJhc2UgPSB6Lm9iamVjdCh7XG4gICAgLyoqXG4gICAgICogQWRkaXRpb25hbCBvcHRpb25hbCBwcm92aWRlciBzcGVjaWZpYyBkYXRhLiBVc2VkIGZvciBjdXN0b20gZnVuY3Rpb25hbGl0eSBvciBtb2RlbCBwcm92aWRlclxuICAgICAqIHNwZWNpZmljIGZpZWxkcy5cbiAgICAgKi9cbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogRXZlcnkgaXRlbSBoYXMgYSBzaGFyZWQgb2Ygc2hhcmVkIGl0ZW0gZGF0YSBpbmNsdWRpbmcgYW4gb3B0aW9uYWwgSUQuXG4gKi9cbmV4cG9ydCBjb25zdCBJdGVtQmFzZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbiBJRCB0byBpZGVudGlmeSB0aGUgaXRlbS4gVGhpcyBpcyBvcHRpb25hbCBieSBkZWZhdWx0LiBJZiBhIG1vZGVsIHByb3ZpZGVyIGFic29sdXRlbHlcbiAgICAgKiByZXF1aXJlcyB0aGlzIGZpZWxkLCBpdCB3aWxsIGJlIHZhbGlkYXRlZCBvbiB0aGUgbW9kZWwgbGV2ZWwuXG4gICAgICovXG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ29udGVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlZnVzYWwgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWZ1c2FsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlZnVzYWwgZXhwbGFuYXRpb24gZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVmdXNhbDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgUmVhc29uaW5nVGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZ190ZXh0JyksXG4gICAgLyoqXG4gICAgICogQSB0ZXh0IGlucHV0IGZvciBleGFtcGxlIGEgbWVzc2FnZSBmcm9tIGEgdXNlclxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbnB1dEltYWdlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgaW1hZ2UgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBwcm92aWRlZCBpbmxpbmUgKGBpbWFnZWApLCBhcyBhIFVSTCwgb3IgYnkgcmVmZXJlbmNlIHRvIGFcbiAgICAgKiBwcmV2aW91c2x5IHVwbG9hZGVkIE9wZW5BSSBmaWxlLlxuICAgICAqL1xuICAgIGltYWdlOiB6XG4gICAgICAgIC8vIDEuIGltYWdlIGRhdGFcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC8vIDIuZmlsZSBJRCBmb3IgdGhlIGltYWdlXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0VpdGhlciBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhLCBhIGRhdGEgVVJMLCBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIGxldmVsIG9mIGRldGFpbCByZXF1ZXN0ZWQgZm9yIGltYWdlIHVuZGVyc3RhbmRpbmcgdGFza3MuXG4gICAgICogRnV0dXJlIG1vZGVscyBtYXkgYWRkIG5ldyB2YWx1ZXMsIHRoZXJlZm9yZSB0aGlzIGFjY2VwdHMgYW55IHN0cmluZy5cbiAgICAgKi9cbiAgICBkZXRhaWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0RmlsZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ZpbGUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZmlsZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIHJhdyBkYXRhLCBhIFVSTCwgb3IgYW4gT3BlbkFJIGZpbGUgSUQuXG4gICAgICovXG4gICAgZmlsZTogelxuICAgICAgICAvLyAxLiBmaWxlIGRhdGFcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnRWl0aGVyIGJhc2U2NCBlbmNvZGVkIGZpbGUgZGF0YSBvciBhIHB1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkwnKVxuICAgICAgICAvLyAyLiBmaWxlIElEXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCcpIH0pKVxuICAgICAgICAvLyAzLiBwdWJsaWNseSBhY2Nlc3NpYmxlIGZpbGUgVVJMXG4gICAgICAgIC5vcih6Lm9iamVjdCh7IHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTCcpIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvbnRlbnRzIG9mIHRoZSBmaWxlIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBPcHRpb25hbCBmaWxlbmFtZSBtZXRhZGF0YSB3aGVuIHVwbG9hZGluZyBmaWxlIGRhdGEgaW5saW5lLlxuICAgICAqL1xuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBBdWRpb0NvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhdWRpbyBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGF1ZGlvOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGZpbGUgaWQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZm9ybWF0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICBmb3JtYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2NyaXB0IG9mIHRoZSBhdWRpby5cbiAgICAgKi9cbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEltYWdlQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndGV4dCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBJbWFnZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGltYWdlIGRhdGEsIG9yIHJhdyBieXRlcyB0aGF0IHdpbGwgYmUgYmFzZTY0IGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgSW1hZ2VVcmxPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXJsOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgVVJMIHBvaW50aW5nIHRvIHRoZSBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlRmlsZUlkT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGZpbGVJZDogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCByZWZlcmVuY2luZyB1cGxvYWRlZCBpbWFnZSBjb250ZW50JyksXG59KTtcbmNvbnN0IEltYWdlT2JqZWN0U2NoZW1hID0gelxuICAgIC51bmlvbihbSW1hZ2VEYXRhT2JqZWN0U2NoZW1hLCBJbWFnZVVybE9iamVjdFNjaGVtYSwgSW1hZ2VGaWxlSWRPYmplY3RTY2hlbWFdKVxuICAgIC5kZXNjcmliZSgnSW5saW5lIGltYWdlIGRhdGEgb3IgcmVmZXJlbmNlcyB0byB1cGxvYWRlZCBjb250ZW50LicpO1xuY29uc3QgRmlsZURhdGFPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZGF0YTogelxuICAgICAgICAudW5pb24oW3ouc3RyaW5nKCksIHouaW5zdGFuY2VvZihVaW50OEFycmF5KV0pXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgZmlsZSBkYXRhLCBvciByYXcgYnl0ZXMgdGhhdCB3aWxsIGJlIGVuY29kZWQgYXV0b21hdGljYWxseS4nKSxcbiAgICBtZWRpYVR5cGU6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnSUFOQSBtZWRpYSB0eXBlIGRlc2NyaWJpbmcgdGhlIGZpbGUgY29udGVudHMnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnRmlsZW5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBpbmxpbmUgZGF0YScpLFxufSk7XG5jb25zdCBGaWxlVXJsT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVybDogei5zdHJpbmcoKS5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBVUkwgZm9yIHRoZSBmaWxlIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlSWRPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEIHJlZmVyZW5jaW5nIHVwbG9hZGVkIGNvbnRlbnQnKSxcbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBGaWxlUmVmZXJlbmNlU2NoZW1hID0gelxuICAgIC51bmlvbihbXG4gICAgei5zdHJpbmcoKS5kZXNjcmliZSgnRXhpc3RpbmcgZGF0YSBVUkwgb3IgYmFzZTY0IHN0cmluZycpLFxuICAgIEZpbGVEYXRhT2JqZWN0U2NoZW1hLFxuICAgIEZpbGVVcmxPYmplY3RTY2hlbWEsXG4gICAgRmlsZUlkT2JqZWN0U2NoZW1hLFxuXSlcbiAgICAuZGVzY3JpYmUoJ0lubGluZSBkYXRhICh3aXRoIG1ldGFkYXRhKSBvciByZWZlcmVuY2VzIHBvaW50aW5nIHRvIGZpbGUgY29udGVudHMuJyk7XG5jb25zdCB6U3RyaW5nV2l0aEhpbnRzID0gKC4uLl9oaW50cykgPT4gei5zdHJpbmcoKTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIElubGluZSBpbWFnZSBjb250ZW50IG9yIGEgcmVmZXJlbmNlIHRvIGFuIHVwbG9hZGVkIGZpbGUuIEFjY2VwdHMgYSBVUkwvZGF0YSBVUkwgc3RyaW5nIG9yIGFuXG4gICAgICogb2JqZWN0IGRlc2NyaWJpbmcgdGhlIGRhdGEvdXJsL2ZpbGVJZCBzb3VyY2UuXG4gICAgICovXG4gICAgaW1hZ2U6IHouc3RyaW5nKCkub3IoSW1hZ2VPYmplY3RTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIHJlcXVlc3RlZCBsZXZlbCBvZiBkZXRhaWwgZm9yIHZpc2lvbiBtb2RlbHMuXG4gICAgICogVXNlIGEgc3RyaW5nIHRvIGF2b2lkIGNvbnN0cmFpbmluZyBmdXR1cmUgbW9kZWwgY2FwYWJpbGl0aWVzLlxuICAgICAqL1xuICAgIGRldGFpbDogelN0cmluZ1dpdGhIaW50cygnbG93JywgJ2hpZ2gnLCAnYXV0bycpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0RmlsZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmaWxlJyksXG4gICAgLyoqXG4gICAgICogRmlsZSBvdXRwdXQgcmVmZXJlbmNlLiBQcm92aWRlIGVpdGhlciBhIHN0cmluZyAoZGF0YSBVUkwgLyBiYXNlNjQpLCBhIGRhdGEgb2JqZWN0IChyZXF1aXJlc1xuICAgICAqIG1lZGlhVHlwZSArIGZpbGVuYW1lKSwgb3IgYW4gb2JqZWN0IHBvaW50aW5nIHRvIGFuIHVwbG9hZGVkIGZpbGUvVVJMLlxuICAgICAqL1xuICAgIGZpbGU6IEZpbGVSZWZlcmVuY2VTY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclRvb2xPdXRwdXQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9zY3JlZW5zaG90JyksXG4gICAgLyoqXG4gICAgICogQSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGEgVVJMIHJlcHJlc2VudGluZyB0aGUgc2NyZWVuc2hvdC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIFVSTCcpLFxufSk7XG5leHBvcnQgY29uc3QgY29tcHV0ZXJBY3Rpb25zID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3NjcmVlbnNob3QnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgYnV0dG9uOiB6LmVudW0oWydsZWZ0JywgJ3JpZ2h0JywgJ3doZWVsJywgJ2JhY2snLCAnZm9yd2FyZCddKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZG91YmxlX2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Njcm9sbCcpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeDogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3k6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3R5cGUnKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnd2FpdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtb3ZlJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2tleXByZXNzJyksXG4gICAgICAgIGtleXM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RyYWcnKSxcbiAgICAgICAgcGF0aDogei5hcnJheSh6Lm9iamVjdCh7IHg6IHoubnVtYmVyKCksIHk6IHoubnVtYmVyKCkgfSkpLFxuICAgIH0pLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXNzYWdlIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgQXNzaXN0YW50Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIE91dHB1dFRleHQsXG4gICAgUmVmdXNhbCxcbiAgICBBdWRpb0NvbnRlbnQsXG4gICAgSW1hZ2VDb250ZW50LFxuXSk7XG5jb25zdCBNZXNzYWdlQmFzZSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW55IGl0ZW0gd2l0aG91dCBhIHR5cGUgaXMgdHJlYXRlZCBhcyBhIG1lc3NhZ2VcbiAgICAgKi9cbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQXNzaXN0YW50TWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgYXNzaXN0YW50IChpLmUuIHRoZSBtb2RlbClcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KEFzc2lzdGFudENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgVXNlckNvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBJbnB1dFRleHQsXG4gICAgSW5wdXRJbWFnZSxcbiAgICBJbnB1dEZpbGUsXG4gICAgQXVkaW9Db250ZW50LFxuXSk7XG5leHBvcnQgY29uc3QgVXNlck1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIHVzZXJcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ3VzZXInKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KFVzZXJDb250ZW50KS5vcih6LnN0cmluZygpKSxcbn0pO1xuY29uc3QgU3lzdGVtTWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8vIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIHN5c3RlbSBtZXNzYWdlIHRvIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGVudCBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgTWVzc2FnZUl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBVc2VyTWVzc2FnZUl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRvb2wgY2FsbCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEhvc3RlZFRvb2xDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sLiBGb3IgZXhhbXBsZSBgd2ViX3NlYXJjaF9jYWxsYCBvciBgZmlsZV9zZWFyY2hfY2FsbGBcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgaG9zdGVkIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdUaGUgYXJndW1lbnRzIG9mIHRoZSBob3N0ZWQgdG9vbCBjYWxsJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBwcmltYXJ5IG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLiBBZGRpdGlvbmFsIG91dHB1dCBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbENhbGxPdXRwdXRDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgVG9vbE91dHB1dFRleHQsXG4gICAgVG9vbE91dHB1dEltYWdlLFxuICAgIFRvb2xPdXRwdXRGaWxlQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIElucHV0VGV4dCxcbiAgICBJbnB1dEltYWdlLFxuICAgIElucHV0RmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHdhcyBjYWxsZWRcbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiB6XG4gICAgICAgIC51bmlvbihbXG4gICAgICAgIHouc3RyaW5nKCksXG4gICAgICAgIFRvb2xDYWxsT3V0cHV0Q29udGVudCxcbiAgICAgICAgei5hcnJheShUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQpLFxuICAgIF0pXG4gICAgICAgIC5kZXNjcmliZSgnT3V0cHV0IHJldHVybmVkIGJ5IHRoZSB0b29sIGNhbGwuIFN1cHBvcnRzIHBsYWluIHN0cmluZ3MsIGxlZ2FjeSBUb29sT3V0cHV0IGl0ZW1zLCBvciBzdHJ1Y3R1cmVkIGlucHV0XyogaXRlbXMuJyksXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlclVzZUNhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBhY3Rpb24gdG8gYmUgcGVyZm9ybWVkIGJ5IHRoZSBjb21wdXRlci5cbiAgICAgKi9cbiAgICBhY3Rpb246IGNvbXB1dGVyQWN0aW9ucyxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbF9yZXN1bHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIGNvbXB1dGVyIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgY29tcHV0ZXIgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IENvbXB1dGVyVG9vbE91dHB1dCxcbn0pO1xuZXhwb3J0IGNvbnN0IFNoZWxsQWN0aW9uID0gei5vYmplY3Qoe1xuICAgIGNvbW1hbmRzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIHRpbWVvdXRNczogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgICBtYXhPdXRwdXRMZW5ndGg6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3NoZWxsX2NhbGwnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKS5vcHRpb25hbCgpLFxuICAgIGFjdGlvbjogU2hlbGxBY3Rpb24sXG59KTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxPdXRjb21lID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3RpbWVvdXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZXhpdCcpLFxuICAgICAgICBleGl0Q29kZTogei5udW1iZXIoKS5pbnQoKS5udWxsYWJsZSgpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY29uc3QgU2hlbGxDYWxsT3V0cHV0Q29udGVudCA9IHpcbiAgICAub2JqZWN0KHtcbiAgICBzdGRvdXQ6IHouc3RyaW5nKCksXG4gICAgc3RkZXJyOiB6LnN0cmluZygpLFxuICAgIG91dGNvbWU6IFNoZWxsQ2FsbE91dGNvbWUsXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IFNoZWxsQ2FsbFJlc3VsdEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2hlbGxfY2FsbF9vdXRwdXQnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgbWF4T3V0cHV0TGVuZ3RoOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KFNoZWxsQ2FsbE91dHB1dENvbnRlbnQpLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjcmVhdGVfZmlsZScpLFxuICAgIHBhdGg6IHouc3RyaW5nKCksXG4gICAgZGlmZjogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb25VcGRhdGVGaWxlID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndXBkYXRlX2ZpbGUnKSxcbiAgICBwYXRoOiB6LnN0cmluZygpLFxuICAgIGRpZmY6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2RlbGV0ZV9maWxlJyksXG4gICAgcGF0aDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb24gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uQ3JlYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSxcbiAgICBBcHBseVBhdGNoT3BlcmF0aW9uRGVsZXRlRmlsZSxcbl0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsJyksXG4gICAgY2FsbElkOiB6LnN0cmluZygpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIG9wZXJhdGlvbjogQXBwbHlQYXRjaE9wZXJhdGlvbixcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcpLFxuICAgIGNhbGxJZDogei5zdHJpbmcoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdmYWlsZWQnXSksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIFNoZWxsQ2FsbEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTcGVjaWFsIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWFzb25pbmdJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmcnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBmYWNpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlYXNvbmluZy4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShJbnB1dFRleHQpLFxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgcmVhc29uaW5nIHRleHQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmF3Q29udGVudDogei5hcnJheShSZWFzb25pbmdUZXh0KS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIFRoaXMgaXMgYSBjYXRjaCBhbGwgZm9yIGl0ZW1zIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgYSBtb2RlbCBtaWdodCByZXR1cm4gYW4gaXRlbSB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbCB1c2luZyB0aGlzIHR5cGUuXG4gKlxuICogSW4gdGhhdCBjYXNlIGV2ZXJ5dGhpbmcgcmV0dXJuZWQgZnJvbSB0aGUgbW9kZWwgc2hvdWxkIGJlIHBhc3NlZCBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gKlxuICogVGhpcyBlbmFibGVzIG5ldyBmZWF0dXJlcyB0byBiZSBhZGRlZCB0byBiZSBhZGRlZCBieSBhIG1vZGVsIHByb3ZpZGVyIHdpdGhvdXQgYnJlYWtpbmcgdGhlIHByb3RvY29sLlxuICovXG5leHBvcnQgY29uc3QgVW5rbm93bkl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndW5rbm93bicpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKb2luZWQgaXRlbSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IE91dHB1dE1vZGVsSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgU2hlbGxDYWxsSXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICBTaGVsbENhbGxSZXN1bHRJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG5leHBvcnQgY29uc3QgTW9kZWxJdGVtID0gei51bmlvbihbXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIFN5c3RlbU1lc3NhZ2VJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgU2hlbGxDYWxsSXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICBDb21wdXRlckNhbGxSZXN1bHRJdGVtLFxuICAgIFNoZWxsQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxSZXN1bHRJdGVtLFxuICAgIFJlYXNvbmluZ0l0ZW0sXG4gICAgVW5rbm93bkl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE1ldGEgZGF0YSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlcXVlc3RVc2FnZURhdGEgPSB6Lm9iamVjdCh7XG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgVXNhZ2VEYXRhID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSxcbiAgICAgICAgei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSksXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgcmVxdWVzdFVzYWdlRW50cmllczogei5hcnJheShSZXF1ZXN0VXNhZ2VEYXRhKS5vcHRpb25hbCgpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTdHJlYW0gZXZlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gbmV3IG91dHB1dCB0ZXh0IGlzIGF2YWlsYWJsZSB0byBzdHJlYW0gdG8gdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFRleHRTdHJlYW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfdGV4dF9kZWx0YScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBkZWx0YSB0ZXh0IHRoYXQgd2FzIHN0cmVhbWVkIGJ5IHRoZSBtb2RlbHRvIHRoZSB1c2VyLlxuICAgICAqL1xuICAgIGRlbHRhOiB6LnN0cmluZygpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgbmV3IHJlc3BvbnNlIGlzIHN0YXJ0ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX3N0YXJ0ZWQnKSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBhIHJlc3BvbnNlIGlzIGNvbXBsZXRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZV9kb25lJyksXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3BvbnNlIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlc3BvbnNlOiBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdXNhZ2UgZGF0YSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdXNhZ2U6IFVzYWdlRGF0YSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICAgICAqL1xuICAgICAgICBvdXRwdXQ6IHouYXJyYXkoT3V0cHV0TW9kZWxJdGVtKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBmb3IgZXZlcnkgaXRlbSB0aGF0IGdldHMgc3RyZWFtZWQgdG8gdGhlIG1vZGVsLiBVc2VkIHRvIGV4cG9zZSB0aGUgcmF3IGV2ZW50c1xuICogZnJvbSB0aGUgbW9kZWwuXG4gKi9cbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudEdlbmVyaWNJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbW9kZWwnKSxcbiAgICBldmVudDogei5hbnkoKS5kZXNjcmliZSgnVGhlIGV2ZW50IGZyb20gdGhlIG1vZGVsJyksXG59KTtcbmV4cG9ydCBjb25zdCBTdHJlYW1FdmVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIFN0cmVhbUV2ZW50VGV4dFN0cmVhbSxcbiAgICBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkLFxuICAgIFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0sXG5dKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3RvY29sLm1qcy5tYXAiLCJpbXBvcnQgeyBSZXF1ZXN0VXNhZ2VEYXRhLCBVc2FnZURhdGEgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbi8qKlxuICogVXNhZ2UgZGV0YWlscyBmb3IgYSBzaW5nbGUgQVBJIHJlcXVlc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0VXNhZ2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHM7XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IGlucHV0Py5pbnB1dFRva2VucyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gaW5wdXQ/Lm91dHB1dFRva2VucyA/PyBpbnB1dD8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICB0aGlzLnRvdGFsVG9rZW5zID1cbiAgICAgICAgICAgIGlucHV0Py50b3RhbFRva2VucyA/P1xuICAgICAgICAgICAgICAgIGlucHV0Py50b3RhbF90b2tlbnMgPz9cbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zICsgdGhpcy5vdXRwdXRUb2tlbnM7XG4gICAgICAgIGNvbnN0IGlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5pbnB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/LmlucHV0X3Rva2Vuc19kZXRhaWxzO1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgPyBpbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgIDoge307XG4gICAgICAgIGNvbnN0IG91dHB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8ub3V0cHV0X3Rva2Vuc19kZXRhaWxzO1xuICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBvdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA/IG91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgIDoge307XG4gICAgfVxufVxuLyoqXG4gKiBUcmFja3MgdG9rZW4gdXNhZ2UgYW5kIHJlcXVlc3QgY291bnRzIGZvciBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2FnZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiByZXF1ZXN0cyBtYWRlIHRvIHRoZSBMTE0gQVBJLlxuICAgICAqL1xuICAgIHJlcXVlc3RzO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCwgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICB0b3RhbFRva2VucztcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIHBlci1yZXF1ZXN0IHVzYWdlIGVudHJpZXMgZm9yIGRldGFpbGVkIGNvc3QgY2FsY3VsYXRpb25zLlxuICAgICAqL1xuICAgIHJlcXVlc3RVc2FnZUVudHJpZXM7XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdHMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IDA7XG4gICAgICAgICAgICB0aGlzLnRvdGFsVG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdHMgPSBpbnB1dD8ucmVxdWVzdHMgPz8gMTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgPSBpbnB1dD8uaW5wdXRUb2tlbnMgPz8gaW5wdXQ/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLnRvdGFsVG9rZW5zID1cbiAgICAgICAgICAgICAgICBpbnB1dD8udG90YWxUb2tlbnMgPz9cbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ/LnRvdGFsX3Rva2VucyA/P1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zICsgdGhpcy5vdXRwdXRUb2tlbnM7XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8uaW5wdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5pbnB1dF90b2tlbnNfZGV0YWlscztcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0VG9rZW5zRGV0YWlscykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0VG9rZW5zRGV0YWlscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICAgICAgICAgID8gW2lucHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG91dHB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8ub3V0cHV0X3Rva2Vuc19kZXRhaWxzO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3V0cHV0VG9rZW5zRGV0YWlscykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBvdXRwdXRUb2tlbnNEZXRhaWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzID0gb3V0cHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgICAgICA/IFtvdXRwdXRUb2tlbnNEZXRhaWxzXVxuICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdFVzYWdlRW50cmllcyA9IGlucHV0Py5yZXF1ZXN0VXNhZ2VFbnRyaWVzID8/IGlucHV0Py5yZXF1ZXN0X3VzYWdlX2VudHJpZXM7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkUmVxdWVzdFVzYWdlRW50cmllcyA9IEFycmF5LmlzQXJyYXkocmVxdWVzdFVzYWdlRW50cmllcylcbiAgICAgICAgICAgICAgICA/IHJlcXVlc3RVc2FnZUVudHJpZXMubWFwKChlbnRyeSkgPT4gZW50cnkgaW5zdGFuY2VvZiBSZXF1ZXN0VXNhZ2UgPyBlbnRyeSA6IG5ldyBSZXF1ZXN0VXNhZ2UoZW50cnkpKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzID1cbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUmVxdWVzdFVzYWdlRW50cmllcyAmJlxuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkUmVxdWVzdFVzYWdlRW50cmllcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgID8gbm9ybWFsaXplZFJlcXVlc3RVc2FnZUVudHJpZXNcbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkKG5ld1VzYWdlKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdHMgKz0gbmV3VXNhZ2UucmVxdWVzdHMgPz8gMDtcbiAgICAgICAgdGhpcy5pbnB1dFRva2VucyArPSBuZXdVc2FnZS5pbnB1dFRva2VucyA/PyAwO1xuICAgICAgICB0aGlzLm91dHB1dFRva2VucyArPSBuZXdVc2FnZS5vdXRwdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy50b3RhbFRva2VucyArPSBuZXdVc2FnZS50b3RhbFRva2VucyA/PyAwO1xuICAgICAgICBpZiAobmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzKSB7XG4gICAgICAgICAgICAvLyBUaGUgdHlwZSBkb2VzIG5vdCBhbGxvdyB1bmRlZmluZWQsIGJ1dCBpdCBjb3VsZCBoYXBwZW4gcnVudGltZVxuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMucHVzaCguLi5uZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzKSB7XG4gICAgICAgICAgICAvLyBUaGUgdHlwZSBkb2VzIG5vdCBhbGxvdyB1bmRlZmluZWQsIGJ1dCBpdCBjb3VsZCBoYXBwZW4gcnVudGltZVxuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmV3VXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcykgJiZcbiAgICAgICAgICAgIG5ld1VzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzID8/PSBbXTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcy5wdXNoKC4uLm5ld1VzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMubWFwKChlbnRyeSkgPT4gZW50cnkgaW5zdGFuY2VvZiBSZXF1ZXN0VXNhZ2UgPyBlbnRyeSA6IG5ldyBSZXF1ZXN0VXNhZ2UoZW50cnkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmV3VXNhZ2UucmVxdWVzdHMgPT09IDEgJiYgbmV3VXNhZ2UudG90YWxUb2tlbnMgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPz89IFtdO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzLnB1c2gobmV3IFJlcXVlc3RVc2FnZSh7XG4gICAgICAgICAgICAgICAgaW5wdXRUb2tlbnM6IG5ld1VzYWdlLmlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VuczogbmV3VXNhZ2Uub3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiBuZXdVc2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IG5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscz8uWzBdLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IG5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHM/LlswXSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFJlcXVlc3RVc2FnZURhdGEsIFVzYWdlRGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNhZ2UubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbi8qKlxuICogQSBjb250ZXh0IG9iamVjdCB0aGF0IGlzIHBhc3NlZCB0byB0aGUgYFJ1bm5lci5ydW4oKWAgbWV0aG9kLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQ29udGV4dCB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRleHQgb2JqZWN0IHlvdSBwYXNzZWQgdG8gdGhlIGBSdW5uZXIucnVuKClgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBjb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBvZiB0aGUgYWdlbnQgcnVuIHNvIGZhci4gRm9yIHN0cmVhbWVkIHJlc3BvbnNlcywgdGhlIHVzYWdlIHdpbGwgYmUgc3RhbGUgdW50aWwgdGhlXG4gICAgICogbGFzdCBjaHVuayBvZiB0aGUgc3RyZWFtIGlzIHByb2Nlc3NlZC5cbiAgICAgKi9cbiAgICB1c2FnZTtcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0b29sIG5hbWVzIHRvIHdoZXRoZXIgdGhleSBoYXZlIGJlZW4gYXBwcm92ZWQuXG4gICAgICovXG4gICAgI2FwcHJvdmFscztcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0ID0ge30pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy51c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgICAgICB0aGlzLiNhcHByb3ZhbHMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYnVpbGQgdGhlIGFwcHJvdmFscyBtYXAgZnJvbSBhIHNlcmlhbGl6ZWQgc3RhdGUuXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxzIC0gVGhlIGFwcHJvdmFscyBtYXAgdG8gcmVidWlsZC5cbiAgICAgKi9cbiAgICBfcmVidWlsZEFwcHJvdmFscyhhcHByb3ZhbHMpIHtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhhcHByb3ZhbHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWwgLSBEZXRhaWxzIGFib3V0IHRoZSB0b29sIGNhbGwgYmVpbmcgZXZhbHVhdGVkLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgdG9vbCBjYWxsIGhhcyBiZWVuIGFwcHJvdmVkLCBgZmFsc2VgIGlmIGJsb2NrZWQgYW5kIGB1bmRlZmluZWRgIGlmIG5vdCB5ZXQgYXBwcm92ZWQgb3IgcmVqZWN0ZWQuXG4gICAgICovXG4gICAgaXNUb29sQXBwcm92ZWQoYXBwcm92YWwpIHtcbiAgICAgICAgY29uc3QgeyB0b29sTmFtZSwgY2FsbElkIH0gPSBhcHByb3ZhbDtcbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpO1xuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUgJiYgYXBwcm92YWxFbnRyeS5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1Rvb2wgaXMgcGVybWFuZW50bHkgYXBwcm92ZWQgYW5kIHJlamVjdGVkIGF0IHRoZSBzYW1lIHRpbWUuIEFwcHJvdmFsIHRha2VzIHByZWNlZGVuY2UnKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LnJlamVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kaXZpZHVhbENhbGxBcHByb3ZhbCA9IEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQpXG4gICAgICAgICAgICA/IGFwcHJvdmFsRW50cnkuYXBwcm92ZWQuaW5jbHVkZXMoY2FsbElkKVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgY29uc3QgaW5kaXZpZHVhbENhbGxSZWplY3Rpb24gPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LnJlamVjdGVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LnJlamVjdGVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsICYmIGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihgVG9vbCBjYWxsICR7Y2FsbElkfSBpcyBib3RoIGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlYCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZSBhIHRvb2wgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIGFwcHJvdmFsIGJlaGF2aW9yIG9wdGlvbnMuXG4gICAgICovXG4gICAgYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c0FwcHJvdmUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0udG9vbE5hbWUgPz8gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZTtcbiAgICAgICAgaWYgKGFsd2F5c0FwcHJvdmUpIHtcbiAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSkgPz8ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IFtdLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5LmFwcHJvdmVkKSkge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb24gdG9vbCBoYXMgY2FsbF9pZCwgaG9zdGVkIHRvb2wgY2FsbCBoYXMgaWRcbiAgICAgICAgICAgIGNvbnN0IGNhbGxJZCA9ICdjYWxsSWQnIGluIGFwcHJvdmFsSXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgPyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5jYWxsSWQgLy8gZnVuY3Rpb24gdG9vbHNcbiAgICAgICAgICAgICAgICA6IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmlkOyAvLyBob3N0ZWQgdG9vbHNcbiAgICAgICAgICAgIGFwcHJvdmFsRW50cnkuYXBwcm92ZWQucHVzaChjYWxsSWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIGFwcHJvdmFsRW50cnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3QgYSB0b29sIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICovXG4gICAgcmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIHsgYWx3YXlzUmVqZWN0ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNSZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSkgPz8ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IFtdLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5LnJlamVjdGVkKSkge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb24gdG9vbCBoYXMgY2FsbF9pZCwgaG9zdGVkIHRvb2wgY2FsbCBoYXMgaWRcbiAgICAgICAgICAgIGNvbnN0IGNhbGxJZCA9ICdjYWxsSWQnIGluIGFwcHJvdmFsSXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgPyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5jYWxsSWQgLy8gZnVuY3Rpb24gdG9vbHNcbiAgICAgICAgICAgICAgICA6IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmlkOyAvLyBob3N0ZWQgdG9vbHNcbiAgICAgICAgICAgIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQucHVzaChjYWxsSWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIGFwcHJvdmFsRW50cnkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICB1c2FnZTogdGhpcy51c2FnZSxcbiAgICAgICAgICAgIGFwcHJvdmFsczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuI2FwcHJvdmFscy5lbnRyaWVzKCkpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkNvbnRleHQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVUb29sKHRvb2wpIHtcbiAgICBpZiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICBzdHJpY3Q6IHRvb2wuc3RyaWN0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAodG9vbC50eXBlID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRvb2wuY29tcHV0ZXIuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBkaW1lbnNpb25zOiB0b29sLmNvbXB1dGVyLmRpbWVuc2lvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdzaGVsbCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGVsbCcsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdhcHBseV9wYXRjaCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaCcsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiB0b29sLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUhhbmRvZmYoaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xOYW1lOiBoLnRvb2xOYW1lLFxuICAgICAgICB0b29sRGVzY3JpcHRpb246IGgudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICBpbnB1dEpzb25TY2hlbWE6IGguaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICBzdHJpY3RKc29uU2NoZW1hOiBoLnN0cmljdEpzb25TY2hlbWEsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZS5tanMubWFwIiwiaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1CYXNlIHtcbiAgICB0eXBlID0gJ2Jhc2VfaXRlbSc7XG4gICAgcmF3SXRlbTtcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICByYXdJdGVtOiB0aGlzLnJhd0l0ZW0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdtZXNzYWdlX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjb250ZW50KCkge1xuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5yYXdJdGVtLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICBvdXRwdXQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIG91dHB1dDogdG9TbWFydFN0cmluZyh0aGlzLm91dHB1dCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blJlYXNvbmluZ0l0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3JlYXNvbmluZ19pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZk91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBzb3VyY2VBZ2VudDtcbiAgICB0YXJnZXRBZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIHNvdXJjZUFnZW50LCB0YXJnZXRBZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLnNvdXJjZUFnZW50ID0gc291cmNlQWdlbnQ7XG4gICAgICAgIHRoaXMudGFyZ2V0QWdlbnQgPSB0YXJnZXRBZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBzb3VyY2VBZ2VudDogdGhpcy5zb3VyY2VBZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRhcmdldEFnZW50OiB0aGlzLnRhcmdldEFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQXBwcm92YWxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdG9vbE5hbWU7XG4gICAgdHlwZSA9ICd0b29sX2FwcHJvdmFsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBcbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdCB0b29sIG5hbWUgdG8gdXNlIGZvciBhcHByb3ZhbCB0cmFja2luZyB3aGVuIG5vdCBwcmVzZW50IG9uIHRoZSByYXcgaXRlbS5cbiAgICAgKi9cbiAgICB0b29sTmFtZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSB0b29sTmFtZTtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lID8/IHJhd0l0ZW0ubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdG9vbCBuYW1lIGlmIGF2YWlsYWJsZSBvbiB0aGUgcmF3IGl0ZW0gb3IgcHJvdmlkZWQgZXhwbGljaXRseS5cbiAgICAgKiBLZXB0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoIGNvZGUgdGhhdCBwcmV2aW91c2x5IHJlbGllZCBvbiBgcmF3SXRlbS5uYW1lYC5cbiAgICAgKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbE5hbWUgPz8gdGhpcy5yYXdJdGVtLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFyZ3VtZW50cyBpZiB0aGUgcmF3IGl0ZW0gaGFzIGFuIGFyZ3VtZW50cyBwcm9wZXJ0eSBvdGhlcndpc2UgdGhpcyB3aWxsIGJlIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBnZXQgYXJndW1lbnRzKCkge1xuICAgICAgICByZXR1cm4gJ2FyZ3VtZW50cycgaW4gdGhpcy5yYXdJdGVtID8gdGhpcy5yYXdJdGVtLmFyZ3VtZW50cyA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8qKlxuICogRXh0cmFjdCBhbGwgdGV4dCBvdXRwdXQgZnJvbSBhIGxpc3Qgb2YgcnVuIGl0ZW1zIGJ5IGNvbmNhdGVuYXRpbmcgdGhlIGNvbnRlbnQgb2YgYWxsXG4gKiBtZXNzYWdlIG91dHB1dCBpdGVtcy5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgLSBUaGUgbGlzdCBvZiBydW4gaXRlbXMgdG8gZXh0cmFjdCB0ZXh0IGZyb20uXG4gKiBAcmV0dXJucyBBIHN0cmluZyBvZiBhbGwgdGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIHJ1biBpdGVtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBbGxUZXh0T3V0cHV0KGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLmNvbnRlbnQpXG4gICAgICAgIC5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZW1zLm1qcy5tYXAiLCJpbXBvcnQgeyByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB9IGZyb20gXCIuL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5mdW5jdGlvbiBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwYW4pIHtcbiAgICByZXR1cm4gYXN5bmMgKGZuLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgIC8vIENyZWF0aW5nIGEgbmV3IHNwYW4gY29udGV4dCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgcHJldmlvdXMgc3BhbiBpcyBjb3JyZWN0bHkgcmVzZXRcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcGFuID0gY3JlYXRlU3BhbiguLi5hcmdzKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHNwYW4pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzcGFuLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKHNwYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGVycm9yLmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aFJlc3BvbnNlU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgcmVzcG9uc2UsIHByaW1hcmlseSB0aGUgcmVzcG9uc2UgaWRlbnRpZmllci5cbiAqIElmIHlvdSBuZWVkIHRvIGNhcHR1cmUgZGV0YWlsZWQgZ2VuZXJhdGlvbiBpbmZvcm1hdGlvbiBzdWNoIGFzIGlucHV0L291dHB1dCBtZXNzYWdlcyxcbiAqIG1vZGVsIGNvbmZpZ3VyYXRpb24sIG9yIHVzYWdlIGRhdGEsIHVzZSBgY3JlYXRlR2VuZXJhdGlvblNwYW4oKWAgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHJlc3BvbnNlIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNwb25zZVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBnZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3Qgd2l0aFJlc3BvbnNlU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlUmVzcG9uc2VTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEFnZW50U3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBhZ2VudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWdlbnRTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhZ2VudCcsXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zPy5kYXRhPy5uYW1lID8/ICdBZ2VudCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBhZ2VudCBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoQWdlbnRTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVBZ2VudFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoRnVuY3Rpb25TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGZ1bmN0aW9uIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIGlucHV0OiBvcHRpb25zPy5kYXRhPy5pbnB1dCA/PyAnJyxcbiAgICAgICAgICAgIG91dHB1dDogb3B0aW9ucz8uZGF0YT8ub3V0cHV0ID8/ICcnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEZ1bmN0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlRnVuY3Rpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGhhbmRvZmYgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoSGFuZG9mZlNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgaGFuZG9mZiBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGFuZG9mZlNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YTogeyB0eXBlOiAnaGFuZG9mZicsIC4uLm9wdGlvbnM/LmRhdGEgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoSGFuZG9mZlNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUhhbmRvZmZTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGdlbmVyYXRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoR2VuZXJhdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIGdlbmVyYXRpb24sIGluY2x1ZGluZyBpbnB1dC9vdXRwdXQgbWVzc2FnZVxuICogc2VxdWVuY2VzLCBtb2RlbCBpbmZvcm1hdGlvbiwgYW5kIHVzYWdlIGRhdGEuIElmIHlvdSBvbmx5IG5lZWQgdG8gY2FwdHVyZSBhIG1vZGVsIHJlc3BvbnNlXG4gKiBpZGVudGlmaWVyLCBjb25zaWRlciB1c2luZyBgY3JlYXRlUmVzcG9uc2VTcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZW5lcmF0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZ2VuZXJhdGlvbicsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKiogQXV0b21hdGljYWxseSBjcmVhdGUgYSBnZW5lcmF0aW9uIHNwYW4sIHJ1biBmbiBhbmQgY2xvc2UgdGhlIHNwYW4gKi9cbmV4cG9ydCBjb25zdCB3aXRoR2VuZXJhdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUdlbmVyYXRpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGN1c3RvbSBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhDdXN0b21TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoQ3VzdG9tU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlQ3VzdG9tU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBndWFyZHJhaWwgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlciB1c2VcbiAqIGB3aXRoR3VhcmRyYWlsU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHdWFyZHJhaWxTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdndWFyZHJhaWwnLFxuICAgICAgICAgICAgdHJpZ2dlcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoR3VhcmRyYWlsU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR3VhcmRyYWlsU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyB0cmFuc2NyaXB0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zY3JpcHRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NyaXB0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhUcmFuc2NyaXB0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc3BlZWNoIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwZWVjaFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoU3BlZWNoU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggZ3JvdXAgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoR3JvdXBTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGVlY2hfZ3JvdXAnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hHcm91cFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwZWVjaEdyb3VwU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBNQ1AgbGlzdCB0b29scyBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3BfdG9vbHMnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhNQ1BMaXN0VG9vbHNTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVNwYW5zLm1qcy5tYXAiLCIvKipcbiAqIEVuY29kZSBhIFVpbnQ4QXJyYXkgaW50byBhIGJhc2U2NCBzdHJpbmcgaW4gYm90aCBOb2RlIGFuZCBicm93c2VyIGVudmlyb25tZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChkYXRhKSB7XG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgZ2xvYmFsQnVmZmVyID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMuQnVmZmVyXG4gICAgICAgID8gZ2xvYmFsVGhpcy5CdWZmZXJcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGdsb2JhbEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsQnVmZmVyLmZyb20oZGF0YSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cbiAgICBsZXQgYmluYXJ5ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGFbaV0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGdsb2JhbFRoaXMuYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZ2xvYmFsVGhpcy5idG9hKGJpbmFyeSk7XG4gICAgfVxuICAgIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYmluYXJ5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBjMSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGNvbnN0IGMyID0gYmluYXJ5LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY29uc3QgYzMgPSBiaW5hcnkuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBjb25zdCBlbmMxID0gYzEgPj4gMjtcbiAgICAgICAgY29uc3QgZW5jMiA9ICgoYzEgJiAweDMpIDw8IDQpIHwgKGMyID4+IDQpO1xuICAgICAgICBjb25zdCBlbmMzID0gaXNOYU4oYzIpID8gNjQgOiAoKGMyICYgMHhmKSA8PCAyKSB8IChjMyA+PiA2KTtcbiAgICAgICAgY29uc3QgZW5jNCA9IGlzTmFOKGMzKSA/IDY0IDogYzMgJiAweDNmO1xuICAgICAgICByZXN1bHQgKz1cbiAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmMxKSArXG4gICAgICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzIpICtcbiAgICAgICAgICAgICAgICBjaGFycy5jaGFyQXQoZW5jMykgK1xuICAgICAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmM0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2U2NC5tanMubWFwIiwiLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnQgZnJvbSB0aGUgTExNLiBUaGVzZSBhcmUgYHJhd2AgZXZlbnRzLCBpLmUuIHRoZXkgYXJlIGRpcmVjdGx5IHBhc3NlZCB0aHJvdWdoIGZyb21cbiAqIHRoZSBMTE0uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IHtcbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlID0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSByYXcgcmVzcG9uc2VzIHN0cmVhbSBldmVudHMgZnJvbSB0aGUgTExNLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmVhbWluZyBldmVudHMgdGhhdCB3cmFwIGEgYFJ1bkl0ZW1gLiBBcyB0aGUgYWdlbnQgcHJvY2Vzc2VzIHRoZSBMTE0gcmVzcG9uc2UsIGl0IHdpbGwgZ2VuZXJhdGVcbiAqIHRoZXNlIGV2ZW50cyBmcm9tIG5ldyBtZXNzYWdlcywgdG9vbCBjYWxscywgdG9vbCBvdXRwdXRzLCBoYW5kb2ZmcywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSXRlbVN0cmVhbUV2ZW50IHtcbiAgICBuYW1lO1xuICAgIGl0ZW07XG4gICAgdHlwZSA9ICdydW5faXRlbV9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IHRoYXQgbm90aWZpZXMgdGhhdCB0aGVyZSBpcyBhIG5ldyBhZ2VudCBydW5uaW5nLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQge1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnYWdlbnRfdXBkYXRlZF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2VudCBUaGUgbmV3IGFnZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5tanMubWFwIiwiaW1wb3J0IHsgY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVG9vbENhbGxFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZSB9IGZyb20gXCIuL3V0aWxzL21lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgd2l0aEZ1bmN0aW9uU3Bhbiwgd2l0aEhhbmRvZmZTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jcmVhdGVTcGFucy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCB9IGZyb20gXCIuL3V0aWxzL2Jhc2U2NC5tanNcIjtcbmltcG9ydCB7IGlzQXJyYXlCdWZmZXJWaWV3LCBpc05vZGVCdWZmZXIsIGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90LCB0b1NtYXJ0U3RyaW5nLCB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1bkl0ZW1TdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy9pbmRleC5tanNcIjtcbmZ1bmN0aW9uIGlzQXBwcm92YWxJdGVtTGlrZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghKCdyYXdJdGVtJyBpbiB2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByYXdJdGVtID0gdmFsdWUucmF3SXRlbTtcbiAgICBpZiAoIXJhd0l0ZW0gfHwgdHlwZW9mIHJhd0l0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaXRlbVR5cGUgPSByYXdJdGVtLnR5cGU7XG4gICAgcmV0dXJuIGl0ZW1UeXBlID09PSAnZnVuY3Rpb25fY2FsbCcgfHwgaXRlbVR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJztcbn1cbmZ1bmN0aW9uIGdldEFwcHJvdmFsSWRlbnRpdHkoYXBwcm92YWwpIHtcbiAgICBjb25zdCByYXdJdGVtID0gYXBwcm92YWwucmF3SXRlbTtcbiAgICBpZiAoIXJhd0l0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnICYmIHJhd0l0ZW0uY2FsbElkKSB7XG4gICAgICAgIHJldHVybiBgZnVuY3Rpb25fY2FsbDoke3Jhd0l0ZW0uY2FsbElkfWA7XG4gICAgfVxuICAgIGlmICgnY2FsbElkJyBpbiByYXdJdGVtICYmIHJhd0l0ZW0uY2FsbElkKSB7XG4gICAgICAgIHJldHVybiBgJHtyYXdJdGVtLnR5cGV9OiR7cmF3SXRlbS5jYWxsSWR9YDtcbiAgICB9XG4gICAgY29uc3QgaWQgPSAnaWQnIGluIHJhd0l0ZW0gPyByYXdJdGVtLmlkIDogdW5kZWZpbmVkO1xuICAgIGlmIChpZCkge1xuICAgICAgICByZXR1cm4gYCR7cmF3SXRlbS50eXBlfToke2lkfWA7XG4gICAgfVxuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiByYXdJdGVtLnByb3ZpZGVyRGF0YSA9PT0gJ29iamVjdCcgJiYgcmF3SXRlbS5wcm92aWRlckRhdGFcbiAgICAgICAgPyByYXdJdGVtLnByb3ZpZGVyRGF0YVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAocHJvdmlkZXJEYXRhPy5pZCkge1xuICAgICAgICByZXR1cm4gYCR7cmF3SXRlbS50eXBlfTpwcm92aWRlcjoke3Byb3ZpZGVyRGF0YS5pZH1gO1xuICAgIH1cbiAgICBjb25zdCBhZ2VudE5hbWUgPSAnYWdlbnQnIGluIGFwcHJvdmFsICYmIGFwcHJvdmFsLmFnZW50ID8gYXBwcm92YWwuYWdlbnQubmFtZSA6ICcnO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBgJHthZ2VudE5hbWV9OiR7cmF3SXRlbS50eXBlfToke0pTT04uc3RyaW5naWZ5KHJhd0l0ZW0pfWA7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGAke2FnZW50TmFtZX06JHtyYXdJdGVtLnR5cGV9YDtcbiAgICB9XG59XG5mdW5jdGlvbiBmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvcihlcnJvcikge1xuICAgIC8vIFN1cmZhY2Ugc3RydWN0dXJlZCBvdXRwdXQgdmFsaWRhdGlvbiBoaW50cyB3aXRob3V0IGVjaG9pbmcgcG90ZW50aWFsbHkgbGFyZ2Ugb3Igc2Vuc2l0aXZlIHBheWxvYWRzLlxuICAgIHRyeSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIHouWm9kRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzc3VlID0gZXJyb3IuaXNzdWVzWzBdO1xuICAgICAgICAgICAgaWYgKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNzdWVQYXRoUGFydHMgPSBBcnJheS5pc0FycmF5KGlzc3VlLnBhdGgpID8gaXNzdWUucGF0aCA6IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzc3VlUGF0aCA9IGlzc3VlUGF0aFBhcnRzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBpc3N1ZVBhdGhQYXJ0cy5tYXAoKHBhcnQpID0+IFN0cmluZyhwYXJ0KSkuam9pbignLicpXG4gICAgICAgICAgICAgICAgICAgIDogJyhyb290KSc7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRydW5jYXRlRm9yRGV2ZWxvcGVyKGlzc3VlLm1lc3NhZ2UgPz8gJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBgSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24gYXQgXCIke2lzc3VlUGF0aH1cIiAoJHttZXNzYWdlfSkuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnSW52YWxpZCBvdXRwdXQgdHlwZTogZmluYWwgYXNzaXN0YW50IG91dHB1dCBmYWlsZWQgc2NoZW1hIHZhbGlkYXRpb24uJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gYEludmFsaWQgb3V0cHV0IHR5cGU6ICR7dHJ1bmNhdGVGb3JEZXZlbG9wZXIoZXJyb3IubWVzc2FnZSl9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIC8vIFN3YWxsb3cgZm9ybWF0dGluZyBlcnJvcnMgc28gd2UgY2FuIHJldHVybiBhIGdlbmVyaWMgbWVzc2FnZSBiZWxvdy5cbiAgICB9XG4gICAgcmV0dXJuICdJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGRpZCBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHNjaGVtYS4nO1xufVxuZnVuY3Rpb24gdHJ1bmNhdGVGb3JEZXZlbG9wZXIobWVzc2FnZSwgbWF4TGVuZ3RoID0gMTYwKSB7XG4gICAgY29uc3QgdHJpbW1lZCA9IG1lc3NhZ2UudHJpbSgpO1xuICAgIGlmICghdHJpbW1lZCkge1xuICAgICAgICByZXR1cm4gJ1NjaGVtYSB2YWxpZGF0aW9uIGZhaWxlZC4nO1xuICAgIH1cbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPD0gbWF4TGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0cmltbWVkO1xuICAgIH1cbiAgICByZXR1cm4gYCR7dHJpbW1lZC5zbGljZSgwLCBtYXhMZW5ndGggLSAzKX0uLi5gO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFdhbGtzIGEgcmF3IG1vZGVsIHJlc3BvbnNlIGFuZCBjbGFzc2lmaWVzIGVhY2ggaXRlbSBzbyB0aGUgcnVubmVyIGNhbiBzY2hlZHVsZSBmb2xsb3ctdXAgd29yay5cbiAqIFJldHVybnMgYm90aCB0aGUgc2VyaWFsaXphYmxlIFJ1bkl0ZW1zIChmb3IgaGlzdG9yeS9zdHJlYW1pbmcpIGFuZCB0aGUgYWN0aW9uYWJsZSB0b29sIG1ldGFkYXRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc01vZGVsUmVzcG9uc2UobW9kZWxSZXNwb25zZSwgYWdlbnQsIHRvb2xzLCBoYW5kb2Zmcykge1xuICAgIGNvbnN0IGl0ZW1zID0gW107XG4gICAgY29uc3QgcnVuSGFuZG9mZnMgPSBbXTtcbiAgICBjb25zdCBydW5GdW5jdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5Db21wdXRlckFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5TaGVsbEFjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBydW5BcHBseVBhdGNoQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIC8vIFJlc29sdmUgdG9vbHMgdXBmcm9udCBzbyB3ZSBjYW4gbG9vayB1cCB0aGUgY29uY3JldGUgaGFuZGxlciBpbiBPKDEpIHdoaWxlIGl0ZXJhdGluZyBvdXRwdXRzLlxuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29scy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJykubWFwKCh0KSA9PiBbdC5uYW1lLCB0XSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgY29uc3Qgc2hlbGxUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnc2hlbGwnKTtcbiAgICBjb25zdCBhcHBseVBhdGNoVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2FwcGx5X3BhdGNoJyk7XG4gICAgY29uc3QgbWNwVG9vbE1hcCA9IG5ldyBNYXAodG9vbHNcbiAgICAgICAgLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwJylcbiAgICAgICAgLm1hcCgodCkgPT4gdClcbiAgICAgICAgLm1hcCgodCkgPT4gW3QucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCwgdF0pKTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBtb2RlbFJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgaWYgKG91dHB1dC5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBvdXRwdXQubmFtZTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKHRvb2xOYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnIHx8XG4gICAgICAgICAgICAgICAgb3V0cHV0Lm5hbWUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBIb3N0ZWQgcmVtb3RlIE1DUCBzZXJ2ZXIncyBhcHByb3ZhbCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJMYWJlbCA9IHByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWw7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwU2VydmVyVG9vbCA9IG1jcFRvb2xNYXAuZ2V0KG1jcFNlcnZlckxhYmVsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1jcFNlcnZlclRvb2wgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTUNQIHNlcnZlciAoJHttY3BTZXJ2ZXJMYWJlbH0pIG5vdCBmb3VuZCBpbiBBZ2VudCAoJHthZ2VudC5uYW1lfSlgO1xuICAgICAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWNwX3NlcnZlcl9sYWJlbDogbWNwU2VydmVyTGFiZWwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERvIHRoaXMgYXBwcm92YWwgbGF0ZXI6XG4gICAgICAgICAgICAgICAgLy8gV2Ugc3VwcG9ydCBib3RoIG9uQXBwcm92YWwgY2FsbGJhY2sgKGxpa2UgdGhlIFB5dGhvbiBTREsgZG9lcykgYW5kIEhJVEwgcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXNlIHRoaXMgbmFtZSB0byBhbGlnbiB3aXRoIHRoZSBuYW1lIHNlbnQgZnJvbSB0aGUgc2VydmVyc1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm92aWRlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHByb3ZpZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpO1xuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBhcHByb3ZhbEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIG1jcFRvb2w6IG1jcFNlcnZlclRvb2wsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFtY3BTZXJ2ZXJUb29sLnByb3ZpZGVyRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG9uQXBwcm92YWwgZnVuY3Rpb24gZXhpc3RzLCBpdCBjb25maXJtcyB0aGUgYXBwcm92YWwgcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGh1cywgdGhpcyBhcHByb3ZhbCBpdGVtIG11c3QgYmUgYXBwZW5kZWQgb25seSBmb3IgdGhlIG5leHQgdHVybiBpbnRlcnJ1cHRpb24gcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdyZWFzb25pbmcnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5SZWFzb25pbmdJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2NvbXB1dGVyX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2NvbXB1dGVyX3VzZScpO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnc2hlbGxfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnc2hlbGwnKTtcbiAgICAgICAgICAgIGlmICghc2hlbGxUb29sKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIHNoZWxsIGFjdGlvbiB3aXRob3V0IGEgc2hlbGwgdG9vbC4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIHByb2R1Y2VkIHNoZWxsIGFjdGlvbiB3aXRob3V0IGEgc2hlbGwgdG9vbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1blNoZWxsQWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHNoZWxsOiBzaGVsbFRvb2wsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2FwcGx5X3BhdGNoX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2FwcGx5X3BhdGNoJyk7XG4gICAgICAgICAgICBpZiAoIWFwcGx5UGF0Y2hUb29sKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01vZGVsIHByb2R1Y2VkIGFwcGx5X3BhdGNoIGFjdGlvbiB3aXRob3V0IGFuIGFwcGx5X3BhdGNoIHRvb2wuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBwcm9kdWNlZCBhcHBseV9wYXRjaCBhY3Rpb24gd2l0aG91dCBhbiBhcHBseV9wYXRjaCB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQXBwbHlQYXRjaEFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBhcHBseVBhdGNoOiBhcHBseVBhdGNoVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b29sc1VzZWQucHVzaChvdXRwdXQubmFtZSk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgIGlmIChoYW5kb2ZmKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuSGFuZG9mZnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2ZmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvbk1hcC5nZXQob3V0cHV0Lm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFmdW5jdGlvblRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVG9vbCAke291dHB1dC5uYW1lfSBub3QgZm91bmQgaW4gYWdlbnQgJHthZ2VudC5uYW1lfS5gLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHRvb2w6IGZ1bmN0aW9uVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBpdGVtcyxcbiAgICAgICAgaGFuZG9mZnM6IHJ1bkhhbmRvZmZzLFxuICAgICAgICBmdW5jdGlvbnM6IHJ1bkZ1bmN0aW9ucyxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBydW5Db21wdXRlckFjdGlvbnMsXG4gICAgICAgIHNoZWxsQWN0aW9uczogcnVuU2hlbGxBY3Rpb25zLFxuICAgICAgICBhcHBseVBhdGNoQWN0aW9uczogcnVuQXBwbHlQYXRjaEFjdGlvbnMsXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgIHRvb2xzVXNlZDogdG9vbHNVc2VkLFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5GdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuU2hlbGxBY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5BcHBseVBhdGNoQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG4vKipcbiAqIEludGVybmFsIGNvbnZlbmllbmNlIHdyYXBwZXIgdGhhdCBncm91cHMgdGhlIG91dGNvbWUgb2YgYSBzaW5nbGUgYWdlbnQgdHVybi4gSXQgbGV0cyB0aGUgY2FsbGVyXG4gKiB1cGRhdGUgdGhlIFJ1blN0YXRlIGluIG9uZSBzaG90IGFuZCBkZWNpZGUgd2hpY2ggc3RlcCB0byBleGVjdXRlIG5leHQuXG4gKi9cbmNsYXNzIFNpbmdsZVN0ZXBSZXN1bHQge1xuICAgIG9yaWdpbmFsSW5wdXQ7XG4gICAgbW9kZWxSZXNwb25zZTtcbiAgICBwcmVTdGVwSXRlbXM7XG4gICAgbmV3U3RlcEl0ZW1zO1xuICAgIG5leHRTdGVwO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbnB1dCBpdGVtcyAoaS5lLiwgdGhlIGl0ZW1zIGJlZm9yZSBydW4oKSB3YXMgY2FsbGVkKS4gTWF5IGJlIG11dGF0ZWQgYnkgaGFuZG9mZiBpbnB1dCBmaWx0ZXJzLlxuICAgICAqL1xuICAgIG9yaWdpbmFsSW5wdXQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBtb2RlbCByZXNwb25zZSBmb3IgdGhlIGN1cnJlbnQgc3RlcFxuICAgICAqL1xuICAgIG1vZGVsUmVzcG9uc2UsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBiZWZvcmUgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBwcmVTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBhZnRlciB0aGUgY3VycmVudCBzdGVwIHdhcyBleGVjdXRlZFxuICAgICAqL1xuICAgIG5ld1N0ZXBJdGVtcywgXG4gICAgLyoqXG4gICAgICogVGhlIG5leHQgc3RlcCB0byBleGVjdXRlXG4gICAgICovXG4gICAgbmV4dFN0ZXApIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbElucHV0ID0gb3JpZ2luYWxJbnB1dDtcbiAgICAgICAgdGhpcy5tb2RlbFJlc3BvbnNlID0gbW9kZWxSZXNwb25zZTtcbiAgICAgICAgdGhpcy5wcmVTdGVwSXRlbXMgPSBwcmVTdGVwSXRlbXM7XG4gICAgICAgIHRoaXMubmV3U3RlcEl0ZW1zID0gbmV3U3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5leHRTdGVwID0gbmV4dFN0ZXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4gKGkuZS4gZXZlcnl0aGluZyBnZW5lcmF0ZWQgYWZ0ZXIgb3JpZ2luYWxJbnB1dClcbiAgICAgKi9cbiAgICBnZXQgZ2VuZXJhdGVkSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZVN0ZXBJdGVtcy5jb25jYXQodGhpcy5uZXdTdGVwSXRlbXMpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBSZXNldHMgdGhlIHRvb2wgY2hvaWNlIHdoZW4gdGhlIGFnZW50IGlzIGNvbmZpZ3VyZWQgdG8gcHJlZmVyIGEgZnJlc2ggdG9vbCBzZWxlY3Rpb24gYWZ0ZXJcbiAqIGFueSB0b29sIHVzYWdlLiBUaGlzIHByZXZlbnRzIHRoZSBwcm92aWRlciBmcm9tIHJldXNpbmcgc3RhbGUgdG9vbCBoaW50cyBhY3Jvc3MgdHVybnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVJlc2V0VG9vbENob2ljZShhZ2VudCwgdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoYWdlbnQucmVzZXRUb29sQ2hvaWNlICYmIHRvb2xVc2VUcmFja2VyLmhhc1VzZWRUb29scyhhZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ubW9kZWxTZXR0aW5ncywgdG9vbENob2ljZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbnRpbnVlcyBhIHR1cm4gdGhhdCB3YXMgcHJldmlvdXNseSBpbnRlcnJ1cHRlZCB3YWl0aW5nIGZvciB0b29sIGFwcHJvdmFsLiBFeGVjdXRlcyB0aGUgbm93XG4gKiBhcHByb3ZlZCB0b29scyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIHN0ZXAgdHJhbnNpdGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4oYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBjYWxsX2lkcyBmb3IgZnVuY3Rpb24gdG9vbHNcbiAgICBjb25zdCBmdW5jdGlvbkNhbGxJZHMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSAmJlxuICAgICAgICAnY2FsbElkJyBpbiBpdGVtLnJhd0l0ZW0gJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtLmNhbGxJZCk7XG4gICAgLy8gV2UgYWxyZWFkeSBwZXJzaXN0ZWQgdGhlIHR1cm4gb25jZSB3aGVuIHRoZSBhcHByb3ZhbCBpbnRlcnJ1cHQgd2FzIHJhaXNlZCwgc28gdGhlXG4gICAgLy8gY291bnRlciByZWZsZWN0cyB0aGUgYXBwcm92YWwgaXRlbXMgYXMgXCJmbHVzaGVkXCIuIFdoZW4gd2UgcmVzdW1lIHRoZSBzYW1lIHR1cm4gd2UgbmVlZFxuICAgIC8vIHRvIHJld2luZCBpdCBzbyB0aGUgZXZlbnR1YWwgdG9vbCBvdXRwdXQgZm9yIHRoaXMgY2FsbCBpcyBzdGlsbCB3cml0dGVuIHRvIHRoZSBzZXNzaW9uLlxuICAgIGNvbnN0IHBlbmRpbmdBcHByb3ZhbEl0ZW1zID0gc3RhdGVcbiAgICAgICAgLmdldEludGVycnVwdGlvbnMoKVxuICAgICAgICAuZmlsdGVyKGlzQXBwcm92YWxJdGVtTGlrZSk7XG4gICAgaWYgKHBlbmRpbmdBcHByb3ZhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbCBvZiBwZW5kaW5nQXBwcm92YWxJdGVtcykge1xuICAgICAgICAgICAgY29uc3QgaWRlbnRpdHkgPSBnZXRBcHByb3ZhbElkZW50aXR5KGFwcHJvdmFsKTtcbiAgICAgICAgICAgIGlmIChpZGVudGl0eSkge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMuYWRkKGlkZW50aXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5zaXplID4gMCkge1xuICAgICAgICAgICAgbGV0IHJld2luZENvdW50ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gb3JpZ2luYWxQcmVTdGVwSXRlbXMubGVuZ3RoIC0gMTsgaW5kZXggPj0gMDsgaW5kZXgtLSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1tpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKCEoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpZGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLmhhcyhpZGVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJld2luZENvdW50Kys7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5kZWxldGUoaWRlbnRpdHkpO1xuICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUGVyc2lzdGluZyB0aGUgYXBwcm92YWwgcmVxdWVzdCBhbHJlYWR5IGFkdmFuY2VkIHRoZSBjb3VudGVyIG9uY2UsIHNvIHVuZG8gdGhlIGluY3JlbWVudFxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIHdlIHdyaXRlIHRoZSBmaW5hbCB0b29sIG91dHB1dCBiYWNrIHRvIHRoZSBzZXNzaW9uIHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICAgICAgICAgIGlmIChyZXdpbmRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBNYXRoLm1heCgwLCBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgLSByZXdpbmRDb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgZnVuY3Rpb25Ub29sUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb25DYWxsSWRzLmluY2x1ZGVzKHJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0cyA9IGF3YWl0IGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgZnVuY3Rpb25Ub29sUnVucywgcnVubmVyLCBzdGF0ZSk7XG4gICAgLy8gVGhlcmUgaXMgbm8gYnVpbHQtaW4gSElUTCBhcHByb3ZhbCBzdXJmYWNlIGZvciBjb21wdXRlciB0b29scyB0b2RheSwgc28gZXZlcnkgcGVuZGluZyBhY3Rpb25cbiAgICAvLyBpcyBleGVjdXRlZCBpbW1lZGlhdGVseSB3aGVuIHRoZSB0dXJuIHJlc3VtZXMuXG4gICAgY29uc3QgY29tcHV0ZXJSZXN1bHRzID0gcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBhd2FpdCBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpXG4gICAgICAgIDogW107XG4gICAgLy8gV2hlbiByZXN1bWluZyB3ZSByZWNlaXZlIHRoZSBvcmlnaW5hbCBSdW5JdGVtIHJlZmVyZW5jZXM7IHN1cHByZXNzIGR1cGxpY2F0ZXMgc28gaGlzdG9yeSBhbmQgc3RyZWFtaW5nIGRvIG5vdCBkb3VibGUtZW1pdCB0aGUgc2FtZSBpdGVtcy5cbiAgICBjb25zdCBvcmlnaW5hbFByZVN0ZXBJdGVtU2V0ID0gbmV3IFNldChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgbmV3SXRlbXMgPSBbXTtcbiAgICBjb25zdCBuZXdJdGVtc1NldCA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBhcHBlbmRJZk5ldyA9IChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChvcmlnaW5hbFByZVN0ZXBJdGVtU2V0LmhhcyhpdGVtKSB8fCBuZXdJdGVtc1NldC5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXdJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICBuZXdJdGVtc1NldC5hZGQoaXRlbSk7XG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBmdW5jdGlvblJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0LnJ1bkl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBjb21wdXRlclJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0KTtcbiAgICB9XG4gICAgLy8gUnVuIE1DUCB0b29scyB0aGF0IHJlcXVpcmUgYXBwcm92YWwgYWZ0ZXIgdGhleSBnZXQgdGhlaXIgYXBwcm92YWwgcmVzdWx0c1xuICAgIGNvbnN0IG1jcEFwcHJvdmFsUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMuZmlsdGVyKChydW4pID0+IHtcbiAgICAgICAgcmV0dXJuIChydW4ucmVxdWVzdEl0ZW0udHlwZSA9PT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScgJiZcbiAgICAgICAgICAgIHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJyAmJlxuICAgICAgICAgICAgcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKTtcbiAgICB9KTtcbiAgICAvLyBIb3N0ZWQgTUNQIGFwcHJvdmFscyBtYXkgc3RpbGwgYmUgd2FpdGluZyBvbiBhIGh1bWFuIGRlY2lzaW9uIHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICBjb25zdCBwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxzID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbElkcyA9IG5ldyBTZXQoKTtcbiAgICAvLyBLZWVwIHRyYWNrIG9mIGFwcHJvdmFscyB3ZSBzdGlsbCBuZWVkIHRvIHN1cmZhY2UgbmV4dCB0dXJuIHNvIEhJVEwgZmxvd3MgY2FuIHJlc3VtZSBjbGVhbmx5LlxuICAgIGZvciAoY29uc3QgcnVuIG9mIG1jcEFwcHJvdmFsUnVucykge1xuICAgICAgICAvLyB0aGUgYXBwcm92YWxfcmVxdWVzdF9pZCBcIm1jcHJfMTIzLi4uXCJcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtO1xuICAgICAgICBpZiAocmF3SXRlbS50eXBlICE9PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gcmF3SXRlbS5pZDtcbiAgICAgICAgY29uc3QgYXBwcm92ZWQgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGl0ZW0gbmFtZSBtdXN0IGJlIHRoZSBzYW1lIHdpdGggdGhlIG9uZSBzZW50IGZyb20gUmVzcG9uc2VzIEFQSSBzZXJ2ZXJcbiAgICAgICAgICAgIHRvb2xOYW1lOiByYXdJdGVtLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcHByb3ZlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICByZWFzb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBUZWxsIFJlc3BvbnNlcyBBUEkgc2VydmVyIHRoZSBhcHByb3ZhbCByZXN1bHQgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VJdGVtID0gbmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIH0sIGFnZW50KTtcbiAgICAgICAgICAgIGFwcGVuZElmTmV3KHJlc3BvbnNlSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxzLmFkZChydW4ucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgcGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFsSWRzLmFkZChhcHByb3ZhbFJlcXVlc3RJZCk7XG4gICAgICAgICAgICBmdW5jdGlvblJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF9tY3BfdG9vbF9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgdG9vbDogcnVuLm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgcnVuSXRlbTogcnVuLnJlcXVlc3RJdGVtLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcHBlbmRJZk5ldyhydW4ucmVxdWVzdEl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNlcnZlci1tYW5hZ2VkIGNvbnZlcnNhdGlvbnMgcmVseSBvbiBwcmVTdGVwSXRlbXMgdG8gcmUtc3VyZmFjZSBwZW5kaW5nIGFwcHJvdmFscy5cbiAgICAvLyBLZWVwIHVucmVzb2x2ZWQgaG9zdGVkIE1DUCBhcHByb3ZhbHMgaW4gcGxhY2Ugc28gSElUTCBmbG93cyBzdGlsbCBoYXZlIHNvbWV0aGluZyB0byBhcHByb3ZlIG5leHQgdHVybi5cbiAgICAvLyBEcm9wIHJlc29sdmVkIGFwcHJvdmFsIHBsYWNlaG9sZGVycyBzbyB0aGV5IGFyZSBub3QgcmVwbGF5ZWQgb24gdGhlIG5leHQgdHVybiwgYnV0IGtlZXBcbiAgICAvLyBwZW5kaW5nIGFwcHJvdmFscyBpbiBwbGFjZSB0byBzaWduYWwgdGhlIG91dHN0YW5kaW5nIHdvcmsgdG8gdGhlIFVJIGFuZCBzZXNzaW9uIHN0b3JlLlxuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgICAgICBpdGVtLnJhd0l0ZW0ucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKSB7XG4gICAgICAgICAgICBpZiAocGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFscy5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVxdWVzdElkID0gaXRlbS5yYXdJdGVtLmlkO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsUmVxdWVzdElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbElkcy5oYXMoYXBwcm92YWxSZXF1ZXN0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwID0gYXdhaXQgbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoe1xuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVubmVyLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICBvcmlnaW5hbElucHV0LFxuICAgICAgICBuZXdSZXNwb25zZSxcbiAgICAgICAgcHJlU3RlcEl0ZW1zLFxuICAgICAgICBuZXdJdGVtcyxcbiAgICB9KTtcbiAgICBpZiAoY29tcGxldGVkU3RlcCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVkU3RlcDtcbiAgICB9XG4gICAgLy8gd2Ugb25seSByYW4gbmV3IHRvb2xzIGFuZCBzaWRlIGVmZmVjdHMuIFdlIG5lZWQgdG8gcnVuIHRoZSByZXN0IG9mIHRoZSBhZ2VudFxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXhlY3V0ZXMgZXZlcnkgZm9sbG93LXVwIGFjdGlvbiB0aGUgbW9kZWwgcmVxdWVzdGVkIChmdW5jdGlvbiB0b29scywgY29tcHV0ZXIgYWN0aW9ucywgTUNQIGZsb3dzKSxcbiAqIGFwcGVuZHMgdGhlaXIgb3V0cHV0cyB0byB0aGUgcnVuIGhpc3RvcnksIGFuZCBkZXRlcm1pbmVzIHRoZSBuZXh0IHN0ZXAgZm9yIHRoZSBhZ2VudCBsb29wLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBSZXVzZSB0aGUgc2FtZSBhcnJheSByZWZlcmVuY2Ugc28gd2UgY2FuIGNvbXBhcmUgb2JqZWN0IGlkZW50aXR5IHdoZW4gZGVjaWRpbmcgd2hldGhlciB0b1xuICAgIC8vIGFwcGVuZCBuZXcgaXRlbXMsIGVuc3VyaW5nIHdlIG5ldmVyIGRvdWJsZS1zdHJlYW0gZXhpc3RpbmcgUnVuSXRlbXMuXG4gICAgY29uc3QgcHJlU3RlcEl0ZW1zID0gb3JpZ2luYWxQcmVTdGVwSXRlbXM7XG4gICAgY29uc3Qgc2Vlbkl0ZW1zID0gbmV3IFNldChvcmlnaW5hbFByZVN0ZXBJdGVtcyk7XG4gICAgY29uc3QgbmV3SXRlbXMgPSBbXTtcbiAgICBjb25zdCBhcHBlbmRJZk5ldyA9IChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChzZWVuSXRlbXMuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmV3SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgc2Vlbkl0ZW1zLmFkZChpdGVtKTtcbiAgICB9O1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIGFuZCBjb21wdXRlciBhY3Rpb25zIGluIHBhcmFsbGVsOyBuZWl0aGVyIGRlcGVuZHMgb24gdGhlIG90aGVyJ3Mgc2lkZSBlZmZlY3RzLlxuICAgIGNvbnN0IFtmdW5jdGlvblJlc3VsdHMsIGNvbXB1dGVyUmVzdWx0cywgc2hlbGxSZXN1bHRzLCBhcHBseVBhdGNoUmVzdWx0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLCBydW5uZXIsIHN0YXRlKSxcbiAgICAgICAgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgZXhlY3V0ZVNoZWxsQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2Uuc2hlbGxBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgZXhlY3V0ZUFwcGx5UGF0Y2hPcGVyYXRpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5hcHBseVBhdGNoQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgXSk7XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgZnVuY3Rpb25SZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KHJlc3VsdC5ydW5JdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbXB1dGVyUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHNoZWxsUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhpdGVtKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGFwcGx5UGF0Y2hSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICAvLyBydW4gaG9zdGVkIE1DUCBhcHByb3ZhbCByZXF1ZXN0c1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbFJlcXVlc3Qgb2YgcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cykge1xuICAgICAgICAgICAgY29uc3QgdG9vbERhdGEgPSBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbFxuICAgICAgICAgICAgICAgIC5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGlmICh0b29sRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzbHkgaGFuZGxlIHRoZSBhcHByb3ZhbCBwcm9jZXNzIGhlcmVcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3VsdCA9IGF3YWl0IHRvb2xEYXRhLm9uX2FwcHJvdmFsKHN0YXRlLl9jb250ZXh0LCBhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZhbFJlc3VsdC5hcHByb3ZlLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBhcHByb3ZhbFJlc3VsdC5yZWFzb24sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IGFwcHJvdmFsUmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByZWNlaXZlIGEgdXNlcidzIGFwcHJvdmFsIG9uIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX21jcF90b29sX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3REYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcmVxdWVzdERhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHJlcXVlc3REYXRhLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVxdWVzdERhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0sIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0cy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgLy8gbmV3SXRlbXMucHVzaChhcHByb3ZhbEl0ZW0ucnVuSXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJvY2VzcyBoYW5kb2Zmc1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjb21wbGV0ZWRTdGVwID0gYXdhaXQgbWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMoe1xuICAgICAgICBhZ2VudCxcbiAgICAgICAgcnVubmVyLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZnVuY3Rpb25SZXN1bHRzLFxuICAgICAgICBvcmlnaW5hbElucHV0LFxuICAgICAgICBuZXdSZXNwb25zZSxcbiAgICAgICAgcHJlU3RlcEl0ZW1zLFxuICAgICAgICBuZXdJdGVtcyxcbiAgICB9KTtcbiAgICBpZiAoY29tcGxldGVkU3RlcCkge1xuICAgICAgICByZXR1cm4gY29tcGxldGVkU3RlcDtcbiAgICB9XG4gICAgLy8gSWYgdGhlIG1vZGVsIGlzc3VlZCBhbnkgdG9vbCBjYWxscyBvciBoYW5kb2ZmcyBpbiB0aGlzIHR1cm4sXG4gICAgLy8gd2UgbXVzdCBOT1QgdHJlYXQgYW55IGFzc2lzdGFudCBtZXNzYWdlIGluIHRoZSBzYW1lIHR1cm4gYXMgdGhlIGZpbmFsIG91dHB1dC5cbiAgICAvLyBXZSBzaG91bGQgcnVuIHRoZSBsb29wIGFnYWluIHNvIHRoZSBtb2RlbCBjYW4gc2VlIHRoZSB0b29sIHJlc3VsdHMgYW5kIHJlc3BvbmQuXG4gICAgY29uc3QgaGFkVG9vbENhbGxzT3JBY3Rpb25zID0gKHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucz8ubGVuZ3RoID8/IDApID4gMCB8fFxuICAgICAgICAocHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5zaGVsbEFjdGlvbnM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcz8ubGVuZ3RoID8/IDApID4gMDtcbiAgICBpZiAoaGFkVG9vbENhbGxzT3JBY3Rpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIC8vIE5vIHRvb2wgY2FsbHMvYWN0aW9ucyBpbiB0aGlzIHR1cm47IHNhZmUgdG8gY29uc2lkZXIgYSBwbGFpbiBhc3Npc3RhbnQgbWVzc2FnZSBhcyBmaW5hbC5cbiAgICBjb25zdCBtZXNzYWdlSXRlbXMgPSBuZXdJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSk7XG4gICAgLy8gd2Ugd2lsbCB1c2UgdGhlIGxhc3QgY29udGVudCBvdXRwdXQgYXMgdGhlIGZpbmFsIG91dHB1dFxuICAgIGNvbnN0IHBvdGVudGlhbEZpbmFsT3V0cHV0ID0gbWVzc2FnZUl0ZW1zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG1lc3NhZ2VJdGVtc1ttZXNzYWdlSXRlbXMubGVuZ3RoIC0gMV0ucmF3SXRlbSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gaWYgdGhlcmUgaXMgbm8gb3V0cHV0IHdlIGp1c3QgcnVuIGFnYWluXG4gICAgaWYgKHR5cGVvZiBwb3RlbnRpYWxGaW5hbE91dHB1dCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgLy8gS2VlcCBsb29waW5nIGlmIGFueSB0b29sIG91dHB1dCBwbGFjZWhvbGRlcnMgc3RpbGwgcmVxdWlyZSBhbiBhcHByb3ZhbCBmb2xsb3ctdXAuXG4gICAgY29uc3QgaGFzUGVuZGluZ1Rvb2xzT3JBcHByb3ZhbHMgPSBmdW5jdGlvblJlc3VsdHMuc29tZSgocmVzdWx0KSA9PiByZXN1bHQucnVuSXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pO1xuICAgIGlmICghaGFzUGVuZGluZ1Rvb2xzT3JBcHByb3ZhbHMpIHtcbiAgICAgICAgaWYgKGFnZW50Lm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWdlbnQub3V0cHV0VHlwZSAhPT0gJ3RleHQnICYmIHBvdGVudGlhbEZpbmFsT3V0cHV0KSB7XG4gICAgICAgICAgICAvLyBTdHJ1Y3R1cmVkIG91dHB1dCBzY2hlbWEgPT4gYWx3YXlzIGxlYWRzIHRvIGEgZmluYWwgb3V0cHV0IGlmIHdlIGhhdmUgdGV4dC5cbiAgICAgICAgICAgIGNvbnN0IHsgcGFyc2VyIH0gPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGFnZW50Lm91dHB1dFR5cGUsICdmaW5hbF9vdXRwdXQnKTtcbiAgICAgICAgICAgIGNvbnN0IFtlcnJvcl0gPSBhd2FpdCBzYWZlRXhlY3V0ZSgoKSA9PiBwYXJzZXIocG90ZW50aWFsRmluYWxPdXRwdXQpKTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dEVycm9yTWVzc2FnZSA9IGZvcm1hdEZpbmFsT3V0cHV0VHlwZUVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBvdXRwdXRFcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3Iob3V0cHV0RXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8vIENvbnNvbGlkYXRlcyB0aGUgbG9naWMgdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdG9vbCByZXN1bHRzIHlpZWxkZWQgYSBmaW5hbCBhbnN3ZXIsXG4vLyB0cmlnZ2VyZWQgYW4gaW50ZXJydXB0aW9uLCBvciByZXF1aXJlIHRoZSBhZ2VudCBsb29wIHRvIGNvbnRpbnVlIHJ1bm5pbmcuXG5hc3luYyBmdW5jdGlvbiBtYXliZUNvbXBsZXRlVHVybkZyb21Ub29sUmVzdWx0cyh7IGFnZW50LCBydW5uZXIsIHN0YXRlLCBmdW5jdGlvblJlc3VsdHMsIG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB9KSB7XG4gICAgY29uc3QgdG9vbE91dGNvbWUgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICBpZiAodG9vbE91dGNvbWUuaXNGaW5hbE91dHB1dCkge1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sT3V0Y29tZS5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCB0b29sT3V0Y29tZS5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0Y29tZS5maW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0b29sT3V0Y29tZS5pc0ludGVycnVwdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnM6IHRvb2xPdXRjb21lLmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogTm9ybWFsaXplcyB0b29sIG91dHB1dHMgb25jZSBzbyBkb3duc3RyZWFtIGNvZGUgd29ya3Mgd2l0aCBmdWxseSBzdHJ1Y3R1cmVkIHByb3RvY29sIGl0ZW1zLlxuICogRG9pbmcgdGhpcyBoZXJlIGtlZXBzIEFQSSBzdXJmYWNlIHN0YWJsZSBldmVuIHdoZW4gcHJvdmlkZXJzIGFkZCBuZXcgc2hhcGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xDYWxsLCBvdXRwdXQpIHtcbiAgICBjb25zdCBtYXliZVN0cnVjdHVyZWRPdXRwdXRzID0gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXRzKG91dHB1dCk7XG4gICAgaWYgKG1heWJlU3RydWN0dXJlZE91dHB1dHMpIHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZEl0ZW1zID0gbWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cy5tYXAoY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICBvdXRwdXQ6IHN0cnVjdHVyZWRJdGVtcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGV4dDogdG9TbWFydFN0cmluZyhvdXRwdXQpLFxuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBub3JtYWxpemVGaWxlVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBkaXJlY3RGaWxlID0gdmFsdWUuZmlsZTtcbiAgICBpZiAodHlwZW9mIGRpcmVjdEZpbGUgPT09ICdzdHJpbmcnICYmIGRpcmVjdEZpbGUubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gZGlyZWN0RmlsZTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZE9iamVjdCA9IG5vcm1hbGl6ZUZpbGVPYmplY3RDYW5kaWRhdGUoZGlyZWN0RmlsZSk7XG4gICAgaWYgKG5vcm1hbGl6ZWRPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRPYmplY3Q7XG4gICAgfVxuICAgIGNvbnN0IGxlZ2FjeVZhbHVlID0gbm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlKHZhbHVlKTtcbiAgICBpZiAobGVnYWN5VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGxlZ2FjeVZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZpbGVPYmplY3RDYW5kaWRhdGUodmFsdWUpIHtcbiAgICBpZiAoIWlzUmVjb3JkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKCdkYXRhJyBpbiB2YWx1ZSAmJiB2YWx1ZS5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZGF0YVZhbHVlID0gdmFsdWUuZGF0YTtcbiAgICAgICAgY29uc3QgaGFzU3RyaW5nRGF0YSA9IHR5cGVvZiBkYXRhVmFsdWUgPT09ICdzdHJpbmcnICYmIGRhdGFWYWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCBoYXNCaW5hcnlEYXRhID0gZGF0YVZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSAmJiBkYXRhVmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgaWYgKCFoYXNTdHJpbmdEYXRhICYmICFoYXNCaW5hcnlEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzTm9uRW1wdHlTdHJpbmcodmFsdWUubWVkaWFUeXBlKSB8fFxuICAgICAgICAgICAgIWlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZW5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogdHlwZW9mIGRhdGFWYWx1ZSA9PT0gJ3N0cmluZycgPyBkYXRhVmFsdWUgOiBuZXcgVWludDhBcnJheShkYXRhVmFsdWUpLFxuICAgICAgICAgICAgbWVkaWFUeXBlOiB2YWx1ZS5tZWRpYVR5cGUsXG4gICAgICAgICAgICBmaWxlbmFtZTogdmFsdWUuZmlsZW5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLnVybCkpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB1cmw6IHZhbHVlLnVybCB9O1xuICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IHZhbHVlLmZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9IChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmlkKSAmJiB2YWx1ZS5pZCkgfHxcbiAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZUlkKSAmJiB2YWx1ZS5maWxlSWQpO1xuICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gdmFsdWUuZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUodmFsdWUpIHtcbiAgICBjb25zdCBmaWxlbmFtZSA9IHR5cGVvZiB2YWx1ZS5maWxlbmFtZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZW5hbWUubGVuZ3RoID4gMFxuICAgICAgICA/IHZhbHVlLmZpbGVuYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHR5cGVvZiB2YWx1ZS5tZWRpYVR5cGUgPT09ICdzdHJpbmcnICYmIHZhbHVlLm1lZGlhVHlwZS5sZW5ndGggPiAwXG4gICAgICAgID8gdmFsdWUubWVkaWFUeXBlXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgdmFsdWUuZmlsZURhdGEgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCFtZWRpYVR5cGUgfHwgIWZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiB2YWx1ZS5maWxlRGF0YSwgbWVkaWFUeXBlLCBmaWxlbmFtZSB9O1xuICAgIH1cbiAgICBpZiAodmFsdWUuZmlsZURhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIHZhbHVlLmZpbGVEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCFtZWRpYVR5cGUgfHwgIWZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBuZXcgVWludDhBcnJheSh2YWx1ZS5maWxlRGF0YSksIG1lZGlhVHlwZSwgZmlsZW5hbWUgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5maWxlVXJsID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlVXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB1cmw6IHZhbHVlLmZpbGVVcmwgfTtcbiAgICAgICAgaWYgKGZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlLmZpbGVJZCA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZUlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBpZDogdmFsdWUuZmlsZUlkIH07XG4gICAgICAgIGlmIChmaWxlbmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBpc1JlY29yZCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNOb25FbXB0eVN0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiB0b0lubGluZUltYWdlU3RyaW5nKGRhdGEsIG1lZGlhVHlwZSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKG1lZGlhVHlwZSAmJiAhZGF0YS5zdGFydHNXaXRoKCdkYXRhOicpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXNEYXRhVXJsKGRhdGEsIG1lZGlhVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChkYXRhKTtcbiAgICByZXR1cm4gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKTtcbn1cbmZ1bmN0aW9uIGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSkge1xuICAgIHJldHVybiBtZWRpYVR5cGUgPyBgZGF0YToke21lZGlhVHlwZX07YmFzZTY0LCR7YmFzZTY0fWAgOiBiYXNlNjQ7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogUnVucyBldmVyeSBmdW5jdGlvbiB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBtb2RlbCBhbmQgcmV0dXJucyB0aGVpciBvdXRwdXRzIGFsb25nc2lkZVxuICogdGhlIGBSdW5JdGVtYCBpbnN0YW5jZXMgdGhhdCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gaGlzdG9yeS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgdG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBydW5TaW5nbGVUb29sKHRvb2xSdW4pIHtcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU29tZSB0b29scyByZXF1aXJlIGEgaHVtYW4gb3IgcG9saWN5IGNoZWNrIGJlZm9yZSBleGVjdXRpb247IGRlZmVyIHVudGlsIGFwcHJvdmFsIGlzIHJlY29yZGVkLlxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbFJ1bi50b29sLm5lZWRzQXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xSdW4udG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gc3RhdGUuX2NvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xSdW4udG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVqZWN0ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYFRvb2wgZXhlY3V0aW9uIGZvciAke3Rvb2xSdW4udG9vbENhbGwuY2FsbElkfSB3YXMgbWFudWFsbHkgcmVqZWN0ZWQgYnkgdXNlci5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCByZXNwb25zZSksIGFnZW50LCByZXNwb25zZSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgYXBwcm92YWwgcHJvY2VzcyBuZWVkcyB0byBiZSBkb25lIGluIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xSdW4udG9vbENhbGwsIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5pbnB1dCA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xPdXRwdXQgPSBhd2FpdCB0b29sUnVuLnRvb2wuaW52b2tlKHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cywgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGRhdGEgZm9yIHRyYWNpbmcgYW5kIGV2ZW50IGVtaXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHRvb2xPdXRwdXQpO1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQsIHsgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHN0cmluZ1Jlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25SZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogdG9vbE91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgdG9vbE91dHB1dCksIGFnZW50LCB0b29sT3V0cHV0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IG5lc3RlZFJ1blJlc3VsdCA9IGNvbnN1bWVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbFJ1bi50b29sQ2FsbCk7XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5hZ2VudFJ1blJlc3VsdCA9IG5lc3RlZFJ1blJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkSW50ZXJydXB0aW9ucyA9IG5lc3RlZFJ1blJlc3VsdC5pbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmVzdGVkSW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvblJlc3VsdC5pbnRlcnJ1cHRpb25zID0gbmVzdGVkSW50ZXJydXB0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb25SZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0b29sUnVucy5tYXAocnVuU2luZ2xlVG9vbCkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRvb2xDYWxsRXJyb3IoYEZhaWxlZCB0byBydW4gZnVuY3Rpb24gdG9vbHM6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gSW50ZXJuYWwgaGVscGVyOiBkaXNwYXRjaCBhIGNvbXB1dGVyIGFjdGlvbiBhbmQgcmV0dXJuIGEgc2NyZWVuc2hvdCAoc3luYy9hc3luYylcbmFzeW5jIGZ1bmN0aW9uIF9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QoY29tcHV0ZXIsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgYWN0aW9uID0gdG9vbENhbGwuYWN0aW9uO1xuICAgIGxldCBzY3JlZW5zaG90O1xuICAgIC8vIERpc3BhdGNoIGJhc2VkIG9uIGFjdGlvbiB0eXBlIHN0cmluZyAoYXNzdW1lIGFjdGlvbi50eXBlIGV4aXN0cylcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSwgYWN0aW9uLmJ1dHRvbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG91YmxlX2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmRvdWJsZUNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZHJhZyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kcmFnKGFjdGlvbi5wYXRoLm1hcCgocCkgPT4gW3AueCwgcC55XSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2tleXByZXNzJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmtleXByZXNzKGFjdGlvbi5rZXlzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3ZlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLm1vdmUoYWN0aW9uLngsIGFjdGlvbi55KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JlZW5zaG90JzpcbiAgICAgICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2Nyb2xsJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnNjcm9sbChhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5zY3JvbGxfeCwgYWN0aW9uLnNjcm9sbF95KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnR5cGUoYWN0aW9uLnRleHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3dhaXQnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIud2FpdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBhY3Rpb247IC8vIGVuc3VyZXMgdGhhdCB3ZSBoYW5kbGUgZXZlcnkgYWN0aW9uIHdlIGtub3cgb2ZcbiAgICAgICAgICAgIC8vIFVua25vd24gYWN0aW9uLCBqdXN0IHRha2Ugc2NyZWVuc2hvdFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbnNob3Q7XG4gICAgfVxuICAgIC8vIEFsd2F5cyByZXR1cm4gc2NyZWVuc2hvdCBhcyBiYXNlNjQgc3RyaW5nXG4gICAgaWYgKHR5cGVvZiBjb21wdXRlci5zY3JlZW5zaG90ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignQ29tcHV0ZXIgZG9lcyBub3QgaW1wbGVtZW50IHNjcmVlbnNob3QoKScpO1xufVxuZnVuY3Rpb24gdG9FcnJvck1lc3NhZ2UoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSB8fCBlcnJvci50b1N0cmluZygpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXJyb3IpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoZXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlU2hlbGxBY3Rpb25zKGFnZW50LCBhY3Rpb25zLCBydW5uZXIsIHJ1bkNvbnRleHQsIGN1c3RvbUxvZ2dlciA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IF9sb2dnZXIgPSBjdXN0b21Mb2dnZXIgPz8gbG9nZ2VyO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNoZWxsVG9vbCA9IGFjdGlvbi5zaGVsbDtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCBhZ2VudCwgc2hlbGxUb29sLm5hbWUpO1xuICAgICAgICBjb25zdCByZXF1aXJlc0FwcHJvdmFsID0gYXdhaXQgc2hlbGxUb29sLm5lZWRzQXBwcm92YWwocnVuQ29udGV4dCwgdG9vbENhbGwuYWN0aW9uLCB0b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAocmVxdWlyZXNBcHByb3ZhbCkge1xuICAgICAgICAgICAgaWYgKHNoZWxsVG9vbC5vbkFwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjaXNpb24gPSBhd2FpdCBzaGVsbFRvb2wub25BcHByb3ZhbChydW5Db250ZXh0LCBhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChkZWNpc2lvbi5hcHByb3ZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVjaXNpb24uYXBwcm92ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVuQ29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSBydW5Db250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogc2hlbGxUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVqZWN0aW9uT3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBzdGRlcnI6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiB7IHR5cGU6ICdleGl0JywgZXhpdENvZGU6IG51bGwgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NoZWxsX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogW3JlamVjdGlvbk91dHB1dF0sXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQsIHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFnZW50LCBzaGVsbFRvb2wsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgc2hlbGxUb29sLCB7IHRvb2xDYWxsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaGVsbE91dHB1dHM7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyTWV0YSA9IHt9O1xuICAgICAgICBsZXQgbWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2hlbGxSZXN1bHQgPSBhd2FpdCBzaGVsbFRvb2wuc2hlbGwucnVuKHRvb2xDYWxsLmFjdGlvbik7XG4gICAgICAgICAgICBzaGVsbE91dHB1dHMgPSBzaGVsbFJlc3VsdC5vdXRwdXQgPz8gW107XG4gICAgICAgICAgICBpZiAoc2hlbGxSZXN1bHQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwcm92aWRlck1ldGEsIHNoZWxsUmVzdWx0LnByb3ZpZGVyRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoZWxsUmVzdWx0Lm1heE91dHB1dExlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBtYXhPdXRwdXRMZW5ndGggPSBzaGVsbFJlc3VsdC5tYXhPdXRwdXRMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gdG9FcnJvck1lc3NhZ2UoZXJyKTtcbiAgICAgICAgICAgIHNoZWxsT3V0cHV0cyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZG91dDogJycsXG4gICAgICAgICAgICAgICAgICAgIHN0ZGVycjogZXJyb3JUZXh0LFxuICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiB7IHR5cGU6ICdleGl0JywgZXhpdENvZGU6IG51bGwgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIHNoZWxsIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHNoZWxsT3V0cHV0cyA9IHNoZWxsT3V0cHV0cyA/PyBbXTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIHNoZWxsVG9vbCwgSlNPTi5zdHJpbmdpZnkoc2hlbGxPdXRwdXRzKSwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgc2hlbGxUb29sLCBKU09OLnN0cmluZ2lmeShzaGVsbE91dHB1dHMpLCB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYXdJdGVtID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NoZWxsX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgb3V0cHV0OiBzaGVsbE91dHB1dHMgPz8gW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgbWF4T3V0cHV0TGVuZ3RoID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmF3SXRlbS5tYXhPdXRwdXRMZW5ndGggPSBtYXhPdXRwdXRMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHByb3ZpZGVyTWV0YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmF3SXRlbS5wcm92aWRlckRhdGEgPSBwcm92aWRlck1ldGE7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIHJhd0l0ZW0ub3V0cHV0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVBcHBseVBhdGNoT3BlcmF0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBhcHBseVBhdGNoVG9vbCA9IGFjdGlvbi5hcHBseVBhdGNoO1xuICAgICAgICBjb25zdCB0b29sQ2FsbCA9IGFjdGlvbi50b29sQ2FsbDtcbiAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIGFnZW50LCBhcHBseVBhdGNoVG9vbC5uYW1lKTtcbiAgICAgICAgY29uc3QgcmVxdWlyZXNBcHByb3ZhbCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLm5lZWRzQXBwcm92YWwocnVuQ29udGV4dCwgdG9vbENhbGwub3BlcmF0aW9uLCB0b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAocmVxdWlyZXNBcHByb3ZhbCkge1xuICAgICAgICAgICAgaWYgKGFwcGx5UGF0Y2hUb29sLm9uQXBwcm92YWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNpc2lvbiA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLm9uQXBwcm92YWwocnVuQ29udGV4dCwgYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVjaXNpb24uYXBwcm92ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBydW5Db250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlY2lzaW9uLmFwcHJvdmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gcnVuQ29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IGFwcGx5UGF0Y2hUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbHlfcGF0Y2hfY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCwgcmVzcG9uc2UpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgYWdlbnQsIGFwcGx5UGF0Y2hUb29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFwcGx5UGF0Y2hUb29sLCB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhdHVzID0gJ2NvbXBsZXRlZCc7XG4gICAgICAgIGxldCBvdXRwdXQgPSAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBzd2l0Y2ggKHRvb2xDYWxsLm9wZXJhdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3JlYXRlX2ZpbGUnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5lZGl0b3IuY3JlYXRlRmlsZSh0b29sQ2FsbC5vcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1cGRhdGVfZmlsZSc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLmVkaXRvci51cGRhdGVGaWxlKHRvb2xDYWxsLm9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZV9maWxlJzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYXBwbHlQYXRjaFRvb2wuZWRpdG9yLmRlbGV0ZUZpbGUodG9vbENhbGwub3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBhcHBseV9wYXRjaCBvcGVyYXRpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC5zdGF0dXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzID0gcmVzdWx0LnN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC5vdXRwdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gcmVzdWx0Lm91dHB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzdGF0dXMgPSAnZmFpbGVkJztcbiAgICAgICAgICAgIG91dHB1dCA9IHRvRXJyb3JNZXNzYWdlKGVycik7XG4gICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBhcHBseV9wYXRjaCBvcGVyYXRpb246JywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhZ2VudCwgYXBwbHlQYXRjaFRvb2wsIG91dHB1dCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYXBwbHlQYXRjaFRvb2wsIG91dHB1dCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG91dHB1dCkge1xuICAgICAgICAgICAgcmF3SXRlbS5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIG91dHB1dCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBFeGVjdXRlcyBhbnkgY29tcHV0ZXItdXNlIGFjdGlvbnMgZW1pdHRlZCBieSB0aGUgbW9kZWwgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBpdGVtcyBzbyB0aGVcbiAqIHJ1biBoaXN0b3J5IHJlZmxlY3RzIHRoZSBjb21wdXRlciBzZXNzaW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBjb21wdXRlciA9IGFjdGlvbi5jb21wdXRlci5jb21wdXRlcjtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX3N0YXJ0IChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSdW4gdGhlIGFjdGlvbiBhbmQgZ2V0IHNjcmVlbnNob3RcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChjb21wdXRlci5pbnZva2UpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBjb21wdXRlci5pbnZva2UocnVuQ29udGV4dCwgdG9vbENhbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIGNvbXB1dGVyIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgb3V0cHV0ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfZW5kIChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0LCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBzY3JlZW5zaG90IGFzIGEgZGF0YSBVUkwgd2hlbiBhdmFpbGFibGU7IGZhbGwgYmFjayB0byBhbiBlbXB0eSBzdHJpbmcgb24gZmFpbHVyZXMuXG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gb3V0cHV0ID8gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke291dHB1dH1gIDogJyc7XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXJfY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBvdXRwdXQ6IHsgdHlwZTogJ2NvbXB1dGVyX3NjcmVlbnNob3QnLCBkYXRhOiBpbWFnZVVybCB9LFxuICAgICAgICB9O1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShyYXdJdGVtLCBhZ2VudCwgaW1hZ2VVcmwpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRHJpdmVzIGhhbmRvZmYgY2FsbHMgYnkgaW52b2tpbmcgdGhlIGRvd25zdHJlYW0gYWdlbnQgYW5kIGNhcHR1cmluZyBhbnkgZ2VuZXJhdGVkIGl0ZW1zIHNvXG4gKiB0aGUgY3VycmVudCBhZ2VudCBjYW4gY29udGludWUgd2l0aCB0aGUgbmV3IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHJ1bkhhbmRvZmZzLCBydW5uZXIsIHJ1bkNvbnRleHQpIHtcbiAgICBuZXdTdGVwSXRlbXMgPSBbLi4ubmV3U3RlcEl0ZW1zXTtcbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdJbmNvcnJlY3RseSBjYWxsZWQgZXhlY3V0ZUhhbmRvZmZDYWxscyB3aXRoIG5vIGhhbmRvZmZzLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLiBNb3Zpbmcgb24uJyk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBtdWx0aXBsZSBoYW5kb2Zmcy4gSWdub3JpbmcgYWxsIGJ1dCB0aGUgZmlyc3Qgb25lIGJ5IGFkZGluZyByZWplY3QgcmVzcG9uc2VzIGZvciB0aG9zZVxuICAgICAgICBjb25zdCBvdXRwdXRNZXNzYWdlID0gJ011bHRpcGxlIGhhbmRvZmZzIGRldGVjdGVkLCBpZ25vcmluZyB0aGlzIG9uZS4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJ1bkhhbmRvZmZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShydW5IYW5kb2Zmc1tpXS50b29sQ2FsbCwgb3V0cHV0TWVzc2FnZSksIGFnZW50LCBvdXRwdXRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0dWFsSGFuZG9mZiA9IHJ1bkhhbmRvZmZzWzBdO1xuICAgIHJldHVybiB3aXRoSGFuZG9mZlNwYW4oYXN5bmMgKGhhbmRvZmZTcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBhY3R1YWxIYW5kb2ZmLmhhbmRvZmY7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYocnVuQ29udGV4dCwgYWN0dWFsSGFuZG9mZi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBoYW5kb2ZmU3Bhbi5zcGFuRGF0YS50b19hZ2VudCA9IG5ld0FnZW50Lm5hbWU7XG4gICAgICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRBZ2VudHMgPSBydW5IYW5kb2Zmcy5tYXAoKGgpID0+IGguaGFuZG9mZi5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNdWx0aXBsZSBoYW5kb2ZmcyByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkX2FnZW50czogcmVxdWVzdGVkQWdlbnRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKGFjdHVhbEhhbmRvZmYudG9vbENhbGwsIGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCkpLCBhZ2VudCwgbmV3QWdlbnQpKTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBhZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEZpbHRlciA9IGhhbmRvZmYuaW5wdXRGaWx0ZXIgPz8gcnVubmVyLmNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXI7XG4gICAgICAgIGlmIChpbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGaWx0ZXJpbmcgaW5wdXRzIGZvciBoYW5kb2ZmJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0RmlsdGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiAnbm90IGNhbGxhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZJbnB1dERhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRIaXN0b3J5OiBBcnJheS5pc0FycmF5KG9yaWdpbmFsSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gWy4uLm9yaWdpbmFsSW5wdXRdXG4gICAgICAgICAgICAgICAgICAgIDogb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBwcmVIYW5kb2ZmSXRlbXM6IFsuLi5wcmVTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zOiBbLi4ubmV3U3RlcEl0ZW1zXSxcbiAgICAgICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gaW5wdXRGaWx0ZXIoaGFuZG9mZklucHV0RGF0YSk7XG4gICAgICAgICAgICBvcmlnaW5hbElucHV0ID0gZmlsdGVyZWQuaW5wdXRIaXN0b3J5O1xuICAgICAgICAgICAgcHJlU3RlcEl0ZW1zID0gZmlsdGVyZWQucHJlSGFuZG9mZkl0ZW1zO1xuICAgICAgICAgICAgbmV3U3RlcEl0ZW1zID0gZmlsdGVyZWQubmV3SXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLCBuZXdBZ2VudCB9KTtcbiAgICB9LCB7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGZyb21fYWdlbnQ6IGFnZW50Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5jb25zdCBOT1RfRklOQUxfT1VUUFVUID0ge1xuICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbn07XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRvb2wgZXhlY3V0aW9ucyBwcm9kdWNlZCBhIGZpbmFsIGFnZW50IG91dHB1dCwgdHJpZ2dlcmVkIGFuIGludGVycnVwdGlvbixcbiAqIG9yIHdoZXRoZXIgdGhlIGFnZW50IGxvb3Agc2hvdWxkIGNvbnRpbnVlIGNvbGxlY3RpbmcgbW9yZSByZXNwb25zZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCB0b29sUmVzdWx0cywgc3RhdGUpIHtcbiAgICBpZiAodG9vbFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCBpbnRlcnJ1cHRpb25zID0gW107XG4gICAgZm9yIChjb25zdCByZXN1bHQgb2YgdG9vbFJlc3VsdHMpIHtcbiAgICAgICAgaWYgKHJlc3VsdC5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKHJlc3VsdC5ydW5JdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzdWx0LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHQuaW50ZXJydXB0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2goLi4ucmVzdWx0LmludGVycnVwdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LmFnZW50UnVuUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkSW50ZXJydXB0aW9ucyA9IHJlc3VsdC5hZ2VudFJ1blJlc3VsdC5pbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRJbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJydXB0aW9ucy5wdXNoKC4uLm5lc3RlZEludGVycnVwdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW50ZXJydXB0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHRydWUsXG4gICAgICAgICAgICBpbnRlcnJ1cHRpb25zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoYWdlbnQudG9vbFVzZUJlaGF2aW9yID09PSAncnVuX2xsbV9hZ2FpbicpIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGZpcnN0VG9vbFJlc3VsdCA9IHRvb2xSZXN1bHRzWzBdO1xuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdzdG9wX29uX2ZpcnN0X3Rvb2wnKSB7XG4gICAgICAgIGlmIChmaXJzdFRvb2xSZXN1bHQ/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKGZpcnN0VG9vbFJlc3VsdC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgdG9vbFVzZUJlaGF2aW9yID0gYWdlbnQudG9vbFVzZUJlaGF2aW9yO1xuICAgIGlmICh0eXBlb2YgdG9vbFVzZUJlaGF2aW9yID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjb25zdCBzdG9wcGluZ1Rvb2wgPSB0b29sUmVzdWx0cy5maW5kKChyKSA9PiB0b29sVXNlQmVoYXZpb3Iuc3RvcEF0VG9vbE5hbWVzLmluY2x1ZGVzKHIudG9vbC5uYW1lKSk7XG4gICAgICAgIGlmIChzdG9wcGluZ1Rvb2w/LnR5cGUgPT09ICdmdW5jdGlvbl9vdXRwdXQnKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJpbmdPdXRwdXQgPSB0b1NtYXJ0U3RyaW5nKHN0b3BwaW5nVG9vbC5vdXRwdXQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpc0ZpbmFsT3V0cHV0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ZWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmaW5hbE91dHB1dDogc3RyaW5nT3V0cHV0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRvb2xVc2VCZWhhdmlvcihzdGF0ZS5fY29udGV4dCwgdG9vbFJlc3VsdHMpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBJbnZhbGlkIHRvb2xVc2VCZWhhdmlvcjogJHt0b29sVXNlQmVoYXZpb3J9YCwgc3RhdGUpO1xufVxuZnVuY3Rpb24gZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZShpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ21lc3NhZ2Vfb3V0cHV0X2NyZWF0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZDYWxsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ2hhbmRvZmZfcmVxdWVzdGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ2hhbmRvZmZfb2NjdXJyZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfY2FsbGVkJztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICd0b29sX291dHB1dCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuUmVhc29uaW5nSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3JlYXNvbmluZ19pdGVtX2NyZWF0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCc7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSkge1xuICAgIGNvbnN0IGl0ZW1OYW1lID0gZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZShpdGVtKTtcbiAgICBpZiAoIWl0ZW1OYW1lKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKCdVbmtub3duIGl0ZW0gdHlwZTogJywgaXRlbSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5JdGVtU3RyZWFtRXZlbnQoaXRlbU5hbWUsIGl0ZW0pKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdChyZXN1bHQsIGl0ZW1zKSB7XG4gICAgLy8gUHJlc2VydmUgdGhlIG9yZGVyIGluIHdoaWNoIGl0ZW1zIHdlcmUgZ2VuZXJhdGVkIGJ5IGVucXVldWVpbmcgZWFjaCBvbmVcbiAgICAvLyBpbW1lZGlhdGVseSBvbiB0aGUgc3RyZWFtZWQgcmVzdWx0LlxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHN0ZXAsIG9wdGlvbnMpIHtcbiAgICAvLyBza2lwSXRlbXMgY29udGFpbnMgcnVuIGl0ZW1zIHRoYXQgd2VyZSBhbHJlYWR5IHN0cmVhbWVkIHNvIHdlIGF2b2lkXG4gICAgLy8gZW5xdWV1ZWluZyBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBpbnN0YW5jZS5cbiAgICBjb25zdCBza2lwcGVkSXRlbXMgPSBvcHRpb25zPy5za2lwSXRlbXM7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHN0ZXAubmV3U3RlcEl0ZW1zKSB7XG4gICAgICAgIGlmIChza2lwcGVkSXRlbXM/LmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudChyZXN1bHQsIGl0ZW0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBZ2VudFRvb2xVc2VUcmFja2VyIHtcbiAgICAjYWdlbnRUb1Rvb2xzID0gbmV3IE1hcCgpO1xuICAgIGFkZFRvb2xVc2UoYWdlbnQsIHRvb2xOYW1lcykge1xuICAgICAgICB0aGlzLiNhZ2VudFRvVG9vbHMuc2V0KGFnZW50LCB0b29sTmFtZXMpO1xuICAgIH1cbiAgICBoYXNVc2VkVG9vbHMoYWdlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FnZW50VG9Ub29scy5oYXMoYWdlbnQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbSh0aGlzLiNhZ2VudFRvVG9vbHMuZW50cmllcygpKS5tYXAoKFthZ2VudCwgdG9vbE5hbWVzXSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFthZ2VudC5uYW1lLCB0b29sTmFtZXNdO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbnZlcnQgYSB1c2VyLXByb3ZpZGVkIGlucHV0IGludG8gYSBsaXN0IG9mIGlucHV0IGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9JbnB1dEl0ZW1MaXN0KGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIFsuLi5pbnB1dF07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogRXh0cmFjdCBtb2RlbCBvdXRwdXQgaXRlbXMgZnJvbSBydW4gaXRlbXMsIGV4Y2x1ZGluZyB0b29sIGFwcHJvdmFsIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zKGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtcykge1xuICAgIC8vIFBlcnNpc3RlZCBzZXNzaW9ucyBtdXN0IGF2b2lkIHJhdyBiaW5hcnkgc28gd2UgY29udmVydCBldmVyeSBpdGVtIGludG8gYSBKU09OLXNhZmUgc2hhcGUgYmVmb3JlIHdyaXRpbmcgdG8gc3RvcmFnZS5cbiAgICByZXR1cm4gaXRlbXMubWFwKChpdGVtKSA9PiBzYW5pdGl6ZVZhbHVlRm9yU2Vzc2lvbihzdHJpcFRyYW5zaWVudENhbGxJZHMoaXRlbSkpKTtcbn1cbmZ1bmN0aW9uIHNhbml0aXplVmFsdWVGb3JTZXNzaW9uKHZhbHVlLCBjb250ZXh0ID0ge30pIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgc3VwcG9ydGVkIGJpbmFyeSBwYXlsb2FkcyBpbnRvIEFycmF5QnVmZmVyIHZpZXdzIGJlZm9yZSBzZXJpYWxpemF0aW9uLlxuICAgIGNvbnN0IGJpbmFyeSA9IHRvVWludDhBcnJheUlmQmluYXJ5KHZhbHVlKTtcbiAgICBpZiAoYmluYXJ5KSB7XG4gICAgICAgIHJldHVybiB0b0RhdGFVcmxGcm9tQnl0ZXMoYmluYXJ5LCBjb250ZXh0Lm1lZGlhVHlwZSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKChlbnRyeSkgPT4gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oZW50cnksIGNvbnRleHQpKTtcbiAgICB9XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IHJlY29yZCA9IHZhbHVlO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHR5cGVvZiByZWNvcmQubWVkaWFUeXBlID09PSAnc3RyaW5nJyAmJiByZWNvcmQubWVkaWFUeXBlLmxlbmd0aCA+IDBcbiAgICAgICAgPyByZWNvcmQubWVkaWFUeXBlXG4gICAgICAgIDogY29udGV4dC5tZWRpYVR5cGU7XG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkge1xuICAgICAgICAvLyBQcm9wYWdhdGUgZXhwbGljaXQgbWVkaWEgdHlwZSBvbmx5IHdoZW4gd2Fsa2luZyBpbnRvIGJpbmFyeSBwYXlsb2FkIGNvbnRhaW5lcnMuXG4gICAgICAgIGNvbnN0IG5leHRDb250ZXh0ID0ga2V5ID09PSAnZGF0YScgfHwga2V5ID09PSAnZmlsZURhdGEnID8geyBtZWRpYVR5cGUgfSA6IGNvbnRleHQ7XG4gICAgICAgIHJlc3VsdFtrZXldID0gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24oZW50cnksIG5leHRDb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHRvVWludDhBcnJheUlmQmluYXJ5KHZhbHVlKSB7XG4gICAgLy8gTm9ybWFsaXplIHRoZSBkaXZlcnNlIGJpbmFyeSBjb250YWluZXJzIHdlIG1heSByZWNlaXZlIGludG8gYSBzaGFyZWQgVWludDhBcnJheSB2aWV3LlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzTm9kZUJ1ZmZlcih2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5mcm9tKHNuYXBzaG90LmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gdG9EYXRhVXJsRnJvbUJ5dGVzKGJ5dGVzLCBtZWRpYVR5cGUpIHtcbiAgICAvLyBDb252ZXJ0IGJpbmFyeSBwYXlsb2FkcyBpbnRvIGEgZHVyYWJsZSBkYXRhIFVSTCBzbyBzZXNzaW9uIGZpbGVzIHJlbWFpbiBzZWxmLWNvbnRhaW5lZC5cbiAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoYnl0ZXMpO1xuICAgIC8vIE5vdGUgdGhhdCBPcGVuQUkgUmVzcG9uc2VzIEFQSSBuZXZlciBhY2NlcHRzIGFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSBhcyBhIG1lZGlhIHR5cGUsXG4gICAgLy8gc28gd2UgZmFsbCBiYWNrIHRvIHRleHQvcGxhaW47IHRoYXQgc2FpZCwgdG9vbHMgYXJlIHN1cHBvc2VkIHRvIHJldHVybiBhIHZhbGlkIG1lZGlhIHR5cGUgd2hlbiB0aGlzIHV0aWxpdHkgaXMgdXNlZC5cbiAgICBjb25zdCB0eXBlID0gbWVkaWFUeXBlICYmICFtZWRpYVR5cGUuc3RhcnRzV2l0aCgnZGF0YTonKSA/IG1lZGlhVHlwZSA6ICd0ZXh0L3BsYWluJztcbiAgICByZXR1cm4gYGRhdGE6JHt0eXBlfTtiYXNlNjQsJHtiYXNlNjR9YDtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKTtcbiAgICByZXR1cm4gcHJvdG8gPT09IE9iamVjdC5wcm90b3R5cGUgfHwgcHJvdG8gPT09IG51bGw7XG59XG5mdW5jdGlvbiBzdHJpcFRyYW5zaWVudENhbGxJZHModmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubWFwKChlbnRyeSkgPT4gc3RyaXBUcmFuc2llbnRDYWxsSWRzKGVudHJ5KSk7XG4gICAgfVxuICAgIGlmICghaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdCByZWNvcmQgPSB2YWx1ZTtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBjb25zdCBpc1Byb3RvY29sSXRlbSA9IHR5cGVvZiByZWNvcmQudHlwZSA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLnR5cGUubGVuZ3RoID4gMDtcbiAgICBjb25zdCBzaG91bGRTdHJpcElkID0gaXNQcm90b2NvbEl0ZW0gJiYgc2hvdWxkU3RyaXBJZEZvclR5cGUocmVjb3JkLnR5cGUpO1xuICAgIGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIE9iamVjdC5lbnRyaWVzKHJlY29yZCkpIHtcbiAgICAgICAgaWYgKHNob3VsZFN0cmlwSWQgJiYga2V5ID09PSAnaWQnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRba2V5XSA9IHN0cmlwVHJhbnNpZW50Q2FsbElkcyhlbnRyeSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBzaG91bGRTdHJpcElkRm9yVHlwZSh0eXBlKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uX2NhbGwnOlxuICAgICAgICBjYXNlICdmdW5jdGlvbl9jYWxsX3Jlc3VsdCc6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogUGVyc2lzdCBmdWxsIHR1cm4gKGlucHV0ICsgb3V0cHV0cykgZm9yIG5vbi1zdHJlYW1pbmcgcnVucy5cbiAqL1xuLy8gUGVyc2lzdHMgdGhlIGNvbWJpbmF0aW9uIG9mIHVzZXIgaW5wdXRzIChwb3NzaWJseSBmaWx0ZXJlZCkgYW5kIG1vZGVsIG91dHB1dHMgZm9yIGEgY29tcGxldGVkIHR1cm4uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVRvU2Vzc2lvbihzZXNzaW9uLCBzZXNzaW9uSW5wdXRJdGVtcywgcmVzdWx0KSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRJdGVtcyA9IHNlc3Npb25JbnB1dEl0ZW1zID8/IFtdO1xuICAgIGNvbnN0IHN0YXRlID0gcmVzdWx0LnN0YXRlO1xuICAgIGNvbnN0IGFscmVhZHlQZXJzaXN0ZWQgPSBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPz8gMDtcbiAgICAvLyBQZXJzaXN0IG9ubHkgdGhlIHBvcnRpb24gb2YgX2dlbmVyYXRlZEl0ZW1zIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzdG9yZWQgZm9yIHRoaXMgdHVybi5cbiAgICBjb25zdCBuZXdSdW5JdGVtcyA9IHJlc3VsdC5uZXdJdGVtcy5zbGljZShhbHJlYWR5UGVyc2lzdGVkKTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuT1BFTkFJX0FHRU5UU19fREVCVUdfU0FWRV9TRVNTSU9OKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3NhdmVUb1Nlc3Npb246bmV3UnVuSXRlbXMnLCBuZXdSdW5JdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0udHlwZSkpO1xuICAgIH1cbiAgICBjb25zdCBvdXRwdXRJdGVtcyA9IGV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcyhuZXdSdW5JdGVtcyk7XG4gICAgY29uc3QgaXRlbXNUb1NhdmUgPSBbLi4uaW5wdXRJdGVtcywgLi4ub3V0cHV0SXRlbXNdO1xuICAgIGlmIChpdGVtc1RvU2F2ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIGFscmVhZHlQZXJzaXN0ZWQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkSXRlbXMgPSBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtc1RvU2F2ZSk7XG4gICAgYXdhaXQgc2Vzc2lvbi5hZGRJdGVtcyhzYW5pdGl6ZWRJdGVtcyk7XG4gICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gYWxyZWFkeVBlcnNpc3RlZCArIG5ld1J1bkl0ZW1zLmxlbmd0aDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBQZXJzaXN0IG9ubHkgdGhlIHVzZXIgaW5wdXQgZm9yIHN0cmVhbWluZyBydW5zIGF0IHN0YXJ0LlxuICovXG4vLyBGb3Igc3RyZWFtaW5nIHJ1bnMgd2UgcGVyc2lzdCB1c2VyIGlucHV0IGFzIHNvb24gYXMgaXQgaXMgc2VudCBzbyByZWNvbm5lY3Rpb25zIGNhbiByZXN1bWUuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uKHNlc3Npb24sIHNlc3Npb25JbnB1dEl0ZW1zKSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFzZXNzaW9uSW5wdXRJdGVtcyB8fCBzZXNzaW9uSW5wdXRJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzYW5pdGl6ZWRJbnB1dCA9IG5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlKHNlc3Npb25JbnB1dEl0ZW1zKTtcbiAgICBhd2FpdCBzZXNzaW9uLmFkZEl0ZW1zKHNhbml0aXplZElucHV0KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBQZXJzaXN0IG9ubHkgdGhlIG1vZGVsIG91dHB1dHMgZm9yIHN0cmVhbWluZyBydW5zIGF0IHRoZSBlbmQgb2YgYSB0dXJuLlxuICovXG4vLyBDb21wbGVtZW50cyBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24gYnkgcmVjb3JkaW5nIHRoZSBzdHJlYW1pbmcgb3V0cHV0cyBhdCB0aGUgZW5kIG9mIHRoZSB0dXJuLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24oc2Vzc2lvbiwgcmVzdWx0KSB7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGUgPSByZXN1bHQuc3RhdGU7XG4gICAgY29uc3QgYWxyZWFkeVBlcnNpc3RlZCA9IHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA/PyAwO1xuICAgIGNvbnN0IG5ld1J1bkl0ZW1zID0gcmVzdWx0Lm5ld0l0ZW1zLnNsaWNlKGFscmVhZHlQZXJzaXN0ZWQpO1xuICAgIGNvbnN0IGl0ZW1zVG9TYXZlID0gZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zKG5ld1J1bkl0ZW1zKTtcbiAgICBpZiAoaXRlbXNUb1NhdmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9XG4gICAgICAgICAgICBhbHJlYWR5UGVyc2lzdGVkICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhbml0aXplZEl0ZW1zID0gbm9ybWFsaXplSXRlbXNGb3JTZXNzaW9uUGVyc2lzdGVuY2UoaXRlbXNUb1NhdmUpO1xuICAgIGF3YWl0IHNlc3Npb24uYWRkSXRlbXMoc2FuaXRpemVkSXRlbXMpO1xuICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IGFscmVhZHlQZXJzaXN0ZWQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlcGFyZUlucHV0SXRlbXNXaXRoU2Vzc2lvbihpbnB1dCwgc2Vzc2lvbiwgc2Vzc2lvbklucHV0Q2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByZXBhcmVkSW5wdXQ6IGlucHV0LFxuICAgICAgICAgICAgc2Vzc2lvbkl0ZW1zOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0ID0gb3B0aW9ucz8uaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQgPz8gdHJ1ZTtcbiAgICBjb25zdCBwcmVzZXJ2ZURyb3BwZWROZXdJdGVtcyA9IG9wdGlvbnM/LnByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zID8/IGZhbHNlO1xuICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBzZXNzaW9uLmdldEl0ZW1zKCk7XG4gICAgY29uc3QgbmV3SW5wdXRJdGVtcyA9IEFycmF5LmlzQXJyYXkoaW5wdXQpXG4gICAgICAgID8gWy4uLmlucHV0XVxuICAgICAgICA6IHRvSW5wdXRJdGVtTGlzdChpbnB1dCk7XG4gICAgaWYgKCFzZXNzaW9uSW5wdXRDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJlcGFyZWRJbnB1dDogaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXRcbiAgICAgICAgICAgICAgICA/IFsuLi5oaXN0b3J5LCAuLi5uZXdJbnB1dEl0ZW1zXVxuICAgICAgICAgICAgICAgIDogbmV3SW5wdXRJdGVtcyxcbiAgICAgICAgICAgIHNlc3Npb25JdGVtczogbmV3SW5wdXRJdGVtcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ2FwdHVyZSBzbmFwc2hvdHMgYmVmb3JlIGludm9raW5nIHRoZSBjYWxsYmFjayBzbyB3ZSBjYW4gcmVhc29uIGFib3V0IHRoZSBvcmlnaW5hbCBzdGF0ZSBldmVuXG4gICAgLy8gaWYgdGhlIGNhbGxiYWNrIG11dGF0ZXMgdGhlIGhpc3RvcnkgYXJyYXkgaW4tcGxhY2UuXG4gICAgY29uc3QgaGlzdG9yeVNuYXBzaG90ID0gaGlzdG9yeS5zbGljZSgpO1xuICAgIGNvbnN0IG5ld0lucHV0U25hcHNob3QgPSBuZXdJbnB1dEl0ZW1zLnNsaWNlKCk7XG4gICAgLy8gRGVsZWdhdGUgaGlzdG9yeSByZWNvbmNpbGlhdGlvbiB0byB0aGUgdXNlci1zdXBwbGllZCBjYWxsYmFjay4gSXQgbXVzdCByZXR1cm4gYSBjb25jcmV0ZSBsaXN0XG4gICAgLy8gdG8ga2VlcCBkb3duc3RyZWFtIG1vZGVsIHJlcXVlc3RzIHdlbGwtdHlwZWQuXG4gICAgY29uc3QgY29tYmluZWQgPSBhd2FpdCBzZXNzaW9uSW5wdXRDYWxsYmFjayhoaXN0b3J5LCBuZXdJbnB1dEl0ZW1zKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29tYmluZWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1Nlc3Npb24gaW5wdXQgY2FsbGJhY2sgbXVzdCByZXR1cm4gYW4gYXJyYXkgb2YgQWdlbnRJbnB1dEl0ZW0gb2JqZWN0cy4nKTtcbiAgICB9XG4gICAgY29uc3QgaGlzdG9yeUNvdW50cyA9IGJ1aWxkSXRlbUZyZXF1ZW5jeU1hcChoaXN0b3J5U25hcHNob3QpO1xuICAgIGNvbnN0IG5ld0lucHV0Q291bnRzID0gYnVpbGRJdGVtRnJlcXVlbmN5TWFwKG5ld0lucHV0U25hcHNob3QpO1xuICAgIGNvbnN0IGhpc3RvcnlSZWZzID0gYnVpbGRJdGVtUmVmZXJlbmNlTWFwKGhpc3RvcnlTbmFwc2hvdCk7XG4gICAgY29uc3QgbmV3SW5wdXRSZWZzID0gYnVpbGRJdGVtUmVmZXJlbmNlTWFwKG5ld0lucHV0U25hcHNob3QpO1xuICAgIGNvbnN0IGFwcGVuZGVkID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbWJpbmVkKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHNlc3Npb25JdGVtS2V5KGl0ZW0pO1xuICAgICAgICBpZiAoY29uc3VtZVJlZmVyZW5jZShuZXdJbnB1dFJlZnMsIGtleSwgaXRlbSkpIHtcbiAgICAgICAgICAgIGRlY3JlbWVudENvdW50KG5ld0lucHV0Q291bnRzLCBrZXkpO1xuICAgICAgICAgICAgYXBwZW5kZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFByaW9yaXRpemUgZXhhY3QgaGlzdG9yeSBtYXRjaGVzIGJlZm9yZSBwYXlsb2FkLWJhc2VkIGNvdW50cyBzbyBjYWxsYmFja3MgdGhhdCBzdXJmYWNlXG4gICAgICAgIC8vIGhpc3RvcnkgYWhlYWQgb2YgaWRlbnRpY2FsIG5ldyBpbnB1dHMga2VlcCBwcmV2aW91c2x5IHBlcnNpc3RlZCBpdGVtcyBvdXQgb2YgdGhlIG5ldyBxdWV1ZS5cbiAgICAgICAgaWYgKGNvbnN1bWVSZWZlcmVuY2UoaGlzdG9yeVJlZnMsIGtleSwgaXRlbSkpIHtcbiAgICAgICAgICAgIGRlY3JlbWVudENvdW50KGhpc3RvcnlDb3VudHMsIGtleSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoaXN0b3J5UmVtYWluaW5nID0gaGlzdG9yeUNvdW50cy5nZXQoa2V5KSA/PyAwO1xuICAgICAgICBpZiAoaGlzdG9yeVJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgIGhpc3RvcnlDb3VudHMuc2V0KGtleSwgaGlzdG9yeVJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3UmVtYWluaW5nID0gbmV3SW5wdXRDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgaWYgKG5ld1JlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgIG5ld0lucHV0Q291bnRzLnNldChrZXksIG5ld1JlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgYXBwZW5kZWQucHVzaChpdGVtKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGFwcGVuZGVkLnB1c2goaXRlbSk7XG4gICAgfVxuICAgIC8vIFByZXNlcnZlIHJlZGFjdGVkIGlucHV0cyBmb3IgbW9kZWwgZGVsaXZlcnkgd2hlbiByZXF1ZXN0ZWQgKGUuZy4gc2VydmVyLW1hbmFnZWQgaGlzdG9yaWVzKS5cbiAgICBjb25zdCBwcmVwYXJlZEl0ZW1zID0gaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXRcbiAgICAgICAgPyBjb21iaW5lZFxuICAgICAgICA6IGFwcGVuZGVkLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gYXBwZW5kZWRcbiAgICAgICAgICAgIDogcHJlc2VydmVEcm9wcGVkTmV3SXRlbXNcbiAgICAgICAgICAgICAgICA/IG5ld0lucHV0U25hcHNob3RcbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByZXBhcmVkSW5wdXQ6IHByZXBhcmVkSXRlbXMsXG4gICAgICAgIC8vIFJlc3BlY3QgY2FsbGJhY2tzIHRoYXQgaW50ZW50aW9uYWxseSBkcm9wIHRoZSBsYXRlc3QgaW5wdXRzIChlLmcuIHRvIHJlZGFjdCBzZW5zaXRpdmVcbiAgICAgICAgLy8gdmFsdWVzKSBieSBwZXJzaXN0aW5nIG9ubHkgdGhlIGl0ZW1zIHRoZXkga2VwdCBpbiB0aGUgY29tYmluZWQgYXJyYXkuXG4gICAgICAgIHNlc3Npb25JdGVtczogYXBwZW5kZWQsXG4gICAgfTtcbn1cbi8qKlxuICogQWNjZXB0cyB3aGF0ZXZlciB0aGUgdG9vbCByZXR1cm5lZCBhbmQgYXR0ZW1wdHMgdG8gY29lcmNlIGl0IGludG8gdGhlIHN0cnVjdHVyZWQgcHJvdG9jb2xcbiAqIHNoYXBlcyB3ZSBleHBvc2UgdG8gZG93bnN0cmVhbSBtb2RlbCBhZGFwdGVycyAoaW5wdXRfdGV4dC9pbnB1dF9pbWFnZS9pbnB1dF9maWxlKS4gVG9vbHMgYXJlXG4gKiBhbGxvd2VkIHRvIHJldHVybiBlaXRoZXIgYSBzaW5nbGUgc3RydWN0dXJlZCBvYmplY3Qgb3IgYW4gYXJyYXkgb2YgdGhlbTsgYW55dGhpbmcgZWxzZSBmYWxsc1xuICogYmFjayB0byB0aGUgbGVnYWN5IHN0cmluZyBwaXBlbGluZS5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXRzKG91dHB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG91dHB1dCkpIHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygb3V0cHV0KSB7XG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXQoaXRlbSk7XG4gICAgICAgICAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cnVjdHVyZWQucHVzaChub3JtYWxpemVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RydWN0dXJlZDtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KG91dHB1dCk7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQgPyBbbm9ybWFsaXplZF0gOiBudWxsO1xufVxuLyoqXG4gKiBCZXN0LWVmZm9ydCBub3JtYWxpemF0aW9uIG9mIGEgc2luZ2xlIHRvb2wgb3V0cHV0IGl0ZW0uIElmIHRoZSBvYmplY3QgYWxyZWFkeSBtYXRjaGVzIHRoZVxuICogcHJvdG9jb2wgc2hhcGUgd2Ugc2ltcGx5IGNhc3QgaXQ7IG90aGVyd2lzZSB3ZSBjb3B5IHRoZSByZWNvZ25pc2VkIGZpZWxkcyBpbnRvIHRoZSBjYW5vbmljYWxcbiAqIHN0cnVjdHVyZS4gUmV0dXJuaW5nIG51bGwgbGV0cyB0aGUgY2FsbGVyIGtub3cgd2Ugc2hvdWxkIHJldmVydCB0byBwbGFpbi1zdHJpbmcgaGFuZGxpbmcuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KHZhbHVlKSB7XG4gICAgaWYgKCFpc1JlY29yZCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSB2YWx1ZS50eXBlO1xuICAgIGlmICh0eXBlID09PSAndGV4dCcgJiYgdHlwZW9mIHZhbHVlLnRleHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ3RleHQnLCB0ZXh0OiB2YWx1ZS50ZXh0IH07XG4gICAgICAgIGlmIChpc1JlY29yZCh2YWx1ZS5wcm92aWRlckRhdGEpKSB7XG4gICAgICAgICAgICBvdXRwdXQucHJvdmlkZXJEYXRhID0gdmFsdWUucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ2ltYWdlJyB9O1xuICAgICAgICBsZXQgaW1hZ2VTdHJpbmc7XG4gICAgICAgIGxldCBpbWFnZUZpbGVJZDtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tJbWFnZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcodmFsdWUubWVkaWFUeXBlKVxuICAgICAgICAgICAgPyB2YWx1ZS5tZWRpYVR5cGVcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBpbWFnZUZpZWxkID0gdmFsdWUuaW1hZ2U7XG4gICAgICAgIGlmICh0eXBlb2YgaW1hZ2VGaWVsZCA9PT0gJ3N0cmluZycgJiYgaW1hZ2VGaWVsZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZVN0cmluZyA9IGltYWdlRmllbGQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNSZWNvcmQoaW1hZ2VGaWVsZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlT2JqID0gaW1hZ2VGaWVsZDtcbiAgICAgICAgICAgIGNvbnN0IGlubGluZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoubWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgID8gaW1hZ2VPYmoubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgOiBmYWxsYmFja0ltYWdlTWVkaWFUeXBlO1xuICAgICAgICAgICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoudXJsKSkge1xuICAgICAgICAgICAgICAgIGltYWdlU3RyaW5nID0gaW1hZ2VPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdG9JbmxpbmVJbWFnZVN0cmluZyhpbWFnZU9iai5kYXRhLCBpbmxpbmVNZWRpYVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW1hZ2VPYmouZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICAgICAgICAgICAgICBpbWFnZU9iai5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcoaW1hZ2VPYmouZGF0YSwgaW5saW5lTWVkaWFUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaW1hZ2VTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGVJZCA9IChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmZpbGVJZCkgJiYgaW1hZ2VPYmouZmlsZUlkKSB8fFxuICAgICAgICAgICAgICAgICAgICAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5pZCkgJiYgaW1hZ2VPYmouaWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VGaWxlSWQgPSBjYW5kaWRhdGVJZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbWFnZVN0cmluZyAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmltYWdlVXJsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdmFsdWUuaW1hZ2VVcmwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB2YWx1ZS5pbWFnZVVybDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWltYWdlRmlsZUlkICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZmlsZUlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdmFsdWUuZmlsZUlkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlRmlsZUlkID0gdmFsdWUuZmlsZUlkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW1hZ2VTdHJpbmcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5kYXRhID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZVN0cmluZyA9IGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGVcbiAgICAgICAgICAgICAgICA/IHRvSW5saW5lSW1hZ2VTdHJpbmcodmFsdWUuZGF0YSwgZmFsbGJhY2tJbWFnZU1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICA6IHZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWltYWdlU3RyaW5nICYmXG4gICAgICAgICAgICB2YWx1ZS5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcodmFsdWUuZGF0YSwgZmFsbGJhY2tJbWFnZU1lZGlhVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5kZXRhaWwgPT09ICdzdHJpbmcnICYmIHZhbHVlLmRldGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvdXRwdXQuZGV0YWlsID0gdmFsdWUuZGV0YWlsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbWFnZVN0cmluZykge1xuICAgICAgICAgICAgb3V0cHV0LmltYWdlID0gaW1hZ2VTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW1hZ2VGaWxlSWQpIHtcbiAgICAgICAgICAgIG91dHB1dC5pbWFnZSA9IHsgZmlsZUlkOiBpbWFnZUZpbGVJZCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVjb3JkKHZhbHVlLnByb3ZpZGVyRGF0YSkpIHtcbiAgICAgICAgICAgIG91dHB1dC5wcm92aWRlckRhdGEgPSB2YWx1ZS5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBjb25zdCBmaWxlVmFsdWUgPSBub3JtYWxpemVGaWxlVmFsdWUodmFsdWUpO1xuICAgICAgICBpZiAoIWZpbGVWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0geyB0eXBlOiAnZmlsZScsIGZpbGU6IGZpbGVWYWx1ZSB9O1xuICAgICAgICBpZiAoaXNSZWNvcmQodmFsdWUucHJvdmlkZXJEYXRhKSkge1xuICAgICAgICAgICAgb3V0cHV0LnByb3ZpZGVyRGF0YSA9IHZhbHVlLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgbm9ybWFsaXplZCB0b29sIG91dHB1dCBpbnRvIHRoZSBwcm90b2NvbCBgaW5wdXRfKmAgaXRlbXMuIFRoaXMgaXMgdGhlIGxhc3QgaG9wXG4gKiBiZWZvcmUgd2UgaGFuZCB0aGUgZGF0YSB0byBtb2RlbC1zcGVjaWZpYyBhZGFwdGVycywgc28gd2UgZ2VuZXJhdGUgdGhlIGV4YWN0IHNjaGVtYSBleHBlY3RlZCBieVxuICogdGhlIHByb3RvY29sIGRlZmluaXRpb25zLlxuICovXG5mdW5jdGlvbiBjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbShvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiBvdXRwdXQudGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHR5cGU6ICdpbnB1dF9pbWFnZScgfTtcbiAgICAgICAgaWYgKHR5cGVvZiBvdXRwdXQuZGV0YWlsID09PSAnc3RyaW5nJyAmJiBvdXRwdXQuZGV0YWlsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5kZXRhaWwgPSBvdXRwdXQuZGV0YWlsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygb3V0cHV0LmltYWdlID09PSAnc3RyaW5nJyAmJiBvdXRwdXQuaW1hZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gb3V0cHV0LmltYWdlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVjb3JkKG91dHB1dC5pbWFnZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlT2JqID0gb3V0cHV0LmltYWdlO1xuICAgICAgICAgICAgY29uc3QgaW5saW5lTWVkaWFUeXBlID0gaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5tZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgPyBpbWFnZU9iai5tZWRpYVR5cGVcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLnVybCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSBpbWFnZU9iai51cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID1cbiAgICAgICAgICAgICAgICAgICAgaW5saW5lTWVkaWFUeXBlICYmICFpbWFnZU9iai5kYXRhLnN0YXJ0c1dpdGgoJ2RhdGE6JylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYXNEYXRhVXJsKGltYWdlT2JqLmRhdGEsIGlubGluZU1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaW1hZ2VPYmouZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGltYWdlT2JqLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgICAgICAgICAgaW1hZ2VPYmouZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGltYWdlT2JqLmRhdGEpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IGFzRGF0YVVybChiYXNlNjQsIGlubGluZU1lZGlhVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZlcmVuY2VkSWQgPSAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5maWxlSWQpICYmIGltYWdlT2JqLmZpbGVJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouaWQpICYmIGltYWdlT2JqLmlkKSB8fFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlZmVyZW5jZWRJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSB7IGlkOiByZWZlcmVuY2VkSWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdHlwZTogJ2lucHV0X2ZpbGUnIH07XG4gICAgICAgIGNvbnN0IGZpbGVWYWx1ZSA9IG91dHB1dC5maWxlO1xuICAgICAgICBpZiAodHlwZW9mIGZpbGVWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlID0gZmlsZVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZpbGVWYWx1ZSAmJiB0eXBlb2YgZmlsZVZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcmVjb3JkID0gZmlsZVZhbHVlO1xuICAgICAgICAgICAgaWYgKCdkYXRhJyBpbiByZWNvcmQgJiYgcmVjb3JkLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZWRpYVR5cGUgPSByZWNvcmQubWVkaWFUeXBlID8/ICd0ZXh0L3BsYWluJztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlY29yZC5kYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IGFzRGF0YVVybChyZWNvcmQuZGF0YSwgbWVkaWFUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChyZWNvcmQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcmVjb3JkLnVybCA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLnVybC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSB7IHVybDogcmVjb3JkLnVybCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlZElkID0gKHR5cGVvZiByZWNvcmQuaWQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZC5pZC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgICAgIHJlY29yZC5pZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiByZWNvcmQuZmlsZUlkID09PSAnc3RyaW5nJyAmJiByZWNvcmQuZmlsZUlkLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVjb3JkLmZpbGVJZFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSB7IGlkOiByZWZlcmVuY2VkSWQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlY29yZC5maWxlbmFtZSA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLmZpbGVuYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSByZWNvcmQuZmlsZW5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNvbnN0IGV4aGF1c3RpdmVDaGVjayA9IG91dHB1dDtcbiAgICByZXR1cm4gZXhoYXVzdGl2ZUNoZWNrO1xufVxuZnVuY3Rpb24gYnVpbGRJdGVtRnJlcXVlbmN5TWFwKGl0ZW1zKSB7XG4gICAgY29uc3QgY291bnRzID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBjb25zdCBrZXkgPSBzZXNzaW9uSXRlbUtleShpdGVtKTtcbiAgICAgICAgY291bnRzLnNldChrZXksIChjb3VudHMuZ2V0KGtleSkgPz8gMCkgKyAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50cztcbn1cbmZ1bmN0aW9uIGJ1aWxkSXRlbVJlZmVyZW5jZU1hcChpdGVtcykge1xuICAgIGNvbnN0IHJlZnMgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHNlc3Npb25JdGVtS2V5KGl0ZW0pO1xuICAgICAgICBjb25zdCBsaXN0ID0gcmVmcy5nZXQoa2V5KTtcbiAgICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlZnMuc2V0KGtleSwgW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVmcztcbn1cbmZ1bmN0aW9uIGNvbnN1bWVSZWZlcmVuY2UocmVmcywga2V5LCB0YXJnZXQpIHtcbiAgICBjb25zdCBjYW5kaWRhdGVzID0gcmVmcy5nZXQoa2V5KTtcbiAgICBpZiAoIWNhbmRpZGF0ZXMgfHwgY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IGNhbmRpZGF0ZXMuZmluZEluZGV4KChjYW5kaWRhdGUpID0+IGNhbmRpZGF0ZSA9PT0gdGFyZ2V0KTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY2FuZGlkYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZWZzLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGRlY3JlbWVudENvdW50KG1hcCwga2V5KSB7XG4gICAgY29uc3QgcmVtYWluaW5nID0gKG1hcC5nZXQoa2V5KSA/PyAwKSAtIDE7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgIG1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1hcC5zZXQoa2V5LCByZW1haW5pbmcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlc3Npb25JdGVtS2V5KGl0ZW0pIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoaXRlbSwgc2Vzc2lvblNlcmlhbGl6YXRpb25SZXBsYWNlcik7XG59XG5mdW5jdGlvbiBzZXNzaW9uU2VyaWFsaXphdGlvblJlcGxhY2VyKF9rZXksIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0FycmF5QnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2YWx1ZSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogdmlldy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KFVpbnQ4QXJyYXkuZnJvbSh2YWx1ZS5kYXRhKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkltcGxlbWVudGF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1bkhhbmRvZmZDYWxsSXRlbSwgUnVuSGFuZG9mZk91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldFR1cm5JbnB1dCB9IGZyb20gXCIuL3J1bi5tanNcIjtcbmltcG9ydCB7IEFnZW50VG9vbFVzZVRyYWNrZXIsIG5leHRTdGVwU2NoZW1hLCB9IGZyb20gXCIuL3J1bkltcGxlbWVudGF0aW9uLm1qc1wiO1xuaW1wb3J0IHsgU3lzdGVtRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi90cmFjaW5nL3Byb3ZpZGVyLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRUcmFjZSB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG5pbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuLyoqXG4gKiBUaGUgc2NoZW1hIHZlcnNpb24gb2YgdGhlIHNlcmlhbGl6ZWQgcnVuIHN0YXRlLiBUaGlzIGlzIHVzZWQgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcmlhbGl6ZWRcbiAqIHJ1biBzdGF0ZSBpcyBjb21wYXRpYmxlIHdpdGggdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiB0aGUgU0RLLlxuICogSWYgYW55dGhpbmcgaW4gdGhpcyBzY2hlbWEgY2hhbmdlcywgdGhlIHZlcnNpb24gd2lsbCBoYXZlIHRvIGJlIGluY3JlbWVudGVkLlxuICovXG5leHBvcnQgY29uc3QgQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTiA9ICcxLjAnO1xuY29uc3QgJHNjaGVtYVZlcnNpb24gPSB6LmxpdGVyYWwoQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTik7XG5jb25zdCBzZXJpYWxpemVkQWdlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFNwYW5CYXNlID0gei5vYmplY3Qoe1xuICAgIG9iamVjdDogei5saXRlcmFsKCd0cmFjZS5zcGFuJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgdHJhY2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFyZW50X2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgc3RhcnRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVuZGVkX2F0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgZXJyb3I6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG4gICAgfSlcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3Bhbl9kYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbn0pO1xuY29uc3QgU2VyaWFsaXplZFNwYW4gPSBzZXJpYWxpemVkU3BhbkJhc2UuZXh0ZW5kKHtcbiAgICBwcmV2aW91c19zcGFuOiB6LmxhenkoKCkgPT4gU2VyaWFsaXplZFNwYW4pLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IHJlcXVlc3RVc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IHVzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHJlcXVlc3RzOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHouYXJyYXkoei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSkub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzOiB6LmFycmF5KHJlcXVlc3RVc2FnZVNjaGVtYSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgbW9kZWxSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgb3V0cHV0OiB6LmFycmF5KHByb3RvY29sLk91dHB1dE1vZGVsSXRlbSksXG4gICAgcmVzcG9uc2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgaXRlbVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5Ub29sQ2FsbEl0ZW0ub3IocHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9jYWxsX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuUmVhc29uaW5nSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9jYWxsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaGFuZG9mZl9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgICAgICBzb3VyY2VBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0YXJnZXRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2FwcHJvdmFsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pXG4gICAgICAgICAgICAub3IocHJvdG9jb2wuU2hlbGxDYWxsSXRlbSlcbiAgICAgICAgICAgIC5vcihwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICB0b29sTmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxuXSk7XG5jb25zdCBzZXJpYWxpemVkVHJhY2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlJyksXG4gICAgaWQ6IHouc3RyaW5nKCksXG4gICAgd29ya2Zsb3dfbmFtZTogei5zdHJpbmcoKSxcbiAgICBncm91cF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbn0pO1xuY29uc3Qgc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5ld0l0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIHRvb2xzVXNlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICBoYW5kb2Zmczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBoYW5kb2ZmOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBmdW5jdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgdG9vbDogei5hbnkoKSxcbiAgICB9KSksXG4gICAgY29tcHV0ZXJBY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGNvbXB1dGVyOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBzaGVsbEFjdGlvbnM6IHpcbiAgICAgICAgLmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIHNoZWxsOiB6LmFueSgpLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBhcHBseVBhdGNoQWN0aW9uczogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgYXBwbHlQYXRjaDogei5hbnkoKSxcbiAgICB9KSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgbWNwQXBwcm92YWxSZXF1ZXN0czogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICByZXF1ZXN0SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgLy8gcHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtXG4gICAgICAgICAgICByYXdJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgICAgICAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFsd2F5cyBleGlzdHMgYnV0IG1hcmtlZCBhcyBvcHRpb25hbCBmb3IgZWFybHkgdmVyc2lvbiBjb21wYXRpYmlsaXR5OyB3aGVuIHJlbGVhc2luZyAxLjAsIHdlIGNhbiByZW1vdmUgdGhlIG51bGxhYmxlIGFuZCBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBIb3N0ZWRNQ1BUb29sXG4gICAgICAgIG1jcFRvb2w6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2wnKSxcbiAgICAgICAgICAgIG5hbWU6IHoubGl0ZXJhbCgnaG9zdGVkX21jcCcpLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgfSksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0cmlwd2lyZVRyaWdnZXJlZDogei5ib29sZWFuKCksXG4gICAgb3V0cHV0SW5mbzogei5hbnkoKSxcbn0pO1xuY29uc3QgaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgYWdlbnRPdXRwdXQ6IHouYW55KCksXG4gICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgU2VyaWFsaXplZFJ1blN0YXRlID0gei5vYmplY3Qoe1xuICAgICRzY2hlbWFWZXJzaW9uLFxuICAgIGN1cnJlbnRUdXJuOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG9yaWdpbmFsSW5wdXQ6IHouc3RyaW5nKCkub3Ioei5hcnJheShwcm90b2NvbC5Nb2RlbEl0ZW0pKSxcbiAgICBtb2RlbFJlc3BvbnNlczogei5hcnJheShtb2RlbFJlc3BvbnNlU2NoZW1hKSxcbiAgICBjb250ZXh0OiB6Lm9iamVjdCh7XG4gICAgICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICAgICAgYXBwcm92YWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm9iamVjdCh7XG4gICAgICAgICAgICBhcHByb3ZlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgICAgICByZWplY3RlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGV4dDogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG4gICAgdG9vbFVzZVRyYWNrZXI6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLFxuICAgIG1heFR1cm5zOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudFNwYW46IFNlcmlhbGl6ZWRTcGFuLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBub0FjdGl2ZUFnZW50UnVuOiB6LmJvb2xlYW4oKSxcbiAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkoaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkob3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBjdXJyZW50U3RlcDogbmV4dFN0ZXBTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBsYXN0TW9kZWxSZXNwb25zZTogbW9kZWxSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGdlbmVyYXRlZEl0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG4gICAgdHJhY2U6IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYS5udWxsYWJsZSgpLFxufSk7XG4vKipcbiAqIFNlcmlhbGl6YWJsZSBzbmFwc2hvdCBvZiBhbiBhZ2VudCdzIHJ1biwgaW5jbHVkaW5nIGNvbnRleHQsIHVzYWdlIGFuZCB0cmFjZS5cbiAqIFdoaWxlIHRoaXMgY2xhc3MgaGFzIHB1YmxpY2x5IHdyaXRhYmxlIHByb3BlcnRpZXMgKHByZWZpeGVkIHdpdGggYF9gKSwgdGhleSBhcmUgbm90IG1lYW50IHRvIGJlXG4gKiB1c2VkIGRpcmVjdGx5LiBUbyByZWFkIHRoZXNlIHByb3BlcnRpZXMsIHVzZSB0aGUgYFJ1blJlc3VsdGAgaW5zdGVhZC5cbiAqXG4gKiBNYW5pcHVsYXRpb24gb2YgdGhlIHN0YXRlIGRpcmVjdGx5IGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIHNob3VsZCBiZSBhdm9pZGVkLlxuICogSW5zdGVhZCwgdXNlIHRoZSBgYXBwcm92ZWAgYW5kIGByZWplY3RgIG1ldGhvZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5TdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0dXJuIG51bWJlciBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IGN1cnJlbnRseSBoYW5kbGluZyB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnQ7XG4gICAgLyoqXG4gICAgICogT3JpZ2luYWwgdXNlciBpbnB1dCBwcmlvciB0byBhbnkgcHJvY2Vzc2luZy5cbiAgICAgKi9cbiAgICBfb3JpZ2luYWxJbnB1dDtcbiAgICAvKipcbiAgICAgKiBSZXNwb25zZXMgZnJvbSB0aGUgbW9kZWwgc28gZmFyLlxuICAgICAqL1xuICAgIF9tb2RlbFJlc3BvbnNlcztcbiAgICAvKipcbiAgICAgKiBBY3RpdmUgdHJhY2luZyBzcGFuIGZvciB0aGUgY3VycmVudCBhZ2VudCBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudFNwYW47XG4gICAgLyoqXG4gICAgICogUnVuIGNvbnRleHQgdHJhY2tpbmcgYXBwcm92YWxzLCB1c2FnZSwgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIF9jb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBhZ2dyZWdhdGVkIGZvciB0aGlzIHJ1bi4gVGhpcyBpbmNsdWRlcyBwZXItcmVxdWVzdCBicmVha2Rvd25zIHdoZW4gYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGF0IHRvb2xzIGVhY2ggYWdlbnQgaGFzIHVzZWQuXG4gICAgICovXG4gICAgX3Rvb2xVc2VUcmFja2VyO1xuICAgIC8qKlxuICAgICAqIEl0ZW1zIGdlbmVyYXRlZCBieSB0aGUgYWdlbnQgZHVyaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgX2dlbmVyYXRlZEl0ZW1zO1xuICAgIC8qKlxuICAgICAqIE51bWJlciBvZiBgX2dlbmVyYXRlZEl0ZW1zYCBhbHJlYWR5IGZsdXNoZWQgdG8gc2Vzc2lvbiBzdG9yYWdlIGZvciB0aGUgY3VycmVudCB0dXJuLlxuICAgICAqXG4gICAgICogUGVyc2lzdGluZyB0aGUgZW50aXJlIHR1cm4gb24gZXZlcnkgc2F2ZSB3b3VsZCBkdXBsaWNhdGUgcmVzcG9uc2VzIGFuZCB0b29sIG91dHB1dHMuXG4gICAgICogSW5zdGVhZCwgYHNhdmVUb1Nlc3Npb25gIGFwcGVuZHMgb25seSB0aGUgZGVsdGEgc2luY2UgdGhlIHByZXZpb3VzIHdyaXRlLiBUaGlzIGNvdW50ZXJcbiAgICAgKiB0cmFja3MgaG93IG1hbnkgZ2VuZXJhdGVkIHJ1biBpdGVtcyBmcm9tICp0aGlzIHR1cm4qIHdlcmUgYWxyZWFkeSB3cml0dGVuIHNvIHRoZSBuZXh0XG4gICAgICogc2F2ZSBjYW4gc2xpY2Ugb2ZmIG9ubHkgdGhlIG5ldyBlbnRyaWVzLiBXaGVuIGEgdHVybiBpcyBpbnRlcnJ1cHRlZCAoZS5nLiwgYXdhaXRpbmcgdG9vbFxuICAgICAqIGFwcHJvdmFsKSBhbmQgbGF0ZXIgcmVzdW1lZCwgd2UgcmV3aW5kIHRoZSBjb3VudGVyIGJlZm9yZSBjb250aW51aW5nIHNvIHRoZSBwZW5kaW5nIHRvb2xcbiAgICAgKiBvdXRwdXQgc3RpbGwgZ2V0cyBzdG9yZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50O1xuICAgIC8qKlxuICAgICAqIE1heGltdW0gYWxsb3dlZCB0dXJucyBiZWZvcmUgZm9yY2luZyB0ZXJtaW5hdGlvbi5cbiAgICAgKi9cbiAgICBfbWF4VHVybnM7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcnVuIGhhcyBhbiBhY3RpdmUgYWdlbnQgc3RlcCBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBfbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgLyoqXG4gICAgICogTGFzdCBtb2RlbCByZXNwb25zZSBmb3IgdGhlIHByZXZpb3VzIHR1cm4uXG4gICAgICovXG4gICAgX2xhc3RUdXJuUmVzcG9uc2U7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIGlucHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBOZXh0IHN0ZXAgY29tcHV0ZWQgZm9yIHRoZSBhZ2VudCB0byB0YWtlLlxuICAgICAqL1xuICAgIF9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBQYXJzZWQgbW9kZWwgcmVzcG9uc2UgYWZ0ZXIgYXBwbHlpbmcgZ3VhcmRyYWlscyBhbmQgdG9vbHMuXG4gICAgICovXG4gICAgX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBUcmFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBydW4gaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF90cmFjZSA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgb3JpZ2luYWxJbnB1dCwgc3RhcnRpbmdBZ2VudCwgbWF4VHVybnMpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX29yaWdpbmFsSW5wdXQgPSBzdHJ1Y3R1cmVkQ2xvbmUob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgIHRoaXMuX21vZGVsUmVzcG9uc2VzID0gW107XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudCA9IHN0YXJ0aW5nQWdlbnQ7XG4gICAgICAgIHRoaXMuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgdGhpcy5fZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9tYXhUdXJucyA9IG1heFR1cm5zO1xuICAgICAgICB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl90cmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgYWdlbnQgcnVuLiBUaGlzIGluY2x1ZGVzIHRoZSBpbnB1dCBpdGVtcyBhbmQgdGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuX29yaWdpbmFsSW5wdXQsIHRoaXMuX2dlbmVyYXRlZEl0ZW1zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgaW50ZXJydXB0aW9ucyBpZiB0aGUgY3VycmVudCBzdGVwIGlzIGFuIGludGVycnVwdGlvbiBvdGhlcndpc2UgcmV0dXJucyBhbiBlbXB0eSBhcnJheS5cbiAgICAgKi9cbiAgICBnZXRJbnRlcnJ1cHRpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmVzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIGFwcHJvdmUgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgYXBwcm92ZSB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c0FwcHJvdmVgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgYXBwcm92YWwuXG4gICAgICovXG4gICAgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3RzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIHJlamVjdCB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSByZWplY3QgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNSZWplY3RgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSByZWplY3Rpb24uXG4gICAgICovXG4gICAgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICAkc2NoZW1hVmVyc2lvbjogQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTixcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuOiB0aGlzLl9jdXJyZW50VHVybixcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQ6IHRoaXMuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICBtb2RlbFJlc3BvbnNlczogdGhpcy5fbW9kZWxSZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0czogcmVzcG9uc2UudXNhZ2UucmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiByZXNwb25zZS51c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UudXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZXNwb25zZS51c2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UudXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMubWFwKChlbnRyeSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiBlbnRyeS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuczogZW50cnkub3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IGVudHJ5LnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiBlbnRyeS5pbnB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiBlbnRyeS5vdXRwdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLm91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcmVzcG9uc2UucmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiByZXNwb25zZS5wcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy5fY29udGV4dC50b0pTT04oKSxcbiAgICAgICAgICAgIHRvb2xVc2VUcmFja2VyOiB0aGlzLl90b29sVXNlVHJhY2tlci50b0pTT04oKSxcbiAgICAgICAgICAgIG1heFR1cm5zOiB0aGlzLl9tYXhUdXJucyxcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudFNwYW46IHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4/LnRvSlNPTigpLFxuICAgICAgICAgICAgbm9BY3RpdmVBZ2VudFJ1bjogdGhpcy5fbm9BY3RpdmVBZ2VudFJ1bixcbiAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5faW5wdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgICAgICBhZ2VudDogci5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiB0aGlzLl9jdXJyZW50U3RlcCxcbiAgICAgICAgICAgIGxhc3RNb2RlbFJlc3BvbnNlOiB0aGlzLl9sYXN0VHVyblJlc3BvbnNlLFxuICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHRoaXMuX2dlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS50b0pTT04oKSksXG4gICAgICAgICAgICBjdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudDogdGhpcy5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQsXG4gICAgICAgICAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHRoaXMuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSxcbiAgICAgICAgICAgIHRyYWNlOiB0aGlzLl90cmFjZSA/IHRoaXMuX3RyYWNlLnRvSlNPTigpIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gcGFyc2luZyB0aGUgc2NoZW1hIHRvIGVuc3VyZSB0aGUgb3V0cHV0IGlzIHZhbGlkIGZvciByZXBhcnNpbmdcbiAgICAgICAgY29uc3QgcGFyc2VkID0gU2VyaWFsaXplZFJ1blN0YXRlLnNhZmVQYXJzZShvdXRwdXQpO1xuICAgICAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3lzdGVtRXJyb3IoYEZhaWxlZCB0byBzZXJpYWxpemUgcnVuIHN0YXRlLiAke3BhcnNlZC5lcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZWQuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcgdGhhdCB3YXMgc2VyaWFsaXplZCB1c2luZyB0aGVcbiAgICAgKiBgdG9TdHJpbmdgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVN0cmluZyhpbml0aWFsQWdlbnQsIHN0cikge1xuICAgICAgICBjb25zdCBbcGFyc2luZ0Vycm9yLCBqc29uUmVzdWx0XSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGlmIChwYXJzaW5nRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBydW4gc3RhdGUuICR7cGFyc2luZ0Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBwYXJzaW5nRXJyb3IubWVzc2FnZSA6IFN0cmluZyhwYXJzaW5nRXJyb3IpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2hlbWFWZXJzaW9uID0ganNvblJlc3VsdC4kc2NoZW1hVmVyc2lvbjtcbiAgICAgICAgaWYgKCFjdXJyZW50U2NoZW1hVmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignUnVuIHN0YXRlIGlzIG1pc3Npbmcgc2NoZW1hIHZlcnNpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFNjaGVtYVZlcnNpb24gIT09IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFJ1biBzdGF0ZSBzY2hlbWEgdmVyc2lvbiAke2N1cnJlbnRTY2hlbWFWZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIHZlcnNpb24gJHtDVVJSRU5UX1NDSEVNQV9WRVJTSU9OfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlSnNvbiA9IFNlcmlhbGl6ZWRSdW5TdGF0ZS5wYXJzZShKU09OLnBhcnNlKHN0cikpO1xuICAgICAgICBjb25zdCBhZ2VudE1hcCA9IGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gUmVidWlsZCB0aGUgY29udGV4dFxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gbmV3IFJ1bkNvbnRleHQoc3RhdGVKc29uLmNvbnRleHQuY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQuX3JlYnVpbGRBcHByb3ZhbHMoc3RhdGVKc29uLmNvbnRleHQuYXBwcm92YWxzKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBhZ2VudCBmcm9tIHRoZSBpbml0aWFsIGFnZW50XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWUpO1xuICAgICAgICBpZiAoIWN1cnJlbnRBZ2VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQWdlbnQgJHtzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlID0gbmV3IFJ1blN0YXRlKGNvbnRleHQsICcnLCBjdXJyZW50QWdlbnQsIHN0YXRlSnNvbi5tYXhUdXJucyk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVybiA9IHN0YXRlSnNvbi5jdXJyZW50VHVybjtcbiAgICAgICAgLy8gcmVidWlsZCB0b29sIHVzZSB0cmFja2VyXG4gICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIGZvciAoY29uc3QgW2FnZW50TmFtZSwgdG9vbE5hbWVzXSBvZiBPYmplY3QuZW50cmllcyhzdGF0ZUpzb24udG9vbFVzZVRyYWNrZXIpKSB7XG4gICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShhZ2VudE1hcC5nZXQoYWdlbnROYW1lKSwgdG9vbE5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWJ1aWxkIGN1cnJlbnQgYWdlbnQgc3BhblxuICAgICAgICBpZiAoc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgIGlmICghc3RhdGVKc29uLnRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNlIGlzIG5vdCBzZXQsIHNraXBwaW5nIHRyYWNpbmcgc2V0dXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgICAgICB0cmFjZUlkOiBzdGF0ZUpzb24udHJhY2U/LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlSnNvbi50cmFjZT8ud29ya2Zsb3dfbmFtZSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdGF0ZUpzb24udHJhY2U/Lmdyb3VwX2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogc3RhdGVKc29uLnRyYWNlPy5tZXRhZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgIHN0YXRlLl90cmFjZSA9IHRyYWNlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gc3RhdGVKc29uLm5vQWN0aXZlQWdlbnRSdW47XG4gICAgICAgIHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPVxuICAgICAgICAgICAgc3RhdGVKc29uLmlucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAgICAgc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBzdGF0ZUpzb24ub3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50TWFwLmdldChyLmFnZW50Lm5hbWUpLFxuICAgICAgICB9KSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlSnNvbi5jdXJyZW50U3RlcDtcbiAgICAgICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSBzdGF0ZUpzb24ub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzID0gc3RhdGVKc29uLm1vZGVsUmVzcG9uc2VzLm1hcChkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2UpO1xuICAgICAgICBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZVxuICAgICAgICAgICAgPyBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHN0YXRlSnNvbi5nZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPVxuICAgICAgICAgICAgc3RhdGVKc29uLmN1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID8/IDA7XG4gICAgICAgIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlXG4gICAgICAgICAgICA/IGF3YWl0IGRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UoYWdlbnRNYXAsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLFxuICAgICAgICAgICAgICAgIG5ld0FnZW50OiBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRTdGVwLm5ld0FnZW50Lm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KSB7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHF1ZXVlID0gW2luaXRpYWxBZ2VudF07XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKG1hcC5oYXMoY3VycmVudEFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBtYXAuc2V0KGN1cnJlbnRBZ2VudC5uYW1lLCBjdXJyZW50QWdlbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRvZmYgb2YgY3VycmVudEFnZW50LmhhbmRvZmZzKSB7XG4gICAgICAgICAgICBpZiAoaGFuZG9mZiBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYW5kb2ZmLmFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYuYWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmLmFnZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuKSB7XG4gICAgY29uc3Qgc3BhbkRhdGEgPSBzZXJpYWxpemVkU3Bhbi5zcGFuX2RhdGE7XG4gICAgY29uc3QgcHJldmlvdXNTcGFuID0gc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhblxuICAgICAgICA/IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhbilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3BhbiA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgc3BhbklkOiBzZXJpYWxpemVkU3Bhbi5pZCxcbiAgICAgICAgdHJhY2VJZDogc2VyaWFsaXplZFNwYW4udHJhY2VfaWQsXG4gICAgICAgIHBhcmVudElkOiBzZXJpYWxpemVkU3Bhbi5wYXJlbnRfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBzdGFydGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLnN0YXJ0ZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBlbmRlZEF0OiBzZXJpYWxpemVkU3Bhbi5lbmRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGRhdGE6IHNwYW5EYXRhLFxuICAgIH0sIHRyYWNlKTtcbiAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHByZXZpb3VzU3BhbjtcbiAgICByZXR1cm4gc3Bhbjtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UpIHtcbiAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZShzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXNhZ2UsXG4gICAgICAgIG91dHB1dDogc2VyaWFsaXplZE1vZGVsUmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4gcHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtLnBhcnNlKGl0ZW0pKSxcbiAgICAgICAgcmVzcG9uc2VJZDogc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UucmVzcG9uc2VJZCxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5wcm92aWRlckRhdGEsXG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZUl0ZW0oc2VyaWFsaXplZEl0ZW0sIGFnZW50TWFwKSB7XG4gICAgc3dpdGNoIChzZXJpYWxpemVkSXRlbS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5NZXNzYWdlT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICd0b29sX2NhbGxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xDYWxsSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpLCBzZXJpYWxpemVkSXRlbS5vdXRwdXQpO1xuICAgICAgICBjYXNlICdyZWFzb25pbmdfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlYXNvbmluZ0l0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAnaGFuZG9mZl9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAnaGFuZG9mZl9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bkhhbmRvZmZPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5zb3VyY2VBZ2VudC5uYW1lKSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLnRhcmdldEFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9hcHByb3ZhbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSksIHNlcmlhbGl6ZWRJdGVtLnRvb2xOYW1lKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5hc3luYyBmdW5jdGlvbiBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBjdXJyZW50QWdlbnQsIGNvbnRleHQsIHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgY3VycmVudEFnZW50LmdldEFsbFRvb2xzKGNvbnRleHQpO1xuICAgIGNvbnN0IHRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnY29tcHV0ZXInKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IHNoZWxsVG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ3NoZWxsJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBhcHBseVBhdGNoVG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2FwcGx5X3BhdGNoJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBoYW5kb2ZmcyA9IG5ldyBNYXAoY3VycmVudEFnZW50LmhhbmRvZmZzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5IGluc3RhbmNlb2YgQWdlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBbZW50cnkubmFtZSwgaGFuZG9mZihlbnRyeSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbZW50cnkudG9vbE5hbWUsIGVudHJ5XTtcbiAgICB9KSk7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBuZXdJdGVtczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zLm1hcCgoaXRlbSkgPT4gZGVzZXJpYWxpemVJdGVtKGl0ZW0sIGFnZW50TWFwKSksXG4gICAgICAgIHRvb2xzVXNlZDogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCxcbiAgICAgICAgaGFuZG9mZnM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZG9mZnMuaGFzKGhhbmRvZmYuaGFuZG9mZi50b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBIYW5kb2ZmICR7aGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGhhbmRvZmYudG9vbENhbGwsXG4gICAgICAgICAgICAgICAgaGFuZG9mZjogaGFuZG9mZnMuZ2V0KGhhbmRvZmYuaGFuZG9mZi50b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgZnVuY3Rpb25zOiBhd2FpdCBQcm9taXNlLmFsbChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLm1hcChhc3luYyAoZnVuY3Rpb25DYWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRvb2xzLmhhcyhmdW5jdGlvbkNhbGwudG9vbC5uYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFRvb2wgJHtmdW5jdGlvbkNhbGwudG9vbC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGZ1bmN0aW9uQ2FsbC50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB0b29sOiB0b29scy5nZXQoZnVuY3Rpb25DYWxsLnRvb2wubmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSksXG4gICAgICAgIGNvbXB1dGVyQWN0aW9uczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucy5tYXAoKGNvbXB1dGVyQWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IGNvbXB1dGVyQWN0aW9uLmNvbXB1dGVyLm5hbWU7XG4gICAgICAgICAgICBpZiAoIWNvbXB1dGVyVG9vbHMuaGFzKHRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYENvbXB1dGVyIHRvb2wgJHt0b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBjb21wdXRlckFjdGlvbi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBjb21wdXRlcjogY29tcHV0ZXJUb29scy5nZXQodG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIHNoZWxsQWN0aW9uczogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5zaGVsbEFjdGlvbnMgPz8gW10pLm1hcCgoc2hlbGxBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gc2hlbGxBY3Rpb24uc2hlbGwubmFtZTtcbiAgICAgICAgICAgIGlmICghc2hlbGxUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgU2hlbGwgdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IHNoZWxsQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIHNoZWxsOiBzaGVsbFRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgYXBwbHlQYXRjaEFjdGlvbnM6IChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuYXBwbHlQYXRjaEFjdGlvbnMgPz8gW10pLm1hcCgoYXBwbHlQYXRjaEFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHBseVBhdGNoQWN0aW9uLmFwcGx5UGF0Y2gubmFtZTtcbiAgICAgICAgICAgIGlmICghYXBwbHlQYXRjaFRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBBcHBseSBwYXRjaCB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogYXBwbHlQYXRjaEFjdGlvbi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBhcHBseVBhdGNoOiBhcHBseVBhdGNoVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBtY3BBcHByb3ZhbFJlcXVlc3RzOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMgPz8gW10pLm1hcCgoYXBwcm92YWxSZXF1ZXN0KSA9PiAoe1xuICAgICAgICAgICAgcmVxdWVzdEl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbVxuICAgICAgICAgICAgICAgIC5yYXdJdGVtLCBjdXJyZW50QWdlbnQpLFxuICAgICAgICAgICAgbWNwVG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgIH0pKSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgaGFzVG9vbHNPckFwcHJvdmFsc1RvUnVuKCkge1xuICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQuaGFuZG9mZnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5mdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuY29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuc2hlbGxBY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuYXBwbHlQYXRjaEFjdGlvbnMubGVuZ3RoID4gMCk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1blN0YXRlLm1qcy5tYXAiLCJpbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgZGVmaW5lSW5wdXRHdWFyZHJhaWwsIGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuUmVzdWx0LCBTdHJlYW1lZFJ1blJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdC5tanNcIjtcbmltcG9ydCB7IFJ1bkhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBzZXJpYWxpemVUb29sLCBzZXJpYWxpemVIYW5kb2ZmIH0gZnJvbSBcIi4vdXRpbHMvc2VyaWFsaXplLm1qc1wiO1xuaW1wb3J0IHsgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVXNlckVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGFkZFN0ZXBUb1J1blJlc3VsdCwgcmVzb2x2ZUludGVycnVwdGVkVHVybiwgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UsIG1heWJlUmVzZXRUb29sQ2hvaWNlLCBwcm9jZXNzTW9kZWxSZXNwb25zZSwgc3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQsIHNhdmVTdHJlYW1JbnB1dFRvU2Vzc2lvbiwgc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbiwgc2F2ZVRvU2Vzc2lvbiwgcHJlcGFyZUlucHV0SXRlbXNXaXRoU2Vzc2lvbiwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IGdldE9yQ3JlYXRlVHJhY2UsIGFkZEVycm9yVG9DdXJyZW50U3BhbiwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhOZXdTcGFuQ29udGV4dCwgd2l0aFRyYWNlLCB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUFnZW50U3Bhbiwgd2l0aEd1YXJkcmFpbFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmltcG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgUnVuU3RhdGUgfSBmcm9tIFwiLi9ydW5TdGF0ZS5tanNcIjtcbmltcG9ydCB7IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmltcG9ydCB7IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQsIGlzR3B0NURlZmF1bHQgfSBmcm9tIFwiLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5pbXBvcnQgeyBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQgfSBmcm9tIFwiLi91dGlscy9iYXNlNjQubWpzXCI7XG5pbXBvcnQgeyBpc0FycmF5QnVmZmVyVmlldywgaXNOb2RlQnVmZmVyLCBpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCwgfSBmcm9tIFwiLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcnVubmVyID0gZ2V0RGVmYXVsdFJ1bm5lcigpO1xuICAgIGlmIChvcHRpb25zPy5zdHJlYW0pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJ1bm5lci5ydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxufVxuLyoqXG4gKiBPcmNoZXN0cmF0ZXMgYWdlbnQgZXhlY3V0aW9uLCBpbmNsdWRpbmcgZ3VhcmRyYWlscywgdG9vbCBjYWxscywgc2Vzc2lvbiBwZXJzaXN0ZW5jZSwgYW5kXG4gKiB0cmFjaW5nLiBSZXVzZSBhIGBSdW5uZXJgIGluc3RhbmNlIHdoZW4geW91IHdhbnQgY29uc2lzdGVudCBjb25maWd1cmF0aW9uIGFjcm9zcyBtdWx0aXBsZSBydW5zLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmVyIGV4dGVuZHMgUnVuSG9va3Mge1xuICAgIGNvbmZpZztcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcnVubmVyIHdpdGggb3B0aW9uYWwgZGVmYXVsdHMgdGhhdCBhcHBseSB0byBldmVyeSBzdWJzZXF1ZW50IHJ1biBpbnZvY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIE92ZXJyaWRlcyBmb3IgbW9kZWxzLCBndWFyZHJhaWxzLCB0cmFjaW5nLCBvciBzZXNzaW9uIGJlaGF2aW9yLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICAgICAgbW9kZWxQcm92aWRlcjogY29uZmlnLm1vZGVsUHJvdmlkZXIgPz8gZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIoKSxcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBtb2RlbFNldHRpbmdzOiBjb25maWcubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgIGhhbmRvZmZJbnB1dEZpbHRlcjogY29uZmlnLmhhbmRvZmZJbnB1dEZpbHRlcixcbiAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsczogY29uZmlnLmlucHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbHM6IGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgdHJhY2luZ0Rpc2FibGVkOiBjb25maWcudHJhY2luZ0Rpc2FibGVkID8/IGZhbHNlLFxuICAgICAgICAgICAgdHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YTogY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEgPz8gdHJ1ZSxcbiAgICAgICAgICAgIHdvcmtmbG93TmFtZTogY29uZmlnLndvcmtmbG93TmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnLFxuICAgICAgICAgICAgdHJhY2VJZDogY29uZmlnLnRyYWNlSWQsXG4gICAgICAgICAgICBncm91cElkOiBjb25maWcuZ3JvdXBJZCxcbiAgICAgICAgICAgIHRyYWNlTWV0YWRhdGE6IGNvbmZpZy50cmFjZU1ldGFkYXRhLFxuICAgICAgICAgICAgc2Vzc2lvbklucHV0Q2FsbGJhY2s6IGNvbmZpZy5zZXNzaW9uSW5wdXRDYWxsYmFjayxcbiAgICAgICAgICAgIGNhbGxNb2RlbElucHV0RmlsdGVyOiBjb25maWcuY2FsbE1vZGVsSW5wdXRGaWx0ZXIsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVJbnB1dEd1YXJkcmFpbCk7XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcyA9IChjb25maWcub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCk7XG4gICAgfVxuICAgIGFzeW5jIHJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMgPSB7XG4gICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgIGNvbnRleHQ6IHVuZGVmaW5lZCxcbiAgICB9KSB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkT3B0aW9ucyA9IG9wdGlvbnMgPz8geyBzdHJlYW06IGZhbHNlLCBjb250ZXh0OiB1bmRlZmluZWQgfTtcbiAgICAgICAgLy8gUGVyLXJ1biBvcHRpb25zIHRha2UgcHJlY2VkZW5jZSBvdmVyIHJ1bm5lciBkZWZhdWx0cyBmb3Igc2Vzc2lvbiBtZW1vcnkgYmVoYXZpb3IuXG4gICAgICAgIGNvbnN0IHNlc3Npb25JbnB1dENhbGxiYWNrID0gcmVzb2x2ZWRPcHRpb25zLnNlc3Npb25JbnB1dENhbGxiYWNrID8/IHRoaXMuY29uZmlnLnNlc3Npb25JbnB1dENhbGxiYWNrO1xuICAgICAgICAvLyBMaWtld2lzZSBhbGxvdyBjYWxsZXJzIHRvIG92ZXJyaWRlIGNhbGxNb2RlbElucHV0RmlsdGVyIG9uIGluZGl2aWR1YWwgcnVucy5cbiAgICAgICAgY29uc3QgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgPSByZXNvbHZlZE9wdGlvbnMuY2FsbE1vZGVsSW5wdXRGaWx0ZXIgPz8gdGhpcy5jb25maWcuY2FsbE1vZGVsSW5wdXRGaWx0ZXI7XG4gICAgICAgIGNvbnN0IGhhc0NhbGxNb2RlbElucHV0RmlsdGVyID0gQm9vbGVhbihjYWxsTW9kZWxJbnB1dEZpbHRlcik7XG4gICAgICAgIGNvbnN0IGVmZmVjdGl2ZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi5yZXNvbHZlZE9wdGlvbnMsXG4gICAgICAgICAgICBzZXNzaW9uSW5wdXRDYWxsYmFjayxcbiAgICAgICAgICAgIGNhbGxNb2RlbElucHV0RmlsdGVyLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uID0gQm9vbGVhbihlZmZlY3RpdmVPcHRpb25zLmNvbnZlcnNhdGlvbklkKSB8fFxuICAgICAgICAgICAgQm9vbGVhbihlZmZlY3RpdmVPcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCk7XG4gICAgICAgIC8vIFdoZW4gdGhlIHNlcnZlciB0cmFja3MgY29udmVyc2F0aW9uIGhpc3Rvcnkgd2UgZGVmZXIgdG8gaXQgZm9yIHByZXZpb3VzIHR1cm5zIHNvIGxvY2FsIHNlc3Npb25cbiAgICAgICAgLy8gcGVyc2lzdGVuY2UgY2FuIGZvY3VzIHNvbGVseSBvbiB0aGUgbmV3IGRlbHRhIGJlaW5nIGdlbmVyYXRlZCBpbiB0aGlzIHByb2Nlc3MuXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBlZmZlY3RpdmVPcHRpb25zLnNlc3Npb247XG4gICAgICAgIGNvbnN0IHJlc3VtaW5nRnJvbVN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZTtcbiAgICAgICAgbGV0IHNlc3Npb25JbnB1dE9yaWdpbmFsU25hcHNob3QgPSBzZXNzaW9uICYmIHJlc3VtaW5nRnJvbVN0YXRlID8gW10gOiB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBUcmFja3MgcmVtYWluaW5nIHBlcnNpc3RlbmNlIHNsb3RzIHBlciBBZ2VudElucHV0SXRlbSBrZXkgc28gcmVzdW1lZCBzZXNzaW9ucyBvbmx5IHdyaXRlIGVhY2ggb3JpZ2luYWwgb2NjdXJyZW5jZSBvbmNlLlxuICAgICAgICBsZXQgc2Vzc2lvbklucHV0UGVuZGluZ1dyaXRlQ291bnRzID0gc2Vzc2lvbiAmJiByZXN1bWluZ0Zyb21TdGF0ZSA/IG5ldyBNYXAoKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gS2VlcHMgdHJhY2sgb2Ygd2hpY2ggaW5wdXRzIHNob3VsZCBiZSB3cml0dGVuIGJhY2sgdG8gc2Vzc2lvbiBtZW1vcnkuIGBzb3VyY2VJdGVtc2AgcmVmbGVjdHNcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdHMgKHNvIHdlIGNhbiByZXNwZWN0IHJlc3VtZSBjb3VudHMpIHdoaWxlIGBmaWx0ZXJlZEl0ZW1zYCwgd2hlbiBwcmVzZW50LFxuICAgICAgICAvLyBjb250YWlucyB0aGUgZmlsdGVyZWQvcmVkYWN0ZWQgY2xvbmVzIHRoYXQgbXVzdCBiZSBwZXJzaXN0ZWQgZm9yIGhpc3RvcnkuXG4gICAgICAgIC8vIFRoZSBoZWxwZXIgcmVjb25jaWxlcyB0aGUgZmlsdGVyZWQgY29waWVzIHByb2R1Y2VkIGJ5IGNhbGxNb2RlbElucHV0RmlsdGVyIHdpdGggdGhlaXIgb3JpZ2luYWxcbiAgICAgICAgLy8gY291bnRlcnBhcnRzIHNvIHJlc3VtZS1mcm9tLXN0YXRlIGJvb2trZWVwaW5nIHN0YXlzIGNvbnNpc3RlbnQgYW5kIGR1cGxpY2F0ZSByZWZlcmVuY2VzIG9ubHlcbiAgICAgICAgLy8gY29uc3VtZSBhIHNpbmdsZSBwZXJzaXN0ZW5jZSBzbG90LlxuICAgICAgICBjb25zdCByZWNvcmRTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSA9IChzb3VyY2VJdGVtcywgZmlsdGVyZWRJdGVtcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGVuZGluZ1dyaXRlQ291bnRzID0gc2Vzc2lvbklucHV0UGVuZGluZ1dyaXRlQ291bnRzO1xuICAgICAgICAgICAgaWYgKGZpbHRlcmVkSXRlbXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICghcGVuZGluZ1dyaXRlQ291bnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSBmaWx0ZXJlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwZXJzaXN0YWJsZUl0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlT2NjdXJyZW5jZUNvdW50cyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgICAgICAgICAgLy8gVHJhY2sgaG93IG1hbnkgdGltZXMgZWFjaCBvcmlnaW5hbCBvYmplY3QgYXBwZWFycyBzbyBkdXBsaWNhdGUgcmVmZXJlbmNlcyBvbmx5IGNvbnN1bWUgb25lIHBlcnNpc3RlbmNlIHNsb3QuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzb3VyY2Ugb2Ygc291cmNlSXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzb3VyY2UgfHwgdHlwZW9mIHNvdXJjZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRDb3VudCA9IChzb3VyY2VPY2N1cnJlbmNlQ291bnRzLmdldChzb3VyY2UpID8/IDApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlT2NjdXJyZW5jZUNvdW50cy5zZXQoc291cmNlLCBuZXh0Q291bnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBMZXQgZmlsdGVyZWQgaXRlbXMgd2l0aG91dCBhIG9uZS10by1vbmUgc291cmNlIG1hdGNoIGNsYWltIGFueSByZW1haW5pbmcgcGVyc2lzdGVuY2UgY291bnQuXG4gICAgICAgICAgICAgICAgY29uc3QgY29uc3VtZUFueVBlbmRpbmdXcml0ZVNsb3QgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgcmVtYWluaW5nXSBvZiBwZW5kaW5nV3JpdGVDb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dyaXRlQ291bnRzLnNldChrZXksIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVyZWRJdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZEl0ZW0gPSBmaWx0ZXJlZEl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcmVkSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGFsbG9jYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VJdGVtc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZSAmJiB0eXBlb2Ygc291cmNlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVuZGluZ09jY3VycmVuY2VzID0gKHNvdXJjZU9jY3VycmVuY2VDb3VudHMuZ2V0KHNvdXJjZSkgPz8gMCkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlT2NjdXJyZW5jZUNvdW50cy5zZXQoc291cmNlLCBwZW5kaW5nT2NjdXJyZW5jZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdPY2N1cnJlbmNlcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmcgPSBwZW5kaW5nV3JpdGVDb3VudHMuZ2V0KHNvdXJjZUtleSkgPz8gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dyaXRlQ291bnRzLnNldChzb3VyY2VLZXksIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RhYmxlSXRlbXMucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoZmlsdGVyZWRJdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZEtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGZpbHRlcmVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUmVtYWluaW5nID0gcGVuZGluZ1dyaXRlQ291bnRzLmdldChmaWx0ZXJlZEtleSkgPz8gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkUmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dyaXRlQ291bnRzLnNldChmaWx0ZXJlZEtleSwgZmlsdGVyZWRSZW1haW5pbmcgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RhYmxlSXRlbXMucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoZmlsdGVyZWRJdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzb3VyY2UgJiYgY29uc3VtZUFueVBlbmRpbmdXcml0ZVNsb3QoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG9jYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvY2F0ZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFzb3VyY2UgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgYXQgbGVhc3Qgb25lIGNvcHkgc28gbGF0ZXIgcGVyc2lzdGVuY2UgcmVzb2x2ZXMgZXZlbiB3aGVuIG5vIGNvdW50ZXJzIHJlbWFpbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RhYmxlSXRlbXMucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoZmlsdGVyZWRJdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBlcnNpc3RhYmxlSXRlbXMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCA9IHBlcnNpc3RhYmxlSXRlbXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gW107XG4gICAgICAgICAgICBpZiAoIXBlbmRpbmdXcml0ZUNvdW50cykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2goc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc291cmNlSXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nID0gcGVuZGluZ1dyaXRlQ291bnRzLmdldChrZXkpID8/IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dyaXRlQ291bnRzLnNldChrZXksIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKHN0cnVjdHVyZWRDbG9uZShpdGVtKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpbHRlcmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID0gZmlsdGVyZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIERldGVybWluZSB3aGljaCBpdGVtcyBzaG91bGQgYmUgY29tbWl0dGVkIHRvIHNlc3Npb24gbWVtb3J5IGZvciB0aGlzIHR1cm4uXG4gICAgICAgIC8vIEZpbHRlcnMgdGFrZSBwcmVjZWRlbmNlIGJlY2F1c2UgdGhleSByZWZsZWN0IHRoZSBleGFjdCBwYXlsb2FkIGRlbGl2ZXJlZCB0byB0aGUgbW9kZWwuXG4gICAgICAgIGNvbnN0IHJlc29sdmVTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNDYWxsTW9kZWxJbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvbklucHV0T3JpZ2luYWxTbmFwc2hvdDtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHByZXBhcmVkSW5wdXQgPSBpbnB1dDtcbiAgICAgICAgaWYgKCEocHJlcGFyZWRJbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlKSkge1xuICAgICAgICAgICAgaWYgKHNlc3Npb24gJiYgQXJyYXkuaXNBcnJheShwcmVwYXJlZElucHV0KSAmJiAhc2Vzc2lvbklucHV0Q2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdSdW5Db25maWcuc2Vzc2lvbklucHV0Q2FsbGJhY2sgbXVzdCBiZSBwcm92aWRlZCB3aGVuIHVzaW5nIHNlc3Npb24gaGlzdG9yeSB3aXRoIGxpc3QgaW5wdXRzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJlcGFyZWQgPSBhd2FpdCBwcmVwYXJlSW5wdXRJdGVtc1dpdGhTZXNzaW9uKHByZXBhcmVkSW5wdXQsIHNlc3Npb24sIHNlc3Npb25JbnB1dENhbGxiYWNrLCB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIHRyYWNrcyBjb252ZXJzYXRpb24gc3RhdGUgd2Ugb25seSBzZW5kIHRoZSBuZXcgdHVybiBpbnB1dHM7XG4gICAgICAgICAgICAgICAgLy8gcHJldmlvdXMgbWVzc2FnZXMgYXJlIHJlY292ZXJlZCB2aWEgY29udmVyc2F0aW9uSWQvcHJldmlvdXNSZXNwb25zZUlkLlxuICAgICAgICAgICAgICAgIGluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0OiAhc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbixcbiAgICAgICAgICAgICAgICBwcmVzZXJ2ZURyb3BwZWROZXdJdGVtczogc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24gJiYgc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHNlcnZlciBtYW5hZ2VzIG1lbW9yeSB3ZSBvbmx5IHBlcnNpc3QgdGhlIG5ldyB0dXJuIGlucHV0cyBsb2NhbGx5IHNvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNvbnZlcnNhdGlvbiBzZXJ2aWNlIHN0YXlzIHRoZSBzaW5nbGUgc291cmNlIG9mIHRydXRoIGZvciBwcmlvciBleGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkl0ZW1zID0gcHJlcGFyZWQuc2Vzc2lvbkl0ZW1zO1xuICAgICAgICAgICAgICAgIGlmIChzZXNzaW9uSXRlbXMgJiYgc2Vzc2lvbkl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHNlc3Npb25JdGVtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXBhcmVkSW5wdXQgPSBwcmVwYXJlZC5wcmVwYXJlZElucHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXBhcmVkSW5wdXQgPSBwcmVwYXJlZC5wcmVwYXJlZElucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IHByZXBhcmVkLnNlc3Npb25JdGVtcyA/PyBbXTtcbiAgICAgICAgICAgICAgICAvLyBDbG9uZSB0aGUgaXRlbXMgdGhhdCB3aWxsIGJlIHBlcnNpc3RlZCBzbyBsYXRlciBtdXRhdGlvbnMgKGZpbHRlcnMsIGhvb2tzKSBjYW5ub3QgZGVzeW5jIGhpc3RvcnkuXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0T3JpZ2luYWxTbmFwc2hvdCA9IGl0ZW1zLm1hcCgoaXRlbSkgPT4gc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBwZW5kaW5nIGNvdW50cyBzbyBlYWNoIHByZXBhcmVkIGl0ZW0gcmVzZXJ2ZXMgZXhhY3RseSBvbmUgd3JpdGUgc2xvdCB1bnRpbCBmaWx0ZXJzIHJlc29sdmUgbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgKHNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cy5nZXQoa2V5KSA/PyAwKSArIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTdHJlYW1pbmcgcnVucyBwZXJzaXN0IHRoZSBpbnB1dCBhc3luY2hyb25vdXNseSwgc28gdHJhY2sgYSBvbmUtc2hvdCBoZWxwZXJcbiAgICAgICAgLy8gdGhhdCBjYW4gYmUgYXdhaXRlZCBmcm9tIG11bHRpcGxlIGJyYW5jaGVzIHdpdGhvdXQgZG91YmxlLXdyaXRpbmcuXG4gICAgICAgIGxldCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZDtcbiAgICAgICAgLy8gU2Vzc2lvbnMgcmVtYWluIHVzYWJsZSBhbG9uZ3NpZGUgc2VydmVyLW1hbmFnZWQgY29udmVyc2F0aW9ucyAoZS5nLiwgT3BlbkFJQ29udmVyc2F0aW9uc1Nlc3Npb24pXG4gICAgICAgIC8vIHNvIGNhbGxlcnMgY2FuIHJldXNlIGNhbGxiYWNrcywgcmVzdW1lLWZyb20tc3RhdGUgbG9naWMsIGFuZCBvdGhlciBoZWxwZXJzIHdpdGhvdXQgZHVwbGljYXRpbmdcbiAgICAgICAgLy8gcmVtb3RlIGhpc3RvcnksIHNvIHBlcnNpc3RlbmNlIGlzIGdhdGVkIG9uIHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24uXG4gICAgICAgIGlmIChzZXNzaW9uICYmICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICBsZXQgcGVyc2lzdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbXNUb1BlcnNpc3QgPSByZXNvbHZlU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWl0ZW1zVG9QZXJzaXN0IHx8IGl0ZW1zVG9QZXJzaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBlcnNpc3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uKHNlc3Npb24sIGl0ZW1zVG9QZXJzaXN0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhlY3V0ZVJ1biA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChlZmZlY3RpdmVPcHRpb25zLnN0cmVhbSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbVJlc3VsdCA9IGF3YWl0IHRoaXMuI3J1bkluZGl2aWR1YWxTdHJlYW0oYWdlbnQsIHByZXBhcmVkSW5wdXQsIGVmZmVjdGl2ZU9wdGlvbnMsIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkLCByZWNvcmRTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmVhbVJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJ1blJlc3VsdCA9IGF3YWl0IHRoaXMuI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oYWdlbnQsIHByZXBhcmVkSW5wdXQsIGVmZmVjdGl2ZU9wdGlvbnMsIHJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlKTtcbiAgICAgICAgICAgIC8vIFNlZSBub3RlIGFib3ZlOiBhbGxvdyBzZXNzaW9ucyB0byBydW4gZm9yIGNhbGxiYWNrcy9zdGF0ZSBidXQgc2tpcCB3cml0ZXMgd2hlbiB0aGUgc2VydmVyXG4gICAgICAgICAgICAvLyBpcyB0aGUgc291cmNlIG9mIHRydXRoIGZvciB0cmFuc2NyaXB0IGhpc3RvcnkuXG4gICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiAhc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVUb1Nlc3Npb24oc2Vzc2lvbiwgcmVzb2x2ZVNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlKCksIHJ1blJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVuUmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBpZiAocHJlcGFyZWRJbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlICYmIHByZXBhcmVkSW5wdXQuX3RyYWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gd2l0aFRyYWNlKHByZXBhcmVkSW5wdXQuX3RyYWNlLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHByZXBhcmVkSW5wdXQuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4ocHJlcGFyZWRJbnB1dC5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlUnVuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0T3JDcmVhdGVUcmFjZShhc3luYyAoKSA9PiBleGVjdXRlUnVuKCksIHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMuY29uZmlnLnRyYWNlSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmNvbmZpZy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLmNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMuY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vICBJbnRlcm5hbHNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIGlucHV0R3VhcmRyYWlsRGVmcztcbiAgICBvdXRwdXRHdWFyZHJhaWxEZWZzO1xuICAgICNnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5pbnB1dEd1YXJkcmFpbHMubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKSk7XG4gICAgfVxuICAgICNzcGxpdElucHV0R3VhcmRyYWlscyhzdGF0ZSkge1xuICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy4jZ2V0SW5wdXRHdWFyZHJhaWxEZWZpbml0aW9ucyhzdGF0ZSk7XG4gICAgICAgIGNvbnN0IGJsb2NraW5nID0gW107XG4gICAgICAgIGNvbnN0IHBhcmFsbGVsID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZ3VhcmRyYWlsIG9mIGd1YXJkcmFpbHMpIHtcbiAgICAgICAgICAgIGlmIChndWFyZHJhaWwucnVuSW5QYXJhbGxlbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBibG9ja2luZy5wdXNoKGd1YXJkcmFpbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJhbGxlbC5wdXNoKGd1YXJkcmFpbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgYmxvY2tpbmcsIHBhcmFsbGVsIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJlc29sdmVzIHRoZSBlZmZlY3RpdmUgbW9kZWwgb25jZSBzbyBib3RoIHJ1biBsb29wcyBvYmV5IHRoZSBzYW1lIHByZWNlZGVuY2UgcnVsZXMuXG4gICAgICovXG4gICAgYXN5bmMgI3Jlc29sdmVNb2RlbEZvckFnZW50KGFnZW50KSB7XG4gICAgICAgIGNvbnN0IGV4cGxpY3RseU1vZGVsU2V0ID0gKGFnZW50Lm1vZGVsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGFnZW50Lm1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKSB8fFxuICAgICAgICAgICAgKHRoaXMuY29uZmlnLm1vZGVsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5tb2RlbCAhPT0gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUik7XG4gICAgICAgIGxldCByZXNvbHZlZE1vZGVsID0gc2VsZWN0TW9kZWwoYWdlbnQubW9kZWwsIHRoaXMuY29uZmlnLm1vZGVsKTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXNvbHZlZE1vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzb2x2ZWRNb2RlbCA9IGF3YWl0IHRoaXMuY29uZmlnLm1vZGVsUHJvdmlkZXIuZ2V0TW9kZWwocmVzb2x2ZWRNb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbW9kZWw6IHJlc29sdmVkTW9kZWwsIGV4cGxpY3RseU1vZGVsU2V0IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKHN0YXJ0aW5nQWdlbnQsIGlucHV0LCBvcHRpb25zLCBcbiAgICAvLyBzZXNzaW9uSW5wdXRVcGRhdGUgbGV0cyB0aGUgY2FsbGVyIGFkanVzdCBxdWV1ZWQgc2Vzc2lvbiBpdGVtcyBhZnRlciBmaWx0ZXJzIHJ1biBzbyB3ZVxuICAgIC8vIHBlcnNpc3QgZXhhY3RseSB3aGF0IHdlIHNlbmQgdG8gdGhlIG1vZGVsIChlLmcuLCBhZnRlciByZWRhY3Rpb25zIG9yIHRydW5jYXRpb24pLlxuICAgIHNlc3Npb25JbnB1dFVwZGF0ZSkge1xuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYSBzYXZlZCBzdGF0ZSB3ZSB1c2UgdGhhdCBvbmUsIG90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgICBjb25zdCBpc1Jlc3VtZWRTdGF0ZSA9IGlucHV0IGluc3RhbmNlb2YgUnVuU3RhdGU7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGlzUmVzdW1lZFN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgc3RhcnRpbmdBZ2VudCwgb3B0aW9ucy5tYXhUdXJucyA/PyBERUZBVUxUX01BWF9UVVJOUyk7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyID0gb3B0aW9ucy5jb252ZXJzYXRpb25JZCB8fCBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZFxuICAgICAgICAgICAgICAgID8gbmV3IFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogb3B0aW9ucy5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgJiYgaXNSZXN1bWVkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByaW1lRnJvbVN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxJbnB1dDogc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlZEl0ZW1zOiBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsUmVzcG9uc2VzOiBzdGF0ZS5fbW9kZWxSZXNwb25zZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBzdGlsbCBpbiBhbiBpbnRlcnJ1cHRpb24sIHNvIHdlIG5lZWQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVzdWx0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA+IHN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXggdHVybnMgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogc3RhdGUuX21heFR1cm5zIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3N0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7c3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3N0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLiNzcGxpdElucHV0R3VhcmRyYWlscyhzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbHMuYmxvY2tpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUsIGd1YXJkcmFpbHMuYmxvY2tpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlscy5wYXJhbGxlbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSA9IHRoaXMuI3J1bklucHV0R3VhcmRyYWlscyhzdGF0ZSwgZ3VhcmRyYWlscy5wYXJhbGxlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJlcGFyZUlucHV0KHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRUdXJuSW5wdXQoc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVwYXJlZENhbGwgPSBhd2FpdCB0aGlzLiNwcmVwYXJlTW9kZWxDYWxsKHN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gYXdhaXQgcHJlcGFyZWRDYWxsLm1vZGVsLmdldFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbnM6IHByZXBhcmVkQ2FsbC5tb2RlbElucHV0Lmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHByZXBhcmVkQ2FsbC5wcm9tcHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhwbGljaXQgYWdlbnQvcnVuIGNvbmZpZyBtb2RlbHMgc2hvdWxkIHRha2UgcHJlY2VkZW5jZSBvdmVyIHByb21wdCBkZWZhdWx0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4ocHJlcGFyZWRDYWxsLmV4cGxpY3RseU1vZGVsU2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8geyBvdmVycmlkZVByb21wdE1vZGVsOiB0cnVlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHByZXBhcmVkQ2FsbC5tb2RlbElucHV0LmlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogcHJlcGFyZWRDYWxsLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogcHJlcGFyZWRDYWxsLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IHByZXBhcmVkQ2FsbC5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiBwcmVwYXJlZENhbGwuc2VyaWFsaXplZFRvb2xzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzRXhwbGljaXRseVByb3ZpZGVkOiBwcmVwYXJlZENhbGwudG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IHByZXBhcmVkQ2FsbC5zZXJpYWxpemVkSGFuZG9mZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogZ2V0VHJhY2luZyh0aGlzLmNvbmZpZy50cmFjaW5nRGlzYWJsZWQsIHRoaXMuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9tb2RlbFJlc3BvbnNlcy5wdXNoKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jb250ZXh0LnVzYWdlLmFkZChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZS51c2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWZ0ZXIgZWFjaCB0dXJuIHJlY29yZCB0aGUgaXRlbXMgZWNob2VkIGJ5IHRoZSBzZXJ2ZXIgc28gZnV0dXJlIHJlcXVlc3RzIG9ubHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluY2x1ZGUgdGhlIGluY3JlbWVudGFsIGlucHV0cyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGFja25vd2xlZGdlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LnRyYWNrU2VydmVySXRlbXMoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzTW9kZWxSZXNwb25zZShzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgcHJlcGFyZWRDYWxsLnRvb2xzLCBwcmVwYXJlZENhbGwuaGFuZG9mZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NlZFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IHJlc29sdmVUdXJuQWZ0ZXJNb2RlbFJlc3BvbnNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnQgPSBzdGF0ZS5fY3VycmVudFN0ZXAubmV3QWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLl9jdXJyZW50U3RlcCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJydXB0ZWQuIERvbid0IHJ1biBhbnkgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZXJyb3I6IFN0cmluZyhlcnIpIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBlbmQgdGhlIHNwYW4gaWYgdGhlIHJ1biB3YXMgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuU3RyZWFtTG9vcChyZXN1bHQsIG9wdGlvbnMsIGlzUmVzdW1lZFN0YXRlLCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCwgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24gPSBCb29sZWFuKG9wdGlvbnMuY29udmVyc2F0aW9uSWQpIHx8IEJvb2xlYW4ob3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQpO1xuICAgICAgICBjb25zdCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyID0gc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvblxuICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IG9wdGlvbnMuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IGhhbmRlZElucHV0VG9Nb2RlbCA9IGZhbHNlO1xuICAgICAgICBsZXQgc3RyZWFtSW5wdXRQZXJzaXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtSW5wdXRQZXJzaXN0ZWQgfHwgIWVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQm90aCBzdWNjZXNzIGFuZCBlcnJvciBwYXRocyBjYWxsIHRoaXMgaGVscGVyLCBzbyBndWFyZCBhZ2FpbnN0IG11bHRpcGxlIHdyaXRlcy5cbiAgICAgICAgICAgIGF3YWl0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkKCk7XG4gICAgICAgICAgICBzdHJlYW1JbnB1dFBlcnNpc3RlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyICYmIGlzUmVzdW1lZFN0YXRlKSB7XG4gICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByaW1lRnJvbVN0YXRlKHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFyZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignTm8gbW9kZWwgcmVzcG9uc2UgZm91bmQgaW4gcHJldmlvdXMgc3RhdGUnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHR1cm5SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMocmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4gPiByZXN1bHQuc3RhdGUuX21heFR1cm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogcmVzdWx0LnN0YXRlLl9tYXhUdXJucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWF4VHVybnNFeGNlZWRlZEVycm9yKGBNYXggdHVybnMgKCR7cmVzdWx0LnN0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJ1bm5pbmcgYWdlbnQgJHtjdXJyZW50QWdlbnQubmFtZX0gKHR1cm4gJHtyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJufSlgKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGd1YXJkcmFpbEVycm9yO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IHRoaXMuI3NwbGl0SW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlscy5ibG9ja2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgZ3VhcmRyYWlscy5ibG9ja2luZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlscy5wYXJhbGxlbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuI3J1bklucHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIGd1YXJkcmFpbHMucGFyYWxsZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSA9IHByb21pc2UuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZHJhaWxFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmVwYXJlSW5wdXQocmVzdWx0LmlucHV0LCByZXN1bHQubmV3SXRlbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldFR1cm5JbnB1dChyZXN1bHQuaW5wdXQsIHJlc3VsdC5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHJlc3VsdC5zdGF0ZS5fY29udGV4dCwgY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwocmVzdWx0LnN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBoYW5kZWRJbnB1dFRvTW9kZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHByZXBhcmVkQ2FsbC5tb2RlbC5nZXRTdHJlYW1lZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBwcmVwYXJlZENhbGwucHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RyZWFtaW5nIHJlcXVlc3RzIHNob3VsZCBhbHNvIGhvbm9yIGV4cGxpY2l0bHkgY2hvc2VuIG1vZGVscy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgb3ZlcnJpZGVQcm9tcHRNb2RlbDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHByZXBhcmVkQ2FsbC5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogcHJlcGFyZWRDYWxsLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzRXhwbGljaXRseVByb3ZpZGVkOiBwcmVwYXJlZENhbGwudG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShjdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZ3VhcmRyYWlsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZC5wYXJzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5yZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB1c2VyJ3MgY29kZSBleGl0cyBhIGxvb3AgdG8gY29uc3VtZSB0aGUgc3RyZWFtLCB3ZSBuZWVkIHRvIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBsb29wIHRvIHByZXZlbnQgaW50ZXJuYWwgZmFsc2UgZXJyb3JzIGFuZCB1bm5lY2Vzc2FyeSBwcm9jZXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50KGV2ZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZ3VhcmRyYWlsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmluYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgZGlkIG5vdCBwcm9kdWNlIGEgZmluYWwgcmVzcG9uc2UhJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBmaW5hbFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSB0cmFja2VyIGluIHN5bmMgd2l0aCB0aGUgc3RyZWFtZWQgcmVzcG9uc2Ugc28gcmVjb25uZWN0aW9ucyByZW1haW4gYWNjdXJhdGUuXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LnRyYWNrU2VydmVySXRlbXMoZmluYWxSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgY3VycmVudEFnZW50LCBwcmVwYXJlZENhbGwudG9vbHMsIHByZXBhcmVkQ2FsbC5oYW5kb2Zmcyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc2VkUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgaXRlbXMgZW1pdHRlZCBkaXJlY3RseSBmcm9tIHRoZSBtb2RlbCByZXNwb25zZSBzbyB3ZSBkbyBub3RcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RyZWFtIHRoZW0gYWdhaW4gYWZ0ZXIgdG9vbHMgYW5kIG90aGVyIHNpZGUgZWZmZWN0cyBmaW5pc2guXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZVRvb2xJdGVtcyA9IG5ldyBTZXQocHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJlVG9vbEl0ZW1zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdChyZXN1bHQsIHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UoY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQsIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UsIHRoaXMsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0ZXBUb1J1blJlc3VsdChyZXN1bHQsIHR1cm5SZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraXBJdGVtczogcHJlVG9vbEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGN1cnJlbnRBZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMocmVzdWx0LnN0YXRlLCByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEd1YXJkcmFpbHMgbXVzdCBzdWNjZWVkIGJlZm9yZSBwZXJzaXN0aW5nIHNlc3Npb24gbWVtb3J5IHRvIGF2b2lkIHN0b3JpbmcgYmxvY2tlZCBvdXRwdXRzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24ob3B0aW9ucy5zZXNzaW9uLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCBjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHJlc3VsdC5zdGF0ZS5fY29udGV4dCwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBkb25lIGZvciBub3cuIERvbid0IHJ1biBhbnkgb3V0cHV0IGd1YXJkcmFpbHNcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uKG9wdGlvbnMuc2Vzc2lvbiwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXBcbiAgICAgICAgICAgICAgICAgICAgICAgID8ubmV3QWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5fYWRkSXRlbShuZXcgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChoYW5kZWRJbnB1dFRvTW9kZWwgJiYgIXN0cmVhbUlucHV0UGVyc2lzdGVkKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMsIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkLCBzZXNzaW9uSW5wdXRVcGRhdGUpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvciByZXVzZSBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgaXNSZXN1bWVkU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpc1Jlc3VtZWRTdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIGFnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHN0cmVhbWVkIHJlc3VsdCB3aXRoIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyZWFtZWRSdW5SZXN1bHQoe1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHRzXG4gICAgICAgICAgICByZXN1bHQubWF4VHVybnMgPSBvcHRpb25zLm1heFR1cm5zID8/IHN0YXRlLl9tYXhUdXJucztcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBzdHJlYW0gbG9vcCB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Mb29wUHJvbWlzZSA9IHRoaXMuI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSwgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kb25lKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9yYWlzZUVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgc3RyZWFtIGxvb3AgcHJvbWlzZSBzbyB0cmFjZSBlbmQgd2FpdHMgZm9yIHRoZSBsb29wIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICByZXN1bHQuX3NldFN0cmVhbUxvb3BQcm9taXNlKHN0cmVhbUxvb3BQcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyAjcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlLCBndWFyZHJhaWxzT3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IGd1YXJkcmFpbHNPdmVycmlkZSA/PyB0aGlzLiNnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zKHN0YXRlKTtcbiAgICAgICAgaWYgKGd1YXJkcmFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICBpbnB1dDogc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoZ3VhcmRyYWlscy5tYXAoYXN5bmMgKGd1YXJkcmFpbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEd1YXJkcmFpbFNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1YXJkcmFpbC5ydW4oZ3VhcmRyYWlsQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnRyaWdnZXJlZCA9IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9LCB7IGRhdGE6IHsgbmFtZTogZ3VhcmRyYWlsLm5hbWUgfSB9LCBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMucHVzaCguLi5yZXN1bHRzKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQoYElucHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJvbGwgYmFjayB0aGUgY3VycmVudCB0dXJuIHRvIGVuYWJsZSByZXJ1bnNcbiAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4tLTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYElucHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgb3V0cHV0KSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMuY29uY2F0KHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50T3V0cHV0ID0gc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgYWdlbnRPdXRwdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogeyBtb2RlbFJlc3BvbnNlOiBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBPdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8pfWAsIHJlc3VsdCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgT3V0cHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQXBwbGllcyBjYWxsLWxldmVsIGZpbHRlcnMgYW5kIG1lcmdlcyBzZXNzaW9uIHVwZGF0ZXMgc28gdGhlIG1vZGVsIHJlcXVlc3QgbWlycm9ycyBleGFjdGx5XG4gICAgICogd2hhdCB3ZSBwZXJzaXN0ZWQgZm9yIGhpc3RvcnkuXG4gICAgICovXG4gICAgYXN5bmMgI3ByZXBhcmVNb2RlbENhbGwoc3RhdGUsIG9wdGlvbnMsIGFydGlmYWN0cywgdHVybklucHV0LCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBzZXNzaW9uSW5wdXRVcGRhdGUpIHtcbiAgICAgICAgY29uc3QgeyBtb2RlbCwgZXhwbGljdGx5TW9kZWxTZXQgfSA9IGF3YWl0IHRoaXMuI3Jlc29sdmVNb2RlbEZvckFnZW50KHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICBsZXQgbW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAuLi5zdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsXG4gICAgICAgIH07XG4gICAgICAgIG1vZGVsU2V0dGluZ3MgPSBhZGp1c3RNb2RlbFNldHRpbmdzRm9yTm9uR1BUNVJ1bm5lck1vZGVsKGV4cGxpY3RseU1vZGVsU2V0LCBzdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsIG1vZGVsLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgbW9kZWxTZXR0aW5ncyA9IG1heWJlUmVzZXRUb29sQ2hvaWNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl90b29sVXNlVHJhY2tlciwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgIGNvbnN0IHN5c3RlbUluc3RydWN0aW9ucyA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHN0YXRlLl9jb250ZXh0KTtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRQcm9tcHQoc3RhdGUuX2NvbnRleHQpO1xuICAgICAgICBjb25zdCB7IG1vZGVsSW5wdXQsIHNvdXJjZUl0ZW1zLCBwZXJzaXN0ZWRJdGVtcywgZmlsdGVyQXBwbGllZCB9ID0gYXdhaXQgYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlcihzdGF0ZS5fY3VycmVudEFnZW50LCBvcHRpb25zLmNhbGxNb2RlbElucHV0RmlsdGVyLCBzdGF0ZS5fY29udGV4dCwgdHVybklucHV0LCBzeXN0ZW1JbnN0cnVjdGlvbnMpO1xuICAgICAgICAvLyBJbmZvcm0gdGhlIHRyYWNrZXIgd2hpY2ggZXhhY3Qgb3JpZ2luYWwgb2JqZWN0cyBtYWRlIGl0IHRvIHRoZSBwcm92aWRlciBzbyBmdXR1cmUgdHVybnNcbiAgICAgICAgLy8gb25seSBzZW5kIHRoZSBkZWx0YSB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/Lm1hcmtJbnB1dEFzU2VudChzb3VyY2VJdGVtcyk7XG4gICAgICAgIC8vIFByb3ZpZGUgZmlsdGVyZWQgY2xvbmVzIHdoZW5ldmVyIGZpbHRlcnMgcnVuIHNvIHNlc3Npb24gaGlzdG9yeSBtaXJyb3JzIHRoZSBtb2RlbCBwYXlsb2FkLlxuICAgICAgICAvLyBSZXR1cm5pbmcgYW4gZW1wdHkgYXJyYXkgaXMgaW50ZW50aW9uYWw6IGl0IHRlbGxzIHRoZSBzZXNzaW9uIGxheWVyIHRvIHBlcnNpc3QgXCJub3RoaW5nXCJcbiAgICAgICAgLy8gaW5zdGVhZCBvZiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZmlsdGVyZWQgb3JpZ2luYWxzIHdoZW4gdGhlIGZpbHRlciByZWRhY3RzIGV2ZXJ5dGhpbmcuXG4gICAgICAgIHNlc3Npb25JbnB1dFVwZGF0ZT8uKHNvdXJjZUl0ZW1zLCBmaWx0ZXJBcHBsaWVkID8gcGVyc2lzdGVkSXRlbXMgOiB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBwcmV2aW91c1Jlc3BvbnNlSWQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5wcmV2aW91c1Jlc3BvbnNlSWQgPz9cbiAgICAgICAgICAgIG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkO1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LmNvbnZlcnNhdGlvbklkID8/IG9wdGlvbnMuY29udmVyc2F0aW9uSWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5hcnRpZmFjdHMsXG4gICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgIGV4cGxpY3RseU1vZGVsU2V0LFxuICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgIG1vZGVsSW5wdXQsXG4gICAgICAgICAgICBwcm9tcHQsXG4gICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIENvbnN0cnVjdHMgdGhlIG1vZGVsIGlucHV0IGFycmF5IGZvciB0aGUgY3VycmVudCB0dXJuIGJ5IGNvbWJpbmluZyB0aGUgb3JpZ2luYWwgdHVybiBpbnB1dCB3aXRoXG4gKiBhbnkgbmV3IHJ1biBpdGVtcyAoZXhjbHVkaW5nIHRvb2wgYXBwcm92YWwgcGxhY2Vob2xkZXJzKS4gVGhpcyBoZWxwcyBlbnN1cmUgdGhhdCByZXBlYXRlZCBjYWxsc1xuICogdG8gdGhlIFJlc3BvbnNlcyBBUEkgb25seSBzZW5kIG5ld2x5IGdlbmVyYXRlZCBjb250ZW50LlxuICpcbiAqIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXJuSW5wdXQob3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICBjb25zdCByYXdJdGVtcyA9IGdlbmVyYXRlZEl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpIC8vIGRvbid0IGluY2x1ZGUgYXBwcm92YWwgaXRlbXMgdG8gYXZvaWQgZG91YmxlIGZ1bmN0aW9uIGNhbGxzXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG4gICAgcmV0dXJuIFsuLi50b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpLCAuLi5yYXdJdGVtc107XG59XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gIEludGVybmFsIGhlbHBlcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCBERUZBVUxUX01BWF9UVVJOUyA9IDEwO1xubGV0IF9kZWZhdWx0UnVubmVyID0gdW5kZWZpbmVkO1xuZnVuY3Rpb24gZ2V0RGVmYXVsdFJ1bm5lcigpIHtcbiAgICBpZiAoX2RlZmF1bHRSdW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xuICAgIH1cbiAgICBfZGVmYXVsdFJ1bm5lciA9IG5ldyBSdW5uZXIoKTtcbiAgICByZXR1cm4gX2RlZmF1bHRSdW5uZXI7XG59XG4vKipcbiAqIFJlc29sdmVzIHRoZSBlZmZlY3RpdmUgbW9kZWwgZm9yIHRoZSBuZXh0IHR1cm4gYnkgZ2l2aW5nIHByZWNlZGVuY2UgdG8gdGhlIGFnZW50LXNwZWNpZmljXG4gKiBjb25maWd1cmF0aW9uIHdoZW4gcHJlc2VudCwgb3RoZXJ3aXNlIGZhbGxpbmcgYmFjayB0byB0aGUgcnVubmVyLWxldmVsIGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RNb2RlbChhZ2VudE1vZGVsLCBydW5Db25maWdNb2RlbCkge1xuICAgIC8vIFdoZW4gaW5pdGlhbGl6aW5nIGFuIGFnZW50IHdpdGhvdXQgbW9kZWwgbmFtZSwgdGhlIG1vZGVsIHByb3BlcnR5IGlzIHNldCB0byBhbiBlbXB0eSBzdHJpbmcuIFNvLFxuICAgIC8vICogYWdlbnRNb2RlbCA9PT0gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUiAmIHJ1bkNvbmZpZ01vZGVsIGV4aXN0cywgcnVuQ29uZmlnTW9kZWwgd2lsbCBiZSB1c2VkXG4gICAgLy8gKiBhZ2VudE1vZGVsIGlzIHNldCwgdGhlIGFnZW50TW9kZWwgd2lsbCBiZSB1c2VkIG92ZXIgcnVuQ29uZmlnTW9kZWxcbiAgICBpZiAoKHR5cGVvZiBhZ2VudE1vZGVsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBhZ2VudE1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKSB8fFxuICAgICAgICBhZ2VudE1vZGVsIC8vIGFueSB0cnV0aHkgdmFsdWVcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIGFnZW50TW9kZWw7XG4gICAgfVxuICAgIHJldHVybiBydW5Db25maWdNb2RlbCA/PyBhZ2VudE1vZGVsID8/IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVI7XG59XG4vKipcbiAqIE5vcm1hbGl6ZXMgdHJhY2luZyBjb25maWd1cmF0aW9uIGludG8gdGhlIGZvcm1hdCBleHBlY3RlZCBieSBtb2RlbCBwcm92aWRlcnMuXG4gKiBSZXR1cm5zIGBmYWxzZWAgdG8gZGlzYWJsZSB0cmFjaW5nLCBgdHJ1ZWAgdG8gaW5jbHVkZSBmdWxsIHBheWxvYWQgZGF0YSwgb3JcbiAqIGAnZW5hYmxlZF93aXRob3V0X2RhdGEnYCB0byBvbWl0IHNlbnNpdGl2ZSBjb250ZW50IHdoaWxlIHN0aWxsIGVtaXR0aW5nIHNwYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2luZyh0cmFjaW5nRGlzYWJsZWQsIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICBpZiAodHJhY2luZ0Rpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAnZW5hYmxlZF93aXRob3V0X2RhdGEnO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlcihhZ2VudCwgY2FsbE1vZGVsSW5wdXRGaWx0ZXIsIGNvbnRleHQsIGlucHV0SXRlbXMsIHN5c3RlbUluc3RydWN0aW9ucykge1xuICAgIGNvbnN0IGNsb25lSW5wdXRJdGVtcyA9IChpdGVtcywgbWFwKSA9PiBpdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgY2xvbmVkID0gc3RydWN0dXJlZENsb25lKGl0ZW0pO1xuICAgICAgICBpZiAobWFwICYmIGNsb25lZCAmJiB0eXBlb2YgY2xvbmVkID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgbWFwLnNldChjbG9uZWQsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZWQ7XG4gICAgfSk7XG4gICAgLy8gUmVjb3JkIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgY2xvbmVkIGFycmF5IHBhc3NlZCB0byBmaWx0ZXJzIGFuZCB0aGUgb3JpZ2luYWwgaW5wdXRzLlxuICAgIGNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICBjb25zdCBvcmlnaW5hbFBvb2wgPSBidWlsZEFnZW50SW5wdXRQb29sKGlucHV0SXRlbXMpO1xuICAgIGNvbnN0IGZhbGxiYWNrT3JpZ2luYWxzID0gW107XG4gICAgLy8gVHJhY2sgYW55IG9yaWdpbmFsIG9iamVjdCBpbnB1dHMgc28gZmlsdGVyZWQgcmVwbGFjZW1lbnRzIGNhbiBzdGlsbCBtYXJrIHRoZW0gYXMgZGVsaXZlcmVkLlxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnB1dEl0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZmFsbGJhY2tPcmlnaW5hbHMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZW1vdmVGcm9tRmFsbGJhY2sgPSAoY2FuZGlkYXRlKSA9PiB7XG4gICAgICAgIGlmICghY2FuZGlkYXRlIHx8IHR5cGVvZiBjYW5kaWRhdGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBmYWxsYmFja09yaWdpbmFscy5maW5kSW5kZXgoKG9yaWdpbmFsKSA9PiBvcmlnaW5hbCA9PT0gY2FuZGlkYXRlKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgZmFsbGJhY2tPcmlnaW5hbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdGFrZUZhbGxiYWNrT3JpZ2luYWwgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBmYWxsYmFja09yaWdpbmFscy5zaGlmdCgpO1xuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgcmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sKG9yaWdpbmFsUG9vbCwgbmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgICAvLyBBbHdheXMgY3JlYXRlIGEgZGVlcCBjb3B5IHNvIGRvd25zdHJlYW0gbXV0YXRpb25zIGluc2lkZSBmaWx0ZXJzIGNhbm5vdCBhZmZlY3RcbiAgICAvLyB0aGUgY2FjaGVkIHR1cm4gc3RhdGUuXG4gICAgY29uc3QgY2xvbmVkQmFzZUlucHV0ID0gY2xvbmVJbnB1dEl0ZW1zKGlucHV0SXRlbXMsIGNsb25lTWFwKTtcbiAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICBpbnB1dDogY2xvbmVkQmFzZUlucHV0LFxuICAgICAgICBpbnN0cnVjdGlvbnM6IHN5c3RlbUluc3RydWN0aW9ucyxcbiAgICB9O1xuICAgIGlmICghY2FsbE1vZGVsSW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsSW5wdXQ6IGJhc2UsXG4gICAgICAgICAgICBzb3VyY2VJdGVtczogWy4uLmlucHV0SXRlbXNdLFxuICAgICAgICAgICAgcGVyc2lzdGVkSXRlbXM6IFtdLFxuICAgICAgICAgICAgZmlsdGVyQXBwbGllZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxNb2RlbElucHV0RmlsdGVyKHtcbiAgICAgICAgICAgIG1vZGVsRGF0YTogYmFzZSxcbiAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dC5jb250ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXN1bHQgfHwgIUFycmF5LmlzQXJyYXkocmVzdWx0LmlucHV0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignY2FsbE1vZGVsSW5wdXRGaWx0ZXIgbXVzdCByZXR1cm4gYSBNb2RlbElucHV0RGF0YSBvYmplY3Qgd2l0aCBhbiBpbnB1dCBhcnJheS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmVzZXJ2ZSBhIHBvaW50ZXIgdG8gdGhlIG9yaWdpbmFsIG9iamVjdCBiYWNraW5nIGVhY2ggZmlsdGVyZWQgY2xvbmUgc28gZG93bnN0cmVhbVxuICAgICAgICAvLyB0cmFja2VycyBjYW4ga2VlcCB0aGVpciBib29ra2VlcGluZyBjb25zaXN0ZW50IGV2ZW4gYWZ0ZXIgcmVkYWN0aW9uLlxuICAgICAgICBjb25zdCBzb3VyY2VJdGVtcyA9IHJlc3VsdC5pbnB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBjbG9uZU1hcC5nZXQoaXRlbSk7XG4gICAgICAgICAgICBpZiAob3JpZ2luYWwpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tRmFsbGJhY2sob3JpZ2luYWwpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChvcmlnaW5hbFBvb2wsIG9yaWdpbmFsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRCeUNvbnRlbnQgPSB0YWtlQWdlbnRJbnB1dEZyb21Qb29sKG9yaWdpbmFsUG9vbCwga2V5KTtcbiAgICAgICAgICAgIGlmIChtYXRjaGVkQnlDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbUZhbGxiYWNrKG1hdGNoZWRCeUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVkQnlDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2sgPSB0YWtlRmFsbGJhY2tPcmlnaW5hbCgpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNsb25lZEZpbHRlcmVkSW5wdXQgPSBjbG9uZUlucHV0SXRlbXMocmVzdWx0LmlucHV0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsSW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogY2xvbmVkRmlsdGVyZWRJbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHR5cGVvZiByZXN1bHQuaW5zdHJ1Y3Rpb25zID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICA/IHN5c3RlbUluc3RydWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICA6IHJlc3VsdC5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc291cmNlSXRlbXMsXG4gICAgICAgICAgICBwZXJzaXN0ZWRJdGVtczogY2xvbmVkRmlsdGVyZWRJbnB1dC5tYXAoKGl0ZW0pID0+IHN0cnVjdHVyZWRDbG9uZShpdGVtKSksXG4gICAgICAgICAgICBmaWx0ZXJBcHBsaWVkOiB0cnVlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBjYWxsTW9kZWxJbnB1dEZpbHRlcicsXG4gICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG4vLyBUcmFja3Mgd2hpY2ggaXRlbXMgaGF2ZSBhbHJlYWR5IGJlZW4gc2VudCB0byBvciByZWNlaXZlZCBmcm9tIHRoZSBSZXNwb25zZXMgQVBJIHdoZW4gdGhlIGNhbGxlclxuLy8gc3VwcGxpZXMgYGNvbnZlcnNhdGlvbklkYC9gcHJldmlvdXNSZXNwb25zZUlkYC4gVGhpcyBlbnN1cmVzIHdlIG9ubHkgc2VuZCB0aGUgZGVsdGEgZWFjaCB0dXJuLlxuY2xhc3MgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciB7XG4gICAgLy8gQ29udmVyc2F0aW9uIElEOlxuICAgIC8vIC0gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMjdXNpbmctdGhlLWNvbnZlcnNhdGlvbnMtYXBpXG4gICAgLy8gLSBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9hcGktcmVmZXJlbmNlL2NvbnZlcnNhdGlvbnMvY3JlYXRlXG4gICAgY29udmVyc2F0aW9uSWQ7XG4gICAgLy8gUHJldmlvdXMgUmVzcG9uc2UgSUQ6XG4gICAgLy8gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMjcGFzc2luZy1jb250ZXh0LWZyb20tdGhlLXByZXZpb3VzLXJlc3BvbnNlXG4gICAgcHJldmlvdXNSZXNwb25zZUlkO1xuICAgIC8vIFVzaW5nIHRoaXMgZmxhZyBiZWNhdXNlIFdlYWtTZXQgZG9lcyBub3QgcHJvdmlkZSBhIHdheSB0byBjaGVjayBpdHMgc2l6ZVxuICAgIHNlbnRJbml0aWFsSW5wdXQgPSBmYWxzZTtcbiAgICAvLyBUaGUgaXRlbXMgYWxyZWFkeSBzZW50IHRvIHRoZSBtb2RlbDsgdXNpbmcgV2Vha1NldCBmb3IgbWVtb3J5IGVmZmljaWVuY3lcbiAgICBzZW50SXRlbXMgPSBuZXcgV2Vha1NldCgpO1xuICAgIC8vIFRoZSBpdGVtcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXI7IHVzaW5nIFdlYWtTZXQgZm9yIG1lbW9yeSBlZmZpY2llbmN5XG4gICAgc2VydmVySXRlbXMgPSBuZXcgV2Vha1NldCgpO1xuICAgIC8vIFRyYWNrIGluaXRpYWwgaW5wdXQgaXRlbXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzZW50IHNvIHRoZXkgY2FuIGJlIHJldHJpZWQgb24gbGF0ZXIgdHVybnMuXG4gICAgcmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3Rvcih7IGNvbnZlcnNhdGlvbklkLCBwcmV2aW91c1Jlc3BvbnNlSWQsIH0pIHtcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb25JZCA9IGNvbnZlcnNhdGlvbklkID8/IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3BvbnNlSWQgPSBwcmV2aW91c1Jlc3BvbnNlSWQgPz8gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmUtcG9wdWxhdGVzIHRyYWNrZXIgY2FjaGVzIGZyb20gYW4gZXhpc3RpbmcgUnVuU3RhdGUgd2hlbiByZXN1bWluZyBzZXJ2ZXItbWFuYWdlZCBydW5zLlxuICAgICAqL1xuICAgIHByaW1lRnJvbVN0YXRlKHsgb3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMsIG1vZGVsUmVzcG9uc2VzLCB9KSB7XG4gICAgICAgIGlmICh0aGlzLnNlbnRJbml0aWFsSW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VudEluaXRpYWxJbnB1dCA9IHRydWU7XG4gICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICAgICAgY29uc3QgbGF0ZXN0UmVzcG9uc2UgPSBtb2RlbFJlc3BvbnNlc1ttb2RlbFJlc3BvbnNlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgZm9yIChjb25zdCByZXNwb25zZSBvZiBtb2RlbFJlc3BvbnNlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnZlcnNhdGlvbklkICYmIGxhdGVzdFJlc3BvbnNlPy5yZXNwb25zZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IGxhdGVzdFJlc3BvbnNlLnJlc3BvbnNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCByYXdJdGVtID0gaXRlbS5yYXdJdGVtO1xuICAgICAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHR5cGVvZiByYXdJdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VydmVySXRlbXMuaGFzKHJhd0l0ZW0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKHJhd0l0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZHMgdGhlIHJhdyBpdGVtcyByZXR1cm5lZCBieSB0aGUgc2VydmVyIHNvIGZ1dHVyZSBkZWx0YSBjYWxjdWxhdGlvbnMgc2tpcCB0aGVtLlxuICAgICAqIEFsc28gY2FwdHVyZXMgdGhlIGxhdGVzdCByZXNwb25zZSBpZGVudGlmaWVyIHRvIGNoYWluIGZvbGxvdy11cCBjYWxscyB3aGVuIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIHRyYWNrU2VydmVySXRlbXMobW9kZWxSZXNwb25zZSkge1xuICAgICAgICBpZiAoIW1vZGVsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbW9kZWxSZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVySXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb252ZXJzYXRpb25JZCAmJiBtb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNSZXNwb25zZUlkID0gbW9kZWxSZXNwb25zZS5yZXNwb25zZUlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1pbmltdW0gc2V0IG9mIGl0ZW1zIHRoYXQgc3RpbGwgbmVlZCB0byBiZSBkZWxpdmVyZWQgdG8gdGhlIHNlcnZlciBmb3IgdGhlXG4gICAgICogY3VycmVudCB0dXJuLiBUaGlzIGluY2x1ZGVzIHRoZSBvcmlnaW5hbCB0dXJuIGlucHV0cyAodW50aWwgYWNrbm93bGVkZ2VkKSBwbHVzIGFueVxuICAgICAqIG5ld2x5IGdlbmVyYXRlZCBpdGVtcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGVjaG9lZCBiYWNrIGJ5IHRoZSBBUEkuXG4gICAgICovXG4gICAgcHJlcGFyZUlucHV0KG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGlucHV0SXRlbXMgPSBbXTtcbiAgICAgICAgaWYgKCF0aGlzLnNlbnRJbml0aWFsSW5wdXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxJdGVtcyA9IHRvQWdlbnRJbnB1dExpc3Qob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgZnVsbCBpbml0aWFsIHBheWxvYWQgc28gYSBmaWx0ZXIgY2FuIGRyb3AgaXRlbXMgd2l0aG91dCBsb3NpbmcgdGhlaXIgb3JpZ2luYWxzLlxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKC4uLmluaXRpYWxJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IGluaXRpYWxJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IEJvb2xlYW4oaXRlbSkgJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKTtcbiAgICAgICAgICAgIHRoaXMuc2VudEluaXRpYWxJbnB1dCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgJiZcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFJlLXF1ZXVlIHByaW9yIGluaXRpYWwgaXRlbXMgdW50aWwgdGhlIHRyYWNrZXIgY29uZmlybXMgdGhleSB3ZXJlIGRlbGl2ZXJlZCB0byB0aGUgQVBJLlxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKC4uLnRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByYXdJdGVtID0gaXRlbS5yYXdJdGVtO1xuICAgICAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHR5cGVvZiByYXdJdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VudEl0ZW1zLmhhcyhyYXdJdGVtKSB8fCB0aGlzLnNlcnZlckl0ZW1zLmhhcyhyYXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKHJhd0l0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnB1dEl0ZW1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGUgcHJvdmlkZWQgb3JpZ2luYWxzIGFzIGRlbGl2ZXJlZCBzbyBmdXR1cmUgdHVybnMgZG8gbm90IHJlc2VuZCB0aGVtIGFuZCBhbnlcbiAgICAgKiBwZW5kaW5nIGluaXRpYWwgaW5wdXRzIGNhbiBiZSBkcm9wcGVkIG9uY2UgdGhlIHNlcnZlciBhY2tub3dsZWRnZXMgcmVjZWlwdC5cbiAgICAgKi9cbiAgICBtYXJrSW5wdXRBc1NlbnQoaXRlbXMpIHtcbiAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWxpdmVyZWQgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKCFpdGVtIHx8IHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0JyB8fCBkZWxpdmVyZWQuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTb21lIGlucHV0cyBtYXkgYmUgcmVwZWF0ZWQgaW4gdGhlIGZpbHRlcmVkIGxpc3Q7IG9ubHkgbWFyayB1bmlxdWUgb3JpZ2luYWxzIG9uY2UuXG4gICAgICAgICAgICBkZWxpdmVyZWQuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgfHxcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQuZmlsdGVyKChpdGVtKSA9PiAhZGVsaXZlcmVkLmhhcyhpdGVtKSk7XG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogV2hlbiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IHZhcmlhbnQsIGFnZW50cyBtYXkgY2FycnkgR1BULTUtc3BlY2lmaWMgcHJvdmlkZXJEYXRhXG4gKiAoZS5nLiwgcmVhc29uaW5nIGVmZm9ydCwgdGV4dCB2ZXJib3NpdHkpLiBJZiBhIHJ1biByZXNvbHZlcyB0byBhIG5vbi1HUFQtNSBtb2RlbCBhbmQgdGhlXG4gKiBhZ2VudCByZWxpZWQgb24gdGhlIGRlZmF1bHQgbW9kZWwgKGkuZS4sIG5vIGV4cGxpY2l0IG1vZGVsIHNldCksIHRoZXNlIEdQVC01LW9ubHkgc2V0dGluZ3NcbiAqIGFyZSBpbmNvbXBhdGlibGUgYW5kIHNob3VsZCBiZSBzdHJpcHBlZCB0byBhdm9pZCBydW50aW1lIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgYWdlbnRNb2RlbFNldHRpbmdzLCBydW5uZXJNb2RlbCwgbW9kZWxTZXR0aW5ncykge1xuICAgIGlmIChcbiAgICAvLyBncHQtNSBpcyBlbmFibGVkIGZvciB0aGUgZGVmYXVsdCBtb2RlbCBmb3IgYWdlbnRzXG4gICAgaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgIC8vIGV4cGxpY2l0bHkgc2V0IG1vZGVsIGZvciB0aGUgYWdlbnRcbiAgICAgICAgZXhwbGljdGx5TW9kZWxTZXQgJiZcbiAgICAgICAgLy8gdGhpcyBydW5uZXIgdXNlcyBhIG5vbi1ncHQtNSBtb2RlbFxuICAgICAgICAodHlwZW9mIHJ1bm5lck1vZGVsICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgIWdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKHJ1bm5lck1vZGVsKSkgJiZcbiAgICAgICAgKGFnZW50TW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZyB8fFxuICAgICAgICAgICAgYWdlbnRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8udGV4dD8udmVyYm9zaXR5IHx8XG4gICAgICAgICAgICBhZ2VudE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmdfZWZmb3J0KSkge1xuICAgICAgICBjb25zdCBjb3BpZWRNb2RlbFNldHRpbmdzID0geyAuLi5tb2RlbFNldHRpbmdzIH07XG4gICAgICAgIC8vIHRoZSBpbmNvbXBhdGlibGUgcGFyYW1ldGVycyBzaG91bGQgYmUgcmVtb3ZlZCB0byBhdm9pZCBydW50aW1lIGVycm9yc1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZztcbiAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy50ZXh0Py52ZXJib3NpdHk7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8ucmVhc29uaW5nX2VmZm9ydDtcbiAgICAgICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nKSB7XG4gICAgICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5yZWFzb25pbmcuZWZmb3J0O1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nLnN1bW1hcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MudGV4dCkge1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MudGV4dC52ZXJib3NpdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvcGllZE1vZGVsU2V0dGluZ3M7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbGxlY3RzIHRvb2xzL2hhbmRvZmZzIGVhcmx5IHNvIHdlIGNhbiBhbm5vdGF0ZSBzcGFucyBiZWZvcmUgbW9kZWwgZXhlY3V0aW9uIGJlZ2lucy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcHJlcGFyZUFnZW50QXJ0aWZhY3RzKHN0YXRlKSB7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2ZmcyhzdGF0ZS5fY29udGV4dCk7XG4gICAgY29uc3QgdG9vbHMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHN0YXRlLl9jb250ZXh0KTtcbiAgICBpZiAoIXN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZOYW1lcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gaC5hZ2VudE5hbWUpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdHlwZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnN0YXJ0KCk7XG4gICAgICAgIHNldEN1cnJlbnRTcGFuKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNwYW5EYXRhLnRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBoYW5kb2ZmcyxcbiAgICAgICAgdG9vbHMsXG4gICAgICAgIHNlcmlhbGl6ZWRIYW5kb2ZmczogaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBzZXJpYWxpemVIYW5kb2ZmKGhhbmRvZmYpKSxcbiAgICAgICAgc2VyaWFsaXplZFRvb2xzOiB0b29scy5tYXAoKHRvb2wpID0+IHNlcmlhbGl6ZVRvb2wodG9vbCkpLFxuICAgICAgICB0b29sc0V4cGxpY2l0bHlQcm92aWRlZDogc3RhdGUuX2N1cnJlbnRBZ2VudC5oYXNFeHBsaWNpdFRvb2xDb25maWcoKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSkge1xuICAgIC8vIERlZXAgc2VyaWFsaXphdGlvbiBrZWVwcyBiaW5hcnkgaW5wdXRzIGNvbXBhcmFibGUgYWZ0ZXIgZmlsdGVycyBjbG9uZSB0aGVtLlxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLCBhZ2VudElucHV0U2VyaWFsaXphdGlvblJlcGxhY2VyKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkQWdlbnRJbnB1dFBvb2woaXRlbXMpIHtcbiAgICAvLyBUcmFjayBldmVyeSBvcmlnaW5hbCBvYmplY3Qgc28gZmlsdGVycyBjYW4gc2FmZWx5IHJldHVybiBjbG9uZWQgY29waWVzLlxuICAgIGNvbnN0IHBvb2wgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHBvb2wuZ2V0KGtleSk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgZXhpc3RpbmcucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvb2wuc2V0KGtleSwgW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9vbDtcbn1cbmZ1bmN0aW9uIHRha2VBZ2VudElucHV0RnJvbVBvb2wocG9vbCwga2V5KSB7XG4gICAgLy8gUHJlZmVyIHJldXNpbmcgdGhlIGVhcmxpZXN0IHVudG91Y2hlZCBvcmlnaW5hbCB0byBrZWVwIG9yZGVyaW5nIHN0YWJsZS5cbiAgICBjb25zdCBjYW5kaWRhdGVzID0gcG9vbC5nZXQoa2V5KTtcbiAgICBpZiAoIWNhbmRpZGF0ZXMgfHwgY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgW2ZpcnN0XSA9IGNhbmRpZGF0ZXM7XG4gICAgY2FuZGlkYXRlcy5zaGlmdCgpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gZmlyc3Q7XG59XG5mdW5jdGlvbiByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wocG9vbCwgaXRlbSkge1xuICAgIC8vIFJlbW92ZSBleGFjdGx5IHRoZSBtYXRjaGVkIGluc3RhbmNlIHNvIGR1cGxpY2F0ZSBwYXlsb2FkcyByZW1haW4gYXZhaWxhYmxlLlxuICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBwb29sLmdldChrZXkpO1xuICAgIGlmICghY2FuZGlkYXRlcyB8fCBjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gY2FuZGlkYXRlcy5maW5kSW5kZXgoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlID09PSBpdGVtKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FuZGlkYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIoX2tleSwgdmFsdWUpIHtcbiAgICAvLyBNaXJyb3IgcnVuSW1wbGVtZW50YXRpb24gc2VyaWFsaXphdGlvbiBzbyBidWZmZXIgc25hcHNob3RzIHJvdW5kLXRyaXAuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0FycmF5QnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2YWx1ZSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogdmlldy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KFVpbnQ4QXJyYXkuZnJvbSh2YWx1ZS5kYXRhKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8vIE5vcm1hbGl6ZXMgdXNlci1wcm92aWRlZCBpbnB1dCBpbnRvIHRoZSBzdHJ1Y3R1cmUgdGhlIG1vZGVsIGV4cGVjdHMuIFN0cmluZ3MgYmVjb21lIHVzZXIgbWVzc2FnZXMsXG4vLyBhcnJheXMgYXJlIGtlcHQgYXMtaXMgc28gZG93bnN0cmVhbSBsb29wcyBjYW4gdHJlYXQgYm90aCBzY2VuYXJpb3MgdW5pZm9ybWx5LlxuZnVuY3Rpb24gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSB7XG4gICAgLy8gQWxsb3cgY2FsbGVycyB0byBwYXNzIHBsYWluIHN0cmluZ3Mgd2hpbGUgcHJlc2VydmluZyBvcmlnaW5hbCBpdGVtIG9yZGVyLlxuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxJbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFt7IHR5cGU6ICdtZXNzYWdlJywgcm9sZTogJ3VzZXInLCBjb250ZW50OiBvcmlnaW5hbElucHV0IH1dO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLm9yaWdpbmFsSW5wdXRdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuLm1qcy5tYXAiLCJpbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSBhcyBfUmVhZGFibGVTdHJlYW0sIFRyYW5zZm9ybVN0cmVhbSwgUmVhZGFibGUsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFRleHRTdHJlYW0gfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmNsYXNzIFJ1blJlc3VsdEJhc2Uge1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZ1xuICAgICAqIHRoZSBhZ2VudCBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuaW5wdXQsIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhlc2UgaW5jbHVkZSB0aGluZ3MgbGlrZSBuZXcgbWVzc2FnZXMsIHRvb2xcbiAgICAgKiBjYWxscyBhbmQgdGhlaXIgb3V0cHV0cywgZXRjLlxuICAgICAqXG4gICAgICogSXQgZG9lcyBub3QgaW5jbHVkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYWdlbnRzIGFuZCBpbnN0ZWFkIHJlcHJlc2VudHMgdGhlIG1vZGVsIGRhdGEuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG91dHB1dCBpbmNsdWRpbmcgdGhlIGFnZW50cywgdXNlIHRoZSBgbmV3SXRlbXNgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQoW10sIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGlucHV0IGl0ZW1zLlxuICAgICAqL1xuICAgIGdldCBpbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX29yaWdpbmFsSW5wdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBydW4gaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGlzIGFzc29jaWF0ZXMgdGhlIG1vZGVsIGRhdGEgd2l0aCB0aGUgYWdlbnRzLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBtb2RlbCBkYXRhIHRoYXQgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4sIHVzZSB0aGUgYG91dHB1dGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG5ld0l0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgTExNIHJlc3BvbnNlcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCByYXdSZXNwb25zZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9tb2RlbFJlc3BvbnNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVzcG9uc2UgSUQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgbGFzdFJlc3BvbnNlSWQoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IHRoaXMucmF3UmVzcG9uc2VzO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VzICYmIHJlc3BvbnNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0ucmVzcG9uc2VJZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IGFnZW50IHRoYXQgd2FzIHJ1blxuICAgICAqL1xuICAgIGdldCBsYXN0QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW55IGludGVycnVwdGlvbnMgdGhhdCBvY2N1cnJlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biBmb3IgZXhhbXBsZSBmb3IgdG9vbCBhcHByb3ZhbHMuXG4gICAgICovXG4gICAgZ2V0IGludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuIElmIHRoZSBvdXRwdXQgdHlwZSB3YXMgc2V0IHRvIGFueXRoaW5nIG90aGVyIHRoYW4gYHRleHRgLFxuICAgICAqIHRoaXMgd2lsbCBiZSBwYXJzZWQgZWl0aGVyIGFzIEpTT04gb3IgdXNpbmcgdGhlIFpvZCBzY2hlbWEgeW91IHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGdldCBmaW5hbE91dHB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLndhcm4oJ0FjY2Vzc2VkIGZpbmFsT3V0cHV0IGJlZm9yZSBhZ2VudCBydW4gaXMgY29tcGxldGVkLicpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICBzdXBlcihzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1biBpbiBzdHJlYW1pbmcgbW9kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbWVkUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgdGhhdCBpcyBydW5uaW5nXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB0dXJuIG51bWJlclxuICAgICAqL1xuICAgIGN1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgdGhhdCBjYW4gYmUgcnVuXG4gICAgICovXG4gICAgbWF4VHVybnM7XG4gICAgI2Vycm9yID0gbnVsbDtcbiAgICAjc2lnbmFsO1xuICAgICNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlU3RyZWFtO1xuICAgICNjb21wbGV0ZWRQcm9taXNlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlamVjdDtcbiAgICAjY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgI3N0cmVhbUxvb3BQcm9taXNlO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI3NpZ25hbCA9IHJlc3VsdC5zaWduYWw7XG4gICAgICAgIHRoaXMuI3JlYWRhYmxlU3RyZWFtID0gbmV3IF9SZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuI2NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy4jcmVhZGFibGVDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jcmVhZGFibGVTdHJlYW0ubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEZhaWxlZCB0byBjbG9zZSByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuI3JlYWRhYmxlU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FuY2VsKHRoaXMuI3NpZ25hbD8ucmVhc29uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIGNhbmNlbCByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZUFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBoYW5kbGVBYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBIYW5kbGVzIGFuIGVycm9yIGluIHRoZSBzdHJlYW0gbG9vcC5cbiAgICAgKi9cbiAgICBfcmFpc2VFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0Py4oZXJyKTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXN1bHRlZCBpbiBhbiBlcnJvcjogJHtlfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAqL1xuICAgIGdldCBjYW5jZWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjYW5jZWxsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgcmVhZGFibGUgc3RyZWFtLlxuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIG9mIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXQgdGhpcyBwcm9taXNlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkIGlmIHlvdSBhcmUgbm90IGNvbnN1bWluZyB0aGVcbiAgICAgKiBzdHJlYW0gZGlyZWN0bHkuXG4gICAgICovXG4gICAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbXBsZXRlZFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVycm9yIHRocm93biBkdXJpbmcgdGhlIHJ1biwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICB0b1RleHRTdHJlYW0ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuI3JlYWRhYmxlU3RyZWFtLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgICAgdHJhbnNmb3JtKGV2ZW50LCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JyAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgPT09ICdvdXRwdXRfdGV4dF9kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IFN0cmVhbUV2ZW50VGV4dFN0cmVhbS5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGl0ZW0uZGVsdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGF0aWJsZVdpdGhOb2RlU3RyZWFtcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWRhYmxlLmZyb21XZWIoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFNldHMgdGhlIHN0cmVhbSBsb29wIHByb21pc2UgdGhhdCBjb21wbGV0ZXMgd2hlbiB0aGUgaW50ZXJuYWwgc3RyZWFtIGxvb3AgZmluaXNoZXMuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRlZmVyIHRyYWNlIGVuZCB1bnRpbCBhbGwgYWdlbnQgd29yayBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBfc2V0U3RyZWFtTG9vcFByb21pc2UocHJvbWlzZSkge1xuICAgICAgICB0aGlzLiNzdHJlYW1Mb29wUHJvbWlzZSA9IHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RyZWFtIGxvb3AgY29tcGxldGVzLlxuICAgICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgdHJhY2luZyBzeXN0ZW0gdG8gd2FpdCBmb3IgYWxsIGFnZW50IHdvcmsgYmVmb3JlIGVuZGluZyB0aGUgdHJhY2UuXG4gICAgICovXG4gICAgX2dldFN0cmVhbUxvb3BQcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyZWFtTG9vcFByb21pc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4uL3Jlc3VsdC5tanNcIjtcbmxldCBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xuZnVuY3Rpb24gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkge1xuICAgIF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UgPz89IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IHRyYWNlIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHRyYWNlIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gdHJhY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlPy50cmFjZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudFRyYWNlLnRyYWNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCBzcGFuIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHNwYW4gb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjdXJyZW50U3Bhbj8uc3Bhbikge1xuICAgICAgICByZXR1cm4gY3VycmVudFNwYW4uc3BhbjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgaXMgYW4gQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgdGhhdCBzdG9yZXMgdGhlIGN1cnJlbnQgdHJhY2UuXG4gKiBJdCB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiBkaWZmZXJlbnQgZXZlbnQgbG9vcCBleGVjdXRpb25zLlxuICpcbiAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgc2hvdWxkIGJlIHRoZSBvbmx5IHdheSB0aGF0IHRoaXMgY29udGV4dCBnZXRzIGludGVyZmFjZWQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikge1xuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgIGlmICghdHJhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2UgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0cmFjZS5zdGFydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbih0cmFjZSk7XG4gICAgICAgIC8vIElmIHJlc3VsdCBpcyBhIFN0cmVhbWVkUnVuUmVzdWx0LCBkZWZlciB0cmFjZSBlbmQgdW50aWwgc3RyZWFtIGxvb3AgY29tcGxldGVzXG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBTdHJlYW1lZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9vcFByb21pc2UgPSByZXN1bHQuX2dldFN0cmVhbUxvb3BQcm9taXNlKCk7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTG9vcFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1Mb29wUHJvbWlzZS5maW5hbGx5KCgpID0+IHRyYWNlLmVuZCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBub24tc3RyZWFtaW5nIHJlc3VsdHMsIGVuZCB0cmFjZSBzeW5jaHJvbm91c2x5XG4gICAgICAgIGF3YWl0IHRyYWNlLmVuZCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdHJhY2UgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uXG4gKiBwYXNzZWQgdG8gaXQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhY2UodHJhY2UsIGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBuZXdUcmFjZSA9IHR5cGVvZiB0cmFjZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWU6IHRyYWNlLFxuICAgICAgICB9KVxuICAgICAgICA6IHRyYWNlO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oeyB0cmFjZTogbmV3VHJhY2UgfSwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgYWN0aXZlIHRyYWNlIGluIHRoZSBleGVjdXRpb24gY29udGV4dC4gSWYgdGhlcmVcbiAqIGlzLCBpdCB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCB0aGUgZXhpc3RpbmcgdHJhY2UuIElmIHRoZXJlIGlzIG5vIHRyYWNlLCBpdCB3aWxsIGNyZWF0ZVxuICogYSBuZXcgb25lIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnp1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVRyYWNlKGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlKSB7XG4gICAgICAgIC8vIGlmIHRoaXMgZXhlY3V0aW9uIGNvbnRleHQgYWxyZWFkeSBoYXMgYSB0cmFjZSBpbnN0YW5jZSBpbiBpdCB3ZSBqdXN0IGNvbnRpbnVlXG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgIH1cbiAgICBjb25zdCBuZXdUcmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZShvcHRpb25zKTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHNldCB0aGUgY3VycmVudCBzcGFuIGluIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gc3BhbiAtIFRoZSBzcGFuIHRvIHNldCBhcyB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VycmVudFNwYW4oc3Bhbikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LnNwYW4pIHtcbiAgICAgICAgY29udGV4dC5zcGFuLnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQuc3BhbjtcbiAgICB9XG4gICAgY29udGV4dC5zcGFuID0gc3BhbjtcbiAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LnNwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3Bhbj8ucHJldmlvdXNTcGFuO1xuICAgICAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGFuIGVycm9yIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKlxuICogQHBhcmFtIHNwYW5FcnJvciAtIFRoZSBlcnJvciB0byBhZGQgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVycm9yVG9DdXJyZW50U3BhbihzcGFuRXJyb3IpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgIGN1cnJlbnRTcGFuLnNldEVycm9yKHNwYW5FcnJvcik7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlIGN1cnJlbnQgY29udGV4dCBieSBjcmVhdGluZyBuZXcgaW5zdGFuY2VzIG9mIHRoZSB0cmFjZSwgc3BhbiwgYW5kXG4gKiBwcmV2aW91cyBzcGFuLlxuICpcbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdG8gY2xvbmUuXG4gKiBAcmV0dXJucyBBIGNsb25lIG9mIHRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVDdXJyZW50Q29udGV4dChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2U6IGNvbnRleHQudHJhY2U/LmNsb25lKCksXG4gICAgICAgIHNwYW46IGNvbnRleHQuc3Bhbj8uY2xvbmUoKSxcbiAgICAgICAgcHJldmlvdXNTcGFuOiBjb250ZXh0LnByZXZpb3VzU3Bhbj8uY2xvbmUoKSxcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIGEgbmV3IHNwYW4gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIHdpdGggdGhlIG5ldyBzcGFuIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTmV3U3BhbkNvbnRleHQoZm4pIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKCFjdXJyZW50Q29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGNvbnN0IGNvcHlPZkNvbnRleHQgPSBjbG9uZUN1cnJlbnRDb250ZXh0KGN1cnJlbnRDb250ZXh0KTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKGNvcHlPZkNvbnRleHQsIGZuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHRpbWVyIGFzIF90aW1lciwgaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG4vKipcbiAqIFByaW50cyB0aGUgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgY29uc29sZVxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZVNwYW5FeHBvcnRlciB7XG4gICAgYXN5bmMgZXhwb3J0KGl0ZW1zKSB7XG4gICAgICAgIGlmICh0cmFjaW5nLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQuIFNraXBwaW5nIGV4cG9ydCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RyYWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCB0cmFjZSB0cmFjZUlkPSR7aXRlbS50cmFjZUlkfSBuYW1lPSR7aXRlbS5uYW1lfSR7aXRlbS5ncm91cElkID8gYCBncm91cElkPSR7aXRlbS5ncm91cElkfWAgOiAnJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvciA/PyBkZWZhdWx0UHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBvcHRpb25zLnN0YXJ0ZWQgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VFbmQodGhpcyk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHRoaXMuI3N0YXJ0ZWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gYWN0aXZlIHRyYWNlLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50U3BhbiBpbnN0YW5jZW9mIE5vb3BTcGFuIHx8XG4gICAgICAgICAgICAgICAgY3VycmVudFRyYWNlIGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBQYXJlbnQgJHtjdXJyZW50U3Bhbn0gb3IgJHtjdXJyZW50VHJhY2V9IGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBjdXJyZW50VHJhY2UudHJhY2VJZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgcGFyZW50IHNwYW4gJXMnLCBjdXJyZW50U3Bhbi5zcGFuSWQpO1xuICAgICAgICAgICAgICAgIHBhcmVudElkID0gY3VycmVudFNwYW4uc3BhbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBwYXJlbnQgc3BhbiwgdXNpbmcgY3VycmVudCB0cmFjZSAlcycsIGN1cnJlbnRUcmFjZS50cmFjZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBUcmFjZSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHRyYWNlIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBTcGFuKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCBzcGFuIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LnNwYW5JZDtcbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gdHJhY2VJZCBmb3VuZC4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nIHNwYW4gJHtKU09OLnN0cmluZ2lmeShzcGFuT3B0aW9ucy5kYXRhKX0gd2l0aCBpZCAke3NwYW5PcHRpb25zLnNwYW5JZCA/PyB0cmFjZUlkfWApO1xuICAgICAgICByZXR1cm4gbmV3IFNwYW4oe1xuICAgICAgICAgICAgLi4uc3Bhbk9wdGlvbnMsXG4gICAgICAgICAgICB0cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgIH0sIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXInKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXIgJW8nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFkZHMgbGlzdGVuZXJzIHRvIGBwcm9jZXNzYCB0byBlbnN1cmUgYHNodXRkb3duYCBvY2N1cnMgYmVmb3JlIGV4aXQuICovXG4gICAgI2FkZENsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIE5vZGUuanMgcHJvY2VzcyB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB0aW1lb3V0LCBmb3JjaW5nIGV4aXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSGFuZGxlIG5vcm1hbCB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgcHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGNsZWFudXApO1xuICAgICAgICAgICAgLy8gSGFuZGxlIENUUkwrQyAoU0lHSU5UKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHSU5UJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMTMwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzKCdTSUdURVJNJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBhc3luYyAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcmVqZWN0aW9uJywgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cygndW5oYW5kbGVkUmVqZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKGV2ZW50KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGggPiAxO1xufVxubGV0IEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghR0xPQkFMX1RSQUNFX1BST1ZJREVSKSB7XG4gICAgICAgIEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBHTE9CQUxfVFJBQ0VfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8qKlxuICogU3RhcnQgdGhlIHRyYWNlIGV4cG9ydCBsb29wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRUcmFjZUV4cG9ydExvb3AoKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnN0YXJ0RXhwb3J0TG9vcCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmV4cG9ydCB7IGFwcGx5RGlmZiB9IGZyb20gXCIuL3V0aWxzL2FwcGx5RGlmZi5tanNcIjtcbmV4cG9ydCB7IGdldEFsbE1jcFRvb2xzLCBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZSwgbWNwVG9GdW5jdGlvblRvb2wsIE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC5tanNcIjtcbmV4cG9ydCB7IGNyZWF0ZU1DUFRvb2xTdGF0aWNGaWx0ZXIsIH0gZnJvbSBcIi4vbWNwVXRpbC5tanNcIjtcbmV4cG9ydCB7IE9QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FLCBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgZ2V0RGVmYXVsdE1vZGVsLCBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncywgaXNHcHQ1RGVmYXVsdCwgfSBmcm9tIFwiLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5leHBvcnQgeyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmV4cG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5leHBvcnQgeyBydW4sIFJ1bm5lciwgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5leHBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmV4cG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5leHBvcnQgeyBjb21wdXRlclRvb2wsIHNoZWxsVG9vbCwgYXBwbHlQYXRjaFRvb2wsIGhvc3RlZE1jcFRvb2wsIHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5leHBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyLCBUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IFJlcXVlc3RVc2FnZSwgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmV4cG9ydCB7IE1lbW9yeVNlc3Npb24gfSBmcm9tIFwiLi9tZW1vcnkvbWVtb3J5U2Vzc2lvbi5tanNcIjtcbmV4cG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuLyoqXG4gKiBBZGQgdGhlIGRlZmF1bHQgcHJvY2Vzc29yLCB3aGljaCBleHBvcnRzIHRyYWNlcyBhbmQgc3BhbnMgdG8gdGhlIGJhY2tlbmQgaW4gYmF0Y2hlcy4gWW91IGNhblxuICogY2hhbmdlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGJ5IGVpdGhlcjpcbiAqIDEuIGNhbGxpbmcgYWRkVHJhY2VQcm9jZXNzb3IsIHdoaWNoIGFkZHMgYWRkaXRpb25hbCBwcm9jZXNzb3JzLCBvclxuICogMi4gY2FsbGluZyBzZXRUcmFjZVByb2Nlc3NvcnMsIHdoaWNoIHNldHMgdGhlIHByb2Nlc3NvcnMgYW5kIGRpc2NhcmRzIHRoZSBkZWZhdWx0IG9uZVxuICovXG5hZGRUcmFjZVByb2Nlc3NvcihkZWZhdWx0UHJvY2Vzc29yKCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCBNRVRBREFUQSBmcm9tIFwiLi9tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IFJ1blRvb2xBcHByb3ZhbEl0ZW0gfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbi8qKlxuICogQ29udmVydHMgYSBiYXNlNjQgc3RyaW5nIHRvIGFuIEFycmF5QnVmZmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0XG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcy5idWZmZXI7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIEFycmF5QnVmZmVyIHRvIGEgYmFzZTY0IHN0cmluZ1xuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyKSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcikpO1xuICAgIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gYW4gYXVkaW8gb3V0cHV0IG1lc3NhZ2VcbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlKGl0ZW0pIHtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0gPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnIHx8XG4gICAgICAgICEoJ3R5cGUnIGluIGl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtLnR5cGUgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICFpdGVtLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghKCdjb250ZW50JyBpbiBpdGVtKSB8fFxuICAgICAgICAhQXJyYXkuaXNBcnJheShpdGVtLmNvbnRlbnQpIHx8XG4gICAgICAgIGl0ZW0uY29udGVudC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RDb250ZW50SXRlbSA9IGl0ZW0uY29udGVudFtpdGVtLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKCEoJ3R5cGUnIGluIGxhc3RDb250ZW50SXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGxhc3RDb250ZW50SXRlbS50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udGV4dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRleHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICdvdXRwdXRfYXVkaW8nKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGxhc3RDb250ZW50SXRlbS50cmFuc2NyaXB0XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQ29tcGFyZSB0d28gY29udmVyc2F0aW9uIGhpc3RvcmllcyB0byBkZXRlcm1pbmUgdGhlIHJlbW92YWxzLCBhZGRpdGlvbnMsIGFuZCB1cGRhdGVzLlxuICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3RvcnkuXG4gKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeS5cbiAqIEByZXR1cm5zIEEgZGlmZiBvZiB0aGUgdHdvIGhpc3Rvcmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpZmZSZWFsdGltZUhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSkge1xuICAgIGNvbnN0IHJlbW92YWxzID0gb2xkSGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFuZXdIaXN0b3J5LnNvbWUoKG5ld0l0ZW0pID0+IG5ld0l0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IGFkZGl0aW9ucyA9IG5ld0hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiAhb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQpKTtcbiAgICBjb25zdCB1cGRhdGVzID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+IG9sZEhpc3Rvcnkuc29tZSgob2xkSXRlbSkgPT4gb2xkSXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkICYmXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG9sZEl0ZW0pICE9PSBKU09OLnN0cmluZ2lmeShpdGVtKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92YWxzLFxuICAgICAgICBhZGRpdGlvbnMsXG4gICAgICAgIHVwZGF0ZXMsXG4gICAgfTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgV2ViUlRDLlxuICogQHJldHVybnMgVHJ1ZSBpZiBXZWJSVEMgaXMgc3VwcG9ydGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNXZWJSVENTdXBwb3J0KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93WydSVENQZWVyQ29ubmVjdGlvbiddICE9PSAndW5kZWZpbmVkJztcbn1cbi8qKlxuICogUmVtb3ZlcyB0aGUgYXVkaW8gZGF0YSBmcm9tIGFsbCBjb250ZW50IGluIGEgbWVzc2FnZSBieSBzZXR0aW5nIGl0IHRvIG51bGwuXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSkge1xuICAgIGlmIChpdGVtLnJvbGUgPT09ICdzeXN0ZW0nKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdvdXRwdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxuLy8gUmVhbHRpbWUgY2FuIHJlc2VuZCB0cnVuY2F0ZWQgYXNzaXN0YW50IGl0ZW1zIHdpdGhvdXQgdHJhbnNjcmlwdHMgYWZ0ZXIgYW5cbi8vIGludGVycnVwdC9yZXRyaWV2ZSBjeWNsZS4gVGhpcyBoZWxwZXIgbWVyZ2VzIHRob3NlIHVwZGF0ZXMgd2l0aCB0aGUgbGF0ZXN0XG4vLyBrbm93biB0cmFuc2NyaXB0IHNvIFVJcyByZXRhaW4gdGhlIHBvcnRpb24gb2YgdGhlIG1lc3NhZ2UgdGhlIHVzZXIgYWxyZWFkeVxuLy8gaGVhcmQuXG5mdW5jdGlvbiBwcmVzZXJ2ZUFzc2lzdGFudEF1ZGlvVHJhbnNjcmlwdHMoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgaWYgKGV4aXN0aW5nLnJvbGUgIT09ICdhc3Npc3RhbnQnIHx8IGluY29taW5nLnJvbGUgIT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiBpbmNvbWluZztcbiAgICB9XG4gICAgY29uc3QgbWVyZ2VkQ29udGVudCA9IGluY29taW5nLmNvbnRlbnQubWFwKChlbnRyeSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgIT09ICdvdXRwdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNjcmlwdE1pc3NpbmcgPSB0eXBlb2YgZW50cnkudHJhbnNjcmlwdCAhPT0gJ3N0cmluZycgfHwgZW50cnkudHJhbnNjcmlwdC5sZW5ndGggPT09IDA7XG4gICAgICAgIGlmICghdHJhbnNjcmlwdE1pc3NpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2aW91c0VudHJ5ID0gZXhpc3RpbmcuY29udGVudFtpbmRleF07XG4gICAgICAgIGlmIChwcmV2aW91c0VudHJ5ICYmXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5LnR5cGUgPT09ICdvdXRwdXRfYXVkaW8nICYmXG4gICAgICAgICAgICB0eXBlb2YgcHJldmlvdXNFbnRyeS50cmFuc2NyaXB0ID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgcHJldmlvdXNFbnRyeS50cmFuc2NyaXB0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgdHJhbnNjcmlwdDogcHJldmlvdXNFbnRyeS50cmFuc2NyaXB0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uaW5jb21pbmcsXG4gICAgICAgIGNvbnRlbnQ6IG1lcmdlZENvbnRlbnQsXG4gICAgfTtcbn1cbi8qKlxuICogVXBkYXRlcyB0aGUgcmVhbHRpbWUgaGlzdG9yeSBhcnJheSBiYXNlZCBvbiB0aGUgaW5jb21pbmcgZXZlbnQgYW5kIG9wdGlvbnMuXG4gKiBAcGFyYW0gaGlzdG9yeSAtIFRoZSBjdXJyZW50IGhpc3RvcnkgYXJyYXkuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcHJvY2VzcyAoUmVhbHRpbWVJdGVtKS5cbiAqIEBwYXJhbSBzaG91bGRJbmNsdWRlQXVkaW9EYXRhIC0gV2hldGhlciB0byBpbmNsdWRlIGF1ZGlvIGRhdGEgaW4gbWVzc2FnZSBpdGVtcy5cbiAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGhpc3RvcnkgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZWFsdGltZUhpc3RvcnkoaGlzdG9yeSwgZXZlbnQsIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEpIHtcbiAgICAvLyBNZXJnZSB0cmFuc2NyaXB0IGludG8gcGxhY2Vob2xkZXIgaW5wdXRfYXVkaW8gbWVzc2FnZVxuICAgIGlmIChldmVudC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSB7XG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtX2lkICYmXG4gICAgICAgICAgICAgICAgaXRlbS50eXBlID09PSAnbWVzc2FnZScgJiZcbiAgICAgICAgICAgICAgICAncm9sZScgaW4gaXRlbSAmJlxuICAgICAgICAgICAgICAgIGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBldmVudC50cmFuc2NyaXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdXBkYXRlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbmV3RXZlbnQgPSAhc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAmJiBldmVudC50eXBlID09PSAnbWVzc2FnZSdcbiAgICAgICAgPyByZW1vdmVBdWRpb0Zyb21Db250ZW50KGV2ZW50KVxuICAgICAgICA6IGV2ZW50O1xuICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IGhpc3RvcnlbZXhpc3RpbmdJbmRleF07XG4gICAgICAgIGNvbnN0IG1lcmdlZEV2ZW50ID0gbmV3RXZlbnQudHlwZSA9PT0gJ21lc3NhZ2UnICYmIGV4aXN0aW5nSXRlbS50eXBlID09PSAnbWVzc2FnZSdcbiAgICAgICAgICAgID8gcHJlc2VydmVBc3Npc3RhbnRBdWRpb1RyYW5zY3JpcHRzKGV4aXN0aW5nSXRlbSwgbmV3RXZlbnQpXG4gICAgICAgICAgICA6IG5ld0V2ZW50O1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgaXRlbVxuICAgICAgICByZXR1cm4gaGlzdG9yeS5tYXAoKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gZXhpc3RpbmdJbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXJnZWRFdmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAmJiBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVBdWRpb0Zyb21Db250ZW50KGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC5wcmV2aW91c0l0ZW1JZCkge1xuICAgICAgICAvLyBJbnNlcnQgYWZ0ZXIgcHJldmlvdXNJdGVtSWQgaWYgZm91bmQsIGVsc2UgYXQgZW5kXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQucHJldmlvdXNJdGVtSWQpO1xuICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKDAsIHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UocHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIGhlYWRlcnMgdG8gdXNlIGZvciB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY29uc3QgSEVBREVSUyA9IHtcbiAgICAnVXNlci1BZ2VudCc6IGBBZ2VudHMvSmF2YVNjcmlwdCAke01FVEFEQVRBLnZlcnNpb259YCxcbiAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YCxcbn07XG4vKipcbiAqIEJyb3dzZXIgd2Vic29ja2V0IGhlYWRlclxuICovXG5leHBvcnQgY29uc3QgV0VCU09DS0VUX01FVEEgPSBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWA7XG5leHBvcnQgZnVuY3Rpb24gcmVhbHRpbWVBcHByb3ZhbEl0ZW1Ub0FwcHJvdmFsSXRlbShhZ2VudCwgaXRlbSkge1xuICAgIGNvbnN0IHsgbmFtZSwgYXJndW1lbnRzOiBhcmdzLCAuLi5yZXN0IH0gPSBpdGVtO1xuICAgIHJldHVybiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBKU09OLnN0cmluZ2lmeShhcmdzKSxcbiAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgIH0sXG4gICAgfSwgYWdlbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0oaXRlbSkge1xuICAgIGlmIChpdGVtLnJhd0l0ZW0udHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnICYmXG4gICAgICAgIGl0ZW0ucmF3SXRlbS50eXBlICE9PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFwcHJvdmFsIGl0ZW0gdHlwZSBmb3IgUmVhbHRpbWUgTUNQIGFwcHJvdmFsIHJlcXVlc3QnKTtcbiAgICB9XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIHByb3ZpZGVyRGF0YSB9ID0gaXRlbS5yYXdJdGVtO1xuICAgIGNvbnN0IHsgaXRlbUlkLCBzZXJ2ZXJMYWJlbCwgLi4ucmVzdCB9ID0gcHJvdmlkZXJEYXRhID8/IHt9O1xuICAgIGlmICghaXRlbUlkIHx8ICFzZXJ2ZXJMYWJlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXBwcm92YWwgaXRlbSBmb3IgUmVhbHRpbWUgTUNQIGFwcHJvdmFsIHJlcXVlc3QnKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgaXRlbUlkLFxuICAgICAgICBzZXJ2ZXJMYWJlbCxcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBhcmdzID8gSlNPTi5wYXJzZShhcmdzKSA6IHt9LFxuICAgICAgICBhcHByb3ZlZDogbnVsbCxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImltcG9ydCB7IEFnZW50LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLyoqXG4gKiBBIHNwZWNpYWxpemVkIGFnZW50IGluc3RhbmNlIHRoYXQgaXMgbWVhbnQgdG8gYmUgdXNlZCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCB0byBidWlsZFxuICogdm9pY2UgYWdlbnRzLiBEdWUgdG8gdGhlIG5hdHVyZSBvZiB0aGlzIGFnZW50LCBzb21lIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBhcmUgbm90IHN1cHBvcnRlZFxuICogdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHJlZ3VsYXIgYEFnZW50YCBpbnN0YW5jZXMuIEZvciBleGFtcGxlOlxuICogLSBgbW9kZWxgIGNob2ljZSBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYG1vZGVsU2V0dGluZ3NgIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgb3V0cHV0VHlwZWAgaXMgbm90IHN1cHBvcnRlZCBhcyBSZWFsdGltZUFnZW50cyBkbyBub3Qgc3VwcG9ydCBzdHJ1Y3R1cmVkIG91dHB1dHNcbiAqIC0gYHRvb2xVc2VCZWhhdmlvcmAgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGB2b2ljZWAgY2FuIGJlIGNvbmZpZ3VyZWQgb24gYW4gYEFnZW50YCBsZXZlbCBob3dldmVyIGl0IGNhbm5vdCBiZSBjaGFuZ2VkIGFmdGVyIHRoZSBmaXJzdFxuICogICAgYWdlbnQgd2l0aGluIGEgYFJlYWx0aW1lU2Vzc2lvbmAgc3Bva2VcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IGFnZW50ID0gbmV3IFJlYWx0aW1lQWdlbnQoe1xuICogICBuYW1lOiAnbXktYWdlbnQnLFxuICogICBpbnN0cnVjdGlvbnM6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBjYW4gYW5zd2VyIHF1ZXN0aW9ucyBhbmQgaGVscCB3aXRoIHRhc2tzLicsXG4gKiB9KVxuICpcbiAqIGNvbnN0IHNlc3Npb24gPSBuZXcgUmVhbHRpbWVTZXNzaW9uKGFnZW50KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUmVhbHRpbWVBZ2VudCBleHRlbmRzIEFnZW50IHtcbiAgICAvKipcbiAgICAgKiBUaGUgdm9pY2UgaW50ZW5kZWQgdG8gYmUgdXNlZCBieSB0aGUgYWdlbnQuIElmIGFub3RoZXIgYWdlbnQgYWxyZWFkeSBzcG9rZSBkdXJpbmcgdGhlXG4gICAgICogUmVhbHRpbWVTZXNzaW9uLCBjaGFuZ2luZyB0aGUgdm9pY2UgZHVyaW5nIGEgaGFuZG9mZiB3aWxsIGZhaWwuXG4gICAgICovXG4gICAgdm9pY2U7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgICAgIHRoaXMudm9pY2UgPSBjb25maWcudm9pY2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVBZ2VudC5tanMubWFwIiwiaW1wb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZWJvdW5jZVRleHRMZW5ndGg6IHNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA/PyAxMDAsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCh7IHBvbGljeUhpbnQ6IHBvbGljeUhpbnRJbnB1dCwgLi4ub3B0aW9ucyB9KSB7XG4gICAgY29uc3QgYmFzZUd1YXJkcmFpbCA9IGRlZmluZU91dHB1dEd1YXJkcmFpbChvcHRpb25zKTtcbiAgICBjb25zdCBwb2xpY3lIaW50ID0gcG9saWN5SGludElucHV0ID8/IGJhc2VHdWFyZHJhaWwubmFtZTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5iYXNlR3VhcmRyYWlsLFxuICAgICAgICBwb2xpY3lIaW50LFxuICAgICAgICBydW46IGFzeW5jIChhcmdzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBiYXNlR3VhcmRyYWlsLnJ1bihhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyAuLi5yZXN1bHQuZ3VhcmRyYWlsLCBwb2xpY3lIaW50IH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1lc3NhZ2UgdGhhdCBpbmZvcm1zIHRoZSBtb2RlbCBhYm91dCB3aHkgdGhlIGd1YXJkcmFpbCB3YXMgdHJpZ2dlcmVkIGFuZCB0b1xuICogY29ycmVjdCB0aGUgYmVoYXZpb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShyZXN1bHQpIHtcbiAgICByZXR1cm4gYFxyXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXHJcbkZhaWxlZCBHdWFyZHJhaWwgUmVhc29uOiAke3Jlc3VsdC5ndWFyZHJhaWwucG9saWN5SGludH0uIFxyXG5GYWlsdXJlIERldGFpbHM6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvID8/IHt9KX0uIFxyXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cclxuYC50cmltKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImZ1bmN0aW9uIGlzRGVmaW5lZChrZXksIG9iamVjdCkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZnVkZ2luZyB3aXRoIHR5cGVzIGhlcmUgZm9yIHRoZSBpbmRleCB0eXBlc1xuICAgIHJldHVybiBrZXkgaW4gb2JqZWN0ICYmIHR5cGVvZiBvYmplY3Rba2V5XSAhPT0gJ3VuZGVmaW5lZCc7XG59XG5mdW5jdGlvbiBpc0RlcHJlY2F0ZWRDb25maWcoY29uZmlnKSB7XG4gICAgcmV0dXJuIChpc0RlZmluZWQoJ21vZGFsaXRpZXMnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnaW5wdXRBdWRpb0Zvcm1hdCcsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdvdXRwdXRBdWRpb0Zvcm1hdCcsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdpbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCd0dXJuRGV0ZWN0aW9uJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ2lucHV0QXVkaW9Ob2lzZVJlZHVjdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdzcGVlZCcsIGNvbmZpZykpO1xufVxuLyoqXG4gKiBDb252ZXJ0IGFueSBnaXZlbiBjb25maWcgKG9sZCBvciBuZXcpIHRvIHRoZSBuZXcgR0EgY29uZmlnIHNoYXBlLlxuICogSWYgYSBuZXcgY29uZmlnIGlzIHByb3ZpZGVkLCBpdCB3aWxsIGJlIHJldHVybmVkIGFzLWlzIChub3JtYWxpemVkIHNoYWxsb3dseSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b05ld1Nlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgaWYgKCFpc0RlcHJlY2F0ZWRDb25maWcoY29uZmlnKSkge1xuICAgICAgICBjb25zdCBpbnB1dENvbmZpZyA9IGNvbmZpZy5hdWRpbz8uaW5wdXRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLmF1ZGlvLmlucHV0LmZvcm1hdCksXG4gICAgICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IGNvbmZpZy5hdWRpby5pbnB1dC5ub2lzZVJlZHVjdGlvbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IGNvbmZpZy5hdWRpby5pbnB1dC50cmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHR1cm5EZXRlY3Rpb246IGNvbmZpZy5hdWRpby5pbnB1dC50dXJuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RlZE91dHB1dFZvaWNlID0gY29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlID8/IGNvbmZpZy52b2ljZTtcbiAgICAgICAgY29uc3Qgb3V0cHV0Q29uZmlnID0gY29uZmlnLmF1ZGlvPy5vdXRwdXQgfHwgdHlwZW9mIHJlcXVlc3RlZE91dHB1dFZvaWNlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0KSxcbiAgICAgICAgICAgICAgICB2b2ljZTogcmVxdWVzdGVkT3V0cHV0Vm9pY2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IGNvbmZpZy5hdWRpbz8ub3V0cHV0Py5zcGVlZCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogY29uZmlnLmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIHRvb2xDaG9pY2U6IGNvbmZpZy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scyxcbiAgICAgICAgICAgIHRyYWNpbmc6IGNvbmZpZy50cmFjaW5nLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiBjb25maWcucHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgcHJvbXB0OiBjb25maWcucHJvbXB0LFxuICAgICAgICAgICAgb3V0cHV0TW9kYWxpdGllczogY29uZmlnLm91dHB1dE1vZGFsaXRpZXMsXG4gICAgICAgICAgICBhdWRpbzogaW5wdXRDb25maWcgfHwgb3V0cHV0Q29uZmlnXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiBpbnB1dENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBvdXRwdXRDb25maWcsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgIHRvb2xDaG9pY2U6IGNvbmZpZy50b29sQ2hvaWNlLFxuICAgICAgICB0b29sczogY29uZmlnLnRvb2xzLFxuICAgICAgICB0cmFjaW5nOiBjb25maWcudHJhY2luZyxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiBjb25maWcucHJvdmlkZXJEYXRhLFxuICAgICAgICBwcm9tcHQ6IGNvbmZpZy5wcm9tcHQsXG4gICAgICAgIG91dHB1dE1vZGFsaXRpZXM6IGNvbmZpZy5tb2RhbGl0aWVzLFxuICAgICAgICBhdWRpbzoge1xuICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5pbnB1dEF1ZGlvRm9ybWF0KSxcbiAgICAgICAgICAgICAgICBub2lzZVJlZHVjdGlvbjogY29uZmlnLmlucHV0QXVkaW9Ob2lzZVJlZHVjdGlvbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IGNvbmZpZy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiBjb25maWcudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5vdXRwdXRBdWRpb0Zvcm1hdCksXG4gICAgICAgICAgICAgICAgdm9pY2U6IGNvbmZpZy52b2ljZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogY29uZmlnLnNwZWVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGZvcm1hdCkge1xuICAgIGlmICghZm9ybWF0KVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSAnb2JqZWN0JylcbiAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICBjb25zdCBmID0gU3RyaW5nKGZvcm1hdCk7XG4gICAgaWYgKGYgPT09ICdwY20xNicpXG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9O1xuICAgIGlmIChmID09PSAnZzcxMV91bGF3JylcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbXUnIH07XG4gICAgaWYgKGYgPT09ICdnNzExX2FsYXcnKVxuICAgICAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtYScgfTtcbiAgICAvLyBEZWZhdWx0IGZhbGxiYWNrOiBhc3N1bWUgMjRrSHogUENNIGlmIHVua25vd24gc3RyaW5nXG4gICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbScsIHJhdGU6IDI0MDAwIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnRNZXNzYWdlcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5leHBvcnQgY29uc3QgYmFzZUl0ZW1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCdyb2xlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ3N5c3RlbScpLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ3VzZXInKSxcbiAgICAgICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnXSksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSwgdGV4dDogei5zdHJpbmcoKSB9KS5vcih6Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgICAgIHJvbGU6IHoubGl0ZXJhbCgnYXNzaXN0YW50JyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW8nKSxcbiAgICAgICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVUb29sQ2FsbEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVNY3BDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHouZW51bShbJ21jcF9jYWxsJywgJ21jcF90b29sX2NhbGwnXSksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWNwQ2FsbEFwcHJvdmFsUmVxdWVzdEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKSxcbiAgICBzZXJ2ZXJMYWJlbDogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIGFyZ3VtZW50czogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgYXBwcm92ZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsImltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOnJlYWx0aW1lJyk7XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuLy8gRXZlbnQgc2NoZW1hcyBtaXJyb3JpbmcgdGhlIHN0cnVjdHVyZXMgZGVmaW5lZCBpbiB0aGUgT3BlbkFJIFNESyB0eXBpbmdzLlxuLy8gTW9zdCBmaWVsZHMgZnJvbSB0aGUgaW50ZXJmYWNlcyBpbiBgcmVhbHRpbWUuZC50c2AgYXJlIGNhcHR1cmVkIGhlcmUgdG9cbi8vIHByb3ZpZGUgYmV0dGVyIHJ1bnRpbWUgdmFsaWRhdGlvbiB3aGVuIHBhcnNpbmcgZXZlbnRzIGZyb20gdGhlIHNlcnZlci5cbmV4cG9ydCBjb25zdCByZWFsdGltZVJlc3BvbnNlID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBjb252ZXJzYXRpb25faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1heF9vdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9yKHoubGl0ZXJhbCgnaW5mJykpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIC8vIEdBIHJlbmFtZTogbW9kYWxpdGllcyAtPiBvdXRwdXRfbW9kYWxpdGllc1xuICAgIG91dHB1dF9tb2RhbGl0aWVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUucmVzcG9uc2UnKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAvLyBHQSBncm91cGluZzogYXVkaW8ub3V0cHV0Lntmb3JtYXQsdm9pY2V9XG4gICAgYXVkaW86IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIG91dHB1dDogelxuICAgICAgICAgICAgLm9iamVjdCh7XG4gICAgICAgICAgICBmb3JtYXQ6IHouYW55KCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICAgICAgdm9pY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgICAgIC5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1czogelxuICAgICAgICAuZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2ZhaWxlZCcsICdjYW5jZWxsZWQnLCAnaW5fcHJvZ3Jlc3MnXSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3RhdHVzX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB1c2FnZTogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIGlucHV0X3Rva2VuX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5fZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxufSk7XG4vLyBCYXNpYyBjb250ZW50IHNjaGVtYSB1c2VkIGJ5IENvbnZlcnNhdGlvbkl0ZW0uXG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdGV4dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei51bmlvbihbXG4gICAgICAgIHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvJyksXG4gICAgICAgIHoubGl0ZXJhbCgnaXRlbV9yZWZlcmVuY2UnKSxcbiAgICAgICAgei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ291dHB1dF9hdWRpbycpLFxuICAgIF0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjb250ZW50OiB6LmFycmF5KGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hKS5vcHRpb25hbCgpLFxuICAgIG5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHJvbGU6IHouZW51bShbJ3VzZXInLCAnYXNzaXN0YW50JywgJ3N5c3RlbSddKS5vcHRpb25hbCgpLFxuICAgIHN0YXR1czogei5lbnVtKFsnY29tcGxldGVkJywgJ2luY29tcGxldGUnLCAnaW5fcHJvZ3Jlc3MnXSkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6XG4gICAgICAgIC5lbnVtKFtcbiAgICAgICAgJ21lc3NhZ2UnLFxuICAgICAgICAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICdtY3BfbGlzdF90b29scycsXG4gICAgICAgICdtY3BfdG9vbF9jYWxsJyxcbiAgICAgICAgJ21jcF9jYWxsJyxcbiAgICAgICAgJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgYXBwcm92YWxfcmVxdWVzdF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgYXBwcm92ZTogei5ib29sZWFuKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHJlYXNvbjogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgc2VydmVyX2xhYmVsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRvb2xzOiB6XG4gICAgICAgIC5hcnJheSh6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKSxcbiAgICAgICAgaW5wdXRfc2NoZW1hOiB6LnJlY29yZCh6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5wYXNzdGhyb3VnaCgpKVxuICAgICAgICAub3B0aW9uYWwoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBjb252ZXJzYXRpb246IHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLmNvbnZlcnNhdGlvbicpLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbi8vIEdBIHJlbmFtZTogY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCAtPiBjb252ZXJzYXRpb24uaXRlbS5hZGRlZFxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1BZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG4vLyBHQSBhZGRpdGlvbjogY29udmVyc2F0aW9uLml0ZW0uZG9uZVxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBlcnJvcjogei5vYmplY3Qoe1xuICAgICAgICBjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcGFyYW06IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGVycm9yRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdlcnJvcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXR0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fc3RhcnRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JhdGVfbGltaXRzLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByYXRlX2xpbWl0czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG5hbWU6IHouZW51bShbJ3JlcXVlc3RzJywgJ3Rva2VucyddKS5vcHRpb25hbCgpLFxuICAgICAgICByZW1haW5pbmc6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVzZXRfc2Vjb25kczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIH0pKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfYXVkaW8uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAvLyAgR0EgbWF5IGludHJvZHVjZSByZXNwb25zZS5vdXRwdXRfYXVkaW9fdHJhbnNjcmlwdC5kb25lXG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfYXVkaW9fdHJhbnNjcmlwdC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFydDogei5vYmplY3Qoe1xuICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5lbnVtKFsndGV4dCcsICdhdWRpbyddKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZURvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZTogcmVhbHRpbWVSZXNwb25zZSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIC8vIE5vIHJlbmFtZSBzcGVjaWZpZWQgZm9yIGRvbmU7IGtlZXAgcmVzcG9uc2UudGV4dC5kb25lXG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfdGV4dC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jYW5jZWwnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZTogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBtY3BMaXN0VG9vbHNJblByb2dyZXNzRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5pbl9wcm9ncmVzcycpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzQ29tcGxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbF9hcmd1bWVudHMuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvYmZ1c2NhdGlvbjogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsX2FyZ3VtZW50cy5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VNY3BDYWxsSW5Qcm9ncmVzc0V2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGwuaW5fcHJvZ3Jlc3MnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbENvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGwuY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBtY3BMaXN0VG9vbHNGYWlsZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9saXN0X3Rvb2xzLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIFRoaXMgc2NoZW1hIGlzIHVzZWQgaWYgYW4gZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LiBUaGUgUmVhbHRpbWUgQVBJIG1pZ2h0IGludHJvZHVjZVxuICogbmV3IGV2ZW50cyBhdCBzb21lIHBvaW50IGFuZCB3ZSBzaG91bGQgaGFuZGxlIHRoZW0gZ3JhY2VmdWxseSBieSB0cmVhdGluZyB0aGVtIGFzIGdlbmVyaWMgZXZlbnRzXG4gKiBvbmx5IHJlcXVpcmluZyBhIHR5cGUgYW5kIGFuIG9wdGlvbmFsIGV2ZW50X2lkLlxuICovXG5leHBvcnQgY29uc3QgZ2VuZXJpY0V2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1Eb25lRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEsXG4gICAgZXJyb3JFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgbWNwTGlzdFRvb2xzSW5Qcm9ncmVzc0V2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0ZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lQ2xpZW50RXZlbnRTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbl0pO1xuLyoqXG4gKiBQYXJzZXMgYSByZWFsdGltZSBldmVudCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQsIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIGdlbmVyaWMgZXZlbnQuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGV2ZW50IG9yIG51bGwgaWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVhbHRpbWVFdmVudChldmVudCkge1xuICAgIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YS50b1N0cmluZygpKTtcbiAgICBjb25zdCBwYXJzZWQgPSByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1BhcnNlZCA9IGdlbmVyaWNFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICAgICAgaWYgKGdlbmVyaWNQYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZ2VuZXJpY1BhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZGF0YTogcGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogZmFsc2UgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lRXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCBVc2FnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgdG9OZXdTZXNzaW9uQ29uZmlnLCB9IGZyb20gXCIuL2NsaWVudE1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbSwgcmVhbHRpbWVNY3BDYWxsSXRlbSwgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSwgcmVhbHRpbWVUb29sQ2FsbEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCwgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBhcnJheUJ1ZmZlclRvQmFzZTY0LCBkaWZmUmVhbHRpbWVIaXN0b3J5IH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBtb2RlbCB0aGF0IGlzIHVzZWQgZHVyaW5nIHRoZSBjb25uZWN0aW9uIGlmIG5vIG1vZGVsIGlzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwgPSAnZ3B0LXJlYWx0aW1lJztcbi8qKlxuICogVGhlIGRlZmF1bHQgc2Vzc2lvbiBjb25maWcgdGhhdCBnZXRzIHNlbmQgb3ZlciBkdXJpbmcgc2Vzc2lvbiBjb25uZWN0aW9uIHVubGVzcyBvdmVycmlkZGVuXG4gKiBieSB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHID0ge1xuICAgIG91dHB1dE1vZGFsaXRpZXM6IFsnYXVkaW8nXSxcbiAgICBhdWRpbzoge1xuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgZm9ybWF0OiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9LFxuICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogeyBtb2RlbDogJ2dwdC00by1taW5pLXRyYW5zY3JpYmUnIH0sXG4gICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiB7IHR5cGU6ICdzZW1hbnRpY192YWQnIH0sXG4gICAgICAgICAgICBub2lzZVJlZHVjdGlvbjogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHsgdHlwZTogJ2F1ZGlvL3BjbScsIHJhdGU6IDI0MDAwIH0sXG4gICAgICAgICAgICBzcGVlZDogMSxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZUJhc2UgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgI21vZGVsO1xuICAgICNhcGlLZXk7XG4gICAgI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICNyYXdTZXNzaW9uQ29uZmlnID0gbnVsbDtcbiAgICBldmVudEVtaXR0ZXIgPSBuZXcgUnVudGltZUV2ZW50RW1pdHRlcigpO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUw7XG4gICAgICAgIHRoaXMuI2FwaUtleSA9IG9wdGlvbnMuYXBpS2V5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudE1vZGVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbW9kZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IG1vZGVsIHRoYXQgaXMgYmVpbmcgdXNlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyLlxuICAgICAqICoqTm90ZSoqOiBUaGUgbW9kZWwgY2Fubm90IGJlIGNoYW5nZWQgbWlkIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBzZXQgY3VycmVudE1vZGVsKG1vZGVsKSB7XG4gICAgICAgIHRoaXMuI21vZGVsID0gbW9kZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhvb2sgZm9yIHN1YmNsYXNzZXMgdG8gY2xlYW4gdXAgdHJhbnNwb3J0LXNwZWNpZmljIHN0YXRlIHdoZW4gYXVkaW9cbiAgICAgKiBwbGF5YmFjayBmaW5pc2hlcy4gRGVmYXVsdHMgdG8gYSBuby1vcC5cbiAgICAgKi9cbiAgICBfYWZ0ZXJBdWRpb0RvbmVFdmVudCgpIHtcbiAgICAgICAgLy8gSW50ZW50aW9uYWxseSBlbXB0eS5cbiAgICB9XG4gICAgZ2V0IF9yYXdTZXNzaW9uQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA/PyBudWxsO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0QXBpS2V5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy4jYXBpS2V5O1xuICAgICAgICBpZiAodHlwZW9mIGFwaUtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUtleSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcGlLZXk7XG4gICAgfVxuICAgIF9vbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnKicsIHBhcnNlZCk7XG4gICAgICAgIGlmIChpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBwYXJzZWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQocGFyc2VkLnR5cGUsIHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9zdGFydGVkJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9zdGFydGVkJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLnVwZGF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNyYXdTZXNzaW9uQ29uZmlnID0gcGFyc2VkLnNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UgZG9uZSBldmVudCcsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBpbnB1dFRva2VucyArIG91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VuX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3VzYWdlX3VwZGF0ZScsIHVzYWdlKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9kb25lJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9kb25lJyxcbiAgICAgICAgICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5pZCA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLm91dHB1dCA/PyBbXSxcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VuX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRvbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2RvbmUnKTtcbiAgICAgICAgICAgIHRoaXMuX2FmdGVyQXVkaW9Eb25lRXZlbnQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX2RlbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSB7XG4gICAgICAgICAgICAvLyByaWdodCBub3cgcmF0aGVyIHRoYW4ga2VlcGluZyB0cmFjayBvZiBwYXJ0aWFscyBhbmQgcmVidWlsZGluZyB0aGUgaXRlbSB3ZVxuICAgICAgICAgICAgLy8gd2lsbCByZXRyaWV2ZSBpdCBpbnN0ZWFkIHdoaWNoIHRyaWdnZXJzIHRoZSBgY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkYCBldmVudCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfdGV4dC5kZWx0YScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdF9kZWx0YScsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBwYXJzZWQuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWQnKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgTUNQIGxpc3QgdG9vbHMgaXRlbXMgKG9ubHkgYWN0IHdoZW4gZG9uZSB0byBlbnN1cmUgdG9vbHMgYXJlIHByZXNlbnQpXG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9saXN0X3Rvb2xzJyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJMYWJlbCA9IHBhcnNlZC5pdGVtLnNlcnZlcl9sYWJlbCA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCB0b29scyA9IChwYXJzZWQuaXRlbS50b29scyA/PyBbXSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbHNfbGlzdGVkJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29scyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBlbWl0dGluZyBtY3BfdG9vbHNfbGlzdGVkJywgZXJyLCBwYXJzZWQuaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBhZGQgdGhpcyBpdGVtIHRvIGhpc3Rvcnk7IGl0J3MgYSB0cmFuc3BvcnQtbGV2ZWwgc2lkZS1jaGFubmVsLlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uYWRkZWQnIHx8XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnICYmXG4gICAgICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BBcHByb3ZhbFJlcXVlc3QgPSByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckxhYmVsOiBpdGVtLnNlcnZlcl9sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IEpTT04ucGFyc2UoaXRlbS5hcmd1bWVudHMgfHwgJ3t9JyksXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmVkOiBpdGVtLmFwcHJvdmVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BBcHByb3ZhbFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLCBtY3BBcHByb3ZhbFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX3Rvb2xfY2FsbCcgfHxcbiAgICAgICAgICAgICAgICBwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJ1xuICAgICAgICAgICAgICAgICAgICA/ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgIDogJ2luX3Byb2dyZXNzJztcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BDYWxsID0gcmVhbHRpbWVNY3BDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBwYXJzZWQuaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnNlZC5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcGFyc2VkLml0ZW0ub3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BDYWxsKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5tY3BfY2FsbC5pbl9wcm9ncmVzcycpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQ7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdtY3BfbGlzdF90b29scy5pbl9wcm9ncmVzcycpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQ7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtX2lkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkLml0ZW07XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcgJiYgaXRlbS5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbENhbGwgPSByZWFsdGltZVRvb2xDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsIC8vIHdlIHNldCBpdCB0byBpbl9wcm9ncmVzcyBmb3IgdGhlIFVJIGFzIGl0IHdpbGwgb25seSBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBudWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCB0b29sQ2FsbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdmdW5jdGlvbl9jYWxsJywge1xuICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IGl0ZW0uY2FsbF9pZCA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtY3BfdG9vbF9jYWxsJyB8fCBpdGVtLnR5cGUgPT09ICdtY3BfY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BDYWxsID0gcmVhbHRpbWVNY3BDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2NvbXBsZXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IGl0ZW0ub3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BDYWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsdGltZUl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpdGVtLnN0YXR1cyA/PyAnY29tcGxldGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogKGl0ZW0uc3RhdHVzID8/ICdpbl9wcm9ncmVzcycpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCByZWFsdGltZUl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX29uT3BlbigpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgX29uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZGlzY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcgaXRlbSBpbiB0aGUgY29udmVyc2F0aW9uIGFuZFxuICAgICAqIHRyaWdnZXIgYSByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3RoZXJFdmVudERhdGEgLSBBZGRpdGlvbmFsIGV2ZW50IGRhdGEgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF90ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiBtZXNzYWdlLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ2lucHV0X2ltYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2ltYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogY29udGVudC5pbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihjb250ZW50LnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vdGhlckV2ZW50RGF0YSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0cmlnZ2VyUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgY29udGVudDogW3sgdHlwZTogJ2lucHV0X2ltYWdlJywgaW1hZ2UgfV0sXG4gICAgICAgIH0sIHt9LCB7IHRyaWdnZXJSZXNwb25zZSB9KTtcbiAgICB9XG4gICAgX2dldE1lcmdlZFNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHRvTmV3U2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG5ld0NvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogbmV3Q29uZmlnLm1vZGVsID8/IHRoaXMuI21vZGVsLFxuICAgICAgICAgICAgb3V0cHV0X21vZGFsaXRpZXM6IG5ld0NvbmZpZy5vdXRwdXRNb2RhbGl0aWVzID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcub3V0cHV0TW9kYWxpdGllcyxcbiAgICAgICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py5mb3JtYXQgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5pbnB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBub2lzZV9yZWR1Y3Rpb246IG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py50cmFuc2NyaXB0aW9uID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LnRyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIHR1cm5fZGV0ZWN0aW9uOiBPcGVuQUlSZWFsdGltZUJhc2UuYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24pID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0ID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiBuZXdDb25maWcuYXVkaW8/Lm91dHB1dD8udm9pY2UgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlLFxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnNwZWVkID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py5zcGVlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBuZXdDb25maWcudG9vbENob2ljZSA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLnRvb2xDaG9pY2UsXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihuZXdDb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG5ld0NvbmZpZy5wcm9tcHQpIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLnByb21wdCA9IHtcbiAgICAgICAgICAgICAgICBpZDogbmV3Q29uZmlnLnByb21wdC5wcm9tcHRJZCxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBuZXdDb25maWcucHJvbXB0LnZlcnNpb24sXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiBuZXdDb25maWcucHJvbXB0LnZhcmlhYmxlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld0NvbmZpZy50b29scyAmJiBuZXdDb25maWcudG9vbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2Vzc2lvbkRhdGEudG9vbHMgPSBuZXdDb25maWcudG9vbHMubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZCB0aGUgcGF5bG9hZCBvYmplY3QgZXhwZWN0ZWQgYnkgdGhlIFJlYWx0aW1lIEFQSSB3aGVuIGNyZWF0aW5nIG9yIHVwZGF0aW5nIGEgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIFRoZSBoZWxwZXIgY2VudHJhbGlzZXMgdGhlIGNvbnZlcnNpb24gZnJvbSBjYW1lbENhc2UgcnVudGltZSBjb25maWcgdG8gdGhlIHNuYWtlX2Nhc2UgcGF5bG9hZFxuICAgICAqIHJlcXVpcmVkIGJ5IHRoZSBSZWFsdGltZSBBUEkgc28gdHJhbnNwb3J0cyB0aGF0IG5lZWQgYSBvbmUtb2ZmIHBheWxvYWQgKGZvciBleGFtcGxlIFNJUCBjYWxsXG4gICAgICogYWNjZXB0YW5jZSkgY2FuIHJldXNlIHRoZSBzYW1lIGxvZ2ljIHdpdGhvdXQgZHVwbGljYXRpbmcgcHJpdmF0ZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gbWVyZ2Ugd2l0aCBkZWZhdWx0cy5cbiAgICAgKi9cbiAgICBidWlsZFNlc3Npb25QYXlsb2FkKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgIH1cbiAgICBzdGF0aWMgYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKGMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIGNyZWF0ZVJlc3BvbnNlLCBjcmVhdGVfcmVzcG9uc2UsIGVhZ2VybmVzcywgaW50ZXJydXB0UmVzcG9uc2UsIGludGVycnVwdF9yZXNwb25zZSwgcHJlZml4UGFkZGluZ01zLCBwcmVmaXhfcGFkZGluZ19tcywgc2lsZW5jZUR1cmF0aW9uTXMsIHNpbGVuY2VfZHVyYXRpb25fbXMsIHRocmVzaG9sZCwgaWRsZVRpbWVvdXRNcywgaWRsZV90aW1lb3V0X21zLCAuLi5yZXN0IH0gPSBjO1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY3JlYXRlX3Jlc3BvbnNlOiBjcmVhdGVSZXNwb25zZSA/IGNyZWF0ZVJlc3BvbnNlIDogY3JlYXRlX3Jlc3BvbnNlLFxuICAgICAgICAgICAgZWFnZXJuZXNzLFxuICAgICAgICAgICAgaW50ZXJydXB0X3Jlc3BvbnNlOiBpbnRlcnJ1cHRSZXNwb25zZVxuICAgICAgICAgICAgICAgID8gaW50ZXJydXB0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICA6IGludGVycnVwdF9yZXNwb25zZSxcbiAgICAgICAgICAgIHByZWZpeF9wYWRkaW5nX21zOiBwcmVmaXhQYWRkaW5nTXMgPyBwcmVmaXhQYWRkaW5nTXMgOiBwcmVmaXhfcGFkZGluZ19tcyxcbiAgICAgICAgICAgIHNpbGVuY2VfZHVyYXRpb25fbXM6IHNpbGVuY2VEdXJhdGlvbk1zXG4gICAgICAgICAgICAgICAgPyBzaWxlbmNlRHVyYXRpb25Nc1xuICAgICAgICAgICAgICAgIDogc2lsZW5jZV9kdXJhdGlvbl9tcyxcbiAgICAgICAgICAgIGlkbGVfdGltZW91dF9tczogaWRsZVRpbWVvdXRNcyA/IGlkbGVUaW1lb3V0TXMgOiBpZGxlX3RpbWVvdXRfbXMsXG4gICAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9O1xuICAgICAgICAvLyBSZW1vdmUgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIHRoZSBjb25maWdcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWdba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25maWdba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjb25maWcpLmxlbmd0aCA+IDAgPyBjb25maWcgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGludGVybmFsIHRyYWNpbmcgY29uZmlnLiBUaGlzIGlzIHVzZWQgdG8gdHJhY2sgdGhlIHRyYWNpbmcgY29uZmlnIHRoYXQgaGFzIGJlZW4gc2V0XG4gICAgICogZHVyaW5nIHRoZSBzZXNzaW9uLmNyZWF0ZSBldmVudC5cbiAgICAgKi9cbiAgICBzZXQgX3RyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gdHJhY2luZ0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdHJhY2luZyBjb25maWcgZm9yIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgc2VuZCB0aGUgdHJhY2luZyBjb25maWcgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFjaW5nQ29uZmlnIC0gVGhlIHRyYWNpbmcgY29uZmlnIHRvIHNldC4gV2UgZG9uJ3Qgc3VwcG9ydCAnYXV0bycgaGVyZSBhcyB0aGUgU0RLIHdpbGwgYWx3YXlzIGNvbmZpZ3VyZSBhIFdvcmtmbG93IE5hbWUgdW5sZXNzIGl0IGV4aXN0c1xuICAgICAqL1xuICAgIF91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gdHJlYXRpbmcgaXQgYXMgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgLy8gdHVybiBvbiB0cmFjaW5nIGluIGF1dG8gbW9kZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnICE9PSBudWxsICYmXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBhbHJlYWR5IHNldCwgd2UgY2FuJ3QgY2hhbmdlIGl0XG4gICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2luZyBjb25maWcgaXMgYWxyZWFkeSBzZXQsIHNraXBwaW5nIHNldHRpbmcgaXQgYWdhaW4uIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSBudWxsKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0Rpc2FibGluZyB0cmFjaW5nIGZvciB0aGlzIHNlc3Npb24uIEl0IGNhbm5vdCBiZSB0dXJuZWQgb24gZm9yIHRoaXMgc2Vzc2lvbiBmcm9tIHRoaXMgcG9pbnQgb24uJyk7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnID09PSBudWxsIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgY3VycmVudGx5IG5vdCBzZXQgc28gd2UgY2FuIHNldCBpdCB0byB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/Lm1ldGFkYXRhICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ01pc21hdGNoIGluIHRyYWNpbmcgY29uZmlnLiBJZ25vcmluZyB0aGUgbmV3IHRyYWNpbmcgY29uZmlnLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4gQ3VycmVudCB0cmFjaW5nIGNvbmZpZzogJXMsIG5ldyB0cmFjaW5nIGNvbmZpZzogJXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiN0cmFjaW5nQ29uZmlnKSwgSlNPTi5zdHJpbmdpZnkodHJhY2luZ0NvbmZpZykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNlc3Npb24gY29uZmlnLiBUaGlzIHdpbGwgbWVyZ2UgaXQgd2l0aCB0aGUgY3VycmVudCBzZXNzaW9uIGNvbmZpZyB3aXRoIHRoZSBkZWZhdWx0XG4gICAgICogdmFsdWVzIGFuZCBzZW5kIGl0IHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gVGhlIHNlc3Npb24gY29uZmlnIHRvIHVwZGF0ZS5cbiAgICAgKi9cbiAgICB1cGRhdGVTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHRoaXMuYnVpbGRTZXNzaW9uUGF5bG9hZChjb25maWcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbkRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBvdXRwdXQgb2YgYSBmdW5jdGlvbiBjYWxsIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbENhbGwgLSBUaGUgdG9vbCBjYWxsIHRvIHNlbmQgdGhlIG91dHB1dCBmb3IuXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHN0YXJ0UmVzcG9uc2UgLSBXaGV0aGVyIHRvIHN0YXJ0IGEgbmV3IHJlc3BvbnNlIGFmdGVyIHNlbmRpbmcgdGhlIG91dHB1dC5cbiAgICAgKi9cbiAgICBzZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHN0YXJ0UmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkOiB0b29sQ2FsbC5wcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHRvb2xDYWxsLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHRvb2wgY2FsbCBpdGVtJywgZXJyb3IsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gSWYgYHsgY29tbWl0OiB0cnVlIH1gIGlzIHBhc3NlZCwgdGhlIGF1ZGlvIGJ1ZmZlclxuICAgICAqIHdpbGwgYmUgY29tbWl0dGVkIGFuZCB0aGUgbW9kZWwgd2lsbCBzdGFydCBwcm9jZXNzaW5nIGl0LiBUaGlzIGlzIG5lY2Vzc2FyeSBpZiB5b3UgaGF2ZVxuICAgICAqIGRpc2FibGVkIHR1cm4gZGV0ZWN0aW9uIC8gdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCB7IGNvbW1pdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcsXG4gICAgICAgICAgICBhdWRpbzogYXJyYXlCdWZmZXJUb0Jhc2U2NChhdWRpbyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWl0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi4gVGhpcyB3aWxsIGNyZWF0ZSBhIGRpZmYgYmV0d2VlbiB0aGUgb2xkIGFuZCBuZXcgaGlzdG9yeVxuICAgICAqIGFuZCBzZW5kIHRoZSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBSZWFsdGltZSBBUEkgdG8gdXBkYXRlIHRoZSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHJlc2V0SGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcmVtb3ZhbHMsIGFkZGl0aW9ucywgdXBkYXRlcyB9ID0gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KTtcbiAgICAgICAgY29uc3QgcmVtb3ZhbElkcyA9IG5ldyBTZXQocmVtb3ZhbHMubWFwKChpdGVtKSA9PiBpdGVtLml0ZW1JZCkpO1xuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGFuIHVwZGF0ZSBldmVudCBmb3IgaXRlbXMgc28gd2Ugd2lsbCByZW1vdmUgYW5kIHJlLWFkZCB3aGF0J3MgdGhlcmVcbiAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuICAgICAgICAgICAgcmVtb3ZhbElkcy5hZGQodXBkYXRlLml0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92YWxJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbUlkIG9mIHJlbW92YWxJZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkaXRpb25zQW5kVXBkYXRlcyA9IFsuLi5hZGRpdGlvbnMsIC4uLnVwZGF0ZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGFkZGl0aW9uIG9mIGFkZGl0aW9uc0FuZFVwZGF0ZXMpIHtcbiAgICAgICAgICAgIGlmIChhZGRpdGlvbi50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogYWRkaXRpb24ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYWRkaXRpb24uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGFkZGl0aW9uLml0ZW1JZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbi5yb2xlICE9PSAnc3lzdGVtJyAmJiBhZGRpdGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVudHJ5LnN0YXR1cyA9IGFkZGl0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbUVudHJ5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Z1bmN0aW9uIGNhbGxzIGNhbm5vdCBiZSBtYW51YWxseSBhZGRlZCBvciB1cGRhdGVkIGF0IHRoZSBtb21lbnQuIElnbm9yaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRNY3BSZXNwb25zZShhcHByb3ZhbFJlcXVlc3QsIGFwcHJvdmVkKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgcHJldmlvdXNfaXRlbV9pZDogYXBwcm92YWxSZXF1ZXN0Lml0ZW1JZCxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3Jlc3BvbnNlJyxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlcXVlc3QuaXRlbUlkLFxuICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVCYXNlLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgSEVBREVSUyB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViUlRDLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXQgY2FuXG4gKiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqXG4gKiBVbmxlc3MgeW91IHNwZWNpZnkgYSBgbWVkaWFTdHJlYW1gIG9yIGBhdWRpb0VsZW1lbnRgIG9wdGlvbiwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGUgbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlJUQyBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgb3B0aW9ucztcbiAgICAjdXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgY2FsbElkOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICNtdXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMuYmFzZVVybCA/PyBgaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZS9jYWxsc2A7XG4gICAgICAgIHRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ID0gb3B0aW9ucy51c2VJbnNlY3VyZUFwaUtleSA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY2FsbCBJRCBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNhbGxJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLmNhbGxJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuc3RhdHVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbmNsdWRpbmcgdGhlIHBlZXIgY29ubmVjdGlvbiBhbmQgZGF0YVxuICAgICAqIGNoYW5uZWwuXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI211dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE9wZW5BSSBSZWFsdGltZSBBUElcbiAgICAgKiB2aWEgV2ViUlRDLlxuICAgICAqXG4gICAgICogSWYgeW91IGFyZSB1c2luZyBhIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICAgICAqIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RpbmcnKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignUmVhbHRpbWUgY29ubmVjdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzLiBQbGVhc2UgYXdhaXQgb3JpZ2luYWwgcHJvbWlzZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IG9wdGlvbnMudXJsID8/IHRoaXMuI3VybDtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBpc0NsaWVudEtleSA9IHR5cGVvZiBhcGlLZXkgPT09ICdzdHJpbmcnICYmIGFwaUtleS5zdGFydHNXaXRoKCdla18nKTtcbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkgJiYgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ICYmICFpc0NsaWVudEtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVXNpbmcgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudCByZXF1aXJlcyBhbiBlcGhlbWVyYWwgY2xpZW50IGtleS4gSWYgeW91IG5lZWQgdG8gdXNlIGEgcmVndWxhciBBUEkga2V5LCB1c2UgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgb3Igc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJTZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25VcmwgPSBuZXcgVVJMKGJhc2VVcmwpO1xuICAgICAgICAgICAgICAgIGxldCBwZWVyQ29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFDaGFubmVsID0gcGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwoJ29haS1ldmVudHMnKTtcbiAgICAgICAgICAgICAgICBsZXQgY2FsbElkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIgPSAoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Rpc2Nvbm5lY3RlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjbG9zZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICdjb25uZWN0ZWQnIHN0YXRlIGlzIGhhbmRsZWQgYnkgZGF0YUNoYW5uZWwub25vcGVuLiBTbyB3ZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpdCBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICduZXcnIGFuZCAnY29ubmVjdGluZycgYXJlIGludGVybWVkaWF0ZSBzdGF0ZXMgYW5kIGRvIG5vdCByZXF1aXJlIGFjdGlvbiBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlcihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbmRpbmcgdGhlIHNlc3Npb24gY29uZmlnIGFnYWluIGhlcmUgb25jZSB0aGUgY2hhbm5lbCBpcyBjb25uZWN0ZWQgdG8gZW5zdXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhlIHNlc3Npb24gY29uZmlnIGlzIHNlbnQgdG8gdGhlIHNlcnZlciBiZWZvcmUgdGhlIGZpcnN0IHJlc3BvbnNlIGlzIHJlY2VpdmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgaXQgb24gY29ubmVjdGlvbiBzaG91bGQgd29yayBidXQgdGhlIGNvbmZpZyBpcyBub3QgYmVpbmcgdmFsaWRhdGVkIG9uIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBzZXJ2ZXIuIFRoaXMgdHJpZ2dlcnMgYSB2YWxpZGF0aW9uIGVycm9yIGlmIHRoZSBjb25maWcgaXMgbm90IHZhbGlkLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcodXNlclNlc3Npb25Db25maWcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhY2luZ0NvbmZpZyA9IHBhcnNlZC5zZXNzaW9uLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnlpbmcgdG8gdHVybiBvbiB0cmFjaW5nIGFmdGVyIHRoZSBzZXNzaW9uIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0eXBlb2YgdXNlclNlc3Npb25Db25maWcudHJhY2luZyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdXNlclNlc3Npb25Db25maWcudHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgYXVkaW8gcGxheWJhY2tcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXVkaW9FbGVtZW50ID8/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBldmVudC5zdHJlYW1zWzBdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gZ2V0IG1pY3JvcGhvbmUgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5vcHRpb25zLm1lZGlhU3RyZWFtID8/XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUGVlckNvbm5lY3Rpb24gPSBwZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsUGVlckNvbm5lY3Rpb24gIT09IHBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFBlZXJDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7IC4uLnRoaXMuI3N0YXRlLCBwZWVyQ29ubmVjdGlvbiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFvZmZlci5zZHApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG9mZmVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNkcFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY29ubmVjdGlvblVybCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogb2ZmZXIuc2RwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3NkcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IEhFQURFUlNbJ1gtT3BlbkFJLUFnZW50cy1TREsnXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjYWxsSWQgPSBzZHBSZXNwb25zZS5oZWFkZXJzPy5nZXQoJ0xvY2F0aW9uJyk/LnNwbGl0KCcvJykucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7IC4uLnRoaXMuI3N0YXRlLCBjYWxsSWQgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgICAgICAgICAgICAgICBzZHA6IGF3YWl0IHNkcFJlc3BvbnNlLnRleHQoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLmRhdGFDaGFubmVsIHx8XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGRhdGEgY2hhbm5lbCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSBvciB1bm11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzZW5kZXIudHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrLmVuYWJsZWQgPSAhbXV0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJIGFuZCBkaXNjb25uZWN0cyB0aGUgdW5kZXJseWluZyBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2s/LnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzICE9PSAnZGlzY29ubmVjdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBjdXJyZW50IHJlc3BvbnNlIGlmIG9uZSBpcyBvbmdvaW5nIGFuZCBjbGVhciB0aGUgYXVkaW8gYnVmZmVyIHNvIHRoYXQgdGhlIGFnZW50XG4gICAgICogc3RvcHMgdGFsa2luZy5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXInLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmV4cG9ydCBjb25zdCBXZWJTb2NrZXQgPSBnbG9iYWxUaGlzLldlYlNvY2tldDtcbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBjb25zdCB1c2VXZWJTb2NrZXRQcm90b2NvbHMgPSB0cnVlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hpbXMtYnJvd3Nlci5tanMubWFwIiwiaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQsIHVzZVdlYlNvY2tldFByb3RvY29scywgV2ViU29ja2V0LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL19zaGltcyc7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgYmFzZTY0VG9BcnJheUJ1ZmZlciwgSEVBREVSUywgV0VCU09DS0VUX01FVEEgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJTb2NrZXRzLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXRcbiAqIGNhbiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICAjYXBpS2V5O1xuICAgICN1cmw7XG4gICAgI2RlZmF1bHRVcmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjY3VycmVudEl0ZW1JZDtcbiAgICAjY3VycmVudEF1ZGlvQ29udGVudEluZGV4O1xuICAgIC8qKlxuICAgICAqIFRpbWVzdGFtcCBtYWludGFpbmVkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIgdG8gYWlkIHdpdGggdGhlIGNhbGN1bGF0aW9uIG9mIHRoZSBlbGFwc2VkIHRpbWVcbiAgICAgKiBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZCB0byBjb21wdXRlIHRoZSByaWdodCBpbnRlcnJ1cHRpb24gdGltZS5cbiAgICAgKlxuICAgICAqIE1vc3RseSBpbnRlcm5hbCBidXQgbWlnaHQgYmUgdXNlZCBieSBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXJzIGZvciB0aGVpciBpbnRlcnJ1cHRpb25cbiAgICAgKiBjYWxjdWxhdGlvbi5cbiAgICAgKi9cbiAgICBfZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICBfYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICNjcmVhdGVXZWJTb2NrZXQ7XG4gICAgI3NraXBPcGVuRXZlbnRMaXN0ZW5lcnM7XG4gICAgI3Jlc2V0QXVkaW9QbGF5YmFja1N0YXRlKCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLiNkZWZhdWx0VXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgIHRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ID0gb3B0aW9ucy51c2VJbnNlY3VyZUFwaUtleSA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy4jY3JlYXRlV2ViU29ja2V0ID0gb3B0aW9ucy5jcmVhdGVXZWJTb2NrZXQ7XG4gICAgICAgIHRoaXMuI3NraXBPcGVuRXZlbnRMaXN0ZW5lcnMgPSBvcHRpb25zLnNraXBPcGVuRXZlbnRMaXN0ZW5lcnMgPz8gZmFsc2U7XG4gICAgfVxuICAgIGdldENvbW1vblJlcXVlc3RIZWFkZXJzKCkge1xuICAgICAgICByZXR1cm4gSEVBREVSUztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuc3RhdHVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsd2F5cyByZXR1cm5zIGBudWxsYCBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBoYW5kbGUgbXV0aW5nLiBJbnN0ZWFkLFxuICAgICAqIHRoaXMgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIGNsaWVudCBieSBub3QgdHJpZ2dlcmluZyB0aGUgYHNlbmRBdWRpb2AgbWV0aG9kLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGl0ZW0gSUQgb2YgdGhlIG9uZ29pbmcgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRJdGVtSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50SXRlbUlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyB0aGUgYGF1ZGlvYCBldmVudCB0aGF0IGEgY2xpZW50IG1pZ2h0IGxpc3RlbiB0byB0byByZWNlaXZlIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICogUHJvdGVjdGVkIGZvciB5b3UgdG8gYmUgYWJsZSB0byBvdmVycmlkZSBhbmQgZGlzYWJsZSBlbWl0dGluZyB0aGlzIGV2ZW50IGluIGNhc2UgeW91ciBleHRlbmRlZFxuICAgICAqIHRyYW5zcG9ydCBsYXllciBoYW5kbGVzIGF1ZGlvIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW9FdmVudCAtIFRoZSBhdWRpbyBldmVudCB0byBlbWl0LlxuICAgICAqL1xuICAgIF9vbkF1ZGlvKGF1ZGlvRXZlbnQpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdhdWRpbycsIGF1ZGlvRXZlbnQpO1xuICAgIH1cbiAgICBfYWZ0ZXJBdWRpb0RvbmVFdmVudCgpIHtcbiAgICAgICAgdGhpcy4jcmVzZXRBdWRpb1BsYXliYWNrU3RhdGUoKTtcbiAgICB9XG4gICAgYXN5bmMgI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLiNhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FQSSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNhbGwgYGNvbm5lY3QoKWAgd2l0aCBhbiBBUEkga2V5IGZpcnN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmXG4gICAgICAgICAgICAhdGhpcy4jYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpICYmXG4gICAgICAgICAgICAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBoYXZlIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3cyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLiNjcmVhdGVXZWJTb2NrZXQpIHtcbiAgICAgICAgICAgIHdzID0gYXdhaXQgdGhpcy4jY3JlYXRlV2ViU29ja2V0KHtcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuI3VybCxcbiAgICAgICAgICAgICAgICBhcGlLZXk6IHRoaXMuI2FwaUtleSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYnJvd3NlcnMgYW5kIHdvcmtlcmQgc2hvdWxkIHVzZSB0aGUgcHJvdG9jb2xzIGFyZ3VtZW50LCBub2RlIHNob3VsZCB1c2UgdGhlIGhlYWRlcnMgYXJndW1lbnRcbiAgICAgICAgICAgIGNvbnN0IHdlYnNvY2tldEFyZ3VtZW50cyA9IHVzZVdlYlNvY2tldFByb3RvY29sc1xuICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICAvLyBBdXRoXG4gICAgICAgICAgICAgICAgICAgICdvcGVuYWktaW5zZWN1cmUtYXBpLWtleS4nICsgdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICBXRUJTT0NLRVRfTUVUQSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiNhcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0Q29tbW9uUmVxdWVzdEhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHRoaXMuI3VybCwgd2Vic29ja2V0QXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgIGNvbnN0IG9uU29ja2V0T3BlblJlYWR5ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLiNza2lwT3BlbkV2ZW50TGlzdGVuZXJzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBvblNvY2tldE9wZW5SZWFkeSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIG9uU29ja2V0T3BlblJlYWR5KTtcbiAgICAgICAgfVxuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHBhcnNlZC5jb250ZW50X2luZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSBwYXJzZWQuaXRlbV9pZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBzdGFydCB0aW1lc3RhbXAgaXMgbm90IHNldCwgd2Ugc2V0IGl0IHRvIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGVsYXBzZWQgdGltZSBmb3IgaW50ZXJydXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmYgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHBhcnNlZC5kZWx0YSk7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhdWRpbyBsZW5ndGggaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgLy8gR0EgZm9ybWF0OiBzZXNzaW9uLmF1ZGlvLm91dHB1dC5mb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCB7IHR5cGU6IFwiYXVkaW8vcGNtXCIsIHJhdGUgfSBvciBcImF1ZGlvL3BjbXVcIiBldGMuXG4gICAgICAgICAgICAgICAgY29uc3QgZm10ID0gdGhpcy5fcmF3U2Vzc2lvbkNvbmZpZz8uYXVkaW8/Lm91dHB1dD8uZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChmbXQgJiYgdHlwZW9mIGZtdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RydWN0dXJlZCBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZtdC50eXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gJ2F1ZGlvL3BjbXUnIHx8IHQgPT09ICdhdWRpby9wY21hJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gOGtIeiwgMSBieXRlIHBlciBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gODtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09PSAnYXVkaW8vcGNtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0ZSA9IGZtdC5yYXRlID8/IDI0MDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnl0ZXMgLT4gc2FtcGxlcyAoMiBieXRlcyBwZXIgc2FtcGxlKSAtPiBtc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSAoYnVmZi5ieXRlTGVuZ3RoIC8gMiAvIHJhdGUpICogMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGFzc3VtcHRpb24gc2ltaWxhciB0byBsZWdhY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBmbXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmbXQuc3RhcnRzV2l0aCgnZzcxMV8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyA4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXNzdW1lIDI0a0h6IFBDTTE2XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCB0byAyNGtIeiBQQ00xNiBiZWhhdmlvciBpZiB1bnNwZWNpZmllZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYnVmZixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fb25BdWRpbyhhdWRpb0V2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCA9IHRoaXMuX3Jhd1Nlc3Npb25Db25maWc/LmF1ZGlvPy5pbnB1dD8udHVybl9kZXRlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPy5pbnRlcnJ1cHRfcmVzcG9uc2UgPz8gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoIWF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0eXBlb2Ygc2Vzc2lvbkNvbmZpZy50cmFjaW5nID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICA6IHNlc3Npb25Db25maWcudHJhY2luZztcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsSWQgPSBvcHRpb25zLmNhbGxJZDtcbiAgICAgICAgbGV0IHVybDtcbiAgICAgICAgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICAgICAgICB1cmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgICAgIHRoaXMuI2RlZmF1bHRVcmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWxsSWQpIHtcbiAgICAgICAgICAgIHVybCA9IGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9jYWxsX2lkPSR7Y2FsbElkfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4jZGVmYXVsdFVybCkge1xuICAgICAgICAgICAgdXJsID0gdGhpcy4jZGVmYXVsdFVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVybCA9IGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9tb2RlbD0ke3RoaXMuY3VycmVudE1vZGVsfWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdXJsID0gdXJsO1xuICAgICAgICBjb25zdCBzZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcoc2Vzc2lvbkNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgYWxzbyByZXNldCBhbnkgaW50ZXJuYWwgY29ubmVjdGlvbiB0cmFja2luZyB1c2VkIGZvciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldD8uY2xvc2UoKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2lsbCB0aHJvdyBhbiBlcnJvciBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBtdXRlKF9tdXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011dGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQuIFlvdSBoYXZlIHRvIG11dGUgdGhlIGF1ZGlvIGlucHV0IHlvdXJzZWxmLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgZm9yIHlvdXIgY2xpZW50IHRvIHNlbmQgYXVkaW8gdG8gdGhlXG4gICAgICogbW9kZWwgdG8gcmVzcG9uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICBzdXBlci5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBjYW5jZWwgcmVzcG9uc2UgZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIHRvIGNhbmNlbCBhbiBvbmdvaW5nXG4gICAgICogIHJlc3BvbnNlIHRoYXQgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBnZW5lcmF0aW5nLlxuICAgICAqL1xuICAgIF9jYW5jZWxSZXNwb25zZSgpIHtcbiAgICAgICAgLy8gY2FuY2VsIHRoZSBvbmdvaW5nIHJlc3BvbnNlXG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRG8gTk9UIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIENhbGwgYGludGVycnVwdCgpYCBpbnN0ZWFkIGZvciBwcm9wZXIgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZW5kIHRoZSByaWdodCBldmVudHMgdG8gdGhlIEFQSSB0byBpbmZvcm0gdGhlIG1vZGVsIHRoYXQgdGhlIHVzZXIgaGFzXG4gICAgICogaW50ZXJydXB0ZWQgdGhlIHJlc3BvbnNlLiBJdCBtaWdodCBiZSBvdmVycmlkZGVuL2V4dGVuZGVkIGJ5IGFuIGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllci4gU2VlXG4gICAgICogdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYCBmb3IgYW4gZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGFwc2VkVGltZSAtIFRoZSBlbGFwc2VkIHRpbWUgc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQuXG4gICAgICovXG4gICAgX2ludGVycnVwdChlbGFwc2VkVGltZSwgY2FuY2VsT25nb2luZ1Jlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgZW1pdCB0aGlzIGV2ZW50IHNvIHRoZSBjbGllbnQgY2FuIHN0b3AgcGxheWluZyBhdWRpb1xuICAgICAgICBpZiAoY2FuY2VsT25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxSZXNwb25zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICAvLyBhdWRpb19lbmRfbXMgbXVzdCBiZSBhbiBpbnRlZ2VyXG4gICAgICAgIGNvbnN0IGF1ZGlvX2VuZF9tcyA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3IoTWF0aC5taW4oZWxhcHNlZFRpbWUsIGxlbmd0aCkpKTtcbiAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19pbnRlcnJ1cHRlZCcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnLFxuICAgICAgICAgICAgaXRlbV9pZDogdGhpcy4jY3VycmVudEl0ZW1JZCxcbiAgICAgICAgICAgIGNvbnRlbnRfaW5kZXg6IHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCxcbiAgICAgICAgICAgIGF1ZGlvX2VuZF9tcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgb25nb2luZyByZXNwb25zZS4gVGhpcyBtZXRob2QgaXMgdHJpZ2dlcmVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGNsaWVudCB3aGVuXG4gICAgICogdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpIGlzIGVuYWJsZWQgKGRlZmF1bHQpIGFzIHdlbGwgYXMgd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIGdvdFxuICAgICAqIHRyaWdnZXJlZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYWxzbyBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IGlmIHlvdSB3YW50IHRvIGludGVycnVwdCB0aGUgY29udmVyc2F0aW9uIGZvciBleGFtcGxlXG4gICAgICogYmFzZWQgb24gYW4gZXZlbnQgaW4gdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoY2FuY2VsT25nb2luZ1Jlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuI2N1cnJlbnRJdGVtSWQgfHwgdHlwZW9mIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVycnVwdChlbGFwc2VkVGltZSwgY2FuY2VsT25nb2luZ1Jlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZSgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBVc2VyRXJyb3IsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MID0gU3ltYm9sKCdiYWNrZ3JvdW5kUmVzdWx0Jyk7XG5leHBvcnQgZnVuY3Rpb24gYmFja2dyb3VuZFJlc3VsdChjb250ZW50KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgW0JBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTF06IHRydWUsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0JhY2tncm91bmRSZXN1bHQocmVzdWx0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICByZXN1bHQgIT09IG51bGwgJiZcbiAgICAgICAgQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MIGluIHJlc3VsdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFJlYWx0aW1lVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgKHRvb2wudHlwZSA9PT0gJ2hvc3RlZF90b29sJyAmJiB0b29sLm5hbWUgPT09ICdob3N0ZWRfbWNwJykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRvUmVhbHRpbWVUb29sRGVmaW5pdGlvbih0b29sKSB7XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbDtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2hvc3RlZF90b29sJyAmJiB0b29sLm5hbWUgPT09ICdob3N0ZWRfbWNwJykge1xuICAgICAgICBjb25zdCBzZXJ2ZXJVcmwgPSB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfdXJsICYmIHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl91cmwubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfdXJsXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgc2VydmVyX2xhYmVsOiB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICBzZXJ2ZXJfdXJsOiBzZXJ2ZXJVcmwsXG4gICAgICAgICAgICBoZWFkZXJzOiB0b29sLnByb3ZpZGVyRGF0YS5oZWFkZXJzLFxuICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9vbC5wcm92aWRlckRhdGEuYWxsb3dlZF90b29scyxcbiAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHRvb2wucHJvdmlkZXJEYXRhLnJlcXVpcmVfYXBwcm92YWwsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbCB0eXBlOiAke3Rvb2x9YCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFJ1bkNvbnRleHQsIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgaXNab2RPYmplY3QsIHRvU21hcnRTdHJpbmcgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbmltcG9ydCB7IGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsLCBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncywgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlJUQyB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmltcG9ydCB7IGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0sIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSwgaGFzV2ViUlRDU3VwcG9ydCwgcmVhbHRpbWVBcHByb3ZhbEl0ZW1Ub0FwcHJvdmFsSXRlbSwgdXBkYXRlUmVhbHRpbWVIaXN0b3J5LCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBpc0JhY2tncm91bmRSZXN1bHQsIGlzVmFsaWRSZWFsdGltZVRvb2wsIHRvUmVhbHRpbWVUb29sRGVmaW5pdGlvbiwgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuZnVuY3Rpb24gY2xvbmVEZWZhdWx0U2Vzc2lvbkNvbmZpZygpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRykpO1xufVxuLyoqXG4gKiBBIGBSZWFsdGltZVNlc3Npb25gIGlzIHRoZSBjb3JuZXJzdG9uZSBvZiBidWlsZGluZyBWb2ljZSBBZ2VudHMuIEl0J3MgdGhlIGVxdWl2YWxlbnQgb2YgYVxuICogUnVubmVyIGluIHRleHQtYmFzZWQgYWdlbnRzIGV4Y2VwdCB0aGF0IGl0IGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBtdWx0aXBsZSB0dXJucyBieSBtYWludGFpbmluZyBhXG4gKiBjb25uZWN0aW9uIHdpdGggdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIFRoZSBzZXNzaW9uIGhhbmRsZXMgbWFuYWdpbmcgdGhlIGxvY2FsIGhpc3RvcnkgY29weSwgZXhlY3V0ZXMgdG9vbHMsIHJ1bnMgb3V0cHV0IGd1YXJkcmFpbHMsIGFuZFxuICogZmFjaWxpdGF0ZXMgaGFuZG9mZnMuXG4gKlxuICogVGhlIGFjdHVhbCBhdWRpbyBoYW5kbGluZyBhbmQgZ2VuZXJhdGlvbiBvZiBtb2RlbCByZXNwb25zZXMgaXMgaGFuZGxlZCBieSB0aGUgdW5kZXJseWluZ1xuICogdHJhbnNwb3J0IGxheWVyLiBCeSBkZWZhdWx0IGlmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyIHdpdGggV2ViUlRDIHN1cHBvcnQsIHRoZSBzZXNzaW9uIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgdXNlIHRoZSBXZWJSVEMgdmVyc2lvbiBvZiB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSS4gT24gdGhlIHNlcnZlciBvciBpZiB5b3UgcGFzc1xuICogYHdlYnNvY2tldGAgYXMgdGhlIHRyYW5zcG9ydCBsYXllciwgdGhlIHNlc3Npb24gd2lsbCBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHVzaW5nIFdlYlNvY2tldHMuXG4gKlxuICogSW4gdGhlIGNhc2Ugb2YgV2ViUlRDLCBpbiB0aGUgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqXG4gKiBZb3UgY2FuIGFsc28gY3JlYXRlIGEgdHJhbnNwb3J0IGxheWVyIGluc3RhbmNlIHlvdXJzZWxmIGFuZCBwYXNzIGl0IGluIHRvIGhhdmUgbW9yZSBjb250cm9sIG92ZXJcbiAqIHRoZSBjb25maWd1cmF0aW9uIG9yIGV2ZW4gZXh0ZW5kIHRoZSBleGlzdGluZyBvbmVzLiBDaGVjayBvdXQgdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYFxuICogZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGNyZWF0ZSBhIGN1c3RvbSB0cmFuc3BvcnQgbGF5ZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBhZ2VudCA9IG5ldyBSZWFsdGltZUFnZW50KHtcbiAqICAgbmFtZTogJ215LWFnZW50JyxcbiAqICAgaW5zdHJ1Y3Rpb25zOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgY2FuIGFuc3dlciBxdWVzdGlvbnMgYW5kIGhlbHAgd2l0aCB0YXNrcy4nLFxuICogfSlcbiAqXG4gKiBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCk7XG4gKiBzZXNzaW9uLmNvbm5lY3Qoe1xuICogICBhcGlLZXk6ICd5b3VyLWFwaS1rZXknLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWx0aW1lU2Vzc2lvbiBleHRlbmRzIFJ1bnRpbWVFdmVudEVtaXR0ZXIge1xuICAgIGluaXRpYWxBZ2VudDtcbiAgICBvcHRpb25zO1xuICAgICN0cmFuc3BvcnQ7XG4gICAgI2N1cnJlbnRBZ2VudDtcbiAgICAjY3VycmVudFRvb2xzO1xuICAgICNjb250ZXh0O1xuICAgICNvdXRwdXRHdWFyZHJhaWxzID0gW107XG4gICAgI291dHB1dEd1YXJkcmFpbFNldHRpbmdzO1xuICAgICN0cmFuc2NyaWJlZFRleHREZWx0YXMgPSB7fTtcbiAgICAjaGlzdG9yeSA9IFtdO1xuICAgICNzaG91bGRJbmNsdWRlQXVkaW9EYXRhO1xuICAgICNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgIC8vIFRyYWNrcyBhbGwgTUNQIHRvb2xzIGZldGNoZWQgcGVyIHNlcnZlciBsYWJlbCAoZnJvbSBtY3BfbGlzdF90b29scyByZXN1bHRzKS5cbiAgICAjYWxsTWNwVG9vbHNCeVNlcnZlciA9IG5ldyBNYXAoKTtcbiAgICAvLyBUcmFja3MgY3VycmVudGx5IGF2YWlsYWJsZSBNQ1AgdG9vbHMgYmFzZWQgb24gdGhlIGFjdGl2ZSBhZ2VudCdzIGNvbmZpZ3VyZWQgc2VydmVyX2xhYmVscy5cbiAgICAjYXZhaWxhYmxlTWNwVG9vbHMgPSBbXTtcbiAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgbGFzdCBmdWxsIHNlc3Npb24gY29uZmlnIHdlIHNlbnQgKGNhbWVsQ2FzZSBrZXlzKSBzbyB0aGF0XG4gICAgLy8gc3Vic2VxdWVudCB1cGRhdGVzIChlLmcuIGR1cmluZyBhZ2VudCBoYW5kb2ZmcykgcHJlc2VydmUgcHJvcGVydGllcyB0aGF0IGFyZVxuICAgIC8vIG5vdCBleHBsaWNpdGx5IHJlY2FsY3VsYXRlZCBoZXJlIChzdWNoIGFzIGlucHV0QXVkaW9Gb3JtYXQsIG91dHB1dEF1ZGlvRm9ybWF0LFxuICAgIC8vIG1vZGFsaXRpZXMsIHNwZWVkLCB0b29sQ2hvaWNlLCB0dXJuRGV0ZWN0aW9uLCBldGMuKS4gV2l0aG91dCB0aGlzLCB1cGRhdGluZ1xuICAgIC8vIHRoZSBhZ2VudCB3b3VsZCBkcm9wIGF1ZGlvIGZvcm1hdCBvdmVycmlkZXMgKGUuZy4gZzcxMV91bGF3KSBhbmQgcmV2ZXJ0IHRvXG4gICAgLy8gdHJhbnNwb3J0IGRlZmF1bHRzIGNhdXNpbmcgaXNzdWVzIGZvciBpbnRlZ3JhdGlvbnMgbGlrZSBUd2lsaW8uXG4gICAgI2xhc3RTZXNzaW9uQ29uZmlnID0gY2xvbmVEZWZhdWx0U2Vzc2lvbkNvbmZpZygpO1xuICAgICNhdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzID0gdHJ1ZTtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsQWdlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCh0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnICYmIGhhc1dlYlJUQ1N1cHBvcnQoKSkgfHxcbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2VicnRjJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViUlRDKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJzb2NrZXQnIHx8XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy4jY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmNvbnRleHQgPz8ge30pLFxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy4jaGlzdG9yeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbHMgPSAob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA9IGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Mob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA/PyB7fSk7XG4gICAgICAgIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEgPSBvcHRpb25zLmhpc3RvcnlTdG9yZUF1ZGlvID8/IGZhbHNlO1xuICAgICAgICB0aGlzLiNhdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA/PyB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNwb3J0IGxheWVyIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHRyYW5zcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgaW4gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdXNhZ2Ugb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHVzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dC51c2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuIE1pZ2h0IGJlIGBudWxsYCBpZiB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3RcbiAgICAgKiBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQubXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jaGlzdG9yeTtcbiAgICB9XG4gICAgZ2V0IGF2YWlsYWJsZU1jcFRvb2xzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHM7XG4gICAgfVxuICAgIGFzeW5jICNzZXRDdXJyZW50QWdlbnQoYWdlbnQpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50ID0gYWdlbnQ7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZzID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2Zmcyh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgaGFuZG9mZlRvb2xzID0gaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBoYW5kb2ZmLmdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpKTtcbiAgICAgICAgY29uc3QgYWxsVG9vbHMgPSAoYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHRoaXMuI2NvbnRleHQpKVxuICAgICAgICAgICAgLmZpbHRlcihpc1ZhbGlkUmVhbHRpbWVUb29sKVxuICAgICAgICAgICAgLm1hcCh0b1JlYWx0aW1lVG9vbERlZmluaXRpb24pO1xuICAgICAgICBjb25zdCBoYXNUb29sc0RlZmluZWQgPSB0eXBlb2YgdGhpcy4jY3VycmVudEFnZW50LnRvb2xzICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC5tY3BTZXJ2ZXJzICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgY29uc3QgaGFzSGFuZG9mZnNEZWZpbmVkID0gaGFuZG9mZnMubGVuZ3RoID4gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudFRvb2xzID1cbiAgICAgICAgICAgIGhhc1Rvb2xzRGVmaW5lZCB8fCBoYXNIYW5kb2Zmc0RlZmluZWRcbiAgICAgICAgICAgICAgICA/IFsuLi5hbGxUb29scywgLi4uaGFuZG9mZlRvb2xzXVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAvLyBSZWNvbXB1dGUgY3VycmVudGx5IGF2YWlsYWJsZSBNQ1AgdG9vbHMgYmFzZWQgb24gdGhlIG5ldyBhZ2VudCdzIGFjdGl2ZSBzZXJ2ZXIgbGFiZWxzLlxuICAgICAgICB0aGlzLiN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpO1xuICAgIH1cbiAgICBhc3luYyAjZ2V0U2Vzc2lvbkNvbmZpZyhhZGRpdGlvbmFsQ29uZmlnID0ge30pIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVzQ29uZmlnID0gYWRkaXRpb25hbENvbmZpZyA/PyB7fTtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgPz8ge307XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQodGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGdldEF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSA9IChjb25maWcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQ29uZmlnID0gY29uZmlnXG4gICAgICAgICAgICAgICAgLmF1ZGlvO1xuICAgICAgICAgICAgcmV0dXJuIGF1ZGlvQ29uZmlnPy5vdXRwdXQ/LnZvaWNlO1xuICAgICAgICB9O1xuICAgICAgICAvLyBSZWFsdGltZSBleHBlY3RzIHRyYWNpbmcgdG8gYmUgZXhwbGljaXRseSBudWxsIHRvIGRpc2FibGUgaXQ7IGxlYXZpbmcgdGhlIHByZXZpb3VzIGNvbmZpZ1xuICAgICAgICAvLyBpbiBwbGFjZSB3b3VsZCBvdGhlcndpc2UgY29udGludWUgZW1pdHRpbmcgc3BhbnMuXG4gICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgIC50cmFjaW5nRGlzYWJsZWRcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogJ2F1dG8nO1xuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJiB0cmFjaW5nQ29uZmlnICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcuZ3JvdXBfaWQgPSB0aGlzLm9wdGlvbnMuZ3JvdXBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcubWV0YWRhdGEgPSB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCB8fCB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0luIG9yZGVyIHRvIHNldCB0cmFjZU1ldGFkYXRhIG9yIGEgZ3JvdXBJZCB5b3UgbmVlZCB0byBzcGVjaWZ5IGEgd29ya2Zsb3dOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSA9IGdldEF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZShvdmVycmlkZXNDb25maWcpID8/XG4gICAgICAgICAgICBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUob3B0aW9uc0NvbmZpZyk7XG4gICAgICAgIGNvbnN0IHRvcExldmVsVm9pY2VPdmVycmlkZSA9IG92ZXJyaWRlc0NvbmZpZy52b2ljZSA/PyBvcHRpb25zQ29uZmlnLnZvaWNlO1xuICAgICAgICBjb25zdCByZXNvbHZlZFZvaWNlID0gdHlwZW9mIGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlXG4gICAgICAgICAgICA6IHR5cGVvZiB0b3BMZXZlbFZvaWNlT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyB0b3BMZXZlbFZvaWNlT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICA6IHRoaXMuI2N1cnJlbnRBZ2VudC52b2ljZTtcbiAgICAgICAgLy8gU3RhcnQgZnJvbSBhbnkgcHJldmlvdXNseS1zZW50IGNvbmZpZyAoc28gd2UgcHJlc2VydmUgdmFsdWVzIGxpa2UgYXVkaW8gZm9ybWF0cylcbiAgICAgICAgLy8gYW5kIHRoZSBvcmlnaW5hbCBvcHRpb25zLmNvbmZpZyBwcm92aWRlZCBieSB0aGUgdXNlci4gUHJlZmVyZW5jZSBvcmRlcjpcbiAgICAgICAgLy8gMS4gTGFzdCBzZXNzaW9uIGNvbmZpZyB3ZSBzZW50ICgjbGFzdFNlc3Npb25Db25maWcpXG4gICAgICAgIC8vIDIuIE9yaWdpbmFsIG9wdGlvbnMuY29uZmlnXG4gICAgICAgIC8vIDMuIEFkZGl0aW9uYWwgY29uZmlnIHBhc3NlZCBpbnRvIHRoaXMgaW52b2NhdGlvbiAoZXhwbGljaXQgb3ZlcnJpZGVzKVxuICAgICAgICAvLyBGaW5hbGx5IHdlIG92ZXJ3cml0ZSBkeW5hbWljIGZpZWxkcyAoaW5zdHJ1Y3Rpb25zLCB2b2ljZSwgbW9kZWwsIHRvb2xzLCB0cmFjaW5nKVxuICAgICAgICAvLyB0byBlbnN1cmUgdGhleSBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBhZ2VudCAmIHJ1bnRpbWUgc3RhdGUuXG4gICAgICAgIGNvbnN0IGJhc2UgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy4jbGFzdFNlc3Npb25Db25maWcgPz8ge30pLFxuICAgICAgICAgICAgLi4ub3B0aW9uc0NvbmZpZyxcbiAgICAgICAgICAgIC4uLm92ZXJyaWRlc0NvbmZpZyxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gTm90ZTogQ2VydGFpbiBmaWVsZHMgY2Fubm90IGJlIHVwZGF0ZWQgYWZ0ZXIgdGhlIHNlc3Npb24gYmVnaW5zLCBzdWNoIGFzIHZvaWNlIGFuZCBtb2RlbFxuICAgICAgICBjb25zdCBmdWxsQ29uZmlnID0ge1xuICAgICAgICAgICAgLi4uYmFzZSxcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIHZvaWNlOiByZXNvbHZlZFZvaWNlLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLiNjdXJyZW50VG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgcHJvbXB0OiB0eXBlb2YgdGhpcy4jY3VycmVudEFnZW50LnByb21wdCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LnByb21wdCh0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpXG4gICAgICAgICAgICAgICAgOiB0aGlzLiNjdXJyZW50QWdlbnQucHJvbXB0LFxuICAgICAgICB9O1xuICAgICAgICAvLyBVcGRhdGUgb3VyIGNhY2hlIHNvIHN1YnNlcXVlbnQgdXBkYXRlcyBpbmhlcml0IHRoZSBmdWxsIHNldCBpbmNsdWRpbmcgYW55XG4gICAgICAgIC8vIGR5bmFtaWMgZmllbGRzIHdlIGp1c3Qgb3Zlcndyb3RlLlxuICAgICAgICB0aGlzLiNsYXN0U2Vzc2lvbkNvbmZpZyA9IGZ1bGxDb25maWc7XG4gICAgICAgIHJldHVybiBmdWxsQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBpbml0aWFsIHNlc3Npb24gY29uZmlnIHRoYXQgdGhlIGN1cnJlbnQgc2Vzc2lvbiB3aWxsIHVzZSB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1pcnJvcnMgdGhlIGNvbmZpZ3VyYXRpb24gcGF5bG9hZCB3ZSBzZW5kIGR1cmluZyBgY29ubmVjdGAsIGluY2x1ZGluZyBkeW5hbWljIHZhbHVlc1xuICAgICAqIHN1Y2ggYXMgdGhlIHVwc3RyZWFtIGFnZW50IGluc3RydWN0aW9ucywgdG9vbCBkZWZpbml0aW9ucywgYW5kIHByb21wdCBjb250ZW50IGdlbmVyYXRlZCBhdFxuICAgICAqIHJ1bnRpbWUuIEtlZXBpbmcgdGhpcyBoZWxwZXIgZXhwb3NlZCBhbGxvd3MgdHJhbnNwb3J0cyBvciBvcmNoZXN0cmF0aW9uIGxheWVycyB0byBwcmVjb21wdXRlXG4gICAgICogYSBDYWxsQWNjZXB0LWNvbXBhdGlibGUgcGF5bG9hZCB3aXRob3V0IG9wZW5pbmcgYSBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBzZXNzaW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0SW5pdGlhbFNlc3Npb25Db25maWcob3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2dldFNlc3Npb25Db25maWcoe1xuICAgICAgICAgICAgLi4uKHRoaXMub3B0aW9ucy5jb25maWcgPz8ge30pLFxuICAgICAgICAgICAgLi4uKG92ZXJyaWRlcyA/PyB7fSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBoZWxwZXIgdG8gY29tcHV0ZSB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZyB3aXRob3V0IG1hbnVhbGx5IGluc3RhbnRpYXRpbmcgYW5kIGNvbm5lY3RpbmcgYSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZnVsIGZvciBpbnRlZ3JhdGlvbnMgdGhhdCBtdXN0IHByb3ZpZGUgdGhlIHNlc3Npb24gY29uZmlndXJhdGlvbiB0byBhXG4gICAgICogdGhpcmQgcGFydHkgKGZvciBleGFtcGxlIHRoZSBTSVAgYGNhbGxzLmFjY2VwdGAgZW5kcG9pbnQpIGJlZm9yZSB0aGUgYWN0dWFsIHJlYWx0aW1lIHNlc3Npb25cbiAgICAgKiBpcyBhdHRhY2hlZC4gVGhlIGhlbHBlciBpbnN0YW50aWF0ZXMgYSB0aHJvd2F3YXkgc2Vzc2lvbiBzbyBhbGwgYWdlbnQtZHJpdmVuIGR5bmFtaWMgZmllbGRzXG4gICAgICogcmVzb2x2ZSBpbiBleGFjdGx5IHRoZSBzYW1lIHdheSBhcyB0aGUgbGl2ZSBzZXNzaW9uIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWdlbnQgLSBUaGUgc3RhcnRpbmcgYWdlbnQgZm9yIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2Vzc2lvbiBvcHRpb25zIHVzZWQgdG8gc2VlZCB0aGUgY29uZmlnIGNhbGN1bGF0aW9uLlxuICAgICAqIEBwYXJhbSBvdmVycmlkZXMgLSBBZGRpdGlvbmFsIGNvbmZpZyBvdmVycmlkZXMgYXBwbGllZCBvbiB0b3Agb2YgdGhlIHByb3ZpZGVkIG9wdGlvbnMuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGNvbXB1dGVJbml0aWFsU2Vzc2lvbkNvbmZpZyhhZ2VudCwgb3B0aW9ucyA9IHt9LCBvdmVycmlkZXMgPSB7fSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCwgb3B0aW9ucyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2Vzc2lvbi5nZXRJbml0aWFsU2Vzc2lvbkNvbmZpZyhvdmVycmlkZXMpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgc2Vzc2lvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUFnZW50KG5ld0FnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgaGFuZG9mZikge1xuICAgICAgICBjb25zdCBuZXdBZ2VudCA9IChhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZih0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMpKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICAvLyB1cGRhdGUgc2Vzc2lvbiB3aXRoIG5ldyBhZ2VudFxuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBnZXRUcmFuc2Zlck1lc3NhZ2UobmV3QWdlbnQpO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgdG9vbCkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sLm5lZWRzQXBwcm92YWwodGhpcy4jY29udGV4dCwgcGFyc2VkQXJncywgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gdGhpcy5jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCByZXN1bHQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHJlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCByZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFwcHJvdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbCxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgdGhpcy4jY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbC5pbnZva2UodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBzdHJpbmdSZXN1bHQ7XG4gICAgICAgIGlmIChpc0JhY2tncm91bmRSZXN1bHQocmVzdWx0KSkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgZ2VuZXJhdGUgYSBuZXcgcmVzcG9uc2UsIGp1c3Qgc2VuZCB0aGUgcmVzdWx0XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdC5jb250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25DYWxsKHRvb2xDYWxsKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRIYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKGVuYWJsZWRIYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IFtoYW5kb2ZmLnRvb2xOYW1lLCBoYW5kb2ZmXSkpO1xuICAgICAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sTWFwID0gbmV3IE1hcChhbGxUb29scy5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlSGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICBpZiAocG9zc2libGVIYW5kb2ZmKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBwb3NzaWJsZUhhbmRvZmYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sID0gZnVuY3Rpb25Ub29sTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgICAgIGlmIChmdW5jdGlvblRvb2wgJiYgZnVuY3Rpb25Ub29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCBmdW5jdGlvblRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xDYWxsLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNydW5PdXRwdXRHdWFyZHJhaWxzKG91dHB1dCwgcmVzcG9uc2VJZCwgaXRlbUlkKSB7XG4gICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLm1hcCgoZ3VhcmRyYWlsKSA9PiBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpKSk7XG4gICAgICAgIGNvbnN0IGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQgPSByZXN1bHRzLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgIGlmIChmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVuc3VyZXMgdGhhdCBpZiBvbmUgZ3VhcmRyYWlsIGFscmVhZHkgdHJpcHMgYW5kIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGFub3RoZXJcbiAgICAgICAgICAgIC8vIGd1YXJkcmFpbCBydW4sIHdlIGRvbid0IHRyaXAgYWdhaW5cbiAgICAgICAgICAgIGlmICh0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2d1YXJkcmFpbF90cmlwcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBlcnJvciwge1xuICAgICAgICAgICAgICAgIGl0ZW1JZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrVGV4dCA9IGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShmZWVkYmFja1RleHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgICNzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCcqJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9ldmVudCcsIGV2ZW50KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZWQgdXNlciB0cmFuc2NyaXB0aW9uIGV2ZW50c1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRFdmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGNvbXBsZXRlZEV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdtY3BfdG9vbHNfbGlzdGVkJywgKHsgc2VydmVyTGFiZWwsIHRvb2xzIH0pID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYWxsTWNwVG9vbHNCeVNlcnZlci5zZXQoc2VydmVyTGFiZWwsIHRvb2xzID8/IFtdKTtcbiAgICAgICAgICAgICAgICB0aGlzLiN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBlcnIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuI2F1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX3N0YXJ0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9kb25lJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZXZlbnQucmVzcG9uc2Uub3V0cHV0W2V2ZW50LnJlc3BvbnNlLm91dHB1dC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHRPdXRwdXQgPSBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkgPz8gJyc7XG4gICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBpdGVtPy5pZCA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHModGV4dE91dHB1dCwgZXZlbnQucmVzcG9uc2UuaWQsIGl0ZW1JZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX2RvbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0b3BwZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgIGxldCBsYXN0SXRlbUlkO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX3RyYW5zY3JpcHRfZGVsdGEnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBldmVudC5kZWx0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBldmVudC5pdGVtSWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VJZCA9IGV2ZW50LnJlc3BvbnNlSWQ7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJdGVtSWQgIT09IGl0ZW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbUlkID0gaXRlbUlkO1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGV4dCA9IHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSBjdXJyZW50VGV4dCArIGRlbHRhO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID0gbmV3VGV4dDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1J1bkluZGV4ID0gTWF0aC5mbG9vcihuZXdUZXh0Lmxlbmd0aCAvIHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1J1bkluZGV4ID4gbGFzdFJ1bkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IG5ld1J1bkluZGV4O1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBjYW5jZWwgZXhpc3RpbmcgcnVucyBiZWNhdXNlIHdlIHdhbnQgdGhlIGZpcnN0IG9uZSB0byBmYWlsIHRvIGZhaWxcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRyYW5zcG9ydCBsYXllciBzaG91bGQgdXBvbiBmYWlsdXJlIGhhbmRsZSB0aGUgaW50ZXJydXB0aW9uIGFuZCBzdG9wIHRoZSBtb2RlbFxuICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIGdlbmVyYXRpbmcgZnVydGhlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKG5ld1RleHQsIHJlc3BvbnNlSWQsIGl0ZW1JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2l0ZW1fdXBkYXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gIXRoaXMuI2hpc3Rvcnkuc29tZSgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBldmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZEl0ZW0gPSB0aGlzLiNoaXN0b3J5LmZpbmQoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfYWRkZWQnLCBhZGRlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV9kZWxldGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB0aGlzLiNoaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pdGVtSWQgIT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZnVuY3Rpb25fY2FsbCcsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvbkNhbGwoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBoYW5kbGluZyBmdW5jdGlvbiBjYWxsJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd1c2FnZV91cGRhdGUnLCAodXNhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbnRleHQudXNhZ2UuYWRkKHVzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9faW50ZXJydXB0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgKHRvb2xDYWxsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sQ2FsbCk7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignbWNwX2FwcHJvdmFsX3JlcXVlc3QnLCAoYXBwcm92YWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbEl0ZW06IHJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0odGhpcy4jY3VycmVudEFnZW50LCBhcHByb3ZhbFJlcXVlc3QpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGVzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIE1DUCB0b29scyBiYXNlZCBvbiB0aGUgY3VycmVudCBhZ2VudCdzIGFjdGl2ZVxuICAgICAqIE1DUCBzZXJ2ZXIgY29uZmlndXJhdGlvbnMgYW5kIHRoZSBjYWNoZWQgcGVyLXNlcnZlciB0b29sIGxpc3RpbmdzLiBFbWl0c1xuICAgICAqIGBtY3BfdG9vbHNfY2hhbmdlZGAgaWYgdGhlIHNldCBjaGFuZ2VkLlxuICAgICAqL1xuICAgICN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgLy8gQ29sbGVjdCBhY3RpdmUgTUNQIHNlcnZlciBsYWJlbHMgYW5kIG9wdGlvbmFsIGFsbG93ZWQgZmlsdGVycyBmcm9tIHRoZSBjdXJyZW50IGFnZW50XG4gICAgICAgIGNvbnN0IGFjdGl2ZU1jcENvbmZpZ3MgPSB0aGlzLiNjdXJyZW50VG9vbHM/LmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnbWNwJyk7XG4gICAgICAgIGNvbnN0IGFsbG93ZWRGcm9tQ29uZmlnID0gKGNmZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGNmZy5hbGxvd2VkX3Rvb2xzO1xuICAgICAgICAgICAgaWYgKCFhbGxvd2VkKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGxvd2VkKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsb3dlZDtcbiAgICAgICAgICAgIGlmIChhbGxvd2VkICYmIEFycmF5LmlzQXJyYXkoYWxsb3dlZC50b29sX25hbWVzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsb3dlZC50b29sX25hbWVzO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGVkdXBCeU5hbWUgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2ZnIG9mIGFjdGl2ZU1jcENvbmZpZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xzID0gdGhpcy4jYWxsTWNwVG9vbHNCeVNlcnZlci5nZXQoY2ZnLnNlcnZlcl9sYWJlbCkgPz8gW107XG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZEZyb21Db25maWcoY2ZnKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scykge1xuICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkICYmICFhbGxvd2VkLmluY2x1ZGVzKHRvb2wubmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmICghZGVkdXBCeU5hbWUuaGFzKHRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVkdXBCeU5hbWUuc2V0KHRvb2wubmFtZSwgdG9vbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHQgPSBBcnJheS5mcm9tKGRlZHVwQnlOYW1lLnZhbHVlcygpKTtcbiAgICAgICAgY29uc3QgcHJldiA9IHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gcHJldi5sZW5ndGggIT09IG5leHQubGVuZ3RoIHx8XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcmV2Lm1hcCgodCkgPT4gdC5uYW1lKS5zb3J0KCkpICE9PVxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG5leHQubWFwKCh0KSA9PiB0Lm5hbWUpLnNvcnQoKSk7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLiNhdmFpbGFibGVNY3BUb29scyA9IG5leHQ7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sc19jaGFuZ2VkJywgdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICBjYWxsSWQ6IG9wdGlvbnMuY2FsbElkLFxuICAgICAgICAgICAgaW5pdGlhbFNlc3Npb25Db25maWc6IGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcodGhpcy5vcHRpb25zLmNvbmZpZyksXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBFbnN1cmUgdGhlIGNhY2hlZCBsYXN0U2Vzc2lvbkNvbmZpZyBpbmNsdWRlcyBldmVyeXRoaW5nIHBhc3NlZCBhcyB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZ1xuICAgICAgICAvLyAodGhlIGNhbGwgYWJvdmUgYWxyZWFkeSBzZXQgaXQgdmlhICNnZXRTZXNzaW9uQ29uZmlnIGJ1dCBpbiBjYXNlIGFkZGl0aW9uYWwgb3ZlcnJpZGVzIHdlcmVcbiAgICAgICAgLy8gcGFzc2VkIGRpcmVjdGx5IGhlcmUgaW4gdGhlIGZ1dHVyZSB3ZSBjb3VsZCBtZXJnZSB0aGVtKS4gRm9yIG5vdyBpdCdzIGEgbm8tb3AuXG4gICAgICAgIHRoaXMuI2hpc3RvcnkgPSBbXTtcbiAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IHRvIHNldC5cbiAgICAgKi9cbiAgICB1cGRhdGVIaXN0b3J5KG5ld0hpc3RvcnkpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRIaXN0b3J5O1xuICAgICAgICBpZiAodHlwZW9mIG5ld0hpc3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeSh0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN0cmFuc3BvcnQucmVzZXRIaXN0b3J5KHRoaXMuI2hpc3RvcnksIHVwZGF0ZWRIaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvdGhlckV2ZW50RGF0YSAtIEFkZGl0aW9uYWwgZXZlbnQgZGF0YSB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGltYWdlIHRvIHRoZSBzZXNzaW9uXG4gICAgICogQHBhcmFtIGltYWdlIC0gVGhlIGltYWdlIHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuYWRkSW1hZ2UoaW1hZ2UsIHsgdHJpZ2dlclJlc3BvbnNlIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5tdXRlKG11dGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCBmcm9tIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGF1ZGlvIHRvIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmNvbW1pdCAtIFdoZXRoZXIgdG8gZmluaXNoIHRoZSB0dXJuIHdpdGggdGhpcyBhdWRpby5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBzZXNzaW9uIGFydGlmaWNpYWxseSBmb3IgZXhhbXBsZSBpZiB5b3Ugd2FudCB0byBidWlsZCBhIFwic3RvcCB0YWxraW5nXCJcbiAgICAgKiBidXR0b24uXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuaW50ZXJydXB0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzQXBwcm92ZSAtIFdoZXRoZXIgdG8gYWx3YXlzIGFwcHJvdmUgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGNvbnN0IHRvb2wgPSB0aGlzLiNjdXJyZW50QWdlbnQudG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC5uYW1lID09PSB0b29sTmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Fsd2F5cyBhcHByb3ZpbmcgTUNQIHRvb2xzIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSB0aGUgYWxsb3dlZCB0b29scyBjb25maWd1cmF0aW9uIGluc3RlYWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtY3BBcHByb3ZhbFJlcXVlc3QgPSBhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1jcFJlc3BvbnNlKG1jcEFwcHJvdmFsUmVxdWVzdCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbE5hbWUgPz8gJ3Vua25vd24nfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3QgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbHdheXNSZWplY3QgLSBXaGV0aGVyIHRvIGFsd2F5cyByZWplY3QgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIHdlIHN0aWxsIG5lZWQgdG8gc2ltdWxhdGUgYSB0b29sIGNhbGwgdG8gdGhlIGFnZW50IHRvIGxldCB0aGUgYWdlbnQga25vd1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gdG9vbE5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWx3YXlzUmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Fsd2F5cyByZWplY3RpbmcgTUNQIHRvb2xzIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSB0aGUgYWxsb3dlZCB0b29scyBjb25maWd1cmF0aW9uIGluc3RlYWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtY3BBcHByb3ZhbFJlcXVlc3QgPSBhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1jcFJlc3BvbnNlKG1jcEFwcHJvdmFsUmVxdWVzdCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xOYW1lID8/ICd1bmtub3duJ30gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZVNlc3Npb24ubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5pbXBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCBjb25uZWN0cyB0byBhbiBleGlzdGluZyBTSVAtaW5pdGlhdGVkIFJlYWx0aW1lIGNhbGwgdmlhIGNhbGwgSUQuXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVNJUCBleHRlbmRzIE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkIHRoZSBpbml0aWFsIHNlc3Npb24gcGF5bG9hZCBmb3IgYSBTSVAtYXR0YWNoZWQgc2Vzc2lvbiwgbWF0Y2hpbmcgdGhlIGNvbmZpZyB0aGF0IGEgUmVhbHRpbWVTZXNzaW9uIHdvdWxkIHNlbmQgb24gY29ubmVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgZW5hYmxlcyBTSVAgZGVwbG95bWVudHMgdG8gYWNjZXB0IGFuIGluY29taW5nIGNhbGwgd2l0aCBhIHBheWxvYWQgdGhhdCBhbHJlYWR5IHJlZmxlY3RzXG4gICAgICogdGhlIGFjdGl2ZSBhZ2VudCdzIGluc3RydWN0aW9ucywgdG9vbHMsIHByb21wdCwgYW5kIHRyYWNpbmcgbWV0YWRhdGEgd2l0aG91dCBkdXBsaWNhdGluZyB0aGVcbiAgICAgKiBzZXNzaW9uIGxvZ2ljIG91dHNpZGUgb2YgdGhlIFNESy4gVGhlIHJldHVybmVkIG9iamVjdCBzdHJ1Y3R1cmFsbHkgbWF0Y2hlcyB0aGUgUkVTVFxuICAgICAqIGBDYWxsQWNjZXB0UGFyYW1zYCBpbnRlcmZhY2UsIHNvIGl0IGNhbiBiZSBmb3J3YXJkZWQgZGlyZWN0bHkgdG9cbiAgICAgKiBgb3BlbmFpLnJlYWx0aW1lLmNhbGxzLmFjY2VwdCguLi4pYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhZ2VudCAtIFRoZSBzdGFydGluZyBhZ2VudCB1c2VkIHRvIHNlZWQgdGhlIHNlc3Npb24gaW5zdHJ1Y3Rpb25zLCB0b29scywgYW5kIHByb21wdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNlc3Npb24gb3B0aW9ucyB0aGF0IG1pcnJvciB0aGUgb25lcyBwYXNzZWQgdG8gdGhlIFJlYWx0aW1lU2Vzc2lvbiBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBzZXNzaW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGJ1aWxkSW5pdGlhbENvbmZpZyhhZ2VudCwgb3B0aW9ucyA9IHt9LCBvdmVycmlkZXMgPSB7fSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uQ29uZmlnID0gYXdhaXQgUmVhbHRpbWVTZXNzaW9uLmNvbXB1dGVJbml0aWFsU2Vzc2lvbkNvbmZpZyhhZ2VudCwgb3B0aW9ucywgb3ZlcnJpZGVzKTtcbiAgICAgICAgY29uc3QgdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lU0lQKCk7XG4gICAgICAgIHJldHVybiB0cmFuc3BvcnQuYnVpbGRTZXNzaW9uUGF5bG9hZChzZXNzaW9uQ29uZmlnKTtcbiAgICB9XG4gICAgc2VuZEF1ZGlvKF9hdWRpbywgX29wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBTSVAgaW50ZWdyYXRpb25zIHN0cmVhbSBhdWRpbyB0byBPcGVuQUkgZGlyZWN0bHkgdGhyb3VnaCB0aGUgdGVsZXBob255IHByb3ZpZGVyLCBzbyB0aGVcbiAgICAgICAgLy8gdHJhbnNwb3J0IGRlbGliZXJhdGVseSBwcmV2ZW50cyB1c2VybGFuZCBjb2RlIGZyb20gc2VuZGluZyBkdXBsaWNhdGUgYnVmZmVycy5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUlSZWFsdGltZVNJUCBkb2VzIG5vdCBzdXBwb3J0IHNlbmRpbmcgYXVkaW8gYnVmZmVyczsgYXVkaW8gaXMgaGFuZGxlZCBieSB0aGUgU0lQIGNhbGwuJyk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMuY2FsbElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdPcGVuQUlSZWFsdGltZVNJUCByZXF1aXJlcyBgY2FsbElkYCBpbiB0aGUgY29ubmVjdCBvcHRpb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHN1cGVyLmNvbm5lY3Qob3B0aW9ucyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVTaXAubWpzLm1hcCIsImltcG9ydCAqIGFzIHV0aWxJbXBvcnQgZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZUFnZW50IH0gZnJvbSBcIi4vcmVhbHRpbWVBZ2VudC5tanNcIjtcbmV4cG9ydCB7IFJlYWx0aW1lU2Vzc2lvbiwgfSBmcm9tIFwiLi9yZWFsdGltZVNlc3Npb24ubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlJUQywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0LCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVTSVAgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVNpcC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBiYXNlNjRUb0FycmF5QnVmZmVyOiB1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIsXG4gICAgYXJyYXlCdWZmZXJUb0Jhc2U2NDogdXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0LFxuICAgIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZTogdXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsXG59O1xuZXhwb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgdG9vbCwgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IHsgYmFja2dyb3VuZFJlc3VsdCwgaXNCYWNrZ3JvdW5kUmVzdWx0IH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOlsiTUVUQURBVEEiLCJzYWZlRXhlY3V0ZSIsImZuIiwiZXJyb3IiLCJnZXRFbnVtVmFsdWVzIiwiZW50cmllcyIsIm51bWVyaWNWYWx1ZXMiLCJ2IiwiayIsIl8iLCIkWm9kUmVnaXN0cnkiLCJzY2hlbWEiLCJfbWV0YSIsIm1ldGEiLCJwIiwicG0iLCJyZWdpc3RyeSIsImdsb2JhbFJlZ2lzdHJ5IiwiSlNPTlNjaGVtYUdlbmVyYXRvciIsInBhcmFtcyIsIl9wYXJhbXMiLCJfYSIsImRlZiIsImZvcm1hdE1hcCIsInNlZW4iLCJyZXN1bHQiLCJvdmVycmlkZVNjaGVtYSIsIl9iIiwicGFyZW50IiwiX2pzb24iLCJqc29uIiwibWluaW11bSIsIm1heGltdW0iLCJmb3JtYXQiLCJwYXR0ZXJucyIsImNvbnRlbnRFbmNvZGluZyIsInJlZ2V4ZXMiLCJyZWdleCIsIm11bHRpcGxlT2YiLCJleGNsdXNpdmVNYXhpbXVtIiwiZXhjbHVzaXZlTWluaW11bSIsInNoYXBlIiwia2V5IiwiYWxsS2V5cyIsInJlcXVpcmVkS2V5cyIsIl9jIiwiaSIsImEiLCJiIiwiaXNTaW1wbGVJbnRlcnNlY3Rpb24iLCJ2YWwiLCJhbGxPZiIsInByZWZpeEl0ZW1zIiwieCIsInJlc3QiLCJ2YWx1ZXMiLCJ2YWxzIiwiZmlsZSIsIm1pbWUiLCJtIiwiaW5uZXIiLCJjYXRjaFZhbHVlIiwicGF0dGVybiIsImlubmVyVHlwZSIsImlzVHJhbnNmb3JtaW5nIiwicm9vdCIsIm1ha2VVUkkiLCJlbnRyeSIsImRlZnNTZWdtZW50IiwiZXh0ZXJuYWxJZCIsInVyaUdlbmVyYXRvciIsImlkIiwiZGVmVXJpUHJlZml4IiwiZGVmSWQiLCJleHRyYWN0VG9EZWYiLCJyZWYiLCJleHQiLCJmbGF0dGVuUmVmIiwiem9kU2NoZW1hIiwiX2NhY2hlZCIsInJlZlNjaGVtYSIsIl9kIiwiX2UiLCJkZWZzIiwiX2YiLCJ0b0pTT05TY2hlbWEiLCJpbnB1dCIsImdlbiIsInNjaGVtYXMiLCJleHRlcm5hbCIsIl9zY2hlbWEiLCJfY3R4IiwiY3R4Iiwib3B0aW9uIiwiaXRlbSIsIm1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0IiwicmVzcG9uc2VfZm9ybWF0IiwicGFyc2VyIiwib2JqIiwiaWdub3JlT3ZlcnJpZGUiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwib3B0aW9ucyIsInpvZERlZiIsImlzRW1wdHlPYmoiLCJfayIsImdldFJlZnMiLCJfb3B0aW9ucyIsImN1cnJlbnRQYXRoIiwibmFtZSIsImFkZEVycm9yTWVzc2FnZSIsInJlcyIsImVycm9yTWVzc2FnZSIsInJlZnMiLCJzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIiwidmFsdWUiLCJ1dGlsIiwiYXNzZXJ0SXMiLCJfYXJnIiwiYXNzZXJ0TmV2ZXIiLCJfeCIsIml0ZW1zIiwidmFsaWRLZXlzIiwiZmlsdGVyZWQiLCJlIiwib2JqZWN0Iiwia2V5cyIsImFyciIsImNoZWNrZXIiLCJqb2luVmFsdWVzIiwiYXJyYXkiLCJzZXBhcmF0b3IiLCJvYmplY3RVdGlsIiwiZmlyc3QiLCJzZWNvbmQiLCJab2RQYXJzZWRUeXBlIiwiZ2V0UGFyc2VkVHlwZSIsImRhdGEiLCJab2RJc3N1ZUNvZGUiLCJab2RFcnJvciIsImlzc3VlcyIsInN1YiIsInN1YnMiLCJhY3R1YWxQcm90byIsIl9tYXBwZXIiLCJtYXBwZXIiLCJpc3N1ZSIsImZpZWxkRXJyb3JzIiwicHJvY2Vzc0Vycm9yIiwiY3VyciIsImVsIiwiZm9ybUVycm9ycyIsImZpcnN0RWwiLCJlcnJvck1hcCIsIm1lc3NhZ2UiLCJvdmVycmlkZUVycm9yTWFwIiwiZGVmYXVsdEVycm9yTWFwIiwiZ2V0RXJyb3JNYXAiLCJtYWtlSXNzdWUiLCJwYXRoIiwiZXJyb3JNYXBzIiwiaXNzdWVEYXRhIiwiZnVsbFBhdGgiLCJmdWxsSXNzdWUiLCJtYXBzIiwibWFwIiwiYWRkSXNzdWVUb0NvbnRleHQiLCJvdmVycmlkZU1hcCIsIlBhcnNlU3RhdHVzIiwic3RhdHVzIiwicmVzdWx0cyIsImFycmF5VmFsdWUiLCJJTlZBTElEIiwicGFpcnMiLCJzeW5jUGFpcnMiLCJwYWlyIiwiZmluYWxPYmplY3QiLCJESVJUWSIsIk9LIiwiaXNBYm9ydGVkIiwiaXNEaXJ0eSIsImlzVmFsaWQiLCJpc0FzeW5jIiwiZXJyb3JVdGlsIiwiUGFyc2VJbnB1dExhenlQYXRoIiwiaGFuZGxlUmVzdWx0IiwicHJvY2Vzc0NyZWF0ZVBhcmFtcyIsImludmFsaWRfdHlwZV9lcnJvciIsInJlcXVpcmVkX2Vycm9yIiwiZGVzY3JpcHRpb24iLCJpc3MiLCJab2RUeXBlIiwiZXJyIiwibWF5YmVBc3luY1Jlc3VsdCIsImNoZWNrIiwiZ2V0SXNzdWVQcm9wZXJ0aWVzIiwic2V0RXJyb3IiLCJyZWZpbmVtZW50RGF0YSIsInJlZmluZW1lbnQiLCJab2RFZmZlY3RzIiwiWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIiwiWm9kT3B0aW9uYWwiLCJab2ROdWxsYWJsZSIsIlpvZEFycmF5IiwiWm9kUHJvbWlzZSIsIlpvZFVuaW9uIiwiaW5jb21pbmciLCJab2RJbnRlcnNlY3Rpb24iLCJ0cmFuc2Zvcm0iLCJkZWZhdWx0VmFsdWVGdW5jIiwiWm9kRGVmYXVsdCIsIlpvZEJyYW5kZWQiLCJjYXRjaFZhbHVlRnVuYyIsIlpvZENhdGNoIiwiVGhpcyIsInRhcmdldCIsIlpvZFBpcGVsaW5lIiwiWm9kUmVhZG9ubHkiLCJjdWlkUmVnZXgiLCJjdWlkMlJlZ2V4IiwidWxpZFJlZ2V4IiwidXVpZFJlZ2V4IiwibmFub2lkUmVnZXgiLCJqd3RSZWdleCIsImR1cmF0aW9uUmVnZXgiLCJlbWFpbFJlZ2V4IiwiX2Vtb2ppUmVnZXgiLCJlbW9qaVJlZ2V4IiwiaXB2NFJlZ2V4IiwiaXB2NENpZHJSZWdleCIsImlwdjZSZWdleCIsImlwdjZDaWRyUmVnZXgiLCJiYXNlNjRSZWdleCIsImJhc2U2NHVybFJlZ2V4IiwiZGF0ZVJlZ2V4U291cmNlIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4U291cmNlIiwiYXJncyIsInNlY29uZHNSZWdleFNvdXJjZSIsInNlY29uZHNRdWFudGlmaWVyIiwidGltZVJlZ2V4IiwiZGF0ZXRpbWVSZWdleCIsIm9wdHMiLCJpc1ZhbGlkSVAiLCJpcCIsInZlcnNpb24iLCJpc1ZhbGlkSldUIiwiand0IiwiYWxnIiwiaGVhZGVyIiwiYmFzZTY0IiwiZGVjb2RlZCIsImlzVmFsaWRDaWRyIiwiWm9kU3RyaW5nIiwidG9vQmlnIiwidG9vU21hbGwiLCJ2YWxpZGF0aW9uIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwibGVuIiwiY2giLCJtaW4iLCJtYXgiLCJmbG9hdFNhZmVSZW1haW5kZXIiLCJzdGVwIiwidmFsRGVjQ291bnQiLCJzdGVwRGVjQ291bnQiLCJkZWNDb3VudCIsInZhbEludCIsInN0ZXBJbnQiLCJab2ROdW1iZXIiLCJraW5kIiwiaW5jbHVzaXZlIiwiWm9kQmlnSW50IiwiWm9kQm9vbGVhbiIsIlpvZERhdGUiLCJtaW5EYXRlIiwibWF4RGF0ZSIsIlpvZFN5bWJvbCIsIlpvZFVuZGVmaW5lZCIsIlpvZE51bGwiLCJab2RBbnkiLCJab2RVbmtub3duIiwiWm9kTmV2ZXIiLCJab2RWb2lkIiwiZGVlcFBhcnRpYWxpZnkiLCJab2RPYmplY3QiLCJuZXdTaGFwZSIsImZpZWxkU2NoZW1hIiwiWm9kVHVwbGUiLCJzaGFwZUtleXMiLCJleHRyYUtleXMiLCJrZXlWYWxpZGF0b3IiLCJ1bmtub3duS2V5cyIsImNhdGNoYWxsIiwiZGVmYXVsdEVycm9yIiwiYXVnbWVudGF0aW9uIiwibWVyZ2luZyIsImluZGV4IiwibWFzayIsIm5ld0ZpZWxkIiwiY3JlYXRlWm9kRW51bSIsImhhbmRsZVJlc3VsdHMiLCJ1bmlvbkVycm9ycyIsImNoaWxkQ3R4IiwiZGlydHkiLCJ0eXBlcyIsImdldERpc2NyaW1pbmF0b3IiLCJ0eXBlIiwiWm9kTGF6eSIsIlpvZExpdGVyYWwiLCJab2RFbnVtIiwiWm9kTmF0aXZlRW51bSIsIlpvZERpc2NyaW1pbmF0ZWRVbmlvbiIsImRpc2NyaW1pbmF0b3IiLCJkaXNjcmltaW5hdG9yVmFsdWUiLCJvcHRpb25zTWFwIiwiZGlzY3JpbWluYXRvclZhbHVlcyIsIm1lcmdlVmFsdWVzIiwiYVR5cGUiLCJiVHlwZSIsImJLZXlzIiwic2hhcmVkS2V5cyIsIm5ld09iaiIsInNoYXJlZFZhbHVlIiwibmV3QXJyYXkiLCJpdGVtQSIsIml0ZW1CIiwiaGFuZGxlUGFyc2VkIiwicGFyc2VkTGVmdCIsInBhcnNlZFJpZ2h0IiwibWVyZ2VkIiwibGVmdCIsInJpZ2h0IiwiaXRlbUluZGV4IiwiWm9kUmVjb3JkIiwia2V5VHlwZSIsInZhbHVlVHlwZSIsInRoaXJkIiwiWm9kTWFwIiwiZmluYWxNYXAiLCJab2RTZXQiLCJmaW5hbGl6ZVNldCIsImVsZW1lbnRzIiwicGFyc2VkU2V0IiwiZWxlbWVudCIsIm1pblNpemUiLCJtYXhTaXplIiwic2l6ZSIsImdldHRlciIsImV4cGVjdGVkVmFsdWVzIiwiZW51bVZhbHVlcyIsIm5ld0RlZiIsIm9wdCIsIm5hdGl2ZUVudW1WYWx1ZXMiLCJwcm9taXNpZmllZCIsImVmZmVjdCIsImNoZWNrQ3R4IiwiYXJnIiwicHJvY2Vzc2VkIiwiZXhlY3V0ZVJlZmluZW1lbnQiLCJhY2MiLCJiYXNlIiwicHJlcHJvY2VzcyIsIm5ld0N0eCIsIlpvZE5hTiIsImluUmVzdWx0IiwiZnJlZXplIiwiY2xlYW5QYXJhbXMiLCJjdXN0b20iLCJmYXRhbCIsInIiLCJfZmF0YWwiLCJpbnN0YW5jZU9mVHlwZSIsImNscyIsInN0cmluZ1R5cGUiLCJudW1iZXJUeXBlIiwiYm9vbGVhblR5cGUiLCJhbnlUeXBlIiwiYXJyYXlUeXBlIiwib2JqZWN0VHlwZSIsInVuaW9uVHlwZSIsImRpc2NyaW1pbmF0ZWRVbmlvblR5cGUiLCJyZWNvcmRUeXBlIiwibGF6eVR5cGUiLCJsaXRlcmFsVHlwZSIsImVudW1UeXBlIiwicGFyc2VBbnlEZWYiLCJwYXJzZUFycmF5RGVmIiwicGFyc2VEZWYiLCJwYXJzZUJpZ2ludERlZiIsInBhcnNlQm9vbGVhbkRlZiIsInBhcnNlQnJhbmRlZERlZiIsIl9kZWYiLCJwYXJzZUNhdGNoRGVmIiwicGFyc2VEYXRlRGVmIiwib3ZlcnJpZGVEYXRlU3RyYXRlZ3kiLCJzdHJhdGVneSIsImludGVnZXJEYXRlUGFyc2VyIiwicGFyc2VEZWZhdWx0RGVmIiwicGFyc2VFZmZlY3RzRGVmIiwiZm9yY2VSZXNvbHV0aW9uIiwicGFyc2VFbnVtRGVmIiwiaXNKc29uU2NoZW1hN0FsbE9mVHlwZSIsInBhcnNlSW50ZXJzZWN0aW9uRGVmIiwidW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIiwibWVyZ2VkQWxsT2YiLCJuZXN0ZWRTY2hlbWEiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlTGl0ZXJhbERlZiIsInBhcnNlZFR5cGUiLCJ6b2RQYXR0ZXJucyIsInBhcnNlU3RyaW5nRGVmIiwicHJvY2Vzc1BhdHRlcm4iLCJlc2NhcGVOb25BbHBoYU51bWVyaWMiLCJhZGRGb3JtYXQiLCJhZGRQYXR0ZXJuIiwiYyIsInByb2Nlc3NSZWdFeHAiLCJyZWdleE9yRnVuY3Rpb24iLCJmbGFncyIsInNvdXJjZSIsImlzRXNjYXBlZCIsImluQ2hhckdyb3VwIiwiaW5DaGFyUmFuZ2UiLCJyZWdleFRlc3QiLCJwYXJzZVJlY29yZERlZiIsInBhcnNlTWFwRGVmIiwicGFyc2VOYXRpdmVFbnVtRGVmIiwiYWN0dWFsVmFsdWVzIiwicGFyc2VkVHlwZXMiLCJwYXJzZU5ldmVyRGVmIiwicGFyc2VOdWxsRGVmIiwicHJpbWl0aXZlTWFwcGluZ3MiLCJwYXJzZVVuaW9uRGVmIiwiYXNBbnlPZiIsInVuaXF1ZVR5cGVzIiwiYW55T2YiLCJwYXJzZU51bGxhYmxlRGVmIiwicGFyc2VOdW1iZXJEZWYiLCJkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlT2JqZWN0RGVmIiwicHJvcE5hbWUiLCJwcm9wRGVmIiwicHJvcGVydHlQYXRoIiwicGFyc2VkRGVmIiwicGFyc2VPcHRpb25hbERlZiIsImlubmVyU2NoZW1hIiwicGFyc2VQaXBlbGluZURlZiIsInBhcnNlUHJvbWlzZURlZiIsInBhcnNlU2V0RGVmIiwicGFyc2VUdXBsZURlZiIsInBhcnNlVW5kZWZpbmVkRGVmIiwicGFyc2VVbmtub3duRGVmIiwicGFyc2VSZWFkb25seURlZiIsInNlZW5JdGVtIiwib3ZlcnJpZGVSZXN1bHQiLCJzZWVuU2NoZW1hIiwiZ2V0JHJlZiIsIm5ld0l0ZW0iLCJqc29uU2NoZW1hIiwic2VsZWN0UGFyc2VyIiwiYWRkTWV0YSIsImdldFJlbGF0aXZlUGF0aCIsInBhdGhBIiwicGF0aEIiLCJ0eXBlTmFtZSIsInpvZFRvSnNvblNjaGVtYSIsIm1haW4iLCJ0aXRsZSIsImRlZmluaXRpb25zIiwicHJvY2Vzc2VkRGVmaW5pdGlvbnMiLCJuZXdEZWZpbml0aW9ucyIsImNvbWJpbmVkIiwibWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCIsInRvb2wiLCJjYWxsYmFjayIsInRvU3RyaWN0SnNvblNjaGVtYSIsInNjaGVtYUNvcHkiLCJlbnN1cmVTdHJpY3RKc29uU2NoZW1hIiwiaXNOdWxsYWJsZSIsIm9uZU9mVmFyaWFudCIsImFsbE9mVmFyaWFudCIsImlzT2JqZWN0IiwiZGVmTmFtZSIsImRlZlNjaGVtYSIsImRlZmluaXRpb25OYW1lIiwiZGVmaW5pdGlvblNjaGVtYSIsInJlcXVpcmVkIiwicHJvcGVydGllcyIsInByb3BTY2hlbWEiLCJ2YXJpYW50IiwicmVzb2x2ZWQiLCJoYXNNb3JlVGhhbk5LZXlzIiwicmVzb2x2ZVJlZiIsInBhdGhQYXJ0cyIsIm4iLCJ6b2RWM1RvSnNvblNjaGVtYSIsIl96b2RUb0pzb25TY2hlbWEiLCJ6b2RWNFRvSnNvblNjaGVtYSIsIno0LnRvSlNPTlNjaGVtYSIsImlzWm9kVjQiLCJ6b2RPYmplY3QiLCJ6b2RUZXh0Rm9ybWF0IiwicHJvcHMiLCJjb250ZW50Iiwiem9kUmVzcG9uc2VzRnVuY3Rpb24iLCJBZ2VudHNFcnJvciIsInN0YXRlIiwiX19wdWJsaWNGaWVsZCIsIlN5c3RlbUVycm9yIiwiTWF4VHVybnNFeGNlZWRlZEVycm9yIiwiTW9kZWxCZWhhdmlvckVycm9yIiwiVXNlckVycm9yIiwiR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IiLCJUb29sQ2FsbEVycm9yIiwiSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsIk91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwicmVhZFpvZERlZmluaXRpb24iLCJjYW5kaWRhdGUiLCJyZWFkWm9kVHlwZSIsInJhd1R5cGUiLCJsb3dlciIsImlzWm9kT2JqZWN0IiwiaXNBZ2VudFRvb2xJbnB1dCIsIkpTT05fU0NIRU1BX0RSQUZUXzA3IiwiT1BUSU9OQUxfV1JBUFBFUlMiLCJERUNPUkFUT1JfV1JBUFBFUlMiLCJTSU1QTEVfVFlQRV9NQVBQSU5HIiwiaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlIiwiem9kSnNvblNjaGVtYUNvbXBhdCIsImJ1aWxkT2JqZWN0U2NoZW1hIiwicmVhZFNoYXBlIiwiZmllbGQiLCJvcHRpb25hbCIsImNvbnZlcnRQcm9wZXJ0eSIsImN1cnJlbnQiLCJ1bndyYXBEZWNvcmF0b3JzIiwibmV4dCIsImNvbnZlcnRTY2hlbWEiLCJ1bndyYXBwZWQiLCJidWlsZEFycmF5U2NoZW1hIiwiYnVpbGRUdXBsZVNjaGVtYSIsImJ1aWxkVW5pb25TY2hlbWEiLCJidWlsZEludGVyc2VjdGlvblNjaGVtYSIsImJ1aWxkTGl0ZXJhbCIsImJ1aWxkRW51bSIsImJ1aWxkUmVjb3JkU2NoZW1hIiwiYnVpbGRNYXBTY2hlbWEiLCJidWlsZFNldFNjaGVtYSIsImJ1aWxkTnVsbGFibGVTY2hlbWEiLCJleHRyYWN0Rmlyc3QiLCJjb2VyY2VBcnJheSIsInZhbHVlU2NoZW1hIiwibGl0ZXJhbCIsInpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0Iiwiem9kVGV4dEZvcm1hdENvbXBhdCIsImJ1aWxkSnNvblNjaGVtYUZyb21ab2QiLCJpbnB1dFR5cGUiLCJ0b0Z1bmN0aW9uVG9vbE5hbWUiLCJnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIiwidXNlRmFsbGJhY2siLCJvcmlnaW5hbEVycm9yIiwiZmFsbGJhY2tTY2hlbWEiLCJyYXdJbnB1dCIsImZvcm1hdHRlZEZ1bmN0aW9uIiwiY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIiwib3V0cHV0VHlwZSIsImV4aXN0aW5nIiwib3V0cHV0IiwicyIsImgiLCJkIiwidyIsInkiLCJtcyIsInBhcnNlIiwiZm10TG9uZyIsImZtdFNob3J0Iiwic3RyIiwibWF0Y2giLCJtc0FicyIsInBsdXJhbCIsImlzUGx1cmFsIiwic2V0dXAiLCJlbnYiLCJjcmVhdGVEZWJ1ZyIsImNvZXJjZSIsImRpc2FibGUiLCJlbmFibGUiLCJlbmFibGVkIiwicmVxdWlyZSQkMCIsImRlc3Ryb3kiLCJzZWxlY3RDb2xvciIsIm5hbWVzcGFjZSIsImhhc2giLCJwcmV2VGltZSIsImVuYWJsZU92ZXJyaWRlIiwibmFtZXNwYWNlc0NhY2hlIiwiZW5hYmxlZENhY2hlIiwiZGVidWciLCJzZWxmIiwiZm9ybWF0dGVyIiwiZXh0ZW5kIiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJuYW1lc3BhY2VzIiwic3BsaXQiLCJucyIsIm1hdGNoZXNUZW1wbGF0ZSIsInNlYXJjaCIsInRlbXBsYXRlIiwic2VhcmNoSW5kZXgiLCJ0ZW1wbGF0ZUluZGV4Iiwic3RhckluZGV4IiwibWF0Y2hJbmRleCIsInNraXAiLCJjb21tb24iLCJleHBvcnRzIiwiZm9ybWF0QXJncyIsInNhdmUiLCJsb2FkIiwidXNlQ29sb3JzIiwibG9jYWxzdG9yYWdlIiwid2FybmVkIiwibW9kdWxlIiwibGFzdEMiLCJmb3JtYXR0ZXJzIiwibG9hZEVudiIsIl9sb2FkRW52IiwiaXNFbmFibGVkIiwiZmxhZ05hbWUiLCJ0cmFjaW5nIiwibG9nZ2luZyIsImRvbnRMb2dNb2RlbERhdGEiLCJkb250TG9nVG9vbERhdGEiLCJnZXRMb2dnZXIiLCJsb2dnZXIiLCJCWVRFX1BSRVZJRVdfTElNSVQiLCJ0b1NtYXJ0U3RyaW5nIiwiaXNBcnJheUJ1ZmZlckxpa2UiLCJmb3JtYXRCeXRlQXJyYXkiLCJpc0FycmF5QnVmZmVyVmlldyIsInZpZXciLCJzbWFydFN0cmluZ1JlcGxhY2VyIiwic2hhcmVkQXJyYXlCdWZmZXJDdG9yIiwiaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QiLCJpc05vZGVCdWZmZXIiLCJidWZmZXJDdG9yIiwiYnl0ZXMiLCJwcmV2aWV3TGVuZ3RoIiwicHJldmlld1BhcnRzIiwiZm9ybWF0Qnl0ZSIsImVsbGlwc2lzIiwiYnl0ZSIsIl9rZXkiLCJuZXN0ZWRWYWx1ZSIsImRlZmF1bHRUb29sRXJyb3JGdW5jdGlvbiIsImNvbnRleHQiLCJ0b29sRXJyb3JGdW5jdGlvbiIsInN0cmljdE1vZGUiLCJwYXJhbWV0ZXJzIiwiX2ludm9rZSIsInJ1bkNvbnRleHQiLCJkZXRhaWxzIiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJhZ2VudCIsInByZWRpY2F0ZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsIl9jYWNoZWRUb29scyIsImdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyIiwic2VydmVyIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsInQiLCJtY3BUb0Z1bmN0aW9uVG9vbCIsImxpc3RUb29sc0ZvclNlcnZlciIsInNwYW4iLCJmZXRjaGVkTWNwVG9vbHMiLCJtY3BUb29scyIsImZpbHRlcmVkVG9vbHMiLCJmaWx0ZXIiLCJnbG9iYWxMb2dnZXIiLCJhbGxvd2VkVG9vbE5hbWVzIiwiYmxvY2tlZFRvb2xOYW1lcyIsImFsbG93ZWQiLCJibG9ja2VkIiwidG9vbHMiLCJnZXRDdXJyZW50VHJhY2UiLCJ3aXRoTUNQTGlzdFRvb2xzU3BhbiIsImdldEFsbE1jcFRvb2xzIiwibWNwU2VydmVyc09yT3B0cyIsIm1jcFNlcnZlcnMiLCJjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMiLCJydW5Db250ZXh0RnJvbU9wdHMiLCJhZ2VudEZyb21PcHRzIiwiYWxsVG9vbHMiLCJ0b29sTmFtZXMiLCJzZXJ2ZXJUb29scyIsImludGVyc2VjdGlvbiIsIm1jcFRvb2wiLCJfY29udGV4dCIsInN0cmljdFNjaGVtYSIsIm5vblN0cmljdFNjaGVtYSIsIm91dCIsIkJyb3dzZXJFdmVudEVtaXR0ZXIiLCJfX3ByaXZhdGVBZGQiLCJfdGFyZ2V0IiwiX2xpc3RlbmVyV3JhcHBlcnMiLCJsaXN0ZW5lciIsImV2ZW50VHlwZSIsImxpc3RlbmVyc0ZvclR5cGUiLCJfX3ByaXZhdGVHZXQiLCJ3cmFwcGVycyIsIndyYXBwZXIiLCJldmVudCIsImhhbmRsZXIiLCJyYW5kb21VVUlEIiwiUmVhZGFibGUiLCJfZGVzdGluYXRpb24iLCJfdHJhbnNmb3JtIiwiUmVhZGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJBc3luY0xvY2FsU3RvcmFnZSIsIkJyb3dzZXJUaW1lciIsInRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJ0aW1lciIsIkV2ZW50RW1pdHRlckRlbGVnYXRlIiwiQWdlbnRIb29rcyIsIlJ1bnRpbWVFdmVudEVtaXR0ZXIiLCJSdW5Ib29rcyIsIk9QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FIiwiZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQiLCJtb2RlbE5hbWUiLCJpc0dwdDVEZWZhdWx0IiwiZ2V0RGVmYXVsdE1vZGVsIiwiZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MiLCJtb2RlbCIsIl9tb2RlbCIsImdldFRyYW5zZmVyTWVzc2FnZSIsImRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUiLCJkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbiIsIkhhbmRvZmYiLCJvbkludm9rZUhhbmRvZmYiLCJoYW5kb2ZmIiwiY29uZmlnIiwiaGFzT25IYW5kb2ZmIiwiaGFzSW5wdXRUeXBlIiwiaW5wdXRKc29uU3RyaW5nIiwiYWRkRXJyb3JUb0N1cnJlbnRTcGFuIiwiZ2V0SGFuZG9mZiIsImdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UiLCJvdXRwdXRNZXNzYWdlIiwibGFzdEl0ZW0iLCJnZXRPdXRwdXRUZXh0IiwiYWdlbnRUb29sUnVuUmVzdWx0cyIsInNhdmVBZ2VudFRvb2xSdW5SZXN1bHQiLCJ0b29sQ2FsbCIsInJ1blJlc3VsdCIsImNvbnN1bWVBZ2VudFRvb2xSdW5SZXN1bHQiLCJBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSIsIl9BZ2VudCIsIm91dHB1dFR5cGVzIiwidG9vbE5hbWUiLCJ0b29sRGVzY3JpcHRpb24iLCJjdXN0b21PdXRwdXRFeHRyYWN0b3IiLCJydW5Db25maWciLCJydW5PcHRpb25zIiwiY29tcGxldGVkUmVzdWx0IiwiUnVubmVyIiwidXNlc1N0b3BBdFRvb2xOYW1lcyIsIm91dHB1dFRleHQiLCJlbmFibGVkVG9vbHMiLCJtYXliZUlzRW5hYmxlZCIsImhhbmRvZmZzIiwiQWdlbnQiLCJkZWZpbmVJbnB1dEd1YXJkcmFpbCIsImV4ZWN1dGUiLCJydW5JblBhcmFsbGVsIiwiZGVmaW5lT3V0cHV0R3VhcmRyYWlsIiwiZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIiLCJTaGFyZWRCYXNlIiwiSXRlbUJhc2UiLCJSZWZ1c2FsIiwiT3V0cHV0VGV4dCIsIklucHV0VGV4dCIsIlJlYXNvbmluZ1RleHQiLCJJbnB1dEltYWdlIiwielxuICAgICAgICAvLyAxLiBpbWFnZSBkYXRhXG4gICAgICAgIC5zdHJpbmciLCJJbnB1dEZpbGUiLCJ6XG4gICAgICAgIC8vIDEuIGZpbGUgZGF0YVxuICAgICAgICAuc3RyaW5nIiwiQXVkaW9Db250ZW50IiwielxuICAgICAgICAuc3RyaW5nIiwiSW1hZ2VDb250ZW50IiwiVG9vbE91dHB1dFRleHQiLCJJbWFnZURhdGFPYmplY3RTY2hlbWEiLCJ6XG4gICAgICAgIC51bmlvbiIsInouaW5zdGFuY2VvZiIsIkltYWdlVXJsT2JqZWN0U2NoZW1hIiwiSW1hZ2VGaWxlSWRPYmplY3RTY2hlbWEiLCJJbWFnZU9iamVjdFNjaGVtYSIsInpcbiAgICAudW5pb24iLCJGaWxlRGF0YU9iamVjdFNjaGVtYSIsIkZpbGVVcmxPYmplY3RTY2hlbWEiLCJGaWxlSWRPYmplY3RTY2hlbWEiLCJGaWxlUmVmZXJlbmNlU2NoZW1hIiwielN0cmluZ1dpdGhIaW50cyIsIl9oaW50cyIsIlRvb2xPdXRwdXRJbWFnZSIsIlRvb2xPdXRwdXRGaWxlQ29udGVudCIsIkNvbXB1dGVyVG9vbE91dHB1dCIsImNvbXB1dGVyQWN0aW9ucyIsInouZGlzY3JpbWluYXRlZFVuaW9uIiwiei5udW1iZXIiLCJ6LmVudW0iLCJBc3Npc3RhbnRDb250ZW50IiwiTWVzc2FnZUJhc2UiLCJBc3Npc3RhbnRNZXNzYWdlSXRlbSIsIlVzZXJDb250ZW50IiwiVXNlck1lc3NhZ2VJdGVtIiwiU3lzdGVtTWVzc2FnZUl0ZW0iLCJIb3N0ZWRUb29sQ2FsbEl0ZW0iLCJGdW5jdGlvbkNhbGxJdGVtIiwiVG9vbENhbGxPdXRwdXRDb250ZW50IiwiVG9vbENhbGxTdHJ1Y3R1cmVkT3V0cHV0IiwiRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSIsIkNvbXB1dGVyVXNlQ2FsbEl0ZW0iLCJDb21wdXRlckNhbGxSZXN1bHRJdGVtIiwiU2hlbGxBY3Rpb24iLCJTaGVsbENhbGxJdGVtIiwiU2hlbGxDYWxsT3V0Y29tZSIsIlNoZWxsQ2FsbE91dHB1dENvbnRlbnQiLCJ6XG4gICAgLm9iamVjdCIsIlNoZWxsQ2FsbFJlc3VsdEl0ZW0iLCJBcHBseVBhdGNoT3BlcmF0aW9uQ3JlYXRlRmlsZSIsIkFwcGx5UGF0Y2hPcGVyYXRpb25VcGRhdGVGaWxlIiwiQXBwbHlQYXRjaE9wZXJhdGlvbkRlbGV0ZUZpbGUiLCJBcHBseVBhdGNoT3BlcmF0aW9uIiwiQXBwbHlQYXRjaENhbGxJdGVtIiwiQXBwbHlQYXRjaENhbGxSZXN1bHRJdGVtIiwiVG9vbENhbGxJdGVtIiwiUmVhc29uaW5nSXRlbSIsIlVua25vd25JdGVtIiwiT3V0cHV0TW9kZWxJdGVtIiwiTW9kZWxJdGVtIiwiei51bmlvbiIsIlJlcXVlc3RVc2FnZURhdGEiLCJVc2FnZURhdGEiLCJTdHJlYW1FdmVudFRleHRTdHJlYW0iLCJTdHJlYW1FdmVudFJlc3BvbnNlU3RhcnRlZCIsIlN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQiLCJTdHJlYW1FdmVudEdlbmVyaWNJdGVtIiwiUmVxdWVzdFVzYWdlIiwiaW5wdXRUb2tlbnNEZXRhaWxzIiwib3V0cHV0VG9rZW5zRGV0YWlscyIsIlVzYWdlIiwicmVxdWVzdFVzYWdlRW50cmllcyIsIm5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzIiwibmV3VXNhZ2UiLCJSdW5Db250ZXh0IiwiX2FwcHJvdmFscyIsIl9fcHJpdmF0ZVNldCIsImFwcHJvdmFscyIsImFwcHJvdmFsIiwiY2FsbElkIiwiYXBwcm92YWxFbnRyeSIsImluZGl2aWR1YWxDYWxsQXBwcm92YWwiLCJpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiIsImFwcHJvdmFsSXRlbSIsImFsd2F5c0FwcHJvdmUiLCJhbHdheXNSZWplY3QiLCJzZXJpYWxpemVUb29sIiwic2VyaWFsaXplSGFuZG9mZiIsIlJ1bkl0ZW1CYXNlIiwiUnVuTWVzc2FnZU91dHB1dEl0ZW0iLCJyYXdJdGVtIiwicGFydCIsIlJ1blRvb2xDYWxsSXRlbSIsIlJ1blRvb2xDYWxsT3V0cHV0SXRlbSIsIlJ1blJlYXNvbmluZ0l0ZW0iLCJSdW5IYW5kb2ZmQ2FsbEl0ZW0iLCJSdW5IYW5kb2ZmT3V0cHV0SXRlbSIsInNvdXJjZUFnZW50IiwidGFyZ2V0QWdlbnQiLCJSdW5Ub29sQXBwcm92YWxJdGVtIiwiX3dpdGhTcGFuRmFjdG9yeSIsImNyZWF0ZVNwYW4iLCJ3aXRoTmV3U3BhbkNvbnRleHQiLCJzZXRDdXJyZW50U3BhbiIsInJlc2V0Q3VycmVudFNwYW4iLCJjcmVhdGVBZ2VudFNwYW4iLCJnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIiwiY3JlYXRlRnVuY3Rpb25TcGFuIiwid2l0aEZ1bmN0aW9uU3BhbiIsImNyZWF0ZUhhbmRvZmZTcGFuIiwid2l0aEhhbmRvZmZTcGFuIiwiY3JlYXRlR3VhcmRyYWlsU3BhbiIsIndpdGhHdWFyZHJhaWxTcGFuIiwiY3JlYXRlTUNQTGlzdFRvb2xzU3BhbiIsImVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCIsImdsb2JhbEJ1ZmZlciIsImJpbmFyeSIsImNoYXJzIiwiYzEiLCJjMiIsImMzIiwiZW5jMSIsImVuYzIiLCJlbmMzIiwiZW5jNCIsIlJ1blJhd01vZGVsU3RyZWFtRXZlbnQiLCJSdW5JdGVtU3RyZWFtRXZlbnQiLCJSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCIsImlzQXBwcm92YWxJdGVtTGlrZSIsIml0ZW1UeXBlIiwiZ2V0QXBwcm92YWxJZGVudGl0eSIsInByb3ZpZGVyRGF0YSIsImFnZW50TmFtZSIsImZvcm1hdEZpbmFsT3V0cHV0VHlwZUVycm9yIiwiei5ab2RFcnJvciIsImlzc3VlUGF0aFBhcnRzIiwiaXNzdWVQYXRoIiwidHJ1bmNhdGVGb3JEZXZlbG9wZXIiLCJ0cmltbWVkIiwicHJvY2Vzc01vZGVsUmVzcG9uc2UiLCJtb2RlbFJlc3BvbnNlIiwicnVuSGFuZG9mZnMiLCJydW5GdW5jdGlvbnMiLCJydW5Db21wdXRlckFjdGlvbnMiLCJydW5TaGVsbEFjdGlvbnMiLCJydW5BcHBseVBhdGNoQWN0aW9ucyIsInJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMiLCJ0b29sc1VzZWQiLCJoYW5kb2ZmTWFwIiwiZnVuY3Rpb25NYXAiLCJjb21wdXRlclRvb2wiLCJzaGVsbFRvb2wiLCJhcHBseVBhdGNoVG9vbCIsIm1jcFRvb2xNYXAiLCJtY3BTZXJ2ZXJMYWJlbCIsIm1jcFNlcnZlclRvb2wiLCJmdW5jdGlvblRvb2wiLCJuZXh0U3RlcFNjaGVtYSIsIlNpbmdsZVN0ZXBSZXN1bHQiLCJvcmlnaW5hbElucHV0IiwicHJlU3RlcEl0ZW1zIiwibmV3U3RlcEl0ZW1zIiwibmV4dFN0ZXAiLCJtYXliZVJlc2V0VG9vbENob2ljZSIsInRvb2xVc2VUcmFja2VyIiwibW9kZWxTZXR0aW5ncyIsInJlc29sdmVJbnRlcnJ1cHRlZFR1cm4iLCJvcmlnaW5hbFByZVN0ZXBJdGVtcyIsIm5ld1Jlc3BvbnNlIiwicHJvY2Vzc2VkUmVzcG9uc2UiLCJydW5uZXIiLCJmdW5jdGlvbkNhbGxJZHMiLCJwZW5kaW5nQXBwcm92YWxJdGVtcyIsInBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMiLCJpZGVudGl0eSIsInJld2luZENvdW50IiwiZnVuY3Rpb25Ub29sUnVucyIsInJ1biIsImZ1bmN0aW9uUmVzdWx0cyIsImV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyIsImNvbXB1dGVyUmVzdWx0cyIsImV4ZWN1dGVDb21wdXRlckFjdGlvbnMiLCJvcmlnaW5hbFByZVN0ZXBJdGVtU2V0IiwibmV3SXRlbXMiLCJuZXdJdGVtc1NldCIsImFwcGVuZElmTmV3IiwibWNwQXBwcm92YWxSdW5zIiwicGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFscyIsInBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbElkcyIsImFwcHJvdmFsUmVxdWVzdElkIiwiYXBwcm92ZWQiLCJyZXNwb25zZUl0ZW0iLCJjb21wbGV0ZWRTdGVwIiwibWF5YmVDb21wbGV0ZVR1cm5Gcm9tVG9vbFJlc3VsdHMiLCJyZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZSIsInNlZW5JdGVtcyIsInNoZWxsUmVzdWx0cyIsImFwcGx5UGF0Y2hSZXN1bHRzIiwiZXhlY3V0ZVNoZWxsQWN0aW9ucyIsImV4ZWN1dGVBcHBseVBhdGNoT3BlcmF0aW9ucyIsImFwcHJvdmFsUmVxdWVzdCIsInRvb2xEYXRhIiwicmVxdWVzdERhdGEiLCJhcHByb3ZhbFJlc3VsdCIsImFwcHJvdmFsUmVzcG9uc2VEYXRhIiwiZXhlY3V0ZUhhbmRvZmZDYWxscyIsIm1lc3NhZ2VJdGVtcyIsInBvdGVudGlhbEZpbmFsT3V0cHV0Iiwib3V0cHV0RXJyb3JNZXNzYWdlIiwidG9vbE91dGNvbWUiLCJjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzIiwiZ2V0VG9vbENhbGxPdXRwdXRJdGVtIiwibWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cyIsIm5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0cyIsInN0cnVjdHVyZWRJdGVtcyIsImNvbnZlcnRTdHJ1Y3R1cmVkVG9vbE91dHB1dFRvSW5wdXRJdGVtIiwibm9ybWFsaXplRmlsZVZhbHVlIiwiZGlyZWN0RmlsZSIsIm5vcm1hbGl6ZWRPYmplY3QiLCJub3JtYWxpemVGaWxlT2JqZWN0Q2FuZGlkYXRlIiwibGVnYWN5VmFsdWUiLCJub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUiLCJpc1JlY29yZCIsImRhdGFWYWx1ZSIsImhhc1N0cmluZ0RhdGEiLCJoYXNCaW5hcnlEYXRhIiwiaXNOb25FbXB0eVN0cmluZyIsInJlZmVyZW5jZWRJZCIsImZpbGVuYW1lIiwibWVkaWFUeXBlIiwidG9JbmxpbmVJbWFnZVN0cmluZyIsImFzRGF0YVVybCIsInRvb2xSdW5zIiwicnVuU2luZ2xlVG9vbCIsInRvb2xSdW4iLCJwYXJzZWRBcmdzIiwicmVzcG9uc2UiLCJ0b29sT3V0cHV0IiwiZnVuY3Rpb25SZXN1bHQiLCJuZXN0ZWRSdW5SZXN1bHQiLCJuZXN0ZWRJbnRlcnJ1cHRpb25zIiwiX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdCIsImNvbXB1dGVyIiwiYWN0aW9uIiwic2NyZWVuc2hvdCIsInRvRXJyb3JNZXNzYWdlIiwiYWN0aW9ucyIsImN1c3RvbUxvZ2dlciIsIl9sb2dnZXIiLCJkZWNpc2lvbiIsInJlamVjdGlvbk91dHB1dCIsInNoZWxsT3V0cHV0cyIsInByb3ZpZGVyTWV0YSIsIm1heE91dHB1dExlbmd0aCIsInNoZWxsUmVzdWx0IiwiaW1hZ2VVcmwiLCJhY3R1YWxIYW5kb2ZmIiwiaGFuZG9mZlNwYW4iLCJuZXdBZ2VudCIsInJlcXVlc3RlZEFnZW50cyIsImlucHV0RmlsdGVyIiwiaGFuZG9mZklucHV0RGF0YSIsIk5PVF9GSU5BTF9PVVRQVVQiLCJ0b29sUmVzdWx0cyIsImludGVycnVwdGlvbnMiLCJmaXJzdFRvb2xSZXN1bHQiLCJ0b29sVXNlQmVoYXZpb3IiLCJzdG9wcGluZ1Rvb2wiLCJnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lIiwiZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudCIsIml0ZW1OYW1lIiwic3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQiLCJhZGRTdGVwVG9SdW5SZXN1bHQiLCJza2lwcGVkSXRlbXMiLCJBZ2VudFRvb2xVc2VUcmFja2VyIiwiX2FnZW50VG9Ub29scyIsInRvSW5wdXRJdGVtTGlzdCIsImV4dHJhY3RPdXRwdXRJdGVtc0Zyb21SdW5JdGVtcyIsIm5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlIiwic2FuaXRpemVWYWx1ZUZvclNlc3Npb24iLCJzdHJpcFRyYW5zaWVudENhbGxJZHMiLCJ0b1VpbnQ4QXJyYXlJZkJpbmFyeSIsInRvRGF0YVVybEZyb21CeXRlcyIsImlzUGxhaW5PYmplY3QiLCJyZWNvcmQiLCJuZXh0Q29udGV4dCIsInNuYXBzaG90IiwicHJvdG8iLCJzaG91bGRTdHJpcElkIiwic2hvdWxkU3RyaXBJZEZvclR5cGUiLCJzYXZlVG9TZXNzaW9uIiwic2Vzc2lvbiIsInNlc3Npb25JbnB1dEl0ZW1zIiwiaW5wdXRJdGVtcyIsImFscmVhZHlQZXJzaXN0ZWQiLCJuZXdSdW5JdGVtcyIsIm91dHB1dEl0ZW1zIiwiaXRlbXNUb1NhdmUiLCJzYW5pdGl6ZWRJdGVtcyIsInNhdmVTdHJlYW1JbnB1dFRvU2Vzc2lvbiIsInNhbml0aXplZElucHV0Iiwic2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbiIsInByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24iLCJzZXNzaW9uSW5wdXRDYWxsYmFjayIsImluY2x1ZGVIaXN0b3J5SW5QcmVwYXJlZElucHV0IiwicHJlc2VydmVEcm9wcGVkTmV3SXRlbXMiLCJoaXN0b3J5IiwibmV3SW5wdXRJdGVtcyIsImhpc3RvcnlTbmFwc2hvdCIsIm5ld0lucHV0U25hcHNob3QiLCJoaXN0b3J5Q291bnRzIiwiYnVpbGRJdGVtRnJlcXVlbmN5TWFwIiwibmV3SW5wdXRDb3VudHMiLCJoaXN0b3J5UmVmcyIsImJ1aWxkSXRlbVJlZmVyZW5jZU1hcCIsIm5ld0lucHV0UmVmcyIsImFwcGVuZGVkIiwic2Vzc2lvbkl0ZW1LZXkiLCJjb25zdW1lUmVmZXJlbmNlIiwiZGVjcmVtZW50Q291bnQiLCJoaXN0b3J5UmVtYWluaW5nIiwibmV3UmVtYWluaW5nIiwic3RydWN0dXJlZCIsIm5vcm1hbGl6ZWQiLCJub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dCIsImltYWdlU3RyaW5nIiwiaW1hZ2VGaWxlSWQiLCJmYWxsYmFja0ltYWdlTWVkaWFUeXBlIiwiaW1hZ2VGaWVsZCIsImltYWdlT2JqIiwiaW5saW5lTWVkaWFUeXBlIiwiY2FuZGlkYXRlSWQiLCJmaWxlVmFsdWUiLCJjb3VudHMiLCJsaXN0IiwiY2FuZGlkYXRlcyIsInJlbWFpbmluZyIsInNlc3Npb25TZXJpYWxpemF0aW9uUmVwbGFjZXIiLCJDVVJSRU5UX1NDSEVNQV9WRVJTSU9OIiwiJHNjaGVtYVZlcnNpb24iLCJzZXJpYWxpemVkQWdlbnRTY2hlbWEiLCJzZXJpYWxpemVkU3BhbkJhc2UiLCJ6XG4gICAgICAgIC5vYmplY3QiLCJTZXJpYWxpemVkU3BhbiIsInoubGF6eSIsInJlcXVlc3RVc2FnZVNjaGVtYSIsInVzYWdlU2NoZW1hIiwibW9kZWxSZXNwb25zZVNjaGVtYSIsInByb3RvY29sLk91dHB1dE1vZGVsSXRlbSIsIml0ZW1TY2hlbWEiLCJwcm90b2NvbC5Bc3Npc3RhbnRNZXNzYWdlSXRlbSIsInByb3RvY29sLlRvb2xDYWxsSXRlbSIsInByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5SZWFzb25pbmdJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSIsInByb3RvY29sLlNoZWxsQ2FsbEl0ZW0iLCJwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0iLCJzZXJpYWxpemVkVHJhY2VTY2hlbWEiLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEiLCJ6XG4gICAgICAgIC5hcnJheSIsImd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwiaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJTZXJpYWxpemVkUnVuU3RhdGUiLCJwcm90b2NvbC5Nb2RlbEl0ZW0iLCJSdW5TdGF0ZSIsInN0YXJ0aW5nQWdlbnQiLCJtYXhUdXJucyIsImdldFR1cm5JbnB1dCIsImluaXRpYWxBZ2VudCIsInBhcnNpbmdFcnJvciIsImpzb25SZXN1bHQiLCJjdXJyZW50U2NoZW1hVmVyc2lvbiIsInN0YXRlSnNvbiIsImFnZW50TWFwIiwiYnVpbGRBZ2VudE1hcCIsImN1cnJlbnRBZ2VudCIsInRyYWNlIiwiZGVzZXJpYWxpemVTcGFuIiwiZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlIiwiZGVzZXJpYWxpemVJdGVtIiwiZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZSIsInF1ZXVlIiwic2VyaWFsaXplZFNwYW4iLCJzcGFuRGF0YSIsInByZXZpb3VzU3BhbiIsInNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlIiwic2VyaWFsaXplZEl0ZW0iLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UiLCJjb21wdXRlclRvb2xzIiwic2hlbGxUb29scyIsImFwcGx5UGF0Y2hUb29scyIsImZ1bmN0aW9uQ2FsbCIsImNvbXB1dGVyQWN0aW9uIiwic2hlbGxBY3Rpb24iLCJhcHBseVBhdGNoQWN0aW9uIiwiX1J1bm5lcl9pbnN0YW5jZXMiLCJyZXNvbHZlZE9wdGlvbnMiLCJjYWxsTW9kZWxJbnB1dEZpbHRlciIsImhhc0NhbGxNb2RlbElucHV0RmlsdGVyIiwiZWZmZWN0aXZlT3B0aW9ucyIsInNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24iLCJyZXN1bWluZ0Zyb21TdGF0ZSIsInNlc3Npb25JbnB1dE9yaWdpbmFsU25hcHNob3QiLCJzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90Iiwic2Vzc2lvbklucHV0UGVuZGluZ1dyaXRlQ291bnRzIiwicmVjb3JkU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UiLCJzb3VyY2VJdGVtcyIsImZpbHRlcmVkSXRlbXMiLCJwZW5kaW5nV3JpdGVDb3VudHMiLCJwZXJzaXN0YWJsZUl0ZW1zIiwic291cmNlT2NjdXJyZW5jZUNvdW50cyIsIm5leHRDb3VudCIsImNvbnN1bWVBbnlQZW5kaW5nV3JpdGVTbG90IiwiZmlsdGVyZWRJdGVtIiwiYWxsb2NhdGVkIiwicGVuZGluZ09jY3VycmVuY2VzIiwic291cmNlS2V5IiwiZ2V0QWdlbnRJbnB1dEl0ZW1LZXkiLCJmaWx0ZXJlZEtleSIsImZpbHRlcmVkUmVtYWluaW5nIiwicmVzb2x2ZVNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlIiwicHJlcGFyZWRJbnB1dCIsInByZXBhcmVkIiwic2Vzc2lvbkl0ZW1zIiwiZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQiLCJwZXJzaXN0ZWQiLCJpdGVtc1RvUGVyc2lzdCIsImV4ZWN1dGVSdW4iLCJfX3ByaXZhdGVNZXRob2QiLCJydW5JbmRpdmlkdWFsU3RyZWFtX2ZuIiwicnVuSW5kaXZpZHVhbE5vblN0cmVhbV9mbiIsIndpdGhUcmFjZSIsImdldE9yQ3JlYXRlVHJhY2UiLCJnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zX2ZuIiwic3BsaXRJbnB1dEd1YXJkcmFpbHNfZm4iLCJndWFyZHJhaWxzIiwiYmxvY2tpbmciLCJwYXJhbGxlbCIsImd1YXJkcmFpbCIsInJlc29sdmVNb2RlbEZvckFnZW50X2ZuIiwiZXhwbGljdGx5TW9kZWxTZXQiLCJyZXNvbHZlZE1vZGVsIiwic2VsZWN0TW9kZWwiLCJzZXNzaW9uSW5wdXRVcGRhdGUiLCJpc1Jlc3VtZWRTdGF0ZSIsIkRFRkFVTFRfTUFYX1RVUk5TIiwic2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciIsIlNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIiLCJ0dXJuUmVzdWx0IiwiUnVuUmVzdWx0IiwiYXJ0aWZhY3RzIiwicHJlcGFyZUFnZW50QXJ0aWZhY3RzIiwicGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlIiwicnVuSW5wdXRHdWFyZHJhaWxzX2ZuIiwidHVybklucHV0IiwicHJlcGFyZWRDYWxsIiwicHJlcGFyZU1vZGVsQ2FsbF9mbiIsImdldFRyYWNpbmciLCJydW5PdXRwdXRHdWFyZHJhaWxzX2ZuIiwicnVuU3RyZWFtTG9vcF9mbiIsImhhbmRlZElucHV0VG9Nb2RlbCIsInN0cmVhbUlucHV0UGVyc2lzdGVkIiwicGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQiLCJndWFyZHJhaWxFcnJvciIsImZpbmFsUmVzcG9uc2UiLCJwcmVUb29sSXRlbXMiLCJTdHJlYW1lZFJ1blJlc3VsdCIsInN0cmVhbUxvb3BQcm9taXNlIiwiZ3VhcmRyYWlsc092ZXJyaWRlIiwiZ3VhcmRyYWlsQXJncyIsImFnZW50T3V0cHV0IiwiYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbCIsInN5c3RlbUluc3RydWN0aW9ucyIsInByb21wdCIsIm1vZGVsSW5wdXQiLCJwZXJzaXN0ZWRJdGVtcyIsImZpbHRlckFwcGxpZWQiLCJhcHBseUNhbGxNb2RlbElucHV0RmlsdGVyIiwicHJldmlvdXNSZXNwb25zZUlkIiwiY29udmVyc2F0aW9uSWQiLCJnZW5lcmF0ZWRJdGVtcyIsInJhd0l0ZW1zIiwidG9BZ2VudElucHV0TGlzdCIsImFnZW50TW9kZWwiLCJydW5Db25maWdNb2RlbCIsInRyYWNpbmdEaXNhYmxlZCIsInRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEiLCJjbG9uZUlucHV0SXRlbXMiLCJjbG9uZWQiLCJjbG9uZU1hcCIsIm9yaWdpbmFsUG9vbCIsImJ1aWxkQWdlbnRJbnB1dFBvb2wiLCJmYWxsYmFja09yaWdpbmFscyIsInJlbW92ZUZyb21GYWxsYmFjayIsIm9yaWdpbmFsIiwidGFrZUZhbGxiYWNrT3JpZ2luYWwiLCJyZW1vdmVBZ2VudElucHV0RnJvbVBvb2wiLCJtYXRjaGVkQnlDb250ZW50IiwidGFrZUFnZW50SW5wdXRGcm9tUG9vbCIsImZhbGxiYWNrIiwiY2xvbmVkRmlsdGVyZWRJbnB1dCIsIm1vZGVsUmVzcG9uc2VzIiwibGF0ZXN0UmVzcG9uc2UiLCJpbml0aWFsSXRlbXMiLCJkZWxpdmVyZWQiLCJhZ2VudE1vZGVsU2V0dGluZ3MiLCJydW5uZXJNb2RlbCIsImNvcGllZE1vZGVsU2V0dGluZ3MiLCJfZyIsIl9oIiwiaGFuZG9mZk5hbWVzIiwiYWdlbnRJbnB1dFNlcmlhbGl6YXRpb25SZXBsYWNlciIsInBvb2wiLCJSdW5SZXN1bHRCYXNlIiwicmVzcG9uc2VzIiwiX2Vycm9yIiwiX3NpZ25hbCIsIl9yZWFkYWJsZUNvbnRyb2xsZXIiLCJfcmVhZGFibGVTdHJlYW0iLCJfY29tcGxldGVkUHJvbWlzZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVzb2x2ZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVqZWN0IiwiX2NhbmNlbGxlZCIsIl9zdHJlYW1Mb29wUHJvbWlzZSIsIl9SZWFkYWJsZVN0cmVhbSIsImNvbnRyb2xsZXIiLCJyZXNvbHZlIiwicmVqZWN0IiwiaGFuZGxlQWJvcnQiLCJzdHJlYW0iLCJwcm9taXNlIiwiX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImN1cnJlbnRUcmFjZSIsIl93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUiLCJuZXdUcmFjZSIsInNwYW5FcnJvciIsImNsb25lQ3VycmVudENvbnRleHQiLCJjdXJyZW50Q29udGV4dCIsImNvcHlPZkNvbnRleHQiLCJDb25zb2xlU3BhbkV4cG9ydGVyIiwiQmF0Y2hUcmFjZVByb2Nlc3NvciIsImV4cG9ydGVyIiwibWF4UXVldWVTaXplIiwibWF4QmF0Y2hTaXplIiwic2NoZWR1bGVEZWxheSIsImV4cG9ydFRyaWdnZXJSYXRpbyIsIl9CYXRjaFRyYWNlUHJvY2Vzc29yX2luc3RhbmNlcyIsIl9tYXhRdWV1ZVNpemUiLCJfbWF4QmF0Y2hTaXplIiwiX3NjaGVkdWxlRGVsYXkiLCJfZXhwb3J0VHJpZ2dlclNpemUiLCJfZXhwb3J0ZXIiLCJfYnVmZmVyIiwiX3RpbWVyIiwiX3RpbWVvdXQiLCJfZXhwb3J0SW5Qcm9ncmVzcyIsIl90aW1lb3V0QWJvcnRDb250cm9sbGVyIiwicnVuRXhwb3J0TG9vcF9mbiIsInNhZmVBZGRJdGVtX2ZuIiwiX3RyYWNlIiwiX3NwYW4iLCJleHBvcnRCYXRjaGVzX2ZuIiwiZm9yY2UiLCJ0b0V4cG9ydCIsImJhdGNoIiwiTXVsdGlUcmFjaW5nUHJvY2Vzc29yIiwiX3Byb2Nlc3NvcnMiLCJwcm9jZXNzb3IiLCJwcm9jZXNzb3JzIiwiX2RlZmF1bHRFeHBvcnRlciIsIl9kZWZhdWx0UHJvY2Vzc29yIiwiZGVmYXVsdEV4cG9ydGVyIiwiZGVmYXVsdFByb2Nlc3NvciIsInRpbWVJc28iLCJnZW5lcmF0ZVRyYWNlSWQiLCJnZW5lcmF0ZVNwYW5JZCIsInJlbW92ZVByaXZhdGVGaWVsZHMiLCJfU3BhbiIsIl9kYXRhIiwiX3RyYWNlSWQiLCJfc3BhbklkIiwiX3BhcmVudElkIiwiX3Byb2Nlc3NvciIsIl9zdGFydGVkQXQiLCJfZW5kZWRBdCIsIl9wcmV2aW91c1NwYW4iLCJTcGFuIiwiTm9vcFNwYW4iLCJfVHJhY2UiLCJfc3RhcnRlZCIsIlRyYWNlIiwiTm9vcFRyYWNlIiwiVHJhY2VQcm92aWRlciIsIl9UcmFjZVByb3ZpZGVyX2luc3RhbmNlcyIsIl9tdWx0aVByb2Nlc3NvciIsIl9kaXNhYmxlZCIsImFkZENsZWFudXBMaXN0ZW5lcnNfZm4iLCJkaXNhYmxlZCIsInRyYWNlT3B0aW9ucyIsInRyYWNlSWQiLCJzcGFuT3B0aW9ucyIsInBhcmVudElkIiwiY2xlYW51cCIsImhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyIsInJlYXNvbiIsImhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzIiwiR0xPQkFMX1RSQUNFX1BST1ZJREVSIiwiYWRkVHJhY2VQcm9jZXNzb3IiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiYmluYXJ5U3RyaW5nIiwiYXJyYXlCdWZmZXJUb0Jhc2U2NCIsImFycmF5QnVmZmVyIiwiZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlIiwibGFzdENvbnRlbnRJdGVtIiwiZGlmZlJlYWx0aW1lSGlzdG9yeSIsIm9sZEhpc3RvcnkiLCJuZXdIaXN0b3J5IiwicmVtb3ZhbHMiLCJhZGRpdGlvbnMiLCJvbGRJdGVtIiwidXBkYXRlcyIsImhhc1dlYlJUQ1N1cHBvcnQiLCJyZW1vdmVBdWRpb0Zyb21Db250ZW50IiwicHJlc2VydmVBc3Npc3RhbnRBdWRpb1RyYW5zY3JpcHRzIiwibWVyZ2VkQ29udGVudCIsInByZXZpb3VzRW50cnkiLCJ1cGRhdGVSZWFsdGltZUhpc3RvcnkiLCJzaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwidXBkYXRlZENvbnRlbnQiLCJuZXdFdmVudCIsImV4aXN0aW5nSW5kZXgiLCJleGlzdGluZ0l0ZW0iLCJtZXJnZWRFdmVudCIsImlkeCIsInByZXZJbmRleCIsIkhFQURFUlMiLCJXRUJTT0NLRVRfTUVUQSIsInJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0iLCJhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtIiwiaXRlbUlkIiwic2VydmVyTGFiZWwiLCJSZWFsdGltZUFnZW50IiwiZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyIsInNldHRpbmdzIiwiZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwiLCJwb2xpY3lIaW50SW5wdXQiLCJiYXNlR3VhcmRyYWlsIiwicG9saWN5SGludCIsImdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlIiwiaXNEZWZpbmVkIiwiaXNEZXByZWNhdGVkQ29uZmlnIiwidG9OZXdTZXNzaW9uQ29uZmlnIiwiaW5wdXRDb25maWciLCJub3JtYWxpemVBdWRpb0Zvcm1hdCIsInJlcXVlc3RlZE91dHB1dFZvaWNlIiwib3V0cHV0Q29uZmlnIiwiZiIsInJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEiLCJyZWFsdGltZVRvb2xDYWxsSXRlbSIsInJlYWx0aW1lTWNwQ2FsbEl0ZW0iLCJyZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtIiwicmVhbHRpbWVSZXNwb25zZSIsInpcbiAgICAgICAgICAgIC5vYmplY3QiLCJ6XG4gICAgICAgIC5lbnVtIiwiY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtU2NoZW1hIiwiY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSIsImVycm9yRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSIsIm91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsInJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hIiwic2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbENvbXBsZXRlZEV2ZW50U2NoZW1hIiwibWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEiLCJnZW5lcmljRXZlbnRTY2hlbWEiLCJyZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hIiwicGFyc2VSZWFsdGltZUV2ZW50IiwicmF3IiwiZ2VuZXJpY1BhcnNlZCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUciLCJfT3BlbkFJUmVhbHRpbWVCYXNlIiwiX2FwaUtleSIsIl90cmFjaW5nQ29uZmlnIiwiX3Jhd1Nlc3Npb25Db25maWciLCJhcGlLZXkiLCJpc0dlbmVyaWMiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInRvdGFsVG9rZW5zIiwidXNhZ2UiLCJwcmV2aW91c0l0ZW1JZCIsIm1jcEFwcHJvdmFsUmVxdWVzdCIsIm1jcENhbGwiLCJyZWFsdGltZUl0ZW0iLCJvdGhlckV2ZW50RGF0YSIsInRyaWdnZXJSZXNwb25zZSIsImltYWdlIiwibmV3Q29uZmlnIiwic2Vzc2lvbkRhdGEiLCJfaiIsIl9pIiwiX2wiLCJfbiIsIl9tIiwiX3AiLCJfbyIsIl9yIiwiX3EiLCJfdCIsIl9zIiwiX3YiLCJfdSIsIl93IiwiX3oiLCJfeSIsIl9CIiwiX0EiLCJjcmVhdGVSZXNwb25zZSIsImNyZWF0ZV9yZXNwb25zZSIsImVhZ2VybmVzcyIsImludGVycnVwdFJlc3BvbnNlIiwiaW50ZXJydXB0X3Jlc3BvbnNlIiwicHJlZml4UGFkZGluZ01zIiwicHJlZml4X3BhZGRpbmdfbXMiLCJzaWxlbmNlRHVyYXRpb25NcyIsInNpbGVuY2VfZHVyYXRpb25fbXMiLCJ0aHJlc2hvbGQiLCJpZGxlVGltZW91dE1zIiwiaWRsZV90aW1lb3V0X21zIiwidHJhY2luZ0NvbmZpZyIsInN0YXJ0UmVzcG9uc2UiLCJhdWRpbyIsImNvbW1pdCIsInJlbW92YWxJZHMiLCJ1cGRhdGUiLCJhZGRpdGlvbnNBbmRVcGRhdGVzIiwiYWRkaXRpb24iLCJpdGVtRW50cnkiLCJPcGVuQUlSZWFsdGltZUJhc2UiLCJPcGVuQUlSZWFsdGltZVdlYlJUQyIsIl91cmwiLCJfc3RhdGUiLCJfdXNlSW5zZWN1cmVBcGlLZXkiLCJfb25nb2luZ1Jlc3BvbnNlIiwiX211dGVkIiwiYmFzZVVybCIsImlzQ2xpZW50S2V5IiwidXNlclNlc3Npb25Db25maWciLCJjb25uZWN0aW9uVXJsIiwicGVlckNvbm5lY3Rpb24iLCJkYXRhQ2hhbm5lbCIsImF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIiLCJjb25uZWN0aW9uIiwiYXVkaW9FbGVtZW50Iiwib3JpZ2luYWxQZWVyQ29ubmVjdGlvbiIsIm9mZmVyIiwic2RwUmVzcG9uc2UiLCJhbnN3ZXIiLCJtdXRlZCIsInNlbmRlciIsIldlYlNvY2tldCIsIk9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IiwiX09wZW5BSVJlYWx0aW1lV2ViU29ja2V0X2luc3RhbmNlcyIsIl9kZWZhdWx0VXJsIiwiX2N1cnJlbnRJdGVtSWQiLCJfY3VycmVudEF1ZGlvQ29udGVudEluZGV4IiwiX2NyZWF0ZVdlYlNvY2tldCIsIl9za2lwT3BlbkV2ZW50TGlzdGVuZXJzIiwiYXVkaW9FdmVudCIsInJlc2V0QXVkaW9QbGF5YmFja1N0YXRlX2ZuIiwidXJsIiwic2Vzc2lvbkNvbmZpZyIsInNldHVwV2ViU29ja2V0X2ZuIiwiZWxhcHNlZFRpbWUiLCJjYW5jZWxPbmdvaW5nUmVzcG9uc2UiLCJsZW5ndGgiLCJhdWRpb19lbmRfbXMiLCJ3cyIsIndlYnNvY2tldEFyZ3VtZW50cyIsIm9uU29ja2V0T3BlblJlYWR5IiwiYnVmZiIsImZtdCIsInJhdGUiLCJhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQiLCJCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0wiLCJiYWNrZ3JvdW5kUmVzdWx0IiwiaXNCYWNrZ3JvdW5kUmVzdWx0IiwiaXNWYWxpZFJlYWx0aW1lVG9vbCIsInRvUmVhbHRpbWVUb29sRGVmaW5pdGlvbiIsInNlcnZlclVybCIsImNsb25lRGVmYXVsdFNlc3Npb25Db25maWciLCJfUmVhbHRpbWVTZXNzaW9uIiwiX1JlYWx0aW1lU2Vzc2lvbl9pbnN0YW5jZXMiLCJfdHJhbnNwb3J0IiwiX2N1cnJlbnRBZ2VudCIsIl9jdXJyZW50VG9vbHMiLCJfb3V0cHV0R3VhcmRyYWlscyIsIl9vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyIsIl90cmFuc2NyaWJlZFRleHREZWx0YXMiLCJfaGlzdG9yeSIsIl9zaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwiX2ludGVycnVwdGVkQnlHdWFyZHJhaWwiLCJfYXVkaW9TdGFydGVkIiwiX2FsbE1jcFRvb2xzQnlTZXJ2ZXIiLCJfYXZhaWxhYmxlTWNwVG9vbHMiLCJfbGFzdFNlc3Npb25Db25maWciLCJfYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyIsIm92ZXJyaWRlcyIsInNldEN1cnJlbnRBZ2VudF9mbiIsImdldFNlc3Npb25Db25maWdfZm4iLCJzZXRFdmVudExpc3RlbmVyc19mbiIsInVwZGF0ZWRIaXN0b3J5IiwiaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbF9mbiIsImhhbmRvZmZUb29scyIsImhhc1Rvb2xzRGVmaW5lZCIsImhhc0hhbmRvZmZzRGVmaW5lZCIsInVwZGF0ZUF2YWlsYWJsZU1jcFRvb2xzX2ZuIiwiYWRkaXRpb25hbENvbmZpZyIsIm92ZXJyaWRlc0NvbmZpZyIsIm9wdGlvbnNDb25maWciLCJpbnN0cnVjdGlvbnMiLCJnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUiLCJhdWRpb0NvbmZpZyIsImF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSIsInRvcExldmVsVm9pY2VPdmVycmlkZSIsInJlc29sdmVkVm9pY2UiLCJmdWxsQ29uZmlnIiwiaGFuZGxlSGFuZG9mZl9mbiIsImhhbmRsZUZ1bmN0aW9uQ2FsbF9mbiIsImVuYWJsZWRIYW5kb2ZmcyIsImZ1bmN0aW9uVG9vbE1hcCIsInBvc3NpYmxlSGFuZG9mZiIsInJlc3BvbnNlSWQiLCJmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkIiwiZmVlZGJhY2tUZXh0IiwiY29tcGxldGVkRXZlbnQiLCJ0ZXh0T3V0cHV0IiwibGFzdFJ1bkluZGV4IiwibGFzdEl0ZW1JZCIsImRlbHRhIiwibmV3VGV4dCIsIm5ld1J1bkluZGV4IiwiaXNOZXciLCJhZGRlZEl0ZW0iLCJhY3RpdmVNY3BDb25maWdzIiwiYWxsb3dlZEZyb21Db25maWciLCJjZmciLCJkZWR1cEJ5TmFtZSIsInByZXYiLCJSZWFsdGltZVNlc3Npb24iLCJPcGVuQUlSZWFsdGltZVNJUCIsIl9hdWRpbyIsInV0aWxzIiwidXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyIiwidXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0IiwidXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDTyxNQUFNQSxLQUFXO0FBQUEsRUFFcEIsU0FBVztBQUtmO0FDUk8sZUFBZUMsR0FBWUMsR0FBSTtBQUNsQyxNQUFJO0FBQ0EsV0FBTyxDQUFDLE1BQU0sTUFBTUEsR0FBSTtBQUFBLEVBQzVCLFNBQ09DLEdBQU87QUFDVixXQUFPLENBQUNBLEdBQU8sSUFBSTtBQUFBLEVBQ3ZCO0FBQ0o7QUNLTyxTQUFTQyxHQUFjQyxHQUFTO0FBQ25DLFFBQU1DLElBQWdCLE9BQU8sT0FBT0QsQ0FBTyxFQUFFLE9BQU8sQ0FBQ0UsTUFBTSxPQUFPQSxLQUFNLFFBQVE7QUFJaEYsU0FIZSxPQUFPLFFBQVFGLENBQU8sRUFDaEMsT0FBTyxDQUFDLENBQUNHLEdBQUdDLENBQUMsTUFBTUgsRUFBYyxRQUFRLENBQUNFLENBQUMsTUFBTSxFQUFFLEVBQ25ELElBQUksQ0FBQyxDQUFDQyxHQUFHRixDQUFDLE1BQU1BLENBQUM7QUFFMUI7QUNoQk8sTUFBTUcsR0FBYTtBQUFBLEVBQ3RCLGNBQWM7QUFDVixTQUFLLE9BQU8sb0JBQUksSUFBRyxHQUNuQixLQUFLLFNBQVMsb0JBQUksSUFBRztBQUFBLEVBQ3pCO0FBQUEsRUFDQSxJQUFJQyxNQUFXQyxHQUFPO0FBQ2xCLFVBQU1DLElBQU9ELEVBQU0sQ0FBQztBQUVwQixRQURBLEtBQUssS0FBSyxJQUFJRCxHQUFRRSxDQUFJLEdBQ3RCQSxLQUFRLE9BQU9BLEtBQVMsWUFBWSxRQUFRQSxHQUFNO0FBQ2xELFVBQUksS0FBSyxPQUFPLElBQUlBLEVBQUssRUFBRTtBQUN2QixjQUFNLElBQUksTUFBTSxNQUFNQSxFQUFLLEVBQUUsaUNBQWlDO0FBRWxFLFdBQUssT0FBTyxJQUFJQSxFQUFLLElBQUlGLENBQU07QUFBQSxJQUNuQztBQUNBLFdBQU87QUFBQSxFQUNYO0FBQUEsRUFDQSxRQUFRO0FBQ0osZ0JBQUssT0FBTyxvQkFBSSxJQUFHLEdBQ25CLEtBQUssU0FBUyxvQkFBSSxJQUFHLEdBQ2Q7QUFBQSxFQUNYO0FBQUEsRUFDQSxPQUFPQSxHQUFRO0FBQ1gsVUFBTUUsSUFBTyxLQUFLLEtBQUssSUFBSUYsQ0FBTTtBQUNqQyxXQUFJRSxLQUFRLE9BQU9BLEtBQVMsWUFBWSxRQUFRQSxLQUM1QyxLQUFLLE9BQU8sT0FBT0EsRUFBSyxFQUFFLEdBRTlCLEtBQUssS0FBSyxPQUFPRixDQUFNLEdBQ2hCO0FBQUEsRUFDWDtBQUFBLEVBQ0EsSUFBSUEsR0FBUTtBQUdSLFVBQU1HLElBQUlILEVBQU8sS0FBSztBQUN0QixRQUFJRyxHQUFHO0FBQ0gsWUFBTUMsSUFBSyxFQUFFLEdBQUksS0FBSyxJQUFJRCxDQUFDLEtBQUssQ0FBQSxFQUFHO0FBQ25DLG9CQUFPQyxFQUFHLElBQ0gsRUFBRSxHQUFHQSxHQUFJLEdBQUcsS0FBSyxLQUFLLElBQUlKLENBQU0sRUFBQztBQUFBLElBQzVDO0FBQ0EsV0FBTyxLQUFLLEtBQUssSUFBSUEsQ0FBTTtBQUFBLEVBQy9CO0FBQUEsRUFDQSxJQUFJQSxHQUFRO0FBQ1IsV0FBTyxLQUFLLEtBQUssSUFBSUEsQ0FBTTtBQUFBLEVBQy9CO0FBQ0o7QUFFTyxTQUFTSyxLQUFXO0FBQ3ZCLFNBQU8sSUFBSU4sR0FBWTtBQUMzQjtBQUNPLE1BQU1PLEtBQStCLGdCQUFBRCxHQUFRO0FDaEQ3QyxNQUFNRSxHQUFvQjtBQUFBLEVBQzdCLFlBQVlDLEdBQVE7QUFDaEIsU0FBSyxVQUFVLEdBQ2YsS0FBSyxvQkFBbUJBLEtBQUEsZ0JBQUFBLEVBQVEsYUFBWUYsSUFDNUMsS0FBSyxVQUFTRSxLQUFBLGdCQUFBQSxFQUFRLFdBQVUsaUJBQ2hDLEtBQUssbUJBQWtCQSxLQUFBLGdCQUFBQSxFQUFRLG9CQUFtQixTQUNsRCxLQUFLLFlBQVdBLEtBQUEsZ0JBQUFBLEVBQVEsY0FBYSxNQUFNO0FBQUEsSUFBRSxJQUM3QyxLQUFLLE1BQUtBLEtBQUEsZ0JBQUFBLEVBQVEsT0FBTSxVQUN4QixLQUFLLE9BQU8sb0JBQUksSUFBRztBQUFBLEVBQ3ZCO0FBQUEsRUFDQSxRQUFRUixHQUFRUyxJQUFVLEVBQUUsTUFBTSxJQUFJLFlBQVksQ0FBQSxLQUFNOztBQUNwRCxRQUFJQztBQUNKLFVBQU1DLElBQU1YLEVBQU8sS0FBSyxLQUNsQlksSUFBWTtBQUFBLE1BQ2QsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLE1BQ0wsVUFBVTtBQUFBLE1BQ1YsYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBO0FBQUEsSUFDbkIsR0FFY0MsSUFBTyxLQUFLLEtBQUssSUFBSWIsQ0FBTTtBQUNqQyxRQUFJYTtBQUNBLGFBQUFBLEVBQUssU0FFV0osRUFBUSxXQUFXLFNBQVNULENBQU0sTUFFOUNhLEVBQUssUUFBUUosRUFBUSxPQUVsQkksRUFBSztBQUdoQixVQUFNQyxJQUFTLEVBQUUsUUFBUSxDQUFBLEdBQUksT0FBTyxHQUFHLE9BQU8sUUFBVyxNQUFNTCxFQUFRLEtBQUk7QUFDM0UsU0FBSyxLQUFLLElBQUlULEdBQVFjLENBQU07QUFFNUIsVUFBTUMsS0FBaUJDLEtBQUFOLElBQUFWLEVBQU8sTUFBSyxpQkFBWixnQkFBQWdCLEVBQUEsS0FBQU47QUFDdkIsUUFBSUs7QUFDQSxNQUFBRCxFQUFPLFNBQVNDO0FBQUEsU0FFZjtBQUNELFlBQU1QLElBQVM7QUFBQSxRQUNYLEdBQUdDO0FBQUEsUUFDSCxZQUFZLENBQUMsR0FBR0EsRUFBUSxZQUFZVCxDQUFNO0FBQUEsUUFDMUMsTUFBTVMsRUFBUTtBQUFBLE1BQzlCLEdBQ2tCUSxJQUFTakIsRUFBTyxLQUFLO0FBQzNCLFVBQUlpQjtBQUVBLFFBQUFILEVBQU8sTUFBTUcsR0FDYixLQUFLLFFBQVFBLEdBQVFULENBQU0sR0FDM0IsS0FBSyxLQUFLLElBQUlTLENBQU0sRUFBRSxXQUFXO0FBQUEsV0FFaEM7QUFDRCxjQUFNQyxJQUFRSixFQUFPO0FBQ3JCLGdCQUFRSCxFQUFJLE1BQUk7QUFBQSxVQUNaLEtBQUssVUFBVTtBQUNYLGtCQUFNUSxJQUFPRDtBQUNiLFlBQUFDLEVBQUssT0FBTztBQUNaLGtCQUFNLEVBQUUsU0FBQUMsR0FBUyxTQUFBQyxHQUFTLFFBQUFDLEdBQVEsVUFBQUMsR0FBVSxpQkFBQUMsRUFBZSxJQUFLeEIsRUFBTyxLQUNsRTtBQWFMLGdCQVpJLE9BQU9vQixLQUFZLGFBQ25CRCxFQUFLLFlBQVlDLElBQ2pCLE9BQU9DLEtBQVksYUFDbkJGLEVBQUssWUFBWUUsSUFFakJDLE1BQ0FILEVBQUssU0FBU1AsRUFBVVUsQ0FBTSxLQUFLQSxHQUMvQkgsRUFBSyxXQUFXLE1BQ2hCLE9BQU9BLEVBQUssU0FFaEJLLE1BQ0FMLEVBQUssa0JBQWtCSyxJQUN2QkQsS0FBWUEsRUFBUyxPQUFPLEdBQUc7QUFDL0Isb0JBQU1FLElBQVUsQ0FBQyxHQUFHRixDQUFRO0FBQzVCLGNBQUlFLEVBQVEsV0FBVyxJQUNuQk4sRUFBSyxVQUFVTSxFQUFRLENBQUMsRUFBRSxTQUNyQkEsRUFBUSxTQUFTLE1BQ3RCWCxFQUFPLE9BQU8sUUFBUTtBQUFBLGdCQUNsQixHQUFHVyxFQUFRLElBQUksQ0FBQ0MsT0FBVztBQUFBLGtCQUN2QixHQUFJLEtBQUssV0FBVyxZQUFZLEVBQUUsTUFBTSxTQUFRLElBQUs7a0JBQ3JELFNBQVNBLEVBQU07QUFBQSxnQkFDdkQsRUFBc0M7QUFBQSxjQUN0QztBQUFBLFlBRXdCO0FBQ0E7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFVBQVU7QUFDWCxrQkFBTVAsSUFBT0QsR0FDUCxFQUFFLFNBQUFFLEdBQVMsU0FBQUMsR0FBUyxRQUFBQyxHQUFRLFlBQUFLLEdBQVksa0JBQUFDLEdBQWtCLGtCQUFBQyxFQUFnQixJQUFLN0IsRUFBTyxLQUFLO0FBQ2pHLFlBQUksT0FBT3NCLEtBQVcsWUFBWUEsRUFBTyxTQUFTLEtBQUssSUFDbkRILEVBQUssT0FBTyxZQUVaQSxFQUFLLE9BQU8sVUFDWixPQUFPVSxLQUFxQixhQUM1QlYsRUFBSyxtQkFBbUJVLElBQ3hCLE9BQU9ULEtBQVksYUFDbkJELEVBQUssVUFBVUMsR0FDWCxPQUFPUyxLQUFxQixhQUN4QkEsS0FBb0JULElBQ3BCLE9BQU9ELEVBQUssVUFFWixPQUFPQSxFQUFLLG9CQUdwQixPQUFPUyxLQUFxQixhQUM1QlQsRUFBSyxtQkFBbUJTLElBQ3hCLE9BQU9QLEtBQVksYUFDbkJGLEVBQUssVUFBVUUsR0FDWCxPQUFPTyxLQUFxQixhQUN4QkEsS0FBb0JQLElBQ3BCLE9BQU9GLEVBQUssVUFFWixPQUFPQSxFQUFLLG9CQUdwQixPQUFPUSxLQUFlLGFBQ3RCUixFQUFLLGFBQWFRO0FBQ3RCO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxXQUFXO0FBQ1osa0JBQU1SLElBQU9EO0FBQ2IsWUFBQUMsRUFBSyxPQUFPO0FBQ1o7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFVBQVU7QUFDWCxnQkFBSSxLQUFLLG9CQUFvQjtBQUN6QixvQkFBTSxJQUFJLE1BQU0sNkNBQTZDO0FBRWpFO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxVQUFVO0FBQ1gsZ0JBQUksS0FBSyxvQkFBb0I7QUFDekIsb0JBQU0sSUFBSSxNQUFNLDhDQUE4QztBQUVsRTtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssUUFBUTtBQUNULFlBQUFELEVBQU0sT0FBTztBQUNiO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSztBQUNEO0FBQUEsVUFFSixLQUFLO0FBQ0Q7QUFBQSxVQUVKLEtBQUssYUFBYTtBQUNkLGdCQUFJLEtBQUssb0JBQW9CO0FBQ3pCLG9CQUFNLElBQUksTUFBTSxnREFBZ0Q7QUFFcEU7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFFBQVE7QUFDVCxnQkFBSSxLQUFLLG9CQUFvQjtBQUN6QixvQkFBTSxJQUFJLE1BQU0sMkNBQTJDO0FBRS9EO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxTQUFTO0FBQ1YsWUFBQUEsRUFBTSxNQUFNLENBQUE7QUFDWjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssUUFBUTtBQUNULGdCQUFJLEtBQUssb0JBQW9CO0FBQ3pCLG9CQUFNLElBQUksTUFBTSwyQ0FBMkM7QUFFL0Q7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFNBQVM7QUFDVixrQkFBTUMsSUFBT0QsR0FDUCxFQUFFLFNBQUFFLEdBQVMsU0FBQUMsRUFBTyxJQUFLckIsRUFBTyxLQUFLO0FBQ3pDLFlBQUksT0FBT29CLEtBQVksYUFDbkJELEVBQUssV0FBV0MsSUFDaEIsT0FBT0MsS0FBWSxhQUNuQkYsRUFBSyxXQUFXRSxJQUNwQkYsRUFBSyxPQUFPLFNBQ1pBLEVBQUssUUFBUSxLQUFLLFFBQVFSLEVBQUksU0FBUyxFQUFFLEdBQUdILEdBQVEsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxPQUFPLEVBQUMsQ0FBRTtBQUNyRjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssVUFBVTtBQUNYLGtCQUFNVyxJQUFPRDtBQUNiLFlBQUFDLEVBQUssT0FBTyxVQUNaQSxFQUFLLGFBQWEsQ0FBQTtBQUNsQixrQkFBTVcsSUFBUW5CLEVBQUk7QUFDbEIsdUJBQVdvQixLQUFPRDtBQUNkLGNBQUFYLEVBQUssV0FBV1ksQ0FBRyxJQUFJLEtBQUssUUFBUUQsRUFBTUMsQ0FBRyxHQUFHO0FBQUEsZ0JBQzVDLEdBQUd2QjtBQUFBLGdCQUNILE1BQU0sQ0FBQyxHQUFHQSxFQUFPLE1BQU0sY0FBY3VCLENBQUc7QUFBQSxjQUN4RSxDQUE2QjtBQUdMLGtCQUFNQyxJQUFVLElBQUksSUFBSSxPQUFPLEtBQUtGLENBQUssQ0FBQyxHQUVwQ0csSUFBZSxJQUFJLElBQUksQ0FBQyxHQUFHRCxDQUFPLEVBQUUsT0FBTyxDQUFDRCxNQUFRO0FBQ3RELG9CQUFNbkMsSUFBSWUsRUFBSSxNQUFNb0IsQ0FBRyxFQUFFO0FBQ3pCLHFCQUFJLEtBQUssT0FBTyxVQUNMbkMsRUFBRSxVQUFVLFNBR1pBLEVBQUUsV0FBVztBQUFBLFlBRTVCLENBQUMsQ0FBQztBQUNGLFlBQUlxQyxFQUFhLE9BQU8sTUFDcEJkLEVBQUssV0FBVyxNQUFNLEtBQUtjLENBQVksTUFHdkNDLElBQUF2QixFQUFJLGFBQUosZ0JBQUF1QixFQUFjLEtBQUssSUFBSSxVQUFTLFVBRWhDZixFQUFLLHVCQUF1QixLQUV0QlIsRUFBSSxXQUtMQSxFQUFJLGFBQ1RRLEVBQUssdUJBQXVCLEtBQUssUUFBUVIsRUFBSSxVQUFVO0FBQUEsY0FDbkQsR0FBR0g7QUFBQSxjQUNILE1BQU0sQ0FBQyxHQUFHQSxFQUFPLE1BQU0sc0JBQXNCO0FBQUEsWUFDN0UsQ0FBNkIsS0FQRyxLQUFLLE9BQU8sYUFDWlcsRUFBSyx1QkFBdUI7QUFRcEM7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFNBQVM7QUFDVixrQkFBTUEsSUFBT0Q7QUFDYixZQUFBQyxFQUFLLFFBQVFSLEVBQUksUUFBUSxJQUFJLENBQUMsR0FBR3dCLE1BQU0sS0FBSyxRQUFRLEdBQUc7QUFBQSxjQUNuRCxHQUFHM0I7QUFBQSxjQUNILE1BQU0sQ0FBQyxHQUFHQSxFQUFPLE1BQU0sU0FBUzJCLENBQUM7QUFBQSxZQUM3RCxDQUF5QixDQUFDO0FBQ0Y7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLGdCQUFnQjtBQUNqQixrQkFBTWhCLElBQU9ELEdBQ1BrQixJQUFJLEtBQUssUUFBUXpCLEVBQUksTUFBTTtBQUFBLGNBQzdCLEdBQUdIO0FBQUEsY0FDSCxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLFNBQVMsQ0FBQztBQUFBLFlBQzdELENBQXlCLEdBQ0s2QixJQUFJLEtBQUssUUFBUTFCLEVBQUksT0FBTztBQUFBLGNBQzlCLEdBQUdIO0FBQUEsY0FDSCxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLFNBQVMsQ0FBQztBQUFBLFlBQzdELENBQXlCLEdBQ0s4QixJQUF1QixDQUFDQyxNQUFRLFdBQVdBLEtBQU8sT0FBTyxLQUFLQSxDQUFHLEVBQUUsV0FBVyxHQUM5RUMsSUFBUTtBQUFBLGNBQ1YsR0FBSUYsRUFBcUJGLENBQUMsSUFBSUEsRUFBRSxRQUFRLENBQUNBLENBQUM7QUFBQSxjQUMxQyxHQUFJRSxFQUFxQkQsQ0FBQyxJQUFJQSxFQUFFLFFBQVEsQ0FBQ0EsQ0FBQztBQUFBLFlBQ3RFO0FBQ3dCLFlBQUFsQixFQUFLLFFBQVFxQjtBQUNiO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxTQUFTO0FBQ1Ysa0JBQU1yQixJQUFPRDtBQUNiLFlBQUFDLEVBQUssT0FBTztBQUNaLGtCQUFNc0IsSUFBYzlCLEVBQUksTUFBTSxJQUFJLENBQUMrQixHQUFHUCxNQUFNLEtBQUssUUFBUU8sR0FBRyxFQUFFLEdBQUdsQyxHQUFRLE1BQU0sQ0FBQyxHQUFHQSxFQUFPLE1BQU0sZUFBZTJCLENBQUMsRUFBQyxDQUFFLENBQUM7QUFPcEgsZ0JBTkksS0FBSyxXQUFXLGtCQUNoQmhCLEVBQUssY0FBY3NCLElBR25CdEIsRUFBSyxRQUFRc0IsR0FFYjlCLEVBQUksTUFBTTtBQUNWLG9CQUFNZ0MsSUFBTyxLQUFLLFFBQVFoQyxFQUFJLE1BQU07QUFBQSxnQkFDaEMsR0FBR0g7QUFBQSxnQkFDSCxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLE9BQU87QUFBQSxjQUM5RCxDQUE2QjtBQUNELGNBQUksS0FBSyxXQUFXLGtCQUNoQlcsRUFBSyxRQUFRd0IsSUFHYnhCLEVBQUssa0JBQWtCd0I7QUFBQSxZQUUvQjtBQUVBLFlBQUloQyxFQUFJLFNBQ0pRLEVBQUssUUFBUSxLQUFLLFFBQVFSLEVBQUksTUFBTTtBQUFBLGNBQ2hDLEdBQUdIO0FBQUEsY0FDSCxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLE9BQU87QUFBQSxZQUM5RCxDQUE2QjtBQUdMLGtCQUFNLEVBQUUsU0FBQVksR0FBUyxTQUFBQyxFQUFPLElBQUtyQixFQUFPLEtBQUs7QUFDekMsWUFBSSxPQUFPb0IsS0FBWSxhQUNuQkQsRUFBSyxXQUFXQyxJQUNoQixPQUFPQyxLQUFZLGFBQ25CRixFQUFLLFdBQVdFO0FBQ3BCO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxVQUFVO0FBQ1gsa0JBQU1GLElBQU9EO0FBQ2IsWUFBQUMsRUFBSyxPQUFPLFVBQ1pBLEVBQUssZ0JBQWdCLEtBQUssUUFBUVIsRUFBSSxTQUFTLEVBQUUsR0FBR0gsR0FBUSxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLGVBQWUsRUFBQyxDQUFFLEdBQ3JHVyxFQUFLLHVCQUF1QixLQUFLLFFBQVFSLEVBQUksV0FBVztBQUFBLGNBQ3BELEdBQUdIO0FBQUEsY0FDSCxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLHNCQUFzQjtBQUFBLFlBQ3pFLENBQXlCO0FBQ0Q7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLE9BQU87QUFDUixnQkFBSSxLQUFLLG9CQUFvQjtBQUN6QixvQkFBTSxJQUFJLE1BQU0sMENBQTBDO0FBRTlEO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxPQUFPO0FBQ1IsZ0JBQUksS0FBSyxvQkFBb0I7QUFDekIsb0JBQU0sSUFBSSxNQUFNLDBDQUEwQztBQUU5RDtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssUUFBUTtBQUNULGtCQUFNVyxJQUFPRCxHQUNQMEIsSUFBU25ELEdBQWNrQixFQUFJLE9BQU87QUFFeEMsWUFBSWlDLEVBQU8sTUFBTSxDQUFDaEQsTUFBTSxPQUFPQSxLQUFNLFFBQVEsTUFDekN1QixFQUFLLE9BQU8sV0FDWnlCLEVBQU8sTUFBTSxDQUFDaEQsTUFBTSxPQUFPQSxLQUFNLFFBQVEsTUFDekN1QixFQUFLLE9BQU8sV0FDaEJBLEVBQUssT0FBT3lCO0FBQ1o7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFdBQVc7QUFDWixrQkFBTXpCLElBQU9ELEdBQ1AyQixJQUFPLENBQUE7QUFDYix1QkFBV04sS0FBTzVCLEVBQUk7QUFDbEIsa0JBQUk0QixNQUFRO0FBQ1Isb0JBQUksS0FBSyxvQkFBb0I7QUFDekIsd0JBQU0sSUFBSSxNQUFNLDBEQUEwRDtBQUFBLHlCQU16RSxPQUFPQSxLQUFRLFVBQVU7QUFDOUIsb0JBQUksS0FBSyxvQkFBb0I7QUFDekIsd0JBQU0sSUFBSSxNQUFNLHNEQUFzRDtBQUd0RSxnQkFBQU0sRUFBSyxLQUFLLE9BQU9OLENBQUcsQ0FBQztBQUFBLGNBRTdCO0FBRUksZ0JBQUFNLEVBQUssS0FBS04sQ0FBRztBQUdyQixnQkFBSU0sRUFBSyxXQUFXLEVBR2YsS0FBSUEsRUFBSyxXQUFXLEdBQUc7QUFDeEIsb0JBQU1OLElBQU1NLEVBQUssQ0FBQztBQUNsQixjQUFBMUIsRUFBSyxPQUFPb0IsTUFBUSxPQUFPLFNBQVMsT0FBT0EsR0FDM0NwQixFQUFLLFFBQVFvQjtBQUFBLFlBQ2pCO0FBRUksY0FBSU0sRUFBSyxNQUFNLENBQUNqRCxNQUFNLE9BQU9BLEtBQU0sUUFBUSxNQUN2Q3VCLEVBQUssT0FBTyxXQUNaMEIsRUFBSyxNQUFNLENBQUNqRCxNQUFNLE9BQU9BLEtBQU0sUUFBUSxNQUN2Q3VCLEVBQUssT0FBTyxXQUNaMEIsRUFBSyxNQUFNLENBQUNqRCxNQUFNLE9BQU9BLEtBQU0sU0FBUyxNQUN4Q3VCLEVBQUssT0FBTyxXQUNaMEIsRUFBSyxNQUFNLENBQUNqRCxNQUFNQSxNQUFNLElBQUksTUFDNUJ1QixFQUFLLE9BQU8sU0FDaEJBLEVBQUssT0FBTzBCO0FBRWhCO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxRQUFRO0FBQ1Qsa0JBQU0xQixJQUFPRCxHQUNQNEIsSUFBTztBQUFBLGNBQ1QsTUFBTTtBQUFBLGNBQ04sUUFBUTtBQUFBLGNBQ1IsaUJBQWlCO0FBQUEsWUFDN0MsR0FDOEIsRUFBRSxTQUFBMUIsR0FBUyxTQUFBQyxHQUFTLE1BQUEwQixFQUFJLElBQUsvQyxFQUFPLEtBQUs7QUFDL0MsWUFBSW9CLE1BQVksV0FDWjBCLEVBQUssWUFBWTFCLElBQ2pCQyxNQUFZLFdBQ1p5QixFQUFLLFlBQVl6QixJQUNqQjBCLElBQ0lBLEVBQUssV0FBVyxLQUNoQkQsRUFBSyxtQkFBbUJDLEVBQUssQ0FBQyxHQUM5QixPQUFPLE9BQU81QixHQUFNMkIsQ0FBSSxLQUd4QjNCLEVBQUssUUFBUTRCLEVBQUssSUFBSSxDQUFDQyxPQUNMLEVBQUUsR0FBR0YsR0FBTSxrQkFBa0JFLEVBQUMsRUFFL0MsSUFJTCxPQUFPLE9BQU83QixHQUFNMkIsQ0FBSTtBQUs1QjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssYUFBYTtBQUNkLGdCQUFJLEtBQUssb0JBQW9CO0FBQ3pCLG9CQUFNLElBQUksTUFBTSxpREFBaUQ7QUFFckU7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFlBQVk7QUFDYixrQkFBTUcsSUFBUSxLQUFLLFFBQVF0QyxFQUFJLFdBQVdILENBQU07QUFDaEQsWUFBQVUsRUFBTSxRQUFRLENBQUMrQixHQUFPLEVBQUUsTUFBTSxPQUFNLENBQUU7QUFDdEM7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLGVBQWU7QUFDaEIsaUJBQUssUUFBUXRDLEVBQUksV0FBV0gsQ0FBTSxHQUNsQ00sRUFBTyxNQUFNSCxFQUFJO0FBQ2pCO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxXQUFXO0FBQ1osa0JBQU1RLElBQU9EO0FBQ2IsWUFBQUMsRUFBSyxPQUFPO0FBQ1o7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFdBQVc7QUFDWixpQkFBSyxRQUFRUixFQUFJLFdBQVdILENBQU0sR0FDbENNLEVBQU8sTUFBTUgsRUFBSSxXQUNqQk8sRUFBTSxVQUFVLEtBQUssTUFBTSxLQUFLLFVBQVVQLEVBQUksWUFBWSxDQUFDO0FBQzNEO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxZQUFZO0FBQ2IsaUJBQUssUUFBUUEsRUFBSSxXQUFXSCxDQUFNLEdBQ2xDTSxFQUFPLE1BQU1ILEVBQUksV0FDYixLQUFLLE9BQU8sWUFDWk8sRUFBTSxZQUFZLEtBQUssTUFBTSxLQUFLLFVBQVVQLEVBQUksWUFBWSxDQUFDO0FBQ2pFO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxTQUFTO0FBRVYsaUJBQUssUUFBUUEsRUFBSSxXQUFXSCxDQUFNLEdBQ2xDTSxFQUFPLE1BQU1ILEVBQUk7QUFDakIsZ0JBQUl1QztBQUNKLGdCQUFJO0FBQ0EsY0FBQUEsSUFBYXZDLEVBQUksV0FBVyxNQUFTO0FBQUEsWUFDekMsUUFDTTtBQUNGLG9CQUFNLElBQUksTUFBTSx1REFBdUQ7QUFBQSxZQUMzRTtBQUNBLFlBQUFPLEVBQU0sVUFBVWdDO0FBQ2hCO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxPQUFPO0FBQ1IsZ0JBQUksS0FBSyxvQkFBb0I7QUFDekIsb0JBQU0sSUFBSSxNQUFNLDBDQUEwQztBQUU5RDtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssb0JBQW9CO0FBQ3JCLGtCQUFNL0IsSUFBT0QsR0FDUGlDLElBQVVuRCxFQUFPLEtBQUs7QUFDNUIsZ0JBQUksQ0FBQ21EO0FBQ0Qsb0JBQU0sSUFBSSxNQUFNLHVDQUF1QztBQUMzRCxZQUFBaEMsRUFBSyxPQUFPLFVBQ1pBLEVBQUssVUFBVWdDLEVBQVE7QUFDdkI7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFFBQVE7QUFDVCxrQkFBTUMsSUFBWSxLQUFLLE9BQU8sVUFBV3pDLEVBQUksR0FBRyxLQUFLLElBQUksU0FBUyxjQUFjQSxFQUFJLE1BQU1BLEVBQUksS0FBTUEsRUFBSTtBQUN4RyxpQkFBSyxRQUFReUMsR0FBVzVDLENBQU0sR0FDOUJNLEVBQU8sTUFBTXNDO0FBQ2I7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFlBQVk7QUFDYixpQkFBSyxRQUFRekMsRUFBSSxXQUFXSCxDQUFNLEdBQ2xDTSxFQUFPLE1BQU1ILEVBQUksV0FDakJPLEVBQU0sV0FBVztBQUNqQjtBQUFBLFVBQ0o7QUFBQTtBQUFBLFVBRUEsS0FBSyxXQUFXO0FBQ1osaUJBQUssUUFBUVAsRUFBSSxXQUFXSCxDQUFNLEdBQ2xDTSxFQUFPLE1BQU1ILEVBQUk7QUFDakI7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFlBQVk7QUFDYixpQkFBSyxRQUFRQSxFQUFJLFdBQVdILENBQU0sR0FDbENNLEVBQU8sTUFBTUgsRUFBSTtBQUNqQjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssUUFBUTtBQUNULGtCQUFNeUMsSUFBWXBELEVBQU8sS0FBSztBQUM5QixpQkFBSyxRQUFRb0QsR0FBVzVDLENBQU0sR0FDOUJNLEVBQU8sTUFBTXNDO0FBQ2I7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFVBQVU7QUFDWCxnQkFBSSxLQUFLLG9CQUFvQjtBQUN6QixvQkFBTSxJQUFJLE1BQU0sbURBQW1EO0FBRXZFO0FBQUEsVUFDSjtBQUFBLFFBSXBCO0FBQUEsTUFDWTtBQUFBLElBQ0o7QUFFQSxVQUFNbEQsSUFBTyxLQUFLLGlCQUFpQixJQUFJRixDQUFNO0FBQzdDLFdBQUlFLEtBQ0EsT0FBTyxPQUFPWSxFQUFPLFFBQVFaLENBQUksR0FDakMsS0FBSyxPQUFPLFdBQVdtRCxHQUFlckQsQ0FBTSxNQUU1QyxPQUFPYyxFQUFPLE9BQU8sVUFDckIsT0FBT0EsRUFBTyxPQUFPLFVBR3JCLEtBQUssT0FBTyxXQUFXQSxFQUFPLE9BQU8sZUFDcENKLElBQUtJLEVBQU8sUUFBUSxZQUFZSixFQUFHLFVBQVVJLEVBQU8sT0FBTyxhQUNoRSxPQUFPQSxFQUFPLE9BQU8sV0FFTCxLQUFLLEtBQUssSUFBSWQsQ0FBTSxFQUNyQjtBQUFBLEVBQ25CO0FBQUEsRUFDQSxLQUFLQSxHQUFRUyxHQUFTOztBQUNsQixVQUFNRCxJQUFTO0FBQUEsTUFDWCxTQUFRQyxLQUFBLGdCQUFBQSxFQUFTLFdBQVU7QUFBQSxNQUMzQixTQUFRQSxLQUFBLGdCQUFBQSxFQUFTLFdBQVU7QUFBQTtBQUFBO0FBQUEsTUFHM0IsV0FBVUEsS0FBQSxnQkFBQUEsRUFBUyxhQUFZO0FBQUEsSUFDM0MsR0FFYzZDLElBQU8sS0FBSyxLQUFLLElBQUl0RCxDQUFNO0FBQ2pDLFFBQUksQ0FBQ3NEO0FBQ0QsWUFBTSxJQUFJLE1BQU0sMkNBQTJDO0FBSy9ELFVBQU1DLElBQVUsQ0FBQ0MsTUFBVTs7QUFLdkIsWUFBTUMsSUFBYyxLQUFLLFdBQVcsa0JBQWtCLFVBQVU7QUFDaEUsVUFBSWpELEVBQU8sVUFBVTtBQUNqQixjQUFNa0QsS0FBYWhELElBQUFGLEVBQU8sU0FBUyxTQUFTLElBQUlnRCxFQUFNLENBQUMsQ0FBQyxNQUFyQyxnQkFBQTlDLEVBQXdDLElBRXJEaUQsSUFBZW5ELEVBQU8sU0FBUyxRQUFRLENBQUNvRCxNQUFPQTtBQUNyRCxZQUFJRjtBQUNBLGlCQUFPLEVBQUUsS0FBS0MsRUFBYUQsQ0FBVSxFQUFDO0FBRzFDLGNBQU1FLElBQUtKLEVBQU0sQ0FBQyxFQUFFLFNBQVNBLEVBQU0sQ0FBQyxFQUFFLE9BQU8sTUFBTSxTQUFTLEtBQUssU0FBUztBQUMxRSxlQUFBQSxFQUFNLENBQUMsRUFBRSxRQUFRSSxHQUNWLEVBQUUsT0FBT0EsR0FBSSxLQUFLLEdBQUdELEVBQWEsVUFBVSxDQUFDLEtBQUtGLENBQVcsSUFBSUcsQ0FBRSxHQUFFO0FBQUEsTUFDaEY7QUFDQSxVQUFJSixFQUFNLENBQUMsTUFBTUY7QUFDYixlQUFPLEVBQUUsS0FBSyxJQUFHO0FBSXJCLFlBQU1PLElBQWUsS0FBZ0JKLENBQVcsS0FDMUNLLElBQVFOLEVBQU0sQ0FBQyxFQUFFLE9BQU8sTUFBTSxXQUFXLEtBQUssU0FBUztBQUM3RCxhQUFPLEVBQUUsT0FBQU0sR0FBTyxLQUFLRCxJQUFlQyxFQUFLO0FBQUEsSUFDN0MsR0FHTUMsSUFBZSxDQUFDUCxNQUFVO0FBRTVCLFVBQUlBLEVBQU0sQ0FBQyxFQUFFLE9BQU87QUFDaEI7QUFFSixZQUFNM0MsSUFBTzJDLEVBQU0sQ0FBQyxHQUNkLEVBQUUsS0FBQVEsR0FBSyxPQUFBRixNQUFVUCxFQUFRQyxDQUFLO0FBQ3BDLE1BQUEzQyxFQUFLLE1BQU0sRUFBRSxHQUFHQSxFQUFLLE9BQU0sR0FFdkJpRCxNQUNBakQsRUFBSyxRQUFRaUQ7QUFFakIsWUFBTTlELElBQVNhLEVBQUs7QUFDcEIsaUJBQVdrQixLQUFPL0I7QUFDZCxlQUFPQSxFQUFPK0IsQ0FBRztBQUVyQixNQUFBL0IsRUFBTyxPQUFPZ0U7QUFBQSxJQUNsQjtBQUdBLFFBQUl4RCxFQUFPLFdBQVc7QUFDbEIsaUJBQVdnRCxLQUFTLEtBQUssS0FBSyxRQUFPLEdBQUk7QUFDckMsY0FBTTNDLElBQU8yQyxFQUFNLENBQUM7QUFDcEIsWUFBSTNDLEVBQUs7QUFDTCxnQkFBTSxJQUFJLE1BQU0sc0JBQ1BILElBQUFHLEVBQUssVUFBTCxnQkFBQUgsRUFBWSxLQUFLLElBQUk7QUFBQTtBQUFBLGlGQUN3RDtBQUFBLE1BRTlGO0FBR0osZUFBVzhDLEtBQVMsS0FBSyxLQUFLLFFBQU8sR0FBSTtBQUNyQyxZQUFNM0MsSUFBTzJDLEVBQU0sQ0FBQztBQUVwQixVQUFJeEQsTUFBV3dELEVBQU0sQ0FBQyxHQUFHO0FBQ3JCLFFBQUFPLEVBQWFQLENBQUs7QUFDbEI7QUFBQSxNQUNKO0FBRUEsVUFBSWhELEVBQU8sVUFBVTtBQUNqQixjQUFNeUQsS0FBTWpELElBQUFSLEVBQU8sU0FBUyxTQUFTLElBQUlnRCxFQUFNLENBQUMsQ0FBQyxNQUFyQyxnQkFBQXhDLEVBQXdDO0FBQ3BELFlBQUloQixNQUFXd0QsRUFBTSxDQUFDLEtBQUtTLEdBQUs7QUFDNUIsVUFBQUYsRUFBYVAsQ0FBSztBQUNsQjtBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBR0EsV0FEV3RCLElBQUEsS0FBSyxpQkFBaUIsSUFBSXNCLEVBQU0sQ0FBQyxDQUFDLE1BQWxDLGdCQUFBdEIsRUFBcUMsSUFDeEM7QUFDSixRQUFBNkIsRUFBYVAsQ0FBSztBQUNsQjtBQUFBLE1BQ0o7QUFFQSxVQUFJM0MsRUFBSyxPQUFPO0FBRVosUUFBQWtELEVBQWFQLENBQUs7QUFDbEI7QUFBQSxNQUNKO0FBRUEsVUFBSTNDLEVBQUssUUFBUSxLQUNUTCxFQUFPLFdBQVcsT0FBTztBQUN6QixRQUFBdUQsRUFBYVAsQ0FBSztBQUVsQjtBQUFBLE1BQ0o7QUFBQSxJQUVSO0FBRUEsVUFBTVUsSUFBYSxDQUFDQyxHQUFXM0QsTUFBVztBQUN0QyxZQUFNSyxJQUFPLEtBQUssS0FBSyxJQUFJc0QsQ0FBUyxHQUM5Qm5FLElBQVNhLEVBQUssT0FBT0EsRUFBSyxRQUMxQnVELElBQVUsRUFBRSxHQUFHcEUsRUFBTTtBQUUzQixVQUFJYSxFQUFLLFFBQVE7QUFDYjtBQUdKLFlBQU1tRCxJQUFNbkQsRUFBSztBQUVqQixVQURBQSxFQUFLLE1BQU0sTUFDUG1ELEdBQUs7QUFDTCxRQUFBRSxFQUFXRixHQUFLeEQsQ0FBTTtBQUV0QixjQUFNNkQsSUFBWSxLQUFLLEtBQUssSUFBSUwsQ0FBRyxFQUFFO0FBQ3JDLFFBQUlLLEVBQVUsUUFBUTdELEVBQU8sV0FBVyxhQUNwQ1IsRUFBTyxRQUFRQSxFQUFPLFNBQVMsQ0FBQSxHQUMvQkEsRUFBTyxNQUFNLEtBQUtxRSxDQUFTLE1BRzNCLE9BQU8sT0FBT3JFLEdBQVFxRSxDQUFTLEdBQy9CLE9BQU8sT0FBT3JFLEdBQVFvRSxDQUFPO0FBQUEsTUFFckM7QUFFQSxNQUFLdkQsRUFBSyxZQUNOLEtBQUssU0FBUztBQUFBLFFBQ1YsV0FBV3NEO0FBQUEsUUFDWCxZQUFZbkU7QUFBQSxRQUNaLE1BQU1hLEVBQUssUUFBUSxDQUFBO0FBQUEsTUFDdkMsQ0FBaUI7QUFBQSxJQUNUO0FBQ0EsZUFBVzJDLEtBQVMsQ0FBQyxHQUFHLEtBQUssS0FBSyxRQUFPLENBQUUsRUFBRTtBQUN6QyxNQUFBVSxFQUFXVixFQUFNLENBQUMsR0FBRyxFQUFFLFFBQVEsS0FBSyxRQUFRO0FBRWhELFVBQU0xQyxJQUFTLENBQUE7QUFVZixRQVRJLEtBQUssV0FBVyxrQkFDaEJBLEVBQU8sVUFBVSxpREFFWixLQUFLLFdBQVcsWUFDckJBLEVBQU8sVUFBVSw0Q0FHakIsUUFBUSxLQUFLLG1CQUFtQixLQUFLLE1BQU0sRUFBRSxJQUU3Q3dELElBQUE5RCxFQUFPLGFBQVAsUUFBQThELEVBQWlCLEtBQUs7QUFDdEIsWUFBTVYsS0FBS1csSUFBQS9ELEVBQU8sU0FBUyxTQUFTLElBQUlSLENBQU0sTUFBbkMsZ0JBQUF1RSxFQUFzQztBQUNqRCxVQUFJLENBQUNYO0FBQ0QsY0FBTSxJQUFJLE1BQU0sb0NBQW9DO0FBQ3hELE1BQUE5QyxFQUFPLE1BQU1OLEVBQU8sU0FBUyxJQUFJb0QsQ0FBRTtBQUFBLElBQ3ZDO0FBQ0EsV0FBTyxPQUFPOUMsR0FBUXdDLEVBQUssR0FBRztBQUU5QixVQUFNa0IsTUFBT0MsSUFBQWpFLEVBQU8sYUFBUCxnQkFBQWlFLEVBQWlCLFNBQVEsQ0FBQTtBQUN0QyxlQUFXakIsS0FBUyxLQUFLLEtBQUssUUFBTyxHQUFJO0FBQ3JDLFlBQU0zQyxJQUFPMkMsRUFBTSxDQUFDO0FBQ3BCLE1BQUkzQyxFQUFLLE9BQU9BLEVBQUssVUFDakIyRCxFQUFLM0QsRUFBSyxLQUFLLElBQUlBLEVBQUs7QUFBQSxJQUVoQztBQUVBLElBQUlMLEVBQU8sWUFHSCxPQUFPLEtBQUtnRSxDQUFJLEVBQUUsU0FBUyxNQUN2QixLQUFLLFdBQVcsa0JBQ2hCMUQsRUFBTyxRQUFRMEQsSUFHZjFELEVBQU8sY0FBYzBEO0FBSWpDLFFBQUk7QUFJQSxhQUFPLEtBQUssTUFBTSxLQUFLLFVBQVUxRCxDQUFNLENBQUM7QUFBQSxJQUM1QyxRQUNhO0FBQ1QsWUFBTSxJQUFJLE1BQU0sa0NBQWtDO0FBQUEsSUFDdEQ7QUFBQSxFQUNKO0FBQ0o7QUFDTyxTQUFTNEQsR0FBYUMsR0FBT2xFLEdBQVM7QUFDekMsTUFBSWtFLGFBQWlCNUUsSUFBYztBQUMvQixVQUFNNkUsSUFBTSxJQUFJckUsR0FBb0JFLENBQU8sR0FDckMrRCxJQUFPLENBQUE7QUFDYixlQUFXaEIsS0FBU21CLEVBQU0sT0FBTyxRQUFPLEdBQUk7QUFDeEMsWUFBTSxDQUFDN0UsR0FBR0UsQ0FBTSxJQUFJd0Q7QUFDcEIsTUFBQW9CLEVBQUksUUFBUTVFLENBQU07QUFBQSxJQUN0QjtBQUNBLFVBQU02RSxJQUFVLENBQUEsR0FDVkMsSUFBVztBQUFBLE1BQ2IsVUFBVUg7QUFBQSxNQUNWLEtBQUtsRSxLQUFBLGdCQUFBQSxFQUFTO0FBQUEsTUFDZCxNQUFBK0Q7QUFBQSxJQUNaO0FBQ1EsZUFBV2hCLEtBQVNtQixFQUFNLE9BQU8sUUFBTyxHQUFJO0FBQ3hDLFlBQU0sQ0FBQzVDLEdBQUsvQixDQUFNLElBQUl3RDtBQUN0QixNQUFBcUIsRUFBUTlDLENBQUcsSUFBSTZDLEVBQUksS0FBSzVFLEdBQVE7QUFBQSxRQUM1QixHQUFHUztBQUFBLFFBQ0gsVUFBQXFFO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ0w7QUFDQSxRQUFJLE9BQU8sS0FBS04sQ0FBSSxFQUFFLFNBQVMsR0FBRztBQUM5QixZQUFNZixJQUFjbUIsRUFBSSxXQUFXLGtCQUFrQixVQUFVO0FBQy9ELE1BQUFDLEVBQVEsV0FBVztBQUFBLFFBQ2YsQ0FBQ3BCLENBQVcsR0FBR2U7QUFBQSxNQUMvQjtBQUFBLElBQ1E7QUFDQSxXQUFPLEVBQUUsU0FBQUssRUFBTztBQUFBLEVBQ3BCO0FBQ0EsUUFBTUQsSUFBTSxJQUFJckUsR0FBb0JFLENBQU87QUFDM0MsU0FBQW1FLEVBQUksUUFBUUQsQ0FBSyxHQUNWQyxFQUFJLEtBQUtELEdBQU9sRSxDQUFPO0FBQ2xDO0FBQ0EsU0FBUzRDLEdBQWUwQixHQUFTQyxHQUFNO0FBQ25DLFFBQU1DLElBQU1ELEtBQVEsRUFBRSxNQUFNLG9CQUFJLElBQUcsRUFBRTtBQUNyQyxNQUFJQyxFQUFJLEtBQUssSUFBSUYsQ0FBTztBQUNwQixXQUFPO0FBQ1gsRUFBQUUsRUFBSSxLQUFLLElBQUlGLENBQU87QUFFcEIsUUFBTXBFLElBRFNvRSxFQUNJLEtBQUs7QUFDeEIsVUFBUXBFLEVBQUksTUFBSTtBQUFBLElBQ1osS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUNELGFBQU87QUFBQSxJQUNYLEtBQUs7QUFDRCxhQUFPMEMsR0FBZTFDLEVBQUksU0FBU3NFLENBQUc7QUFBQSxJQUUxQyxLQUFLLFVBQVU7QUFDWCxpQkFBV2xELEtBQU9wQixFQUFJO0FBQ2xCLFlBQUkwQyxHQUFlMUMsRUFBSSxNQUFNb0IsQ0FBRyxHQUFHa0QsQ0FBRztBQUNsQyxpQkFBTztBQUVmLGFBQU87QUFBQSxJQUNYO0FBQUEsSUFDQSxLQUFLLFNBQVM7QUFDVixpQkFBV0MsS0FBVXZFLEVBQUk7QUFDckIsWUFBSTBDLEdBQWU2QixHQUFRRCxDQUFHO0FBQzFCLGlCQUFPO0FBRWYsYUFBTztBQUFBLElBQ1g7QUFBQSxJQUNBLEtBQUs7QUFDRCxhQUFPNUIsR0FBZTFDLEVBQUksTUFBTXNFLENBQUcsS0FBSzVCLEdBQWUxQyxFQUFJLE9BQU9zRSxDQUFHO0FBQUEsSUFFekUsS0FBSyxTQUFTO0FBQ1YsaUJBQVdFLEtBQVF4RSxFQUFJO0FBQ25CLFlBQUkwQyxHQUFlOEIsR0FBTUYsQ0FBRztBQUN4QixpQkFBTztBQUVmLGFBQUksR0FBQXRFLEVBQUksUUFBUTBDLEdBQWUxQyxFQUFJLE1BQU1zRSxDQUFHO0FBQUEsSUFHaEQ7QUFBQSxJQUNBLEtBQUs7QUFDRCxhQUFPNUIsR0FBZTFDLEVBQUksU0FBU3NFLENBQUcsS0FBSzVCLEdBQWUxQyxFQUFJLFdBQVdzRSxDQUFHO0FBQUEsSUFFaEYsS0FBSztBQUNELGFBQU81QixHQUFlMUMsRUFBSSxTQUFTc0UsQ0FBRyxLQUFLNUIsR0FBZTFDLEVBQUksV0FBV3NFLENBQUc7QUFBQSxJQUVoRixLQUFLO0FBQ0QsYUFBTzVCLEdBQWUxQyxFQUFJLFdBQVdzRSxDQUFHO0FBQUE7QUFBQSxJQUc1QyxLQUFLO0FBQUEsSUFDTCxLQUFLO0FBQUEsSUFDTCxLQUFLO0FBQUEsSUFDTCxLQUFLO0FBQUEsSUFDTCxLQUFLO0FBQ0QsYUFBTzVCLEdBQWUxQyxFQUFJLFdBQVdzRSxDQUFHO0FBQUEsSUFDNUMsS0FBSztBQUNELGFBQU81QixHQUFlMUMsRUFBSSxPQUFNLEdBQUlzRSxDQUFHO0FBQUEsSUFDM0MsS0FBSztBQUNELGFBQU81QixHQUFlMUMsRUFBSSxXQUFXc0UsQ0FBRztBQUFBLElBRTVDLEtBQUs7QUFDRCxhQUFPNUIsR0FBZTFDLEVBQUksV0FBV3NFLENBQUc7QUFBQSxJQUU1QyxLQUFLO0FBQ0QsYUFBTztBQUFBLElBRVgsS0FBSztBQUNELGFBQU87QUFBQSxJQUVYLEtBQUs7QUFDRCxhQUFPNUIsR0FBZTFDLEVBQUksSUFBSXNFLENBQUcsS0FBSzVCLEdBQWUxQyxFQUFJLEtBQUtzRSxDQUFHO0FBQUEsSUFFckUsS0FBSztBQUNELGFBQU87QUFBQSxJQUVYLEtBQUs7QUFDRCxhQUFPO0FBQUEsRUFJbkI7QUFDSSxRQUFNLElBQUksTUFBTSx3QkFBd0J0RSxFQUFJLElBQUksRUFBRTtBQUN0RDtBQzl6Qk8sU0FBU3lFLEdBQXdCQyxHQUFpQkMsR0FBUTtBQUM3RCxRQUFNQyxJQUFNLEVBQUUsR0FBR0YsRUFBZTtBQUNoQyxnQkFBTyxpQkFBaUJFLEdBQUs7QUFBQSxJQUN6QixRQUFRO0FBQUEsTUFDSixPQUFPO0FBQUEsTUFDUCxZQUFZO0FBQUEsSUFDeEI7QUFBQSxJQUNRLFdBQVc7QUFBQSxNQUNQLE9BQU9EO0FBQUEsTUFDUCxZQUFZO0FBQUEsSUFDeEI7QUFBQSxFQUNBLENBQUssR0FDTUM7QUFDWDtBQy9CTyxNQUFNQyxLQUFpQixPQUFPLG1EQUFtRCxHQUNsRkMsS0FBaUI7QUFBQSxFQUNuQixNQUFNO0FBQUEsRUFDTixjQUFjO0FBQUEsRUFDZCxnQkFBZ0I7QUFBQSxFQUNoQixjQUFjO0FBQUEsRUFDZCxjQUFjO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYixrQkFBa0I7QUFBQSxFQUNsQiwwQkFBMEI7QUFBQSxFQUMxQixnQkFBZ0I7QUFBQSxFQUNoQixRQUFRO0FBQUEsRUFDUixjQUFjO0FBQUEsRUFDZCxlQUFlO0FBQUEsRUFDZixxQkFBcUI7QUFBQSxFQUNyQixpQkFBaUI7QUFBQSxFQUNqQixpQkFBaUI7QUFBQSxFQUNqQixlQUFlO0FBQUEsRUFDZixnQkFBZ0I7QUFBQSxFQUNoQixjQUFjO0FBQ2xCLEdBQ2FDLEtBQW9CLENBQUNDLE1BRXRCLE9BQU9BLEtBQVksV0FDdkI7QUFBQSxFQUNJLEdBQUdGO0FBQUEsRUFDSCxVQUFVLENBQUMsR0FBRztBQUFBLEVBQ2QsYUFBYSxDQUFBO0FBQUEsRUFDYixNQUFNRTtBQUNsQixJQUNVO0FBQUEsRUFDRSxHQUFHRjtBQUFBLEVBQ0gsVUFBVSxDQUFDLEdBQUc7QUFBQSxFQUNkLGFBQWEsQ0FBQTtBQUFBLEVBQ2IsR0FBR0U7QUFDZixHQ25DYUMsS0FBUyxDQUFDekIsTUFDWixVQUFVQSxJQUFZQSxFQUFVLE9BQU9BO0FBRTNDLFNBQVMwQixHQUFXTixHQUFLO0FBQzVCLE1BQUksQ0FBQ0E7QUFDRCxXQUFPO0FBQ1gsYUFBV08sS0FBTVA7QUFDYixXQUFPO0FBQ1gsU0FBTztBQUNYO0FDUE8sTUFBTVEsS0FBVSxDQUFDSixNQUFZO0FBQ2hDLFFBQU1LLElBQVdOLEdBQWtCQyxDQUFPLEdBQ3BDTSxJQUFjRCxFQUFTLFNBQVMsU0FDbEMsQ0FBQyxHQUFHQSxFQUFTLFVBQVVBLEVBQVMsZ0JBQWdCQSxFQUFTLElBQUksSUFDM0RBLEVBQVM7QUFDZixTQUFPO0FBQUEsSUFDSCxHQUFHQTtBQUFBLElBQ0gsYUFBYUM7QUFBQSxJQUNiLGNBQWM7QUFBQSxJQUNkLFVBQVUsb0JBQUksSUFBRztBQUFBLElBQ2pCLE1BQU0sSUFBSSxJQUFJLE9BQU8sUUFBUUQsRUFBUyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUNFLEdBQU12RixDQUFHLE1BQU07QUFBQSxNQUNwRWlGLEdBQU9qRixDQUFHO0FBQUEsTUFDVjtBQUFBLFFBQ0ksS0FBS2lGLEdBQU9qRixDQUFHO0FBQUEsUUFDZixNQUFNLENBQUMsR0FBR3FGLEVBQVMsVUFBVUEsRUFBUyxnQkFBZ0JFLENBQUk7QUFBQTtBQUFBLFFBRTFELFlBQVk7QUFBQSxNQUM1QjtBQUFBLElBQ0EsQ0FBUyxDQUFDO0FBQUEsRUFDVjtBQUNBO0FDdEJPLFNBQVNDLEdBQWdCQyxHQUFLckUsR0FBS3NFLEdBQWNDLEdBQU07QUFDMUQsRUFBS0EsS0FBQSxRQUFBQSxFQUFNLGlCQUVQRCxNQUNBRCxFQUFJLGVBQWU7QUFBQSxJQUNmLEdBQUdBLEVBQUk7QUFBQSxJQUNQLENBQUNyRSxDQUFHLEdBQUdzRTtBQUFBLEVBQ25CO0FBRUE7QUFDTyxTQUFTRSxFQUEwQkgsR0FBS3JFLEdBQUt5RSxHQUFPSCxHQUFjQyxHQUFNO0FBQzNFLEVBQUFGLEVBQUlyRSxDQUFHLElBQUl5RSxHQUNYTCxHQUFnQkMsR0FBS3JFLEdBQUtzRSxHQUFjQyxDQUFJO0FBQ2hEO0FDYk8sSUFBSUc7QUFBQSxDQUNWLFNBQVVBLEdBQU07QUFDYixFQUFBQSxFQUFLLGNBQWMsQ0FBQzNHLE1BQU07QUFBQSxFQUFFO0FBQzVCLFdBQVM0RyxFQUFTQyxHQUFNO0FBQUEsRUFBRTtBQUMxQixFQUFBRixFQUFLLFdBQVdDO0FBQ2hCLFdBQVNFLEVBQVlDLEdBQUk7QUFDckIsVUFBTSxJQUFJLE1BQUs7QUFBQSxFQUNuQjtBQUNBLEVBQUFKLEVBQUssY0FBY0csR0FDbkJILEVBQUssY0FBYyxDQUFDSyxNQUFVO0FBQzFCLFVBQU12QixJQUFNLENBQUE7QUFDWixlQUFXSixLQUFRMkI7QUFDZixNQUFBdkIsRUFBSUosQ0FBSSxJQUFJQTtBQUVoQixXQUFPSTtBQUFBLEVBQ1gsR0FDQWtCLEVBQUsscUJBQXFCLENBQUNsQixNQUFRO0FBQy9CLFVBQU13QixJQUFZTixFQUFLLFdBQVdsQixDQUFHLEVBQUUsT0FBTyxDQUFDMUYsTUFBTSxPQUFPMEYsRUFBSUEsRUFBSTFGLENBQUMsQ0FBQyxLQUFNLFFBQVEsR0FDOUVtSCxJQUFXLENBQUE7QUFDakIsZUFBV25ILEtBQUtrSDtBQUNaLE1BQUFDLEVBQVNuSCxDQUFDLElBQUkwRixFQUFJMUYsQ0FBQztBQUV2QixXQUFPNEcsRUFBSyxhQUFhTyxDQUFRO0FBQUEsRUFDckMsR0FDQVAsRUFBSyxlQUFlLENBQUNsQixNQUNWa0IsRUFBSyxXQUFXbEIsQ0FBRyxFQUFFLElBQUksU0FBVTBCLEdBQUc7QUFDekMsV0FBTzFCLEVBQUkwQixDQUFDO0FBQUEsRUFDaEIsQ0FBQyxHQUVMUixFQUFLLGFBQWEsT0FBTyxPQUFPLFFBQVMsYUFDbkMsQ0FBQ2xCLE1BQVEsT0FBTyxLQUFLQSxDQUFHLElBQ3hCLENBQUMyQixNQUFXO0FBQ1YsVUFBTUMsSUFBTyxDQUFBO0FBQ2IsZUFBV3BGLEtBQU9tRjtBQUNkLE1BQUksT0FBTyxVQUFVLGVBQWUsS0FBS0EsR0FBUW5GLENBQUcsS0FDaERvRixFQUFLLEtBQUtwRixDQUFHO0FBR3JCLFdBQU9vRjtBQUFBLEVBQ1gsR0FDSlYsRUFBSyxPQUFPLENBQUNXLEdBQUtDLE1BQVk7QUFDMUIsZUFBV2xDLEtBQVFpQztBQUNmLFVBQUlDLEVBQVFsQyxDQUFJO0FBQ1osZUFBT0E7QUFBQSxFQUduQixHQUNBc0IsRUFBSyxZQUFZLE9BQU8sT0FBTyxhQUFjLGFBQ3ZDLENBQUNsRSxNQUFRLE9BQU8sVUFBVUEsQ0FBRyxJQUM3QixDQUFDQSxNQUFRLE9BQU9BLEtBQVEsWUFBWSxPQUFPLFNBQVNBLENBQUcsS0FBSyxLQUFLLE1BQU1BLENBQUcsTUFBTUE7QUFDdEYsV0FBUytFLEVBQVdDLEdBQU9DLElBQVksT0FBTztBQUMxQyxXQUFPRCxFQUFNLElBQUksQ0FBQ2hGLE1BQVMsT0FBT0EsS0FBUSxXQUFXLElBQUlBLENBQUcsTUFBTUEsQ0FBSSxFQUFFLEtBQUtpRixDQUFTO0FBQUEsRUFDMUY7QUFDQSxFQUFBZixFQUFLLGFBQWFhLEdBQ2xCYixFQUFLLHdCQUF3QixDQUFDM0csR0FBRzBHLE1BQ3pCLE9BQU9BLEtBQVUsV0FDVkEsRUFBTSxTQUFRLElBRWxCQTtBQUVmLEdBQUdDLE1BQVNBLElBQU8sQ0FBQSxFQUFHO0FBQ2YsSUFBSWdCO0FBQUEsQ0FDVixTQUFVQSxHQUFZO0FBQ25CLEVBQUFBLEVBQVcsY0FBYyxDQUFDQyxHQUFPQyxPQUN0QjtBQUFBLElBQ0gsR0FBR0Q7QUFBQSxJQUNILEdBQUdDO0FBQUE7QUFBQSxFQUNmO0FBRUEsR0FBR0YsT0FBZUEsS0FBYSxDQUFBLEVBQUc7QUFDM0IsTUFBTUcsSUFBZ0JuQixFQUFLLFlBQVk7QUFBQSxFQUMxQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDSixDQUFDLEdBQ1lvQixLQUFnQixDQUFDQyxNQUFTO0FBRW5DLFVBRFUsT0FBT0EsR0FDUjtBQUFBLElBQ0wsS0FBSztBQUNELGFBQU9GLEVBQWM7QUFBQSxJQUN6QixLQUFLO0FBQ0QsYUFBT0EsRUFBYztBQUFBLElBQ3pCLEtBQUs7QUFDRCxhQUFPLE9BQU8sTUFBTUUsQ0FBSSxJQUFJRixFQUFjLE1BQU1BLEVBQWM7QUFBQSxJQUNsRSxLQUFLO0FBQ0QsYUFBT0EsRUFBYztBQUFBLElBQ3pCLEtBQUs7QUFDRCxhQUFPQSxFQUFjO0FBQUEsSUFDekIsS0FBSztBQUNELGFBQU9BLEVBQWM7QUFBQSxJQUN6QixLQUFLO0FBQ0QsYUFBT0EsRUFBYztBQUFBLElBQ3pCLEtBQUs7QUFDRCxhQUFJLE1BQU0sUUFBUUUsQ0FBSSxJQUNYRixFQUFjLFFBRXJCRSxNQUFTLE9BQ0ZGLEVBQWMsT0FFckJFLEVBQUssUUFBUSxPQUFPQSxFQUFLLFFBQVMsY0FBY0EsRUFBSyxTQUFTLE9BQU9BLEVBQUssU0FBVSxhQUM3RUYsRUFBYyxVQUVyQixPQUFPLE1BQVEsT0FBZUUsYUFBZ0IsTUFDdkNGLEVBQWMsTUFFckIsT0FBTyxNQUFRLE9BQWVFLGFBQWdCLE1BQ3ZDRixFQUFjLE1BRXJCLE9BQU8sT0FBUyxPQUFlRSxhQUFnQixPQUN4Q0YsRUFBYyxPQUVsQkEsRUFBYztBQUFBLElBQ3pCO0FBQ0ksYUFBT0EsRUFBYztBQUFBLEVBQ2pDO0FBQ0EsR0NuSWFHLElBQWV0QixFQUFLLFlBQVk7QUFBQSxFQUN6QztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNKLENBQUM7QUFLTSxNQUFNdUIsV0FBaUIsTUFBTTtBQUFBLEVBQ2hDLElBQUksU0FBUztBQUNULFdBQU8sS0FBSztBQUFBLEVBQ2hCO0FBQUEsRUFDQSxZQUFZQyxHQUFRO0FBQ2hCLFVBQUssR0FDTCxLQUFLLFNBQVMsQ0FBQSxHQUNkLEtBQUssV0FBVyxDQUFDQyxNQUFRO0FBQ3JCLFdBQUssU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRQSxDQUFHO0FBQUEsSUFDdEMsR0FDQSxLQUFLLFlBQVksQ0FBQ0MsSUFBTyxPQUFPO0FBQzVCLFdBQUssU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRLEdBQUdBLENBQUk7QUFBQSxJQUMxQztBQUNBLFVBQU1DLElBQWMsV0FBVztBQUMvQixJQUFJLE9BQU8saUJBRVAsT0FBTyxlQUFlLE1BQU1BLENBQVcsSUFHdkMsS0FBSyxZQUFZQSxHQUVyQixLQUFLLE9BQU8sWUFDWixLQUFLLFNBQVNIO0FBQUEsRUFDbEI7QUFBQSxFQUNBLE9BQU9JLEdBQVM7QUFDWixVQUFNQyxJQUFTRCxLQUNYLFNBQVVFLEdBQU87QUFDYixhQUFPQSxFQUFNO0FBQUEsSUFDakIsR0FDRUMsSUFBYyxFQUFFLFNBQVMsR0FBRSxHQUMzQkMsSUFBZSxDQUFDakosTUFBVTtBQUM1QixpQkFBVytJLEtBQVMvSSxFQUFNO0FBQ3RCLFlBQUkrSSxFQUFNLFNBQVM7QUFDZixVQUFBQSxFQUFNLFlBQVksSUFBSUUsQ0FBWTtBQUFBLGlCQUU3QkYsRUFBTSxTQUFTO0FBQ3BCLFVBQUFFLEVBQWFGLEVBQU0sZUFBZTtBQUFBLGlCQUU3QkEsRUFBTSxTQUFTO0FBQ3BCLFVBQUFFLEVBQWFGLEVBQU0sY0FBYztBQUFBLGlCQUU1QkEsRUFBTSxLQUFLLFdBQVc7QUFDM0IsVUFBQUMsRUFBWSxRQUFRLEtBQUtGLEVBQU9DLENBQUssQ0FBQztBQUFBLGFBRXJDO0FBQ0QsY0FBSUcsSUFBT0YsR0FDUHJHLElBQUk7QUFDUixpQkFBT0EsSUFBSW9HLEVBQU0sS0FBSyxVQUFRO0FBQzFCLGtCQUFNSSxJQUFLSixFQUFNLEtBQUtwRyxDQUFDO0FBRXZCLFlBRGlCQSxNQUFNb0csRUFBTSxLQUFLLFNBQVMsS0FZdkNHLEVBQUtDLENBQUUsSUFBSUQsRUFBS0MsQ0FBRSxLQUFLLEVBQUUsU0FBUyxHQUFFLEdBQ3BDRCxFQUFLQyxDQUFFLEVBQUUsUUFBUSxLQUFLTCxFQUFPQyxDQUFLLENBQUMsS0FYbkNHLEVBQUtDLENBQUUsSUFBSUQsRUFBS0MsQ0FBRSxLQUFLLEVBQUUsU0FBUyxHQUFFLEdBYXhDRCxJQUFPQSxFQUFLQyxDQUFFLEdBQ2R4RztBQUFBLFVBQ0o7QUFBQSxRQUNKO0FBQUEsSUFFUjtBQUNBLFdBQUFzRyxFQUFhLElBQUksR0FDVkQ7QUFBQSxFQUNYO0FBQUEsRUFDQSxPQUFPLE9BQU9oQyxHQUFPO0FBQ2pCLFFBQUksRUFBRUEsYUFBaUJ3QjtBQUNuQixZQUFNLElBQUksTUFBTSxtQkFBbUJ4QixDQUFLLEVBQUU7QUFBQSxFQUVsRDtBQUFBLEVBQ0EsV0FBVztBQUNQLFdBQU8sS0FBSztBQUFBLEVBQ2hCO0FBQUEsRUFDQSxJQUFJLFVBQVU7QUFDVixXQUFPLEtBQUssVUFBVSxLQUFLLFFBQVFDLEVBQUssdUJBQXVCLENBQUM7QUFBQSxFQUNwRTtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLE9BQU8sV0FBVztBQUFBLEVBQ2xDO0FBQUEsRUFDQSxRQUFRNkIsSUFBUyxDQUFDQyxNQUFVQSxFQUFNLFNBQVM7QUFDdkMsVUFBTUMsSUFBYyxDQUFBLEdBQ2RJLElBQWEsQ0FBQTtBQUNuQixlQUFXVixLQUFPLEtBQUs7QUFDbkIsVUFBSUEsRUFBSSxLQUFLLFNBQVMsR0FBRztBQUNyQixjQUFNVyxJQUFVWCxFQUFJLEtBQUssQ0FBQztBQUMxQixRQUFBTSxFQUFZSyxDQUFPLElBQUlMLEVBQVlLLENBQU8sS0FBSyxDQUFBLEdBQy9DTCxFQUFZSyxDQUFPLEVBQUUsS0FBS1AsRUFBT0osQ0FBRyxDQUFDO0FBQUEsTUFDekM7QUFFSSxRQUFBVSxFQUFXLEtBQUtOLEVBQU9KLENBQUcsQ0FBQztBQUduQyxXQUFPLEVBQUUsWUFBQVUsR0FBWSxhQUFBSixFQUFXO0FBQUEsRUFDcEM7QUFBQSxFQUNBLElBQUksYUFBYTtBQUNiLFdBQU8sS0FBSyxRQUFPO0FBQUEsRUFDdkI7QUFDSjtBQUNBUixHQUFTLFNBQVMsQ0FBQ0MsTUFDRCxJQUFJRCxHQUFTQyxDQUFNO0FDaElyQyxNQUFNYSxLQUFXLENBQUNQLEdBQU92RCxNQUFTO0FBQzlCLE1BQUkrRDtBQUNKLFVBQVFSLEVBQU0sTUFBSTtBQUFBLElBQ2QsS0FBS1IsRUFBYTtBQUNkLE1BQUlRLEVBQU0sYUFBYVgsRUFBYyxZQUNqQ21CLElBQVUsYUFHVkEsSUFBVSxZQUFZUixFQUFNLFFBQVEsY0FBY0EsRUFBTSxRQUFRO0FBRXBFO0FBQUEsSUFDSixLQUFLUixFQUFhO0FBQ2QsTUFBQWdCLElBQVUsbUNBQW1DLEtBQUssVUFBVVIsRUFBTSxVQUFVOUIsRUFBSyxxQkFBcUIsQ0FBQztBQUN2RztBQUFBLElBQ0osS0FBS3NCLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVSxrQ0FBa0N0QyxFQUFLLFdBQVc4QixFQUFNLE1BQU0sSUFBSSxDQUFDO0FBQzdFO0FBQUEsSUFDSixLQUFLUixFQUFhO0FBQ2QsTUFBQWdCLElBQVU7QUFDVjtBQUFBLElBQ0osS0FBS2hCLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVSx5Q0FBeUN0QyxFQUFLLFdBQVc4QixFQUFNLE9BQU8sQ0FBQztBQUNqRjtBQUFBLElBQ0osS0FBS1IsRUFBYTtBQUNkLE1BQUFnQixJQUFVLGdDQUFnQ3RDLEVBQUssV0FBVzhCLEVBQU0sT0FBTyxDQUFDLGVBQWVBLEVBQU0sUUFBUTtBQUNyRztBQUFBLElBQ0osS0FBS1IsRUFBYTtBQUNkLE1BQUFnQixJQUFVO0FBQ1Y7QUFBQSxJQUNKLEtBQUtoQixFQUFhO0FBQ2QsTUFBQWdCLElBQVU7QUFDVjtBQUFBLElBQ0osS0FBS2hCLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVTtBQUNWO0FBQUEsSUFDSixLQUFLaEIsRUFBYTtBQUNkLE1BQUksT0FBT1EsRUFBTSxjQUFlLFdBQ3hCLGNBQWNBLEVBQU0sY0FDcEJRLElBQVUsZ0NBQWdDUixFQUFNLFdBQVcsUUFBUSxLQUMvRCxPQUFPQSxFQUFNLFdBQVcsWUFBYSxhQUNyQ1EsSUFBVSxHQUFHQSxDQUFPLHNEQUFzRFIsRUFBTSxXQUFXLFFBQVEsT0FHbEcsZ0JBQWdCQSxFQUFNLGFBQzNCUSxJQUFVLG1DQUFtQ1IsRUFBTSxXQUFXLFVBQVUsTUFFbkUsY0FBY0EsRUFBTSxhQUN6QlEsSUFBVSxpQ0FBaUNSLEVBQU0sV0FBVyxRQUFRLE1BR3BFOUIsRUFBSyxZQUFZOEIsRUFBTSxVQUFVLElBR2hDQSxFQUFNLGVBQWUsVUFDMUJRLElBQVUsV0FBV1IsRUFBTSxVQUFVLEtBR3JDUSxJQUFVO0FBRWQ7QUFBQSxJQUNKLEtBQUtoQixFQUFhO0FBQ2QsTUFBSVEsRUFBTSxTQUFTLFVBQ2ZRLElBQVUsc0JBQXNCUixFQUFNLFFBQVEsWUFBWUEsRUFBTSxZQUFZLGFBQWEsV0FBVyxJQUFJQSxFQUFNLE9BQU8sZ0JBQ2hIQSxFQUFNLFNBQVMsV0FDcEJRLElBQVUsdUJBQXVCUixFQUFNLFFBQVEsWUFBWUEsRUFBTSxZQUFZLGFBQWEsTUFBTSxJQUFJQSxFQUFNLE9BQU8sa0JBQzVHQSxFQUFNLFNBQVMsV0FDcEJRLElBQVUsa0JBQWtCUixFQUFNLFFBQVEsc0JBQXNCQSxFQUFNLFlBQVksOEJBQThCLGVBQWUsR0FBR0EsRUFBTSxPQUFPLEtBQzFJQSxFQUFNLFNBQVMsV0FDcEJRLElBQVUsa0JBQWtCUixFQUFNLFFBQVEsc0JBQXNCQSxFQUFNLFlBQVksOEJBQThCLGVBQWUsR0FBR0EsRUFBTSxPQUFPLEtBQzFJQSxFQUFNLFNBQVMsU0FDcEJRLElBQVUsZ0JBQWdCUixFQUFNLFFBQVEsc0JBQXNCQSxFQUFNLFlBQVksOEJBQThCLGVBQWUsR0FBRyxJQUFJLEtBQUssT0FBT0EsRUFBTSxPQUFPLENBQUMsQ0FBQyxLQUUvSlEsSUFBVTtBQUNkO0FBQUEsSUFDSixLQUFLaEIsRUFBYTtBQUNkLE1BQUlRLEVBQU0sU0FBUyxVQUNmUSxJQUFVLHNCQUFzQlIsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSxZQUFZLFdBQVcsSUFBSUEsRUFBTSxPQUFPLGdCQUMvR0EsRUFBTSxTQUFTLFdBQ3BCUSxJQUFVLHVCQUF1QlIsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSxZQUFZLE9BQU8sSUFBSUEsRUFBTSxPQUFPLGtCQUM1R0EsRUFBTSxTQUFTLFdBQ3BCUSxJQUFVLGtCQUFrQlIsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSwwQkFBMEIsV0FBVyxJQUFJQSxFQUFNLE9BQU8sS0FDekhBLEVBQU0sU0FBUyxXQUNwQlEsSUFBVSxrQkFBa0JSLEVBQU0sUUFBUSxZQUFZQSxFQUFNLFlBQVksMEJBQTBCLFdBQVcsSUFBSUEsRUFBTSxPQUFPLEtBQ3pIQSxFQUFNLFNBQVMsU0FDcEJRLElBQVUsZ0JBQWdCUixFQUFNLFFBQVEsWUFBWUEsRUFBTSxZQUFZLDZCQUE2QixjQUFjLElBQUksSUFBSSxLQUFLLE9BQU9BLEVBQU0sT0FBTyxDQUFDLENBQUMsS0FFcEpRLElBQVU7QUFDZDtBQUFBLElBQ0osS0FBS2hCLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVTtBQUNWO0FBQUEsSUFDSixLQUFLaEIsRUFBYTtBQUNkLE1BQUFnQixJQUFVO0FBQ1Y7QUFBQSxJQUNKLEtBQUtoQixFQUFhO0FBQ2QsTUFBQWdCLElBQVUsZ0NBQWdDUixFQUFNLFVBQVU7QUFDMUQ7QUFBQSxJQUNKLEtBQUtSLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVTtBQUNWO0FBQUEsSUFDSjtBQUNJLE1BQUFBLElBQVUvRCxFQUFLLGNBQ2Z5QixFQUFLLFlBQVk4QixDQUFLO0FBQUEsRUFDbEM7QUFDSSxTQUFPLEVBQUUsU0FBQVEsRUFBTztBQUNwQjtBQzFHQSxJQUFJQyxLQUFtQkM7QUFLaEIsU0FBU0MsS0FBYztBQUMxQixTQUFPRjtBQUNYO0FDTk8sTUFBTUcsS0FBWSxDQUFDM0ksTUFBVztBQUNqQyxRQUFNLEVBQUUsTUFBQXNILEdBQU0sTUFBQXNCLEdBQU0sV0FBQUMsR0FBVyxXQUFBQyxFQUFTLElBQUs5SSxHQUN2QytJLElBQVcsQ0FBQyxHQUFHSCxHQUFNLEdBQUlFLEVBQVUsUUFBUSxDQUFBLENBQUcsR0FDOUNFLElBQVk7QUFBQSxJQUNkLEdBQUdGO0FBQUEsSUFDSCxNQUFNQztBQUFBLEVBQ2Q7QUFDSSxNQUFJRCxFQUFVLFlBQVk7QUFDdEIsV0FBTztBQUFBLE1BQ0gsR0FBR0E7QUFBQSxNQUNILE1BQU1DO0FBQUEsTUFDTixTQUFTRCxFQUFVO0FBQUEsSUFDL0I7QUFFSSxNQUFJakQsSUFBZTtBQUNuQixRQUFNb0QsSUFBT0osRUFDUixPQUFPLENBQUNyRyxNQUFNLENBQUMsQ0FBQ0EsQ0FBQyxFQUNqQixNQUFLLEVBQ0wsUUFBTztBQUNaLGFBQVcwRyxLQUFPRDtBQUNkLElBQUFwRCxJQUFlcUQsRUFBSUYsR0FBVyxFQUFFLE1BQUExQixHQUFNLGNBQWN6QixFQUFZLENBQUUsRUFBRTtBQUV4RSxTQUFPO0FBQUEsSUFDSCxHQUFHaUQ7QUFBQSxJQUNILE1BQU1DO0FBQUEsSUFDTixTQUFTbEQ7QUFBQSxFQUNqQjtBQUNBO0FBRU8sU0FBU3NELEVBQWtCMUUsR0FBS3FFLEdBQVc7QUFDOUMsUUFBTU0sSUFBY1YsR0FBVyxHQUN6QlgsSUFBUVksR0FBVTtBQUFBLElBQ3BCLFdBQVdHO0FBQUEsSUFDWCxNQUFNckUsRUFBSTtBQUFBLElBQ1YsTUFBTUEsRUFBSTtBQUFBLElBQ1YsV0FBVztBQUFBLE1BQ1BBLEVBQUksT0FBTztBQUFBO0FBQUEsTUFDWEEsRUFBSTtBQUFBO0FBQUEsTUFDSjJFO0FBQUE7QUFBQSxNQUNBQSxNQUFnQlgsS0FBa0IsU0FBWUE7QUFBQUE7QUFBQUEsSUFDMUQsRUFBVSxPQUFPLENBQUN2RyxNQUFNLENBQUMsQ0FBQ0EsQ0FBQztBQUFBLEVBQzNCLENBQUs7QUFDRCxFQUFBdUMsRUFBSSxPQUFPLE9BQU8sS0FBS3NELENBQUs7QUFDaEM7QUFDTyxNQUFNc0IsR0FBWTtBQUFBLEVBQ3JCLGNBQWM7QUFDVixTQUFLLFFBQVE7QUFBQSxFQUNqQjtBQUFBLEVBQ0EsUUFBUTtBQUNKLElBQUksS0FBSyxVQUFVLFlBQ2YsS0FBSyxRQUFRO0FBQUEsRUFDckI7QUFBQSxFQUNBLFFBQVE7QUFDSixJQUFJLEtBQUssVUFBVSxjQUNmLEtBQUssUUFBUTtBQUFBLEVBQ3JCO0FBQUEsRUFDQSxPQUFPLFdBQVdDLEdBQVFDLEdBQVM7QUFDL0IsVUFBTUMsSUFBYSxDQUFBO0FBQ25CLGVBQVcsS0FBS0QsR0FBUztBQUNyQixVQUFJLEVBQUUsV0FBVztBQUNiLGVBQU9FO0FBQ1gsTUFBSSxFQUFFLFdBQVcsV0FDYkgsRUFBTyxNQUFLLEdBQ2hCRSxFQUFXLEtBQUssRUFBRSxLQUFLO0FBQUEsSUFDM0I7QUFDQSxXQUFPLEVBQUUsUUFBUUYsRUFBTyxPQUFPLE9BQU9FLEVBQVU7QUFBQSxFQUNwRDtBQUFBLEVBQ0EsYUFBYSxpQkFBaUJGLEdBQVFJLEdBQU87QUFDekMsVUFBTUMsSUFBWSxDQUFBO0FBQ2xCLGVBQVdDLEtBQVFGLEdBQU87QUFDdEIsWUFBTW5JLElBQU0sTUFBTXFJLEVBQUssS0FDakI1RCxJQUFRLE1BQU00RCxFQUFLO0FBQ3pCLE1BQUFELEVBQVUsS0FBSztBQUFBLFFBQ1gsS0FBQXBJO0FBQUEsUUFDQSxPQUFBeUU7QUFBQSxNQUNoQixDQUFhO0FBQUEsSUFDTDtBQUNBLFdBQU9xRCxHQUFZLGdCQUFnQkMsR0FBUUssQ0FBUztBQUFBLEVBQ3hEO0FBQUEsRUFDQSxPQUFPLGdCQUFnQkwsR0FBUUksR0FBTztBQUNsQyxVQUFNRyxJQUFjLENBQUE7QUFDcEIsZUFBV0QsS0FBUUYsR0FBTztBQUN0QixZQUFNLEVBQUUsS0FBQW5JLEdBQUssT0FBQXlFLEVBQUssSUFBSzREO0FBR3ZCLFVBRklySSxFQUFJLFdBQVcsYUFFZnlFLEVBQU0sV0FBVztBQUNqQixlQUFPeUQ7QUFDWCxNQUFJbEksRUFBSSxXQUFXLFdBQ2YrSCxFQUFPLE1BQUssR0FDWnRELEVBQU0sV0FBVyxXQUNqQnNELEVBQU8sTUFBSyxHQUNaL0gsRUFBSSxVQUFVLGdCQUFnQixPQUFPeUUsRUFBTSxRQUFVLE9BQWU0RCxFQUFLLGVBQ3pFQyxFQUFZdEksRUFBSSxLQUFLLElBQUl5RSxFQUFNO0FBQUEsSUFFdkM7QUFDQSxXQUFPLEVBQUUsUUFBUXNELEVBQU8sT0FBTyxPQUFPTyxFQUFXO0FBQUEsRUFDckQ7QUFDSjtBQUNPLE1BQU1KLElBQVUsT0FBTyxPQUFPO0FBQUEsRUFDakMsUUFBUTtBQUNaLENBQUMsR0FDWUssS0FBUSxDQUFDOUQsT0FBVyxFQUFFLFFBQVEsU0FBUyxPQUFBQSxFQUFLLElBQzVDK0QsS0FBSyxDQUFDL0QsT0FBVyxFQUFFLFFBQVEsU0FBUyxPQUFBQSxFQUFLLElBQ3pDZ0UsS0FBWSxDQUFDOUgsTUFBTUEsRUFBRSxXQUFXLFdBQ2hDK0gsS0FBVSxDQUFDL0gsTUFBTUEsRUFBRSxXQUFXLFNBQzlCZ0ksS0FBVSxDQUFDaEksTUFBTUEsRUFBRSxXQUFXLFNBQzlCaUksS0FBVSxDQUFDakksTUFBTSxPQUFPLFVBQVksT0FBZUEsYUFBYTtBQzVHdEUsSUFBSWtJO0FBQUEsQ0FDVixTQUFVQSxHQUFXO0FBQ2xCLEVBQUFBLEVBQVUsV0FBVyxDQUFDN0IsTUFBWSxPQUFPQSxLQUFZLFdBQVcsRUFBRSxTQUFBQSxNQUFZQSxLQUFXLENBQUEsR0FFekY2QixFQUFVLFdBQVcsQ0FBQzdCLE1BQVksT0FBT0EsS0FBWSxXQUFXQSxJQUFVQSxLQUFBLGdCQUFBQSxFQUFTO0FBQ3ZGLEdBQUc2QixNQUFjQSxJQUFZLENBQUEsRUFBRztBQ0FoQyxNQUFNQyxHQUFtQjtBQUFBLEVBQ3JCLFlBQVk1SixHQUFRdUYsR0FBTzRDLEdBQU1ySCxHQUFLO0FBQ2xDLFNBQUssY0FBYyxDQUFBLEdBQ25CLEtBQUssU0FBU2QsR0FDZCxLQUFLLE9BQU91RixHQUNaLEtBQUssUUFBUTRDLEdBQ2IsS0FBSyxPQUFPckg7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsSUFBSSxPQUFPO0FBQ1AsV0FBSyxLQUFLLFlBQVksV0FDZCxNQUFNLFFBQVEsS0FBSyxJQUFJLElBQ3ZCLEtBQUssWUFBWSxLQUFLLEdBQUcsS0FBSyxPQUFPLEdBQUcsS0FBSyxJQUFJLElBR2pELEtBQUssWUFBWSxLQUFLLEdBQUcsS0FBSyxPQUFPLEtBQUssSUFBSSxJQUcvQyxLQUFLO0FBQUEsRUFDaEI7QUFDSjtBQUNBLE1BQU0rSSxLQUFlLENBQUM3RixHQUFLbkUsTUFBVztBQUNsQyxNQUFJNEosR0FBUTVKLENBQU07QUFDZCxXQUFPLEVBQUUsU0FBUyxJQUFNLE1BQU1BLEVBQU8sTUFBSztBQUcxQyxNQUFJLENBQUNtRSxFQUFJLE9BQU8sT0FBTztBQUNuQixVQUFNLElBQUksTUFBTSwyQ0FBMkM7QUFFL0QsU0FBTztBQUFBLElBQ0gsU0FBUztBQUFBLElBQ1QsSUFBSSxRQUFRO0FBQ1IsVUFBSSxLQUFLO0FBQ0wsZUFBTyxLQUFLO0FBQ2hCLFlBQU16RixJQUFRLElBQUl3SSxHQUFTL0MsRUFBSSxPQUFPLE1BQU07QUFDNUMsa0JBQUssU0FBU3pGLEdBQ1AsS0FBSztBQUFBLElBQ2hCO0FBQUEsRUFDWjtBQUVBO0FBQ0EsU0FBU3VMLEVBQW9CdkssR0FBUTtBQUNqQyxNQUFJLENBQUNBO0FBQ0QsV0FBTyxDQUFBO0FBQ1gsUUFBTSxFQUFFLFVBQUFzSSxHQUFVLG9CQUFBa0MsR0FBb0IsZ0JBQUFDLEdBQWdCLGFBQUFDLEVBQVcsSUFBSzFLO0FBQ3RFLE1BQUlzSSxNQUFha0MsS0FBc0JDO0FBQ25DLFVBQU0sSUFBSSxNQUFNLDBGQUEwRjtBQUU5RyxTQUFJbkMsSUFDTyxFQUFFLFVBQVVBLEdBQVUsYUFBQW9DLEVBQVcsSUFhckMsRUFBRSxVQVpTLENBQUNDLEdBQUtsRyxNQUFRO0FBQzVCLFVBQU0sRUFBRSxTQUFBOEQsRUFBTyxJQUFLdkk7QUFDcEIsV0FBSTJLLEVBQUksU0FBUyx1QkFDTixFQUFFLFNBQVNwQyxLQUFXOUQsRUFBSSxhQUFZLElBRTdDLE9BQU9BLEVBQUksT0FBUyxNQUNiLEVBQUUsU0FBUzhELEtBQVdrQyxLQUFrQmhHLEVBQUksYUFBWSxJQUUvRGtHLEVBQUksU0FBUyxpQkFDTixFQUFFLFNBQVNsRyxFQUFJLGFBQVksSUFDL0IsRUFBRSxTQUFTOEQsS0FBV2lDLEtBQXNCL0YsRUFBSSxhQUFZO0FBQUEsRUFDdkUsR0FDOEIsYUFBQWlHLEVBQVc7QUFDN0M7QUFDTyxNQUFNRSxFQUFRO0FBQUEsRUFDakIsSUFBSSxjQUFjO0FBQ2QsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUFBLEVBQ0EsU0FBU3pHLEdBQU87QUFDWixXQUFPa0QsR0FBY2xELEVBQU0sSUFBSTtBQUFBLEVBQ25DO0FBQUEsRUFDQSxnQkFBZ0JBLEdBQU9NLEdBQUs7QUFDeEIsV0FBUUEsS0FBTztBQUFBLE1BQ1gsUUFBUU4sRUFBTSxPQUFPO0FBQUEsTUFDckIsTUFBTUEsRUFBTTtBQUFBLE1BQ1osWUFBWWtELEdBQWNsRCxFQUFNLElBQUk7QUFBQSxNQUNwQyxnQkFBZ0IsS0FBSyxLQUFLO0FBQUEsTUFDMUIsTUFBTUEsRUFBTTtBQUFBLE1BQ1osUUFBUUEsRUFBTTtBQUFBLElBQzFCO0FBQUEsRUFDSTtBQUFBLEVBQ0Esb0JBQW9CQSxHQUFPO0FBQ3ZCLFdBQU87QUFBQSxNQUNILFFBQVEsSUFBSWtGLEdBQVc7QUFBQSxNQUN2QixLQUFLO0FBQUEsUUFDRCxRQUFRbEYsRUFBTSxPQUFPO0FBQUEsUUFDckIsTUFBTUEsRUFBTTtBQUFBLFFBQ1osWUFBWWtELEdBQWNsRCxFQUFNLElBQUk7QUFBQSxRQUNwQyxnQkFBZ0IsS0FBSyxLQUFLO0FBQUEsUUFDMUIsTUFBTUEsRUFBTTtBQUFBLFFBQ1osUUFBUUEsRUFBTTtBQUFBLE1BQzlCO0FBQUEsSUFDQTtBQUFBLEVBQ0k7QUFBQSxFQUNBLFdBQVdBLEdBQU87QUFDZCxVQUFNN0QsSUFBUyxLQUFLLE9BQU82RCxDQUFLO0FBQ2hDLFFBQUlnRyxHQUFRN0osQ0FBTTtBQUNkLFlBQU0sSUFBSSxNQUFNLHdDQUF3QztBQUU1RCxXQUFPQTtBQUFBLEVBQ1g7QUFBQSxFQUNBLFlBQVk2RCxHQUFPO0FBQ2YsVUFBTTdELElBQVMsS0FBSyxPQUFPNkQsQ0FBSztBQUNoQyxXQUFPLFFBQVEsUUFBUTdELENBQU07QUFBQSxFQUNqQztBQUFBLEVBQ0EsTUFBTWdILEdBQU10SCxHQUFRO0FBQ2hCLFVBQU1NLElBQVMsS0FBSyxVQUFVZ0gsR0FBTXRILENBQU07QUFDMUMsUUFBSU0sRUFBTztBQUNQLGFBQU9BLEVBQU87QUFDbEIsVUFBTUEsRUFBTztBQUFBLEVBQ2pCO0FBQUEsRUFDQSxVQUFVZ0gsR0FBTXRILEdBQVE7QUFDcEIsVUFBTXlFLElBQU07QUFBQSxNQUNSLFFBQVE7QUFBQSxRQUNKLFFBQVEsQ0FBQTtBQUFBLFFBQ1IsUUFBT3pFLEtBQUEsZ0JBQUFBLEVBQVEsVUFBUztBQUFBLFFBQ3hCLG9CQUFvQkEsS0FBQSxnQkFBQUEsRUFBUTtBQUFBLE1BQzVDO0FBQUEsTUFDWSxPQUFNQSxLQUFBLGdCQUFBQSxFQUFRLFNBQVEsQ0FBQTtBQUFBLE1BQ3RCLGdCQUFnQixLQUFLLEtBQUs7QUFBQSxNQUMxQixRQUFRO0FBQUEsTUFDUixNQUFBc0g7QUFBQSxNQUNBLFlBQVlELEdBQWNDLENBQUk7QUFBQSxJQUMxQyxHQUNjaEgsSUFBUyxLQUFLLFdBQVcsRUFBRSxNQUFBZ0gsR0FBTSxNQUFNN0MsRUFBSSxNQUFNLFFBQVFBLEdBQUs7QUFDcEUsV0FBTzZGLEdBQWE3RixHQUFLbkUsQ0FBTTtBQUFBLEVBQ25DO0FBQUEsRUFDQSxZQUFZZ0gsR0FBTTs7QUFDZCxVQUFNN0MsSUFBTTtBQUFBLE1BQ1IsUUFBUTtBQUFBLFFBQ0osUUFBUSxDQUFBO0FBQUEsUUFDUixPQUFPLENBQUMsQ0FBQyxLQUFLLFdBQVcsRUFBRTtBQUFBLE1BQzNDO0FBQUEsTUFDWSxNQUFNLENBQUE7QUFBQSxNQUNOLGdCQUFnQixLQUFLLEtBQUs7QUFBQSxNQUMxQixRQUFRO0FBQUEsTUFDUixNQUFBNkM7QUFBQSxNQUNBLFlBQVlELEdBQWNDLENBQUk7QUFBQSxJQUMxQztBQUNRLFFBQUksQ0FBQyxLQUFLLFdBQVcsRUFBRTtBQUNuQixVQUFJO0FBQ0EsY0FBTWhILElBQVMsS0FBSyxXQUFXLEVBQUUsTUFBQWdILEdBQU0sTUFBTSxDQUFBLEdBQUksUUFBUTdDLEdBQUs7QUFDOUQsZUFBT3lGLEdBQVE1SixDQUFNLElBQ2Y7QUFBQSxVQUNFLE9BQU9BLEVBQU87QUFBQSxRQUN0QyxJQUNzQjtBQUFBLFVBQ0UsUUFBUW1FLEVBQUksT0FBTztBQUFBLFFBQzNDO0FBQUEsTUFDWSxTQUNPb0csR0FBSztBQUNSLFNBQUlySyxLQUFBTixJQUFBMkssS0FBQSxnQkFBQUEsRUFBSyxZQUFMLGdCQUFBM0ssRUFBYyxrQkFBZCxRQUFBTSxFQUE2QixTQUFTLG1CQUN0QyxLQUFLLFdBQVcsRUFBRSxRQUFRLEtBRTlCaUUsRUFBSSxTQUFTO0FBQUEsVUFDVCxRQUFRLENBQUE7QUFBQSxVQUNSLE9BQU87QUFBQSxRQUMzQjtBQUFBLE1BQ1k7QUFFSixXQUFPLEtBQUssWUFBWSxFQUFFLE1BQUE2QyxHQUFNLE1BQU0sQ0FBQSxHQUFJLFFBQVE3QyxFQUFHLENBQUUsRUFBRSxLQUFLLENBQUNuRSxNQUFXNEosR0FBUTVKLENBQU0sSUFDbEY7QUFBQSxNQUNFLE9BQU9BLEVBQU87QUFBQSxJQUM5QixJQUNjO0FBQUEsTUFDRSxRQUFRbUUsRUFBSSxPQUFPO0FBQUEsSUFDbkMsQ0FBYTtBQUFBLEVBQ1Q7QUFBQSxFQUNBLE1BQU0sV0FBVzZDLEdBQU10SCxHQUFRO0FBQzNCLFVBQU1NLElBQVMsTUFBTSxLQUFLLGVBQWVnSCxHQUFNdEgsQ0FBTTtBQUNyRCxRQUFJTSxFQUFPO0FBQ1AsYUFBT0EsRUFBTztBQUNsQixVQUFNQSxFQUFPO0FBQUEsRUFDakI7QUFBQSxFQUNBLE1BQU0sZUFBZWdILEdBQU10SCxHQUFRO0FBQy9CLFVBQU15RSxJQUFNO0FBQUEsTUFDUixRQUFRO0FBQUEsUUFDSixRQUFRLENBQUE7QUFBQSxRQUNSLG9CQUFvQnpFLEtBQUEsZ0JBQUFBLEVBQVE7QUFBQSxRQUM1QixPQUFPO0FBQUEsTUFDdkI7QUFBQSxNQUNZLE9BQU1BLEtBQUEsZ0JBQUFBLEVBQVEsU0FBUSxDQUFBO0FBQUEsTUFDdEIsZ0JBQWdCLEtBQUssS0FBSztBQUFBLE1BQzFCLFFBQVE7QUFBQSxNQUNSLE1BQUFzSDtBQUFBLE1BQ0EsWUFBWUQsR0FBY0MsQ0FBSTtBQUFBLElBQzFDLEdBQ2N3RCxJQUFtQixLQUFLLE9BQU8sRUFBRSxNQUFBeEQsR0FBTSxNQUFNN0MsRUFBSSxNQUFNLFFBQVFBLEdBQUssR0FDcEVuRSxJQUFTLE9BQU82SixHQUFRVyxDQUFnQixJQUFJQSxJQUFtQixRQUFRLFFBQVFBLENBQWdCO0FBQ3JHLFdBQU9SLEdBQWE3RixHQUFLbkUsQ0FBTTtBQUFBLEVBQ25DO0FBQUEsRUFDQSxPQUFPeUssR0FBT3hDLEdBQVM7QUFDbkIsVUFBTXlDLElBQXFCLENBQUNqSixNQUNwQixPQUFPd0csS0FBWSxZQUFZLE9BQU9BLElBQVksTUFDM0MsRUFBRSxTQUFBQSxFQUFPLElBRVgsT0FBT0EsS0FBWSxhQUNqQkEsRUFBUXhHLENBQUcsSUFHWHdHO0FBR2YsV0FBTyxLQUFLLFlBQVksQ0FBQ3hHLEdBQUswQyxNQUFRO0FBQ2xDLFlBQU1uRSxJQUFTeUssRUFBTWhKLENBQUcsR0FDbEJrSixJQUFXLE1BQU14RyxFQUFJLFNBQVM7QUFBQSxRQUNoQyxNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLEdBQUd5RCxFQUFtQmpKLENBQUc7QUFBQSxNQUN6QyxDQUFhO0FBQ0QsYUFBSSxPQUFPLFVBQVksT0FBZXpCLGFBQWtCLFVBQzdDQSxFQUFPLEtBQUssQ0FBQ2dILE1BQ1hBLElBS00sTUFKUDJELEVBQVEsR0FDRCxHQUtkLElBRUEzSyxJQUtNLE1BSlAySyxFQUFRLEdBQ0Q7QUFBQSxJQUtmLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFDQSxXQUFXRixHQUFPRyxHQUFnQjtBQUM5QixXQUFPLEtBQUssWUFBWSxDQUFDbkosR0FBSzBDLE1BQ3JCc0csRUFBTWhKLENBQUcsSUFLSCxNQUpQMEMsRUFBSSxTQUFTLE9BQU95RyxLQUFtQixhQUFhQSxFQUFlbkosR0FBSzBDLENBQUcsSUFBSXlHLENBQWMsR0FDdEYsR0FLZDtBQUFBLEVBQ0w7QUFBQSxFQUNBLFlBQVlDLEdBQVk7QUFDcEIsV0FBTyxJQUFJQyxHQUFXO0FBQUEsTUFDbEIsUUFBUTtBQUFBLE1BQ1IsVUFBVUMsRUFBc0I7QUFBQSxNQUNoQyxRQUFRLEVBQUUsTUFBTSxjQUFjLFlBQUFGLEVBQVU7QUFBQSxJQUNwRCxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsWUFBWUEsR0FBWTtBQUNwQixXQUFPLEtBQUssWUFBWUEsQ0FBVTtBQUFBLEVBQ3RDO0FBQUEsRUFDQSxZQUFZaEwsR0FBSztBQUViLFNBQUssTUFBTSxLQUFLLGdCQUNoQixLQUFLLE9BQU9BLEdBQ1osS0FBSyxRQUFRLEtBQUssTUFBTSxLQUFLLElBQUksR0FDakMsS0FBSyxZQUFZLEtBQUssVUFBVSxLQUFLLElBQUksR0FDekMsS0FBSyxhQUFhLEtBQUssV0FBVyxLQUFLLElBQUksR0FDM0MsS0FBSyxpQkFBaUIsS0FBSyxlQUFlLEtBQUssSUFBSSxHQUNuRCxLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxHQUM3QixLQUFLLFNBQVMsS0FBSyxPQUFPLEtBQUssSUFBSSxHQUNuQyxLQUFLLGFBQWEsS0FBSyxXQUFXLEtBQUssSUFBSSxHQUMzQyxLQUFLLGNBQWMsS0FBSyxZQUFZLEtBQUssSUFBSSxHQUM3QyxLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSSxHQUNyQyxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxHQUNqQyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSSxHQUNyQyxLQUFLLEtBQUssS0FBSyxHQUFHLEtBQUssSUFBSSxHQUMzQixLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxHQUM3QixLQUFLLFlBQVksS0FBSyxVQUFVLEtBQUssSUFBSSxHQUN6QyxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxHQUNqQyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSSxHQUNyQyxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxHQUNqQyxLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLE9BQU8sS0FBSyxLQUFLLEtBQUssSUFBSSxHQUMvQixLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLGFBQWEsS0FBSyxXQUFXLEtBQUssSUFBSSxHQUMzQyxLQUFLLGFBQWEsS0FBSyxXQUFXLEtBQUssSUFBSSxHQUMzQyxLQUFLLFdBQVcsSUFBSTtBQUFBLE1BQ2hCLFNBQVM7QUFBQSxNQUNULFFBQVE7QUFBQSxNQUNSLFVBQVUsQ0FBQ21ILE1BQVMsS0FBSyxXQUFXLEVBQUVBLENBQUk7QUFBQSxJQUN0RDtBQUFBLEVBQ0k7QUFBQSxFQUNBLFdBQVc7QUFDUCxXQUFPZ0UsR0FBWSxPQUFPLE1BQU0sS0FBSyxJQUFJO0FBQUEsRUFDN0M7QUFBQSxFQUNBLFdBQVc7QUFDUCxXQUFPQyxHQUFZLE9BQU8sTUFBTSxLQUFLLElBQUk7QUFBQSxFQUM3QztBQUFBLEVBQ0EsVUFBVTtBQUNOLFdBQU8sS0FBSyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ25DO0FBQUEsRUFDQSxRQUFRO0FBQ0osV0FBT0MsR0FBUyxPQUFPLElBQUk7QUFBQSxFQUMvQjtBQUFBLEVBQ0EsVUFBVTtBQUNOLFdBQU9DLEdBQVcsT0FBTyxNQUFNLEtBQUssSUFBSTtBQUFBLEVBQzVDO0FBQUEsRUFDQSxHQUFHL0csR0FBUTtBQUNQLFdBQU9nSCxHQUFTLE9BQU8sQ0FBQyxNQUFNaEgsQ0FBTSxHQUFHLEtBQUssSUFBSTtBQUFBLEVBQ3BEO0FBQUEsRUFDQSxJQUFJaUgsR0FBVTtBQUNWLFdBQU9DLEdBQWdCLE9BQU8sTUFBTUQsR0FBVSxLQUFLLElBQUk7QUFBQSxFQUMzRDtBQUFBLEVBQ0EsVUFBVUUsR0FBVztBQUNqQixXQUFPLElBQUlULEdBQVc7QUFBQSxNQUNsQixHQUFHYixFQUFvQixLQUFLLElBQUk7QUFBQSxNQUNoQyxRQUFRO0FBQUEsTUFDUixVQUFVYyxFQUFzQjtBQUFBLE1BQ2hDLFFBQVEsRUFBRSxNQUFNLGFBQWEsV0FBQVEsRUFBUztBQUFBLElBQ2xELENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxRQUFRMUwsR0FBSztBQUNULFVBQU0yTCxJQUFtQixPQUFPM0wsS0FBUSxhQUFhQSxJQUFNLE1BQU1BO0FBQ2pFLFdBQU8sSUFBSTRMLEdBQVc7QUFBQSxNQUNsQixHQUFHeEIsRUFBb0IsS0FBSyxJQUFJO0FBQUEsTUFDaEMsV0FBVztBQUFBLE1BQ1gsY0FBY3VCO0FBQUEsTUFDZCxVQUFVVCxFQUFzQjtBQUFBLElBQzVDLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxRQUFRO0FBQ0osV0FBTyxJQUFJVyxHQUFXO0FBQUEsTUFDbEIsVUFBVVgsRUFBc0I7QUFBQSxNQUNoQyxNQUFNO0FBQUEsTUFDTixHQUFHZCxFQUFvQixLQUFLLElBQUk7QUFBQSxJQUM1QyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsTUFBTXBLLEdBQUs7QUFDUCxVQUFNOEwsSUFBaUIsT0FBTzlMLEtBQVEsYUFBYUEsSUFBTSxNQUFNQTtBQUMvRCxXQUFPLElBQUkrTCxHQUFTO0FBQUEsTUFDaEIsR0FBRzNCLEVBQW9CLEtBQUssSUFBSTtBQUFBLE1BQ2hDLFdBQVc7QUFBQSxNQUNYLFlBQVkwQjtBQUFBLE1BQ1osVUFBVVosRUFBc0I7QUFBQSxJQUM1QyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsU0FBU1gsR0FBYTtBQUNsQixVQUFNeUIsSUFBTyxLQUFLO0FBQ2xCLFdBQU8sSUFBSUEsRUFBSztBQUFBLE1BQ1osR0FBRyxLQUFLO0FBQUEsTUFDUixhQUFBekI7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxLQUFLMEIsR0FBUTtBQUNULFdBQU9DLEdBQVksT0FBTyxNQUFNRCxDQUFNO0FBQUEsRUFDMUM7QUFBQSxFQUNBLFdBQVc7QUFDUCxXQUFPRSxHQUFZLE9BQU8sSUFBSTtBQUFBLEVBQ2xDO0FBQUEsRUFDQSxhQUFhO0FBQ1QsV0FBTyxLQUFLLFVBQVUsTUFBUyxFQUFFO0FBQUEsRUFDckM7QUFBQSxFQUNBLGFBQWE7QUFDVCxXQUFPLEtBQUssVUFBVSxJQUFJLEVBQUU7QUFBQSxFQUNoQztBQUNKO0FBQ0EsTUFBTUMsS0FBWSxrQkFDWkMsS0FBYSxlQUNiQyxLQUFZLDZCQUdaQyxLQUFZLDBGQUNaQyxLQUFjLHFCQUNkQyxLQUFXLG9EQUNYQyxLQUFnQiw0U0FhaEJDLEtBQWEsc0ZBSWJDLEtBQWM7QUFDcEIsSUFBSUM7QUFFSixNQUFNQyxLQUFZLHVIQUNaQyxLQUFnQiw0SUFHaEJDLEtBQVkseXBCQUNaQyxLQUFnQiwyckJBRWhCQyxLQUFjLG9FQUVkQyxLQUFpQiwwRUFNakJDLEtBQWtCLHFNQUNsQkMsS0FBWSxJQUFJLE9BQU8sSUFBSUQsRUFBZSxHQUFHO0FBQ25ELFNBQVNFLEdBQWdCQyxHQUFNO0FBQzNCLE1BQUlDLElBQXFCO0FBQ3pCLEVBQUlELEVBQUssWUFDTEMsSUFBcUIsR0FBR0EsQ0FBa0IsVUFBVUQsRUFBSyxTQUFTLE1BRTdEQSxFQUFLLGFBQWEsU0FDdkJDLElBQXFCLEdBQUdBLENBQWtCO0FBRTlDLFFBQU1DLElBQW9CRixFQUFLLFlBQVksTUFBTTtBQUNqRCxTQUFPLDhCQUE4QkMsQ0FBa0IsSUFBSUMsQ0FBaUI7QUFDaEY7QUFDQSxTQUFTQyxHQUFVSCxHQUFNO0FBQ3JCLFNBQU8sSUFBSSxPQUFPLElBQUlELEdBQWdCQyxDQUFJLENBQUMsR0FBRztBQUNsRDtBQUVPLFNBQVNJLEdBQWNKLEdBQU07QUFDaEMsTUFBSXhNLElBQVEsR0FBR3FNLEVBQWUsSUFBSUUsR0FBZ0JDLENBQUksQ0FBQztBQUN2RCxRQUFNSyxJQUFPLENBQUE7QUFDYixTQUFBQSxFQUFLLEtBQUtMLEVBQUssUUFBUSxPQUFPLEdBQUcsR0FDN0JBLEVBQUssVUFDTEssRUFBSyxLQUFLLHNCQUFzQixHQUNwQzdNLElBQVEsR0FBR0EsQ0FBSyxJQUFJNk0sRUFBSyxLQUFLLEdBQUcsQ0FBQyxLQUMzQixJQUFJLE9BQU8sSUFBSTdNLENBQUssR0FBRztBQUNsQztBQUNBLFNBQVM4TSxHQUFVQyxHQUFJQyxHQUFTO0FBSTVCLFNBSEssSUFBQUEsTUFBWSxRQUFRLENBQUNBLE1BQVlqQixHQUFVLEtBQUtnQixDQUFFLE1BR2xEQyxNQUFZLFFBQVEsQ0FBQ0EsTUFBWWYsR0FBVSxLQUFLYyxDQUFFO0FBSTNEO0FBQ0EsU0FBU0UsR0FBV0MsR0FBS0MsR0FBSztBQUMxQixNQUFJLENBQUN6QixHQUFTLEtBQUt3QixDQUFHO0FBQ2xCLFdBQU87QUFDWCxNQUFJO0FBQ0EsVUFBTSxDQUFDRSxDQUFNLElBQUlGLEVBQUksTUFBTSxHQUFHO0FBQzlCLFFBQUksQ0FBQ0U7QUFDRCxhQUFPO0FBRVgsVUFBTUMsSUFBU0QsRUFDVixRQUFRLE1BQU0sR0FBRyxFQUNqQixRQUFRLE1BQU0sR0FBRyxFQUNqQixPQUFPQSxFQUFPLFVBQVcsSUFBS0EsRUFBTyxTQUFTLEtBQU0sR0FBSSxHQUFHLEdBQzFERSxJQUFVLEtBQUssTUFBTSxLQUFLRCxDQUFNLENBQUM7QUFPdkMsV0FOSSxTQUFPQyxLQUFZLFlBQVlBLE1BQVksUUFFM0MsU0FBU0EsTUFBV0EsS0FBQSxnQkFBQUEsRUFBUyxTQUFRLFNBRXJDLENBQUNBLEVBQVEsT0FFVEgsS0FBT0csRUFBUSxRQUFRSDtBQUFBLEVBRy9CLFFBQ007QUFDRixXQUFPO0FBQUEsRUFDWDtBQUNKO0FBQ0EsU0FBU0ksR0FBWVIsR0FBSUMsR0FBUztBQUk5QixTQUhLLElBQUFBLE1BQVksUUFBUSxDQUFDQSxNQUFZaEIsR0FBYyxLQUFLZSxDQUFFLE1BR3REQyxNQUFZLFFBQVEsQ0FBQ0EsTUFBWWQsR0FBYyxLQUFLYSxDQUFFO0FBSS9EO0FBQ08sTUFBTVMsV0FBa0I5RCxFQUFRO0FBQUEsRUFDbkMsT0FBT3pHLEdBQU87QUFLVixRQUpJLEtBQUssS0FBSyxXQUNWQSxFQUFNLE9BQU8sT0FBT0EsRUFBTSxJQUFJLElBRWYsS0FBSyxTQUFTQSxDQUFLLE1BQ25CaUQsRUFBYyxRQUFRO0FBQ3JDLFlBQU0zQyxJQUFNLEtBQUssZ0JBQWdCTixDQUFLO0FBQ3RDLGFBQUFnRixFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVM0MsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTWdGO0FBQUEsSUFDWDtBQUNBLFVBQU1ILElBQVMsSUFBSUQsR0FBVztBQUM5QixRQUFJNUU7QUFDSixlQUFXc0csS0FBUyxLQUFLLEtBQUs7QUFDMUIsVUFBSUEsRUFBTSxTQUFTO0FBQ2YsUUFBSTVHLEVBQU0sS0FBSyxTQUFTNEcsRUFBTSxVQUMxQnRHLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsVUFDZixNQUFNO0FBQUEsVUFDTixXQUFXO0FBQUEsVUFDWCxPQUFPO0FBQUEsVUFDUCxTQUFTQSxFQUFNO0FBQUEsUUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSztBQUFBLGVBR1h5QixFQUFNLFNBQVM7QUFDcEIsUUFBSTVHLEVBQU0sS0FBSyxTQUFTNEcsRUFBTSxVQUMxQnRHLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsVUFDZixNQUFNO0FBQUEsVUFDTixXQUFXO0FBQUEsVUFDWCxPQUFPO0FBQUEsVUFDUCxTQUFTQSxFQUFNO0FBQUEsUUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSztBQUFBLGVBR1h5QixFQUFNLFNBQVMsVUFBVTtBQUM5QixjQUFNNEQsSUFBU3hLLEVBQU0sS0FBSyxTQUFTNEcsRUFBTSxPQUNuQzZELElBQVd6SyxFQUFNLEtBQUssU0FBUzRHLEVBQU07QUFDM0MsU0FBSTRELEtBQVVDLE9BQ1ZuSyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ2pDa0ssSUFDQXhGLEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsU0FBU3dELEVBQU07QUFBQSxVQUNmLE1BQU07QUFBQSxVQUNOLFdBQVc7QUFBQSxVQUNYLE9BQU87QUFBQSxVQUNQLFNBQVNBLEVBQU07QUFBQSxRQUMzQyxDQUF5QixJQUVJNkQsS0FDTHpGLEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsU0FBU3dELEVBQU07QUFBQSxVQUNmLE1BQU07QUFBQSxVQUNOLFdBQVc7QUFBQSxVQUNYLE9BQU87QUFBQSxVQUNQLFNBQVNBLEVBQU07QUFBQSxRQUMzQyxDQUF5QixHQUVMekIsRUFBTyxNQUFLO0FBQUEsTUFFcEIsV0FDU3lCLEVBQU0sU0FBUztBQUNwQixRQUFLK0IsR0FBVyxLQUFLM0ksRUFBTSxJQUFJLE1BQzNCTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTThDLEVBQWE7QUFBQSxVQUNuQixTQUFTd0QsRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUs7QUFBQSxlQUdYeUIsRUFBTSxTQUFTO0FBQ3BCLFFBQUtpQyxPQUNEQSxLQUFhLElBQUksT0FBT0QsSUFBYSxHQUFHLElBRXZDQyxHQUFXLEtBQUs3SSxFQUFNLElBQUksTUFDM0JNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixZQUFZO0FBQUEsVUFDWixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsUUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSztBQUFBLGVBR1h5QixFQUFNLFNBQVM7QUFDcEIsUUFBSzJCLEdBQVUsS0FBS3ZJLEVBQU0sSUFBSSxNQUMxQk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLFlBQVk7QUFBQSxVQUNaLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsU0FBU3dELEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLO0FBQUEsZUFHWHlCLEVBQU0sU0FBUztBQUNwQixRQUFLNEIsR0FBWSxLQUFLeEksRUFBTSxJQUFJLE1BQzVCTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTThDLEVBQWE7QUFBQSxVQUNuQixTQUFTd0QsRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUs7QUFBQSxlQUdYeUIsRUFBTSxTQUFTO0FBQ3BCLFFBQUt3QixHQUFVLEtBQUtwSSxFQUFNLElBQUksTUFDMUJNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixZQUFZO0FBQUEsVUFDWixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsUUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSztBQUFBLGVBR1h5QixFQUFNLFNBQVM7QUFDcEIsUUFBS3lCLEdBQVcsS0FBS3JJLEVBQU0sSUFBSSxNQUMzQk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLFlBQVk7QUFBQSxVQUNaLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsU0FBU3dELEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLO0FBQUEsZUFHWHlCLEVBQU0sU0FBUztBQUNwQixRQUFLMEIsR0FBVSxLQUFLdEksRUFBTSxJQUFJLE1BQzFCTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTThDLEVBQWE7QUFBQSxVQUNuQixTQUFTd0QsRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUs7QUFBQSxlQUdYeUIsRUFBTSxTQUFTO0FBQ3BCLFlBQUk7QUFDQSxjQUFJLElBQUk1RyxFQUFNLElBQUk7QUFBQSxRQUN0QixRQUNNO0FBQ0YsVUFBQU0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFlBQ25CLFlBQVk7QUFBQSxZQUNaLE1BQU04QyxFQUFhO0FBQUEsWUFDbkIsU0FBU3dELEVBQU07QUFBQSxVQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLO0FBQUEsUUFDaEI7QUFBQSxVQUVDLENBQUl5QixFQUFNLFNBQVMsV0FDcEJBLEVBQU0sTUFBTSxZQUFZLEdBQ0xBLEVBQU0sTUFBTSxLQUFLNUcsRUFBTSxJQUFJLE1BRTFDTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osTUFBTThDLEVBQWE7QUFBQSxRQUNuQixTQUFTd0QsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssTUFHWHlCLEVBQU0sU0FBUyxTQUNwQjVHLEVBQU0sT0FBT0EsRUFBTSxLQUFLLEtBQUksSUFFdkI0RyxFQUFNLFNBQVMsYUFDZjVHLEVBQU0sS0FBSyxTQUFTNEcsRUFBTSxPQUFPQSxFQUFNLFFBQVEsTUFDaER0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixZQUFZLEVBQUUsVUFBVXdELEVBQU0sT0FBTyxVQUFVQSxFQUFNLFNBQVE7QUFBQSxRQUM3RCxTQUFTQSxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLGdCQUNwQjVHLEVBQU0sT0FBT0EsRUFBTSxLQUFLLFlBQVcsSUFFOUI0RyxFQUFNLFNBQVMsZ0JBQ3BCNUcsRUFBTSxPQUFPQSxFQUFNLEtBQUssWUFBVyxJQUU5QjRHLEVBQU0sU0FBUyxlQUNmNUcsRUFBTSxLQUFLLFdBQVc0RyxFQUFNLEtBQUssTUFDbEN0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixZQUFZLEVBQUUsWUFBWXdELEVBQU0sTUFBSztBQUFBLFFBQ3JDLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsYUFDZjVHLEVBQU0sS0FBSyxTQUFTNEcsRUFBTSxLQUFLLE1BQ2hDdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsWUFBWSxFQUFFLFVBQVV3RCxFQUFNLE1BQUs7QUFBQSxRQUNuQyxTQUFTQSxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLGFBQ04rQyxHQUFjL0MsQ0FBSyxFQUN0QixLQUFLNUcsRUFBTSxJQUFJLE1BQ3RCTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixTQUFTd0QsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxTQUNOeUMsR0FDSCxLQUFLckosRUFBTSxJQUFJLE1BQ3RCTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixTQUFTd0QsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxTQUNOOEMsR0FBVTlDLENBQUssRUFDbEIsS0FBSzVHLEVBQU0sSUFBSSxNQUN0Qk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsYUFDZjhCLEdBQWMsS0FBSzFJLEVBQU0sSUFBSSxNQUM5Qk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsT0FDZmlELEdBQVU3SixFQUFNLE1BQU00RyxFQUFNLE9BQU8sTUFDcEN0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osTUFBTThDLEVBQWE7QUFBQSxRQUNuQixTQUFTd0QsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxRQUNmb0QsR0FBV2hLLEVBQU0sTUFBTTRHLEVBQU0sR0FBRyxNQUNqQ3RHLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLFNBQ2YwRCxHQUFZdEssRUFBTSxNQUFNNEcsRUFBTSxPQUFPLE1BQ3RDdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsV0FDZnNDLEdBQVksS0FBS2xKLEVBQU0sSUFBSSxNQUM1Qk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsY0FDZnVDLEdBQWUsS0FBS25KLEVBQU0sSUFBSSxNQUMvQk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBSWhCckQsRUFBSyxZQUFZOEUsQ0FBSztBQUc5QixXQUFPLEVBQUUsUUFBUXpCLEVBQU8sT0FBTyxPQUFPbkYsRUFBTSxLQUFJO0FBQUEsRUFDcEQ7QUFBQSxFQUNBLE9BQU9qRCxHQUFPMk4sR0FBWXRHLEdBQVM7QUFDL0IsV0FBTyxLQUFLLFdBQVcsQ0FBQ2pCLE1BQVNwRyxFQUFNLEtBQUtvRyxDQUFJLEdBQUc7QUFBQSxNQUMvQyxZQUFBdUg7QUFBQSxNQUNBLE1BQU10SCxFQUFhO0FBQUEsTUFDbkIsR0FBRzZDLEVBQVUsU0FBUzdCLENBQU87QUFBQSxJQUN6QyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsVUFBVXdDLEdBQU87QUFDYixXQUFPLElBQUkyRCxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixRQUFRLENBQUMsR0FBRyxLQUFLLEtBQUssUUFBUTNELENBQUs7QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsTUFBTXhDLEdBQVM7QUFDWCxXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sU0FBUyxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDM0U7QUFBQSxFQUNBLElBQUlBLEdBQVM7QUFDVCxXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sT0FBTyxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDekU7QUFBQSxFQUNBLE1BQU1BLEdBQVM7QUFDWCxXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sU0FBUyxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDM0U7QUFBQSxFQUNBLEtBQUtBLEdBQVM7QUFDVixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sUUFBUSxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDMUU7QUFBQSxFQUNBLE9BQU9BLEdBQVM7QUFDWixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sVUFBVSxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDNUU7QUFBQSxFQUNBLEtBQUtBLEdBQVM7QUFDVixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sUUFBUSxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDMUU7QUFBQSxFQUNBLE1BQU1BLEdBQVM7QUFDWCxXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sU0FBUyxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDM0U7QUFBQSxFQUNBLEtBQUtBLEdBQVM7QUFDVixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sUUFBUSxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDMUU7QUFBQSxFQUNBLE9BQU9BLEdBQVM7QUFDWixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sVUFBVSxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxHQUFHO0FBQUEsRUFDNUU7QUFBQSxFQUNBLFVBQVVBLEdBQVM7QUFFZixXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLEdBQUc2QixFQUFV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LEVBQUssTUFBTUEsQ0FBSTtBQUFBLEVBRzNDO0FBQ0EsUUFBTStELElBQU8sTUFBTSxLQUFLZ29DLEVBQVksT0FBTSxDQUFFLEdBQ3RDQyxJQUFPejhCLEVBQUEsTUFBSzY1QjtBQUlsQixHQUhnQjRDLEVBQUssV0FBV2pvQyxFQUFLLFVBQ2pDLEtBQUssVUFBVWlvQyxFQUFLLElBQUksQ0FBQy8rQixNQUFNQSxFQUFFLElBQUksRUFBRSxNQUFNLE1BQ3pDLEtBQUssVUFBVWxKLEVBQUssSUFBSSxDQUFDa0osTUFBTUEsRUFBRSxJQUFJLEVBQUUsTUFBTSxPQUVqRDRMLEVBQUEsTUFBS3V3QixJQUFxQnJsQyxJQUMxQixLQUFLLEtBQUsscUJBQXFCd0wsRUFBQSxNQUFLNjVCLEdBQWtCO0FBRTlEO0FBN2hCRyxJQUFNNkMsS0FBTjFEO0FDeENBLE1BQU0yRCxXQUEwQnpGLEdBQXdCO0FBQUEsRUFDM0QsWUFBWTk5QyxJQUFVLElBQUk7QUFDdEIsVUFBTUEsQ0FBTztBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWNBLGFBQWEsbUJBQW1CeWpCLEdBQU96akIsSUFBVSxDQUFBLEdBQUk0Z0QsSUFBWSxDQUFBLEdBQUk7QUFDakUsVUFBTXBDLElBQWdCLE1BQU04RSxHQUFnQiw0QkFBNEI3L0IsR0FBT3pqQixHQUFTNGdELENBQVM7QUFFakcsV0FEa0IsSUFBSTJDLEdBQWlCLEVBQ3RCLG9CQUFvQi9FLENBQWE7QUFBQSxFQUN0RDtBQUFBLEVBQ0EsVUFBVWdGLEdBQVFuakQsSUFBVyxJQUFJO0FBRzdCLFVBQU0sSUFBSSxNQUFNLDZGQUE2RjtBQUFBLEVBQ2pIO0FBQUEsRUFDQSxNQUFNLFFBQVFMLEdBQVM7QUFDbkIsUUFBSSxDQUFDQSxFQUFRO0FBQ1QsWUFBTSxJQUFJMlosR0FBVSw2REFBNkQ7QUFFckYsVUFBTSxNQUFNLFFBQVEzWixDQUFPO0FBQUEsRUFDL0I7QUFDSjtBQ2hDWSxNQUFDeWpELEtBQVE7QUFBQSxFQUNqQixxQkFBcUJDO0FBQUFBLEVBQ3JCLHFCQUFxQkM7QUFBQUEsRUFDckIsbUNBQW1DQztBQUN2QzsiLCJ4X2dvb2dsZV9pZ25vcmVMaXN0IjpbMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLDU3LDU4LDU5XX0=
