var mo = Object.defineProperty;
var Zs = (n) => {
  throw TypeError(n);
};
var go = (n, e, t) => e in n ? mo(n, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : n[e] = t;
var S = (n, e, t) => go(n, typeof e != "symbol" ? e + "" : e, t), Er = (n, e, t) => e.has(n) || Zs("Cannot " + t);
var u = (n, e, t) => (Er(n, e, "read from private field"), t ? t.call(n) : e.get(n)), R = (n, e, t) => e.has(n) ? Zs("Cannot add the same private member more than once") : e instanceof WeakSet ? e.add(n) : e.set(n, t), k = (n, e, t, r) => (Er(n, e, "write to private field"), r ? r.call(n, t) : e.set(n, t), t), L = (n, e, t) => (Er(n, e, "access private method"), t);
const qr = {
  version: "0.3.4"
};
async function gs(n) {
  try {
    return [null, await n()];
  } catch (e) {
    return [e, null];
  }
}
function yo(n) {
  const e = Object.values(n).filter((r) => typeof r == "number");
  return Object.entries(n).filter(([r, s]) => e.indexOf(+r) === -1).map(([r, s]) => s);
}
class Ga {
  constructor() {
    this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map();
  }
  add(e, ...t) {
    const r = t[0];
    if (this._map.set(e, r), r && typeof r == "object" && "id" in r) {
      if (this._idmap.has(r.id))
        throw new Error(`ID ${r.id} already exists in the registry`);
      this._idmap.set(r.id, e);
    }
    return this;
  }
  clear() {
    return this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map(), this;
  }
  remove(e) {
    const t = this._map.get(e);
    return t && typeof t == "object" && "id" in t && this._idmap.delete(t.id), this._map.delete(e), this;
  }
  get(e) {
    const t = e._zod.parent;
    if (t) {
      const r = { ...this.get(t) ?? {} };
      return delete r.id, { ...r, ...this._map.get(e) };
    }
    return this._map.get(e);
  }
  has(e) {
    return this._map.has(e);
  }
}
function _o() {
  return new Ga();
}
const vo = /* @__PURE__ */ _o();
class qs {
  constructor(e) {
    this.counter = 0, this.metadataRegistry = (e == null ? void 0 : e.metadata) ?? vo, this.target = (e == null ? void 0 : e.target) ?? "draft-2020-12", this.unrepresentable = (e == null ? void 0 : e.unrepresentable) ?? "throw", this.override = (e == null ? void 0 : e.override) ?? (() => {
    }), this.io = (e == null ? void 0 : e.io) ?? "output", this.seen = /* @__PURE__ */ new Map();
  }
  process(e, t = { path: [], schemaPath: [] }) {
    var d, h, y;
    var r;
    const s = e._zod.def, a = {
      guid: "uuid",
      url: "uri",
      datetime: "date-time",
      json_string: "json-string",
      regex: ""
      // do not set
    }, i = this.seen.get(e);
    if (i)
      return i.count++, t.schemaPath.includes(e) && (i.cycle = t.path), i.schema;
    const o = { schema: {}, count: 1, cycle: void 0, path: t.path };
    this.seen.set(e, o);
    const c = (h = (d = e._zod).toJSONSchema) == null ? void 0 : h.call(d);
    if (c)
      o.schema = c;
    else {
      const v = {
        ...t,
        schemaPath: [...t.schemaPath, e],
        path: t.path
      }, x = e._zod.parent;
      if (x)
        o.ref = x, this.process(x, v), this.seen.get(x).isParent = !0;
      else {
        const g = o.schema;
        switch (s.type) {
          case "string": {
            const m = g;
            m.type = "string";
            const { minimum: b, maximum: _, format: D, patterns: T, contentEncoding: A } = e._zod.bag;
            if (typeof b == "number" && (m.minLength = b), typeof _ == "number" && (m.maxLength = _), D && (m.format = a[D] ?? D, m.format === "" && delete m.format), A && (m.contentEncoding = A), T && T.size > 0) {
              const N = [...T];
              N.length === 1 ? m.pattern = N[0].source : N.length > 1 && (o.schema.allOf = [
                ...N.map((G) => ({
                  ...this.target === "draft-7" ? { type: "string" } : {},
                  pattern: G.source
                }))
              ]);
            }
            break;
          }
          case "number": {
            const m = g, { minimum: b, maximum: _, format: D, multipleOf: T, exclusiveMaximum: A, exclusiveMinimum: N } = e._zod.bag;
            typeof D == "string" && D.includes("int") ? m.type = "integer" : m.type = "number", typeof N == "number" && (m.exclusiveMinimum = N), typeof b == "number" && (m.minimum = b, typeof N == "number" && (N >= b ? delete m.minimum : delete m.exclusiveMinimum)), typeof A == "number" && (m.exclusiveMaximum = A), typeof _ == "number" && (m.maximum = _, typeof A == "number" && (A <= _ ? delete m.maximum : delete m.exclusiveMaximum)), typeof T == "number" && (m.multipleOf = T);
            break;
          }
          case "boolean": {
            const m = g;
            m.type = "boolean";
            break;
          }
          case "bigint": {
            if (this.unrepresentable === "throw")
              throw new Error("BigInt cannot be represented in JSON Schema");
            break;
          }
          case "symbol": {
            if (this.unrepresentable === "throw")
              throw new Error("Symbols cannot be represented in JSON Schema");
            break;
          }
          case "null": {
            g.type = "null";
            break;
          }
          case "any":
            break;
          case "unknown":
            break;
          case "undefined": {
            if (this.unrepresentable === "throw")
              throw new Error("Undefined cannot be represented in JSON Schema");
            break;
          }
          case "void": {
            if (this.unrepresentable === "throw")
              throw new Error("Void cannot be represented in JSON Schema");
            break;
          }
          case "never": {
            g.not = {};
            break;
          }
          case "date": {
            if (this.unrepresentable === "throw")
              throw new Error("Date cannot be represented in JSON Schema");
            break;
          }
          case "array": {
            const m = g, { minimum: b, maximum: _ } = e._zod.bag;
            typeof b == "number" && (m.minItems = b), typeof _ == "number" && (m.maxItems = _), m.type = "array", m.items = this.process(s.element, { ...v, path: [...v.path, "items"] });
            break;
          }
          case "object": {
            const m = g;
            m.type = "object", m.properties = {};
            const b = s.shape;
            for (const T in b)
              m.properties[T] = this.process(b[T], {
                ...v,
                path: [...v.path, "properties", T]
              });
            const _ = new Set(Object.keys(b)), D = new Set([..._].filter((T) => {
              const A = s.shape[T]._zod;
              return this.io === "input" ? A.optin === void 0 : A.optout === void 0;
            }));
            D.size > 0 && (m.required = Array.from(D)), ((y = s.catchall) == null ? void 0 : y._zod.def.type) === "never" ? m.additionalProperties = !1 : s.catchall ? s.catchall && (m.additionalProperties = this.process(s.catchall, {
              ...v,
              path: [...v.path, "additionalProperties"]
            })) : this.io === "output" && (m.additionalProperties = !1);
            break;
          }
          case "union": {
            const m = g;
            m.anyOf = s.options.map((b, _) => this.process(b, {
              ...v,
              path: [...v.path, "anyOf", _]
            }));
            break;
          }
          case "intersection": {
            const m = g, b = this.process(s.left, {
              ...v,
              path: [...v.path, "allOf", 0]
            }), _ = this.process(s.right, {
              ...v,
              path: [...v.path, "allOf", 1]
            }), D = (A) => "allOf" in A && Object.keys(A).length === 1, T = [
              ...D(b) ? b.allOf : [b],
              ...D(_) ? _.allOf : [_]
            ];
            m.allOf = T;
            break;
          }
          case "tuple": {
            const m = g;
            m.type = "array";
            const b = s.items.map((T, A) => this.process(T, { ...v, path: [...v.path, "prefixItems", A] }));
            if (this.target === "draft-2020-12" ? m.prefixItems = b : m.items = b, s.rest) {
              const T = this.process(s.rest, {
                ...v,
                path: [...v.path, "items"]
              });
              this.target === "draft-2020-12" ? m.items = T : m.additionalItems = T;
            }
            s.rest && (m.items = this.process(s.rest, {
              ...v,
              path: [...v.path, "items"]
            }));
            const { minimum: _, maximum: D } = e._zod.bag;
            typeof _ == "number" && (m.minItems = _), typeof D == "number" && (m.maxItems = D);
            break;
          }
          case "record": {
            const m = g;
            m.type = "object", m.propertyNames = this.process(s.keyType, { ...v, path: [...v.path, "propertyNames"] }), m.additionalProperties = this.process(s.valueType, {
              ...v,
              path: [...v.path, "additionalProperties"]
            });
            break;
          }
          case "map": {
            if (this.unrepresentable === "throw")
              throw new Error("Map cannot be represented in JSON Schema");
            break;
          }
          case "set": {
            if (this.unrepresentable === "throw")
              throw new Error("Set cannot be represented in JSON Schema");
            break;
          }
          case "enum": {
            const m = g, b = yo(s.entries);
            b.every((_) => typeof _ == "number") && (m.type = "number"), b.every((_) => typeof _ == "string") && (m.type = "string"), m.enum = b;
            break;
          }
          case "literal": {
            const m = g, b = [];
            for (const _ of s.values)
              if (_ === void 0) {
                if (this.unrepresentable === "throw")
                  throw new Error("Literal `undefined` cannot be represented in JSON Schema");
              } else if (typeof _ == "bigint") {
                if (this.unrepresentable === "throw")
                  throw new Error("BigInt literals cannot be represented in JSON Schema");
                b.push(Number(_));
              } else
                b.push(_);
            if (b.length !== 0) if (b.length === 1) {
              const _ = b[0];
              m.type = _ === null ? "null" : typeof _, m.const = _;
            } else
              b.every((_) => typeof _ == "number") && (m.type = "number"), b.every((_) => typeof _ == "string") && (m.type = "string"), b.every((_) => typeof _ == "boolean") && (m.type = "string"), b.every((_) => _ === null) && (m.type = "null"), m.enum = b;
            break;
          }
          case "file": {
            const m = g, b = {
              type: "string",
              format: "binary",
              contentEncoding: "binary"
            }, { minimum: _, maximum: D, mime: T } = e._zod.bag;
            _ !== void 0 && (b.minLength = _), D !== void 0 && (b.maxLength = D), T ? T.length === 1 ? (b.contentMediaType = T[0], Object.assign(m, b)) : m.anyOf = T.map((A) => ({ ...b, contentMediaType: A })) : Object.assign(m, b);
            break;
          }
          case "transform": {
            if (this.unrepresentable === "throw")
              throw new Error("Transforms cannot be represented in JSON Schema");
            break;
          }
          case "nullable": {
            const m = this.process(s.innerType, v);
            g.anyOf = [m, { type: "null" }];
            break;
          }
          case "nonoptional": {
            this.process(s.innerType, v), o.ref = s.innerType;
            break;
          }
          case "success": {
            const m = g;
            m.type = "boolean";
            break;
          }
          case "default": {
            this.process(s.innerType, v), o.ref = s.innerType, g.default = JSON.parse(JSON.stringify(s.defaultValue));
            break;
          }
          case "prefault": {
            this.process(s.innerType, v), o.ref = s.innerType, this.io === "input" && (g._prefault = JSON.parse(JSON.stringify(s.defaultValue)));
            break;
          }
          case "catch": {
            this.process(s.innerType, v), o.ref = s.innerType;
            let m;
            try {
              m = s.catchValue(void 0);
            } catch {
              throw new Error("Dynamic catch values are not supported in JSON Schema");
            }
            g.default = m;
            break;
          }
          case "nan": {
            if (this.unrepresentable === "throw")
              throw new Error("NaN cannot be represented in JSON Schema");
            break;
          }
          case "template_literal": {
            const m = g, b = e._zod.pattern;
            if (!b)
              throw new Error("Pattern not found in template literal");
            m.type = "string", m.pattern = b.source;
            break;
          }
          case "pipe": {
            const m = this.io === "input" ? s.in._zod.def.type === "transform" ? s.out : s.in : s.out;
            this.process(m, v), o.ref = m;
            break;
          }
          case "readonly": {
            this.process(s.innerType, v), o.ref = s.innerType, g.readOnly = !0;
            break;
          }
          // passthrough types
          case "promise": {
            this.process(s.innerType, v), o.ref = s.innerType;
            break;
          }
          case "optional": {
            this.process(s.innerType, v), o.ref = s.innerType;
            break;
          }
          case "lazy": {
            const m = e._zod.innerType;
            this.process(m, v), o.ref = m;
            break;
          }
          case "custom": {
            if (this.unrepresentable === "throw")
              throw new Error("Custom types cannot be represented in JSON Schema");
            break;
          }
        }
      }
    }
    const l = this.metadataRegistry.get(e);
    return l && Object.assign(o.schema, l), this.io === "input" && le(e) && (delete o.schema.examples, delete o.schema.default), this.io === "input" && o.schema._prefault && ((r = o.schema).default ?? (r.default = o.schema._prefault)), delete o.schema._prefault, this.seen.get(e).schema;
  }
  emit(e, t) {
    var f, d, h, y, v, x;
    const r = {
      cycles: (t == null ? void 0 : t.cycles) ?? "ref",
      reused: (t == null ? void 0 : t.reused) ?? "inline",
      // unrepresentable: _params?.unrepresentable ?? "throw",
      // uri: _params?.uri ?? ((id) => `${id}`),
      external: (t == null ? void 0 : t.external) ?? void 0
    }, s = this.seen.get(e);
    if (!s)
      throw new Error("Unprocessed schema. This is a bug in Zod.");
    const a = (g) => {
      var T;
      const m = this.target === "draft-2020-12" ? "$defs" : "definitions";
      if (r.external) {
        const A = (T = r.external.registry.get(g[0])) == null ? void 0 : T.id, N = r.external.uri ?? ((B) => B);
        if (A)
          return { ref: N(A) };
        const G = g[1].defId ?? g[1].schema.id ?? `schema${this.counter++}`;
        return g[1].defId = G, { defId: G, ref: `${N("__shared")}#/${m}/${G}` };
      }
      if (g[1] === s)
        return { ref: "#" };
      const _ = `#/${m}/`, D = g[1].schema.id ?? `__schema${this.counter++}`;
      return { defId: D, ref: _ + D };
    }, i = (g) => {
      if (g[1].schema.$ref)
        return;
      const m = g[1], { ref: b, defId: _ } = a(g);
      m.def = { ...m.schema }, _ && (m.defId = _);
      const D = m.schema;
      for (const T in D)
        delete D[T];
      D.$ref = b;
    };
    if (r.cycles === "throw")
      for (const g of this.seen.entries()) {
        const m = g[1];
        if (m.cycle)
          throw new Error(`Cycle detected: #/${(f = m.cycle) == null ? void 0 : f.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);
      }
    for (const g of this.seen.entries()) {
      const m = g[1];
      if (e === g[0]) {
        i(g);
        continue;
      }
      if (r.external) {
        const _ = (d = r.external.registry.get(g[0])) == null ? void 0 : d.id;
        if (e !== g[0] && _) {
          i(g);
          continue;
        }
      }
      if ((h = this.metadataRegistry.get(g[0])) == null ? void 0 : h.id) {
        i(g);
        continue;
      }
      if (m.cycle) {
        i(g);
        continue;
      }
      if (m.count > 1 && r.reused === "ref") {
        i(g);
        continue;
      }
    }
    const o = (g, m) => {
      const b = this.seen.get(g), _ = b.def ?? b.schema, D = { ..._ };
      if (b.ref === null)
        return;
      const T = b.ref;
      if (b.ref = null, T) {
        o(T, m);
        const A = this.seen.get(T).schema;
        A.$ref && m.target === "draft-7" ? (_.allOf = _.allOf ?? [], _.allOf.push(A)) : (Object.assign(_, A), Object.assign(_, D));
      }
      b.isParent || this.override({
        zodSchema: g,
        jsonSchema: _,
        path: b.path ?? []
      });
    };
    for (const g of [...this.seen.entries()].reverse())
      o(g[0], { target: this.target });
    const c = {};
    if (this.target === "draft-2020-12" ? c.$schema = "https://json-schema.org/draft/2020-12/schema" : this.target === "draft-7" ? c.$schema = "http://json-schema.org/draft-07/schema#" : console.warn(`Invalid target: ${this.target}`), (y = r.external) != null && y.uri) {
      const g = (v = r.external.registry.get(e)) == null ? void 0 : v.id;
      if (!g)
        throw new Error("Schema is missing an `id` property");
      c.$id = r.external.uri(g);
    }
    Object.assign(c, s.def);
    const l = ((x = r.external) == null ? void 0 : x.defs) ?? {};
    for (const g of this.seen.entries()) {
      const m = g[1];
      m.def && m.defId && (l[m.defId] = m.def);
    }
    r.external || Object.keys(l).length > 0 && (this.target === "draft-2020-12" ? c.$defs = l : c.definitions = l);
    try {
      return JSON.parse(JSON.stringify(c));
    } catch {
      throw new Error("Error converting schema to JSON.");
    }
  }
}
function wo(n, e) {
  if (n instanceof Ga) {
    const r = new qs(e), s = {};
    for (const o of n._idmap.entries()) {
      const [c, l] = o;
      r.process(l);
    }
    const a = {}, i = {
      registry: n,
      uri: e == null ? void 0 : e.uri,
      defs: s
    };
    for (const o of n._idmap.entries()) {
      const [c, l] = o;
      a[c] = r.emit(l, {
        ...e,
        external: i
      });
    }
    if (Object.keys(s).length > 0) {
      const o = r.target === "draft-2020-12" ? "$defs" : "definitions";
      a.__shared = {
        [o]: s
      };
    }
    return { schemas: a };
  }
  const t = new qs(e);
  return t.process(n), t.emit(n, e);
}
function le(n, e) {
  const t = e ?? { seen: /* @__PURE__ */ new Set() };
  if (t.seen.has(n))
    return !1;
  t.seen.add(n);
  const s = n._zod.def;
  switch (s.type) {
    case "string":
    case "number":
    case "bigint":
    case "boolean":
    case "date":
    case "symbol":
    case "undefined":
    case "null":
    case "any":
    case "unknown":
    case "never":
    case "void":
    case "literal":
    case "enum":
    case "nan":
    case "file":
    case "template_literal":
      return !1;
    case "array":
      return le(s.element, t);
    case "object": {
      for (const a in s.shape)
        if (le(s.shape[a], t))
          return !0;
      return !1;
    }
    case "union": {
      for (const a of s.options)
        if (le(a, t))
          return !0;
      return !1;
    }
    case "intersection":
      return le(s.left, t) || le(s.right, t);
    case "tuple": {
      for (const a of s.items)
        if (le(a, t))
          return !0;
      return !!(s.rest && le(s.rest, t));
    }
    case "record":
      return le(s.keyType, t) || le(s.valueType, t);
    case "map":
      return le(s.keyType, t) || le(s.valueType, t);
    case "set":
      return le(s.valueType, t);
    // inner types
    case "promise":
    case "optional":
    case "nonoptional":
    case "nullable":
    case "readonly":
      return le(s.innerType, t);
    case "lazy":
      return le(s.getter(), t);
    case "default":
      return le(s.innerType, t);
    case "prefault":
      return le(s.innerType, t);
    case "custom":
      return !1;
    case "transform":
      return !0;
    case "pipe":
      return le(s.in, t) || le(s.out, t);
    case "success":
      return !1;
    case "catch":
      return !1;
  }
  throw new Error(`Unknown schema type: ${s.type}`);
}
function bo(n, e) {
  const t = { ...n };
  return Object.defineProperties(t, {
    $brand: {
      value: "auto-parseable-response-format",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    }
  }), t;
}
const Io = Symbol("Let zodToJsonSchema decide on which parser to use"), Js = {
  name: void 0,
  $refStrategy: "root",
  effectStrategy: "input",
  pipeStrategy: "all",
  dateStrategy: "format:date-time",
  mapStrategy: "entries",
  nullableStrategy: "from-target",
  removeAdditionalStrategy: "passthrough",
  definitionPath: "definitions",
  target: "jsonSchema7",
  strictUnions: !1,
  errorMessages: !1,
  markdownDescription: !1,
  patternStrategy: "escape",
  applyRegexFlags: !1,
  emailStrategy: "format:email",
  base64Strategy: "contentEncoding:base64",
  nameStrategy: "ref"
}, So = (n) => typeof n == "string" ? {
  ...Js,
  basePath: ["#"],
  definitions: {},
  name: n
} : {
  ...Js,
  basePath: ["#"],
  definitions: {},
  ...n
}, Jr = (n) => "_def" in n ? n._def : n;
function xo(n) {
  if (!n)
    return !0;
  for (const e in n)
    return !1;
  return !0;
}
const To = (n) => {
  const e = So(n), t = e.name !== void 0 ? [...e.basePath, e.definitionPath, e.name] : e.basePath;
  return {
    ...e,
    currentPath: t,
    propertyPath: void 0,
    seenRefs: /* @__PURE__ */ new Set(),
    seen: new Map(Object.entries(e.definitions).map(([r, s]) => [
      Jr(s),
      {
        def: Jr(s),
        path: [...e.basePath, e.definitionPath, r],
        // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
        jsonSchema: void 0
      }
    ]))
  };
};
function Va(n, e, t, r) {
  r != null && r.errorMessages && t && (n.errorMessage = {
    ...n.errorMessage,
    [e]: t
  });
}
function Q(n, e, t, r, s) {
  n[e] = t, Va(n, e, r, s);
}
var K;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const a = {};
    for (const i of s)
      a[i] = i;
    return a;
  }, n.getValidEnumValues = (s) => {
    const a = n.objectKeys(s).filter((o) => typeof s[s[o]] != "number"), i = {};
    for (const o of a)
      i[o] = s[o];
    return n.objectValues(i);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(a) {
    return s[a];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const a = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && a.push(i);
    return a;
  }, n.find = (s, a) => {
    for (const i of s)
      if (a(i))
        return i;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, a = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(a);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, a) => typeof a == "bigint" ? a.toString() : a;
})(K || (K = {}));
var Bs;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(Bs || (Bs = {}));
const M = K.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]), st = (n) => {
  switch (typeof n) {
    case "undefined":
      return M.undefined;
    case "string":
      return M.string;
    case "number":
      return Number.isNaN(n) ? M.nan : M.number;
    case "boolean":
      return M.boolean;
    case "function":
      return M.function;
    case "bigint":
      return M.bigint;
    case "symbol":
      return M.symbol;
    case "object":
      return Array.isArray(n) ? M.array : n === null ? M.null : n.then && typeof n.then == "function" && n.catch && typeof n.catch == "function" ? M.promise : typeof Map < "u" && n instanceof Map ? M.map : typeof Set < "u" && n instanceof Set ? M.set : typeof Date < "u" && n instanceof Date ? M.date : M.object;
    default:
      return M.unknown;
  }
}, C = K.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class $e extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(a) {
      return a.message;
    }, r = { _errors: [] }, s = (a) => {
      for (const i of a.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(t(i));
        else {
          let o = r, c = 0;
          for (; c < i.path.length; ) {
            const l = i.path[c];
            c === i.path.length - 1 ? (o[l] = o[l] || { _errors: [] }, o[l]._errors.push(t(i))) : o[l] = o[l] || { _errors: [] }, o = o[l], c++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof $e))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, K.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      if (s.path.length > 0) {
        const a = s.path[0];
        t[a] = t[a] || [], t[a].push(e(s));
      } else
        r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
}
$e.create = (n) => new $e(n);
const Br = (n, e) => {
  let t;
  switch (n.code) {
    case C.invalid_type:
      n.received === M.undefined ? t = "Required" : t = `Expected ${n.expected}, received ${n.received}`;
      break;
    case C.invalid_literal:
      t = `Invalid literal value, expected ${JSON.stringify(n.expected, K.jsonStringifyReplacer)}`;
      break;
    case C.unrecognized_keys:
      t = `Unrecognized key(s) in object: ${K.joinValues(n.keys, ", ")}`;
      break;
    case C.invalid_union:
      t = "Invalid input";
      break;
    case C.invalid_union_discriminator:
      t = `Invalid discriminator value. Expected ${K.joinValues(n.options)}`;
      break;
    case C.invalid_enum_value:
      t = `Invalid enum value. Expected ${K.joinValues(n.options)}, received '${n.received}'`;
      break;
    case C.invalid_arguments:
      t = "Invalid function arguments";
      break;
    case C.invalid_return_type:
      t = "Invalid function return type";
      break;
    case C.invalid_date:
      t = "Invalid date";
      break;
    case C.invalid_string:
      typeof n.validation == "object" ? "includes" in n.validation ? (t = `Invalid input: must include "${n.validation.includes}"`, typeof n.validation.position == "number" && (t = `${t} at one or more positions greater than or equal to ${n.validation.position}`)) : "startsWith" in n.validation ? t = `Invalid input: must start with "${n.validation.startsWith}"` : "endsWith" in n.validation ? t = `Invalid input: must end with "${n.validation.endsWith}"` : K.assertNever(n.validation) : n.validation !== "regex" ? t = `Invalid ${n.validation}` : t = "Invalid";
      break;
    case C.too_small:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "more than"} ${n.minimum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "over"} ${n.minimum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "bigint" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${new Date(Number(n.minimum))}` : t = "Invalid input";
      break;
    case C.too_big:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "less than"} ${n.maximum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "under"} ${n.maximum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "bigint" ? t = `BigInt must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly" : n.inclusive ? "smaller than or equal to" : "smaller than"} ${new Date(Number(n.maximum))}` : t = "Invalid input";
      break;
    case C.custom:
      t = "Invalid input";
      break;
    case C.invalid_intersection_types:
      t = "Intersection results could not be merged";
      break;
    case C.not_multiple_of:
      t = `Number must be a multiple of ${n.multipleOf}`;
      break;
    case C.not_finite:
      t = "Number must be finite";
      break;
    default:
      t = e.defaultError, K.assertNever(n);
  }
  return { message: t };
};
let ko = Br;
function Ao() {
  return ko;
}
const Co = (n) => {
  const { data: e, path: t, errorMaps: r, issueData: s } = n, a = [...t, ...s.path || []], i = {
    ...s,
    path: a
  };
  if (s.message !== void 0)
    return {
      ...s,
      path: a,
      message: s.message
    };
  let o = "";
  const c = r.filter((l) => !!l).slice().reverse();
  for (const l of c)
    o = l(i, { data: e, defaultError: o }).message;
  return {
    ...s,
    path: a,
    message: o
  };
};
function P(n, e) {
  const t = Ao(), r = Co({
    issueData: e,
    data: n.data,
    path: n.path,
    errorMaps: [
      n.common.contextualErrorMap,
      // contextual error map is first priority
      n.schemaErrorMap,
      // then schema-bound map if available
      t,
      // then global override map
      t === Br ? void 0 : Br
      // then global default map
    ].filter((s) => !!s)
  });
  n.common.issues.push(r);
}
class _e {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e, t) {
    const r = [];
    for (const s of t) {
      if (s.status === "aborted")
        return q;
      s.status === "dirty" && e.dirty(), r.push(s.value);
    }
    return { status: e.value, value: r };
  }
  static async mergeObjectAsync(e, t) {
    const r = [];
    for (const s of t) {
      const a = await s.key, i = await s.value;
      r.push({
        key: a,
        value: i
      });
    }
    return _e.mergeObjectSync(e, r);
  }
  static mergeObjectSync(e, t) {
    const r = {};
    for (const s of t) {
      const { key: a, value: i } = s;
      if (a.status === "aborted" || i.status === "aborted")
        return q;
      a.status === "dirty" && e.dirty(), i.status === "dirty" && e.dirty(), a.value !== "__proto__" && (typeof i.value < "u" || s.alwaysSet) && (r[a.value] = i.value);
    }
    return { status: e.value, value: r };
  }
}
const q = Object.freeze({
  status: "aborted"
}), fn = (n) => ({ status: "dirty", value: n }), Ae = (n) => ({ status: "valid", value: n }), zs = (n) => n.status === "aborted", Gs = (n) => n.status === "dirty", an = (n) => n.status === "valid", rr = (n) => typeof Promise < "u" && n instanceof Promise;
var $;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})($ || ($ = {}));
class Fe {
  constructor(e, t, r, s) {
    this._cachedPath = [], this.parent = e, this.data = t, this._path = r, this._key = s;
  }
  get path() {
    return this._cachedPath.length || (Array.isArray(this._key) ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
}
const Vs = (n, e) => {
  if (an(e))
    return { success: !0, data: e.value };
  if (!n.common.issues.length)
    throw new Error("Validation failed but no issues detected.");
  return {
    success: !1,
    get error() {
      if (this._error)
        return this._error;
      const t = new $e(n.common.issues);
      return this._error = t, this._error;
    }
  };
};
function z(n) {
  if (!n)
    return {};
  const { errorMap: e, invalid_type_error: t, required_error: r, description: s } = n;
  if (e && (t || r))
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e ? { errorMap: e, description: s } : { errorMap: (i, o) => {
    const { message: c } = n;
    return i.code === "invalid_enum_value" ? { message: c ?? o.defaultError } : typeof o.data > "u" ? { message: c ?? r ?? o.defaultError } : i.code !== "invalid_type" ? { message: o.defaultError } : { message: c ?? t ?? o.defaultError };
  }, description: s };
}
class H {
  get description() {
    return this._def.description;
  }
  _getType(e) {
    return st(e.data);
  }
  _getOrReturnCtx(e, t) {
    return t || {
      common: e.parent.common,
      data: e.data,
      parsedType: st(e.data),
      schemaErrorMap: this._def.errorMap,
      path: e.path,
      parent: e.parent
    };
  }
  _processInputParams(e) {
    return {
      status: new _e(),
      ctx: {
        common: e.parent.common,
        data: e.data,
        parsedType: st(e.data),
        schemaErrorMap: this._def.errorMap,
        path: e.path,
        parent: e.parent
      }
    };
  }
  _parseSync(e) {
    const t = this._parse(e);
    if (rr(t))
      throw new Error("Synchronous parse encountered promise.");
    return t;
  }
  _parseAsync(e) {
    const t = this._parse(e);
    return Promise.resolve(t);
  }
  parse(e, t) {
    const r = this.safeParse(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  safeParse(e, t) {
    const r = {
      common: {
        issues: [],
        async: (t == null ? void 0 : t.async) ?? !1,
        contextualErrorMap: t == null ? void 0 : t.errorMap
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    }, s = this._parseSync({ data: e, path: r.path, parent: r });
    return Vs(r, s);
  }
  "~validate"(e) {
    var r, s;
    const t = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    };
    if (!this["~standard"].async)
      try {
        const a = this._parseSync({ data: e, path: [], parent: t });
        return an(a) ? {
          value: a.value
        } : {
          issues: t.common.issues
        };
      } catch (a) {
        (s = (r = a == null ? void 0 : a.message) == null ? void 0 : r.toLowerCase()) != null && s.includes("encountered") && (this["~standard"].async = !0), t.common = {
          issues: [],
          async: !0
        };
      }
    return this._parseAsync({ data: e, path: [], parent: t }).then((a) => an(a) ? {
      value: a.value
    } : {
      issues: t.common.issues
    });
  }
  async parseAsync(e, t) {
    const r = await this.safeParseAsync(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  async safeParseAsync(e, t) {
    const r = {
      common: {
        issues: [],
        contextualErrorMap: t == null ? void 0 : t.errorMap,
        async: !0
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: st(e)
    }, s = this._parse({ data: e, path: r.path, parent: r }), a = await (rr(s) ? s : Promise.resolve(s));
    return Vs(r, a);
  }
  refine(e, t) {
    const r = (s) => typeof t == "string" || typeof t > "u" ? { message: t } : typeof t == "function" ? t(s) : t;
    return this._refinement((s, a) => {
      const i = e(s), o = () => a.addIssue({
        code: C.custom,
        ...r(s)
      });
      return typeof Promise < "u" && i instanceof Promise ? i.then((c) => c ? !0 : (o(), !1)) : i ? !0 : (o(), !1);
    });
  }
  refinement(e, t) {
    return this._refinement((r, s) => e(r) ? !0 : (s.addIssue(typeof t == "function" ? t(r, s) : t), !1));
  }
  _refinement(e) {
    return new Dt({
      schema: this,
      typeName: O.ZodEffects,
      effect: { type: "refinement", refinement: e }
    });
  }
  superRefine(e) {
    return this._refinement(e);
  }
  constructor(e) {
    this.spa = this.safeParseAsync, this._def = e, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this), this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (t) => this["~validate"](t)
    };
  }
  optional() {
    return et.create(this, this._def);
  }
  nullable() {
    return Mt.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return je.create(this);
  }
  promise() {
    return lr.create(this, this._def);
  }
  or(e) {
    return ar.create([this, e], this._def);
  }
  and(e) {
    return ir.create(this, e, this._def);
  }
  transform(e) {
    return new Dt({
      ...z(this._def),
      schema: this,
      typeName: O.ZodEffects,
      effect: { type: "transform", transform: e }
    });
  }
  default(e) {
    const t = typeof e == "function" ? e : () => e;
    return new dr({
      ...z(this._def),
      innerType: this,
      defaultValue: t,
      typeName: O.ZodDefault
    });
  }
  brand() {
    return new Ya({
      typeName: O.ZodBranded,
      type: this,
      ...z(this._def)
    });
  }
  catch(e) {
    const t = typeof e == "function" ? e : () => e;
    return new pr({
      ...z(this._def),
      innerType: this,
      catchValue: t,
      typeName: O.ZodCatch
    });
  }
  describe(e) {
    const t = this.constructor;
    return new t({
      ...this._def,
      description: e
    });
  }
  pipe(e) {
    return _s.create(this, e);
  }
  readonly() {
    return fr.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const Oo = /^c[^\s-]{8,}$/i, Eo = /^[0-9a-z]+$/, No = /^[0-9A-HJKMNP-TV-Z]{26}$/i, Ro = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i, Po = /^[a-z0-9_-]{21}$/i, Do = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/, Mo = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/, jo = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i, $o = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
let Nr;
const Fo = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, Lo = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/, Uo = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/, Zo = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, qo = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/, Jo = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/, Wa = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))", Bo = new RegExp(`^${Wa}$`);
function Ha(n) {
  let e = "[0-5]\\d";
  n.precision ? e = `${e}\\.\\d{${n.precision}}` : n.precision == null && (e = `${e}(\\.\\d+)?`);
  const t = n.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`;
}
function zo(n) {
  return new RegExp(`^${Ha(n)}$`);
}
function Go(n) {
  let e = `${Wa}T${Ha(n)}`;
  const t = [];
  return t.push(n.local ? "Z?" : "Z"), n.offset && t.push("([+-]\\d{2}:?\\d{2})"), e = `${e}(${t.join("|")})`, new RegExp(`^${e}$`);
}
function Vo(n, e) {
  return !!((e === "v4" || !e) && Fo.test(n) || (e === "v6" || !e) && Uo.test(n));
}
function Wo(n, e) {
  if (!Do.test(n))
    return !1;
  try {
    const [t] = n.split(".");
    if (!t)
      return !1;
    const r = t.replace(/-/g, "+").replace(/_/g, "/").padEnd(t.length + (4 - t.length % 4) % 4, "="), s = JSON.parse(atob(r));
    return !(typeof s != "object" || s === null || "typ" in s && (s == null ? void 0 : s.typ) !== "JWT" || !s.alg || e && s.alg !== e);
  } catch {
    return !1;
  }
}
function Ho(n, e) {
  return !!((e === "v4" || !e) && Lo.test(n) || (e === "v6" || !e) && Zo.test(n));
}
class Qe extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = String(e.data)), this._getType(e) !== M.string) {
      const a = this._getOrReturnCtx(e);
      return P(a, {
        code: C.invalid_type,
        expected: M.string,
        received: a.parsedType
      }), q;
    }
    const r = new _e();
    let s;
    for (const a of this._def.checks)
      if (a.kind === "min")
        e.data.length < a.value && (s = this._getOrReturnCtx(e, s), P(s, {
          code: C.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "max")
        e.data.length > a.value && (s = this._getOrReturnCtx(e, s), P(s, {
          code: C.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "length") {
        const i = e.data.length > a.value, o = e.data.length < a.value;
        (i || o) && (s = this._getOrReturnCtx(e, s), i ? P(s, {
          code: C.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }) : o && P(s, {
          code: C.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }), r.dirty());
      } else if (a.kind === "email")
        jo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "email",
          code: C.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "emoji")
        Nr || (Nr = new RegExp($o, "u")), Nr.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "emoji",
          code: C.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "uuid")
        Ro.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "uuid",
          code: C.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "nanoid")
        Po.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "nanoid",
          code: C.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid")
        Oo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "cuid",
          code: C.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid2")
        Eo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "cuid2",
          code: C.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "ulid")
        No.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
          validation: "ulid",
          code: C.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "url")
        try {
          new URL(e.data);
        } catch {
          s = this._getOrReturnCtx(e, s), P(s, {
            validation: "url",
            code: C.invalid_string,
            message: a.message
          }), r.dirty();
        }
      else a.kind === "regex" ? (a.regex.lastIndex = 0, a.regex.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "regex",
        code: C.invalid_string,
        message: a.message
      }), r.dirty())) : a.kind === "trim" ? e.data = e.data.trim() : a.kind === "includes" ? e.data.includes(a.value, a.position) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: { includes: a.value, position: a.position },
        message: a.message
      }), r.dirty()) : a.kind === "toLowerCase" ? e.data = e.data.toLowerCase() : a.kind === "toUpperCase" ? e.data = e.data.toUpperCase() : a.kind === "startsWith" ? e.data.startsWith(a.value) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: { startsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "endsWith" ? e.data.endsWith(a.value) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: { endsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "datetime" ? Go(a).test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: "datetime",
        message: a.message
      }), r.dirty()) : a.kind === "date" ? Bo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: "date",
        message: a.message
      }), r.dirty()) : a.kind === "time" ? zo(a).test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.invalid_string,
        validation: "time",
        message: a.message
      }), r.dirty()) : a.kind === "duration" ? Mo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "duration",
        code: C.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "ip" ? Vo(e.data, a.version) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "ip",
        code: C.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "jwt" ? Wo(e.data, a.alg) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "jwt",
        code: C.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "cidr" ? Ho(e.data, a.version) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "cidr",
        code: C.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64" ? qo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "base64",
        code: C.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64url" ? Jo.test(e.data) || (s = this._getOrReturnCtx(e, s), P(s, {
        validation: "base64url",
        code: C.invalid_string,
        message: a.message
      }), r.dirty()) : K.assertNever(a);
    return { status: r.value, value: e.data };
  }
  _regex(e, t, r) {
    return this.refinement((s) => e.test(s), {
      validation: t,
      code: C.invalid_string,
      ...$.errToObj(r)
    });
  }
  _addCheck(e) {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  email(e) {
    return this._addCheck({ kind: "email", ...$.errToObj(e) });
  }
  url(e) {
    return this._addCheck({ kind: "url", ...$.errToObj(e) });
  }
  emoji(e) {
    return this._addCheck({ kind: "emoji", ...$.errToObj(e) });
  }
  uuid(e) {
    return this._addCheck({ kind: "uuid", ...$.errToObj(e) });
  }
  nanoid(e) {
    return this._addCheck({ kind: "nanoid", ...$.errToObj(e) });
  }
  cuid(e) {
    return this._addCheck({ kind: "cuid", ...$.errToObj(e) });
  }
  cuid2(e) {
    return this._addCheck({ kind: "cuid2", ...$.errToObj(e) });
  }
  ulid(e) {
    return this._addCheck({ kind: "ulid", ...$.errToObj(e) });
  }
  base64(e) {
    return this._addCheck({ kind: "base64", ...$.errToObj(e) });
  }
  base64url(e) {
    return this._addCheck({
      kind: "base64url",
      ...$.errToObj(e)
    });
  }
  jwt(e) {
    return this._addCheck({ kind: "jwt", ...$.errToObj(e) });
  }
  ip(e) {
    return this._addCheck({ kind: "ip", ...$.errToObj(e) });
  }
  cidr(e) {
    return this._addCheck({ kind: "cidr", ...$.errToObj(e) });
  }
  datetime(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "datetime",
      precision: null,
      offset: !1,
      local: !1,
      message: e
    }) : this._addCheck({
      kind: "datetime",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      offset: (e == null ? void 0 : e.offset) ?? !1,
      local: (e == null ? void 0 : e.local) ?? !1,
      ...$.errToObj(e == null ? void 0 : e.message)
    });
  }
  date(e) {
    return this._addCheck({ kind: "date", message: e });
  }
  time(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "time",
      precision: null,
      message: e
    }) : this._addCheck({
      kind: "time",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      ...$.errToObj(e == null ? void 0 : e.message)
    });
  }
  duration(e) {
    return this._addCheck({ kind: "duration", ...$.errToObj(e) });
  }
  regex(e, t) {
    return this._addCheck({
      kind: "regex",
      regex: e,
      ...$.errToObj(t)
    });
  }
  includes(e, t) {
    return this._addCheck({
      kind: "includes",
      value: e,
      position: t == null ? void 0 : t.position,
      ...$.errToObj(t == null ? void 0 : t.message)
    });
  }
  startsWith(e, t) {
    return this._addCheck({
      kind: "startsWith",
      value: e,
      ...$.errToObj(t)
    });
  }
  endsWith(e, t) {
    return this._addCheck({
      kind: "endsWith",
      value: e,
      ...$.errToObj(t)
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e,
      ...$.errToObj(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e,
      ...$.errToObj(t)
    });
  }
  length(e, t) {
    return this._addCheck({
      kind: "length",
      value: e,
      ...$.errToObj(t)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(e) {
    return this.min(1, $.errToObj(e));
  }
  trim() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new Qe({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((e) => e.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e) => e.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e) => e.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e) => e.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e) => e.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e) => e.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e) => e.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e) => e.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e) => e.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e) => e.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e) => e.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e) => e.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e) => e.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((e) => e.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((e) => e.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((e) => e.kind === "base64url");
  }
  get minLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Qe.create = (n) => new Qe({
  checks: [],
  typeName: O.ZodString,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...z(n)
});
function Ko(n, e) {
  const t = (n.toString().split(".")[1] || "").length, r = (e.toString().split(".")[1] || "").length, s = t > r ? t : r, a = Number.parseInt(n.toFixed(s).replace(".", "")), i = Number.parseInt(e.toFixed(s).replace(".", ""));
  return a % i / 10 ** s;
}
class on extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e) {
    if (this._def.coerce && (e.data = Number(e.data)), this._getType(e) !== M.number) {
      const a = this._getOrReturnCtx(e);
      return P(a, {
        code: C.invalid_type,
        expected: M.number,
        received: a.parsedType
      }), q;
    }
    let r;
    const s = new _e();
    for (const a of this._def.checks)
      a.kind === "int" ? K.isInteger(e.data) || (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.invalid_type,
        expected: "integer",
        received: "float",
        message: a.message
      }), s.dirty()) : a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_small,
        minimum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_big,
        maximum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? Ko(e.data, a.value) !== 0 && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : a.kind === "finite" ? Number.isFinite(e.data) || (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.not_finite,
        message: a.message
      }), s.dirty()) : K.assertNever(a);
    return { status: s.value, value: e.data };
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, $.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, $.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, $.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, $.toString(t));
  }
  setLimit(e, t, r, s) {
    return new on({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: $.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new on({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  int(e) {
    return this._addCheck({
      kind: "int",
      message: $.toString(e)
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !1,
      message: $.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !1,
      message: $.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !0,
      message: $.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !0,
      message: $.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: $.toString(t)
    });
  }
  finite(e) {
    return this._addCheck({
      kind: "finite",
      message: $.toString(e)
    });
  }
  safe(e) {
    return this._addCheck({
      kind: "min",
      inclusive: !0,
      value: Number.MIN_SAFE_INTEGER,
      message: $.toString(e)
    })._addCheck({
      kind: "max",
      inclusive: !0,
      value: Number.MAX_SAFE_INTEGER,
      message: $.toString(e)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
  get isInt() {
    return !!this._def.checks.find((e) => e.kind === "int" || e.kind === "multipleOf" && K.isInteger(e.value));
  }
  get isFinite() {
    let e = null, t = null;
    for (const r of this._def.checks) {
      if (r.kind === "finite" || r.kind === "int" || r.kind === "multipleOf")
        return !0;
      r.kind === "min" ? (t === null || r.value > t) && (t = r.value) : r.kind === "max" && (e === null || r.value < e) && (e = r.value);
    }
    return Number.isFinite(t) && Number.isFinite(e);
  }
}
on.create = (n) => new on({
  checks: [],
  typeName: O.ZodNumber,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...z(n)
});
class vn extends H {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e) {
    if (this._def.coerce)
      try {
        e.data = BigInt(e.data);
      } catch {
        return this._getInvalidInput(e);
      }
    if (this._getType(e) !== M.bigint)
      return this._getInvalidInput(e);
    let r;
    const s = new _e();
    for (const a of this._def.checks)
      a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_small,
        type: "bigint",
        minimum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.too_big,
        type: "bigint",
        maximum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? e.data % a.value !== BigInt(0) && (r = this._getOrReturnCtx(e, r), P(r, {
        code: C.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : K.assertNever(a);
    return { status: s.value, value: e.data };
  }
  _getInvalidInput(e) {
    const t = this._getOrReturnCtx(e);
    return P(t, {
      code: C.invalid_type,
      expected: M.bigint,
      received: t.parsedType
    }), q;
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, $.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, $.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, $.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, $.toString(t));
  }
  setLimit(e, t, r, s) {
    return new vn({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: $.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new vn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !1,
      message: $.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !1,
      message: $.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !0,
      message: $.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !0,
      message: $.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: $.toString(t)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
vn.create = (n) => new vn({
  checks: [],
  typeName: O.ZodBigInt,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...z(n)
});
class zr extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = !!e.data), this._getType(e) !== M.boolean) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.boolean,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
zr.create = (n) => new zr({
  typeName: O.ZodBoolean,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...z(n)
});
class sr extends H {
  _parse(e) {
    if (this._def.coerce && (e.data = new Date(e.data)), this._getType(e) !== M.date) {
      const a = this._getOrReturnCtx(e);
      return P(a, {
        code: C.invalid_type,
        expected: M.date,
        received: a.parsedType
      }), q;
    }
    if (Number.isNaN(e.data.getTime())) {
      const a = this._getOrReturnCtx(e);
      return P(a, {
        code: C.invalid_date
      }), q;
    }
    const r = new _e();
    let s;
    for (const a of this._def.checks)
      a.kind === "min" ? e.data.getTime() < a.value && (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.too_small,
        message: a.message,
        inclusive: !0,
        exact: !1,
        minimum: a.value,
        type: "date"
      }), r.dirty()) : a.kind === "max" ? e.data.getTime() > a.value && (s = this._getOrReturnCtx(e, s), P(s, {
        code: C.too_big,
        message: a.message,
        inclusive: !0,
        exact: !1,
        maximum: a.value,
        type: "date"
      }), r.dirty()) : K.assertNever(a);
    return {
      status: r.value,
      value: new Date(e.data.getTime())
    };
  }
  _addCheck(e) {
    return new sr({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e.getTime(),
      message: $.toString(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e.getTime(),
      message: $.toString(t)
    });
  }
  get minDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
  get maxDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
}
sr.create = (n) => new sr({
  checks: [],
  coerce: (n == null ? void 0 : n.coerce) || !1,
  typeName: O.ZodDate,
  ...z(n)
});
class Ws extends H {
  _parse(e) {
    if (this._getType(e) !== M.symbol) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.symbol,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Ws.create = (n) => new Ws({
  typeName: O.ZodSymbol,
  ...z(n)
});
class Gr extends H {
  _parse(e) {
    if (this._getType(e) !== M.undefined) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.undefined,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Gr.create = (n) => new Gr({
  typeName: O.ZodUndefined,
  ...z(n)
});
class Vr extends H {
  _parse(e) {
    if (this._getType(e) !== M.null) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.null,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Vr.create = (n) => new Vr({
  typeName: O.ZodNull,
  ...z(n)
});
class wn extends H {
  constructor() {
    super(...arguments), this._any = !0;
  }
  _parse(e) {
    return Ae(e.data);
  }
}
wn.create = (n) => new wn({
  typeName: O.ZodAny,
  ...z(n)
});
class Hs extends H {
  constructor() {
    super(...arguments), this._unknown = !0;
  }
  _parse(e) {
    return Ae(e.data);
  }
}
Hs.create = (n) => new Hs({
  typeName: O.ZodUnknown,
  ...z(n)
});
class pt extends H {
  _parse(e) {
    const t = this._getOrReturnCtx(e);
    return P(t, {
      code: C.invalid_type,
      expected: M.never,
      received: t.parsedType
    }), q;
  }
}
pt.create = (n) => new pt({
  typeName: O.ZodNever,
  ...z(n)
});
class Ks extends H {
  _parse(e) {
    if (this._getType(e) !== M.undefined) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.void,
        received: r.parsedType
      }), q;
    }
    return Ae(e.data);
  }
}
Ks.create = (n) => new Ks({
  typeName: O.ZodVoid,
  ...z(n)
});
class je extends H {
  _parse(e) {
    const { ctx: t, status: r } = this._processInputParams(e), s = this._def;
    if (t.parsedType !== M.array)
      return P(t, {
        code: C.invalid_type,
        expected: M.array,
        received: t.parsedType
      }), q;
    if (s.exactLength !== null) {
      const i = t.data.length > s.exactLength.value, o = t.data.length < s.exactLength.value;
      (i || o) && (P(t, {
        code: i ? C.too_big : C.too_small,
        minimum: o ? s.exactLength.value : void 0,
        maximum: i ? s.exactLength.value : void 0,
        type: "array",
        inclusive: !0,
        exact: !0,
        message: s.exactLength.message
      }), r.dirty());
    }
    if (s.minLength !== null && t.data.length < s.minLength.value && (P(t, {
      code: C.too_small,
      minimum: s.minLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.minLength.message
    }), r.dirty()), s.maxLength !== null && t.data.length > s.maxLength.value && (P(t, {
      code: C.too_big,
      maximum: s.maxLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.maxLength.message
    }), r.dirty()), t.common.async)
      return Promise.all([...t.data].map((i, o) => s.type._parseAsync(new Fe(t, i, t.path, o)))).then((i) => _e.mergeArray(r, i));
    const a = [...t.data].map((i, o) => s.type._parseSync(new Fe(t, i, t.path, o)));
    return _e.mergeArray(r, a);
  }
  get element() {
    return this._def.type;
  }
  min(e, t) {
    return new je({
      ...this._def,
      minLength: { value: e, message: $.toString(t) }
    });
  }
  max(e, t) {
    return new je({
      ...this._def,
      maxLength: { value: e, message: $.toString(t) }
    });
  }
  length(e, t) {
    return new je({
      ...this._def,
      exactLength: { value: e, message: $.toString(t) }
    });
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
je.create = (n, e) => new je({
  type: n,
  minLength: null,
  maxLength: null,
  exactLength: null,
  typeName: O.ZodArray,
  ...z(e)
});
function Lt(n) {
  if (n instanceof ue) {
    const e = {};
    for (const t in n.shape) {
      const r = n.shape[t];
      e[t] = et.create(Lt(r));
    }
    return new ue({
      ...n._def,
      shape: () => e
    });
  } else return n instanceof je ? new je({
    ...n._def,
    type: Lt(n.element)
  }) : n instanceof et ? et.create(Lt(n.unwrap())) : n instanceof Mt ? Mt.create(Lt(n.unwrap())) : n instanceof Rt ? Rt.create(n.items.map((e) => Lt(e))) : n;
}
class ue extends H {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const e = this._def.shape(), t = K.objectKeys(e);
    return this._cached = { shape: e, keys: t }, this._cached;
  }
  _parse(e) {
    if (this._getType(e) !== M.object) {
      const l = this._getOrReturnCtx(e);
      return P(l, {
        code: C.invalid_type,
        expected: M.object,
        received: l.parsedType
      }), q;
    }
    const { status: r, ctx: s } = this._processInputParams(e), { shape: a, keys: i } = this._getCached(), o = [];
    if (!(this._def.catchall instanceof pt && this._def.unknownKeys === "strip"))
      for (const l in s.data)
        i.includes(l) || o.push(l);
    const c = [];
    for (const l of i) {
      const f = a[l], d = s.data[l];
      c.push({
        key: { status: "valid", value: l },
        value: f._parse(new Fe(s, d, s.path, l)),
        alwaysSet: l in s.data
      });
    }
    if (this._def.catchall instanceof pt) {
      const l = this._def.unknownKeys;
      if (l === "passthrough")
        for (const f of o)
          c.push({
            key: { status: "valid", value: f },
            value: { status: "valid", value: s.data[f] }
          });
      else if (l === "strict")
        o.length > 0 && (P(s, {
          code: C.unrecognized_keys,
          keys: o
        }), r.dirty());
      else if (l !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      const l = this._def.catchall;
      for (const f of o) {
        const d = s.data[f];
        c.push({
          key: { status: "valid", value: f },
          value: l._parse(
            new Fe(s, d, s.path, f)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: f in s.data
        });
      }
    }
    return s.common.async ? Promise.resolve().then(async () => {
      const l = [];
      for (const f of c) {
        const d = await f.key, h = await f.value;
        l.push({
          key: d,
          value: h,
          alwaysSet: f.alwaysSet
        });
      }
      return l;
    }).then((l) => _e.mergeObjectSync(r, l)) : _e.mergeObjectSync(r, c);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e) {
    return $.errToObj, new ue({
      ...this._def,
      unknownKeys: "strict",
      ...e !== void 0 ? {
        errorMap: (t, r) => {
          var a, i;
          const s = ((i = (a = this._def).errorMap) == null ? void 0 : i.call(a, t, r).message) ?? r.defaultError;
          return t.code === "unrecognized_keys" ? {
            message: $.errToObj(e).message ?? s
          } : {
            message: s
          };
        }
      } : {}
    });
  }
  strip() {
    return new ue({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new ue({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(e) {
    return new ue({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...e
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(e) {
    return new ue({
      unknownKeys: e._def.unknownKeys,
      catchall: e._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...e._def.shape()
      }),
      typeName: O.ZodObject
    });
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(e, t) {
    return this.augment({ [e]: t });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(e) {
    return new ue({
      ...this._def,
      catchall: e
    });
  }
  pick(e) {
    const t = {};
    for (const r of K.objectKeys(e))
      e[r] && this.shape[r] && (t[r] = this.shape[r]);
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  omit(e) {
    const t = {};
    for (const r of K.objectKeys(this.shape))
      e[r] || (t[r] = this.shape[r]);
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return Lt(this);
  }
  partial(e) {
    const t = {};
    for (const r of K.objectKeys(this.shape)) {
      const s = this.shape[r];
      e && !e[r] ? t[r] = s : t[r] = s.optional();
    }
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  required(e) {
    const t = {};
    for (const r of K.objectKeys(this.shape))
      if (e && !e[r])
        t[r] = this.shape[r];
      else {
        let a = this.shape[r];
        for (; a instanceof et; )
          a = a._def.innerType;
        t[r] = a;
      }
    return new ue({
      ...this._def,
      shape: () => t
    });
  }
  keyof() {
    return Ka(K.objectKeys(this.shape));
  }
}
ue.create = (n, e) => new ue({
  shape: () => n,
  unknownKeys: "strip",
  catchall: pt.create(),
  typeName: O.ZodObject,
  ...z(e)
});
ue.strictCreate = (n, e) => new ue({
  shape: () => n,
  unknownKeys: "strict",
  catchall: pt.create(),
  typeName: O.ZodObject,
  ...z(e)
});
ue.lazycreate = (n, e) => new ue({
  shape: n,
  unknownKeys: "strip",
  catchall: pt.create(),
  typeName: O.ZodObject,
  ...z(e)
});
class ar extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = this._def.options;
    function s(a) {
      for (const o of a)
        if (o.result.status === "valid")
          return o.result;
      for (const o of a)
        if (o.result.status === "dirty")
          return t.common.issues.push(...o.ctx.common.issues), o.result;
      const i = a.map((o) => new $e(o.ctx.common.issues));
      return P(t, {
        code: C.invalid_union,
        unionErrors: i
      }), q;
    }
    if (t.common.async)
      return Promise.all(r.map(async (a) => {
        const i = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await a._parseAsync({
            data: t.data,
            path: t.path,
            parent: i
          }),
          ctx: i
        };
      })).then(s);
    {
      let a;
      const i = [];
      for (const c of r) {
        const l = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        }, f = c._parseSync({
          data: t.data,
          path: t.path,
          parent: l
        });
        if (f.status === "valid")
          return f;
        f.status === "dirty" && !a && (a = { result: f, ctx: l }), l.common.issues.length && i.push(l.common.issues);
      }
      if (a)
        return t.common.issues.push(...a.ctx.common.issues), a.result;
      const o = i.map((c) => new $e(c));
      return P(t, {
        code: C.invalid_union,
        unionErrors: o
      }), q;
    }
  }
  get options() {
    return this._def.options;
  }
}
ar.create = (n, e) => new ar({
  options: n,
  typeName: O.ZodUnion,
  ...z(e)
});
const Be = (n) => n instanceof ur ? Be(n.schema) : n instanceof Dt ? Be(n.innerType()) : n instanceof cr ? [n.value] : n instanceof Pt ? n.options : n instanceof Hr ? K.objectValues(n.enum) : n instanceof dr ? Be(n._def.innerType) : n instanceof Gr ? [void 0] : n instanceof Vr ? [null] : n instanceof et ? [void 0, ...Be(n.unwrap())] : n instanceof Mt ? [null, ...Be(n.unwrap())] : n instanceof Ya || n instanceof fr ? Be(n.unwrap()) : n instanceof pr ? Be(n._def.innerType) : [];
class ys extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== M.object)
      return P(t, {
        code: C.invalid_type,
        expected: M.object,
        received: t.parsedType
      }), q;
    const r = this.discriminator, s = t.data[r], a = this.optionsMap.get(s);
    return a ? t.common.async ? a._parseAsync({
      data: t.data,
      path: t.path,
      parent: t
    }) : a._parseSync({
      data: t.data,
      path: t.path,
      parent: t
    }) : (P(t, {
      code: C.invalid_union_discriminator,
      options: Array.from(this.optionsMap.keys()),
      path: [r]
    }), q);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  /**
   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
   * have a different value for each object in the union.
   * @param discriminator the name of the discriminator property
   * @param types an array of object schemas
   * @param params
   */
  static create(e, t, r) {
    const s = /* @__PURE__ */ new Map();
    for (const a of t) {
      const i = Be(a.shape[e]);
      if (!i.length)
        throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);
      for (const o of i) {
        if (s.has(o))
          throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);
        s.set(o, a);
      }
    }
    return new ys({
      typeName: O.ZodDiscriminatedUnion,
      discriminator: e,
      options: t,
      optionsMap: s,
      ...z(r)
    });
  }
}
function Wr(n, e) {
  const t = st(n), r = st(e);
  if (n === e)
    return { valid: !0, data: n };
  if (t === M.object && r === M.object) {
    const s = K.objectKeys(e), a = K.objectKeys(n).filter((o) => s.indexOf(o) !== -1), i = { ...n, ...e };
    for (const o of a) {
      const c = Wr(n[o], e[o]);
      if (!c.valid)
        return { valid: !1 };
      i[o] = c.data;
    }
    return { valid: !0, data: i };
  } else if (t === M.array && r === M.array) {
    if (n.length !== e.length)
      return { valid: !1 };
    const s = [];
    for (let a = 0; a < n.length; a++) {
      const i = n[a], o = e[a], c = Wr(i, o);
      if (!c.valid)
        return { valid: !1 };
      s.push(c.data);
    }
    return { valid: !0, data: s };
  } else return t === M.date && r === M.date && +n == +e ? { valid: !0, data: n } : { valid: !1 };
}
class ir extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = (a, i) => {
      if (zs(a) || zs(i))
        return q;
      const o = Wr(a.value, i.value);
      return o.valid ? ((Gs(a) || Gs(i)) && t.dirty(), { status: t.value, value: o.data }) : (P(r, {
        code: C.invalid_intersection_types
      }), q);
    };
    return r.common.async ? Promise.all([
      this._def.left._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      }),
      this._def.right._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      })
    ]).then(([a, i]) => s(a, i)) : s(this._def.left._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }), this._def.right._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }));
  }
}
ir.create = (n, e, t) => new ir({
  left: n,
  right: e,
  typeName: O.ZodIntersection,
  ...z(t)
});
class Rt extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.array)
      return P(r, {
        code: C.invalid_type,
        expected: M.array,
        received: r.parsedType
      }), q;
    if (r.data.length < this._def.items.length)
      return P(r, {
        code: C.too_small,
        minimum: this._def.items.length,
        inclusive: !0,
        exact: !1,
        type: "array"
      }), q;
    !this._def.rest && r.data.length > this._def.items.length && (P(r, {
      code: C.too_big,
      maximum: this._def.items.length,
      inclusive: !0,
      exact: !1,
      type: "array"
    }), t.dirty());
    const a = [...r.data].map((i, o) => {
      const c = this._def.items[o] || this._def.rest;
      return c ? c._parse(new Fe(r, i, r.path, o)) : null;
    }).filter((i) => !!i);
    return r.common.async ? Promise.all(a).then((i) => _e.mergeArray(t, i)) : _e.mergeArray(t, a);
  }
  get items() {
    return this._def.items;
  }
  rest(e) {
    return new Rt({
      ...this._def,
      rest: e
    });
  }
}
Rt.create = (n, e) => {
  if (!Array.isArray(n))
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new Rt({
    items: n,
    typeName: O.ZodTuple,
    rest: null,
    ...z(e)
  });
};
class or extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.object)
      return P(r, {
        code: C.invalid_type,
        expected: M.object,
        received: r.parsedType
      }), q;
    const s = [], a = this._def.keyType, i = this._def.valueType;
    for (const o in r.data)
      s.push({
        key: a._parse(new Fe(r, o, r.path, o)),
        value: i._parse(new Fe(r, r.data[o], r.path, o)),
        alwaysSet: o in r.data
      });
    return r.common.async ? _e.mergeObjectAsync(t, s) : _e.mergeObjectSync(t, s);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e, t, r) {
    return t instanceof H ? new or({
      keyType: e,
      valueType: t,
      typeName: O.ZodRecord,
      ...z(r)
    }) : new or({
      keyType: Qe.create(),
      valueType: e,
      typeName: O.ZodRecord,
      ...z(t)
    });
  }
}
class Ys extends H {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.map)
      return P(r, {
        code: C.invalid_type,
        expected: M.map,
        received: r.parsedType
      }), q;
    const s = this._def.keyType, a = this._def.valueType, i = [...r.data.entries()].map(([o, c], l) => ({
      key: s._parse(new Fe(r, o, r.path, [l, "key"])),
      value: a._parse(new Fe(r, c, r.path, [l, "value"]))
    }));
    if (r.common.async) {
      const o = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const c of i) {
          const l = await c.key, f = await c.value;
          if (l.status === "aborted" || f.status === "aborted")
            return q;
          (l.status === "dirty" || f.status === "dirty") && t.dirty(), o.set(l.value, f.value);
        }
        return { status: t.value, value: o };
      });
    } else {
      const o = /* @__PURE__ */ new Map();
      for (const c of i) {
        const l = c.key, f = c.value;
        if (l.status === "aborted" || f.status === "aborted")
          return q;
        (l.status === "dirty" || f.status === "dirty") && t.dirty(), o.set(l.value, f.value);
      }
      return { status: t.value, value: o };
    }
  }
}
Ys.create = (n, e, t) => new Ys({
  valueType: e,
  keyType: n,
  typeName: O.ZodMap,
  ...z(t)
});
class bn extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== M.set)
      return P(r, {
        code: C.invalid_type,
        expected: M.set,
        received: r.parsedType
      }), q;
    const s = this._def;
    s.minSize !== null && r.data.size < s.minSize.value && (P(r, {
      code: C.too_small,
      minimum: s.minSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.minSize.message
    }), t.dirty()), s.maxSize !== null && r.data.size > s.maxSize.value && (P(r, {
      code: C.too_big,
      maximum: s.maxSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.maxSize.message
    }), t.dirty());
    const a = this._def.valueType;
    function i(c) {
      const l = /* @__PURE__ */ new Set();
      for (const f of c) {
        if (f.status === "aborted")
          return q;
        f.status === "dirty" && t.dirty(), l.add(f.value);
      }
      return { status: t.value, value: l };
    }
    const o = [...r.data.values()].map((c, l) => a._parse(new Fe(r, c, r.path, l)));
    return r.common.async ? Promise.all(o).then((c) => i(c)) : i(o);
  }
  min(e, t) {
    return new bn({
      ...this._def,
      minSize: { value: e, message: $.toString(t) }
    });
  }
  max(e, t) {
    return new bn({
      ...this._def,
      maxSize: { value: e, message: $.toString(t) }
    });
  }
  size(e, t) {
    return this.min(e, t).max(e, t);
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
bn.create = (n, e) => new bn({
  valueType: n,
  minSize: null,
  maxSize: null,
  typeName: O.ZodSet,
  ...z(e)
});
class ur extends H {
  get schema() {
    return this._def.getter();
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    return this._def.getter()._parse({ data: t.data, path: t.path, parent: t });
  }
}
ur.create = (n, e) => new ur({
  getter: n,
  typeName: O.ZodLazy,
  ...z(e)
});
class cr extends H {
  _parse(e) {
    if (e.data !== this._def.value) {
      const t = this._getOrReturnCtx(e);
      return P(t, {
        received: t.data,
        code: C.invalid_literal,
        expected: this._def.value
      }), q;
    }
    return { status: "valid", value: e.data };
  }
  get value() {
    return this._def.value;
  }
}
cr.create = (n, e) => new cr({
  value: n,
  typeName: O.ZodLiteral,
  ...z(e)
});
function Ka(n, e) {
  return new Pt({
    values: n,
    typeName: O.ZodEnum,
    ...z(e)
  });
}
class Pt extends H {
  _parse(e) {
    if (typeof e.data != "string") {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return P(t, {
        expected: K.joinValues(r),
        received: t.parsedType,
        code: C.invalid_type
      }), q;
    }
    if (this._cache || (this._cache = new Set(this._def.values)), !this._cache.has(e.data)) {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return P(t, {
        received: t.data,
        code: C.invalid_enum_value,
        options: r
      }), q;
    }
    return Ae(e.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Values() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  extract(e, t = this._def) {
    return Pt.create(e, {
      ...this._def,
      ...t
    });
  }
  exclude(e, t = this._def) {
    return Pt.create(this.options.filter((r) => !e.includes(r)), {
      ...this._def,
      ...t
    });
  }
}
Pt.create = Ka;
class Hr extends H {
  _parse(e) {
    const t = K.getValidEnumValues(this._def.values), r = this._getOrReturnCtx(e);
    if (r.parsedType !== M.string && r.parsedType !== M.number) {
      const s = K.objectValues(t);
      return P(r, {
        expected: K.joinValues(s),
        received: r.parsedType,
        code: C.invalid_type
      }), q;
    }
    if (this._cache || (this._cache = new Set(K.getValidEnumValues(this._def.values))), !this._cache.has(e.data)) {
      const s = K.objectValues(t);
      return P(r, {
        received: r.data,
        code: C.invalid_enum_value,
        options: s
      }), q;
    }
    return Ae(e.data);
  }
  get enum() {
    return this._def.values;
  }
}
Hr.create = (n, e) => new Hr({
  values: n,
  typeName: O.ZodNativeEnum,
  ...z(e)
});
class lr extends H {
  unwrap() {
    return this._def.type;
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== M.promise && t.common.async === !1)
      return P(t, {
        code: C.invalid_type,
        expected: M.promise,
        received: t.parsedType
      }), q;
    const r = t.parsedType === M.promise ? t.data : Promise.resolve(t.data);
    return Ae(r.then((s) => this._def.type.parseAsync(s, {
      path: t.path,
      errorMap: t.common.contextualErrorMap
    })));
  }
}
lr.create = (n, e) => new lr({
  type: n,
  typeName: O.ZodPromise,
  ...z(e)
});
class Dt extends H {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === O.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = this._def.effect || null, a = {
      addIssue: (i) => {
        P(r, i), i.fatal ? t.abort() : t.dirty();
      },
      get path() {
        return r.path;
      }
    };
    if (a.addIssue = a.addIssue.bind(a), s.type === "preprocess") {
      const i = s.transform(r.data, a);
      if (r.common.async)
        return Promise.resolve(i).then(async (o) => {
          if (t.value === "aborted")
            return q;
          const c = await this._def.schema._parseAsync({
            data: o,
            path: r.path,
            parent: r
          });
          return c.status === "aborted" ? q : c.status === "dirty" || t.value === "dirty" ? fn(c.value) : c;
        });
      {
        if (t.value === "aborted")
          return q;
        const o = this._def.schema._parseSync({
          data: i,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? q : o.status === "dirty" || t.value === "dirty" ? fn(o.value) : o;
      }
    }
    if (s.type === "refinement") {
      const i = (o) => {
        const c = s.refinement(o, a);
        if (r.common.async)
          return Promise.resolve(c);
        if (c instanceof Promise)
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return o;
      };
      if (r.common.async === !1) {
        const o = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? q : (o.status === "dirty" && t.dirty(), i(o.value), { status: t.value, value: o.value });
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((o) => o.status === "aborted" ? q : (o.status === "dirty" && t.dirty(), i(o.value).then(() => ({ status: t.value, value: o.value }))));
    }
    if (s.type === "transform")
      if (r.common.async === !1) {
        const i = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        if (!an(i))
          return q;
        const o = s.transform(i.value, a);
        if (o instanceof Promise)
          throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
        return { status: t.value, value: o };
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((i) => an(i) ? Promise.resolve(s.transform(i.value, a)).then((o) => ({
          status: t.value,
          value: o
        })) : q);
    K.assertNever(s);
  }
}
Dt.create = (n, e, t) => new Dt({
  schema: n,
  typeName: O.ZodEffects,
  effect: e,
  ...z(t)
});
Dt.createWithPreprocess = (n, e, t) => new Dt({
  schema: e,
  effect: { type: "preprocess", transform: n },
  typeName: O.ZodEffects,
  ...z(t)
});
class et extends H {
  _parse(e) {
    return this._getType(e) === M.undefined ? Ae(void 0) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
et.create = (n, e) => new et({
  innerType: n,
  typeName: O.ZodOptional,
  ...z(e)
});
class Mt extends H {
  _parse(e) {
    return this._getType(e) === M.null ? Ae(null) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Mt.create = (n, e) => new Mt({
  innerType: n,
  typeName: O.ZodNullable,
  ...z(e)
});
class dr extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    let r = t.data;
    return t.parsedType === M.undefined && (r = this._def.defaultValue()), this._def.innerType._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
dr.create = (n, e) => new dr({
  innerType: n,
  typeName: O.ZodDefault,
  defaultValue: typeof e.default == "function" ? e.default : () => e.default,
  ...z(e)
});
class pr extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = {
      ...t,
      common: {
        ...t.common,
        issues: []
      }
    }, s = this._def.innerType._parse({
      data: r.data,
      path: r.path,
      parent: {
        ...r
      }
    });
    return rr(s) ? s.then((a) => ({
      status: "valid",
      value: a.status === "valid" ? a.value : this._def.catchValue({
        get error() {
          return new $e(r.common.issues);
        },
        input: r.data
      })
    })) : {
      status: "valid",
      value: s.status === "valid" ? s.value : this._def.catchValue({
        get error() {
          return new $e(r.common.issues);
        },
        input: r.data
      })
    };
  }
  removeCatch() {
    return this._def.innerType;
  }
}
pr.create = (n, e) => new pr({
  innerType: n,
  typeName: O.ZodCatch,
  catchValue: typeof e.catch == "function" ? e.catch : () => e.catch,
  ...z(e)
});
class Xs extends H {
  _parse(e) {
    if (this._getType(e) !== M.nan) {
      const r = this._getOrReturnCtx(e);
      return P(r, {
        code: C.invalid_type,
        expected: M.nan,
        received: r.parsedType
      }), q;
    }
    return { status: "valid", value: e.data };
  }
}
Xs.create = (n) => new Xs({
  typeName: O.ZodNaN,
  ...z(n)
});
class Ya extends H {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = t.data;
    return this._def.type._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class _s extends H {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.common.async)
      return (async () => {
        const a = await this._def.in._parseAsync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? q : a.status === "dirty" ? (t.dirty(), fn(a.value)) : this._def.out._parseAsync({
          data: a.value,
          path: r.path,
          parent: r
        });
      })();
    {
      const s = this._def.in._parseSync({
        data: r.data,
        path: r.path,
        parent: r
      });
      return s.status === "aborted" ? q : s.status === "dirty" ? (t.dirty(), {
        status: "dirty",
        value: s.value
      }) : this._def.out._parseSync({
        data: s.value,
        path: r.path,
        parent: r
      });
    }
  }
  static create(e, t) {
    return new _s({
      in: e,
      out: t,
      typeName: O.ZodPipeline
    });
  }
}
class fr extends H {
  _parse(e) {
    const t = this._def.innerType._parse(e), r = (s) => (an(s) && (s.value = Object.freeze(s.value)), s);
    return rr(t) ? t.then((s) => r(s)) : r(t);
  }
  unwrap() {
    return this._def.innerType;
  }
}
fr.create = (n, e) => new fr({
  innerType: n,
  typeName: O.ZodReadonly,
  ...z(e)
});
function Qs(n, e) {
  const t = typeof n == "function" ? n(e) : typeof n == "string" ? { message: n } : n;
  return typeof t == "string" ? { message: t } : t;
}
function Yo(n, e = {}, t) {
  return n ? wn.create().superRefine((r, s) => {
    const a = n(r);
    if (a instanceof Promise)
      return a.then((i) => {
        if (!i) {
          const o = Qs(e, r), c = o.fatal ?? t ?? !0;
          s.addIssue({ code: "custom", ...o, fatal: c });
        }
      });
    if (!a) {
      const i = Qs(e, r), o = i.fatal ?? t ?? !0;
      s.addIssue({ code: "custom", ...i, fatal: o });
    }
  }) : wn.create();
}
var O;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(O || (O = {}));
const Xa = (n, e = {
  message: `Input not instance of ${n.name}`
}) => Yo((t) => t instanceof n, e), p = Qe.create, E = on.create, Nt = zr.create, W = wn.create;
pt.create;
const J = je.create, w = ue.create, tt = ar.create, ge = ys.create;
ir.create;
Rt.create;
const te = or.create, Xo = ur.create, I = cr.create, ce = Pt.create;
lr.create;
et.create;
Mt.create;
function Qo() {
  return {};
}
function eu(n, e) {
  var r, s;
  const t = {
    type: "array"
  };
  return ((s = (r = n.type) == null ? void 0 : r._def) == null ? void 0 : s.typeName) !== O.ZodAny && (t.items = Y(n.type._def, {
    ...e,
    currentPath: [...e.currentPath, "items"]
  })), n.minLength && Q(t, "minItems", n.minLength.value, n.minLength.message, e), n.maxLength && Q(t, "maxItems", n.maxLength.value, n.maxLength.message, e), n.exactLength && (Q(t, "minItems", n.exactLength.value, n.exactLength.message, e), Q(t, "maxItems", n.exactLength.value, n.exactLength.message, e)), t;
}
function tu(n, e) {
  const t = {
    type: "integer",
    format: "int64"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "minimum", r.value, r.message, e) : Q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), Q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "maximum", r.value, r.message, e) : Q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), Q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        Q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function nu() {
  return {
    type: "boolean"
  };
}
function ru(n, e) {
  return Y(n.type._def, e);
}
const su = (n, e) => Y(n.innerType._def, e);
function Qa(n, e, t) {
  const r = t ?? e.dateStrategy;
  if (Array.isArray(r))
    return {
      anyOf: r.map((s, a) => Qa(n, e, s))
    };
  switch (r) {
    case "string":
    case "format:date-time":
      return {
        type: "string",
        format: "date-time"
      };
    case "format:date":
      return {
        type: "string",
        format: "date"
      };
    case "integer":
      return au(n, e);
  }
}
const au = (n, e) => {
  const t = {
    type: "integer",
    format: "unix-time"
  };
  if (e.target === "openApi3")
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        Q(
          t,
          "minimum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
      case "max":
        Q(
          t,
          "maximum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
    }
  return t;
};
function iu(n, e) {
  return {
    ...Y(n.innerType._def, e),
    default: n.defaultValue()
  };
}
function ou(n, e, t) {
  return e.effectStrategy === "input" ? Y(n.schema._def, e, t) : {};
}
function uu(n) {
  return {
    type: "string",
    enum: [...n.values]
  };
}
const cu = (n) => "type" in n && n.type === "string" ? !1 : "allOf" in n;
function lu(n, e) {
  const t = [
    Y(n.left._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "0"]
    }),
    Y(n.right._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "1"]
    })
  ].filter((a) => !!a);
  let r = e.target === "jsonSchema2019-09" ? { unevaluatedProperties: !1 } : void 0;
  const s = [];
  return t.forEach((a) => {
    if (cu(a))
      s.push(...a.allOf), a.unevaluatedProperties === void 0 && (r = void 0);
    else {
      let i = a;
      if ("additionalProperties" in a && a.additionalProperties === !1) {
        const { additionalProperties: o, ...c } = a;
        i = c;
      } else
        r = void 0;
      s.push(i);
    }
  }), s.length ? {
    allOf: s,
    ...r
  } : void 0;
}
function du(n, e) {
  const t = typeof n.value;
  return t !== "bigint" && t !== "number" && t !== "boolean" && t !== "string" ? {
    type: Array.isArray(n.value) ? "array" : "object"
  } : e.target === "openApi3" ? {
    type: t === "bigint" ? "integer" : t,
    enum: [n.value]
  } : {
    type: t === "bigint" ? "integer" : t,
    const: n.value
  };
}
let Rr;
const mt = {
  /**
   * `c` was changed to `[cC]` to replicate /i flag
   */
  cuid: /^[cC][^\s-]{8,}$/,
  cuid2: /^[0-9a-z]+$/,
  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,
  /**
   * `a-z` was added to replicate /i flag
   */
  email: /^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,
  /**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */
  emoji: () => (Rr === void 0 && (Rr = RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$", "u")), Rr),
  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,
  nanoid: /^[a-zA-Z0-9_-]{21}$/
};
function ei(n, e) {
  const t = {
    type: "string"
  };
  function r(s) {
    return e.patternStrategy === "escape" ? pu(s) : s;
  }
  if (n.checks)
    for (const s of n.checks)
      switch (s.kind) {
        case "min":
          Q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e);
          break;
        case "max":
          Q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "email":
          switch (e.emailStrategy) {
            case "format:email":
              Ce(t, "email", s.message, e);
              break;
            case "format:idn-email":
              Ce(t, "idn-email", s.message, e);
              break;
            case "pattern:zod":
              Oe(t, mt.email, s.message, e);
              break;
          }
          break;
        case "url":
          Ce(t, "uri", s.message, e);
          break;
        case "uuid":
          Ce(t, "uuid", s.message, e);
          break;
        case "regex":
          Oe(t, s.regex, s.message, e);
          break;
        case "cuid":
          Oe(t, mt.cuid, s.message, e);
          break;
        case "cuid2":
          Oe(t, mt.cuid2, s.message, e);
          break;
        case "startsWith":
          Oe(t, RegExp(`^${r(s.value)}`), s.message, e);
          break;
        case "endsWith":
          Oe(t, RegExp(`${r(s.value)}$`), s.message, e);
          break;
        case "datetime":
          Ce(t, "date-time", s.message, e);
          break;
        case "date":
          Ce(t, "date", s.message, e);
          break;
        case "time":
          Ce(t, "time", s.message, e);
          break;
        case "duration":
          Ce(t, "duration", s.message, e);
          break;
        case "length":
          Q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e), Q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "includes": {
          Oe(t, RegExp(r(s.value)), s.message, e);
          break;
        }
        case "ip": {
          s.version !== "v6" && Ce(t, "ipv4", s.message, e), s.version !== "v4" && Ce(t, "ipv6", s.message, e);
          break;
        }
        case "emoji":
          Oe(t, mt.emoji, s.message, e);
          break;
        case "ulid": {
          Oe(t, mt.ulid, s.message, e);
          break;
        }
        case "base64": {
          switch (e.base64Strategy) {
            case "format:binary": {
              Ce(t, "binary", s.message, e);
              break;
            }
            case "contentEncoding:base64": {
              Q(t, "contentEncoding", "base64", s.message, e);
              break;
            }
            case "pattern:zod": {
              Oe(t, mt.base64, s.message, e);
              break;
            }
          }
          break;
        }
        case "nanoid":
          Oe(t, mt.nanoid, s.message, e);
      }
  return t;
}
const pu = (n) => Array.from(n).map((e) => /[a-zA-Z0-9]/.test(e) ? e : `\\${e}`).join(""), Ce = (n, e, t, r) => {
  var s;
  n.format || (s = n.anyOf) != null && s.some((a) => a.format) ? (n.anyOf || (n.anyOf = []), n.format && (n.anyOf.push({
    format: n.format,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { format: n.errorMessage.format }
    }
  }), delete n.format, n.errorMessage && (delete n.errorMessage.format, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.anyOf.push({
    format: e,
    ...t && r.errorMessages && { errorMessage: { format: t } }
  })) : Q(n, "format", e, t, r);
}, Oe = (n, e, t, r) => {
  var s;
  n.pattern || (s = n.allOf) != null && s.some((a) => a.pattern) ? (n.allOf || (n.allOf = []), n.pattern && (n.allOf.push({
    pattern: n.pattern,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { pattern: n.errorMessage.pattern }
    }
  }), delete n.pattern, n.errorMessage && (delete n.errorMessage.pattern, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.allOf.push({
    pattern: ea(e, r),
    ...t && r.errorMessages && { errorMessage: { pattern: t } }
  })) : Q(n, "pattern", ea(e, r), t, r);
}, ea = (n, e) => {
  var l;
  const t = typeof n == "function" ? n() : n;
  if (!e.applyRegexFlags || !t.flags)
    return t.source;
  const r = {
    i: t.flags.includes("i"),
    // Case-insensitive
    m: t.flags.includes("m"),
    // `^` and `$` matches adjacent to newline characters
    s: t.flags.includes("s")
    // `.` matches newlines
  }, s = r.i ? t.source.toLowerCase() : t.source;
  let a = "", i = !1, o = !1, c = !1;
  for (let f = 0; f < s.length; f++) {
    if (i) {
      a += s[f], i = !1;
      continue;
    }
    if (r.i) {
      if (o) {
        if (s[f].match(/[a-z]/)) {
          c ? (a += s[f], a += `${s[f - 2]}-${s[f]}`.toUpperCase(), c = !1) : s[f + 1] === "-" && ((l = s[f + 2]) != null && l.match(/[a-z]/)) ? (a += s[f], c = !0) : a += `${s[f]}${s[f].toUpperCase()}`;
          continue;
        }
      } else if (s[f].match(/[a-z]/)) {
        a += `[${s[f]}${s[f].toUpperCase()}]`;
        continue;
      }
    }
    if (r.m) {
      if (s[f] === "^") {
        a += `(^|(?<=[\r
]))`;
        continue;
      } else if (s[f] === "$") {
        a += `($|(?=[\r
]))`;
        continue;
      }
    }
    if (r.s && s[f] === ".") {
      a += o ? `${s[f]}\r
` : `[${s[f]}\r
]`;
      continue;
    }
    a += s[f], s[f] === "\\" ? i = !0 : o && s[f] === "]" ? o = !1 : !o && s[f] === "[" && (o = !0);
  }
  try {
    const f = new RegExp(a);
  } catch {
    return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`), t.source;
  }
  return a;
};
function ti(n, e) {
  var r, s, a, i;
  if (e.target === "openApi3" && ((r = n.keyType) == null ? void 0 : r._def.typeName) === O.ZodEnum)
    return {
      type: "object",
      required: n.keyType._def.values,
      properties: n.keyType._def.values.reduce((o, c) => ({
        ...o,
        [c]: Y(n.valueType._def, {
          ...e,
          currentPath: [...e.currentPath, "properties", c]
        }) ?? {}
      }), {}),
      additionalProperties: !1
    };
  const t = {
    type: "object",
    additionalProperties: Y(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalProperties"]
    }) ?? {}
  };
  if (e.target === "openApi3")
    return t;
  if (((s = n.keyType) == null ? void 0 : s._def.typeName) === O.ZodString && ((a = n.keyType._def.checks) != null && a.length)) {
    const o = Object.entries(ei(n.keyType._def, e)).reduce((c, [l, f]) => l === "type" ? c : { ...c, [l]: f }, {});
    return {
      ...t,
      propertyNames: o
    };
  } else if (((i = n.keyType) == null ? void 0 : i._def.typeName) === O.ZodEnum)
    return {
      ...t,
      propertyNames: {
        enum: n.keyType._def.values
      }
    };
  return t;
}
function fu(n, e) {
  if (e.mapStrategy === "record")
    return ti(n, e);
  const t = Y(n.keyType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "0"]
  }) || {}, r = Y(n.valueType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "1"]
  }) || {};
  return {
    type: "array",
    maxItems: 125,
    items: {
      type: "array",
      items: [t, r],
      minItems: 2,
      maxItems: 2
    }
  };
}
function hu(n) {
  const e = n.values, r = Object.keys(n.values).filter((a) => typeof e[e[a]] != "number").map((a) => e[a]), s = Array.from(new Set(r.map((a) => typeof a)));
  return {
    type: s.length === 1 ? s[0] === "string" ? "string" : "number" : ["string", "number"],
    enum: r
  };
}
function mu() {
  return {
    not: {}
  };
}
function gu(n) {
  return n.target === "openApi3" ? {
    enum: ["null"],
    nullable: !0
  } : {
    type: "null"
  };
}
const hr = {
  ZodString: "string",
  ZodNumber: "number",
  ZodBigInt: "integer",
  ZodBoolean: "boolean",
  ZodNull: "null"
};
function yu(n, e) {
  if (e.target === "openApi3")
    return ta(n, e);
  const t = n.options instanceof Map ? Array.from(n.options.values()) : n.options;
  if (t.every((r) => r._def.typeName in hr && (!r._def.checks || !r._def.checks.length))) {
    const r = t.reduce((s, a) => {
      const i = hr[a._def.typeName];
      return i && !s.includes(i) ? [...s, i] : s;
    }, []);
    return {
      type: r.length > 1 ? r : r[0]
    };
  } else if (t.every((r) => r._def.typeName === "ZodLiteral" && !r.description)) {
    const r = t.reduce((s, a) => {
      const i = typeof a._def.value;
      switch (i) {
        case "string":
        case "number":
        case "boolean":
          return [...s, i];
        case "bigint":
          return [...s, "integer"];
        case "object":
          if (a._def.value === null)
            return [...s, "null"];
        case "symbol":
        case "undefined":
        case "function":
        default:
          return s;
      }
    }, []);
    if (r.length === t.length) {
      const s = r.filter((a, i, o) => o.indexOf(a) === i);
      return {
        type: s.length > 1 ? s : s[0],
        enum: t.reduce((a, i) => a.includes(i._def.value) ? a : [...a, i._def.value], [])
      };
    }
  } else if (t.every((r) => r._def.typeName === "ZodEnum"))
    return {
      type: "string",
      enum: t.reduce((r, s) => [...r, ...s._def.values.filter((a) => !r.includes(a))], [])
    };
  return ta(n, e);
}
const ta = (n, e) => {
  const t = (n.options instanceof Map ? Array.from(n.options.values()) : n.options).map((r, s) => Y(r._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", `${s}`]
  })).filter((r) => !!r && (!e.strictUnions || typeof r == "object" && Object.keys(r).length > 0));
  return t.length ? { anyOf: t } : void 0;
};
function _u(n, e) {
  if (["ZodString", "ZodNumber", "ZodBigInt", "ZodBoolean", "ZodNull"].includes(n.innerType._def.typeName) && (!n.innerType._def.checks || !n.innerType._def.checks.length))
    return e.target === "openApi3" || e.nullableStrategy === "property" ? {
      type: hr[n.innerType._def.typeName],
      nullable: !0
    } : {
      type: [hr[n.innerType._def.typeName], "null"]
    };
  if (e.target === "openApi3") {
    const r = Y(n.innerType._def, {
      ...e,
      currentPath: [...e.currentPath]
    });
    return r && "$ref" in r ? { allOf: [r], nullable: !0 } : r && { ...r, nullable: !0 };
  }
  const t = Y(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "0"]
  });
  return t && { anyOf: [t, { type: "null" }] };
}
function vu(n, e) {
  const t = {
    type: "number"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "int":
        t.type = "integer", Va(t, "type", r.message, e);
        break;
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "minimum", r.value, r.message, e) : Q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), Q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? Q(t, "maximum", r.value, r.message, e) : Q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), Q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        Q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function wu(n, e) {
  return e.removeAdditionalStrategy === "strict" ? n.catchall._def.typeName === "ZodNever" ? n.unknownKeys !== "strict" : Y(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0 : n.catchall._def.typeName === "ZodNever" ? n.unknownKeys === "passthrough" : Y(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0;
}
function bu(n, e) {
  const t = {
    type: "object",
    ...Object.entries(n.shape()).reduce((r, [s, a]) => {
      var c;
      if (a === void 0 || a._def === void 0)
        return r;
      const i = [...e.currentPath, "properties", s], o = Y(a._def, {
        ...e,
        currentPath: i,
        propertyPath: i
      });
      if (o === void 0)
        return r;
      if (e.openaiStrictMode && a.isOptional() && !a.isNullable() && typeof ((c = a._def) == null ? void 0 : c.defaultValue) > "u")
        throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
      return {
        properties: {
          ...r.properties,
          [s]: o
        },
        required: a.isOptional() && !e.openaiStrictMode ? r.required : [...r.required, s]
      };
    }, { properties: {}, required: [] }),
    additionalProperties: wu(n, e)
  };
  return t.required.length || delete t.required, t;
}
const Iu = (n, e) => {
  if (e.propertyPath && e.currentPath.slice(0, e.propertyPath.length).toString() === e.propertyPath.toString())
    return Y(n.innerType._def, { ...e, currentPath: e.currentPath });
  const t = Y(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "1"]
  });
  return t ? {
    anyOf: [
      {
        not: {}
      },
      t
    ]
  } : {};
}, Su = (n, e) => {
  if (e.pipeStrategy === "input")
    return Y(n.in._def, e);
  if (e.pipeStrategy === "output")
    return Y(n.out._def, e);
  const t = Y(n.in._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", "0"]
  }), r = Y(n.out._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", t ? "1" : "0"]
  });
  return {
    allOf: [t, r].filter((s) => s !== void 0)
  };
};
function xu(n, e) {
  return Y(n.type._def, e);
}
function Tu(n, e) {
  const r = {
    type: "array",
    uniqueItems: !0,
    items: Y(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "items"]
    })
  };
  return n.minSize && Q(r, "minItems", n.minSize.value, n.minSize.message, e), n.maxSize && Q(r, "maxItems", n.maxSize.value, n.maxSize.message, e), r;
}
function ku(n, e) {
  return n.rest ? {
    type: "array",
    minItems: n.items.length,
    items: n.items.map((t, r) => Y(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], []),
    additionalItems: Y(n.rest._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalItems"]
    })
  } : {
    type: "array",
    minItems: n.items.length,
    maxItems: n.items.length,
    items: n.items.map((t, r) => Y(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], [])
  };
}
function Au() {
  return {
    not: {}
  };
}
function Cu() {
  return {};
}
const Ou = (n, e) => Y(n.innerType._def, e);
function Y(n, e, t = !1) {
  var i;
  const r = e.seen.get(n);
  if (e.override) {
    const o = (i = e.override) == null ? void 0 : i.call(e, n, e, r, t);
    if (o !== Io)
      return o;
  }
  if (r && !t) {
    const o = Eu(r, e);
    if (o !== void 0)
      return "$ref" in o && e.seenRefs.add(o.$ref), o;
  }
  const s = { def: n, path: e.currentPath, jsonSchema: void 0 };
  e.seen.set(n, s);
  const a = Ru(n, n.typeName, e, t);
  return a && Pu(n, e, a), s.jsonSchema = a, a;
}
const Eu = (n, e) => {
  switch (e.$refStrategy) {
    case "root":
      return { $ref: n.path.join("/") };
    // this case is needed as OpenAI strict mode doesn't support top-level `$ref`s, i.e.
    // the top-level schema *must* be `{"type": "object", "properties": {...}}` but if we ever
    // need to define a `$ref`, relative `$ref`s aren't supported, so we need to extract
    // the schema to `#/definitions/` and reference that.
    //
    // e.g. if we need to reference a schema at
    // `["#","definitions","contactPerson","properties","person1","properties","name"]`
    // then we'll extract it out to `contactPerson_properties_person1_properties_name`
    case "extract-to-root":
      const t = n.path.slice(e.basePath.length + 1).join("_");
      return t !== e.name && e.nameStrategy === "duplicate-ref" && (e.definitions[t] = n.def), { $ref: [...e.basePath, e.definitionPath, t].join("/") };
    case "relative":
      return { $ref: Nu(e.currentPath, n.path) };
    case "none":
    case "seen":
      return n.path.length < e.currentPath.length && n.path.every((r, s) => e.currentPath[s] === r) ? (console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`), {}) : e.$refStrategy === "seen" ? {} : void 0;
  }
}, Nu = (n, e) => {
  let t = 0;
  for (; t < n.length && t < e.length && n[t] === e[t]; t++)
    ;
  return [(n.length - t).toString(), ...e.slice(t)].join("/");
}, Ru = (n, e, t, r) => {
  switch (e) {
    case O.ZodString:
      return ei(n, t);
    case O.ZodNumber:
      return vu(n, t);
    case O.ZodObject:
      return bu(n, t);
    case O.ZodBigInt:
      return tu(n, t);
    case O.ZodBoolean:
      return nu();
    case O.ZodDate:
      return Qa(n, t);
    case O.ZodUndefined:
      return Au();
    case O.ZodNull:
      return gu(t);
    case O.ZodArray:
      return eu(n, t);
    case O.ZodUnion:
    case O.ZodDiscriminatedUnion:
      return yu(n, t);
    case O.ZodIntersection:
      return lu(n, t);
    case O.ZodTuple:
      return ku(n, t);
    case O.ZodRecord:
      return ti(n, t);
    case O.ZodLiteral:
      return du(n, t);
    case O.ZodEnum:
      return uu(n);
    case O.ZodNativeEnum:
      return hu(n);
    case O.ZodNullable:
      return _u(n, t);
    case O.ZodOptional:
      return Iu(n, t);
    case O.ZodMap:
      return fu(n, t);
    case O.ZodSet:
      return Tu(n, t);
    case O.ZodLazy:
      return Y(n.getter()._def, t);
    case O.ZodPromise:
      return xu(n, t);
    case O.ZodNaN:
    case O.ZodNever:
      return mu();
    case O.ZodEffects:
      return ou(n, t, r);
    case O.ZodAny:
      return Qo();
    case O.ZodUnknown:
      return Cu();
    case O.ZodDefault:
      return iu(n, t);
    case O.ZodBranded:
      return ru(n, t);
    case O.ZodReadonly:
      return Ou(n, t);
    case O.ZodCatch:
      return su(n, t);
    case O.ZodPipeline:
      return Su(n, t);
    case O.ZodFunction:
    case O.ZodVoid:
    case O.ZodSymbol:
      return;
    default:
      return /* @__PURE__ */ ((s) => {
      })();
  }
}, Pu = (n, e, t) => (n.description && (t.description = n.description, e.markdownDescription && (t.markdownDescription = n.description)), t), Du = (n, e) => {
  const t = To(e), r = typeof e == "string" ? e : (e == null ? void 0 : e.nameStrategy) === "title" || e == null ? void 0 : e.name, s = Y(n._def, r === void 0 ? t : {
    ...t,
    currentPath: [...t.basePath, t.definitionPath, r]
  }, !1) ?? {}, a = typeof e == "object" && e.name !== void 0 && e.nameStrategy === "title" ? e.name : void 0;
  a !== void 0 && (s.title = a);
  const i = (() => {
    if (xo(t.definitions))
      return;
    const c = {}, l = /* @__PURE__ */ new Set();
    for (let f = 0; f < 500; f++) {
      const d = Object.entries(t.definitions).filter(([h]) => !l.has(h));
      if (d.length === 0)
        break;
      for (const [h, y] of d)
        c[h] = Y(Jr(y), { ...t, currentPath: [...t.basePath, t.definitionPath, h] }, !0) ?? {}, l.add(h);
    }
    return c;
  })(), o = r === void 0 ? i ? {
    ...s,
    [t.definitionPath]: i
  } : s : t.nameStrategy === "duplicate-ref" ? {
    ...s,
    ...i || t.seenRefs.size ? {
      [t.definitionPath]: {
        ...i,
        // only actually duplicate the schema definition if it was ever referenced
        // otherwise the duplication is completely pointless
        ...t.seenRefs.size ? { [r]: s } : void 0
      }
    } : void 0
  } : {
    $ref: [...t.$refStrategy === "relative" ? [] : t.basePath, t.definitionPath, r].join("/"),
    [t.definitionPath]: {
      ...i,
      [r]: s
    }
  };
  return t.target === "jsonSchema7" ? o.$schema = "http://json-schema.org/draft-07/schema#" : t.target === "jsonSchema2019-09" && (o.$schema = "https://json-schema.org/draft/2019-09/schema#"), o;
};
function Mu(n, { parser: e, callback: t }) {
  const r = { ...n };
  return Object.defineProperties(r, {
    $brand: {
      value: "auto-parseable-tool",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    },
    $callback: {
      value: t,
      enumerable: !1
    }
  }), r;
}
function ju(n) {
  if (n.type !== "object")
    throw new Error(`Root schema must have type: 'object' but got type: ${n.type ? `'${n.type}'` : "undefined"}`);
  const e = structuredClone(n);
  return ze(e, [], e);
}
function Kr(n) {
  if (typeof n == "boolean")
    return !1;
  if (n.type === "null")
    return !0;
  for (const e of n.oneOf ?? [])
    if (Kr(e))
      return !0;
  for (const e of n.anyOf ?? [])
    if (Kr(e))
      return !0;
  return !1;
}
function ze(n, e, t) {
  if (typeof n == "boolean")
    throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);
  if (!yt(n))
    throw new TypeError(`Expected ${JSON.stringify(n)} to be an object; path=${e.join("/")}`);
  const r = n.$defs;
  if (yt(r))
    for (const [h, y] of Object.entries(r))
      ze(y, [...e, "$defs", h], t);
  const s = n.definitions;
  if (yt(s))
    for (const [h, y] of Object.entries(s))
      ze(y, [...e, "definitions", h], t);
  n.type === "object" && !("additionalProperties" in n) && (n.additionalProperties = !1);
  const i = n.required ?? [], o = n.properties;
  if (yt(o)) {
    for (const [h, y] of Object.entries(o))
      if (!Kr(y) && !i.includes(h))
        throw new Error(`Zod field at \`${[...e, "properties", h].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
    n.required = Object.keys(o), n.properties = Object.fromEntries(Object.entries(o).map(([h, y]) => [
      h,
      ze(y, [...e, "properties", h], t)
    ]));
  }
  const c = n.items;
  yt(c) && (n.items = ze(c, [...e, "items"], t));
  const l = n.anyOf;
  Array.isArray(l) && (n.anyOf = l.map((h, y) => ze(h, [...e, "anyOf", String(y)], t)));
  const f = n.allOf;
  if (Array.isArray(f))
    if (f.length === 1) {
      const h = ze(f[0], [...e, "allOf", "0"], t);
      Object.assign(n, h), delete n.allOf;
    } else
      n.allOf = f.map((h, y) => ze(h, [...e, "allOf", String(y)], t));
  n.default === null && delete n.default;
  const d = n.$ref;
  if (d && Fu(n, 1)) {
    if (typeof d != "string")
      throw new TypeError(`Received non-string $ref - ${d}; path=${e.join("/")}`);
    const h = $u(t, d);
    if (typeof h == "boolean")
      throw new Error(`Expected \`$ref: ${d}\` to resolve to an object schema but got boolean`);
    if (!yt(h))
      throw new Error(`Expected \`$ref: ${d}\` to resolve to an object but got ${JSON.stringify(h)}`);
    return Object.assign(n, { ...h, ...n }), delete n.$ref, ze(n, e, t);
  }
  return n;
}
function $u(n, e) {
  if (!e.startsWith("#/"))
    throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);
  const t = e.slice(2).split("/");
  let r = n;
  for (const s of t) {
    if (!yt(r))
      throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);
    const a = r[s];
    if (a === void 0)
      throw new Error(`Key ${s} not found while resolving ${e}`);
    r = a;
  }
  return r;
}
function yt(n) {
  return typeof n == "object" && n !== null && !Array.isArray(n);
}
function Fu(n, e) {
  let t = 0;
  for (const r in n)
    if (t++, t > e)
      return !0;
  return !1;
}
function ni(n, e) {
  return Du(n, {
    openaiStrictMode: !0,
    name: e.name,
    nameStrategy: "duplicate-ref",
    $refStrategy: "extract-to-root",
    nullableStrategy: "property"
  });
}
function ri(n) {
  return ju(wo(n, {
    target: "draft-7"
  }));
}
function si(n) {
  return "_zod" in n;
}
function Lu(n, e, t) {
  return bo({
    type: "json_schema",
    ...t,
    name: e,
    strict: !0,
    schema: si(n) ? ri(n) : ni(n, { name: e })
  }, (r) => n.parse(JSON.parse(r)));
}
function Uu(n) {
  return Mu({
    type: "function",
    name: n.name,
    parameters: si(n.parameters) ? ri(n.parameters) : ni(n.parameters, { name: n.name }),
    strict: !0,
    ...n.description ? { description: n.description } : void 0
  }, {
    callback: n.function,
    parser: (e) => n.parameters.parse(JSON.parse(e))
  });
}
class ht extends Error {
  constructor(t, r) {
    super(t);
    S(this, "state");
    this.state = r;
  }
}
class Zu extends ht {
}
class na extends ht {
}
class we extends ht {
}
class re extends ht {
}
class ra extends ht {
  constructor(t, r, s) {
    super(t, s);
    S(this, "error");
    this.error = r;
  }
}
class qu extends ht {
  constructor(t, r, s) {
    super(t, s);
    S(this, "error");
    this.error = r;
  }
}
class sa extends ht {
  constructor(t, r, s) {
    super(t, s);
    S(this, "result");
    this.result = r;
  }
}
class Yr extends ht {
  constructor(t, r, s) {
    super(t, s);
    S(this, "result");
    this.result = r;
  }
}
function cn(n) {
  var t;
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  return ((t = e._zod) == null ? void 0 : t.def) || e._def || e.def;
}
function wr(n) {
  const e = cn(n);
  if (!e)
    return;
  const t = typeof e.typeName == "string" && e.typeName || typeof e.type == "string" && e.type;
  if (typeof t != "string")
    return;
  const r = t.toLowerCase();
  return r.startsWith("zod") ? r.slice(3) : r;
}
function jt(n) {
  return cn(n) ? wr(n) === "object" : !1;
}
function Ju(n) {
  return typeof n == "object" && n !== null && "input" in n && typeof n.input == "string";
}
const Bu = "http://json-schema.org/draft-07/schema#", zu = /* @__PURE__ */ new Set(["optional"]), Gu = /* @__PURE__ */ new Set([
  "brand",
  "branded",
  "catch",
  "default",
  "effects",
  "pipeline",
  "pipe",
  "prefault",
  "readonly",
  "refinement",
  "transform"
]), aa = {
  string: { type: "string" },
  number: { type: "number" },
  bigint: { type: "integer" },
  boolean: { type: "boolean" },
  date: { type: "string", format: "date-time" }
};
function ai(n) {
  return typeof n == "object" && n !== null && n.type === "object" && "properties" in n && "additionalProperties" in n;
}
function Vu(n) {
  const e = ii(n);
  if (e)
    return Array.isArray(e.required) || (e.required = []), typeof e.additionalProperties > "u" && (e.additionalProperties = !1), typeof e.$schema != "string" && (e.$schema = Bu), e;
}
function ii(n) {
  const e = ac(n);
  if (!e)
    return;
  const t = {}, r = [];
  for (const [s, a] of Object.entries(e)) {
    const { schema: i, optional: o } = Wu(a);
    if (!i)
      return;
    t[s] = i, o || r.push(s);
  }
  return { type: "object", properties: t, required: r, additionalProperties: !1 };
}
function Wu(n) {
  let e = Xr(n), t = !1;
  for (; zu.has(wr(e) ?? ""); ) {
    t = !0;
    const r = cn(e), s = Xr(r == null ? void 0 : r.innerType);
    if (!s || s === e)
      break;
    e = s;
  }
  return { schema: Le(e), optional: t };
}
function Le(n) {
  if (n === void 0)
    return;
  const e = Xr(n), t = wr(e), r = cn(e);
  if (t) {
    if (t in aa)
      return aa[t];
    switch (t) {
      case "object":
        return ii(e);
      case "array":
        return Hu(r);
      case "tuple":
        return Ku(r);
      case "union":
        return Yu(r);
      case "intersection":
        return Xu(r);
      case "literal":
        return rc(r);
      case "enum":
      case "nativeenum":
        return sc(r);
      case "record":
        return Qu(r);
      case "map":
        return ec(r);
      case "set":
        return tc(r);
      case "nullable":
        return nc(r);
      default:
        return;
    }
  }
}
function Hu(n) {
  const e = Le(oi(n, "element", "items", "type"));
  return e ? { type: "array", items: e } : void 0;
}
function Ku(n) {
  const e = ui(n == null ? void 0 : n.items).map((r) => Le(r)).filter(Boolean);
  if (!e.length)
    return;
  const t = {
    type: "array",
    items: e,
    minItems: e.length
  };
  return n != null && n.rest || (t.maxItems = e.length), t;
}
function Yu(n) {
  const e = ui((n == null ? void 0 : n.options) ?? (n == null ? void 0 : n.schemas)).map((t) => Le(t)).filter(Boolean);
  return e.length ? { anyOf: e } : void 0;
}
function Xu(n) {
  const e = Le(n == null ? void 0 : n.left), t = Le(n == null ? void 0 : n.right);
  return e && t ? { allOf: [e, t] } : void 0;
}
function Qu(n) {
  const e = Le((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "object", additionalProperties: e } : void 0;
}
function ec(n) {
  const e = Le((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "array", items: e } : void 0;
}
function tc(n) {
  const e = Le(n == null ? void 0 : n.valueType);
  return e ? { type: "array", items: e, uniqueItems: !0 } : void 0;
}
function nc(n) {
  const e = Le((n == null ? void 0 : n.innerType) ?? (n == null ? void 0 : n.type));
  return e ? { anyOf: [e, { type: "null" }] } : void 0;
}
function Xr(n) {
  let e = n;
  for (; Gu.has(wr(e) ?? ""); ) {
    const t = cn(e), r = (t == null ? void 0 : t.innerType) ?? (t == null ? void 0 : t.schema) ?? (t == null ? void 0 : t.base) ?? (t == null ? void 0 : t.type) ?? (t == null ? void 0 : t.wrapped) ?? (t == null ? void 0 : t.underlying);
    if (!r || r === e)
      return e;
    e = r;
  }
  return e;
}
function oi(n, ...e) {
  if (n) {
    for (const t of e)
      if (t in n && n[t] !== void 0)
        return n[t];
  }
}
function ui(n) {
  return Array.isArray(n) ? n : n === void 0 ? [] : [n];
}
function rc(n) {
  if (!n)
    return;
  const e = oi(n, "value", "literal");
  if (e !== void 0)
    return {
      const: e,
      type: e === null ? "null" : typeof e
    };
}
function sc(n) {
  if (n) {
    if (Array.isArray(n.values))
      return { enum: n.values };
    if (Array.isArray(n.options))
      return { enum: n.options };
    if (n.values && typeof n.values == "object")
      return { enum: Object.values(n.values) };
    if (n.enum && typeof n.enum == "object")
      return { enum: Object.values(n.enum) };
  }
}
function ac(n) {
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  if (e.shape && typeof e.shape == "object")
    return e.shape;
  if (typeof e.shape == "function")
    try {
      return e.shape();
    } catch {
      return;
    }
  const t = cn(e), r = t == null ? void 0 : t.shape;
  if (r && typeof r == "object")
    return r;
  if (typeof r == "function")
    try {
      return r();
    } catch {
      return;
    }
}
const ic = Uu, oc = Lu;
function ci(n) {
  return Vu(n);
}
function mr(n) {
  if (n = n.replace(/\s/g, "_"), n = n.replace(/[^a-zA-Z0-9]/g, "_"), n.length === 0)
    throw new Error("Tool name cannot be empty");
  return n;
}
function vs(n, e) {
  const t = (r) => JSON.parse(r);
  if (jt(n)) {
    const r = (a) => {
      const i = ci(n);
      if (i)
        return {
          schema: i,
          parser: (c) => n.parse(JSON.parse(c))
        };
      const o = a instanceof Error ? ` Upstream helper error: ${a.message}` : "";
      throw new re(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${o}`);
    };
    let s;
    try {
      s = ic({
        name: e,
        parameters: n,
        function: () => {
        },
        // empty function here to satisfy the OpenAI helper
        description: ""
      });
    } catch (a) {
      return r(a);
    }
    return ai(s.parameters) ? {
      schema: s.parameters,
      parser: s.$parseRaw
    } : r();
  } else if (typeof n == "object" && n !== null)
    return {
      schema: n,
      parser: t
    };
  throw new re("Input type is not a ZodObject or a valid JSON schema");
}
function ia(n) {
  if (n === "text")
    return "text";
  if (jt(n)) {
    const e = (r, s) => {
      const a = ci(n);
      if (a)
        return {
          type: (r == null ? void 0 : r.type) ?? "json_schema",
          name: (r == null ? void 0 : r.name) ?? "output",
          strict: (r == null ? void 0 : r.strict) ?? !1,
          schema: a
        };
      const i = s instanceof Error ? ` Upstream helper error: ${s.message}` : "";
      throw new re(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${i}`);
    };
    let t;
    try {
      t = oc(n, "output");
    } catch (r) {
      return e(void 0, r);
    }
    return ai(t.schema) ? {
      type: t.type,
      name: t.name,
      strict: t.strict || !1,
      schema: t.schema
    } : e(t);
  }
  return n;
}
function uc(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
}
var Yn = { exports: {} }, Pr, oa;
function cc() {
  if (oa) return Pr;
  oa = 1;
  var n = 1e3, e = n * 60, t = e * 60, r = t * 24, s = r * 7, a = r * 365.25;
  Pr = function(f, d) {
    d = d || {};
    var h = typeof f;
    if (h === "string" && f.length > 0)
      return i(f);
    if (h === "number" && isFinite(f))
      return d.long ? c(f) : o(f);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(f)
    );
  };
  function i(f) {
    if (f = String(f), !(f.length > 100)) {
      var d = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        f
      );
      if (d) {
        var h = parseFloat(d[1]), y = (d[2] || "ms").toLowerCase();
        switch (y) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return h * a;
          case "weeks":
          case "week":
          case "w":
            return h * s;
          case "days":
          case "day":
          case "d":
            return h * r;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return h * t;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return h * e;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return h * n;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return h;
          default:
            return;
        }
      }
    }
  }
  function o(f) {
    var d = Math.abs(f);
    return d >= r ? Math.round(f / r) + "d" : d >= t ? Math.round(f / t) + "h" : d >= e ? Math.round(f / e) + "m" : d >= n ? Math.round(f / n) + "s" : f + "ms";
  }
  function c(f) {
    var d = Math.abs(f);
    return d >= r ? l(f, d, r, "day") : d >= t ? l(f, d, t, "hour") : d >= e ? l(f, d, e, "minute") : d >= n ? l(f, d, n, "second") : f + " ms";
  }
  function l(f, d, h, y) {
    var v = d >= h * 1.5;
    return Math.round(f / h) + " " + y + (v ? "s" : "");
  }
  return Pr;
}
var Dr, ua;
function lc() {
  if (ua) return Dr;
  ua = 1;
  function n(e) {
    r.debug = r, r.default = r, r.coerce = l, r.disable = o, r.enable = a, r.enabled = c, r.humanize = cc(), r.destroy = f, Object.keys(e).forEach((d) => {
      r[d] = e[d];
    }), r.names = [], r.skips = [], r.formatters = {};
    function t(d) {
      let h = 0;
      for (let y = 0; y < d.length; y++)
        h = (h << 5) - h + d.charCodeAt(y), h |= 0;
      return r.colors[Math.abs(h) % r.colors.length];
    }
    r.selectColor = t;
    function r(d) {
      let h, y = null, v, x;
      function g(...m) {
        if (!g.enabled)
          return;
        const b = g, _ = Number(/* @__PURE__ */ new Date()), D = _ - (h || _);
        b.diff = D, b.prev = h, b.curr = _, h = _, m[0] = r.coerce(m[0]), typeof m[0] != "string" && m.unshift("%O");
        let T = 0;
        m[0] = m[0].replace(/%([a-zA-Z%])/g, (N, G) => {
          if (N === "%%")
            return "%";
          T++;
          const B = r.formatters[G];
          if (typeof B == "function") {
            const F = m[T];
            N = B.call(b, F), m.splice(T, 1), T--;
          }
          return N;
        }), r.formatArgs.call(b, m), (b.log || r.log).apply(b, m);
      }
      return g.namespace = d, g.useColors = r.useColors(), g.color = r.selectColor(d), g.extend = s, g.destroy = r.destroy, Object.defineProperty(g, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => y !== null ? y : (v !== r.namespaces && (v = r.namespaces, x = r.enabled(d)), x),
        set: (m) => {
          y = m;
        }
      }), typeof r.init == "function" && r.init(g), g;
    }
    function s(d, h) {
      const y = r(this.namespace + (typeof h > "u" ? ":" : h) + d);
      return y.log = this.log, y;
    }
    function a(d) {
      r.save(d), r.namespaces = d, r.names = [], r.skips = [];
      const h = (typeof d == "string" ? d : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean);
      for (const y of h)
        y[0] === "-" ? r.skips.push(y.slice(1)) : r.names.push(y);
    }
    function i(d, h) {
      let y = 0, v = 0, x = -1, g = 0;
      for (; y < d.length; )
        if (v < h.length && (h[v] === d[y] || h[v] === "*"))
          h[v] === "*" ? (x = v, g = y, v++) : (y++, v++);
        else if (x !== -1)
          v = x + 1, g++, y = g;
        else
          return !1;
      for (; v < h.length && h[v] === "*"; )
        v++;
      return v === h.length;
    }
    function o() {
      const d = [
        ...r.names,
        ...r.skips.map((h) => "-" + h)
      ].join(",");
      return r.enable(""), d;
    }
    function c(d) {
      for (const h of r.skips)
        if (i(d, h))
          return !1;
      for (const h of r.names)
        if (i(d, h))
          return !0;
      return !1;
    }
    function l(d) {
      return d instanceof Error ? d.stack || d.message : d;
    }
    function f() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return r.enable(r.load()), r;
  }
  return Dr = n, Dr;
}
var ca;
function dc() {
  return ca || (ca = 1, (function(n, e) {
    e.formatArgs = r, e.save = s, e.load = a, e.useColors = t, e.storage = i(), e.destroy = /* @__PURE__ */ (() => {
      let c = !1;
      return () => {
        c || (c = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), e.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function t() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let c;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (c = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(c[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function r(c) {
      if (c[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + c[0] + (this.useColors ? "%c " : " ") + "+" + n.exports.humanize(this.diff), !this.useColors)
        return;
      const l = "color: " + this.color;
      c.splice(1, 0, l, "color: inherit");
      let f = 0, d = 0;
      c[0].replace(/%[a-zA-Z%]/g, (h) => {
        h !== "%%" && (f++, h === "%c" && (d = f));
      }), c.splice(d, 0, l);
    }
    e.log = console.debug || console.log || (() => {
    });
    function s(c) {
      try {
        c ? e.storage.setItem("debug", c) : e.storage.removeItem("debug");
      } catch {
      }
    }
    function a() {
      let c;
      try {
        c = e.storage.getItem("debug") || e.storage.getItem("DEBUG");
      } catch {
      }
      return !c && typeof process < "u" && "env" in process && (c = process.env.DEBUG), c;
    }
    function i() {
      try {
        return localStorage;
      } catch {
      }
    }
    n.exports = lc()(e);
    const { formatters: o } = n.exports;
    o.j = function(c) {
      try {
        return JSON.stringify(c);
      } catch (l) {
        return "[UnexpectedJSONParseError]: " + l.message;
      }
    };
  })(Yn, Yn.exports)), Yn.exports;
}
var pc = dc();
const fc = /* @__PURE__ */ uc(pc);
function li() {
  return Sc();
}
function la(n) {
  const e = li();
  return typeof e < "u" && (e[n] === "true" || e[n] === "1");
}
const di = {
  get disabled() {
    return !0;
  }
}, pi = {
  get dontLogModelData() {
    return la("OPENAI_AGENTS_DONT_LOG_MODEL_DATA");
  },
  get dontLogToolData() {
    return la("OPENAI_AGENTS_DONT_LOG_TOOL_DATA");
  }
}, hc = pi.dontLogModelData, mc = pi.dontLogToolData;
function fi(n = "openai-agents") {
  return {
    namespace: n,
    debug: fc(n),
    error: console.error,
    warn: console.warn,
    dontLogModelData: hc,
    dontLogToolData: mc
  };
}
const j = fi("openai-agents:core"), da = 20;
function ft(n) {
  if (n == null)
    return String(n);
  if (hi(n))
    return _n(new Uint8Array(n));
  if (Hn(n)) {
    const e = n;
    return _n(new Uint8Array(e.buffer, e.byteOffset, e.byteLength));
  }
  if (typeof n == "string")
    return n;
  if (typeof n == "object")
    try {
      return JSON.stringify(n, yc);
    } catch {
      return "[object with circular references]";
    }
  return String(n);
}
function hi(n) {
  if (n instanceof ArrayBuffer)
    return !0;
  const e = globalThis.SharedArrayBuffer;
  return !!(e && n instanceof e);
}
function Hn(n) {
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView(n);
}
function br(n) {
  return typeof n == "object" && n !== null && n.type === "Buffer" && Array.isArray(n.data);
}
function ws(n) {
  const e = globalThis.Buffer;
  return !!(e && typeof e.isBuffer == "function" && e.isBuffer(n));
}
function _n(n) {
  if (n.length === 0)
    return "[byte array (0 bytes)]";
  const e = Math.min(n.length, da), t = [];
  for (let a = 0; a < e; a++)
    t.push(gc(n[a]));
  const r = n.length > da ? " " : "";
  return `[byte array ${t.join(" ")}${r} (${n.length} bytes)]`;
}
function gc(n) {
  return `0x${n.toString(16).padStart(2, "0")}`;
}
function yc(n, e) {
  if (hi(e))
    return _n(new Uint8Array(e));
  if (Hn(e)) {
    const t = e;
    return _n(new Uint8Array(t.buffer, t.byteOffset, t.byteLength));
  }
  return br(e) ? _n(Uint8Array.from(e.data)) : e;
}
function _c(n, e) {
  return `An error occurred while running the tool. Please try again. Error: ${e instanceof Error ? e.toString() : String(e)}`;
}
function Qr(n) {
  const e = n.name ? mr(n.name) : mr(n.execute.name), t = typeof n.errorFunction > "u" ? _c : n.errorFunction;
  if (!e)
    throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");
  const r = n.strict ?? !0;
  if (!r && jt(n.parameters))
    throw new re("Strict mode is required for Zod parameters");
  const { parser: s, schema: a } = vs(n.parameters, e);
  async function i(f, d, h) {
    const [y, v] = await gs(() => s(d));
    if (y !== null)
      throw j.dontLogToolData ? j.debug(`Invalid JSON input for tool ${e}`) : j.debug(`Invalid JSON input for tool ${e}: ${d}`), new we("Invalid JSON input for tool");
    j.dontLogToolData ? j.debug(`Invoking tool ${e}`) : j.debug(`Invoking tool ${e} with input ${d}`);
    const x = await n.execute(v, f, h), g = ft(x);
    return j.dontLogToolData ? j.debug(`Tool ${e} completed`) : j.debug(`Tool ${e} returned: ${g}`), x;
  }
  async function o(f, d, h) {
    return i(f, d, h).catch((y) => {
      if (t) {
        const v = xn();
        return v == null || v.setError({
          message: "Error running tool (non-fatal)",
          data: {
            tool_name: e,
            error: y.toString()
          }
        }), t(f, y);
      }
      throw y;
    });
  }
  const c = typeof n.needsApproval == "function" ? n.needsApproval : async () => typeof n.needsApproval == "boolean" ? n.needsApproval : !1, l = typeof n.isEnabled == "function" ? async (f, d) => {
    const h = n.isEnabled;
    return !!await h({ runContext: f, agent: d });
  } : async () => typeof n.isEnabled == "boolean" ? n.isEnabled : !0;
  return {
    type: "function",
    name: e,
    description: n.description,
    parameters: a,
    strict: r,
    invoke: o,
    needsApproval: c,
    isEnabled: l
  };
}
w({
  name: p(),
  description: p().optional(),
  inputSchema: w({
    type: I("object"),
    properties: te(p(), W()),
    required: J(p()),
    additionalProperties: Nt()
  })
});
const Mr = {}, jr = {}, vc = ({ server: n, agent: e }) => n.toolFilter && typeof n.toolFilter == "function" && e ? `${n.name}:${e.name}` : n.name;
async function wc({ server: n, convertSchemasToStrict: e, runContext: t, agent: r, generateMCPToolCacheKey: s }) {
  const a = (s || vc)({
    server: n,
    agent: r,
    runContext: t
  });
  if (n.cacheToolsList && Mr[a])
    return Mr[a].map((o) => pa(o, n, e));
  const i = async (o) => {
    const c = await n.listTools();
    let l = c;
    if (t && r) {
      const d = { runContext: t, agent: r, serverName: n.name }, h = [];
      for (const y of c) {
        const v = n.toolFilter;
        if (v)
          if (typeof v == "function") {
            if (!await v(d, y)) {
              j.debug(`MCP Tool (server: ${n.name}, tool: ${y.name}) is blocked by the callable filter.`);
              continue;
            }
          } else {
            const x = v.allowedToolNames ?? [], g = v.blockedToolNames ?? [];
            if (x.length > 0 || g.length > 0) {
              const m = x.length > 0 ? x.includes(y.name) : !0, b = g.length > 0 ? g.includes(y.name) : !1;
              if (!m || b) {
                b ? j.debug(`MCP Tool (server: ${n.name}, tool: ${y.name}) is blocked by the static filter.`) : m || j.debug(`MCP Tool (server: ${n.name}, tool: ${y.name}) is not allowed by the static filter.`);
                continue;
              }
            }
          }
        h.push(y);
      }
      l = h;
    }
    o && (o.spanData.result = l.map((d) => d.name));
    const f = l.map((d) => pa(d, n, e));
    return n.cacheToolsList && (Mr[a] = l, jr[n.name] || (jr[n.name] = /* @__PURE__ */ new Set()), jr[n.name].add(a)), f;
  };
  return un() ? Rl(i, {
    data: { server: n.name }
  }) : i();
}
async function bc(n, e, t, r = !1) {
  const s = Array.isArray(n) ? {
    mcpServers: n,
    runContext: e,
    agent: t,
    convertSchemasToStrict: r
  } : n, { mcpServers: a, convertSchemasToStrict: i = !1, runContext: o, agent: c, generateMCPToolCacheKey: l } = s, f = [], d = /* @__PURE__ */ new Set();
  for (const h of a) {
    const y = await wc({
      server: h,
      convertSchemasToStrict: i,
      runContext: o,
      agent: c,
      generateMCPToolCacheKey: l
    }), x = [...new Set(y.map((g) => g.name))].filter((g) => d.has(g));
    if (x.length > 0)
      throw new re(`Duplicate tool names found across MCP servers: ${x.join(", ")}`);
    for (const g of y)
      d.add(g.name), f.push(g);
  }
  return f;
}
function pa(n, e, t) {
  var i, o, c, l;
  async function r(f, d) {
    let h = {};
    typeof f == "string" && f ? h = JSON.parse(f) : typeof f == "object" && f != null && (h = f);
    const y = xn();
    y && (y.spanData.mcp_data = { server: e.name });
    const v = await e.callTool(n.name, h);
    return v.length === 1 ? v[0] : v;
  }
  const s = {
    ...n.inputSchema,
    type: ((i = n.inputSchema) == null ? void 0 : i.type) ?? "object",
    properties: ((o = n.inputSchema) == null ? void 0 : o.properties) ?? {},
    required: ((c = n.inputSchema) == null ? void 0 : c.required) ?? [],
    additionalProperties: ((l = n.inputSchema) == null ? void 0 : l.additionalProperties) ?? !1
  };
  if (t || s.additionalProperties === !0)
    try {
      const f = Ic(s);
      return Qr({
        name: n.name,
        description: n.description || "",
        parameters: f,
        strict: !0,
        execute: r
      });
    } catch (f) {
      j.warn(`Error converting MCP schema to strict mode: ${f}`);
    }
  const a = {
    ...s,
    additionalProperties: !0
  };
  return Qr({
    name: n.name,
    description: n.description || "",
    parameters: a,
    strict: !1,
    execute: r
  });
}
function Ic(n) {
  const e = {
    ...n,
    additionalProperties: !1
  };
  return e.required || (e.required = []), e;
}
function Sc() {
  return {};
}
var zt, wt;
class Ir {
  constructor() {
    R(this, zt, new EventTarget());
    R(this, wt, /* @__PURE__ */ new Map());
  }
  on(e, t) {
    const r = e;
    let s = u(this, wt).get(r);
    s || (s = /* @__PURE__ */ new Map(), u(this, wt).set(r, s));
    let a = s.get(t);
    a || (a = /* @__PURE__ */ new Set(), s.set(t, a));
    const i = ((o) => t(...o.detail ?? []));
    return a.add(i), u(this, zt).addEventListener(r, i), this;
  }
  off(e, t) {
    const r = e, s = u(this, wt).get(r), a = s == null ? void 0 : s.get(t);
    if (a != null && a.size) {
      for (const i of a)
        u(this, zt).removeEventListener(r, i);
      s == null || s.delete(t), (s == null ? void 0 : s.size) === 0 && u(this, wt).delete(r);
    }
    return this;
  }
  emit(e, ...t) {
    const r = new CustomEvent(e, { detail: t });
    return u(this, zt).dispatchEvent(r);
  }
  once(e, t) {
    const r = (...s) => {
      this.off(e, r), t(...s);
    };
    return this.on(e, r), this;
  }
}
zt = new WeakMap(), wt = new WeakMap();
const mi = () => typeof crypto < "u" && crypto.randomUUID ? crypto.randomUUID() : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(n) {
  const e = Math.random() * 16 | 0;
  return (n === "x" ? e : e & 3 | 8).toString(16);
}), xc = class {
  constructor() {
  }
  pipeTo(e, t) {
  }
  pipeThrough(e, t) {
  }
}, Tc = globalThis.ReadableStream, kc = globalThis.TransformStream;
class Ac {
  constructor() {
    S(this, "context", null);
  }
  run(e, t) {
    return this.context = e, t();
  }
  getStore() {
    return this.context;
  }
  enterWith(e) {
    this.context = e;
  }
}
class Cc {
  constructor() {
  }
  setTimeout(e, t) {
    const r = setTimeout(e, t);
    return r.ref = typeof r.ref == "function" ? r.ref : () => r, r.unref = typeof r.unref == "function" ? r.unref : () => r, r.hasRef = typeof r.hasRef == "function" ? r.hasRef : () => !0, r.refresh = typeof r.refresh == "function" ? r.refresh : () => r, r;
  }
  clearTimeout(e) {
    window.clearTimeout(e);
  }
}
const Oc = new Cc();
class bs {
  on(e, t) {
    return this.eventEmitter.on(e, t), this.eventEmitter;
  }
  off(e, t) {
    return this.eventEmitter.off(e, t), this.eventEmitter;
  }
  emit(e, ...t) {
    return this.eventEmitter.emit(e, ...t);
  }
  once(e, t) {
    return this.eventEmitter.once(e, t), this.eventEmitter;
  }
}
class Ec extends bs {
  constructor() {
    super(...arguments);
    S(this, "eventEmitter", new Ir());
  }
}
class Nc extends bs {
  constructor() {
    super(...arguments);
    S(this, "eventEmitter", new Ir());
  }
}
const Rc = "OPENAI_DEFAULT_MODEL";
function Sr(n) {
  return n.startsWith("gpt-5-chat") ? !1 : n.startsWith("gpt-5");
}
function gi() {
  return Sr(yi());
}
function yi() {
  var e;
  return ((e = li()[Rc]) == null ? void 0 : e.toLowerCase()) ?? "gpt-4.1";
}
function Pc(n) {
  const e = yi();
  return Sr(e) ? {
    // We chose "low" instead of "minimal" because some of the built-in tools
    // (e.g., file search, image generation, etc.) do not support "minimal"
    // If you want to use "minimal" reasoning effort, you can pass your own model settings
    reasoning: { effort: "low" },
    text: { verbosity: "low" }
  } : {};
}
function _i(n) {
  return JSON.stringify({ assistant: n.name });
}
function Dc(n) {
  return `transfer_to_${mr(n.name)}`;
}
function Mc(n) {
  return `Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription ?? ""}`;
}
class vi {
  constructor(e, t) {
    /**
     * The name of the tool that represents the handoff.
     */
    S(this, "toolName");
    /**
     * The description of the tool that represents the handoff.
     */
    S(this, "toolDescription");
    /**
     * The JSON schema for the handoff input. Can be empty if the handoff does not take an input
     */
    S(this, "inputJsonSchema", {
      type: "object",
      properties: {},
      required: [],
      additionalProperties: !1
    });
    /**
     * Whether the input JSON schema is in strict mode. We **strongly** recommend setting this to
     * true, as it increases the likelihood of correct JSON input.
     */
    S(this, "strictJsonSchema", !0);
    /**
     * The function that invokes the handoff. The parameters passed are:
     * 1. The handoff run context
     * 2. The arguments from the LLM, as a JSON string. Empty string if inputJsonSchema is empty.
     *
     * Must return an agent
     */
    S(this, "onInvokeHandoff");
    /**
     * The name of the agent that is being handed off to.
     */
    S(this, "agentName");
    /**
     * A function that filters the inputs that are passed to the next agent. By default, the new agent
     * sees the entire conversation history. In some cases, you may want to filter inputs e.g. to
     * remove older inputs, or remove tools from existing inputs.
     *
     * The function will receive the entire conversation hisstory so far, including the input item
     * that triggered the handoff and a tool call output item representing the handoff tool's output.
     *
     * You are free to modify the input history or new items as you see fit. The next agent that runs
     * will receive `handoffInputData.allItems
     */
    S(this, "inputFilter");
    /**
     * The agent that is being handed off to.
     */
    S(this, "agent");
    S(this, "isEnabled", async () => !0);
    this.agentName = e.name, this.onInvokeHandoff = t, this.toolName = Dc(e), this.toolDescription = Mc(e), this.agent = e;
  }
  /**
   * Returns a function tool definition that can be used to invoke the handoff.
   */
  getHandoffAsFunctionTool() {
    return {
      type: "function",
      name: this.toolName,
      description: this.toolDescription,
      parameters: this.inputJsonSchema,
      strict: this.strictJsonSchema
    };
  }
}
function wi(n, e = {}) {
  let t;
  const r = !!e.onHandoff, s = !!e.inputType;
  if (!(r === s))
    throw new re("You must provide either both `onHandoff` and `inputType` or neither.");
  async function i(c, l) {
    var f;
    if (t) {
      if (!l)
        throw Xe({
          message: `Handoff function expected non empty input but got: ${l}`,
          data: {
            details: "input is empty"
          }
        }), new we("Handoff function expected non empty input");
      try {
        const d = await t(l);
        e.onHandoff && await e.onHandoff(c, d);
      } catch (d) {
        throw Xe({
          message: "Invalid JSON provided",
          data: {}
        }), j.dontLogToolData || j.error(`Invalid JSON when parsing: ${l}. Error: ${d}`), new we("Invalid JSON provided");
      }
    } else
      await ((f = e.onHandoff) == null ? void 0 : f.call(e, c));
    return n;
  }
  const o = new vi(n, i);
  if (typeof e.isEnabled == "function") {
    const c = e.isEnabled;
    o.isEnabled = async ({ runContext: l, agent: f }) => !!await c({ runContext: l, agent: f });
  } else typeof e.isEnabled == "boolean" && (o.isEnabled = async () => e.isEnabled);
  if (e.inputType) {
    const c = vs(e.inputType, o.toolName);
    o.inputJsonSchema = c.schema, o.strictJsonSchema = !0, t = c.parser;
  }
  return e.toolNameOverride && (o.toolName = e.toolNameOverride), e.toolDescriptionOverride && (o.toolDescription = e.toolDescriptionOverride), e.inputFilter && (o.inputFilter = e.inputFilter), o;
}
function jc(n) {
  return n instanceof vi ? n : wi(n);
}
function bi(n) {
  if (n.type !== "message" || n.role !== "assistant")
    return;
  const e = n.content[n.content.length - 1];
  if (e.type === "output_text")
    return e.text;
}
function $c(n) {
  return n.output.length === 0 ? "" : bi(n.output[n.output.length - 1]) || "";
}
const es = /* @__PURE__ */ new WeakMap();
function Fc(n, e) {
  n && es.set(n, e);
}
function Lc(n) {
  const e = es.get(n);
  return e && es.delete(n), e;
}
const Uc = w({ input: p() }), Jt = class Jt extends Ec {
  constructor(t) {
    super();
    S(this, "name");
    S(this, "instructions");
    S(this, "prompt");
    S(this, "handoffDescription");
    S(this, "handoffs");
    S(this, "model");
    S(this, "modelSettings");
    S(this, "tools");
    S(this, "mcpServers");
    S(this, "inputGuardrails");
    S(this, "outputGuardrails");
    S(this, "outputType", "text");
    S(this, "toolUseBehavior");
    S(this, "resetToolChoice");
    S(this, "_toolsExplicitlyConfigured");
    if (typeof t.name != "string" || t.name.trim() === "")
      throw new re("Agent must have a name.");
    if (this.name = t.name, this.instructions = t.instructions ?? Jt.DEFAULT_MODEL_PLACEHOLDER, this.prompt = t.prompt, this.handoffDescription = t.handoffDescription ?? "", this.handoffs = t.handoffs ?? [], this.model = t.model ?? "", this.modelSettings = t.modelSettings ?? Pc(), this.tools = t.tools ?? [], this._toolsExplicitlyConfigured = t.tools !== void 0, this.mcpServers = t.mcpServers ?? [], this.inputGuardrails = t.inputGuardrails ?? [], this.outputGuardrails = t.outputGuardrails ?? [], t.outputType && (this.outputType = t.outputType), this.toolUseBehavior = t.toolUseBehavior ?? "run_llm_again", this.resetToolChoice = t.resetToolChoice ?? !0, // The user sets a non-default model
    t.model !== void 0 && // The default model is gpt-5
    gi() && // However, the specified model is not a gpt-5 model
    (typeof t.model != "string" || !Sr(t.model)) && // The model settings are not customized for the specified model
    t.modelSettings === void 0 && (this.modelSettings = {}), (t.handoffOutputTypeWarningEnabled === void 0 || t.handoffOutputTypeWarningEnabled) && this.handoffs && this.outputType) {
      const r = /* @__PURE__ */ new Set([JSON.stringify(this.outputType)]);
      for (const s of this.handoffs)
        "outputType" in s && s.outputType ? r.add(JSON.stringify(s.outputType)) : "agent" in s && s.agent.outputType && r.add(JSON.stringify(s.agent.outputType));
      r.size > 1 && j.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`);
    }
  }
  /**
   * Create an Agent with handoffs and automatically infer the union type for TOutput from the handoff agents' output types.
   */
  static create(t) {
    return new Jt({
      ...t,
      handoffs: t.handoffs,
      outputType: t.outputType,
      handoffOutputTypeWarningEnabled: !1
    });
  }
  /**
   * Output schema name.
   */
  get outputSchemaName() {
    if (this.outputType === "text")
      return "text";
    if (jt(this.outputType))
      return "ZodOutput";
    if (typeof this.outputType == "object")
      return this.outputType.name;
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Makes a copy of the agent, with the given arguments changed. For example, you could do:
   *
   * ```
   * const newAgent = agent.clone({ instructions: 'New instructions' })
   * ```
   *
   * @param config - A partial configuration to change.
   * @returns A new agent with the given changes.
   */
  clone(t) {
    return new Jt({
      ...this,
      ...t
    });
  }
  /**
   * Transform this agent into a tool, callable by other agents.
   *
   * This is different from handoffs in two ways:
   * 1. In handoffs, the new agent receives the conversation history. In this tool, the new agent
   *    receives generated input.
   * 2. In handoffs, the new agent takes over the conversation. In this tool, the new agent is
   *    called as a tool, and the conversation is continued by the original agent.
   *
   * @param options - Options for the tool.
   * @returns A tool that runs the agent and returns the output text.
   */
  asTool(t) {
    const { toolName: r, toolDescription: s, customOutputExtractor: a, needsApproval: i, runConfig: o, runOptions: c, isEnabled: l, onStream: f } = t, d = /* @__PURE__ */ new Map(), h = async (x) => {
      const g = d.get(x.event.type), m = d.get("*"), b = [
        ...f ? [f] : [],
        ...g ? Array.from(g) : [],
        ...m ? Array.from(m) : []
      ];
      await Promise.allSettled(b.map((_) => Promise.resolve().then(() => _(x))));
    }, v = {
      ...Qr({
        name: r ?? mr(this.name),
        description: s ?? "",
        parameters: Uc,
        strict: !0,
        needsApproval: i,
        isEnabled: l,
        execute: async (x, g, m) => {
          var B;
          if (!Ju(x))
            throw new we("Agent tool called with invalid input");
          const b = new gd(o ?? {}), _ = typeof f == "function" || d.size > 0, D = _ ? await b.run(this, x.input, {
            context: g,
            ...c ?? {},
            stream: !0
          }) : await b.run(this, x.input, {
            context: g,
            ...c ?? {}
          }), T = {
            agentName: this.name,
            // Tool calls should carry IDs, but direct invocation or provider quirks can omit it, so keep this optional.
            toolCallId: (B = m == null ? void 0 : m.toolCall) == null ? void 0 : B.callId
          };
          if (_) {
            const F = D;
            for await (const ae of F)
              await h({
                event: ae,
                ...T
              });
            await F.completed;
          }
          const A = D, N = typeof this.toolUseBehavior == "object" && this.toolUseBehavior !== null && "stopAtToolNames" in this.toolUseBehavior;
          typeof a != "function" && N && j.debug(`You're passing the agent (name: ${this.name}) with toolUseBehavior.stopAtToolNames configured as a tool to a different agent; this may not work as you expect. You may want to have a wrapper function tool to consistently return the final output.`);
          const G = typeof a == "function" ? await a(A) : $c(A.rawResponses[A.rawResponses.length - 1]);
          return m != null && m.toolCall && Fc(m.toolCall, A), G;
        }
      }),
      on: (x, g) => {
        const m = d.get(x) ?? /* @__PURE__ */ new Set();
        return m.add(g), d.set(x, m), v;
      }
    };
    return v;
  }
  /**
   * Returns the system prompt for the agent.
   *
   * If the agent has a function as its instructions, this function will be called with the
   * runContext and the agent instance.
   */
  async getSystemPrompt(t) {
    return typeof this.instructions == "function" ? await this.instructions(t, this) : this.instructions;
  }
  /**
   * Returns the prompt template for the agent, if defined.
   *
   * If the agent has a function as its prompt, this function will be called with the
   * runContext and the agent instance.
   */
  async getPrompt(t) {
    return typeof this.prompt == "function" ? await this.prompt(t, this) : this.prompt;
  }
  /**
   * Fetches the available tools from the MCP servers.
   * @returns the MCP powered tools
   */
  async getMcpTools(t) {
    return this.mcpServers.length > 0 ? bc({
      mcpServers: this.mcpServers,
      runContext: t,
      agent: this,
      convertSchemasToStrict: !1
    }) : [];
  }
  /**
   * ALl agent tools, including the MCPl and function tools.
   *
   * @returns all configured tools
   */
  async getAllTools(t) {
    const r = await this.getMcpTools(t), s = [];
    for (const a of this.tools) {
      if (a.type === "function") {
        const i = a.isEnabled;
        if (!(typeof i == "function" ? await i(t, this) : typeof i == "boolean" ? i : !0))
          continue;
      }
      s.push(a);
    }
    return [...r, ...s];
  }
  hasExplicitToolConfig() {
    return this._toolsExplicitlyConfigured;
  }
  /**
   * Returns the handoffs that should be exposed to the model for the current run.
   *
   * Handoffs that provide an `isEnabled` function returning `false` are omitted.
   */
  async getEnabledHandoffs(t) {
    var a;
    const r = ((a = this.handoffs) == null ? void 0 : a.map((i) => jc(i))) ?? [], s = [];
    for (const i of r)
      await i.isEnabled({ runContext: t, agent: this }) && s.push(i);
    return s;
  }
  /**
   * Processes the final output of the agent.
   *
   * @param output - The output of the agent.
   * @returns The parsed out.
   */
  processFinalOutput(t) {
    if (this.outputType === "text")
      return t;
    if (typeof this.outputType == "object") {
      const r = JSON.parse(t);
      return jt(this.outputType) ? this.outputType.parse(r) : r;
    }
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Returns a JSON representation of the agent, which is serializable.
   *
   * @returns A JSON object containing the agent's name.
   */
  toJSON() {
    return {
      name: this.name
    };
  }
};
S(Jt, "DEFAULT_MODEL_PLACEHOLDER", "");
let nt = Jt;
function fa({ name: n, execute: e, runInParallel: t = !0 }) {
  return {
    type: "input",
    name: n,
    runInParallel: t,
    guardrailFunction: e,
    async run(r) {
      return {
        guardrail: { type: "input", name: n },
        output: await e(r)
      };
    }
  };
}
function ts({ name: n, execute: e }) {
  return {
    type: "output",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "output", name: n },
        agent: t.agent,
        agentOutput: t.agentOutput,
        output: await e(t)
      };
    }
  };
}
function Zc() {
  throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.");
}
const de = w({
  /**
   * Additional optional provider specific data. Used for custom functionality or model provider
   * specific fields.
   */
  providerData: te(p(), W()).optional()
}), Ee = de.extend({
  /**
   * An ID to identify the item. This is optional by default. If a model provider absolutely
   * requires this field, it will be validated on the model level.
   */
  id: p().optional()
}), qc = de.extend({
  type: I("refusal"),
  /**
   * The refusal explanation from the model.
   */
  refusal: p()
}), Jc = de.extend({
  type: I("output_text"),
  /**
   * The text output from the model.
   */
  text: p()
}), Is = de.extend({
  type: I("input_text"),
  /**
   * A text input for example a message from a user
   */
  text: p()
}), Bc = de.extend({
  type: I("reasoning_text"),
  /**
   * A text input for example a message from a user
   */
  text: p()
}), Ii = de.extend({
  type: I("input_image"),
  /**
   * The image input to the model. Could be provided inline (`image`), as a URL, or by reference to a
   * previously uploaded OpenAI file.
   */
  image: p().or(w({ id: p().describe("OpenAI file ID") })).describe("Either base64 encoded image data, a data URL, or an object with a file ID.").optional(),
  /**
   * Controls the level of detail requested for image understanding tasks.
   * Future models may add new values, therefore this accepts any string.
   */
  detail: p().optional()
}), Si = de.extend({
  type: I("input_file"),
  /**
   * The file input to the model. Could be raw data, a URL, or an OpenAI file ID.
   */
  file: p().describe("Either base64 encoded file data or a publicly accessible file URL").or(w({ id: p().describe("OpenAI file ID") })).or(w({ url: p().describe("Publicly accessible file URL") })).describe("Contents of the file or an object with a file ID.").optional(),
  /**
   * Optional filename metadata when uploading file data inline.
   */
  filename: p().optional()
}), xi = de.extend({
  type: I("audio"),
  /**
   * The audio input to the model. Could be base64 encoded audio data or an object with a file ID.
   */
  audio: p().or(w({
    id: p()
  })).describe("Base64 encoded audio data or file id"),
  /**
   * The format of the audio.
   */
  format: p().nullable().optional(),
  /**
   * The transcript of the audio.
   */
  transcript: p().nullable().optional()
}), zc = de.extend({
  type: I("image"),
  /**
   * The image input to the model. Could be base64 encoded image data or an object with a file ID.
   */
  image: p().describe("Base64 encoded image data")
}), Gc = de.extend({
  type: I("text"),
  /**
   * The text output from the model.
   */
  text: p()
}), Vc = w({
  data: tt([p(), Xa(Uint8Array)]).describe("Base64 image data, or raw bytes that will be base64 encoded automatically."),
  mediaType: p().optional()
}), Wc = w({
  url: p().describe("Publicly accessible URL pointing to the image content")
}), Hc = w({
  fileId: p().describe("OpenAI file ID referencing uploaded image content")
}), Kc = tt([Vc, Wc, Hc]).describe("Inline image data or references to uploaded content."), Yc = w({
  data: tt([p(), Xa(Uint8Array)]).describe("Base64 encoded file data, or raw bytes that will be encoded automatically."),
  mediaType: p().describe("IANA media type describing the file contents"),
  filename: p().describe("Filename associated with the inline data")
}), Xc = w({
  url: p().describe("Publicly accessible URL for the file content"),
  filename: p().optional()
}), Qc = w({
  id: p().describe("OpenAI file ID referencing uploaded content"),
  filename: p().optional()
}), el = tt([
  p().describe("Existing data URL or base64 string"),
  Yc,
  Xc,
  Qc
]).describe("Inline data (with metadata) or references pointing to file contents."), tl = (...n) => p(), nl = de.extend({
  type: I("image"),
  /**
   * Inline image content or a reference to an uploaded file. Accepts a URL/data URL string or an
   * object describing the data/url/fileId source.
   */
  image: p().or(Kc).optional(),
  /**
   * Controls the requested level of detail for vision models.
   * Use a string to avoid constraining future model capabilities.
   */
  detail: tl("low", "high", "auto").optional()
}), rl = de.extend({
  type: I("file"),
  /**
   * File output reference. Provide either a string (data URL / base64), a data object (requires
   * mediaType + filename), or an object pointing to an uploaded file/URL.
   */
  file: el
}), sl = de.extend({
  type: I("computer_screenshot"),
  /**
   * A base64 encoded image data or a URL representing the screenshot.
   */
  data: p().describe("Base64 encoded image data or URL")
}), al = ge("type", [
  w({ type: I("screenshot") }),
  w({
    type: I("click"),
    x: E(),
    y: E(),
    button: ce(["left", "right", "wheel", "back", "forward"])
  }),
  w({
    type: I("double_click"),
    x: E(),
    y: E()
  }),
  w({
    type: I("scroll"),
    x: E(),
    y: E(),
    scroll_x: E(),
    scroll_y: E()
  }),
  w({
    type: I("type"),
    text: p()
  }),
  w({ type: I("wait") }),
  w({
    type: I("move"),
    x: E(),
    y: E()
  }),
  w({
    type: I("keypress"),
    keys: J(p())
  }),
  w({
    type: I("drag"),
    path: J(w({ x: E(), y: E() }))
  })
]), il = ge("type", [
  Jc,
  qc,
  xi,
  zc
]), Ss = Ee.extend({
  /**
   * Any item without a type is treated as a message
   */
  type: I("message").optional()
}), xr = Ss.extend({
  /**
   * Representing a message from the assistant (i.e. the model)
   */
  role: I("assistant"),
  /**
   * The status of the message.
   */
  status: ce(["in_progress", "completed", "incomplete"]),
  /**
   * The content of the message.
   */
  content: J(il)
}), ol = ge("type", [
  Is,
  Ii,
  Si,
  xi
]), Ti = Ss.extend({
  // type: z.literal('message'),
  /**
   * Representing a message from the user
   */
  role: I("user"),
  /**
   * The content of the message.
   */
  content: J(ol).or(p())
}), ki = Ss.extend({
  // type: z.literal('message'),
  /**
   * Representing a system message to the user
   */
  role: I("system"),
  /**
   * The content of the message.
   */
  content: p()
});
ge("role", [
  ki,
  xr,
  Ti
]);
const In = Ee.extend({
  type: I("hosted_tool_call"),
  /**
   * The name of the hosted tool. For example `web_search_call` or `file_search_call`
   */
  name: p().describe("The name of the hosted tool"),
  /**
   * The arguments of the hosted tool call.
   */
  arguments: p().describe("The arguments of the hosted tool call").optional(),
  /**
   * The status of the tool call.
   */
  status: p().optional(),
  /**
   * The primary output of the tool call. Additional output might be in the `providerData` field.
   */
  output: p().optional()
}), Sn = Ee.extend({
  type: I("function_call"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: p().describe("The ID of the tool call"),
  /**
   * The name of the function.
   */
  name: p().describe("The name of the function"),
  /**
   * The status of the function call.
   */
  status: ce(["in_progress", "completed", "incomplete"]).optional(),
  /**
   * The arguments of the function call.
   */
  arguments: p()
}), ul = ge("type", [
  Gc,
  nl,
  rl
]), cl = ge("type", [
  Is,
  Ii,
  Si
]), gr = Ee.extend({
  type: I("function_call_result"),
  /**
   * The name of the tool that was called
   */
  name: p().describe("The name of the tool"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: p().describe("The ID of the tool call"),
  /**
   * The status of the tool call.
   */
  status: ce(["in_progress", "completed", "incomplete"]),
  /**
   * The output of the tool call.
   */
  output: tt([
    p(),
    ul,
    J(cl)
  ]).describe("Output returned by the tool call. Supports plain strings, legacy ToolOutput items, or structured input_* items.")
}), xs = Ee.extend({
  type: I("computer_call"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: p().describe("The ID of the computer call"),
  /**
   * The status of the computer call.
   */
  status: ce(["in_progress", "completed", "incomplete"]),
  /**
   * The action to be performed by the computer.
   */
  action: al
}), ll = Ee.extend({
  type: I("computer_call_result"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: p().describe("The ID of the computer call"),
  /**
   * The output of the computer call.
   */
  output: sl
}), dl = w({
  commands: J(p()),
  timeoutMs: E().int().min(0).optional(),
  maxOutputLength: E().int().min(0).optional()
}), Tr = Ee.extend({
  type: I("shell_call"),
  callId: p(),
  status: ce(["in_progress", "completed", "incomplete"]).optional(),
  action: dl
}), pl = ge("type", [
  w({ type: I("timeout") }),
  w({
    type: I("exit"),
    exitCode: E().int().nullable()
  })
]), fl = w({
  stdout: p(),
  stderr: p(),
  outcome: pl
}).passthrough(), Ai = Ee.extend({
  type: I("shell_call_output"),
  callId: p(),
  maxOutputLength: E().optional(),
  output: J(fl)
}), hl = w({
  type: I("create_file"),
  path: p(),
  diff: p()
}), ml = w({
  type: I("update_file"),
  path: p(),
  diff: p()
}), gl = w({
  type: I("delete_file"),
  path: p()
}), yl = ge("type", [
  hl,
  ml,
  gl
]), kr = Ee.extend({
  type: I("apply_patch_call"),
  callId: p(),
  status: ce(["in_progress", "completed"]),
  operation: yl
}), Ci = Ee.extend({
  type: I("apply_patch_call_output"),
  callId: p(),
  status: ce(["completed", "failed"]),
  output: p().optional()
}), _l = ge("type", [
  xs,
  Tr,
  kr,
  Sn,
  In
]), Ts = de.extend({
  id: p().optional(),
  type: I("reasoning"),
  /**
   * The user facing representation of the reasoning. Additional information might be in the `providerData` field.
   */
  content: J(Is),
  /**
   * The raw reasoning text from the model.
   */
  rawContent: J(Bc).optional()
}), Oi = Ee.extend({
  type: I("unknown")
}), ks = ge("type", [
  xr,
  In,
  Sn,
  xs,
  Tr,
  kr,
  gr,
  Ai,
  Ci,
  Ts,
  Oi
]), vl = tt([
  Ti,
  xr,
  ki,
  In,
  Sn,
  xs,
  Tr,
  kr,
  gr,
  ll,
  Ai,
  Ci,
  Ts,
  Oi
]), wl = w({
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: te(p(), E()).optional(),
  outputTokensDetails: te(p(), E()).optional()
}), bl = w({
  requests: E().optional(),
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: tt([
    te(p(), E()),
    J(te(p(), E()))
  ]).optional(),
  outputTokensDetails: tt([
    te(p(), E()),
    J(te(p(), E()))
  ]).optional(),
  requestUsageEntries: J(wl).optional()
}), Ei = de.extend({
  type: I("output_text_delta"),
  /**
   * The delta text that was streamed by the modelto the user.
   */
  delta: p()
}), Il = de.extend({
  type: I("response_started")
}), Ni = de.extend({
  type: I("response_done"),
  /**
   * The response from the model.
   */
  response: de.extend({
    /**
     * The ID of the response.
     */
    id: p(),
    /**
     * The usage data for the response.
     */
    usage: bl,
    /**
     * The output from the model.
     */
    output: J(ks)
  })
}), Sl = de.extend({
  type: I("model"),
  event: W().describe("The event from the model")
});
ge("type", [
  Ei,
  Ni,
  Il,
  Sl
]);
class pn {
  constructor(e) {
    /**
     * The number of input tokens used for this request.
     */
    S(this, "inputTokens");
    /**
     * The number of output tokens used for this request.
     */
    S(this, "outputTokens");
    /**
     * The total number of tokens sent and received for this request.
     */
    S(this, "totalTokens");
    /**
     * Details about the input tokens used for this request.
     */
    S(this, "inputTokensDetails");
    /**
     * Details about the output tokens used for this request.
     */
    S(this, "outputTokensDetails");
    this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
    const t = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
    this.inputTokensDetails = t || {};
    const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
    this.outputTokensDetails = r || {};
  }
}
class Ar {
  constructor(e) {
    /**
     * The number of requests made to the LLM API.
     */
    S(this, "requests");
    /**
     * The number of input tokens used across all requests.
     */
    S(this, "inputTokens");
    /**
     * The number of output tokens used across all requests.
     */
    S(this, "outputTokens");
    /**
     * The total number of tokens sent and received, across all requests.
     */
    S(this, "totalTokens");
    /**
     * Details about the input tokens used across all requests.
     */
    S(this, "inputTokensDetails", []);
    /**
     * Details about the output tokens used across all requests.
     */
    S(this, "outputTokensDetails", []);
    /**
     * List of per-request usage entries for detailed cost calculations.
     */
    S(this, "requestUsageEntries");
    if (typeof e > "u")
      this.requests = 0, this.inputTokens = 0, this.outputTokens = 0, this.totalTokens = 0, this.inputTokensDetails = [], this.outputTokensDetails = [], this.requestUsageEntries = void 0;
    else {
      this.requests = (e == null ? void 0 : e.requests) ?? 1, this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? this.inputTokens + this.outputTokens;
      const t = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
      Array.isArray(t) ? this.inputTokensDetails = t : this.inputTokensDetails = t ? [t] : [];
      const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
      Array.isArray(r) ? this.outputTokensDetails = r : this.outputTokensDetails = r ? [r] : [];
      const s = (e == null ? void 0 : e.requestUsageEntries) ?? (e == null ? void 0 : e.request_usage_entries), a = Array.isArray(s) ? s.map((i) => i instanceof pn ? i : new pn(i)) : void 0;
      this.requestUsageEntries = a && a.length > 0 ? a : void 0;
    }
  }
  add(e) {
    var t, r;
    this.requests += e.requests ?? 0, this.inputTokens += e.inputTokens ?? 0, this.outputTokens += e.outputTokens ?? 0, this.totalTokens += e.totalTokens ?? 0, e.inputTokensDetails && this.inputTokensDetails.push(...e.inputTokensDetails), e.outputTokensDetails && this.outputTokensDetails.push(...e.outputTokensDetails), Array.isArray(e.requestUsageEntries) && e.requestUsageEntries.length > 0 ? (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(...e.requestUsageEntries.map((s) => s instanceof pn ? s : new pn(s)))) : e.requests === 1 && e.totalTokens > 0 && (this.requestUsageEntries ?? (this.requestUsageEntries = []), this.requestUsageEntries.push(new pn({
      inputTokens: e.inputTokens,
      outputTokens: e.outputTokens,
      totalTokens: e.totalTokens,
      inputTokensDetails: (t = e.inputTokensDetails) == null ? void 0 : t[0],
      outputTokensDetails: (r = e.outputTokensDetails) == null ? void 0 : r[0]
    })));
  }
}
var Ie;
class Zt {
  constructor(e = {}) {
    /**
     * The context object you passed to the `Runner.run()` method.
     */
    S(this, "context");
    /**
     * The usage of the agent run so far. For streamed responses, the usage will be updated in real-time
     */
    S(this, "usage");
    /**
     * A map of tool names to whether they have been approved.
     */
    R(this, Ie);
    this.context = e, this.usage = new Ar(), k(this, Ie, /* @__PURE__ */ new Map());
  }
  /**
   * Rebuild the approvals map from a serialized state.
   * @internal
   *
   * @param approvals - The approvals map to rebuild.
   */
  _rebuildApprovals(e) {
    k(this, Ie, new Map(Object.entries(e)));
  }
  /**
   * Check if a tool call has been approved.
   *
   * @param approval - Details about the tool call being evaluated.
   * @returns `true` if the tool call has been approved, `false` if blocked and `undefined` if not yet approved or rejected.
   */
  isToolApproved(e) {
    const { toolName: t, callId: r } = e, s = u(this, Ie).get(t);
    if ((s == null ? void 0 : s.approved) === !0 && s.rejected === !0)
      return j.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"), !0;
    if ((s == null ? void 0 : s.approved) === !0)
      return !0;
    if ((s == null ? void 0 : s.rejected) === !0)
      return !1;
    const a = Array.isArray(s == null ? void 0 : s.approved) ? s.approved.includes(r) : !1, i = Array.isArray(s == null ? void 0 : s.rejected) ? s.rejected.includes(r) : !1;
    if (a && i)
      return j.warn(`Tool call ${r} is both approved and rejected at the same time. Approval takes precedence`), !0;
    if (a)
      return !0;
    if (i)
      return !1;
  }
  /**
   * Approve a tool call.
   *
   * @param approvalItem - The tool approval item to approve.
   * @param options - Additional approval behavior options.
   */
  approveTool(e, { alwaysApprove: t = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (t) {
      u(this, Ie).set(r, {
        approved: !0,
        rejected: []
      });
      return;
    }
    const s = u(this, Ie).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.approved)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.approved.push(a);
    }
    u(this, Ie).set(r, s);
  }
  /**
   * Reject a tool call.
   *
   * @param approvalItem - The tool approval item to reject.
   */
  rejectTool(e, { alwaysReject: t = !1 } = {}) {
    const r = e.toolName ?? e.rawItem.name;
    if (t) {
      u(this, Ie).set(r, {
        approved: !1,
        rejected: !0
      });
      return;
    }
    const s = u(this, Ie).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.rejected)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.rejected.push(a);
    }
    u(this, Ie).set(r, s);
  }
  toJSON() {
    return {
      context: this.context,
      usage: this.usage,
      approvals: Object.fromEntries(u(this, Ie).entries())
    };
  }
}
Ie = new WeakMap();
function xl(n) {
  return n.type === "function" ? {
    type: "function",
    name: n.name,
    description: n.description,
    parameters: n.parameters,
    strict: n.strict
  } : n.type === "computer" ? {
    type: "computer",
    name: n.name,
    environment: n.computer.environment,
    dimensions: n.computer.dimensions
  } : n.type === "shell" ? {
    type: "shell",
    name: n.name
  } : n.type === "apply_patch" ? {
    type: "apply_patch",
    name: n.name
  } : {
    type: "hosted_tool",
    name: n.name,
    providerData: n.providerData
  };
}
function Tl(n) {
  return {
    toolName: n.toolName,
    toolDescription: n.toolDescription,
    inputJsonSchema: n.inputJsonSchema,
    strictJsonSchema: n.strictJsonSchema
  };
}
class Ft {
  constructor() {
    S(this, "type", "base_item");
    S(this, "rawItem");
  }
  toJSON() {
    return {
      type: this.type,
      rawItem: this.rawItem
    };
  }
}
class Cr extends Ft {
  constructor(t, r) {
    super();
    S(this, "rawItem");
    S(this, "agent");
    S(this, "type", "message_output_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
  get content() {
    let t = "";
    for (const r of this.rawItem.content)
      r.type === "output_text" && (t += r.text);
    return t;
  }
}
class Ye extends Ft {
  constructor(t, r) {
    super();
    S(this, "rawItem");
    S(this, "agent");
    S(this, "type", "tool_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Ue extends Ft {
  constructor(t, r, s) {
    super();
    S(this, "rawItem");
    S(this, "agent");
    S(this, "output");
    S(this, "type", "tool_call_output_item");
    this.rawItem = t, this.agent = r, this.output = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      output: ft(this.output)
    };
  }
}
class As extends Ft {
  constructor(t, r) {
    super();
    S(this, "rawItem");
    S(this, "agent");
    S(this, "type", "reasoning_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Cs extends Ft {
  constructor(t, r) {
    super();
    S(this, "rawItem");
    S(this, "agent");
    S(this, "type", "handoff_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Os extends Ft {
  constructor(t, r, s) {
    super();
    S(this, "rawItem");
    S(this, "sourceAgent");
    S(this, "targetAgent");
    S(this, "type", "handoff_output_item");
    this.rawItem = t, this.sourceAgent = r, this.targetAgent = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      sourceAgent: this.sourceAgent.toJSON(),
      targetAgent: this.targetAgent.toJSON()
    };
  }
}
class ye extends Ft {
  constructor(t, r, s) {
    super();
    S(this, "rawItem");
    S(this, "agent");
    S(this, "toolName");
    S(this, "type", "tool_approval_item");
    this.rawItem = t, this.agent = r, this.toolName = s, this.toolName = s ?? t.name;
  }
  /**
   * Returns the tool name if available on the raw item or provided explicitly.
   * Kept for backwards compatibility with code that previously relied on `rawItem.name`.
   */
  get name() {
    return this.toolName ?? this.rawItem.name;
  }
  /**
   * Returns the arguments if the raw item has an arguments property otherwise this will be undefined.
   */
  get arguments() {
    return "arguments" in this.rawItem ? this.rawItem.arguments : void 0;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      toolName: this.toolName
    };
  }
}
function Or(n) {
  return async (e, ...t) => cs(async () => {
    const r = n(...t);
    Rs(r);
    try {
      return r.start(), await e(r);
    } catch (s) {
      throw r.setError({
        message: s.message,
        data: s.data
      }), s;
    } finally {
      r.end(), mn();
    }
  });
}
function kl(n, e) {
  var t;
  return qe().createSpan({
    ...n,
    data: {
      type: "agent",
      name: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.name) ?? "Agent",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
function Al(n, e) {
  var t, r;
  return qe().createSpan({
    ...n,
    data: {
      type: "function",
      input: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.input) ?? "",
      output: ((r = n == null ? void 0 : n.data) == null ? void 0 : r.output) ?? "",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const ha = Or(Al);
function Cl(n, e) {
  return qe().createSpan({
    ...n,
    data: { type: "handoff", ...n == null ? void 0 : n.data }
  }, e);
}
const Ol = Or(Cl);
function El(n, e) {
  return qe().createSpan({
    ...n,
    data: {
      type: "guardrail",
      triggered: !1,
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const ma = Or(El);
function Nl(n, e) {
  return qe().createSpan({
    ...n,
    data: {
      type: "mcp_tools",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const Rl = Or(Nl);
function ke(n) {
  if (n.length === 0)
    return "";
  const e = typeof globalThis < "u" && globalThis.Buffer ? globalThis.Buffer : void 0;
  if (e)
    return e.from(n).toString("base64");
  let t = "";
  for (let i = 0; i < n.length; i += 1)
    t += String.fromCharCode(n[i]);
  if (typeof globalThis.btoa == "function")
    return globalThis.btoa(t);
  const r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  let s = "", a = 0;
  for (; a < t.length; ) {
    const i = t.charCodeAt(a++), o = t.charCodeAt(a++), c = t.charCodeAt(a++), l = i >> 2, f = (i & 3) << 4 | o >> 4, d = isNaN(o) ? 64 : (o & 15) << 2 | c >> 6, h = isNaN(c) ? 64 : c & 63;
    s += r.charAt(l) + r.charAt(f) + r.charAt(d) + r.charAt(h);
  }
  return s;
}
class Pl {
  /**
   * @param data The raw responses stream events from the LLM.
   */
  constructor(e) {
    S(this, "data");
    /**
     * The type of the event.
     */
    S(this, "type", "raw_model_stream_event");
    this.data = e;
  }
}
class Dl {
  /**
   * @param name The name of the event.
   * @param item The item that was created.
   */
  constructor(e, t) {
    S(this, "name");
    S(this, "item");
    S(this, "type", "run_item_stream_event");
    this.name = e, this.item = t;
  }
}
class Ml {
  /**
   * @param agent The new agent
   */
  constructor(e) {
    S(this, "agent");
    S(this, "type", "agent_updated_stream_event");
    this.agent = e;
  }
}
function jl(n) {
  return typeof n.invoke == "function";
}
function $l(n) {
  if (!n || typeof n != "object" || !("rawItem" in n))
    return !1;
  const e = n.rawItem;
  if (!e || typeof e != "object")
    return !1;
  const t = e.type;
  return t === "function_call" || t === "hosted_tool_call";
}
function ga(n) {
  const e = n.rawItem;
  if (!e)
    return;
  if (e.type === "function_call" && e.callId)
    return `function_call:${e.callId}`;
  if ("callId" in e && e.callId)
    return `${e.type}:${e.callId}`;
  const t = "id" in e ? e.id : void 0;
  if (t)
    return `${e.type}:${t}`;
  const r = typeof e.providerData == "object" && e.providerData ? e.providerData : void 0;
  if (r != null && r.id)
    return `${e.type}:provider:${r.id}`;
  const s = "agent" in n && n.agent ? n.agent.name : "";
  try {
    return `${s}:${e.type}:${JSON.stringify(e)}`;
  } catch {
    return `${s}:${e.type}`;
  }
}
function Fl(n) {
  try {
    if (n instanceof $e) {
      const e = n.issues[0];
      if (e) {
        const t = Array.isArray(e.path) ? e.path : [], r = t.length > 0 ? t.map((a) => String(a)).join(".") : "(root)", s = ya(e.message ?? "");
        return `Invalid output type: final assistant output failed schema validation at "${r}" (${s}).`;
      }
      return "Invalid output type: final assistant output failed schema validation.";
    }
    if (n instanceof Error && n.message)
      return `Invalid output type: ${ya(n.message)}`;
  } catch {
  }
  return "Invalid output type: final assistant output did not match the expected schema.";
}
function ya(n, e = 160) {
  const t = n.trim();
  return t ? t.length <= e ? t : `${t.slice(0, e - 3)}...` : "Schema validation failed.";
}
function _a(n, e, t, r) {
  var b;
  const s = [], a = [], i = [], o = [], c = [], l = [], f = [], d = [], h = new Map(r.map((_) => [_.toolName, _])), y = new Map(t.filter((_) => _.type === "function").map((_) => [_.name, _])), v = t.find((_) => _.type === "computer"), x = t.find((_) => _.type === "shell"), g = t.find((_) => _.type === "apply_patch"), m = new Map(t.filter((_) => {
    var D;
    return _.type === "hosted_tool" && ((D = _.providerData) == null ? void 0 : D.type) === "mcp";
  }).map((_) => _).map((_) => [_.providerData.server_label, _]));
  for (const _ of n.output) {
    if (_.type === "message")
      _.role === "assistant" && s.push(new Cr(_, e));
    else if (_.type === "hosted_tool_call") {
      s.push(new Ye(_, e));
      const T = _.name;
      if (d.push(T), ((b = _.providerData) == null ? void 0 : b.type) === "mcp_approval_request" || _.name === "mcp_approval_request") {
        const A = _.providerData, N = A.server_label, G = m.get(N);
        if (typeof G > "u") {
          const F = `MCP server (${N}) not found in Agent (${e.name})`;
          throw Xe({
            message: F,
            data: { mcp_server_label: N }
          }), new we(F);
        }
        const B = new ye({
          type: "hosted_tool_call",
          // We must use this name to align with the name sent from the servers
          name: A.name,
          id: A.id,
          status: "in_progress",
          providerData: A
        }, e);
        f.push({
          requestItem: B,
          mcpTool: G
        }), G.providerData.on_approval || s.push(B);
      }
    } else if (_.type === "reasoning")
      s.push(new As(_, e));
    else if (_.type === "computer_call") {
      if (s.push(new Ye(_, e)), d.push("computer_use"), !v)
        throw Xe({
          message: "Model produced computer action without a computer tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced computer action without a computer tool.");
      o.push({
        toolCall: _,
        computer: v
      });
    } else if (_.type === "shell_call") {
      if (s.push(new Ye(_, e)), d.push("shell"), !x)
        throw Xe({
          message: "Model produced shell action without a shell tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced shell action without a shell tool.");
      c.push({
        toolCall: _,
        shell: x
      });
    } else if (_.type === "apply_patch_call") {
      if (s.push(new Ye(_, e)), d.push("apply_patch"), !g)
        throw Xe({
          message: "Model produced apply_patch action without an apply_patch tool.",
          data: {
            agent_name: e.name
          }
        }), new we("Model produced apply_patch action without an apply_patch tool.");
      l.push({
        toolCall: _,
        applyPatch: g
      });
    }
    if (_.type !== "function_call")
      continue;
    d.push(_.name);
    const D = h.get(_.name);
    if (D)
      s.push(new Cs(_, e)), a.push({
        toolCall: _,
        handoff: D
      });
    else {
      const T = y.get(_.name);
      if (!T)
        throw Xe({
          message: `Tool ${_.name} not found in agent ${e.name}.`,
          data: {
            tool_name: _.name,
            agent_name: e.name
          }
        }), new we(`Tool ${_.name} not found in agent ${e.name}.`);
      s.push(new Ye(_, e)), i.push({
        toolCall: _,
        tool: T
      });
    }
  }
  return {
    newItems: s,
    handoffs: a,
    functions: i,
    computerActions: o,
    shellActions: c,
    applyPatchActions: l,
    mcpApprovalRequests: f,
    toolsUsed: d,
    hasToolsOrApprovalsToRun() {
      return a.length > 0 || i.length > 0 || f.length > 0 || o.length > 0 || c.length > 0 || l.length > 0;
    }
  };
}
const Ll = ge("type", [
  w({
    type: I("next_step_handoff"),
    newAgent: W()
  }),
  w({
    type: I("next_step_final_output"),
    output: p()
  }),
  w({
    type: I("next_step_run_again")
  }),
  w({
    type: I("next_step_interruption"),
    data: te(p(), W())
  })
]);
class Me {
  constructor(e, t, r, s, a) {
    S(this, "originalInput");
    S(this, "modelResponse");
    S(this, "preStepItems");
    S(this, "newStepItems");
    S(this, "nextStep");
    this.originalInput = e, this.modelResponse = t, this.preStepItems = r, this.newStepItems = s, this.nextStep = a;
  }
  /**
   * The items generated during the agent run (i.e. everything generated after originalInput)
   */
  get generatedItems() {
    return this.preStepItems.concat(this.newStepItems);
  }
}
function Ul(n, e, t) {
  return n.resetToolChoice && e.hasUsedTools(n) ? { ...t, toolChoice: void 0 } : t;
}
async function va(n, e, t, r, s, a, i) {
  const o = t.filter((T) => T instanceof ye && "callId" in T.rawItem && T.rawItem.type === "function_call").map((T) => T.rawItem.callId), c = i.getInterruptions().filter($l);
  if (c.length > 0) {
    const T = /* @__PURE__ */ new Set();
    for (const A of c) {
      const N = ga(A);
      N && T.add(N);
    }
    if (T.size > 0) {
      let A = 0;
      for (let N = t.length - 1; N >= 0; N--) {
        const G = t[N];
        if (!(G instanceof ye))
          continue;
        const B = ga(G);
        if (B && T.has(B) && (A++, T.delete(B), T.size === 0))
          break;
      }
      A > 0 && (i._currentTurnPersistedItemCount = Math.max(0, i._currentTurnPersistedItemCount - A));
    }
  }
  const l = s.functions.filter((T) => o.includes(T.toolCall.callId)), f = await Pi(n, l, a, i), d = s.computerActions.length > 0 ? await Mi(n, s.computerActions, a, i._context) : [], h = new Set(t), y = [], v = /* @__PURE__ */ new Set(), x = (T) => {
    h.has(T) || v.has(T) || (y.push(T), v.add(T));
  };
  for (const T of f)
    x(T.runItem);
  for (const T of d)
    x(T);
  const g = s.mcpApprovalRequests.filter((T) => {
    var A;
    return T.requestItem.type === "tool_approval_item" && T.requestItem.rawItem.type === "hosted_tool_call" && ((A = T.requestItem.rawItem.providerData) == null ? void 0 : A.type) === "mcp_approval_request";
  }), m = /* @__PURE__ */ new Set(), b = /* @__PURE__ */ new Set();
  for (const T of g) {
    const A = T.requestItem.rawItem;
    if (A.type !== "hosted_tool_call")
      continue;
    const N = A.id, G = i._context.isToolApproved({
      // Since this item name must be the same with the one sent from Responses API server
      toolName: A.name,
      callId: N
    });
    if (typeof G < "u") {
      const B = {
        approve: G,
        approval_request_id: N,
        reason: void 0
      }, F = new Ye({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: B
      }, n);
      x(F);
    } else
      m.add(T.requestItem), b.add(N), f.push({
        type: "hosted_mcp_tool_approval",
        tool: T.mcpTool,
        runItem: T.requestItem
      }), x(T.requestItem);
  }
  const _ = t.filter((T) => {
    var A;
    if (!(T instanceof ye))
      return !0;
    if (T.rawItem.type === "hosted_tool_call" && ((A = T.rawItem.providerData) == null ? void 0 : A.type) === "mcp_approval_request") {
      if (m.has(T))
        return !0;
      const N = T.rawItem.id;
      return N ? b.has(N) : !1;
    }
    return !1;
  }), D = await Ri({
    agent: n,
    runner: a,
    state: i,
    functionResults: f,
    originalInput: e,
    newResponse: r,
    preStepItems: _,
    newItems: y
  });
  return D || new Me(e, r, _, y, { type: "next_step_run_again" });
}
async function wa(n, e, t, r, s, a, i) {
  var D, T, A, N, G, B;
  const o = t, c = new Set(t), l = [], f = (F) => {
    c.has(F) || (l.push(F), c.add(F));
  };
  for (const F of s.newItems)
    f(F);
  const [d, h, y, v] = await Promise.all([
    Pi(n, s.functions, a, i),
    Mi(n, s.computerActions, a, i._context),
    zl(n, s.shellActions, a, i._context),
    Gl(n, s.applyPatchActions, a, i._context)
  ]);
  for (const F of d)
    f(F.runItem);
  for (const F of h)
    f(F);
  for (const F of y)
    f(F);
  for (const F of v)
    f(F);
  if (s.mcpApprovalRequests.length > 0)
    for (const F of s.mcpApprovalRequests) {
      const ae = F.mcpTool.providerData, X = F.requestItem.rawItem.providerData;
      if (ae.on_approval) {
        const oe = await ae.on_approval(i._context, F.requestItem), Je = {
          approve: oe.approve,
          approval_request_id: X.id,
          reason: oe.reason
        };
        l.push(new Ye({
          type: "hosted_tool_call",
          name: "mcp_approval_response",
          providerData: Je
        }, n));
      } else {
        l.push(F.requestItem);
        const oe = {
          type: "hosted_mcp_tool_approval",
          tool: F.mcpTool,
          runItem: new ye({
            type: "hosted_tool_call",
            name: X.name,
            id: X.id,
            arguments: X.arguments,
            status: "in_progress",
            providerData: X
          }, n)
        };
        d.push(oe);
      }
    }
  if (s.handoffs.length > 0)
    return await Vl(n, e, o, l, r, s.handoffs, a, i._context);
  const x = await Ri({
    agent: n,
    runner: a,
    state: i,
    functionResults: d,
    originalInput: e,
    newResponse: r,
    preStepItems: o,
    newItems: l
  });
  if (x)
    return x;
  if ((((D = s.functions) == null ? void 0 : D.length) ?? 0) > 0 || (((T = s.computerActions) == null ? void 0 : T.length) ?? 0) > 0 || (((A = s.shellActions) == null ? void 0 : A.length) ?? 0) > 0 || (((N = s.applyPatchActions) == null ? void 0 : N.length) ?? 0) > 0 || (((G = s.mcpApprovalRequests) == null ? void 0 : G.length) ?? 0) > 0 || (((B = s.handoffs) == null ? void 0 : B.length) ?? 0) > 0)
    return new Me(e, r, o, l, { type: "next_step_run_again" });
  const m = l.filter((F) => F instanceof Cr), b = m.length > 0 ? bi(m[m.length - 1].rawItem) : void 0;
  if (typeof b > "u")
    return new Me(e, r, o, l, { type: "next_step_run_again" });
  if (!d.some((F) => F.runItem instanceof ye)) {
    if (n.outputType === "text")
      return new Me(e, r, o, l, {
        type: "next_step_final_output",
        output: b
      });
    if (n.outputType !== "text" && b) {
      const { parser: F } = vs(n.outputType, "final_output"), [ae] = await gs(() => F(b));
      if (ae) {
        const X = Fl(ae);
        throw Xe({
          message: X,
          data: {
            error: String(ae)
          }
        }), new we(X);
      }
      return new Me(e, r, o, l, { type: "next_step_final_output", output: b });
    }
  }
  return new Me(e, r, o, l, { type: "next_step_run_again" });
}
async function Ri({ agent: n, runner: e, state: t, functionResults: r, originalInput: s, newResponse: a, preStepItems: i, newItems: o }) {
  const c = await Wl(n, r, t);
  return c.isFinalOutput ? (e.emit("agent_end", t._context, n, c.finalOutput), n.emit("agent_end", t._context, c.finalOutput), new Me(s, a, i, o, {
    type: "next_step_final_output",
    output: c.finalOutput
  })) : c.isInterrupted ? new Me(s, a, i, o, {
    type: "next_step_interruption",
    data: {
      interruptions: c.interruptions
    }
  }) : null;
}
function yr(n, e) {
  const t = sd(e);
  if (t) {
    const r = t.map(ad);
    return {
      type: "function_call_result",
      name: n.name,
      callId: n.callId,
      status: "completed",
      output: r
    };
  }
  return {
    type: "function_call_result",
    name: n.name,
    callId: n.callId,
    status: "completed",
    output: {
      type: "text",
      text: ft(e)
    }
  };
}
function Zl(n) {
  const e = n.file;
  if (typeof e == "string" && e.length > 0)
    return e;
  const t = ql(e);
  if (t)
    return t;
  const r = Jl(n);
  return r || null;
}
function ql(n) {
  if (!_t(n))
    return null;
  if ("data" in n && n.data !== void 0) {
    const t = n.data, r = typeof t == "string" && t.length > 0, s = t instanceof Uint8Array && t.length > 0;
    return !r && !s || !fe(n.mediaType) || !fe(n.filename) ? null : {
      data: typeof t == "string" ? t : new Uint8Array(t),
      mediaType: n.mediaType,
      filename: n.filename
    };
  }
  if (fe(n.url)) {
    const t = { url: n.url };
    return fe(n.filename) && (t.filename = n.filename), t;
  }
  const e = fe(n.id) && n.id || fe(n.fileId) && n.fileId;
  if (e) {
    const t = { id: e };
    return fe(n.filename) && (t.filename = n.filename), t;
  }
  return null;
}
function Jl(n) {
  const e = typeof n.filename == "string" && n.filename.length > 0 ? n.filename : void 0, t = typeof n.mediaType == "string" && n.mediaType.length > 0 ? n.mediaType : void 0;
  if (typeof n.fileData == "string" && n.fileData.length > 0)
    return !t || !e ? null : { data: n.fileData, mediaType: t, filename: e };
  if (n.fileData instanceof Uint8Array && n.fileData.length > 0)
    return !t || !e ? null : { data: new Uint8Array(n.fileData), mediaType: t, filename: e };
  if (typeof n.fileUrl == "string" && n.fileUrl.length > 0) {
    const r = { url: n.fileUrl };
    return e && (r.filename = e), r;
  }
  if (typeof n.fileId == "string" && n.fileId.length > 0) {
    const r = { id: n.fileId };
    return e && (r.filename = e), r;
  }
  return null;
}
function _t(n) {
  return typeof n == "object" && n !== null;
}
function fe(n) {
  return typeof n == "string" && n.length > 0;
}
function Xn(n, e) {
  if (typeof n == "string")
    return e && !n.startsWith("data:") ? qt(n, e) : n;
  const t = ke(n);
  return qt(t, e);
}
function qt(n, e) {
  return e ? `data:${e};base64,${n}` : n;
}
async function Pi(n, e, t, r) {
  async function s(a) {
    let i = a.toolCall.arguments;
    if (a.tool.parameters && (jt(a.tool.parameters) ? i = a.tool.parameters.parse(i) : i = JSON.parse(i)), await a.tool.needsApproval(r._context, i, a.toolCall.callId)) {
      const c = r._context.isToolApproved({
        toolName: a.tool.name,
        callId: a.toolCall.callId
      });
      if (c === !1)
        return ha(async (l) => {
          const f = "Tool execution was not approved.";
          return l.setError({
            message: f,
            data: {
              tool_name: a.tool.name,
              error: `Tool execution for ${a.toolCall.callId} was manually rejected by user.`
            }
          }), l.spanData.output = f, {
            type: "function_output",
            tool: a.tool,
            output: f,
            runItem: new Ue(yr(a.toolCall, f), n, f)
          };
        }, {
          data: {
            name: a.tool.name
          }
        });
      if (c !== !0)
        return {
          type: "function_approval",
          tool: a.tool,
          runItem: new ye(a.toolCall, n)
        };
    }
    return ha(async (c) => {
      t.config.traceIncludeSensitiveData && (c.spanData.input = a.toolCall.arguments);
      try {
        t.emit("agent_tool_start", r._context, n, a.tool, {
          toolCall: a.toolCall
        }), n.emit("agent_tool_start", r._context, a.tool, {
          toolCall: a.toolCall
        });
        const l = await a.tool.invoke(r._context, a.toolCall.arguments, { toolCall: a.toolCall }), f = ft(l);
        t.emit("agent_tool_end", r._context, n, a.tool, f, { toolCall: a.toolCall }), n.emit("agent_tool_end", r._context, a.tool, f, { toolCall: a.toolCall }), t.config.traceIncludeSensitiveData && (c.spanData.output = f);
        const d = {
          type: "function_output",
          tool: a.tool,
          output: l,
          runItem: new Ue(yr(a.toolCall, l), n, l)
        }, h = Lc(a.toolCall);
        if (h) {
          d.agentRunResult = h;
          const y = h.interruptions;
          y.length > 0 && (d.interruptions = y);
        }
        return d;
      } catch (l) {
        c.setError({
          message: "Error running tool",
          data: {
            tool_name: a.tool.name,
            error: String(l)
          }
        });
        const f = String(l);
        throw t.emit("agent_tool_end", r._context, n, a.tool, f, {
          toolCall: a.toolCall
        }), n.emit("agent_tool_end", r._context, a.tool, f, {
          toolCall: a.toolCall
        }), l;
      }
    }, {
      data: {
        name: a.tool.name
      }
    });
  }
  try {
    return await Promise.all(e.map(s));
  } catch (a) {
    throw new qu(`Failed to run function tools: ${a}`, a, r);
  }
}
async function Bl(n, e) {
  const t = e.action;
  let r;
  switch (t.type) {
    case "click":
      await n.click(t.x, t.y, t.button);
      break;
    case "double_click":
      await n.doubleClick(t.x, t.y);
      break;
    case "drag":
      await n.drag(t.path.map((s) => [s.x, s.y]));
      break;
    case "keypress":
      await n.keypress(t.keys);
      break;
    case "move":
      await n.move(t.x, t.y);
      break;
    case "screenshot":
      r = await n.screenshot();
      break;
    case "scroll":
      await n.scroll(t.x, t.y, t.scroll_x, t.scroll_y);
      break;
    case "type":
      await n.type(t.text);
      break;
    case "wait":
      await n.wait();
      break;
  }
  if (typeof r < "u" || typeof n.screenshot == "function" && (r = await n.screenshot(), typeof r < "u"))
    return r;
  throw new Error("Computer does not implement screenshot()");
}
function Di(n) {
  if (n instanceof Error)
    return n.message || n.toString();
  try {
    return JSON.stringify(n);
  } catch {
    return String(n);
  }
}
async function zl(n, e, t, r, s = void 0) {
  const a = s ?? j, i = [];
  for (const o of e) {
    const c = o.shell, l = o.toolCall, f = new ye(l, n, c.name);
    if (await c.needsApproval(r, l.action, l.callId)) {
      if (c.onApproval) {
        const m = await c.onApproval(r, f);
        m.approve === !0 ? r.approveTool(f) : m.approve === !1 && r.rejectTool(f);
      }
      const g = r.isToolApproved({
        toolName: c.name,
        callId: l.callId
      });
      if (g === !1) {
        const m = "Tool execution was not approved.", b = {
          stdout: "",
          stderr: m,
          outcome: { type: "exit", exitCode: null }
        };
        i.push(new Ue({
          type: "shell_call_output",
          callId: l.callId,
          output: [b]
        }, n, m));
        continue;
      }
      if (g !== !0) {
        i.push(f);
        continue;
      }
    }
    t.emit("agent_tool_start", r, n, c, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, c, { toolCall: l });
    let h;
    const y = {};
    let v;
    try {
      const g = await c.shell.run(l.action);
      h = g.output ?? [], g.providerData && Object.assign(y, g.providerData), typeof g.maxOutputLength == "number" && (v = g.maxOutputLength);
    } catch (g) {
      h = [
        {
          stdout: "",
          stderr: Di(g),
          outcome: { type: "exit", exitCode: null }
        }
      ], a.error("Failed to execute shell action:", g);
    }
    h = h ?? [], t.emit("agent_tool_end", r, n, c, JSON.stringify(h), {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, c, JSON.stringify(h), {
      toolCall: l
    });
    const x = {
      type: "shell_call_output",
      callId: l.callId,
      output: h ?? []
    };
    typeof v == "number" && (x.maxOutputLength = v), Object.keys(y).length > 0 && (x.providerData = y), i.push(new Ue(x, n, x.output));
  }
  return i;
}
async function Gl(n, e, t, r, s = void 0) {
  const a = s ?? j, i = [];
  for (const o of e) {
    const c = o.applyPatch, l = o.toolCall, f = new ye(l, n, c.name);
    if (await c.needsApproval(r, l.operation, l.callId)) {
      if (c.onApproval) {
        const g = await c.onApproval(r, f);
        g.approve === !0 ? r.approveTool(f) : g.approve === !1 && r.rejectTool(f);
      }
      const x = r.isToolApproved({
        toolName: c.name,
        callId: l.callId
      });
      if (x === !1) {
        const g = "Tool execution was not approved.";
        i.push(new Ue({
          type: "apply_patch_call_output",
          callId: l.callId,
          status: "failed",
          output: g
        }, n, g));
        continue;
      }
      if (x !== !0) {
        i.push(f);
        continue;
      }
    }
    t.emit("agent_tool_start", r, n, c, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, c, {
      toolCall: l
    });
    let h = "completed", y = "";
    try {
      let x;
      switch (l.operation.type) {
        case "create_file":
          x = await c.editor.createFile(l.operation);
          break;
        case "update_file":
          x = await c.editor.updateFile(l.operation);
          break;
        case "delete_file":
          x = await c.editor.deleteFile(l.operation);
          break;
        default:
          throw new Error("Unsupported apply_patch operation");
      }
      x && typeof x.status == "string" && (h = x.status), x && typeof x.output == "string" && (y = x.output);
    } catch (x) {
      h = "failed", y = Di(x), a.error("Failed to execute apply_patch operation:", x);
    }
    t.emit("agent_tool_end", r, n, c, y, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, c, y, {
      toolCall: l
    });
    const v = {
      type: "apply_patch_call_output",
      callId: l.callId,
      status: h
    };
    y && (v.output = y), i.push(new Ue(v, n, y));
  }
  return i;
}
async function Mi(n, e, t, r, s = void 0) {
  const a = s ?? j, i = [];
  for (const o of e) {
    const c = o.computer.computer, l = o.toolCall;
    t.emit("agent_tool_start", r, n, o.computer, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, o.computer, { toolCall: l });
    let f;
    try {
      jl(c) ? f = await c.invoke(r, l) : f = await Bl(c, l);
    } catch (y) {
      a.error("Failed to execute computer action:", y), f = "";
    }
    t.emit("agent_tool_end", r, n, o.computer, f, {
      toolCall: l
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, o.computer, f, {
      toolCall: l
    });
    const d = f ? `data:image/png;base64,${f}` : "", h = {
      type: "computer_call_result",
      callId: l.callId,
      output: { type: "computer_screenshot", data: d }
    };
    i.push(new Ue(h, n, d));
  }
  return i;
}
async function Vl(n, e, t, r, s, a, i, o) {
  if (r = [...r], a.length === 0)
    return j.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."), new Me(e, s, t, r, { type: "next_step_run_again" });
  if (a.length > 1) {
    const l = "Multiple handoffs detected, ignoring this one.";
    for (let f = 1; f < a.length; f++)
      r.push(new Ue(yr(a[f].toolCall, l), n, l));
  }
  const c = a[0];
  return Ol(async (l) => {
    const f = c.handoff, d = await f.onInvokeHandoff(o, c.toolCall.arguments);
    if (l.spanData.to_agent = d.name, a.length > 1) {
      const y = a.map((v) => v.handoff.agentName);
      l.setError({
        message: "Multiple handoffs requested",
        data: {
          requested_agents: y
        }
      });
    }
    r.push(new Os(yr(c.toolCall, _i(d)), n, d)), i.emit("agent_handoff", o, n, d), n.emit("agent_handoff", o, d);
    const h = f.inputFilter ?? i.config.handoffInputFilter;
    if (h) {
      j.debug("Filtering inputs for handoff"), typeof h != "function" && l.setError({
        message: "Invalid input filter",
        data: {
          details: "not callable"
        }
      });
      const y = {
        inputHistory: Array.isArray(e) ? [...e] : e,
        preHandoffItems: [...t],
        newItems: [...r],
        runContext: o
      }, v = h(y);
      e = v.inputHistory, t = v.preHandoffItems, r = v.newItems;
    }
    return new Me(e, s, t, r, { type: "next_step_handoff", newAgent: d });
  }, {
    data: {
      from_agent: n.name
    }
  });
}
const Qn = {
  isFinalOutput: !1,
  isInterrupted: void 0
};
async function Wl(n, e, t) {
  if (e.length === 0)
    return Qn;
  const r = [];
  for (const i of e)
    if (i.runItem instanceof ye && r.push(i.runItem), i.type === "function_output") {
      if (Array.isArray(i.interruptions))
        r.push(...i.interruptions);
      else if (i.agentRunResult) {
        const o = i.agentRunResult.interruptions;
        o.length > 0 && r.push(...o);
      }
    }
  if (r.length > 0)
    return {
      isFinalOutput: !1,
      isInterrupted: !0,
      interruptions: r
    };
  if (n.toolUseBehavior === "run_llm_again")
    return Qn;
  const s = e[0];
  if (n.toolUseBehavior === "stop_on_first_tool")
    return (s == null ? void 0 : s.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: ft(s.output)
    } : Qn;
  const a = n.toolUseBehavior;
  if (typeof a == "object") {
    const i = e.find((o) => a.stopAtToolNames.includes(o.tool.name));
    return (i == null ? void 0 : i.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: ft(i.output)
    } : Qn;
  }
  if (typeof a == "function")
    return a(t._context, e);
  throw new re(`Invalid toolUseBehavior: ${a}`, t);
}
function Hl(n) {
  if (n instanceof Cr)
    return "message_output_created";
  if (n instanceof Cs)
    return "handoff_requested";
  if (n instanceof Os)
    return "handoff_occurred";
  if (n instanceof Ye)
    return "tool_called";
  if (n instanceof Ue)
    return "tool_output";
  if (n instanceof As)
    return "reasoning_item_created";
  if (n instanceof ye)
    return "tool_approval_requested";
}
function ji(n, e) {
  const t = Hl(e);
  if (!t) {
    j.warn("Unknown item type: ", e);
    return;
  }
  n._addItem(new Dl(t, e));
}
function Kl(n, e) {
  for (const t of e)
    ji(n, t);
}
function ba(n, e, t) {
  const r = t == null ? void 0 : t.skipItems;
  for (const s of e.newStepItems)
    r != null && r.has(s) || ji(n, s);
}
var Gt;
class Ia {
  constructor() {
    R(this, Gt, /* @__PURE__ */ new Map());
  }
  addToolUse(e, t) {
    u(this, Gt).set(e, t);
  }
  hasUsedTools(e) {
    return u(this, Gt).has(e);
  }
  toJSON() {
    return Object.fromEntries(Array.from(u(this, Gt).entries()).map(([e, t]) => [e.name, t]));
  }
}
Gt = new WeakMap();
function Yl(n) {
  return typeof n == "string" ? [
    {
      type: "message",
      role: "user",
      content: n
    }
  ] : [...n];
}
function $i(n) {
  return n.filter((e) => e.type !== "tool_approval_item").map((e) => e.rawItem);
}
function Es(n) {
  return n.map((e) => ns(rs(e)));
}
function ns(n, e = {}) {
  if (n == null)
    return n;
  const t = Xl(n);
  if (t)
    return Ql(t, e.mediaType);
  if (Array.isArray(n))
    return n.map((i) => ns(i, e));
  if (!Fi(n))
    return n;
  const r = n, s = {}, a = typeof r.mediaType == "string" && r.mediaType.length > 0 ? r.mediaType : e.mediaType;
  for (const [i, o] of Object.entries(r)) {
    const c = i === "data" || i === "fileData" ? { mediaType: a } : e;
    s[i] = ns(o, c);
  }
  return s;
}
function Xl(n) {
  if (n instanceof ArrayBuffer)
    return new Uint8Array(n);
  if (Hn(n)) {
    const e = n;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (ws(n)) {
    const e = n;
    return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
  }
  if (br(n)) {
    const e = n;
    return Uint8Array.from(e.data);
  }
}
function Ql(n, e) {
  const t = ke(n);
  return `data:${e && !e.startsWith("data:") ? e : "text/plain"};base64,${t}`;
}
function Fi(n) {
  if (typeof n != "object" || n === null)
    return !1;
  const e = Object.getPrototypeOf(n);
  return e === Object.prototype || e === null;
}
function rs(n) {
  if (n == null)
    return n;
  if (Array.isArray(n))
    return n.map((a) => rs(a));
  if (!Fi(n))
    return n;
  const e = n, t = {}, s = typeof e.type == "string" && e.type.length > 0 && ed(e.type);
  for (const [a, i] of Object.entries(e))
    s && a === "id" || (t[a] = rs(i));
  return t;
}
function ed(n) {
  switch (n) {
    case "function_call":
    case "function_call_result":
      return !0;
    default:
      return !1;
  }
}
async function td(n, e, t) {
  if (!n)
    return;
  const r = e ?? [], s = t.state, a = s._currentTurnPersistedItemCount ?? 0, i = t.newItems.slice(a);
  process.env.OPENAI_AGENTS__DEBUG_SAVE_SESSION && console.debug("saveToSession:newRunItems", i.map((f) => f.type));
  const o = $i(i), c = [...r, ...o];
  if (c.length === 0) {
    s._currentTurnPersistedItemCount = a + i.length;
    return;
  }
  const l = Es(c);
  await n.addItems(l), s._currentTurnPersistedItemCount = a + i.length;
}
async function nd(n, e) {
  if (!n || !e || e.length === 0)
    return;
  const t = Es(e);
  await n.addItems(t);
}
async function Sa(n, e) {
  if (!n)
    return;
  const t = e.state, r = t._currentTurnPersistedItemCount ?? 0, s = e.newItems.slice(r), a = $i(s);
  if (a.length === 0) {
    t._currentTurnPersistedItemCount = r + s.length;
    return;
  }
  const i = Es(a);
  await n.addItems(i), t._currentTurnPersistedItemCount = r + s.length;
}
async function rd(n, e, t, r) {
  if (!e)
    return {
      preparedInput: n,
      sessionItems: void 0
    };
  const s = (r == null ? void 0 : r.includeHistoryInPreparedInput) ?? !0, a = (r == null ? void 0 : r.preserveDroppedNewItems) ?? !1, i = await e.getItems(), o = Array.isArray(n) ? [...n] : Yl(n);
  if (!t)
    return {
      preparedInput: s ? [...i, ...o] : o,
      sessionItems: o
    };
  const c = i.slice(), l = o.slice(), f = await t(i, o);
  if (!Array.isArray(f))
    throw new re("Session input callback must return an array of AgentInputItem objects.");
  const d = Ta(c), h = Ta(l), y = ka(c), v = ka(l), x = [];
  for (const m of f) {
    const b = Ns(m);
    if (Aa(v, b, m)) {
      Ca(h, b), x.push(m);
      continue;
    }
    if (Aa(y, b, m)) {
      Ca(d, b);
      continue;
    }
    const _ = d.get(b) ?? 0;
    if (_ > 0) {
      d.set(b, _ - 1);
      continue;
    }
    const D = h.get(b) ?? 0;
    if (D > 0) {
      h.set(b, D - 1), x.push(m);
      continue;
    }
    x.push(m);
  }
  return {
    preparedInput: s ? f : x.length > 0 ? x : a ? l : [],
    // Respect callbacks that intentionally drop the latest inputs (e.g. to redact sensitive
    // values) by persisting only the items they kept in the combined array.
    sessionItems: x
  };
}
function sd(n) {
  if (Array.isArray(n)) {
    const t = [];
    for (const r of n) {
      const s = xa(r);
      if (!s)
        return null;
      t.push(s);
    }
    return t;
  }
  const e = xa(n);
  return e ? [e] : null;
}
function xa(n) {
  if (!_t(n))
    return null;
  const e = n.type;
  if (e === "text" && typeof n.text == "string") {
    const t = { type: "text", text: n.text };
    return _t(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "image") {
    const t = { type: "image" };
    let r, s;
    const a = fe(n.mediaType) ? n.mediaType : void 0, i = n.image;
    if (typeof i == "string" && i.length > 0)
      r = i;
    else if (_t(i)) {
      const o = i, c = fe(o.mediaType) ? o.mediaType : a;
      if (fe(o.url) ? r = o.url : (fe(o.data) || o.data instanceof Uint8Array && o.data.length > 0) && (r = Xn(o.data, c)), !r) {
        const l = fe(o.fileId) && o.fileId || fe(o.id) && o.id || void 0;
        l && (s = l);
      }
    }
    if (!r && typeof n.imageUrl == "string" && n.imageUrl.length > 0 && (r = n.imageUrl), !s && typeof n.fileId == "string" && n.fileId.length > 0 && (s = n.fileId), !r && typeof n.data == "string" && n.data.length > 0 ? r = a ? Xn(n.data, a) : n.data : !r && n.data instanceof Uint8Array && n.data.length > 0 && (r = Xn(n.data, a)), typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), r)
      t.image = r;
    else if (s)
      t.image = { fileId: s };
    else
      return null;
    return _t(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "file") {
    const t = Zl(n);
    if (!t)
      return null;
    const r = { type: "file", file: t };
    return _t(n.providerData) && (r.providerData = n.providerData), r;
  }
  return null;
}
function ad(n) {
  if (n.type === "text") {
    const t = {
      type: "input_text",
      text: n.text
    };
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "image") {
    const t = { type: "input_image" };
    if (typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), typeof n.image == "string" && n.image.length > 0)
      t.image = n.image;
    else if (_t(n.image)) {
      const r = n.image, s = fe(r.mediaType) ? r.mediaType : void 0;
      if (fe(r.url))
        t.image = r.url;
      else if (fe(r.data))
        t.image = s && !r.data.startsWith("data:") ? qt(r.data, s) : r.data;
      else if (r.data instanceof Uint8Array && r.data.length > 0) {
        const a = ke(r.data);
        t.image = qt(a, s);
      } else {
        const a = fe(r.fileId) && r.fileId || fe(r.id) && r.id || void 0;
        a && (t.image = { id: a });
      }
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "file") {
    const t = { type: "input_file" }, r = n.file;
    if (typeof r == "string")
      t.file = r;
    else if (r && typeof r == "object") {
      const s = r;
      if ("data" in s && s.data) {
        const a = s.mediaType ?? "text/plain";
        if (typeof s.data == "string")
          t.file = qt(s.data, a);
        else {
          const i = ke(s.data);
          t.file = qt(i, a);
        }
      } else if (typeof s.url == "string" && s.url.length > 0)
        t.file = { url: s.url };
      else {
        const a = typeof s.id == "string" && s.id.length > 0 && s.id || (typeof s.fileId == "string" && s.fileId.length > 0 ? s.fileId : void 0);
        a && (t.file = { id: a });
      }
      typeof s.filename == "string" && s.filename.length > 0 && (t.filename = s.filename);
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  return n;
}
function Ta(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = Ns(t);
    e.set(r, (e.get(r) ?? 0) + 1);
  }
  return e;
}
function ka(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = Ns(t), s = e.get(r);
    s ? s.push(t) : e.set(r, [t]);
  }
  return e;
}
function Aa(n, e, t) {
  const r = n.get(e);
  if (!r || r.length === 0)
    return !1;
  const s = r.findIndex((a) => a === t);
  return s === -1 ? !1 : (r.splice(s, 1), r.length === 0 && n.delete(e), !0);
}
function Ca(n, e) {
  const t = (n.get(e) ?? 0) - 1;
  t <= 0 ? n.delete(e) : n.set(e, t);
}
function Ns(n) {
  return JSON.stringify(n, id);
}
function id(n, e) {
  if (e instanceof ArrayBuffer)
    return {
      __type: "ArrayBuffer",
      data: ke(new Uint8Array(e))
    };
  if (Hn(e)) {
    const t = e;
    return {
      __type: t.constructor.name,
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  if (ws(e)) {
    const t = e;
    return {
      __type: "Buffer",
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  return br(e) ? {
    __type: "Buffer",
    data: ke(Uint8Array.from(e.data))
  } : e;
}
const tr = "1.0", od = I(tr), Pe = w({
  name: p()
}), ud = w({
  object: I("trace.span"),
  id: p(),
  trace_id: p(),
  parent_id: p().nullable(),
  started_at: p().nullable(),
  ended_at: p().nullable(),
  error: w({
    message: p(),
    data: te(p(), W()).optional()
  }).nullable(),
  span_data: te(p(), W())
}), Li = ud.extend({
  previous_span: Xo(() => Li).optional()
}), cd = w({
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: te(p(), E()).optional(),
  outputTokensDetails: te(p(), E()).optional()
}), Ui = w({
  requests: E(),
  inputTokens: E(),
  outputTokens: E(),
  totalTokens: E(),
  inputTokensDetails: J(te(p(), E())).optional(),
  outputTokensDetails: J(te(p(), E())).optional(),
  requestUsageEntries: J(cd).optional()
}), Oa = w({
  usage: Ui,
  output: J(ks),
  responseId: p().optional(),
  providerData: te(p(), W()).optional()
}), Zi = ge("type", [
  w({
    type: I("message_output_item"),
    rawItem: xr,
    agent: Pe
  }),
  w({
    type: I("tool_call_item"),
    rawItem: _l.or(In),
    agent: Pe
  }),
  w({
    type: I("tool_call_output_item"),
    rawItem: gr,
    agent: Pe,
    output: p()
  }),
  w({
    type: I("reasoning_item"),
    rawItem: Ts,
    agent: Pe
  }),
  w({
    type: I("handoff_call_item"),
    rawItem: Sn,
    agent: Pe
  }),
  w({
    type: I("handoff_output_item"),
    rawItem: gr,
    sourceAgent: Pe,
    targetAgent: Pe
  }),
  w({
    type: I("tool_approval_item"),
    rawItem: Sn.or(In).or(Tr).or(kr),
    agent: Pe,
    toolName: p().optional()
  })
]), ld = w({
  object: I("trace"),
  id: p(),
  workflow_name: p(),
  group_id: p().nullable(),
  metadata: te(p(), W())
}), dd = w({
  newItems: J(Zi),
  toolsUsed: J(p()),
  handoffs: J(w({
    toolCall: W(),
    handoff: W()
  })),
  functions: J(w({
    toolCall: W(),
    tool: W()
  })),
  computerActions: J(w({
    toolCall: W(),
    computer: W()
  })),
  shellActions: J(w({
    toolCall: W(),
    shell: W()
  })).optional(),
  applyPatchActions: J(w({
    toolCall: W(),
    applyPatch: W()
  })).optional(),
  mcpApprovalRequests: J(w({
    requestItem: w({
      // protocol.HostedToolCallItem
      rawItem: w({
        type: I("hosted_tool_call"),
        name: p(),
        arguments: p().optional(),
        status: p().optional(),
        output: p().optional(),
        // this always exists but marked as optional for early version compatibility; when releasing 1.0, we can remove the nullable and optional
        providerData: te(p(), W()).nullable().optional()
      })
    }),
    // HostedMCPTool
    mcpTool: w({
      type: I("hosted_tool"),
      name: I("hosted_mcp"),
      providerData: te(p(), W())
    })
  })).optional()
}), qi = w({
  tripwireTriggered: Nt(),
  outputInfo: W()
}), pd = w({
  guardrail: w({
    type: I("input"),
    name: p()
  }),
  output: qi
}), fd = w({
  guardrail: w({
    type: I("output"),
    name: p()
  }),
  agentOutput: W(),
  agent: Pe,
  output: qi
}), Ea = w({
  $schemaVersion: od,
  currentTurn: E(),
  currentAgent: Pe,
  originalInput: p().or(J(vl)),
  modelResponses: J(Oa),
  context: w({
    usage: Ui,
    approvals: te(p(), w({
      approved: J(p()).or(Nt()),
      rejected: J(p()).or(Nt())
    })),
    context: te(p(), W())
  }),
  toolUseTracker: te(p(), J(p())),
  maxTurns: E(),
  currentAgentSpan: Li.nullable().optional(),
  noActiveAgentRun: Nt(),
  inputGuardrailResults: J(pd),
  outputGuardrailResults: J(fd),
  currentStep: Ll.optional(),
  lastModelResponse: Oa.optional(),
  generatedItems: J(Zi),
  lastProcessedResponse: dd.optional(),
  currentTurnPersistedItemCount: E().int().min(0).optional(),
  trace: ld.nullable()
});
class Ge {
  constructor(e, t, r, s) {
    /**
     * Current turn number in the conversation.
     */
    S(this, "_currentTurn", 0);
    /**
     * The agent currently handling the conversation.
     */
    S(this, "_currentAgent");
    /**
     * Original user input prior to any processing.
     */
    S(this, "_originalInput");
    /**
     * Responses from the model so far.
     */
    S(this, "_modelResponses");
    /**
     * Active tracing span for the current agent if tracing is enabled.
     */
    S(this, "_currentAgentSpan");
    /**
     * Run context tracking approvals, usage, and other metadata.
     */
    S(this, "_context");
    /**
     * Tracks what tools each agent has used.
     */
    S(this, "_toolUseTracker");
    /**
     * Items generated by the agent during the run.
     */
    S(this, "_generatedItems");
    /**
     * Number of `_generatedItems` already flushed to session storage for the current turn.
     *
     * Persisting the entire turn on every save would duplicate responses and tool outputs.
     * Instead, `saveToSession` appends only the delta since the previous write. This counter
     * tracks how many generated run items from *this turn* were already written so the next
     * save can slice off only the new entries. When a turn is interrupted (e.g., awaiting tool
     * approval) and later resumed, we rewind the counter before continuing so the pending tool
     * output still gets stored.
     */
    S(this, "_currentTurnPersistedItemCount");
    /**
     * Maximum allowed turns before forcing termination.
     */
    S(this, "_maxTurns");
    /**
     * Whether the run has an active agent step in progress.
     */
    S(this, "_noActiveAgentRun", !0);
    /**
     * Last model response for the previous turn.
     */
    S(this, "_lastTurnResponse");
    /**
     * Results from input guardrails applied to the run.
     */
    S(this, "_inputGuardrailResults");
    /**
     * Results from output guardrails applied to the run.
     */
    S(this, "_outputGuardrailResults");
    /**
     * Next step computed for the agent to take.
     */
    S(this, "_currentStep");
    /**
     * Parsed model response after applying guardrails and tools.
     */
    S(this, "_lastProcessedResponse");
    /**
     * Trace associated with this run if tracing is enabled.
     */
    S(this, "_trace", null);
    this._context = e, this._originalInput = structuredClone(t), this._modelResponses = [], this._currentAgentSpan = void 0, this._currentAgent = r, this._toolUseTracker = new Ia(), this._generatedItems = [], this._currentTurnPersistedItemCount = 0, this._maxTurns = s, this._inputGuardrailResults = [], this._outputGuardrailResults = [], this._trace = un();
  }
  /**
   * The usage aggregated for this run. This includes per-request breakdowns when available.
   */
  get usage() {
    return this._context.usage;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during the run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Bt(this._originalInput, this._generatedItems);
  }
  /**
   * Returns all interruptions if the current step is an interruption otherwise returns an empty array.
   */
  getInterruptions() {
    var e;
    return ((e = this._currentStep) == null ? void 0 : e.type) !== "next_step_interruption" ? [] : this._currentStep.data.interruptions;
  }
  /**
   * Approves a tool call requested by the agent through an interruption and approval item request.
   *
   * To approve the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only approve the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysApprove` option to `true`.
   *
   * @param approvalItem - The tool call approval item to approve.
   * @param options - Options for the approval.
   */
  approve(e, t = { alwaysApprove: !1 }) {
    this._context.approveTool(e, t);
  }
  /**
   * Rejects a tool call requested by the agent through an interruption and approval item request.
   *
   * To reject the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only reject the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysReject` option to `true`.
   *
   * @param approvalItem - The tool call approval item to reject.
   * @param options - Options for the rejection.
   */
  reject(e, t = { alwaysReject: !1 }) {
    this._context.rejectTool(e, t);
  }
  /**
   * Serializes the run state to a JSON object.
   *
   * This method is used to serialize the run state to a JSON object that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toJSON() {
    var r;
    const e = {
      $schemaVersion: tr,
      currentTurn: this._currentTurn,
      currentAgent: {
        name: this._currentAgent.name
      },
      originalInput: this._originalInput,
      modelResponses: this._modelResponses.map((s) => ({
        usage: {
          requests: s.usage.requests,
          inputTokens: s.usage.inputTokens,
          outputTokens: s.usage.outputTokens,
          totalTokens: s.usage.totalTokens,
          inputTokensDetails: s.usage.inputTokensDetails,
          outputTokensDetails: s.usage.outputTokensDetails,
          ...s.usage.requestUsageEntries && s.usage.requestUsageEntries.length > 0 ? {
            requestUsageEntries: s.usage.requestUsageEntries.map((a) => ({
              inputTokens: a.inputTokens,
              outputTokens: a.outputTokens,
              totalTokens: a.totalTokens,
              inputTokensDetails: a.inputTokensDetails,
              outputTokensDetails: a.outputTokensDetails
            }))
          } : {}
        },
        output: s.output,
        responseId: s.responseId,
        providerData: s.providerData
      })),
      context: this._context.toJSON(),
      toolUseTracker: this._toolUseTracker.toJSON(),
      maxTurns: this._maxTurns,
      currentAgentSpan: (r = this._currentAgentSpan) == null ? void 0 : r.toJSON(),
      noActiveAgentRun: this._noActiveAgentRun,
      inputGuardrailResults: this._inputGuardrailResults,
      outputGuardrailResults: this._outputGuardrailResults.map((s) => ({
        ...s,
        agent: s.agent.toJSON()
      })),
      currentStep: this._currentStep,
      lastModelResponse: this._lastTurnResponse,
      generatedItems: this._generatedItems.map((s) => s.toJSON()),
      currentTurnPersistedItemCount: this._currentTurnPersistedItemCount,
      lastProcessedResponse: this._lastProcessedResponse,
      trace: this._trace ? this._trace.toJSON() : null
    }, t = Ea.safeParse(e);
    if (!t.success)
      throw new Zu(`Failed to serialize run state. ${t.error.message}`);
    return t.data;
  }
  /**
   * Serializes the run state to a string.
   *
   * This method is used to serialize the run state to a string that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toString() {
    return JSON.stringify(this.toJSON());
  }
  /**
   * Deserializes a run state from a string.
   *
   * This method is used to deserialize a run state from a string that was serialized using the
   * `toString` method.
   */
  static async fromString(e, t) {
    var d, h, y, v, x;
    const [r, s] = await gs(() => JSON.parse(t));
    if (r)
      throw new re(`Failed to parse run state. ${r instanceof Error ? r.message : String(r)}`);
    const a = s.$schemaVersion;
    if (!a)
      throw new re("Run state is missing schema version");
    if (a !== tr)
      throw new re(`Run state schema version ${a} is not supported. Please use version ${tr}`);
    const i = Ea.parse(JSON.parse(t)), o = hd(e), c = new Zt(i.context.context);
    c._rebuildApprovals(i.context.approvals);
    const l = o.get(i.currentAgent.name);
    if (!l)
      throw new re(`Agent ${i.currentAgent.name} not found`);
    const f = new Ge(c, "", l, i.maxTurns);
    f._currentTurn = i.currentTurn, f._toolUseTracker = new Ia();
    for (const [g, m] of Object.entries(i.toolUseTracker))
      f._toolUseTracker.addToolUse(o.get(g), m);
    if (i.currentAgentSpan) {
      i.trace || j.warn("Trace is not set, skipping tracing setup");
      const g = qe().createTrace({
        traceId: (d = i.trace) == null ? void 0 : d.id,
        name: (h = i.trace) == null ? void 0 : h.workflow_name,
        groupId: ((y = i.trace) == null ? void 0 : y.group_id) ?? void 0,
        metadata: (v = i.trace) == null ? void 0 : v.metadata
      });
      f._currentAgentSpan = Ji(g, i.currentAgentSpan), f._trace = g;
    }
    return f._noActiveAgentRun = i.noActiveAgentRun, f._inputGuardrailResults = i.inputGuardrailResults, f._outputGuardrailResults = i.outputGuardrailResults.map((g) => ({
      ...g,
      agent: o.get(g.agent.name)
    })), f._currentStep = i.currentStep, f._originalInput = i.originalInput, f._modelResponses = i.modelResponses.map(Na), f._lastTurnResponse = i.lastModelResponse ? Na(i.lastModelResponse) : void 0, f._generatedItems = i.generatedItems.map((g) => Bi(g, o)), f._currentTurnPersistedItemCount = i.currentTurnPersistedItemCount ?? 0, f._lastProcessedResponse = i.lastProcessedResponse ? await md(o, f._currentAgent, f._context, i.lastProcessedResponse) : void 0, ((x = i.currentStep) == null ? void 0 : x.type) === "next_step_handoff" && (f._currentStep = {
      type: "next_step_handoff",
      newAgent: o.get(i.currentStep.newAgent.name)
    }), f;
  }
}
function hd(n) {
  const e = /* @__PURE__ */ new Map(), t = [n];
  for (; t.length > 0; ) {
    const r = t.shift();
    if (!e.has(r.name)) {
      e.set(r.name, r);
      for (const s of r.handoffs)
        s instanceof nt ? e.has(s.name) || t.push(s) : s.agent && (e.has(s.agent.name) || t.push(s.agent));
    }
  }
  return e;
}
function Ji(n, e) {
  const t = e.span_data, r = e.previous_span ? Ji(n, e.previous_span) : void 0, s = qe().createSpan({
    spanId: e.id,
    traceId: e.trace_id,
    parentId: e.parent_id ?? void 0,
    startedAt: e.started_at ?? void 0,
    endedAt: e.ended_at ?? void 0,
    data: t
  }, n);
  return s.previousSpan = r, s;
}
function Na(n) {
  return {
    usage: new Ar(n.usage),
    output: n.output.map((t) => ks.parse(t)),
    responseId: n.responseId,
    providerData: n.providerData
  };
}
function Bi(n, e) {
  switch (n.type) {
    case "message_output_item":
      return new Cr(n.rawItem, e.get(n.agent.name));
    case "tool_call_item":
      return new Ye(n.rawItem, e.get(n.agent.name));
    case "tool_call_output_item":
      return new Ue(n.rawItem, e.get(n.agent.name), n.output);
    case "reasoning_item":
      return new As(n.rawItem, e.get(n.agent.name));
    case "handoff_call_item":
      return new Cs(n.rawItem, e.get(n.agent.name));
    case "handoff_output_item":
      return new Os(n.rawItem, e.get(n.sourceAgent.name), e.get(n.targetAgent.name));
    case "tool_approval_item":
      return new ye(n.rawItem, e.get(n.agent.name), n.toolName);
  }
}
async function md(n, e, t, r) {
  const s = await e.getAllTools(t), a = new Map(s.filter((d) => d.type === "function").map((d) => [d.name, d])), i = new Map(s.filter((d) => d.type === "computer").map((d) => [d.name, d])), o = new Map(s.filter((d) => d.type === "shell").map((d) => [d.name, d])), c = new Map(s.filter((d) => d.type === "apply_patch").map((d) => [d.name, d])), l = new Map(e.handoffs.map((d) => d instanceof nt ? [d.name, wi(d)] : [d.toolName, d])), f = {
    newItems: r.newItems.map((d) => Bi(d, n)),
    toolsUsed: r.toolsUsed,
    handoffs: r.handoffs.map((d) => {
      if (!l.has(d.handoff.toolName))
        throw new re(`Handoff ${d.handoff.toolName} not found`);
      return {
        toolCall: d.toolCall,
        handoff: l.get(d.handoff.toolName)
      };
    }),
    functions: await Promise.all(r.functions.map(async (d) => {
      if (!a.has(d.tool.name))
        throw new re(`Tool ${d.tool.name} not found`);
      return {
        toolCall: d.toolCall,
        tool: a.get(d.tool.name)
      };
    })),
    computerActions: r.computerActions.map((d) => {
      const h = d.computer.name;
      if (!i.has(h))
        throw new re(`Computer tool ${h} not found`);
      return {
        toolCall: d.toolCall,
        computer: i.get(h)
      };
    }),
    shellActions: (r.shellActions ?? []).map((d) => {
      const h = d.shell.name;
      if (!o.has(h))
        throw new re(`Shell tool ${h} not found`);
      return {
        toolCall: d.toolCall,
        shell: o.get(h)
      };
    }),
    applyPatchActions: (r.applyPatchActions ?? []).map((d) => {
      const h = d.applyPatch.name;
      if (!c.has(h))
        throw new re(`Apply patch tool ${h} not found`);
      return {
        toolCall: d.toolCall,
        applyPatch: c.get(h)
      };
    }),
    mcpApprovalRequests: (r.mcpApprovalRequests ?? []).map((d) => ({
      requestItem: new ye(d.requestItem.rawItem, e),
      mcpTool: d.mcpTool
    }))
  };
  return {
    ...f,
    hasToolsOrApprovalsToRun() {
      return f.handoffs.length > 0 || f.functions.length > 0 || f.mcpApprovalRequests.length > 0 || f.computerActions.length > 0 || f.shellActions.length > 0 || f.applyPatchActions.length > 0;
    }
  };
}
var se, ss, as, zi, Gi, Vi, Wi, hn, is, os;
class gd extends Nc {
  /**
   * Creates a runner with optional defaults that apply to every subsequent run invocation.
   *
   * @param config - Overrides for models, guardrails, tracing, or session behavior.
   */
  constructor(t = {}) {
    super();
    R(this, se);
    S(this, "config");
    // --------------------------------------------------------------
    //  Internals
    // --------------------------------------------------------------
    S(this, "inputGuardrailDefs");
    S(this, "outputGuardrailDefs");
    this.config = {
      modelProvider: t.modelProvider ?? Zc(),
      model: t.model,
      modelSettings: t.modelSettings,
      handoffInputFilter: t.handoffInputFilter,
      inputGuardrails: t.inputGuardrails,
      outputGuardrails: t.outputGuardrails,
      tracingDisabled: t.tracingDisabled ?? !1,
      traceIncludeSensitiveData: t.traceIncludeSensitiveData ?? !0,
      workflowName: t.workflowName ?? "Agent workflow",
      traceId: t.traceId,
      groupId: t.groupId,
      traceMetadata: t.traceMetadata,
      sessionInputCallback: t.sessionInputCallback,
      callModelInputFilter: t.callModelInputFilter
    }, this.inputGuardrailDefs = (t.inputGuardrails ?? []).map(fa), this.outputGuardrailDefs = (t.outputGuardrails ?? []).map(ts);
  }
  async run(t, r, s = {
    stream: !1,
    context: void 0
  }) {
    const a = s ?? { stream: !1, context: void 0 }, i = a.sessionInputCallback ?? this.config.sessionInputCallback, o = a.callModelInputFilter ?? this.config.callModelInputFilter, c = !!o, l = {
      ...a,
      sessionInputCallback: i,
      callModelInputFilter: o
    }, f = !!l.conversationId || !!l.previousResponseId, d = l.session, h = r instanceof Ge;
    let y = d && h ? [] : void 0, v, x = d && h ? /* @__PURE__ */ new Map() : void 0;
    const g = (T, A) => {
      const N = x;
      if (A !== void 0) {
        if (!N) {
          v = A.map((X) => structuredClone(X));
          return;
        }
        const B = [], F = /* @__PURE__ */ new WeakMap();
        for (const X of T) {
          if (!X || typeof X != "object")
            continue;
          const oe = (F.get(X) ?? 0) + 1;
          F.set(X, oe);
        }
        const ae = () => {
          for (const [X, oe] of N)
            if (oe > 0)
              return N.set(X, oe - 1), !0;
          return !1;
        };
        for (let X = 0; X < A.length; X++) {
          const oe = A[X];
          if (!oe)
            continue;
          let Je = !1;
          const Ne = T[X];
          if (Ne && typeof Ne == "object") {
            const Fs = (F.get(Ne) ?? 0) - 1;
            if (F.set(Ne, Fs), Fs > 0)
              continue;
            const Ls = vt(Ne), Us = N.get(Ls) ?? 0;
            if (Us > 0) {
              N.set(Ls, Us - 1), B.push(structuredClone(oe)), Je = !0;
              continue;
            }
          }
          const dn = vt(oe), Kn = N.get(dn) ?? 0;
          if (Kn > 0) {
            N.set(dn, Kn - 1), B.push(structuredClone(oe)), Je = !0;
            continue;
          }
          !Ne && ae() && (B.push(structuredClone(oe)), Je = !0), !Je && !Ne && v === void 0 && B.push(structuredClone(oe));
        }
        (B.length > 0 || v === void 0) && (v = B);
        return;
      }
      const G = [];
      if (N)
        for (const B of T) {
          if (!B)
            continue;
          const F = vt(B), ae = N.get(F) ?? 0;
          ae <= 0 || (N.set(F, ae - 1), G.push(structuredClone(B)));
        }
      else
        for (const B of T)
          B && G.push(structuredClone(B));
      G.length > 0 ? v = G : v === void 0 && (v = []);
    }, m = () => {
      if (v !== void 0)
        return v;
      if (!c)
        return y;
    };
    let b = r;
    if (!(b instanceof Ge)) {
      if (d && Array.isArray(b) && !i)
        throw new re("RunConfig.sessionInputCallback must be provided when using session history with list inputs.");
      const T = await rd(b, d, i, {
        // When the server tracks conversation state we only send the new turn inputs;
        // previous messages are recovered via conversationId/previousResponseId.
        includeHistoryInPreparedInput: !f,
        preserveDroppedNewItems: f
      });
      if (f && d) {
        const A = T.sessionItems;
        A && A.length > 0 ? b = A : b = T.preparedInput;
      } else
        b = T.preparedInput;
      if (d) {
        const A = T.sessionItems ?? [];
        y = A.map((N) => structuredClone(N)), x = /* @__PURE__ */ new Map();
        for (const N of A) {
          const G = vt(N);
          x.set(G, (x.get(G) ?? 0) + 1);
        }
      }
    }
    let _;
    if (d && !f) {
      let T = !1;
      _ = async () => {
        if (T)
          return;
        const A = m();
        !A || A.length === 0 || (T = !0, await nd(d, A));
      };
    }
    const D = async () => {
      if (l.stream)
        return await L(this, se, Wi).call(this, t, b, l, _, g);
      const T = await L(this, se, Gi).call(this, t, b, l, g);
      return d && !f && await td(d, m(), T), T;
    };
    return b instanceof Ge && b._trace ? Sd(b._trace, async () => (b._currentAgentSpan && Rs(b._currentAgentSpan), D())) : xd(async () => D(), {
      traceId: this.config.traceId,
      name: this.config.workflowName,
      groupId: this.config.groupId,
      metadata: this.config.traceMetadata
    });
  }
}
se = new WeakSet(), ss = function(t) {
  return this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(fa));
}, as = function(t) {
  const r = L(this, se, ss).call(this, t), s = [], a = [];
  for (const i of r)
    i.runInParallel === !1 ? s.push(i) : a.push(i);
  return { blocking: s, parallel: a };
}, zi = async function(t) {
  const r = t.model !== void 0 && t.model !== nt.DEFAULT_MODEL_PLACEHOLDER || this.config.model !== void 0 && this.config.model !== nt.DEFAULT_MODEL_PLACEHOLDER;
  let s = yd(t.model, this.config.model);
  return typeof s == "string" && (s = await this.config.modelProvider.getModel(s)), { model: s, explictlyModelSet: r };
}, Gi = async function(t, r, s, a) {
  return cs(async () => {
    var f, d;
    const i = r instanceof Ge, o = i ? r : new Ge(s.context instanceof Zt ? s.context : new Zt(s.context), r, t, s.maxTurns ?? Ra), c = s.conversationId || s.previousResponseId ? new Da({
      conversationId: s.conversationId,
      previousResponseId: s.previousResponseId
    }) : void 0;
    c && i && c.primeFromState({
      originalInput: o._originalInput,
      generatedItems: o._generatedItems,
      modelResponses: o._modelResponses
    });
    let l = !1;
    try {
      for (; ; ) {
        if (o._currentStep = o._currentStep ?? {
          type: "next_step_run_again"
        }, o._currentStep.type === "next_step_interruption") {
          if (j.debug("Continuing from interruption"), !o._lastTurnResponse || !o._lastProcessedResponse)
            throw new re("No model response found in previous state", o);
          const h = await va(o._currentAgent, o._originalInput, o._generatedItems, o._lastTurnResponse, o._lastProcessedResponse, this, o);
          if (o._toolUseTracker.addToolUse(o._currentAgent, o._lastProcessedResponse.toolsUsed), o._originalInput = h.originalInput, o._generatedItems = h.generatedItems, h.nextStep.type === "next_step_interruption")
            return o._currentStep = h.nextStep, new $r(o);
          if (h.nextStep.type === "next_step_run_again") {
            l = !0, o._currentStep = void 0;
            continue;
          }
          l = !1, o._currentStep = h.nextStep;
        }
        if (o._currentStep.type === "next_step_run_again") {
          const h = await Ma(o), y = i && l;
          if (l = !1, y || (o._currentTurn++, o._currentTurnPersistedItemCount = 0), o._currentTurn > o._maxTurns)
            throw (f = o._currentAgentSpan) == null || f.setError({
              message: "Max turns exceeded",
              data: { max_turns: o._maxTurns }
            }), new na(`Max turns (${o._maxTurns}) exceeded`, o);
          j.debug(`Running agent ${o._currentAgent.name} (turn ${o._currentTurn})`);
          let v;
          if (o._currentTurn === 1 && !y) {
            const _ = L(this, se, as).call(this, o);
            _.blocking.length > 0 && await L(this, se, hn).call(this, o, _.blocking), _.parallel.length > 0 && (v = L(this, se, hn).call(this, o, _.parallel), v.catch(() => {
            }));
          }
          const x = c ? c.prepareInput(o._originalInput, o._generatedItems) : Bt(o._originalInput, o._generatedItems);
          o._noActiveAgentRun && (o._currentAgent.emit("agent_start", o._context, o._currentAgent), this.emit("agent_start", o._context, o._currentAgent));
          const g = await L(this, se, os).call(this, o, s, h, x, c, a);
          o._lastTurnResponse = await g.model.getResponse({
            systemInstructions: g.modelInput.instructions,
            prompt: g.prompt,
            // Explicit agent/run config models should take precedence over prompt defaults.
            ...g.explictlyModelSet ? { overridePromptModel: !0 } : {},
            input: g.modelInput.input,
            previousResponseId: g.previousResponseId,
            conversationId: g.conversationId,
            modelSettings: g.modelSettings,
            tools: g.serializedTools,
            toolsExplicitlyProvided: g.toolsExplicitlyProvided,
            outputType: ia(o._currentAgent.outputType),
            handoffs: g.serializedHandoffs,
            tracing: Pa(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: s.signal
          }), o._modelResponses.push(o._lastTurnResponse), o._context.usage.add(o._lastTurnResponse.usage), o._noActiveAgentRun = !1, c == null || c.trackServerItems(o._lastTurnResponse);
          const m = _a(o._lastTurnResponse, o._currentAgent, g.tools, g.handoffs);
          o._lastProcessedResponse = m;
          const b = await wa(o._currentAgent, o._originalInput, o._generatedItems, o._lastTurnResponse, o._lastProcessedResponse, this, o);
          o._toolUseTracker.addToolUse(o._currentAgent, o._lastProcessedResponse.toolsUsed), o._originalInput = b.originalInput, o._generatedItems = b.generatedItems, b.nextStep.type === "next_step_run_again" && (o._currentTurnPersistedItemCount = 0), o._currentStep = b.nextStep, v && await v;
        }
        if (o._currentStep && o._currentStep.type === "next_step_final_output")
          return await L(this, se, is).call(this, o, o._currentStep.output), this.emit("agent_end", o._context, o._currentAgent, o._currentStep.output), o._currentAgent.emit("agent_end", o._context, o._currentStep.output), new $r(o);
        if (o._currentStep && o._currentStep.type === "next_step_handoff")
          o._currentAgent = o._currentStep.newAgent, o._currentAgentSpan && (o._currentAgentSpan.end(), mn(), o._currentAgentSpan = void 0), o._noActiveAgentRun = !0, o._currentStep = { type: "next_step_run_again" };
        else {
          if (o._currentStep && o._currentStep.type === "next_step_interruption")
            return new $r(o);
          j.debug("Running next loop");
        }
      }
    } catch (h) {
      throw o._currentAgentSpan && o._currentAgentSpan.setError({
        message: "Error in agent run",
        data: { error: String(h) }
      }), h;
    } finally {
      o._currentAgentSpan && (((d = o._currentStep) == null ? void 0 : d.type) !== "next_step_interruption" && o._currentAgentSpan.end(), mn());
    }
  });
}, Vi = async function(t, r, s, a, i) {
  var y, v, x;
  const o = !!r.conversationId || !!r.previousResponseId, c = o ? new Da({
    conversationId: r.conversationId,
    previousResponseId: r.previousResponseId
  }) : void 0;
  let l = !1, f = !1;
  const d = async () => {
    f || !a || (await a(), f = !0);
  };
  c && s && c.primeFromState({
    originalInput: t.state._originalInput,
    generatedItems: t.state._generatedItems,
    modelResponses: t.state._modelResponses
  });
  let h = !1;
  try {
    for (; ; ) {
      const g = t.state._currentAgent;
      if (t.state._currentStep = t.state._currentStep ?? {
        type: "next_step_run_again"
      }, t.state._currentStep.type === "next_step_interruption") {
        if (j.debug("Continuing from interruption"), !t.state._lastTurnResponse || !t.state._lastProcessedResponse)
          throw new re("No model response found in previous state", t.state);
        const m = await va(t.state._currentAgent, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        if (ba(t, m), t.state._toolUseTracker.addToolUse(t.state._currentAgent, t.state._lastProcessedResponse.toolsUsed), t.state._originalInput = m.originalInput, t.state._generatedItems = m.generatedItems, m.nextStep.type === "next_step_interruption") {
          t.state._currentStep = m.nextStep;
          return;
        }
        if (m.nextStep.type === "next_step_run_again") {
          h = !0, t.state._currentStep = void 0;
          continue;
        }
        h = !1, t.state._currentStep = m.nextStep;
      }
      if (t.state._currentStep.type === "next_step_run_again") {
        const m = await Ma(t.state), b = s && h;
        if (h = !1, b || (t.state._currentTurn++, t.state._currentTurnPersistedItemCount = 0), t.state._currentTurn > t.state._maxTurns)
          throw (y = t.state._currentAgentSpan) == null || y.setError({
            message: "Max turns exceeded",
            data: { max_turns: t.state._maxTurns }
          }), new na(`Max turns (${t.state._maxTurns}) exceeded`, t.state);
        j.debug(`Running agent ${g.name} (turn ${t.state._currentTurn})`);
        let _, D;
        if (t.state._currentTurn === 1 && !b) {
          const ae = L(this, se, as).call(this, t.state);
          ae.blocking.length > 0 && await L(this, se, hn).call(this, t.state, ae.blocking), ae.parallel.length > 0 && (D = L(this, se, hn).call(this, t.state, ae.parallel).catch((oe) => (_ = oe, [])));
        }
        const T = c ? c.prepareInput(t.input, t.newItems) : Bt(t.input, t.newItems);
        t.state._noActiveAgentRun && (g.emit("agent_start", t.state._context, g), this.emit("agent_start", t.state._context, g));
        let A;
        const N = await L(this, se, os).call(this, t.state, r, m, T, c, i);
        if (_)
          throw _;
        l = !0, await d();
        for await (const ae of N.model.getStreamedResponse({
          systemInstructions: N.modelInput.instructions,
          prompt: N.prompt,
          // Streaming requests should also honor explicitly chosen models.
          ...N.explictlyModelSet ? { overridePromptModel: !0 } : {},
          input: N.modelInput.input,
          previousResponseId: N.previousResponseId,
          conversationId: N.conversationId,
          modelSettings: N.modelSettings,
          tools: N.serializedTools,
          toolsExplicitlyProvided: N.toolsExplicitlyProvided,
          handoffs: N.serializedHandoffs,
          outputType: ia(g.outputType),
          tracing: Pa(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
          signal: r.signal
        })) {
          if (_)
            throw _;
          if (ae.type === "response_done") {
            const X = Ni.parse(ae);
            A = {
              usage: new Ar(X.response.usage),
              output: X.response.output,
              responseId: X.response.id
            }, t.state._context.usage.add(A.usage);
          }
          if (t.cancelled)
            return;
          t._addItem(new Pl(ae));
        }
        if (D && (await D, _))
          throw _;
        if (t.state._noActiveAgentRun = !1, !A)
          throw new we("Model did not produce a final response!", t.state);
        t.state._lastTurnResponse = A, c == null || c.trackServerItems(A), t.state._modelResponses.push(t.state._lastTurnResponse);
        const G = _a(t.state._lastTurnResponse, g, N.tools, N.handoffs);
        t.state._lastProcessedResponse = G;
        const B = new Set(G.newItems);
        B.size > 0 && Kl(t, G.newItems);
        const F = await wa(g, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        ba(t, F, {
          skipItems: B
        }), t.state._toolUseTracker.addToolUse(g, G.toolsUsed), t.state._originalInput = F.originalInput, t.state._generatedItems = F.generatedItems, F.nextStep.type === "next_step_run_again" && (t.state._currentTurnPersistedItemCount = 0), t.state._currentStep = F.nextStep;
      }
      if (t.state._currentStep.type === "next_step_final_output") {
        await L(this, se, is).call(this, t.state, t.state._currentStep.output), await d(), o || await Sa(r.session, t), this.emit("agent_end", t.state._context, g, t.state._currentStep.output), g.emit("agent_end", t.state._context, t.state._currentStep.output);
        return;
      } else if (t.state._currentStep.type === "next_step_interruption") {
        await d(), o || await Sa(r.session, t);
        return;
      } else t.state._currentStep.type === "next_step_handoff" ? (t.state._currentAgent = (v = t.state._currentStep) == null ? void 0 : v.newAgent, t.state._currentAgentSpan && (t.state._currentAgentSpan.end(), mn()), t.state._currentAgentSpan = void 0, t._addItem(new Ml(t.state._currentAgent)), t.state._noActiveAgentRun = !0, t.state._currentStep = {
        type: "next_step_run_again"
      }) : j.debug("Running next loop");
    }
  } catch (g) {
    throw l && !f && await d(), t.state._currentAgentSpan && t.state._currentAgentSpan.setError({
      message: "Error in agent run",
      data: { error: String(g) }
    }), g;
  } finally {
    t.state._currentAgentSpan && (((x = t.state._currentStep) == null ? void 0 : x.type) !== "next_step_interruption" && t.state._currentAgentSpan.end(), mn());
  }
}, Wi = async function(t, r, s, a, i) {
  return s = s ?? {}, cs(async () => {
    const o = r instanceof Ge, c = o ? r : new Ge(s.context instanceof Zt ? s.context : new Zt(s.context), r, t, s.maxTurns ?? Ra), l = new Ki({
      signal: s.signal,
      state: c
    });
    l.maxTurns = s.maxTurns ?? c._maxTurns;
    const f = L(this, se, Vi).call(this, l, s, o, a, i).then(() => {
      l._done();
    }, (d) => {
      l._raiseError(d);
    });
    return l._setStreamLoopPromise(f), l;
  });
}, hn = async function(t, r) {
  const s = r ?? L(this, se, ss).call(this, t);
  if (s.length > 0) {
    const a = {
      agent: t._currentAgent,
      input: t._originalInput,
      context: t._context
    };
    try {
      const i = await Promise.all(s.map(async (o) => ma(async (c) => {
        const l = await o.run(a);
        return c.spanData.triggered = l.output.tripwireTriggered, l;
      }, { data: { name: o.name } }, t._currentAgentSpan)));
      t._inputGuardrailResults.push(...i);
      for (const o of i)
        if (o.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: o.guardrail.name }
          }), new sa(`Input guardrail triggered: ${JSON.stringify(o.output.outputInfo)}`, o, t);
      return i;
    } catch (i) {
      throw i instanceof sa ? i : (t._currentTurn--, new ra(`Input guardrail failed to complete: ${i}`, i, t));
    }
  }
  return [];
}, is = async function(t, r) {
  const s = this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(ts));
  if (s.length > 0) {
    const a = t._currentAgent.processFinalOutput(r), i = Bt([], t._generatedItems), o = {
      agent: t._currentAgent,
      agentOutput: a,
      context: t._context,
      details: {
        modelResponse: t._lastTurnResponse,
        output: i
      }
    };
    try {
      const c = await Promise.all(s.map(async (l) => ma(async (f) => {
        const d = await l.run(o);
        return f.spanData.triggered = d.output.tripwireTriggered, d;
      }, { data: { name: l.name } }, t._currentAgentSpan)));
      for (const l of c)
        if (l.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: l.guardrail.name }
          }), new Yr(`Output guardrail triggered: ${JSON.stringify(l.output.outputInfo)}`, l, t);
    } catch (c) {
      throw c instanceof Yr ? c : new ra(`Output guardrail failed to complete: ${c}`, c, t);
    }
  }
}, os = async function(t, r, s, a, i, o) {
  const { model: c, explictlyModelSet: l } = await L(this, se, zi).call(this, t._currentAgent);
  let f = {
    ...this.config.modelSettings,
    ...t._currentAgent.modelSettings
  };
  f = vd(l, t._currentAgent.modelSettings, c, f), f = Ul(t._currentAgent, t._toolUseTracker, f);
  const d = await t._currentAgent.getSystemPrompt(t._context), h = await t._currentAgent.getPrompt(t._context), { modelInput: y, sourceItems: v, persistedItems: x, filterApplied: g } = await _d(t._currentAgent, r.callModelInputFilter, t._context, a, d);
  i == null || i.markInputAsSent(v), o == null || o(v, g ? x : void 0);
  const m = (i == null ? void 0 : i.previousResponseId) ?? r.previousResponseId, b = (i == null ? void 0 : i.conversationId) ?? r.conversationId;
  return {
    ...s,
    model: c,
    explictlyModelSet: l,
    modelSettings: f,
    modelInput: y,
    prompt: h,
    previousResponseId: m,
    conversationId: b
  };
};
function Bt(n, e) {
  const t = e.filter((r) => r.type !== "tool_approval_item").map((r) => r.rawItem);
  return [...us(n), ...t];
}
const Ra = 10;
function yd(n, e) {
  return typeof n == "string" && n !== nt.DEFAULT_MODEL_PLACEHOLDER || n ? n : e ?? n ?? nt.DEFAULT_MODEL_PLACEHOLDER;
}
function Pa(n, e) {
  return n ? !1 : e ? !0 : "enabled_without_data";
}
async function _d(n, e, t, r, s) {
  const a = (y, v) => y.map((x) => {
    const g = structuredClone(x);
    return v && g && typeof g == "object" && v.set(g, x), g;
  }), i = /* @__PURE__ */ new WeakMap(), o = wd(r), c = [];
  for (const y of r)
    y && typeof y == "object" && c.push(y);
  const l = (y) => {
    if (!y || typeof y != "object")
      return;
    const v = c.findIndex((x) => x === y);
    v !== -1 && c.splice(v, 1);
  }, f = () => {
    const y = c.shift();
    return y && ja(o, y), y;
  }, h = {
    input: a(r, i),
    instructions: s
  };
  if (!e)
    return {
      modelInput: h,
      sourceItems: [...r],
      persistedItems: [],
      filterApplied: !1
    };
  try {
    const y = await e({
      modelData: h,
      agent: n,
      context: t.context
    });
    if (!y || !Array.isArray(y.input))
      throw new re("callModelInputFilter must return a ModelInputData object with an input array.");
    const v = y.input.map((g) => {
      if (!g || typeof g != "object")
        return;
      const m = i.get(g);
      if (m)
        return l(m), ja(o, m), m;
      const b = vt(g), _ = bd(o, b);
      if (_)
        return l(_), _;
      const D = f();
      if (D)
        return D;
    }), x = a(y.input);
    return {
      modelInput: {
        input: x,
        instructions: typeof y.instructions > "u" ? s : y.instructions
      },
      sourceItems: v,
      persistedItems: x.map((g) => structuredClone(g)),
      filterApplied: !0
    };
  } catch (y) {
    throw Xe({
      message: "Error in callModelInputFilter",
      data: { error: String(y) }
    }), y;
  }
}
class Da {
  constructor({ conversationId: e, previousResponseId: t }) {
    // Conversation ID:
    // - https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#using-the-conversations-api
    // - https://platform.openai.com/docs/api-reference/conversations/create
    S(this, "conversationId");
    // Previous Response ID:
    // https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#passing-context-from-the-previous-response
    S(this, "previousResponseId");
    // Using this flag because WeakSet does not provide a way to check its size
    S(this, "sentInitialInput", !1);
    // The items already sent to the model; using WeakSet for memory efficiency
    S(this, "sentItems", /* @__PURE__ */ new WeakSet());
    // The items received from the server; using WeakSet for memory efficiency
    S(this, "serverItems", /* @__PURE__ */ new WeakSet());
    // Track initial input items that have not yet been sent so they can be retried on later turns.
    S(this, "remainingInitialInput", null);
    this.conversationId = e ?? void 0, this.previousResponseId = t ?? void 0;
  }
  /**
   * Pre-populates tracker caches from an existing RunState when resuming server-managed runs.
   */
  primeFromState({ originalInput: e, generatedItems: t, modelResponses: r }) {
    if (this.sentInitialInput)
      return;
    for (const a of us(e))
      a && typeof a == "object" && this.sentItems.add(a);
    this.sentInitialInput = !0, this.remainingInitialInput = null;
    const s = r[r.length - 1];
    for (const a of r)
      for (const i of a.output)
        i && typeof i == "object" && this.serverItems.add(i);
    !this.conversationId && (s != null && s.responseId) && (this.previousResponseId = s.responseId);
    for (const a of t) {
      const i = a.rawItem;
      !i || typeof i != "object" || this.serverItems.has(i) && this.sentItems.add(i);
    }
  }
  /**
   * Records the raw items returned by the server so future delta calculations skip them.
   * Also captures the latest response identifier to chain follow-up calls when possible.
   */
  trackServerItems(e) {
    if (e) {
      for (const t of e.output)
        t && typeof t == "object" && this.serverItems.add(t);
      !this.conversationId && e.responseId && (this.previousResponseId = e.responseId);
    }
  }
  /**
   * Returns the minimum set of items that still need to be delivered to the server for the
   * current turn. This includes the original turn inputs (until acknowledged) plus any
   * newly generated items that have not yet been echoed back by the API.
   */
  prepareInput(e, t) {
    const r = [];
    if (this.sentInitialInput)
      this.remainingInitialInput && this.remainingInitialInput.length > 0 && r.push(...this.remainingInitialInput);
    else {
      const s = us(e);
      r.push(...s), this.remainingInitialInput = s.filter((a) => !!a && typeof a == "object"), this.sentInitialInput = !0;
    }
    for (const s of t) {
      if (s.type === "tool_approval_item")
        continue;
      const a = s.rawItem;
      !a || typeof a != "object" || this.sentItems.has(a) || this.serverItems.has(a) || r.push(a);
    }
    return r;
  }
  /**
   * Marks the provided originals as delivered so future turns do not resend them and any
   * pending initial inputs can be dropped once the server acknowledges receipt.
   */
  markInputAsSent(e) {
    if (!e.length)
      return;
    const t = /* @__PURE__ */ new Set();
    for (const r of e)
      !r || typeof r != "object" || t.has(r) || (t.add(r), this.sentItems.add(r));
    !this.remainingInitialInput || this.remainingInitialInput.length === 0 || (this.remainingInitialInput = this.remainingInitialInput.filter((r) => !t.has(r)), this.remainingInitialInput.length === 0 && (this.remainingInitialInput = null));
  }
}
function vd(n, e, t, r) {
  var s, a, i, o, c, l, f, d;
  if (
    // gpt-5 is enabled for the default model for agents
    gi() && // explicitly set model for the agent
    n && // this runner uses a non-gpt-5 model
    (typeof t != "string" || !Sr(t)) && ((s = e.providerData) != null && s.reasoning || (i = (a = e.providerData) == null ? void 0 : a.text) != null && i.verbosity || (o = e.providerData) != null && o.reasoning_effort)
  ) {
    const h = { ...r };
    return (c = h.providerData) == null || delete c.reasoning, (f = (l = h.providerData) == null ? void 0 : l.text) == null || delete f.verbosity, (d = h.providerData) == null || delete d.reasoning_effort, h.reasoning && (delete h.reasoning.effort, delete h.reasoning.summary), h.text && delete h.text.verbosity, h;
  }
  return r;
}
async function Ma(n) {
  const e = await n._currentAgent.getEnabledHandoffs(n._context), t = await n._currentAgent.getAllTools(n._context);
  if (n._currentAgentSpan)
    n._currentAgentSpan.spanData.tools = t.map((r) => r.name);
  else {
    const r = e.map((s) => s.agentName);
    n._currentAgentSpan = kl({
      data: {
        name: n._currentAgent.name,
        handoffs: r,
        tools: t.map((s) => s.name),
        output_type: n._currentAgent.outputSchemaName
      }
    }), n._currentAgentSpan.start(), Rs(n._currentAgentSpan);
  }
  return {
    handoffs: e,
    tools: t,
    serializedHandoffs: e.map((r) => Tl(r)),
    serializedTools: t.map((r) => xl(r)),
    toolsExplicitlyProvided: n._currentAgent.hasExplicitToolConfig()
  };
}
function vt(n) {
  return JSON.stringify(n, Id);
}
function wd(n) {
  const e = /* @__PURE__ */ new Map();
  for (const t of n) {
    const r = vt(t), s = e.get(r);
    s ? s.push(t) : e.set(r, [t]);
  }
  return e;
}
function bd(n, e) {
  const t = n.get(e);
  if (!t || t.length === 0)
    return;
  const [r] = t;
  return t.shift(), t.length === 0 && n.delete(e), r;
}
function ja(n, e) {
  const t = vt(e), r = n.get(t);
  if (!r || r.length === 0)
    return;
  const s = r.findIndex((a) => a === e);
  s !== -1 && (r.splice(s, 1), r.length === 0 && n.delete(t));
}
function Id(n, e) {
  if (e instanceof ArrayBuffer)
    return {
      __type: "ArrayBuffer",
      data: ke(new Uint8Array(e))
    };
  if (Hn(e)) {
    const t = e;
    return {
      __type: t.constructor.name,
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  if (ws(e)) {
    const t = e;
    return {
      __type: "Buffer",
      data: ke(new Uint8Array(t.buffer, t.byteOffset, t.byteLength))
    };
  }
  return br(e) ? {
    __type: "Buffer",
    data: ke(Uint8Array.from(e.data))
  } : e;
}
function us(n) {
  return typeof n == "string" ? [{ type: "message", role: "user", content: n }] : [...n];
}
class Hi {
  constructor(e) {
    S(this, "state");
    this.state = e;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during
   * the agent run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Bt(this.input, this.newItems);
  }
  /**
   * The new items generated during the agent run. These include things like new messages, tool
   * calls and their outputs, etc.
   *
   * It does not include information about the agents and instead represents the model data.
   *
   * For the output including the agents, use the `newItems` property.
   */
  get output() {
    return Bt([], this.newItems);
  }
  /**
   * A copy of the original input items.
   */
  get input() {
    return this.state._originalInput;
  }
  /**
   * The run items generated during the agent run. This associates the model data with the agents.
   *
   * For the model data that can be used as inputs for the next agent run, use the `output` property.
   */
  get newItems() {
    return this.state._generatedItems;
  }
  /**
   * The raw LLM responses generated by the model during the agent run.
   */
  get rawResponses() {
    return this.state._modelResponses;
  }
  /**
   * The last response ID generated by the model during the agent run.
   */
  get lastResponseId() {
    const e = this.rawResponses;
    return e && e.length > 0 ? e[e.length - 1].responseId : void 0;
  }
  /**
   * The last agent that was run
   */
  get lastAgent() {
    return this.state._currentAgent;
  }
  /**
   * Guardrail results for the input messages.
   */
  get inputGuardrailResults() {
    return this.state._inputGuardrailResults;
  }
  /**
   * Guardrail results for the final output of the agent.
   */
  get outputGuardrailResults() {
    return this.state._outputGuardrailResults;
  }
  /**
   * Any interruptions that occurred during the agent run for example for tool approvals.
   */
  get interruptions() {
    var e;
    return ((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_interruption" ? this.state._currentStep.data.interruptions : [];
  }
  /**
   * The final output of the agent. If the output type was set to anything other than `text`,
   * this will be parsed either as JSON or using the Zod schema you provided.
   */
  get finalOutput() {
    var e;
    if (((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_final_output")
      return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);
    j.warn("Accessed finalOutput before agent run is completed.");
  }
}
class $r extends Hi {
  constructor(e) {
    super(e);
  }
}
var An, at, Se, Ve, Vt, Wt, Cn, bt, On;
class Ki extends Hi {
  constructor(t = {}) {
    super(t.state);
    /**
     * The current turn number
     */
    S(this, "currentTurn", 0);
    /**
     * The maximum number of turns that can be run
     */
    S(this, "maxTurns");
    R(this, An, null);
    R(this, at);
    R(this, Se);
    R(this, Ve);
    R(this, Vt);
    R(this, Wt);
    R(this, Cn);
    R(this, bt, !1);
    R(this, On);
    if (k(this, at, t.signal), k(this, Ve, new Tc({
      start: (r) => {
        k(this, Se, r);
      },
      cancel: () => {
        k(this, bt, !0);
      }
    })), k(this, Vt, new Promise((r, s) => {
      k(this, Wt, r), k(this, Cn, s);
    })), u(this, at)) {
      const r = () => {
        var a, i;
        if (u(this, bt))
          return;
        k(this, bt, !0);
        const s = u(this, Se);
        if (k(this, Se, void 0), u(this, Ve).locked) {
          if (s)
            try {
              s.close();
            } catch (o) {
              j.debug(`Failed to close readable stream on abort: ${o}`);
            }
        } else
          u(this, Ve).cancel((a = u(this, at)) == null ? void 0 : a.reason).catch((o) => {
            j.debug(`Failed to cancel readable stream on abort: ${o}`);
          });
        (i = u(this, Wt)) == null || i.call(this);
      };
      u(this, at).aborted ? r() : u(this, at).addEventListener("abort", r, { once: !0 });
    }
  }
  /**
   * The current agent that is running
   */
  get currentAgent() {
    return this.lastAgent;
  }
  /**
   * @internal
   * Adds an item to the stream of output items
   */
  _addItem(t) {
    var r;
    this.cancelled || (r = u(this, Se)) == null || r.enqueue(t);
  }
  /**
   * @internal
   * Indicates that the stream has been completed
   */
  _done() {
    var t;
    !this.cancelled && u(this, Se) && (u(this, Se).close(), k(this, Se, void 0), (t = u(this, Wt)) == null || t.call(this));
  }
  /**
   * @internal
   * Handles an error in the stream loop.
   */
  _raiseError(t) {
    var r;
    !this.cancelled && u(this, Se) && (u(this, Se).error(t), k(this, Se, void 0)), k(this, An, t), (r = u(this, Cn)) == null || r.call(this, t), u(this, Vt).catch((s) => {
      j.debug(`Resulted in an error: ${s}`);
    });
  }
  /**
   * Returns true if the stream has been cancelled.
   */
  get cancelled() {
    return u(this, bt);
  }
  /**
   * Returns the underlying readable stream.
   * @returns A readable stream of the agent run.
   */
  toStream() {
    return u(this, Ve);
  }
  /**
   * Await this promise to ensure that the stream has been completed if you are not consuming the
   * stream directly.
   */
  get completed() {
    return u(this, Vt);
  }
  /**
   * Error thrown during the run, if any.
   */
  get error() {
    return u(this, An);
  }
  toTextStream(t = {}) {
    const r = u(this, Ve).pipeThrough(new kc({
      transform(s, a) {
        if (s.type === "raw_model_stream_event" && s.data.type === "output_text_delta") {
          const i = Ei.parse(s.data);
          a.enqueue(i.delta);
        }
      }
    }));
    return t.compatibleWithNodeStreams ? xc.fromWeb(r) : r;
  }
  [Symbol.asyncIterator]() {
    return u(this, Ve)[Symbol.asyncIterator]();
  }
  /**
   * @internal
   * Sets the stream loop promise that completes when the internal stream loop finishes.
   * This is used to defer trace end until all agent work is complete.
   */
  _setStreamLoopPromise(t) {
    k(this, On, t);
  }
  /**
   * @internal
   * Returns a promise that resolves when the stream loop completes.
   * This is used by the tracing system to wait for all agent work before ending the trace.
   */
  _getStreamLoopPromise() {
    return u(this, On);
  }
}
An = new WeakMap(), at = new WeakMap(), Se = new WeakMap(), Ve = new WeakMap(), Vt = new WeakMap(), Wt = new WeakMap(), Cn = new WeakMap(), bt = new WeakMap(), On = new WeakMap();
let $a;
function Ze() {
  return $a ?? ($a = new Ac()), $a;
}
function un() {
  const n = Ze().getStore();
  return n != null && n.trace ? n.trace : null;
}
function xn() {
  const n = Ze().getStore();
  return n != null && n.span ? n.span : null;
}
function Yi(n) {
  return async () => {
    const e = un();
    if (!e)
      throw new Error("No trace found");
    await e.start();
    const t = await n(e);
    if (t instanceof Ki) {
      const r = t._getStreamLoopPromise();
      if (r)
        return r.finally(() => e.end()), t;
    }
    return await e.end(), t;
  };
}
async function Sd(n, e, t = {}) {
  const r = typeof n == "string" ? qe().createTrace({
    ...t,
    name: n
  }) : n;
  return Ze().run({ trace: r }, Yi(e));
}
async function xd(n, e = {}) {
  if (un())
    return await n();
  const r = qe().createTrace(e);
  return Ze().run({ trace: r }, Yi(n));
}
function Rs(n) {
  const e = Ze().getStore();
  if (!e)
    throw new Error("No existing trace found");
  e.span && (e.span.previousSpan = e.previousSpan, e.previousSpan = e.span), e.span = n, Ze().enterWith(e);
}
function mn() {
  var e;
  const n = Ze().getStore();
  n && (n.span = n.previousSpan, n.previousSpan = (e = n.previousSpan) == null ? void 0 : e.previousSpan, Ze().enterWith(n));
}
function Xe(n) {
  const e = xn();
  e && e.setError(n);
}
function Td(n) {
  var e, t, r;
  return {
    trace: (e = n.trace) == null ? void 0 : e.clone(),
    span: (t = n.span) == null ? void 0 : t.clone(),
    previousSpan: (r = n.previousSpan) == null ? void 0 : r.clone()
  };
}
function cs(n) {
  const e = Ze().getStore();
  if (!e)
    throw new Error("No existing trace found");
  const t = Td(e);
  return Ze().run(t, n);
}
class kd {
  async export(e) {
    if (di.disabled) {
      j.debug("Tracing is disabled. Skipping export");
      return;
    }
    for (const t of e)
      t.type === "trace" ? console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}${t.groupId ? ` groupId=${t.groupId}` : ""}`) : console.log(`[Exporter] Export span: ${JSON.stringify(t)}`);
  }
}
var En, Ht, Nn, Rn, Kt, me, We, it, ot, Yt, be, ls, ds, Ut;
class Ad {
  constructor(e, {
    maxQueueSize: t = 1e3,
    maxBatchSize: r = 100,
    scheduleDelay: s = 5e3,
    // 5 seconds
    exportTriggerRatio: a = 0.8
  } = {}) {
    R(this, be);
    R(this, En);
    R(this, Ht);
    R(this, Nn);
    R(this, Rn);
    R(this, Kt);
    R(this, me, []);
    R(this, We);
    R(this, it, null);
    R(this, ot, !1);
    R(this, Yt, null);
    k(this, En, t), k(this, Ht, r), k(this, Nn, s), k(this, Rn, t * a), k(this, Kt, e), k(this, We, Oc), j.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.");
  }
  start() {
    k(this, Yt, new AbortController()), L(this, be, ds).call(this);
  }
  async onTraceStart(e) {
    await L(this, be, ls).call(this, e);
  }
  async onTraceEnd(e) {
  }
  async onSpanStart(e) {
  }
  async onSpanEnd(e) {
    await L(this, be, ls).call(this, e);
  }
  async shutdown(e) {
    var t;
    for (e && u(this, We).setTimeout(() => {
      var r;
      (r = u(this, Yt)) == null || r.abort();
    }, e), j.debug("Shutting down gracefully"); u(this, me).length > 0; ) {
      if (j.debug(`Waiting for buffer to empty. Items left: ${u(this, me).length}`), u(this, ot) || await L(this, be, Ut).call(this, !0), (t = u(this, Yt)) != null && t.signal.aborted) {
        j.debug("Timeout reached, force flushing"), await L(this, be, Ut).call(this, !0);
        break;
      }
      await new Promise((r) => u(this, We).setTimeout(r, 500));
    }
    j.debug("Buffer empty. Exiting"), u(this, We) && u(this, it) && u(this, We).clearTimeout(u(this, it));
  }
  async forceFlush() {
    u(this, me).length > 0 && await L(this, be, Ut).call(this, !0);
  }
}
En = new WeakMap(), Ht = new WeakMap(), Nn = new WeakMap(), Rn = new WeakMap(), Kt = new WeakMap(), me = new WeakMap(), We = new WeakMap(), it = new WeakMap(), ot = new WeakMap(), Yt = new WeakMap(), be = new WeakSet(), ls = async function(e) {
  if (u(this, me).length + 1 > u(this, En)) {
    j.error("Dropping trace because buffer is full");
    return;
  }
  u(this, me).push(e), u(this, me).length > u(this, Rn) && await L(this, be, Ut).call(this);
}, ds = function() {
  k(this, it, u(this, We).setTimeout(async () => {
    await L(this, be, Ut).call(this), L(this, be, ds).call(this);
  }, u(this, Nn))), typeof u(this, it).unref == "function" && u(this, it).unref();
}, Ut = async function(e = !1) {
  if (u(this, me).length !== 0) {
    if (j.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this, me).length}`), e || u(this, me).length < u(this, Ht)) {
      const t = [...u(this, me)];
      k(this, me, []), k(this, ot, !0), await u(this, Kt).export(t), k(this, ot, !1);
    } else if (u(this, me).length > 0) {
      const t = u(this, me).splice(0, u(this, Ht));
      k(this, ot, !0), await u(this, Kt).export(t), k(this, ot, !1);
    }
  }
};
var xe;
class Cd {
  constructor() {
    R(this, xe, []);
  }
  start() {
    for (const e of u(this, xe))
      e.start && e.start();
  }
  addTraceProcessor(e) {
    u(this, xe).push(e);
  }
  setProcessors(e) {
    j.debug("Shutting down old processors");
    for (const t of u(this, xe))
      t.shutdown();
    k(this, xe, e);
  }
  async onTraceStart(e) {
    for (const t of u(this, xe))
      await t.onTraceStart(e);
  }
  async onTraceEnd(e) {
    for (const t of u(this, xe))
      await t.onTraceEnd(e);
  }
  async onSpanStart(e) {
    for (const t of u(this, xe))
      await t.onSpanStart(e);
  }
  async onSpanEnd(e) {
    for (const t of u(this, xe))
      await t.onSpanEnd(e);
  }
  async shutdown(e) {
    for (const t of u(this, xe))
      await t.shutdown(e);
  }
  async forceFlush() {
    for (const e of u(this, xe))
      await e.forceFlush();
  }
}
xe = new WeakMap();
let Fr = null, Lr = null;
function Od() {
  return Fr || (Fr = new kd()), Fr;
}
function Xi() {
  return Lr || (Lr = new Ad(Od())), Lr;
}
function Fa() {
  return (/* @__PURE__ */ new Date()).toISOString();
}
function Qi() {
  return `trace_${mi().replace(/-/g, "")}`;
}
function Ed() {
  return `span_${mi().replace(/-/g, "").slice(0, 24)}`;
}
function Nd(n) {
  return Object.fromEntries(Object.entries(n).filter(([e]) => !e.startsWith("_")));
}
var Pn, Dn, Mn, jn, It, ut, ct, St, $n;
const Ds = class Ds {
  constructor(e, t) {
    S(this, "type", "trace.span");
    R(this, Pn);
    R(this, Dn);
    R(this, Mn);
    R(this, jn);
    R(this, It);
    R(this, ut);
    R(this, ct);
    R(this, St);
    R(this, $n);
    k(this, Dn, e.traceId), k(this, Mn, e.spanId ?? Ed()), k(this, Pn, e.data), k(this, It, t), k(this, jn, e.parentId ?? null), k(this, St, e.error ?? null), k(this, ut, e.startedAt ?? null), k(this, ct, e.endedAt ?? null);
  }
  get traceId() {
    return u(this, Dn);
  }
  get spanData() {
    return u(this, Pn);
  }
  get spanId() {
    return u(this, Mn);
  }
  get parentId() {
    return u(this, jn);
  }
  get previousSpan() {
    return u(this, $n);
  }
  set previousSpan(e) {
    k(this, $n, e);
  }
  start() {
    if (u(this, ut)) {
      j.warn("Span already started");
      return;
    }
    k(this, ut, Fa()), u(this, It).onSpanStart(this);
  }
  end() {
    if (u(this, ct)) {
      j.debug("Span already finished", this.spanData);
      return;
    }
    k(this, ct, Fa()), u(this, It).onSpanEnd(this);
  }
  setError(e) {
    k(this, St, e);
  }
  get error() {
    return u(this, St);
  }
  get startedAt() {
    return u(this, ut);
  }
  get endedAt() {
    return u(this, ct);
  }
  clone() {
    var t;
    const e = new Ds({
      traceId: this.traceId,
      spanId: this.spanId,
      parentId: this.parentId ?? void 0,
      data: this.spanData,
      startedAt: u(this, ut) ?? void 0,
      endedAt: u(this, ct) ?? void 0,
      error: u(this, St) ?? void 0
    }, u(this, It));
    return e.previousSpan = (t = this.previousSpan) == null ? void 0 : t.clone(), e;
  }
  toJSON() {
    return {
      object: this.type,
      id: this.spanId,
      trace_id: this.traceId,
      parent_id: this.parentId,
      started_at: this.startedAt,
      ended_at: this.endedAt,
      span_data: Nd(this.spanData),
      error: this.error
    };
  }
};
Pn = new WeakMap(), Dn = new WeakMap(), Mn = new WeakMap(), jn = new WeakMap(), It = new WeakMap(), ut = new WeakMap(), ct = new WeakMap(), St = new WeakMap(), $n = new WeakMap();
let Tn = Ds;
class rt extends Tn {
  constructor(e, t) {
    super({ traceId: "no-op", spanId: "no-op", data: e }, t);
  }
  start() {
  }
  end() {
  }
  setError() {
  }
  toJSON() {
    return null;
  }
}
var Xt, He;
const Ms = class Ms {
  constructor(e, t) {
    S(this, "type", "trace");
    S(this, "traceId");
    S(this, "name");
    S(this, "groupId", null);
    S(this, "metadata");
    R(this, Xt);
    R(this, He);
    this.traceId = e.traceId ?? Qi(), this.name = e.name ?? "Agent workflow", this.groupId = e.groupId ?? null, this.metadata = e.metadata ?? {}, k(this, Xt, t ?? Xi()), k(this, He, e.started ?? !1);
  }
  async start() {
    u(this, He) || (k(this, He, !0), await u(this, Xt).onTraceStart(this));
  }
  async end() {
    u(this, He) && (k(this, He, !1), await u(this, Xt).onTraceEnd(this));
  }
  clone() {
    return new Ms({
      traceId: this.traceId,
      name: this.name,
      groupId: this.groupId ?? void 0,
      metadata: this.metadata,
      started: u(this, He)
    });
  }
  toJSON() {
    return {
      object: this.type,
      id: this.traceId,
      workflow_name: this.name,
      group_id: this.groupId,
      metadata: this.metadata
    };
  }
};
Xt = new WeakMap(), He = new WeakMap();
let kn = Ms;
class Ur extends kn {
  constructor() {
    super({});
  }
  async start() {
  }
  async end() {
  }
  toJSON() {
    return null;
  }
}
var he, xt, vr, eo;
class Rd {
  constructor() {
    R(this, vr);
    R(this, he);
    R(this, xt);
    k(this, he, new Cd()), k(this, xt, di.disabled), L(this, vr, eo).call(this);
  }
  /**
   * Add a processor to the list of processors. Each processor will receive all traces/spans.
   *
   * @param processor - The processor to add.
   */
  registerProcessor(e) {
    u(this, he).addTraceProcessor(e);
  }
  /**
   * Set the list of processors. This will replace any existing processors.
   *
   * @param processors - The list of processors to set.
   */
  setProcessors(e) {
    u(this, he).setProcessors(e);
  }
  /**
   * Get the current trace.
   *
   * @returns The current trace.
   */
  getCurrentTrace() {
    return un();
  }
  getCurrentSpan() {
    return xn();
  }
  setDisabled(e) {
    k(this, xt, e);
  }
  startExportLoop() {
    u(this, he).start();
  }
  createTrace(e) {
    if (u(this, xt))
      return j.debug("Tracing is disabled, Not creating trace %o", e), new Ur();
    const t = e.traceId ?? Qi(), r = e.name ?? "Agent workflow";
    return j.debug("Creating trace %s with name %s", t, r), new kn({ ...e, name: r, traceId: t }, u(this, he));
  }
  createSpan(e, t) {
    if (u(this, xt) || e.disabled)
      return j.debug("Tracing is disabled, Not creating span %o", e), new rt(e.data, u(this, he));
    let r, s;
    if (t) {
      if (t instanceof kn) {
        if (t instanceof Ur)
          return j.debug("Parent trace is no-op, returning NoopSpan"), new rt(e.data, u(this, he));
        s = t.traceId;
      } else if (t instanceof Tn) {
        if (t instanceof rt)
          return j.debug("Parent span is no-op, returning NoopSpan"), new rt(e.data, u(this, he));
        r = t.spanId, s = t.traceId;
      }
    } else {
      const a = un(), i = xn();
      if (!a)
        return j.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new rt(e.data, u(this, he));
      if (i instanceof rt || a instanceof Ur)
        return j.debug(`Parent ${i} or ${a} is no-op, returning NoopSpan`), new rt(e.data, u(this, he));
      s = a.traceId, i ? (j.debug("Using parent span %s", i.spanId), r = i.spanId) : j.debug("No parent span, using current trace %s", a.traceId);
    }
    return s ? (j.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId ?? s}`), new Tn({
      ...e,
      traceId: s,
      parentId: r
    }, u(this, he))) : (j.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new rt(e.data, u(this, he)));
  }
  async shutdown(e) {
    try {
      j.debug("Shutting down tracing provider"), await u(this, he).shutdown(e);
    } catch (t) {
      j.error("Error shutting down tracing provider %o", t);
    }
  }
  async forceFlush() {
    await u(this, he).forceFlush();
  }
}
he = new WeakMap(), xt = new WeakMap(), vr = new WeakSet(), /** Adds listeners to `process` to ensure `shutdown` occurs before exit. */
eo = function() {
  if (typeof process < "u" && typeof process.on == "function") {
    const e = async () => {
      const t = setTimeout(() => {
        console.warn("Cleanup timeout, forcing exit"), process.exit(1);
      }, 5e3);
      try {
        await this.shutdown();
      } finally {
        clearTimeout(t);
      }
    };
    process.on("beforeExit", e), process.on("SIGINT", async () => {
      await e(), La("SIGINT") || process.exit(130);
    }), process.on("SIGTERM", async () => {
      await e(), La("SIGTERM") || process.exit(0);
    }), process.on("unhandledRejection", async (t, r) => {
      j.error("Unhandled rejection", t, r), await e(), Pd("unhandledRejection") || process.exit(1);
    });
  }
};
function La(n) {
  return process.listeners(n).length > 1;
}
function Pd(n) {
  return process.listeners(n).length > 1;
}
let Zr;
function qe() {
  return Zr || (Zr = new Rd()), Zr;
}
function Dd(n) {
  qe().registerProcessor(n);
}
Dd(Xi());
function to(n) {
  const e = atob(n), t = e.length, r = new Uint8Array(t);
  for (let s = 0; s < t; s++)
    r[s] = e.charCodeAt(s);
  return r.buffer;
}
function no(n) {
  const e = String.fromCharCode(...new Uint8Array(n));
  return btoa(e);
}
function ro(n) {
  if (typeof n > "u" || n === null || typeof n != "object" || !("type" in n) || typeof n.type != "string" || !n.type || n.type !== "message" || !("content" in n) || !Array.isArray(n.content) || n.content.length < 1)
    return;
  const e = n.content[n.content.length - 1];
  if (!(!("type" in e) || typeof e.type != "string")) {
    if (e.type === "output_text")
      return typeof e.text == "string" ? e.text : void 0;
    if (e.type === "output_audio")
      return typeof e.transcript == "string" ? e.transcript : void 0;
  }
}
function Md(n, e) {
  const t = n.filter((a) => !e.some((i) => i.itemId === a.itemId)), r = e.filter((a) => !n.some((i) => i.itemId === a.itemId)), s = e.filter((a) => n.some((i) => i.itemId === a.itemId && JSON.stringify(i) !== JSON.stringify(a)));
  return {
    removals: t,
    additions: r,
    updates: s
  };
}
function jd() {
  return typeof window > "u" ? !1 : typeof window.RTCPeerConnection < "u";
}
function Ua(n) {
  return n.role === "system" ? n : n.role === "assistant" ? {
    ...n,
    content: n.content.map((e) => e.type === "output_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n.role === "user" ? {
    ...n,
    content: n.content.map((e) => e.type === "input_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n;
}
function $d(n, e) {
  if (n.role !== "assistant" || e.role !== "assistant")
    return e;
  const t = e.content.map((r, s) => {
    if (r.type !== "output_audio" || !(typeof r.transcript != "string" || r.transcript.length === 0))
      return r;
    const i = n.content[s];
    return i && i.type === "output_audio" && typeof i.transcript == "string" && i.transcript.length > 0 ? {
      ...r,
      transcript: i.transcript
    } : r;
  });
  return {
    ...e,
    content: t
  };
}
function Za(n, e, t) {
  if (e.type === "conversation.item.input_audio_transcription.completed")
    return n.map((a) => {
      if (a.itemId === e.item_id && a.type === "message" && "role" in a && a.role === "user") {
        const i = a.content.map((o) => o.type === "input_audio" ? {
          ...o,
          transcript: e.transcript
        } : o);
        return {
          ...a,
          content: i,
          status: "completed"
        };
      }
      return a;
    });
  const r = !t && e.type === "message" ? Ua(e) : e, s = n.findIndex((a) => a.itemId === e.itemId);
  if (s !== -1) {
    const a = n[s], i = r.type === "message" && a.type === "message" ? $d(a, r) : r;
    return n.map((o, c) => c === s ? i : !t && o.type === "message" ? Ua(o) : o);
  } else if (e.previousItemId) {
    const a = n.findIndex((i) => i.itemId === e.previousItemId);
    return a !== -1 ? [
      ...n.slice(0, a + 1),
      r,
      ...n.slice(a + 1)
    ] : [...n, r];
  } else
    return [...n, r];
}
const so = {
  "User-Agent": `Agents/JavaScript ${qr.version}`,
  "X-OpenAI-Agents-SDK": `openai-agents-sdk.${qr.version}`
}, Fd = `openai-agents-sdk.${qr.version}`;
function Ld(n, e) {
  const { name: t, arguments: r, ...s } = e;
  return new ye({
    type: "hosted_tool_call",
    name: t,
    arguments: JSON.stringify(r),
    status: "in_progress",
    providerData: {
      ...s
    }
  }, n);
}
function qa(n) {
  if (n.rawItem.type !== "function_call" && n.rawItem.type !== "hosted_tool_call")
    throw new Error("Invalid approval item type for Realtime MCP approval request");
  const { name: e, arguments: t, providerData: r } = n.rawItem, { itemId: s, serverLabel: a, ...i } = r ?? {};
  if (!s || !a)
    throw new Error("Invalid approval item for Realtime MCP approval request");
  return {
    type: "mcp_approval_request",
    itemId: s,
    serverLabel: a,
    ...i,
    name: e,
    arguments: t ? JSON.parse(t) : {},
    approved: null
  };
}
class ef extends nt {
  constructor(t) {
    super(t);
    /**
     * The voice intended to be used by the agent. If another agent already spoke during the
     * RealtimeSession, changing the voice during a handoff will fail.
     */
    S(this, "voice");
    this.voice = t.voice;
  }
}
function Ud(n) {
  return {
    debounceTextLength: n.debounceTextLength ?? 100
  };
}
function Zd({ policyHint: n, ...e }) {
  const t = ts(e), r = n ?? t.name;
  return {
    ...t,
    policyHint: r,
    run: async (s) => {
      const a = await t.run(s);
      return {
        ...a,
        guardrail: { ...a.guardrail, policyHint: r }
      };
    }
  };
}
function qd(n) {
  return `
 Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo ?? {})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim();
}
function gt(n, e) {
  return n in e && typeof e[n] < "u";
}
function Jd(n) {
  return gt("modalities", n) || gt("inputAudioFormat", n) || gt("outputAudioFormat", n) || gt("inputAudioTranscription", n) || gt("turnDetection", n) || gt("inputAudioNoiseReduction", n) || gt("speed", n);
}
function Bd(n) {
  var e, t, r, s, a, i, o, c;
  if (!Jd(n)) {
    const l = (e = n.audio) != null && e.input ? {
      format: er(n.audio.input.format),
      noiseReduction: n.audio.input.noiseReduction ?? null,
      transcription: n.audio.input.transcription,
      turnDetection: n.audio.input.turnDetection
    } : void 0, f = ((r = (t = n.audio) == null ? void 0 : t.output) == null ? void 0 : r.voice) ?? n.voice, d = (s = n.audio) != null && s.output || typeof f < "u" ? {
      format: er((i = (a = n.audio) == null ? void 0 : a.output) == null ? void 0 : i.format),
      voice: f,
      speed: (c = (o = n.audio) == null ? void 0 : o.output) == null ? void 0 : c.speed
    } : void 0;
    return {
      model: n.model,
      instructions: n.instructions,
      toolChoice: n.toolChoice,
      tools: n.tools,
      tracing: n.tracing,
      providerData: n.providerData,
      prompt: n.prompt,
      outputModalities: n.outputModalities,
      audio: l || d ? {
        input: l,
        output: d
      } : void 0
    };
  }
  return {
    model: n.model,
    instructions: n.instructions,
    toolChoice: n.toolChoice,
    tools: n.tools,
    tracing: n.tracing,
    providerData: n.providerData,
    prompt: n.prompt,
    outputModalities: n.modalities,
    audio: {
      input: {
        format: er(n.inputAudioFormat),
        noiseReduction: n.inputAudioNoiseReduction ?? null,
        transcription: n.inputAudioTranscription,
        turnDetection: n.turnDetection
      },
      output: {
        format: er(n.outputAudioFormat),
        voice: n.voice,
        speed: n.speed
      }
    }
  };
}
function er(n) {
  if (!n)
    return;
  if (typeof n == "object")
    return n;
  const e = String(n);
  return e === "pcm16" ? { type: "audio/pcm", rate: 24e3 } : e === "g711_ulaw" ? { type: "audio/pcmu" } : e === "g711_alaw" ? { type: "audio/pcma" } : { type: "audio/pcm", rate: 24e3 };
}
w({
  itemId: p()
});
const Ja = ge("role", [
  w({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: I("message"),
    role: I("system"),
    content: J(w({ type: I("input_text"), text: p() }))
  }),
  w({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: I("message"),
    role: I("user"),
    status: ce(["in_progress", "completed"]),
    content: J(w({ type: I("input_text"), text: p() }).or(w({
      type: I("input_audio"),
      audio: p().nullable().optional(),
      transcript: p().nullable()
    })))
  }),
  w({
    itemId: p(),
    previousItemId: p().nullable().optional(),
    type: I("message"),
    role: I("assistant"),
    status: ce(["in_progress", "completed", "incomplete"]),
    content: J(w({ type: I("output_text"), text: p() }).or(w({
      type: I("output_audio"),
      audio: p().nullable().optional(),
      transcript: p().nullable().optional()
    })))
  })
]), Ba = w({
  itemId: p(),
  previousItemId: p().nullable().optional(),
  type: I("function_call"),
  status: ce(["in_progress", "completed", "incomplete"]),
  arguments: p(),
  name: p(),
  output: p().nullable()
}), za = w({
  itemId: p(),
  previousItemId: p().nullable().optional(),
  type: ce(["mcp_call", "mcp_tool_call"]),
  status: ce(["in_progress", "completed", "incomplete"]),
  arguments: p(),
  name: p(),
  output: p().nullable()
}), zd = w({
  itemId: p(),
  type: I("mcp_approval_request"),
  serverLabel: p(),
  name: p(),
  arguments: te(p(), W()),
  approved: Nt().optional().nullable()
}), Te = fi("openai-agents:realtime"), ao = w({
  id: p().optional().nullable(),
  conversation_id: p().optional().nullable(),
  max_output_tokens: E().or(I("inf")).optional().nullable(),
  metadata: te(p(), W()).optional().nullable(),
  // GA rename: modalities -> output_modalities
  output_modalities: J(p()).optional().nullable(),
  object: I("realtime.response").optional().nullable(),
  output: J(W()).optional().nullable(),
  // GA grouping: audio.output.{format,voice}
  audio: w({
    output: w({
      format: W().optional().nullable(),
      voice: p().optional().nullable()
    }).optional().nullable()
  }).optional().nullable(),
  status: ce(["completed", "incomplete", "failed", "cancelled", "in_progress"]).optional().nullable(),
  status_details: te(p(), W()).optional().nullable(),
  usage: w({
    input_tokens: E().optional(),
    input_token_details: te(p(), W()).optional().nullable(),
    output_tokens: E().optional(),
    output_token_details: te(p(), W()).optional().nullable()
  }).optional().nullable()
}), Gd = w({
  id: p().optional(),
  audio: p().nullable().optional(),
  text: p().nullable().optional(),
  transcript: p().nullable().optional(),
  type: tt([
    I("input_text"),
    I("input_audio"),
    I("item_reference"),
    I("output_text"),
    I("output_audio")
  ])
}), ln = w({
  id: p().optional(),
  arguments: p().optional(),
  call_id: p().optional(),
  content: J(Gd).optional(),
  name: p().optional(),
  output: p().nullable().optional(),
  role: ce(["user", "assistant", "system"]).optional(),
  status: ce(["completed", "incomplete", "in_progress"]).optional(),
  type: ce([
    "message",
    "function_call",
    "function_call_output",
    "mcp_list_tools",
    "mcp_tool_call",
    "mcp_call",
    "mcp_approval_request",
    "mcp_approval_response"
  ]).optional(),
  approval_request_id: p().nullable().optional(),
  approve: Nt().nullable().optional(),
  reason: p().nullable().optional(),
  server_label: p().optional(),
  error: W().nullable().optional(),
  tools: J(w({
    name: p(),
    description: p(),
    input_schema: te(W()).optional()
  }).passthrough()).optional()
}).passthrough(), Vd = w({
  type: I("conversation.created"),
  event_id: p(),
  conversation: w({
    id: p().optional(),
    object: I("realtime.conversation").optional()
  })
}), Wd = w({
  type: I("conversation.item.added"),
  event_id: p(),
  item: ln,
  previous_item_id: p().nullable().optional()
}), Hd = w({
  type: I("conversation.item.done"),
  event_id: p(),
  item: ln,
  previous_item_id: p().nullable().optional()
}), Kd = w({
  type: I("conversation.item.deleted"),
  event_id: p(),
  item_id: p()
}), Yd = w({
  type: I("conversation.item.input_audio_transcription.completed"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  transcript: p(),
  logprobs: J(W()).nullable().optional(),
  usage: w({
    type: I("tokens"),
    total_tokens: E(),
    input_tokens: E(),
    input_token_details: w({
      text_tokens: E(),
      audio_tokens: E()
    }),
    output_tokens: E()
  }).optional()
}), Xd = w({
  type: I("conversation.item.input_audio_transcription.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E().optional(),
  delta: p().optional(),
  logprobs: J(W()).nullable().optional()
}), Qd = w({
  type: I("conversation.item.input_audio_transcription.failed"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  error: w({
    code: p().optional(),
    message: p().optional(),
    param: p().optional(),
    type: p().optional()
  })
}), ep = w({
  type: I("conversation.item.retrieved"),
  event_id: p(),
  item: ln
}), tp = w({
  type: I("conversation.item.truncated"),
  event_id: p(),
  item_id: p(),
  audio_end_ms: E(),
  content_index: E()
}), np = w({
  type: I("conversation.item.create"),
  item: ln,
  event_id: p().optional(),
  previous_item_id: p().nullable().optional()
}), rp = w({
  type: I("conversation.item.delete"),
  item_id: p(),
  event_id: p().optional()
}), sp = w({
  type: I("conversation.item.retrieve"),
  item_id: p(),
  event_id: p().optional()
}), ap = w({
  type: I("conversation.item.truncate"),
  item_id: p(),
  audio_end_ms: E(),
  content_index: E(),
  event_id: p().optional()
}), ip = w({
  type: I("error"),
  event_id: p().optional(),
  error: W().optional()
}), op = w({
  type: I("input_audio_buffer.cleared"),
  event_id: p()
}), up = w({
  type: I("input_audio_buffer.append"),
  audio: p(),
  event_id: p().optional()
}), cp = w({
  type: I("input_audio_buffer.clear"),
  event_id: p().optional()
}), lp = w({
  type: I("input_audio_buffer.commit"),
  event_id: p().optional()
}), dp = w({
  type: I("input_audio_buffer.committed"),
  event_id: p(),
  item_id: p(),
  previous_item_id: p().nullable().optional()
}), pp = w({
  type: I("input_audio_buffer.speech_started"),
  event_id: p(),
  item_id: p(),
  audio_start_ms: E()
}), fp = w({
  type: I("input_audio_buffer.speech_stopped"),
  event_id: p(),
  item_id: p(),
  audio_end_ms: E()
}), hp = w({
  type: I("output_audio_buffer.started"),
  event_id: p()
}).passthrough(), mp = w({
  type: I("output_audio_buffer.stopped"),
  event_id: p()
}).passthrough(), gp = w({
  type: I("output_audio_buffer.cleared"),
  event_id: p()
}), yp = w({
  type: I("rate_limits.updated"),
  event_id: p(),
  rate_limits: J(w({
    limit: E().optional(),
    name: ce(["requests", "tokens"]).optional(),
    remaining: E().optional(),
    reset_seconds: E().optional()
  }))
}), _p = w({
  type: I("response.output_audio.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), vp = w({
  type: I("response.output_audio.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p()
}), wp = w({
  type: I("response.output_audio_transcript.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), bp = w({
  //  GA may introduce response.output_audio_transcript.done
  type: I("response.output_audio_transcript.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  transcript: p(),
  output_index: E(),
  response_id: p()
}), Ip = w({
  type: I("response.content_part.added"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p(),
  part: w({
    audio: p().optional(),
    text: p().optional(),
    transcript: p().optional(),
    type: ce(["text", "audio"]).optional()
  })
}), Sp = w({
  type: I("response.content_part.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  output_index: E(),
  response_id: p(),
  part: w({
    audio: p().optional(),
    text: p().optional(),
    transcript: p().optional(),
    type: ce(["text", "audio"]).optional()
  })
}), xp = w({
  type: I("response.created"),
  event_id: p(),
  response: ao
}), io = w({
  type: I("response.done"),
  event_id: p(),
  response: ao
}), Tp = w({
  type: I("response.function_call_arguments.delta"),
  event_id: p(),
  item_id: p(),
  call_id: p(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), kp = w({
  type: I("response.function_call_arguments.done"),
  event_id: p(),
  item_id: p(),
  call_id: p(),
  arguments: p(),
  output_index: E(),
  response_id: p()
}), Ap = w({
  type: I("response.output_item.added"),
  event_id: p(),
  item: ln,
  output_index: E(),
  response_id: p()
}), Cp = w({
  type: I("response.output_item.done"),
  event_id: p(),
  item: ln,
  output_index: E(),
  response_id: p()
}), Op = w({
  type: I("response.output_text.delta"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  delta: p(),
  output_index: E(),
  response_id: p()
}), Ep = w({
  // No rename specified for done; keep response.text.done
  type: I("response.output_text.done"),
  event_id: p(),
  item_id: p(),
  content_index: E(),
  text: p(),
  output_index: E(),
  response_id: p()
}), Np = w({
  type: I("session.created"),
  event_id: p(),
  session: W()
}), Rp = w({
  type: I("session.updated"),
  event_id: p(),
  session: W()
}), Pp = w({
  type: I("response.cancel"),
  event_id: p().optional(),
  response_id: p().optional()
}), Dp = w({
  type: I("response.create"),
  event_id: p().optional(),
  response: W().optional()
}), Mp = w({
  type: I("session.update"),
  event_id: p().optional(),
  session: W()
}), jp = w({
  type: I("mcp_list_tools.in_progress"),
  event_id: p().optional(),
  item_id: p().optional()
}), $p = w({
  type: I("mcp_list_tools.completed"),
  event_id: p().optional(),
  item_id: p().optional()
}), Fp = w({
  type: I("response.mcp_call_arguments.delta"),
  event_id: p(),
  response_id: p(),
  item_id: p(),
  output_index: E(),
  delta: p(),
  obfuscation: p()
}), Lp = w({
  type: I("response.mcp_call_arguments.done"),
  event_id: p(),
  response_id: p(),
  item_id: p(),
  output_index: E(),
  arguments: p()
}), Up = w({
  type: I("response.mcp_call.in_progress"),
  event_id: p(),
  output_index: E(),
  item_id: p()
}), Zp = w({
  type: I("response.mcp_call.completed"),
  event_id: p(),
  output_index: E(),
  item_id: p()
}), qp = w({
  type: I("mcp_list_tools.failed"),
  event_id: p().optional(),
  item_id: p().optional()
}), Jp = w({
  type: p(),
  event_id: p().optional().nullable()
}).passthrough(), Bp = ge("type", [
  Vd,
  Wd,
  Hd,
  Kd,
  Yd,
  Xd,
  Qd,
  ep,
  tp,
  ip,
  op,
  dp,
  pp,
  fp,
  hp,
  mp,
  gp,
  yp,
  _p,
  vp,
  wp,
  bp,
  Ip,
  Sp,
  xp,
  io,
  Tp,
  kp,
  Ap,
  Cp,
  Op,
  Ep,
  Np,
  Rp,
  jp,
  $p,
  qp,
  Fp,
  Lp,
  Up,
  Zp
]);
ge("type", [
  np,
  rp,
  sp,
  ap,
  up,
  cp,
  lp,
  Pp,
  Dp,
  Mp
]);
function Ps(n) {
  const e = JSON.parse(n.data.toString()), t = Bp.safeParse(e);
  if (!t.success) {
    const r = Jp.safeParse(e);
    return r.success ? { data: r.data, isGeneric: !0 } : { data: null, isGeneric: !0 };
  }
  return { data: t.data, isGeneric: !1 };
}
const zp = "gpt-realtime", Re = {
  outputModalities: ["audio"],
  audio: {
    input: {
      format: { type: "audio/pcm", rate: 24e3 },
      transcription: { model: "gpt-4o-mini-transcribe" },
      turnDetection: { type: "semantic_vad" },
      noiseReduction: null
    },
    output: {
      format: { type: "audio/pcm", rate: 24e3 },
      speed: 1
    }
  }
};
var Tt, Fn, ve, Ln;
const js = class js extends bs {
  constructor(t = {}) {
    super();
    R(this, Tt);
    R(this, Fn);
    R(this, ve, null);
    R(this, Ln, null);
    S(this, "eventEmitter", new Ir());
    k(this, Tt, t.model ?? zp), k(this, Fn, t.apiKey);
  }
  /**
   * The current model that is being used by the transport layer.
   */
  get currentModel() {
    return u(this, Tt);
  }
  /**
   * The current model that is being used by the transport layer.
   * **Note**: The model cannot be changed mid conversation.
   */
  set currentModel(t) {
    k(this, Tt, t);
  }
  /**
   * Hook for subclasses to clean up transport-specific state when audio
   * playback finishes. Defaults to a no-op.
   */
  _afterAudioDoneEvent() {
  }
  get _rawSessionConfig() {
    return u(this, Ln) ?? null;
  }
  async _getApiKey(t) {
    const r = t.apiKey ?? u(this, Fn);
    return typeof r == "function" ? await r() : r;
  }
  _onMessage(t) {
    var a, i, o, c, l, f;
    const { data: r, isGeneric: s } = Ps(t);
    if (r !== null && (this.emit("*", r), !s)) {
      if (r.type === "error" ? this.emit("error", { type: "error", error: r }) : this.emit(r.type, r), r.type === "response.created") {
        this.emit("turn_started", {
          type: "response_started",
          providerData: {
            ...r
          }
        });
        return;
      }
      if (r.type === "session.updated" && k(this, Ln, r.session), r.type === "response.done") {
        const d = io.safeParse(r);
        if (!d.success) {
          Te.error("Error parsing response done event", d.error);
          return;
        }
        const h = ((a = d.data.response.usage) == null ? void 0 : a.input_tokens) ?? 0, y = ((i = d.data.response.usage) == null ? void 0 : i.output_tokens) ?? 0, v = h + y, x = new Ar({
          inputTokens: h,
          inputTokensDetails: ((o = d.data.response.usage) == null ? void 0 : o.input_token_details) ?? {},
          outputTokens: y,
          outputTokensDetails: ((c = d.data.response.usage) == null ? void 0 : c.output_token_details) ?? {},
          totalTokens: v
        });
        this.emit("usage_update", x), this.emit("turn_done", {
          type: "response_done",
          response: {
            id: d.data.response.id ?? "",
            output: d.data.response.output ?? [],
            usage: {
              inputTokens: h,
              inputTokensDetails: ((l = d.data.response.usage) == null ? void 0 : l.input_token_details) ?? {},
              outputTokens: y,
              outputTokensDetails: ((f = d.data.response.usage) == null ? void 0 : f.output_token_details) ?? {},
              totalTokens: v
            }
          }
        });
        return;
      }
      if (r.type === "response.output_audio.done") {
        this.emit("audio_done"), this._afterAudioDoneEvent();
        return;
      }
      if (r.type === "conversation.item.deleted") {
        this.emit("item_deleted", {
          itemId: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.completed" || r.type === "conversation.item.truncated") {
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.delta" || r.type === "response.output_text.delta" || r.type === "response.output_audio_transcript.delta" || r.type === "response.function_call_arguments.delta") {
        r.type === "response.output_audio_transcript.delta" && this.emit("audio_transcript_delta", {
          type: "transcript_delta",
          delta: r.delta,
          itemId: r.item_id,
          responseId: r.response_id
        });
        return;
      }
      if (r.type === "conversation.item.added" || r.type === "conversation.item.done" || r.type === "conversation.item.retrieved") {
        if (r.item.type === "mcp_list_tools" && r.type === "conversation.item.done") {
          const d = r.item.server_label ?? "", h = r.item.tools ?? [];
          try {
            this.emit("mcp_tools_listed", {
              serverLabel: d,
              tools: h
            });
          } catch (y) {
            Te.error("Error emitting mcp_tools_listed", y, r.item);
          }
          return;
        }
        if (r.item.type === "message") {
          const d = r.type === "conversation.item.added" || r.type === "conversation.item.done" ? r.previous_item_id : null, h = Ja.parse({
            itemId: r.item.id,
            previousItemId: d,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.item.status
          });
          this.emit("item_update", h);
          return;
        }
        if (r.item.type === "mcp_approval_request" && r.type === "conversation.item.done") {
          const d = r.item, h = zd.parse({
            itemId: d.id,
            type: d.type,
            serverLabel: d.server_label,
            name: d.name,
            arguments: JSON.parse(d.arguments || "{}"),
            approved: d.approved
          });
          this.emit("item_update", h), this.emit("mcp_approval_request", h);
          return;
        }
        if (r.item.type === "mcp_tool_call" || r.item.type === "mcp_call") {
          const d = r.type === "conversation.item.done" ? "completed" : "in_progress", h = za.parse({
            itemId: r.item.id,
            type: r.item.type,
            status: d,
            arguments: r.item.arguments,
            name: r.item.name,
            output: r.item.output
          });
          this.emit("item_update", h), r.type === "conversation.item.done" && this.emit("mcp_tool_call_completed", h);
          return;
        }
      }
      if (r.type === "response.mcp_call.in_progress") {
        const d = r;
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: d.item_id
        });
        return;
      }
      if (r.type === "mcp_list_tools.in_progress") {
        const d = r;
        d.item_id && this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: d.item_id
        });
        return;
      }
      if (r.type === "response.output_item.done" || r.type === "response.output_item.added") {
        const d = r.item;
        if (d.type === "function_call" && d.status === "completed") {
          const h = Ba.parse({
            itemId: d.id,
            type: d.type,
            status: "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: d.arguments,
            name: d.name,
            output: null
          });
          this.emit("item_update", h), this.emit("function_call", {
            id: d.id,
            type: "function_call",
            callId: d.call_id ?? "",
            arguments: d.arguments ?? "",
            name: d.name ?? ""
          });
          return;
        }
        if (d.type === "mcp_tool_call" || d.type === "mcp_call") {
          const h = za.parse({
            itemId: d.id,
            type: d.type,
            status: r.type === "response.output_item.done" ? "completed" : "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: d.arguments,
            name: d.name,
            output: d.output
          });
          this.emit("item_update", h);
          return;
        }
        if (d.type === "message") {
          const h = Ja.parse({
            itemId: r.item.id,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.type === "response.output_item.done" ? d.status ?? "completed" : d.status ?? "in_progress"
          });
          this.emit("item_update", h);
          return;
        }
      }
    }
  }
  _onError(t) {
    this.emit("error", {
      type: "error",
      error: t
    });
  }
  _onOpen() {
    this.emit("connected");
  }
  _onClose() {
    this.emit("disconnected");
  }
  /**
   * Send a message to the Realtime API. This will create a new item in the conversation and
   * trigger a response.
   *
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r, { triggerResponse: s = !0 } = {}) {
    const a = typeof t == "string" ? [
      {
        type: "input_text",
        text: t
      }
    ] : t.content.map((i) => i.type === "input_image" ? {
      type: "input_image",
      image_url: i.image,
      ...i.providerData ?? {}
    } : i);
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "message",
        role: "user",
        content: a
      },
      ...r
    }), s && this.sendEvent({
      type: "response.create"
    });
  }
  addImage(t, { triggerResponse: r = !0 } = {}) {
    this.sendMessage({
      type: "message",
      role: "user",
      content: [{ type: "input_image", image: t }]
    }, {}, { triggerResponse: r });
  }
  _getMergedSessionConfig(t) {
    var a, i, o, c, l, f, d, h, y, v, x, g, m, b, _, D, T, A, N, G, B, F, ae, X, oe, Je, Ne, dn;
    const r = Bd(t), s = {
      type: "realtime",
      instructions: r.instructions,
      model: r.model ?? u(this, Tt),
      output_modalities: r.outputModalities ?? Re.outputModalities,
      audio: {
        input: {
          format: ((i = (a = r.audio) == null ? void 0 : a.input) == null ? void 0 : i.format) ?? ((c = (o = Re.audio) == null ? void 0 : o.input) == null ? void 0 : c.format),
          noise_reduction: ((f = (l = r.audio) == null ? void 0 : l.input) == null ? void 0 : f.noiseReduction) ?? ((h = (d = Re.audio) == null ? void 0 : d.input) == null ? void 0 : h.noiseReduction),
          transcription: ((v = (y = r.audio) == null ? void 0 : y.input) == null ? void 0 : v.transcription) ?? ((g = (x = Re.audio) == null ? void 0 : x.input) == null ? void 0 : g.transcription),
          turn_detection: js.buildTurnDetectionConfig((b = (m = r.audio) == null ? void 0 : m.input) == null ? void 0 : b.turnDetection) ?? ((D = (_ = Re.audio) == null ? void 0 : _.input) == null ? void 0 : D.turnDetection)
        },
        output: {
          format: ((A = (T = r.audio) == null ? void 0 : T.output) == null ? void 0 : A.format) ?? ((G = (N = Re.audio) == null ? void 0 : N.output) == null ? void 0 : G.format),
          voice: ((F = (B = r.audio) == null ? void 0 : B.output) == null ? void 0 : F.voice) ?? ((X = (ae = Re.audio) == null ? void 0 : ae.output) == null ? void 0 : X.voice),
          speed: ((Je = (oe = r.audio) == null ? void 0 : oe.output) == null ? void 0 : Je.speed) ?? ((dn = (Ne = Re.audio) == null ? void 0 : Ne.output) == null ? void 0 : dn.speed)
        }
      },
      tool_choice: r.toolChoice ?? Re.toolChoice,
      // We don't set tracing here to make sure that we don't try to override it on every
      // session.update as it might lead to errors
      ...r.providerData ?? {}
    };
    return r.prompt && (s.prompt = {
      id: r.prompt.promptId,
      version: r.prompt.version,
      variables: r.prompt.variables
    }), r.tools && r.tools.length > 0 && (s.tools = r.tools.map((Kn) => ({
      ...Kn,
      strict: void 0
    }))), s;
  }
  /**
   * Build the payload object expected by the Realtime API when creating or updating a session.
   *
   * The helper centralises the conversion from camelCase runtime config to the snake_case payload
   * required by the Realtime API so transports that need a one-off payload (for example SIP call
   * acceptance) can reuse the same logic without duplicating private state.
   *
   * @param config - The session config to merge with defaults.
   */
  buildSessionPayload(t) {
    return this._getMergedSessionConfig(t);
  }
  static buildTurnDetectionConfig(t) {
    if (typeof t > "u")
      return;
    const { type: r, createResponse: s, create_response: a, eagerness: i, interruptResponse: o, interrupt_response: c, prefixPaddingMs: l, prefix_padding_ms: f, silenceDurationMs: d, silence_duration_ms: h, threshold: y, idleTimeoutMs: v, idle_timeout_ms: x, ...g } = t, m = {
      type: r,
      create_response: s || a,
      eagerness: i,
      interrupt_response: o || c,
      prefix_padding_ms: l || f,
      silence_duration_ms: d || h,
      idle_timeout_ms: v || x,
      threshold: y,
      ...g
    };
    return Object.keys(m).forEach((b) => {
      m[b] === void 0 && delete m[b];
    }), Object.keys(m).length > 0 ? m : void 0;
  }
  /**
   * Sets the internal tracing config. This is used to track the tracing config that has been set
   * during the session.create event.
   */
  set _tracingConfig(t) {
    k(this, ve, t);
  }
  /**
   * Sets the tracing config for the session. This will send the tracing config to the Realtime API.
   *
   * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists
   */
  _updateTracingConfig(t) {
    var r, s, a;
    if (typeof u(this, ve) > "u" && k(this, ve, null), t === "auto") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: "auto"
        }
      });
      return;
    }
    if (u(this, ve) !== null && typeof u(this, ve) != "string" && typeof t != "string") {
      Te.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");
      return;
    }
    if (t === null) {
      Te.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."), this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: null
        }
      });
      return;
    }
    if (u(this, ve) === null || typeof u(this, ve) == "string") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: t
        }
      });
      return;
    }
    if ((t == null ? void 0 : t.group_id) !== ((r = u(this, ve)) == null ? void 0 : r.group_id) || (t == null ? void 0 : t.metadata) !== ((s = u(this, ve)) == null ? void 0 : s.metadata) || (t == null ? void 0 : t.workflow_name) !== ((a = u(this, ve)) == null ? void 0 : a.workflow_name)) {
      Te.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s", JSON.stringify(u(this, ve)), JSON.stringify(t));
      return;
    }
    this.sendEvent({
      type: "session.update",
      session: {
        type: "realtime",
        tracing: t
      }
    });
  }
  /**
   * Updates the session config. This will merge it with the current session config with the default
   * values and send it to the Realtime API.
   *
   * @param config - The session config to update.
   */
  updateSessionConfig(t) {
    const r = this.buildSessionPayload(t);
    this.sendEvent({
      type: "session.update",
      session: r
    });
  }
  /**
   * Send the output of a function call to the Realtime API.
   *
   * @param toolCall - The tool call to send the output for.
   * @param output - The output of the function call.
   * @param startResponse - Whether to start a new response after sending the output.
   */
  sendFunctionCallOutput(t, r, s = !0) {
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "function_call_output",
        output: r,
        call_id: t.callId
      }
    });
    try {
      const a = Ba.parse({
        itemId: t.id,
        previousItemId: t.previousItemId,
        type: "function_call",
        status: "completed",
        arguments: t.arguments,
        name: t.name,
        output: r
      });
      this.emit("item_update", a);
    } catch (a) {
      Te.error("Error parsing tool call item", a, t);
    }
    s && this.sendEvent({
      type: "response.create"
    });
  }
  /**
   * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer
   * will be committed and the model will start processing it. This is necessary if you have
   * disabled turn detection / voice activity detection (VAD).
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, { commit: r = !1 } = {}) {
    this.sendEvent({
      type: "input_audio_buffer.append",
      audio: no(t)
    }), r && this.sendEvent({
      type: "input_audio_buffer.commit"
    });
  }
  /**
   * Reset the history of the conversation. This will create a diff between the old and new history
   * and send the necessary events to the Realtime API to update the history.
   *
   * @param oldHistory - The old history of the conversation.
   * @param newHistory - The new history of the conversation.
   */
  resetHistory(t, r) {
    const { removals: s, additions: a, updates: i } = Md(t, r), o = new Set(s.map((l) => l.itemId));
    for (const l of i)
      o.add(l.itemId);
    if (o.size > 0)
      for (const l of o)
        this.sendEvent({
          type: "conversation.item.delete",
          item_id: l
        });
    const c = [...a, ...i];
    for (const l of c)
      if (l.type === "message") {
        const f = {
          type: "message",
          role: l.role,
          content: l.content,
          id: l.itemId
        };
        l.role !== "system" && l.status && (f.status = l.status), this.sendEvent({
          type: "conversation.item.create",
          item: f
        });
      } else l.type === "function_call" && Te.warn("Function calls cannot be manually added or updated at the moment. Ignoring.");
  }
  sendMcpResponse(t, r) {
    this.sendEvent({
      type: "conversation.item.create",
      previous_item_id: t.itemId,
      item: {
        type: "mcp_approval_response",
        approval_request_id: t.itemId,
        approve: r
      }
    });
  }
};
Tt = new WeakMap(), Fn = new WeakMap(), ve = new WeakMap(), Ln = new WeakMap();
let _r = js;
var Un, ee, Zn, lt, qn;
class Gp extends _r {
  constructor(t = {}) {
    if (typeof RTCPeerConnection > "u")
      throw new Error("WebRTC is not supported in this environment");
    super(t);
    S(this, "options");
    R(this, Un);
    R(this, ee, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    });
    R(this, Zn);
    R(this, lt, !1);
    R(this, qn, !1);
    this.options = t, k(this, Un, t.baseUrl ?? "https://api.openai.com/v1/realtime/calls"), k(this, Zn, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current call ID of the WebRTC connection.
   */
  get callId() {
    return u(this, ee).callId;
  }
  /**
   * The current status of the WebRTC connection.
   */
  get status() {
    return u(this, ee).status;
  }
  /**
   * The current connection state of the WebRTC connection including the peer connection and data
   * channel.
   */
  get connectionState() {
    return u(this, ee);
  }
  /**
   * Whether the session is muted.
   */
  get muted() {
    return u(this, qn);
  }
  /**
   * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API
   * via WebRTC.
   *
   * If you are using a browser, the transport layer will also automatically configure the
   * microphone and audio output to be used by the session.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    if (u(this, ee).status === "connected")
      return;
    u(this, ee).status === "connecting" && Te.warn("Realtime connection already in progress. Please await original promise");
    const r = t.model ?? this.currentModel;
    this.currentModel = r;
    const s = t.url ?? u(this, Un), a = await this._getApiKey(t), i = typeof a == "string" && a.startsWith("ek_");
    if (!u(this, Zn) && !i)
      throw new re("Using the WebRTC connection in a browser environment requires an ephemeral client key. If you need to use a regular API key, use the WebSocket transport or set the `useInsecureApiKey` option to true.");
    return new Promise(async (o, c) => {
      var l, f;
      try {
        const d = {
          ...t.initialSessionConfig || {},
          model: this.currentModel
        }, h = new URL(s);
        let y = new RTCPeerConnection();
        const v = y.createDataChannel("oai-events");
        let x;
        const g = (A) => {
          A.onconnectionstatechange = () => {
            switch (A.connectionState) {
              case "disconnected":
              case "failed":
              case "closed":
                this.close();
                break;
            }
          };
        };
        g(y), k(this, ee, {
          status: "connecting",
          peerConnection: y,
          dataChannel: v,
          callId: x
        }), this.emit("connection_change", u(this, ee).status), v.addEventListener("open", () => {
          k(this, ee, {
            status: "connected",
            peerConnection: y,
            dataChannel: v,
            callId: x
          }), this.updateSessionConfig(d), this.emit("connection_change", u(this, ee).status), this._onOpen(), o();
        }), v.addEventListener("error", (A) => {
          this.close(), this._onError(A), c(A);
        }), v.addEventListener("message", (A) => {
          this._onMessage(A);
          const { data: N, isGeneric: G } = Ps(A);
          if (!(!N || G) && (N.type === "response.created" ? k(this, lt, !0) : N.type === "response.done" && k(this, lt, !1), N.type === "session.created")) {
            this._tracingConfig = N.session.tracing;
            const B = typeof d.tracing > "u" ? "auto" : d.tracing;
            this._updateTracingConfig(B);
          }
        });
        const m = this.options.audioElement ?? document.createElement("audio");
        m.autoplay = !0, y.ontrack = (A) => {
          m.srcObject = A.streams[0];
        };
        const b = this.options.mediaStream ?? await navigator.mediaDevices.getUserMedia({
          audio: !0
        });
        if (y.addTrack(b.getAudioTracks()[0]), this.options.changePeerConnection) {
          const A = y;
          y = await this.options.changePeerConnection(y), A !== y && (A.onconnectionstatechange = null), g(y), k(this, ee, { ...u(this, ee), peerConnection: y });
        }
        const _ = await y.createOffer();
        if (await y.setLocalDescription(_), !_.sdp)
          throw new Error("Failed to create offer");
        const D = await fetch(h, {
          method: "POST",
          body: _.sdp,
          headers: {
            "Content-Type": "application/sdp",
            Authorization: `Bearer ${a}`,
            "X-OpenAI-Agents-SDK": so["X-OpenAI-Agents-SDK"]
          }
        });
        x = (f = (l = D.headers) == null ? void 0 : l.get("Location")) == null ? void 0 : f.split("/").pop(), k(this, ee, { ...u(this, ee), callId: x });
        const T = {
          type: "answer",
          sdp: await D.text()
        };
        await y.setRemoteDescription(T);
      } catch (d) {
        this.close(), this._onError(d), c(d);
      }
    });
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, ee).dataChannel || u(this, ee).dataChannel.readyState !== "open")
      throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");
    u(this, ee).dataChannel.send(JSON.stringify(t));
  }
  /**
   * Mute or unmute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    k(this, qn, t), u(this, ee).peerConnection && u(this, ee).peerConnection.getSenders().forEach((s) => {
      s.track && (s.track.enabled = !t);
    });
  }
  _afterAudioDoneEvent() {
    k(this, lt, !1);
  }
  /**
   * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.
   */
  close() {
    if (u(this, ee).dataChannel && u(this, ee).dataChannel.close(), u(this, ee).peerConnection) {
      const t = u(this, ee).peerConnection;
      t.onconnectionstatechange = null, t.getSenders().forEach((r) => {
        var s;
        (s = r.track) == null || s.stop();
      }), t.close();
    }
    u(this, ee).status !== "disconnected" && (k(this, ee, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    }), this.emit("connection_change", u(this, ee).status), this._onClose());
  }
  /**
   * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent
   * stops talking.
   */
  interrupt() {
    u(this, lt) && (this.sendEvent({
      type: "response.cancel"
    }), k(this, lt, !1)), this.sendEvent({
      type: "output_audio_buffer.clear"
    });
  }
}
Un = new WeakMap(), ee = new WeakMap(), Zn = new WeakMap(), lt = new WeakMap(), qn = new WeakMap();
const Vp = globalThis.WebSocket;
var dt, kt, At, pe, Jn, Ke, Ct, Ot, Qt, Bn, $t, ps, uo;
class oo extends _r {
  constructor(t = {}) {
    super(t);
    R(this, $t);
    R(this, dt);
    R(this, kt);
    R(this, At);
    R(this, pe, {
      status: "disconnected",
      websocket: void 0
    });
    R(this, Jn);
    R(this, Ke);
    R(this, Ct);
    /**
     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time
     * since the response started to compute the right interruption time.
     *
     * Mostly internal but might be used by extended transport layers for their interruption
     * calculation.
     */
    S(this, "_firstAudioTimestamp");
    S(this, "_audioLengthMs", 0);
    R(this, Ot, !1);
    R(this, Qt);
    R(this, Bn);
    k(this, kt, t.url), k(this, At, t.url), k(this, Jn, t.useInsecureApiKey ?? !1), k(this, Qt, t.createWebSocket), k(this, Bn, t.skipOpenEventListeners ?? !1);
  }
  getCommonRequestHeaders() {
    return so;
  }
  /**
   * The current status of the WebSocket connection.
   */
  get status() {
    return u(this, pe).status;
  }
  /**
   * The current connection state of the WebSocket connection.
   */
  get connectionState() {
    return u(this, pe);
  }
  /**
   * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,
   * this should be handled by the client by not triggering the `sendAudio` method.
   */
  get muted() {
    return null;
  }
  /**
   * The current item ID of the ongoing response.
   */
  get currentItemId() {
    return u(this, Ke);
  }
  /**
   * Triggers the `audio` event that a client might listen to to receive the audio buffer.
   * Protected for you to be able to override and disable emitting this event in case your extended
   * transport layer handles audio internally.
   *
   * @param audioEvent - The audio event to emit.
   */
  _onAudio(t) {
    this.emit("audio", t);
  }
  _afterAudioDoneEvent() {
    L(this, $t, ps).call(this);
  }
  async connect(t) {
    const r = t.model ?? this.currentModel;
    this.currentModel = r, k(this, dt, await this._getApiKey(t));
    const s = t.callId;
    let a;
    t.url ? (a = t.url, k(this, At, t.url)) : s ? a = `wss://api.openai.com/v1/realtime?call_id=${s}` : u(this, At) ? a = u(this, At) : a = `wss://api.openai.com/v1/realtime?model=${this.currentModel}`, k(this, kt, a);
    const i = {
      ...t.initialSessionConfig || {},
      model: this.currentModel
    };
    await new Promise((o, c) => {
      L(this, $t, uo).call(this, o, c, i).catch(c);
    }), await this.updateSessionConfig(i);
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, pe).websocket)
      throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");
    u(this, pe).websocket.send(JSON.stringify(t));
  }
  /**
   * Close the WebSocket connection.
   *
   * This will also reset any internal connection tracking used for interruption handling.
   */
  close() {
    var t;
    (t = u(this, pe).websocket) == null || t.close(), k(this, Ke, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, k(this, Ct, void 0);
  }
  /**
   * Will throw an error as the WebSocket transport layer does not support muting.
   */
  mute(t) {
    throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.");
  }
  /**
   * Send an audio buffer to the Realtime API. This is used for your client to send audio to the
   * model to respond.
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, r = {}) {
    u(this, pe).status === "connected" && super.sendAudio(t, r);
  }
  /**
   * Send a cancel response event to the Realtime API. This is used to cancel an ongoing
   *  response that the model is currently generating.
   */
  _cancelResponse() {
    u(this, Ot) && (this.sendEvent({
      type: "response.cancel"
    }), k(this, Ot, !1));
  }
  /**
   * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.
   *
   * This method is used to send the right events to the API to inform the model that the user has
   * interrupted the response. It might be overridden/extended by an extended transport layer. See
   * the `TwilioRealtimeTransportLayer` for an example.
   *
   * @param elapsedTime - The elapsed time since the response started.
   */
  _interrupt(t, r = !0) {
    if (t < 0)
      return;
    r && this._cancelResponse();
    const s = this._audioLengthMs ?? Number.POSITIVE_INFINITY, a = Math.max(0, Math.floor(Math.min(t, s)));
    this.emit("audio_interrupted"), this.sendEvent({
      type: "conversation.item.truncate",
      item_id: u(this, Ke),
      content_index: u(this, Ct),
      audio_end_ms: a
    });
  }
  /**
   * Interrupt the ongoing response. This method is triggered automatically by the client when
   * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got
   * triggered.
   *
   * You can also call this method directly if you want to interrupt the conversation for example
   * based on an event in the client.
   */
  interrupt(t = !0) {
    if (!u(this, Ke) || typeof this._firstAudioTimestamp != "number")
      return;
    const r = Date.now() - this._firstAudioTimestamp;
    r >= 0 && this._interrupt(r, t), L(this, $t, ps).call(this);
  }
}
dt = new WeakMap(), kt = new WeakMap(), At = new WeakMap(), pe = new WeakMap(), Jn = new WeakMap(), Ke = new WeakMap(), Ct = new WeakMap(), Ot = new WeakMap(), Qt = new WeakMap(), Bn = new WeakMap(), $t = new WeakSet(), ps = function() {
  k(this, Ke, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, k(this, Ct, void 0);
}, uo = async function(t, r, s) {
  if (u(this, pe).websocket) {
    t();
    return;
  }
  if (!u(this, dt))
    throw new re("API key is not set. Please call `connect()` with an API key first.");
  if (!u(this, dt).startsWith("ek_") && !u(this, Jn))
    throw new re("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");
  let a = null;
  if (u(this, Qt))
    a = await u(this, Qt).call(this, {
      url: u(this, kt),
      apiKey: u(this, dt)
    });
  else {
    const o = [
      "realtime",
      // Auth
      "openai-insecure-api-key." + u(this, dt),
      // Version header
      Fd
    ];
    a = new Vp(u(this, kt), o);
  }
  k(this, pe, {
    status: "connecting",
    websocket: a
  }), this.emit("connection_change", u(this, pe).status);
  const i = () => {
    k(this, pe, {
      status: "connected",
      websocket: a
    }), this.emit("connection_change", u(this, pe).status), this._onOpen(), t();
  };
  u(this, Bn) === !0 ? i() : a.addEventListener("open", i), a.addEventListener("error", (o) => {
    this._onError(o), k(this, pe, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, pe).status), r(o);
  }), a.addEventListener("message", (o) => {
    var f, d, h, y, v, x, g;
    this._onMessage(o);
    const { data: c, isGeneric: l } = Ps(o);
    if (!(!c || l)) {
      if (c.type === "response.output_audio.delta") {
        k(this, Ct, c.content_index), k(this, Ke, c.item_id), this._firstAudioTimestamp === void 0 && (this._firstAudioTimestamp = Date.now(), this._audioLengthMs = 0);
        const m = to(c.delta), b = (h = (d = (f = this._rawSessionConfig) == null ? void 0 : f.audio) == null ? void 0 : d.output) == null ? void 0 : h.format;
        if (b && typeof b == "object") {
          const D = b.type;
          if (D === "audio/pcmu" || D === "audio/pcma")
            this._audioLengthMs += m.byteLength / 8;
          else if (D === "audio/pcm") {
            const T = b.rate ?? 24e3;
            this._audioLengthMs += m.byteLength / 2 / T * 1e3;
          } else
            this._audioLengthMs += m.byteLength / 24 / 2;
        } else typeof b == "string" ? b.startsWith("g711_") ? this._audioLengthMs += m.byteLength / 8 : this._audioLengthMs += m.byteLength / 24 / 2 : this._audioLengthMs += m.byteLength / 24 / 2;
        const _ = {
          type: "audio",
          data: m,
          responseId: c.response_id
        };
        this._onAudio(_);
      } else if (c.type === "input_audio_buffer.speech_started") {
        const m = ((g = (x = (v = (y = this._rawSessionConfig) == null ? void 0 : y.audio) == null ? void 0 : v.input) == null ? void 0 : x.turn_detection) == null ? void 0 : g.interrupt_response) ?? !1;
        this.interrupt(!m);
      } else if (c.type === "response.created")
        k(this, Ot, !0);
      else if (c.type === "response.done")
        k(this, Ot, !1);
      else if (c.type === "session.created") {
        this._tracingConfig = c.session.tracing;
        const m = typeof s.tracing > "u" ? "auto" : s.tracing;
        this._updateTracingConfig(m);
      }
    }
  }), a.addEventListener("close", () => {
    k(this, pe, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, pe).status), this._onClose();
  });
};
const co = Symbol("backgroundResult");
function tf(n) {
  return {
    [co]: !0,
    content: n
  };
}
function Wp(n) {
  return typeof n == "object" && n !== null && co in n;
}
function Hp(n) {
  return n.type === "function" || n.type === "hosted_tool" && n.name === "hosted_mcp";
}
function Kp(n) {
  if (n.type === "function")
    return n;
  if (n.type === "hosted_tool" && n.name === "hosted_mcp") {
    const e = n.providerData.server_url && n.providerData.server_url.length > 0 ? n.providerData.server_url : void 0;
    return {
      type: "mcp",
      server_label: n.providerData.server_label,
      server_url: e,
      headers: n.providerData.headers,
      allowed_tools: n.providerData.allowed_tools,
      require_approval: n.providerData.require_approval
    };
  }
  throw new re(`Invalid tool type: ${n}`);
}
function Yp() {
  return JSON.parse(JSON.stringify(Re));
}
var V, U, en, Z, tn, nn, zn, ie, rn, sn, De, Gn, Et, Vn, Wn, ne, gn, yn, lo, nr, po, hs, fo, ms;
const $s = class $s extends Ir {
  constructor(t, r = {}) {
    super();
    R(this, ne);
    S(this, "initialAgent");
    S(this, "options");
    R(this, V);
    R(this, U);
    R(this, en);
    R(this, Z);
    R(this, tn, []);
    R(this, nn);
    R(this, zn, {});
    R(this, ie, []);
    R(this, rn);
    R(this, sn, {});
    R(this, De, !1);
    // Tracks all MCP tools fetched per server label (from mcp_list_tools results).
    R(this, Gn, /* @__PURE__ */ new Map());
    // Tracks currently available MCP tools based on the active agent's configured server_labels.
    R(this, Et, []);
    // Keeps track of the last full session config we sent (camelCase keys) so that
    // subsequent updates (e.g. during agent handoffs) preserve properties that are
    // not explicitly recalculated here (such as inputAudioFormat, outputAudioFormat,
    // modalities, speed, toolChoice, turnDetection, etc.). Without this, updating
    // the agent would drop audio format overrides (e.g. g711_ulaw) and revert to
    // transport defaults causing issues for integrations like Twilio.
    R(this, Vn, Yp());
    R(this, Wn, !0);
    this.initialAgent = t, this.options = r, typeof r.transport > "u" && jd() || r.transport === "webrtc" ? k(this, V, new Gp()) : r.transport === "websocket" || typeof r.transport > "u" ? k(this, V, new oo()) : k(this, V, r.transport), k(this, U, t), k(this, Z, new Zt({
      ...r.context ?? {},
      history: u(this, ie)
    })), k(this, tn, (r.outputGuardrails ?? []).map(Zd)), k(this, nn, Ud(r.outputGuardrailSettings ?? {})), k(this, rn, r.historyStoreAudio ?? !1), k(this, Wn, r.automaticallyTriggerResponseForMcpToolCalls ?? !0);
  }
  /**
   * The transport layer used by the session.
   */
  get transport() {
    return u(this, V);
  }
  /**
   * The current agent in the session.
   */
  get currentAgent() {
    return u(this, U);
  }
  /**
   * The current usage of the session.
   */
  get usage() {
    return u(this, Z).usage;
  }
  /**
   * The current context of the session.
   */
  get context() {
    return u(this, Z);
  }
  /**
   * Whether the session is muted. Might be `null` if the underlying transport layer does not
   * support muting.
   */
  get muted() {
    return u(this, V).muted;
  }
  /**
   * The history of the session.
   */
  get history() {
    return u(this, ie);
  }
  get availableMcpTools() {
    return u(this, Et);
  }
  /**
   * Compute the initial session config that the current session will use when connecting.
   *
   * This mirrors the configuration payload we send during `connect`, including dynamic values
   * such as the upstream agent instructions, tool definitions, and prompt content generated at
   * runtime. Keeping this helper exposed allows transports or orchestration layers to precompute
   * a CallAccept-compatible payload without opening a socket.
   *
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  async getInitialSessionConfig(t = {}) {
    return await L(this, ne, gn).call(this, this.initialAgent), L(this, ne, yn).call(this, {
      ...this.options.config ?? {},
      ...t ?? {}
    });
  }
  /**
   * Convenience helper to compute the initial session config without manually instantiating and connecting a session.
   *
   * This is primarily useful for integrations that must provide the session configuration to a
   * third party (for example the SIP `calls.accept` endpoint) before the actual realtime session
   * is attached. The helper instantiates a throwaway session so all agent-driven dynamic fields
   * resolve in exactly the same way as the live session path.
   *
   * @param agent - The starting agent for the session.
   * @param options - Session options used to seed the config calculation.
   * @param overrides - Additional config overrides applied on top of the provided options.
   */
  static async computeInitialSessionConfig(t, r = {}, s = {}) {
    const a = new $s(t, r);
    try {
      return await a.getInitialSessionConfig(s);
    } finally {
      a.close();
    }
  }
  async updateAgent(t) {
    return u(this, U).emit("agent_handoff", u(this, Z), t), this.emit("agent_handoff", u(this, Z), u(this, U), t), await L(this, ne, gn).call(this, t), await u(this, V).updateSessionConfig(await L(this, ne, yn).call(this)), t;
  }
  /**
   * Connect to the session. This will establish the connection to the underlying transport layer
   * and start the session.
   *
   * After connecting, the session will also emit a `history_updated` event with an empty history.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    await L(this, ne, gn).call(this, this.initialAgent), L(this, ne, fo).call(this), await u(this, V).connect({
      apiKey: t.apiKey ?? this.options.apiKey,
      model: this.options.model,
      url: t.url,
      callId: t.callId,
      initialSessionConfig: await L(this, ne, yn).call(this, this.options.config)
    }), k(this, ie, []), this.emit("history_updated", u(this, ie));
  }
  /**
   * Update the history of the session.
   * @param newHistory - The new history to set.
   */
  updateHistory(t) {
    let r;
    typeof t == "function" ? r = t(u(this, ie)) : r = t, u(this, V).resetHistory(u(this, ie), r);
  }
  /**
   * Send a message to the session.
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r = {}) {
    u(this, V).sendMessage(t, r);
  }
  /**
   * Add image to the session
   * @param image - The image to add.
   */
  addImage(t, { triggerResponse: r = !0 } = {}) {
    u(this, V).addImage(t, { triggerResponse: r });
  }
  /**
   * Mute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    u(this, V).mute(t);
  }
  /**
   * Disconnect from the session.
   */
  close() {
    k(this, sn, {}), u(this, V).close();
  }
  /**
   * Send audio to the session.
   * @param audio - The audio to send.
   * @param options - Additional options.
   * @param options.commit - Whether to finish the turn with this audio.
   */
  sendAudio(t, r = {}) {
    u(this, V).sendAudio(t, r);
  }
  /**
   * Interrupt the session artificially for example if you want to build a "stop talking"
   * button.
   */
  interrupt() {
    u(this, V).interrupt();
  }
  /**
   * Approve a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to approve.
   * @param options - Additional options.
   * @param options.alwaysApprove - Whether to always approve the tool call.
   */
  async approve(t, r = { alwaysApprove: !1 }) {
    u(this, Z).approveTool(t, r);
    const s = t.toolName ?? t.rawItem.name, a = u(this, U).tools.find((i) => i.name === s);
    if (a && a.type === "function" && t.rawItem.type === "function_call")
      await L(this, ne, nr).call(this, t.rawItem, a);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysApprove && Te.warn("Always approving MCP tools is not supported. Use the allowed tools configuration instead.");
      const i = qa(t);
      u(this, V).sendMcpResponse(i, !0);
    } else
      throw new we(`Tool ${s ?? "unknown"} not found`);
  }
  /**
   * Reject a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to reject.
   * @param options - Additional options.
   * @param options.alwaysReject - Whether to always reject the tool call.
   */
  async reject(t, r = { alwaysReject: !1 }) {
    u(this, Z).rejectTool(t, r);
    const s = t.toolName ?? t.rawItem.name, a = u(this, U).tools.find((i) => i.name === s);
    if (a && a.type === "function" && t.rawItem.type === "function_call")
      await L(this, ne, nr).call(this, t.rawItem, a);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysReject && Te.warn("Always rejecting MCP tools is not supported. Use the allowed tools configuration instead.");
      const i = qa(t);
      u(this, V).sendMcpResponse(i, !1);
    } else
      throw new we(`Tool ${s ?? "unknown"} not found`);
  }
};
V = new WeakMap(), U = new WeakMap(), en = new WeakMap(), Z = new WeakMap(), tn = new WeakMap(), nn = new WeakMap(), zn = new WeakMap(), ie = new WeakMap(), rn = new WeakMap(), sn = new WeakMap(), De = new WeakMap(), Gn = new WeakMap(), Et = new WeakMap(), Vn = new WeakMap(), Wn = new WeakMap(), ne = new WeakSet(), gn = async function(t) {
  k(this, U, t);
  const r = await u(this, U).getEnabledHandoffs(u(this, Z)), s = r.map((c) => c.getHandoffAsFunctionTool()), a = (await u(this, U).getAllTools(u(this, Z))).filter(Hp).map(Kp), i = typeof u(this, U).tools < "u" || typeof u(this, U).mcpServers < "u", o = r.length > 0;
  k(this, en, i || o ? [...a, ...s] : void 0), L(this, ne, ms).call(this);
}, yn = async function(t = {}) {
  const r = t ?? {}, s = this.options.config ?? {}, a = await u(this, U).getSystemPrompt(u(this, Z)), i = (y) => {
    var x;
    const v = y.audio;
    return (x = v == null ? void 0 : v.output) == null ? void 0 : x.voice;
  }, o = this.options.tracingDisabled ? null : this.options.workflowName ? {
    workflow_name: this.options.workflowName
  } : "auto";
  o !== null && o !== "auto" ? (this.options.groupId && (o.group_id = this.options.groupId), this.options.traceMetadata && (o.metadata = this.options.traceMetadata)) : (this.options.groupId || this.options.traceMetadata) && Te.warn("In order to set traceMetadata or a groupId you need to specify a workflowName.");
  const c = i(r) ?? i(s), l = r.voice ?? s.voice, f = typeof c < "u" ? c : typeof l < "u" ? l : u(this, U).voice, h = {
    ...{
      ...u(this, Vn) ?? {},
      ...s,
      ...r
    },
    instructions: a,
    voice: f,
    model: this.options.model,
    tools: u(this, en),
    tracing: o,
    prompt: typeof u(this, U).prompt == "function" ? await u(this, U).prompt(u(this, Z), u(this, U)) : u(this, U).prompt
  };
  return k(this, Vn, h), h;
}, lo = async function(t, r) {
  const s = await r.onInvokeHandoff(u(this, Z), t.arguments);
  u(this, U).emit("agent_handoff", u(this, Z), s), this.emit("agent_handoff", u(this, Z), u(this, U), s), await L(this, ne, gn).call(this, s), await u(this, V).updateSessionConfig(await L(this, ne, yn).call(this));
  const a = _i(s);
  return u(this, V).sendFunctionCallOutput(t, a, !0), s;
}, nr = async function(t, r) {
  u(this, Z).context.history = JSON.parse(JSON.stringify(u(this, ie)));
  let s = t.arguments;
  if (r.parameters && (jt(r.parameters) ? s = r.parameters.parse(s) : s = JSON.parse(s)), await r.needsApproval(u(this, Z), s, t.callId)) {
    const c = this.context.isToolApproved({
      toolName: r.name,
      callId: t.callId
    });
    if (c === !1) {
      this.emit("agent_tool_start", u(this, Z), u(this, U), r, {
        toolCall: t
      }), u(this, U).emit("agent_tool_start", u(this, Z), r, {
        toolCall: t
      });
      const l = "Tool execution was not approved.";
      u(this, V).sendFunctionCallOutput(t, l, !0), this.emit("agent_tool_end", u(this, Z), u(this, U), r, l, { toolCall: t }), u(this, U).emit("agent_tool_end", u(this, Z), r, l, {
        toolCall: t
      });
      return;
    } else if (typeof c > "u") {
      this.emit("tool_approval_requested", u(this, Z), u(this, U), {
        type: "function_approval",
        tool: r,
        approvalItem: new ye(t, u(this, U))
      });
      return;
    }
  }
  this.emit("agent_tool_start", u(this, Z), u(this, U), r, {
    toolCall: t
  }), u(this, U).emit("agent_tool_start", u(this, Z), r, {
    toolCall: t
  }), u(this, Z).context.history = JSON.parse(JSON.stringify(u(this, ie)));
  const i = await r.invoke(u(this, Z), t.arguments, {
    toolCall: t
  });
  let o;
  Wp(i) ? (o = ft(i.content), u(this, V).sendFunctionCallOutput(t, o, !1)) : (o = ft(i), u(this, V).sendFunctionCallOutput(t, o, !0)), this.emit("agent_tool_end", u(this, Z), u(this, U), r, o, { toolCall: t }), u(this, U).emit("agent_tool_end", u(this, Z), r, o, { toolCall: t });
}, po = async function(t) {
  const r = await u(this, U).getEnabledHandoffs(u(this, Z)), s = new Map(r.map((c) => [c.toolName, c])), a = await u(this, U).getAllTools(u(this, Z)), i = new Map(a.map((c) => [c.name, c])), o = s.get(t.name);
  if (o)
    await L(this, ne, lo).call(this, t, o);
  else {
    const c = i.get(t.name);
    if (c && c.type === "function")
      await L(this, ne, nr).call(this, t, c);
    else
      throw new we(`Tool ${t.name} not found`);
  }
}, hs = async function(t, r, s) {
  if (u(this, tn).length === 0)
    return;
  const a = {
    agent: u(this, U),
    agentOutput: t,
    context: u(this, Z)
  }, o = (await Promise.all(u(this, tn).map((c) => c.run(a)))).find((c) => c.output.tripwireTriggered);
  if (o) {
    if (u(this, sn)[r])
      return;
    u(this, sn)[r] = !0;
    const c = new Yr(`Output guardrail triggered: ${JSON.stringify(o.output.outputInfo)}`, o);
    this.emit("guardrail_tripped", u(this, Z), u(this, U), c, {
      itemId: s
    }), this.interrupt();
    const l = qd(o);
    this.sendMessage(l);
    return;
  }
}, fo = function() {
  u(this, V).on("*", (s) => {
    if (this.emit("transport_event", s), s.type === "conversation.item.input_audio_transcription.completed")
      try {
        const a = s;
        k(this, ie, Za(u(this, ie), a, u(this, rn))), u(this, Z).context.history = u(this, ie), this.emit("history_updated", u(this, ie));
      } catch (a) {
        this.emit("error", {
          type: "error",
          error: a
        });
      }
  }), u(this, V).on("mcp_tools_listed", ({ serverLabel: s, tools: a }) => {
    try {
      u(this, Gn).set(s, a ?? []), L(this, ne, ms).call(this);
    } catch (i) {
      this.emit("error", { type: "error", error: i });
    }
  }), u(this, V).on("audio", (s) => {
    u(this, De) || (k(this, De, !0), this.emit("audio_start", u(this, Z), u(this, U))), this.emit("audio", s);
  }), u(this, V).on("turn_started", () => {
    k(this, De, !1), this.emit("agent_start", u(this, Z), u(this, U)), u(this, U).emit("agent_start", u(this, Z), u(this, U));
  }), u(this, V).on("turn_done", (s) => {
    const a = s.response.output[s.response.output.length - 1], i = ro(a) ?? "", o = (a == null ? void 0 : a.id) ?? "";
    this.emit("agent_end", u(this, Z), u(this, U), i), u(this, U).emit("agent_end", u(this, Z), i), L(this, ne, hs).call(this, i, s.response.id, o);
  }), u(this, V).on("audio_done", () => {
    u(this, De) && k(this, De, !1), this.emit("audio_stopped", u(this, Z), u(this, U));
  });
  let t = 0, r;
  u(this, V).on("audio_transcript_delta", (s) => {
    try {
      const a = s.delta, i = s.itemId, o = s.responseId;
      r !== i && (r = i, t = 0);
      const l = (u(this, zn)[i] ?? "") + a;
      if (u(this, zn)[i] = l, u(this, nn).debounceTextLength < 0)
        return;
      const f = Math.floor(l.length / u(this, nn).debounceTextLength);
      f > t && (t = f, L(this, ne, hs).call(this, l, o, i));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, V).on("item_update", (s) => {
    try {
      const a = !u(this, ie).some((i) => i.itemId === s.itemId);
      if (k(this, ie, Za(u(this, ie), s, u(this, rn))), u(this, Z).context.history = u(this, ie), a) {
        const i = u(this, ie).find((o) => o.itemId === s.itemId);
        i && this.emit("history_added", i);
      }
      this.emit("history_updated", u(this, ie));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, V).on("item_deleted", (s) => {
    try {
      k(this, ie, u(this, ie).filter((a) => a.itemId !== s.itemId)), u(this, Z).context.history = u(this, ie), this.emit("history_updated", u(this, ie));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, V).on("function_call", async (s) => {
    try {
      await L(this, ne, po).call(this, s);
    } catch (a) {
      Te.error("Error handling function call", a), this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, V).on("usage_update", (s) => {
    u(this, Z).usage.add(s);
  }), u(this, V).on("audio_interrupted", () => {
    u(this, De) && k(this, De, !1), this.emit("audio_interrupted", u(this, Z), u(this, U));
  }), u(this, V).on("error", (s) => {
    this.emit("error", s);
  }), u(this, V).on("mcp_tool_call_completed", (s) => {
    this.emit("mcp_tool_call_completed", u(this, Z), u(this, U), s), u(this, Wn) && u(this, V).sendEvent({
      type: "response.create"
    });
  }), u(this, V).on("mcp_approval_request", (s) => {
    this.emit("tool_approval_requested", u(this, Z), u(this, U), {
      type: "mcp_approval_request",
      approvalItem: Ld(u(this, U), s)
    });
  });
}, /**
 * Recomputes the currently available MCP tools based on the current agent's active
 * MCP server configurations and the cached per-server tool listings. Emits
 * `mcp_tools_changed` if the set changed.
 */
ms = function() {
  var c;
  const t = (c = u(this, en)) == null ? void 0 : c.filter((l) => l.type === "mcp"), r = (l) => {
    const f = l.allowed_tools;
    if (f) {
      if (Array.isArray(f))
        return f;
      if (f && Array.isArray(f.tool_names))
        return f.tool_names;
    }
  }, s = /* @__PURE__ */ new Map();
  for (const l of t) {
    const f = u(this, Gn).get(l.server_label) ?? [], d = r(l);
    for (const h of f)
      d && !d.includes(h.name) || s.has(h.name) || s.set(h.name, h);
  }
  const a = Array.from(s.values()), i = u(this, Et);
  (i.length !== a.length || JSON.stringify(i.map((l) => l.name).sort()) !== JSON.stringify(a.map((l) => l.name).sort())) && (k(this, Et, a), this.emit("mcp_tools_changed", u(this, Et)));
};
let fs = $s;
class ho extends oo {
  constructor(e = {}) {
    super(e);
  }
  /**
   * Build the initial session payload for a SIP-attached session, matching the config that a RealtimeSession would send on connect.
   *
   * This enables SIP deployments to accept an incoming call with a payload that already reflects
   * the active agent's instructions, tools, prompt, and tracing metadata without duplicating the
   * session logic outside of the SDK. The returned object structurally matches the REST
   * `CallAcceptParams` interface, so it can be forwarded directly to
   * `openai.realtime.calls.accept(...)`.
   *
   * @param agent - The starting agent used to seed the session instructions, tools, and prompt.
   * @param options - Optional session options that mirror the ones passed to the RealtimeSession constructor.
   * @param overrides - Additional config overrides applied on top of the session options.
   */
  static async buildInitialConfig(e, t = {}, r = {}) {
    const s = await fs.computeInitialSessionConfig(e, t, r);
    return new ho().buildSessionPayload(s);
  }
  sendAudio(e, t = {}) {
    throw new Error("OpenAIRealtimeSIP does not support sending audio buffers; audio is handled by the SIP call.");
  }
  async connect(e) {
    if (!e.callId)
      throw new re("OpenAIRealtimeSIP requires `callId` in the connect options.");
    await super.connect(e);
  }
}
const nf = {
  base64ToArrayBuffer: to,
  arrayBufferToBase64: no,
  getLastTextFromAudioOutputMessage: ro
};
export {
  zp as DEFAULT_OPENAI_REALTIME_MODEL,
  Re as DEFAULT_OPENAI_REALTIME_SESSION_CONFIG,
  we as ModelBehaviorError,
  _r as OpenAIRealtimeBase,
  ho as OpenAIRealtimeSIP,
  Gp as OpenAIRealtimeWebRTC,
  oo as OpenAIRealtimeWebSocket,
  Yr as OutputGuardrailTripwireTriggered,
  ef as RealtimeAgent,
  fs as RealtimeSession,
  re as UserError,
  tf as backgroundResult,
  Wp as isBackgroundResult,
  Qr as tool,
  nf as utils
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy5tanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcmVnaXN0cmllcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3BhcnNlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS91dGlsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvUmVmcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL2Vycm9yTWVzc2FnZXMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL1pvZEVycm9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9sb2NhbGVzL2VuLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvcGFyc2VVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL2Vycm9yVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjMvdHlwZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hcnJheS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9icmFuZGVkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGVmYXVsdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZWZmZWN0cy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvaW50ZXJzZWN0aW9uLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zdHJpbmcubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbWFwLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmVFbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGxhYmxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL29iamVjdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb3B0aW9uYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3BpcGVsaW5lLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3R1cGxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmRlZmluZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Vua25vd24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlYWRvbmx5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2VEZWYubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvUmVzcG9uc2VzUGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3RyYW5zZm9ybS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2hlbHBlcnMvem9kLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXJyb3JzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvem9kQ29tcGF0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdHlwZUd1YXJkcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3pvZEpzb25TY2hlbWFDb21wYXQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbWNwLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3Qvc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2xpZmVjeWNsZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2RlZmF1bHRNb2RlbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2hhbmRvZmYubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9tZXNzYWdlcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZ3VhcmRyYWlsLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9iYXNlNjQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ldmVudHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9jb21wdXRlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkltcGxlbWVudGF0aW9uLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuU3RhdGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW4ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9pbmRleC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2luZGV4Lm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uL3JlYWx0aW1lQWdlbnQubWpzIiwiLi4vZ3VhcmRyYWlsLm1qcyIsIi4uL2NsaWVudE1lc3NhZ2VzLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL2xvZ2dlci5tanMiLCIuLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMiLCIuLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzIiwiLi4vc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanMiLCIuLi90b29sLm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVNpcC5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjMuNFwiLFxuICAgIFwidmVyc2lvbnNcIjoge1xuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCI6IFwiMC4zLjRcIixcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1jb3JlXCI6IFwid29ya3NwYWNlOipcIlxuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBNRVRBREFUQTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGFkYXRhLm1qcy5tYXAiLCJleHBvcnQgYXN5bmMgZnVuY3Rpb24gc2FmZUV4ZWN1dGUoZm4pIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gW251bGwsIGF3YWl0IGZuKCldO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFtlcnJvciwgbnVsbF07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2FmZUV4ZWN1dGUubWpzLm1hcCIsIi8vIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEVxdWFsKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Tm90RXF1YWwodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgIHRocm93IG5ldyBFcnJvcigpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChfKSB7IH1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbnVtVmFsdWVzKGVudHJpZXMpIHtcbiAgICBjb25zdCBudW1lcmljVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhlbnRyaWVzKS5maWx0ZXIoKHYpID0+IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKTtcbiAgICBjb25zdCB2YWx1ZXMgPSBPYmplY3QuZW50cmllcyhlbnRyaWVzKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IG51bWVyaWNWYWx1ZXMuaW5kZXhPZigraykgPT09IC0xKVxuICAgICAgICAubWFwKChbXywgdl0pID0+IHYpO1xuICAgIHJldHVybiB2YWx1ZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gam9pblZhbHVlcyhhcnJheSwgc2VwYXJhdG9yID0gXCJ8XCIpIHtcbiAgICByZXR1cm4gYXJyYXkubWFwKCh2YWwpID0+IHN0cmluZ2lmeVByaW1pdGl2ZSh2YWwpKS5qb2luKHNlcGFyYXRvcik7XG59XG5leHBvcnQgZnVuY3Rpb24ganNvblN0cmluZ2lmeVJlcGxhY2VyKF8sIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNhY2hlZChnZXR0ZXIpIHtcbiAgICBjb25zdCBzZXQgPSBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgICAgICBpZiAoIXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwgeyB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWQgdmFsdWUgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBudWxsaXNoKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0ID09PSBudWxsIHx8IGlucHV0ID09PSB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xlYW5SZWdleChzb3VyY2UpIHtcbiAgICBjb25zdCBzdGFydCA9IHNvdXJjZS5zdGFydHNXaXRoKFwiXlwiKSA/IDEgOiAwO1xuICAgIGNvbnN0IGVuZCA9IHNvdXJjZS5lbmRzV2l0aChcIiRcIikgPyBzb3VyY2UubGVuZ3RoIC0gMSA6IHNvdXJjZS5sZW5ndGg7XG4gICAgcmV0dXJuIHNvdXJjZS5zbGljZShzdGFydCwgZW5kKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUxhenkob2JqZWN0LCBrZXksIGdldHRlcikge1xuICAgIGNvbnN0IHNldCA9IGZhbHNlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIGtleSwge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBpZiAoIXNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWQgdmFsdWUgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldCh2KSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdixcbiAgICAgICAgICAgICAgICAvLyBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIG9iamVjdFtrZXldID0gdjtcbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnblByb3AodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudEF0UGF0aChvYmosIHBhdGgpIHtcbiAgICBpZiAoIXBhdGgpXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIHBhdGgucmVkdWNlKChhY2MsIGtleSkgPT4gYWNjPy5ba2V5XSwgb2JqKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNlQWxsT2JqZWN0KHByb21pc2VzT2JqKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHByb21pc2VzT2JqKTtcbiAgICBjb25zdCBwcm9taXNlcyA9IGtleXMubWFwKChrZXkpID0+IHByb21pc2VzT2JqW2tleV0pO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICBjb25zdCByZXNvbHZlZE9iaiA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlc29sdmVkT2JqW2tleXNbaV1dID0gcmVzdWx0c1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZWRPYmo7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tU3RyaW5nKGxlbmd0aCA9IDEwKSB7XG4gICAgY29uc3QgY2hhcnMgPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XG4gICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBzdHIgKz0gY2hhcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKV07XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5leHBvcnQgZnVuY3Rpb24gZXNjKHN0cikge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xufVxuZXhwb3J0IGNvbnN0IGNhcHR1cmVTdGFja1RyYWNlID0gRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2VcbiAgICA/IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlXG4gICAgOiAoLi4uX2FyZ3MpID0+IHsgfTtcbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChkYXRhKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIGRhdGEgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSk7XG59XG5leHBvcnQgY29uc3QgYWxsb3dzRXZhbCA9IGNhY2hlZCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yPy51c2VyQWdlbnQ/LmluY2x1ZGVzKFwiQ2xvdWRmbGFyZVwiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IEYgPSBGdW5jdGlvbjtcbiAgICAgICAgbmV3IEYoXCJcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoXykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSk7XG5leHBvcnQgZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvKSB7XG4gICAgaWYgKGlzT2JqZWN0KG8pID09PSBmYWxzZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIG1vZGlmaWVkIGNvbnN0cnVjdG9yXG4gICAgY29uc3QgY3RvciA9IG8uY29uc3RydWN0b3I7XG4gICAgaWYgKGN0b3IgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgLy8gbW9kaWZpZWQgcHJvdG90eXBlXG4gICAgY29uc3QgcHJvdCA9IGN0b3IucHJvdG90eXBlO1xuICAgIGlmIChpc09iamVjdChwcm90KSA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBjdG9yIGRvZXNuJ3QgaGF2ZSBzdGF0aWMgYGlzUHJvdG90eXBlT2ZgXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm90LCBcImlzUHJvdG90eXBlT2ZcIikgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gbnVtS2V5cyhkYXRhKSB7XG4gICAgbGV0IGtleUNvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSkge1xuICAgICAgICAgICAga2V5Q291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5Q291bnQ7XG59XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIuaXNOYU4oZGF0YSkgPyBcIm5hblwiIDogXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJiaWdpbnRcIjtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3ltYm9sXCI7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibnVsbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicHJvbWlzZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBNYXAgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm1hcFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInNldFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGF0ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWxlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZmlsZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwib2JqZWN0XCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZGF0YSB0eXBlOiAke3R9YCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBwcm9wZXJ0eUtleVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJzeW1ib2xcIl0pO1xuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZVR5cGVzID0gbmV3IFNldChbXCJzdHJpbmdcIiwgXCJudW1iZXJcIiwgXCJiaWdpbnRcIiwgXCJib29sZWFuXCIsIFwic3ltYm9sXCIsIFwidW5kZWZpbmVkXCJdKTtcbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbn1cbi8vIHpvZC1zcGVjaWZpYyB1dGlsc1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGluc3QsIGRlZiwgcGFyYW1zKSB7XG4gICAgY29uc3QgY2wgPSBuZXcgaW5zdC5fem9kLmNvbnN0cihkZWYgPz8gaW5zdC5fem9kLmRlZik7XG4gICAgaWYgKCFkZWYgfHwgcGFyYW1zPy5wYXJlbnQpXG4gICAgICAgIGNsLl96b2QucGFyZW50ID0gaW5zdDtcbiAgICByZXR1cm4gY2w7XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUGFyYW1zKF9wYXJhbXMpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBfcGFyYW1zO1xuICAgIGlmICghcGFyYW1zKVxuICAgICAgICByZXR1cm4ge307XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IGVycm9yOiAoKSA9PiBwYXJhbXMgfTtcbiAgICBpZiAocGFyYW1zPy5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHBhcmFtcz8uZXJyb3IgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzcGVjaWZ5IGJvdGggYG1lc3NhZ2VgIGFuZCBgZXJyb3JgIHBhcmFtc1wiKTtcbiAgICAgICAgcGFyYW1zLmVycm9yID0gcGFyYW1zLm1lc3NhZ2U7XG4gICAgfVxuICAgIGRlbGV0ZSBwYXJhbXMubWVzc2FnZTtcbiAgICBpZiAodHlwZW9mIHBhcmFtcy5lcnJvciA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIHsgLi4ucGFyYW1zLCBlcnJvcjogKCkgPT4gcGFyYW1zLmVycm9yIH07XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc3BhcmVudFByb3h5KGdldHRlcikge1xuICAgIGxldCB0YXJnZXQ7XG4gICAgcmV0dXJuIG5ldyBQcm94eSh7fSwge1xuICAgICAgICBnZXQoXywgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoXywgcHJvcCwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIHZhbHVlLCByZWNlaXZlcik7XG4gICAgICAgIH0sXG4gICAgICAgIGhhcyhfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0Lmhhcyh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVQcm9wZXJ0eShfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcCk7XG4gICAgICAgIH0sXG4gICAgICAgIG93bktleXMoXykge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihfLCBwcm9wKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBkZWZpbmVQcm9wZXJ0eShfLCBwcm9wLCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcCwgZGVzY3JpcHRvcik7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5UHJpbWl0aXZlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCkgKyBcIm5cIjtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gb3B0aW9uYWxLZXlzKHNoYXBlKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHNoYXBlKS5maWx0ZXIoKGspID0+IHtcbiAgICAgICAgcmV0dXJuIHNoYXBlW2tdLl96b2Qub3B0aW4gPT09IFwib3B0aW9uYWxcIiAmJiBzaGFwZVtrXS5fem9kLm9wdG91dCA9PT0gXCJvcHRpb25hbFwiO1xuICAgIH0pO1xufVxuZXhwb3J0IGNvbnN0IE5VTUJFUl9GT1JNQVRfUkFOR0VTID0ge1xuICAgIHNhZmVpbnQ6IFtOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJdLFxuICAgIGludDMyOiBbLTIxNDc0ODM2NDgsIDIxNDc0ODM2NDddLFxuICAgIHVpbnQzMjogWzAsIDQyOTQ5NjcyOTVdLFxuICAgIGZsb2F0MzI6IFstMy40MDI4MjM0NjYzODUyODg2ZTM4LCAzLjQwMjgyMzQ2NjM4NTI4ODZlMzhdLFxuICAgIGZsb2F0NjQ6IFstTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRV0sXG59O1xuZXhwb3J0IGNvbnN0IEJJR0lOVF9GT1JNQVRfUkFOR0VTID0ge1xuICAgIGludDY0OiBbLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiLTkyMjMzNzIwMzY4NTQ3NzU4MDhcIiksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjkyMjMzNzIwMzY4NTQ3NzU4MDdcIildLFxuICAgIHVpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludCgwKSwgLyogQF9fUFVSRV9fKi8gQmlnSW50KFwiMTg0NDY3NDQwNzM3MDk1NTE2MTVcIildLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBwaWNrKHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjsgLy8uc2hhcGU7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIC8vIHBpY2sga2V5XG4gICAgICAgIG5ld1NoYXBlW2tleV0gPSBjdXJyRGVmLnNoYXBlW2tleV07XG4gICAgfVxuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBzaGFwZTogbmV3U2hhcGUsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gb21pdChzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBuZXdTaGFwZSA9IHsgLi4uc2NoZW1hLl96b2QuZGVmLnNoYXBlIH07XG4gICAgY29uc3QgY3VyckRlZiA9IHNjaGVtYS5fem9kLmRlZjsgLy8uc2hhcGU7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICBpZiAoIShrZXkgaW4gY3VyckRlZi5zaGFwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGRlbGV0ZSBuZXdTaGFwZVtrZXldO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGU6IG5ld1NoYXBlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChzY2hlbWEsIHNoYXBlKSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHNoYXBlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IHRvIGV4dGVuZDogZXhwZWN0ZWQgYSBwbGFpbiBvYmplY3RcIik7XG4gICAgfVxuICAgIGNvbnN0IGRlZiA9IHtcbiAgICAgICAgLi4uc2NoZW1hLl96b2QuZGVmLFxuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSwgLi4uc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9O1xuICAgIHJldHVybiBjbG9uZShzY2hlbWEsIGRlZik7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYSwgYikge1xuICAgIHJldHVybiBjbG9uZShhLCB7XG4gICAgICAgIC4uLmEuX3pvZC5kZWYsXG4gICAgICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgICAgIGNvbnN0IF9zaGFwZSA9IHsgLi4uYS5fem9kLmRlZi5zaGFwZSwgLi4uYi5fem9kLmRlZi5zaGFwZSB9O1xuICAgICAgICAgICAgYXNzaWduUHJvcCh0aGlzLCBcInNoYXBlXCIsIF9zaGFwZSk7IC8vIHNlbGYtY2FjaGluZ1xuICAgICAgICAgICAgcmV0dXJuIF9zaGFwZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0Y2hhbGw6IGIuX3pvZC5kZWYuY2F0Y2hhbGwsXG4gICAgICAgIGNoZWNrczogW10sIC8vIGRlbGV0ZSBleGlzdGluZyBjaGVja3NcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0aWFsKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICBjb25zdCBzaGFwZSA9IHsgLi4ub2xkU2hhcGUgfTtcbiAgICBpZiAobWFzaykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gb2xkU2hhcGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgPyBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2xkU2hhcGUpIHtcbiAgICAgICAgICAgIC8vIGlmIChvbGRTaGFwZVtrZXldIS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgc2hhcGVba2V5XSA9IENsYXNzXG4gICAgICAgICAgICAgICAgPyBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogb2xkU2hhcGVba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZWQoQ2xhc3MsIHNjaGVtYSwgbWFzaykge1xuICAgIGNvbnN0IG9sZFNoYXBlID0gc2NoZW1hLl96b2QuZGVmLnNoYXBlO1xuICAgIGNvbnN0IHNoYXBlID0geyAuLi5vbGRTaGFwZSB9O1xuICAgIGlmIChtYXNrKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgICAgIGlmICghKGtleSBpbiBzaGFwZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbWFza1trZXldKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICBzaGFwZVtrZXldID0gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFNoYXBlKSB7XG4gICAgICAgICAgICAvLyBvdmVyd3JpdGUgd2l0aCBub24tb3B0aW9uYWxcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBuZXcgQ2xhc3Moe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibm9ub3B0aW9uYWxcIixcbiAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIC8vIG9wdGlvbmFsOiBbXSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhYm9ydGVkKHgsIHN0YXJ0SW5kZXggPSAwKSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCB4Lmlzc3Vlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoeC5pc3N1ZXNbaV0/LmNvbnRpbnVlICE9PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcmVmaXhJc3N1ZXMocGF0aCwgaXNzdWVzKSB7XG4gICAgcmV0dXJuIGlzc3Vlcy5tYXAoKGlzcykgPT4ge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IGlzcykucGF0aCA/PyAoX2EucGF0aCA9IFtdKTtcbiAgICAgICAgaXNzLnBhdGgudW5zaGlmdChwYXRoKTtcbiAgICAgICAgcmV0dXJuIGlzcztcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1bndyYXBNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5hbGl6ZUlzc3VlKGlzcywgY3R4LCBjb25maWcpIHtcbiAgICBjb25zdCBmdWxsID0geyAuLi5pc3MsIHBhdGg6IGlzcy5wYXRoID8/IFtdIH07XG4gICAgLy8gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgaWYgKCFpc3MubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gdW53cmFwTWVzc2FnZShpc3MuaW5zdD8uX3pvZC5kZWY/LmVycm9yPy4oaXNzKSkgPz9cbiAgICAgICAgICAgIHVud3JhcE1lc3NhZ2UoY3R4Py5lcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGNvbmZpZy5jdXN0b21FcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGNvbmZpZy5sb2NhbGVFcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgZnVsbC5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgLy8gZGVsZXRlIChmdWxsIGFzIGFueSkuZGVmO1xuICAgIGRlbGV0ZSBmdWxsLmluc3Q7XG4gICAgZGVsZXRlIGZ1bGwuY29udGludWU7XG4gICAgaWYgKCFjdHg/LnJlcG9ydElucHV0KSB7XG4gICAgICAgIGRlbGV0ZSBmdWxsLmlucHV0O1xuICAgIH1cbiAgICByZXR1cm4gZnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaXphYmxlT3JpZ2luKGlucHV0KSB7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgU2V0KVxuICAgICAgICByZXR1cm4gXCJzZXRcIjtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBNYXApXG4gICAgICAgIHJldHVybiBcIm1hcFwiO1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEZpbGUpXG4gICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoYWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSlcbiAgICAgICAgcmV0dXJuIFwiYXJyYXlcIjtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICByZXR1cm4gXCJ1bmtub3duXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNzdWUoLi4uYXJncykge1xuICAgIGNvbnN0IFtpc3MsIGlucHV0LCBpbnN0XSA9IGFyZ3M7XG4gICAgaWYgKHR5cGVvZiBpc3MgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzcyxcbiAgICAgICAgICAgIGNvZGU6IFwiY3VzdG9tXCIsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGluc3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IC4uLmlzcyB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuRW51bShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMob2JqKVxuICAgICAgICAuZmlsdGVyKChbaywgX10pID0+IHtcbiAgICAgICAgLy8gcmV0dXJuIHRydWUgaWYgTmFOLCBtZWFuaW5nIGl0J3Mgbm90IGEgbnVtYmVyLCB0aHVzIGEgc3RyaW5nIGtleVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKE51bWJlci5wYXJzZUludChrLCAxMCkpO1xuICAgIH0pXG4gICAgICAgIC5tYXAoKGVsKSA9PiBlbFsxXSk7XG59XG4vLyBpbnN0YW5jZW9mXG5leHBvcnQgY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl9hcmdzKSB7IH1cbn1cbiIsImV4cG9ydCBjb25zdCAkb3V0cHV0ID0gU3ltYm9sKFwiWm9kT3V0cHV0XCIpO1xuZXhwb3J0IGNvbnN0ICRpbnB1dCA9IFN5bWJvbChcIlpvZElucHV0XCIpO1xuZXhwb3J0IGNsYXNzICRab2RSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5faWRtYXAgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGFkZChzY2hlbWEsIC4uLl9tZXRhKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSBfbWV0YVswXTtcbiAgICAgICAgdGhpcy5fbWFwLnNldChzY2hlbWEsIG1ldGEpO1xuICAgICAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gbWV0YSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lkbWFwLmhhcyhtZXRhLmlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSUQgJHttZXRhLmlkfSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgcmVnaXN0cnlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLnNldChtZXRhLmlkLCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9pZG1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlbW92ZShzY2hlbWEpIHtcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMuX21hcC5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIG1ldGEpIHtcbiAgICAgICAgICAgIHRoaXMuX2lkbWFwLmRlbGV0ZShtZXRhLmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tYXAuZGVsZXRlKHNjaGVtYSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQoc2NoZW1hKSB7XG4gICAgICAgIC8vIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSkgYXMgYW55O1xuICAgICAgICAvLyBpbmhlcml0IG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IHAgPSBzY2hlbWEuX3pvZC5wYXJlbnQ7XG4gICAgICAgIGlmIChwKSB7XG4gICAgICAgICAgICBjb25zdCBwbSA9IHsgLi4uKHRoaXMuZ2V0KHApID8/IHt9KSB9O1xuICAgICAgICAgICAgZGVsZXRlIHBtLmlkOyAvLyBkbyBub3QgaW5oZXJpdCBpZFxuICAgICAgICAgICAgcmV0dXJuIHsgLi4ucG0sIC4uLnRoaXMuX21hcC5nZXQoc2NoZW1hKSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG4gICAgfVxuICAgIGhhcyhzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5oYXMoc2NoZW1hKTtcbiAgICB9XG59XG4vLyByZWdpc3RyaWVzXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0cnkoKSB7XG4gICAgcmV0dXJuIG5ldyAkWm9kUmVnaXN0cnkoKTtcbn1cbmV4cG9ydCBjb25zdCBnbG9iYWxSZWdpc3RyeSA9IC8qQF9fUFVSRV9fKi8gcmVnaXN0cnkoKTtcbiIsImltcG9ydCB7ICRab2RSZWdpc3RyeSwgZ2xvYmFsUmVnaXN0cnkgfSBmcm9tIFwiLi9yZWdpc3RyaWVzLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnVtVmFsdWVzIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuZXhwb3J0IGNsYXNzIEpTT05TY2hlbWFHZW5lcmF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLm1ldGFkYXRhUmVnaXN0cnkgPSBwYXJhbXM/Lm1ldGFkYXRhID8/IGdsb2JhbFJlZ2lzdHJ5O1xuICAgICAgICB0aGlzLnRhcmdldCA9IHBhcmFtcz8udGFyZ2V0ID8/IFwiZHJhZnQtMjAyMC0xMlwiO1xuICAgICAgICB0aGlzLnVucmVwcmVzZW50YWJsZSA9IHBhcmFtcz8udW5yZXByZXNlbnRhYmxlID8/IFwidGhyb3dcIjtcbiAgICAgICAgdGhpcy5vdmVycmlkZSA9IHBhcmFtcz8ub3ZlcnJpZGUgPz8gKCgpID0+IHsgfSk7XG4gICAgICAgIHRoaXMuaW8gPSBwYXJhbXM/LmlvID8/IFwib3V0cHV0XCI7XG4gICAgICAgIHRoaXMuc2VlbiA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgcHJvY2VzcyhzY2hlbWEsIF9wYXJhbXMgPSB7IHBhdGg6IFtdLCBzY2hlbWFQYXRoOiBbXSB9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgICAgICBjb25zdCBmb3JtYXRNYXAgPSB7XG4gICAgICAgICAgICBndWlkOiBcInV1aWRcIixcbiAgICAgICAgICAgIHVybDogXCJ1cmlcIixcbiAgICAgICAgICAgIGRhdGV0aW1lOiBcImRhdGUtdGltZVwiLFxuICAgICAgICAgICAganNvbl9zdHJpbmc6IFwianNvbi1zdHJpbmdcIixcbiAgICAgICAgICAgIHJlZ2V4OiBcIlwiLCAvLyBkbyBub3Qgc2V0XG4gICAgICAgIH07XG4gICAgICAgIC8vIGNoZWNrIGZvciBzY2hlbWEgaW4gc2VlbnNcbiAgICAgICAgY29uc3Qgc2VlbiA9IHRoaXMuc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKHNlZW4pIHtcbiAgICAgICAgICAgIHNlZW4uY291bnQrKztcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGN5Y2xlXG4gICAgICAgICAgICBjb25zdCBpc0N5Y2xlID0gX3BhcmFtcy5zY2hlbWFQYXRoLmluY2x1ZGVzKHNjaGVtYSk7XG4gICAgICAgICAgICBpZiAoaXNDeWNsZSkge1xuICAgICAgICAgICAgICAgIHNlZW4uY3ljbGUgPSBfcGFyYW1zLnBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2Vlbi5zY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5pdGlhbGl6ZVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHNjaGVtYToge30sIGNvdW50OiAxLCBjeWNsZTogdW5kZWZpbmVkLCBwYXRoOiBfcGFyYW1zLnBhdGggfTtcbiAgICAgICAgdGhpcy5zZWVuLnNldChzY2hlbWEsIHJlc3VsdCk7XG4gICAgICAgIC8vIGN1c3RvbSBtZXRob2Qgb3ZlcnJpZGVzIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVTY2hlbWEgPSBzY2hlbWEuX3pvZC50b0pTT05TY2hlbWE/LigpO1xuICAgICAgICBpZiAob3ZlcnJpZGVTY2hlbWEpIHtcbiAgICAgICAgICAgIHJlc3VsdC5zY2hlbWEgPSBvdmVycmlkZVNjaGVtYTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi5fcGFyYW1zLFxuICAgICAgICAgICAgICAgIHNjaGVtYVBhdGg6IFsuLi5fcGFyYW1zLnNjaGVtYVBhdGgsIHNjaGVtYV0sXG4gICAgICAgICAgICAgICAgcGF0aDogX3BhcmFtcy5wYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHNjaGVtYS5fem9kLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBzY2hlbWEgd2FzIGNsb25lZCBmcm9tIGFub3RoZXIgc2NoZW1hXG4gICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IHBhcmVudDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MocGFyZW50LCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Vlbi5nZXQocGFyZW50KS5pc1BhcmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBfanNvbiA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkZWYudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwic3RyaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgcGF0dGVybnMsIGNvbnRlbnRFbmNvZGluZyB9ID0gc2NoZW1hLl96b2RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluTGVuZ3RoID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heExlbmd0aCA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXN0b20gcGF0dGVybiBvdmVycmlkZXMgZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5mb3JtYXQgPSBmb3JtYXRNYXBbZm9ybWF0XSA/PyBmb3JtYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24uZm9ybWF0ID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5mb3JtYXQ7IC8vIGVtcHR5IGZvcm1hdCBpcyBub3QgdmFsaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50RW5jb2RpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5jb250ZW50RW5jb2RpbmcgPSBjb250ZW50RW5jb2Rpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGF0dGVybnMgJiYgcGF0dGVybnMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdleGVzID0gWy4uLnBhdHRlcm5zXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXhlcy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucGF0dGVybiA9IHJlZ2V4ZXNbMF0uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlZ2V4ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2NoZW1hLmFsbE9mID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVnZXhlcy5tYXAoKHJlZ2V4KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLih0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC03XCIgPyB7IHR5cGU6IFwic3RyaW5nXCIgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByZWdleC5zb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIGZvcm1hdCwgbXVsdGlwbGVPZiwgZXhjbHVzaXZlTWF4aW11bSwgZXhjbHVzaXZlTWluaW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09IFwic3RyaW5nXCIgJiYgZm9ybWF0LmluY2x1ZGVzKFwiaW50XCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiaW50ZWdlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5leGNsdXNpdmVNaW5pbXVtID0gZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluaW11bSA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNaW5pbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNsdXNpdmVNaW5pbXVtID49IG1pbmltdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5taW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5leGNsdXNpdmVNaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmV4Y2x1c2l2ZU1heGltdW0gPSBleGNsdXNpdmVNYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhpbXVtID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2x1c2l2ZU1heGltdW0gPD0gbWF4aW11bSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLm1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBqc29uLmV4Y2x1c2l2ZU1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtdWx0aXBsZU9mID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubXVsdGlwbGVPZiA9IG11bHRpcGxlT2Y7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYm9vbGVhblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJiaWdpbnRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bWJvbHMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bGxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24udHlwZSA9IFwibnVsbFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFueVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5rbm93blwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5kZWZpbmVkIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2b2lkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVm9pZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmV2ZXJcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24ubm90ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGUgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWluSXRlbXMgPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWF4SXRlbXMgPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHRoaXMucHJvY2VzcyhkZWYuZWxlbWVudCwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBkZWYuc2hhcGU7IC8vIHBhcmFtcy5zaGFwZUNhY2hlLmdldChzY2hlbWEpITtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoYXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wcm9wZXJ0aWVzW2tleV0gPSB0aGlzLnByb2Nlc3Moc2hhcGVba2V5XSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0aWVzXCIsIGtleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXF1aXJlZCBrZXlzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxLZXlzID0gbmV3IFNldChPYmplY3Qua2V5cyhzaGFwZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3Qgb3B0aW9uYWxLZXlzID0gbmV3IFNldChkZWYub3B0aW9uYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWlyZWRLZXlzID0gbmV3IFNldChbLi4uYWxsS2V5c10uZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ID0gZGVmLnNoYXBlW2tleV0uX3pvZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2Lm9wdGluID09PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5vcHRvdXQgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWlyZWRLZXlzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5yZXF1aXJlZCA9IEFycmF5LmZyb20ocmVxdWlyZWRLZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhdGNoYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmNhdGNoYWxsPy5fem9kLmRlZi50eXBlID09PSBcIm5ldmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdHJpY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVndWxhclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlvID09PSBcIm91dHB1dFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZWYuY2F0Y2hhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gdGhpcy5wcm9jZXNzKGRlZi5jYXRjaGFsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFueU9mID0gZGVmLm9wdGlvbnMubWFwKCh4LCBpKSA9PiB0aGlzLnByb2Nlc3MoeCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYW55T2ZcIiwgaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW50ZXJzZWN0aW9uXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLnByb2Nlc3MoZGVmLmxlZnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gdGhpcy5wcm9jZXNzKGRlZi5yaWdodCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWxsT2ZcIiwgMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzU2ltcGxlSW50ZXJzZWN0aW9uID0gKHZhbCkgPT4gXCJhbGxPZlwiIGluIHZhbCAmJiBPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihhKSA/IGEuYWxsT2YgOiBbYV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihpc1NpbXBsZUludGVyc2VjdGlvbihiKSA/IGIuYWxsT2YgOiBbYl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWxsT2YgPSBhbGxPZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0dXBsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImFycmF5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVmaXhJdGVtcyA9IGRlZi5pdGVtcy5tYXAoKHgsIGkpID0+IHRoaXMucHJvY2Vzcyh4LCB7IC4uLnBhcmFtcywgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcInByZWZpeEl0ZW1zXCIsIGldIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByZWZpeEl0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gcHJlZml4SXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN0ID0gdGhpcy5wcm9jZXNzKGRlZi5yZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcIml0ZW1zXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHJlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFkZGl0aW9uYWxJdGVtcyA9IHJlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkaXRpb25hbEl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLml0ZW1zID0gdGhpcy5wcm9jZXNzKGRlZi5yZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcIml0ZW1zXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbkl0ZW1zID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heEl0ZW1zID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWNvcmRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydHlOYW1lcyA9IHRoaXMucHJvY2VzcyhkZWYua2V5VHlwZSwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcm9wZXJ0eU5hbWVzXCJdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IHRoaXMucHJvY2VzcyhkZWYudmFsdWVUeXBlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1hcFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hcCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2V0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2V0IGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbnVtXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGdldEVudW1WYWx1ZXMoZGVmLmVudHJpZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnVtYmVyIGVudW1zIGNhbiBoYXZlIGJvdGggc3RyaW5nIGFuZCBudW1iZXIgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZXMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5lbnVtID0gdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxpdGVyYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFscyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGl0ZXJhbCBgdW5kZWZpbmVkYCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYWRkIHRvIHZhbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCaWdJbnQgbGl0ZXJhbHMgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFscy5wdXNoKE51bWJlcih2YWwpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFscy5wdXNoKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZyAoYW4gdW5kZWZpbmVkIGxpdGVyYWwgd2FzIHN0cmlwcGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFscy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB2YWxzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IHZhbCA9PT0gbnVsbCA/IFwibnVsbFwiIDogdHlwZW9mIHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmNvbnN0ID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJib29sZWFuXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB2ID09PSBudWxsKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJudWxsXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5lbnVtID0gdmFscztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaWxlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwiYmluYXJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVuY29kaW5nOiBcImJpbmFyeVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWluaW11bSwgbWF4aW11bSwgbWltZSB9ID0gc2NoZW1hLl96b2QuYmFnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbmltdW0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4aW11bSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUubWF4TGVuZ3RoID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbWUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUuY29udGVudE1lZGlhVHlwZSA9IG1pbWVbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvbiwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFueU9mID0gbWltZS5tYXAoKG0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1GaWxlID0geyAuLi5maWxlLCBjb250ZW50TWVkaWFUeXBlOiBtIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbUZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvbiwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2Zvcm1zIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudWxsYWJsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lciA9IHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uYW55T2YgPSBbaW5uZXIsIHsgdHlwZTogXCJudWxsXCIgfV07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9ub3B0aW9uYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiYm9vbGVhblwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLmRlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwcmVmYXVsdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5fcHJlZmF1bHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRlZi5kZWZhdWx0VmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjYXRjaFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgY29uZGl0aW9uYWxzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhdGNoVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoVmFsdWUgPSBkZWYuY2F0Y2hWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkR5bmFtaWMgY2F0Y2ggdmFsdWVzIGFyZSBub3Qgc3VwcG9ydGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uZGVmYXVsdCA9IGNhdGNoVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibmFuXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmFOIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZW1wbGF0ZV9saXRlcmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSBzY2hlbWEuX3pvZC5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXR0ZXJuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhdHRlcm4gbm90IGZvdW5kIGluIHRlbXBsYXRlIGxpdGVyYWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wYXR0ZXJuID0gcGF0dGVybi5zb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGlwZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lclR5cGUgPSB0aGlzLmlvID09PSBcImlucHV0XCIgPyAoZGVmLmluLl96b2QuZGVmLnR5cGUgPT09IFwidHJhbnNmb3JtXCIgPyBkZWYub3V0IDogZGVmLmluKSA6IGRlZi5vdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJyZWFkb25seVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24ucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gcGFzc3Rocm91Z2ggdHlwZXNcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInByb21pc2VcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvcHRpb25hbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBkZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxhenlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJUeXBlID0gc2NoZW1hLl96b2QuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBpbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3VzdG9tXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ3VzdG9tIHR5cGVzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBtZXRhZGF0YVxuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5LmdldChzY2hlbWEpO1xuICAgICAgICBpZiAobWV0YSlcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LnNjaGVtYSwgbWV0YSk7XG4gICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIgJiYgaXNUcmFuc2Zvcm1pbmcoc2NoZW1hKSkge1xuICAgICAgICAgICAgLy8gZXhhbXBsZXMvZGVmYXVsdHMgb25seSBhcHBseSB0byBvdXRwdXQgdHlwZSBvZiBwaXBlXG4gICAgICAgICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5leGFtcGxlcztcbiAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLmRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IHByZWZhdWx0IGFzIGRlZmF1bHRcbiAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIiAmJiByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdClcbiAgICAgICAgICAgIChfYSA9IHJlc3VsdC5zY2hlbWEpLmRlZmF1bHQgPz8gKF9hLmRlZmF1bHQgPSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdCk7XG4gICAgICAgIGRlbGV0ZSByZXN1bHQuc2NoZW1hLl9wcmVmYXVsdDtcbiAgICAgICAgLy8gcHVsbGluZyBmcmVzaCBmcm9tIHRoaXMuc2VlbiBpbiBjYXNlIGl0IHdhcyBvdmVyd3JpdHRlblxuICAgICAgICBjb25zdCBfcmVzdWx0ID0gdGhpcy5zZWVuLmdldChzY2hlbWEpO1xuICAgICAgICByZXR1cm4gX3Jlc3VsdC5zY2hlbWE7XG4gICAgfVxuICAgIGVtaXQoc2NoZW1hLCBfcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIGN5Y2xlczogX3BhcmFtcz8uY3ljbGVzID8/IFwicmVmXCIsXG4gICAgICAgICAgICByZXVzZWQ6IF9wYXJhbXM/LnJldXNlZCA/PyBcImlubGluZVwiLFxuICAgICAgICAgICAgLy8gdW5yZXByZXNlbnRhYmxlOiBfcGFyYW1zPy51bnJlcHJlc2VudGFibGUgPz8gXCJ0aHJvd1wiLFxuICAgICAgICAgICAgLy8gdXJpOiBfcGFyYW1zPy51cmkgPz8gKChpZCkgPT4gYCR7aWR9YCksXG4gICAgICAgICAgICBleHRlcm5hbDogX3BhcmFtcz8uZXh0ZXJuYWwgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICAvLyBpdGVyYXRlIG92ZXIgc2VlbiBtYXA7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmICghcm9vdClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucHJvY2Vzc2VkIHNjaGVtYS4gVGhpcyBpcyBhIGJ1ZyBpbiBab2QuXCIpO1xuICAgICAgICAvLyBpbml0aWFsaXplIHJlc3VsdCB3aXRoIHJvb3Qgc2NoZW1hIGZpZWxkc1xuICAgICAgICAvLyBPYmplY3QuYXNzaWduKHJlc3VsdCwgc2Vlbi5jYWNoZWQpO1xuICAgICAgICAvLyByZXR1cm5zIGEgcmVmIHRvIHRoZSBzY2hlbWFcbiAgICAgICAgLy8gZGVmSWQgd2lsbCBiZSBlbXB0eSBpZiB0aGUgcmVmIHBvaW50cyB0byBhbiBleHRlcm5hbCBzY2hlbWEgKG9yICMpXG4gICAgICAgIGNvbnN0IG1ha2VVUkkgPSAoZW50cnkpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbXBhcmluZyB0aGUgc2VlbiBvYmplY3RzIGJlY2F1c2Ugc29tZXRpbWVzXG4gICAgICAgICAgICAvLyBtdWx0aXBsZSBzY2hlbWFzIG1hcCB0byB0aGUgc2FtZSBzZWVuIG9iamVjdC5cbiAgICAgICAgICAgIC8vIGUuZy4gbGF6eVxuICAgICAgICAgICAgLy8gZXh0ZXJuYWwgaXMgY29uZmlndXJlZFxuICAgICAgICAgICAgY29uc3QgZGVmc1NlZ21lbnQgPSB0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIgPyBcIiRkZWZzXCIgOiBcImRlZmluaXRpb25zXCI7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ZXJuYWxJZCA9IHBhcmFtcy5leHRlcm5hbC5yZWdpc3RyeS5nZXQoZW50cnlbMF0pPy5pZDsgLy8gPz8gXCJfX3NoYXJlZFwiOy8vIGBfX3NjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBzY2hlbWEgaXMgaW4gdGhlIGV4dGVybmFsIHJlZ2lzdHJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdXJpR2VuZXJhdG9yID0gcGFyYW1zLmV4dGVybmFsLnVyaSA/PyAoKGlkKSA9PiBpZCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVybmFsSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgcmVmOiB1cmlHZW5lcmF0b3IoZXh0ZXJuYWxJZCkgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBhZGQgdG8gX19zaGFyZWRcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IGVudHJ5WzFdLmRlZklkID8/IGVudHJ5WzFdLnNjaGVtYS5pZCA/PyBgc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gO1xuICAgICAgICAgICAgICAgIGVudHJ5WzFdLmRlZklkID0gaWQ7IC8vIHNldCBkZWZJZCBzbyBpdCB3aWxsIGJlIHJldXNlZCBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkZWZJZDogaWQsIHJlZjogYCR7dXJpR2VuZXJhdG9yKFwiX19zaGFyZWRcIil9Iy8ke2RlZnNTZWdtZW50fS8ke2lkfWAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRyeVsxXSA9PT0gcm9vdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZjogXCIjXCIgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlbGYtY29udGFpbmVkIHNjaGVtYVxuICAgICAgICAgICAgY29uc3QgdXJpUHJlZml4ID0gYCNgO1xuICAgICAgICAgICAgY29uc3QgZGVmVXJpUHJlZml4ID0gYCR7dXJpUHJlZml4fS8ke2RlZnNTZWdtZW50fS9gO1xuICAgICAgICAgICAgY29uc3QgZGVmSWQgPSBlbnRyeVsxXS5zY2hlbWEuaWQgPz8gYF9fc2NoZW1hJHt0aGlzLmNvdW50ZXIrK31gO1xuICAgICAgICAgICAgcmV0dXJuIHsgZGVmSWQsIHJlZjogZGVmVXJpUHJlZml4ICsgZGVmSWQgfTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gc3RvcmVkIGNhY2hlZCB2ZXJzaW9uIGluIGBkZWZgIHByb3BlcnR5XG4gICAgICAgIC8vIHJlbW92ZSBhbGwgcHJvcGVydGllcywgc2V0ICRyZWZcbiAgICAgICAgY29uc3QgZXh0cmFjdFRvRGVmID0gKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAvLyBpZiB0aGUgc2NoZW1hIGlzIGFscmVhZHkgYSByZWZlcmVuY2UsIGRvIG5vdCBleHRyYWN0IGl0XG4gICAgICAgICAgICBpZiAoZW50cnlbMV0uc2NoZW1hLiRyZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICBjb25zdCB7IHJlZiwgZGVmSWQgfSA9IG1ha2VVUkkoZW50cnkpO1xuICAgICAgICAgICAgc2Vlbi5kZWYgPSB7IC4uLnNlZW4uc2NoZW1hIH07XG4gICAgICAgICAgICAvLyBkZWZJZCB3b24ndCBiZSBzZXQgaWYgdGhlIHNjaGVtYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBleHRlcm5hbCBzY2hlbWFcbiAgICAgICAgICAgIGlmIChkZWZJZClcbiAgICAgICAgICAgICAgICBzZWVuLmRlZklkID0gZGVmSWQ7XG4gICAgICAgICAgICAvLyB3aXBlIGF3YXkgYWxsIHByb3BlcnRpZXMgZXhjZXB0ICRyZWZcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NoZW1hLiRyZWYgPSByZWY7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHRocm93IG9uIGN5Y2xlc1xuICAgICAgICAvLyBicmVhayBjeWNsZXNcbiAgICAgICAgaWYgKHBhcmFtcy5jeWNsZXMgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgICAgIGlmIChzZWVuLmN5Y2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN5Y2xlIGRldGVjdGVkOiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBgIy8ke3NlZW4uY3ljbGU/LmpvaW4oXCIvXCIpfS88cm9vdD5gICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdcXG5cXG5TZXQgdGhlIGBjeWNsZXNgIHBhcmFtZXRlciB0byBgXCJyZWZcImAgdG8gcmVzb2x2ZSBjeWNsaWNhbCBzY2hlbWFzIHdpdGggZGVmcy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXh0cmFjdCBzY2hlbWFzIGludG8gJGRlZnNcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLnNlZW4uZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBzZWVuID0gZW50cnlbMV07XG4gICAgICAgICAgICAvLyBjb252ZXJ0IHJvb3Qgc2NoZW1hIHRvICMgJHJlZlxuICAgICAgICAgICAgaWYgKHNjaGVtYSA9PT0gZW50cnlbMF0pIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpOyAvLyB0aGlzIGhhcyBzcGVjaWFsIGhhbmRsaW5nIGZvciB0aGUgcm9vdCBzY2hlbWFcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB0aGF0IGFyZSBpbiB0aGUgZXh0ZXJuYWwgcmVnaXN0cnlcbiAgICAgICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHNjaGVtYSAhPT0gZW50cnlbMF0gJiYgZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyB3aXRoIGBpZGAgbWV0YVxuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLm1ldGFkYXRhUmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7XG4gICAgICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYnJlYWsgY3ljbGVzXG4gICAgICAgICAgICBpZiAoc2Vlbi5jeWNsZSkge1xuICAgICAgICAgICAgICAgIC8vIGFueVxuICAgICAgICAgICAgICAgIGV4dHJhY3RUb0RlZihlbnRyeSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHRyYWN0IHJldXNlZCBzY2hlbWFzXG4gICAgICAgICAgICBpZiAoc2Vlbi5jb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnJldXNlZCA9PT0gXCJyZWZcIikge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGZsYXR0ZW4gX3JlZnNcbiAgICAgICAgY29uc3QgZmxhdHRlblJlZiA9ICh6b2RTY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IHRoaXMuc2Vlbi5nZXQoem9kU2NoZW1hKTtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNlZW4uZGVmID8/IHNlZW4uc2NoZW1hO1xuICAgICAgICAgICAgY29uc3QgX2NhY2hlZCA9IHsgLi4uc2NoZW1hIH07XG4gICAgICAgICAgICAvLyBhbHJlYWR5IHNlZW5cbiAgICAgICAgICAgIGlmIChzZWVuLnJlZiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGZsYXR0ZW4gcmVmIGlmIGRlZmluZWRcbiAgICAgICAgICAgIGNvbnN0IHJlZiA9IHNlZW4ucmVmO1xuICAgICAgICAgICAgc2Vlbi5yZWYgPSBudWxsOyAvLyBwcmV2ZW50IHJlY3Vyc2lvblxuICAgICAgICAgICAgaWYgKHJlZikge1xuICAgICAgICAgICAgICAgIGZsYXR0ZW5SZWYocmVmLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIC8vIG1lcmdlIHJlZmVyZW5jZWQgc2NoZW1hIGludG8gY3VycmVudFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZlNjaGVtYSA9IHRoaXMuc2Vlbi5nZXQocmVmKS5zY2hlbWE7XG4gICAgICAgICAgICAgICAgaWYgKHJlZlNjaGVtYS4kcmVmICYmIHBhcmFtcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IHNjaGVtYS5hbGxPZiA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2gocmVmU2NoZW1hKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2NoZW1hLCByZWZTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNjaGVtYSwgX2NhY2hlZCk7IC8vIHByZXZlbnQgb3ZlcndyaXRpbmcgYW55IGZpZWxkcyBpbiB0aGUgb3JpZ2luYWwgc2NoZW1hXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXhlY3V0ZSBvdmVycmlkZXNcbiAgICAgICAgICAgIGlmICghc2Vlbi5pc1BhcmVudClcbiAgICAgICAgICAgICAgICB0aGlzLm92ZXJyaWRlKHtcbiAgICAgICAgICAgICAgICAgICAgem9kU2NoZW1hOiB6b2RTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogc2Vlbi5wYXRoID8/IFtdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIFsuLi50aGlzLnNlZW4uZW50cmllcygpXS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGZsYXR0ZW5SZWYoZW50cnlbMF0sIHsgdGFyZ2V0OiB0aGlzLnRhcmdldCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIikge1xuICAgICAgICAgICAgcmVzdWx0LiRzY2hlbWEgPSBcImh0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMjAtMTIvc2NoZW1hXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiKSB7XG4gICAgICAgICAgICByZXN1bHQuJHNjaGVtYSA9IFwiaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgdGFyZ2V0OiAke3RoaXMudGFyZ2V0fWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMuZXh0ZXJuYWw/LnVyaSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KHNjaGVtYSk/LmlkO1xuICAgICAgICAgICAgaWYgKCFpZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY2hlbWEgaXMgbWlzc2luZyBhbiBgaWRgIHByb3BlcnR5XCIpO1xuICAgICAgICAgICAgcmVzdWx0LiRpZCA9IHBhcmFtcy5leHRlcm5hbC51cmkoaWQpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0LCByb290LmRlZik7XG4gICAgICAgIC8vIGJ1aWxkIGRlZnMgb2JqZWN0XG4gICAgICAgIGNvbnN0IGRlZnMgPSBwYXJhbXMuZXh0ZXJuYWw/LmRlZnMgPz8ge307XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgaWYgKHNlZW4uZGVmICYmIHNlZW4uZGVmSWQpIHtcbiAgICAgICAgICAgICAgICBkZWZzW3NlZW4uZGVmSWRdID0gc2Vlbi5kZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2V0IGRlZmluaXRpb25zIGluIHJlc3VsdFxuICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LiRkZWZzID0gZGVmcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZWZpbml0aW9ucyA9IGRlZnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyB0aGlzIFwiZmluYWxpemVzXCIgdGhpcyBzY2hlbWEgYW5kIGVuc3VyZXMgYWxsIGN5Y2xlcyBhcmUgcmVtb3ZlZFxuICAgICAgICAgICAgLy8gZWFjaCBjYWxsIHRvIC5lbWl0KCkgaXMgZnVuY3Rpb25hbGx5IGluZGVwZW5kZW50XG4gICAgICAgICAgICAvLyB0aG91Z2ggdGhlIHNlZW4gbWFwIGlzIHNoYXJlZFxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lcnIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGNvbnZlcnRpbmcgc2NoZW1hIHRvIEpTT04uXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHRvSlNPTlNjaGVtYShpbnB1dCwgX3BhcmFtcykge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mICRab2RSZWdpc3RyeSkge1xuICAgICAgICBjb25zdCBnZW4gPSBuZXcgSlNPTlNjaGVtYUdlbmVyYXRvcihfcGFyYW1zKTtcbiAgICAgICAgY29uc3QgZGVmcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGlucHV0Ll9pZG1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFtfLCBzY2hlbWFdID0gZW50cnk7XG4gICAgICAgICAgICBnZW4ucHJvY2VzcyhzY2hlbWEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNjaGVtYXMgPSB7fTtcbiAgICAgICAgY29uc3QgZXh0ZXJuYWwgPSB7XG4gICAgICAgICAgICByZWdpc3RyeTogaW5wdXQsXG4gICAgICAgICAgICB1cmk6IF9wYXJhbXM/LnVyaSxcbiAgICAgICAgICAgIGRlZnMsXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgaW5wdXQuX2lkbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgW2tleSwgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgc2NoZW1hc1trZXldID0gZ2VuLmVtaXQoc2NoZW1hLCB7XG4gICAgICAgICAgICAgICAgLi4uX3BhcmFtcyxcbiAgICAgICAgICAgICAgICBleHRlcm5hbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhkZWZzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZzU2VnbWVudCA9IGdlbi50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCIkZGVmc1wiIDogXCJkZWZpbml0aW9uc1wiO1xuICAgICAgICAgICAgc2NoZW1hcy5fX3NoYXJlZCA9IHtcbiAgICAgICAgICAgICAgICBbZGVmc1NlZ21lbnRdOiBkZWZzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzY2hlbWFzIH07XG4gICAgfVxuICAgIGNvbnN0IGdlbiA9IG5ldyBKU09OU2NoZW1hR2VuZXJhdG9yKF9wYXJhbXMpO1xuICAgIGdlbi5wcm9jZXNzKGlucHV0KTtcbiAgICByZXR1cm4gZ2VuLmVtaXQoaW5wdXQsIF9wYXJhbXMpO1xufVxuZnVuY3Rpb24gaXNUcmFuc2Zvcm1pbmcoX3NjaGVtYSwgX2N0eCkge1xuICAgIGNvbnN0IGN0eCA9IF9jdHggPz8geyBzZWVuOiBuZXcgU2V0KCkgfTtcbiAgICBpZiAoY3R4LnNlZW4uaGFzKF9zY2hlbWEpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY3R4LnNlZW4uYWRkKF9zY2hlbWEpO1xuICAgIGNvbnN0IHNjaGVtYSA9IF9zY2hlbWE7XG4gICAgY29uc3QgZGVmID0gc2NoZW1hLl96b2QuZGVmO1xuICAgIHN3aXRjaCAoZGVmLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgIGNhc2UgXCJudWxsXCI6XG4gICAgICAgIGNhc2UgXCJhbnlcIjpcbiAgICAgICAgY2FzZSBcInVua25vd25cIjpcbiAgICAgICAgY2FzZSBcIm5ldmVyXCI6XG4gICAgICAgIGNhc2UgXCJ2b2lkXCI6XG4gICAgICAgIGNhc2UgXCJsaXRlcmFsXCI6XG4gICAgICAgIGNhc2UgXCJlbnVtXCI6XG4gICAgICAgIGNhc2UgXCJuYW5cIjpcbiAgICAgICAgY2FzZSBcImZpbGVcIjpcbiAgICAgICAgY2FzZSBcInRlbXBsYXRlX2xpdGVyYWxcIjpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgY2FzZSBcImFycmF5XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuZWxlbWVudCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRlZi5zaGFwZSkge1xuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhkZWYuc2hhcGVba2V5XSwgY3R4KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInVuaW9uXCI6IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIGRlZi5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKG9wdGlvbiwgY3R4KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImludGVyc2VjdGlvblwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmxlZnQsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnJpZ2h0LCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0dXBsZVwiOiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGVmLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtaW5nKGl0ZW0sIGN0eCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlZi5yZXN0ICYmIGlzVHJhbnNmb3JtaW5nKGRlZi5yZXN0LCBjdHgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJyZWNvcmRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm1hcFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmtleVR5cGUsIGN0eCkgfHwgaXNUcmFuc2Zvcm1pbmcoZGVmLnZhbHVlVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwic2V0XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYudmFsdWVUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlubmVyIHR5cGVzXG4gICAgICAgIGNhc2UgXCJwcm9taXNlXCI6XG4gICAgICAgIGNhc2UgXCJvcHRpb25hbFwiOlxuICAgICAgICBjYXNlIFwibm9ub3B0aW9uYWxcIjpcbiAgICAgICAgY2FzZSBcIm51bGxhYmxlXCI6XG4gICAgICAgIGNhc2UgXCJyZWFkb25seVwiOlxuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIGNhc2UgXCJsYXp5XCI6XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmdldHRlcigpLCBjdHgpO1xuICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmlubmVyVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicHJlZmF1bHRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImN1c3RvbVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInRyYW5zZm9ybVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicGlwZVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmluLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi5vdXQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInN1Y2Nlc3NcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjYXRjaFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGRlZjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHNjaGVtYSB0eXBlOiAke2RlZi50eXBlfWApO1xufVxuIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2wgIT09IHVuZGVmaW5lZCAmJiAnZnVuY3Rpb24nIGluIHRvb2wgJiYgdG9vbC5mdW5jdGlvbiAhPT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQocmVzcG9uc2VfZm9ybWF0LCBwYXJzZXIpIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnJlc3BvbnNlX2Zvcm1hdCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0JyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlUmVzcG9uc2VGb3JtYXQocmVzcG9uc2VfZm9ybWF0KSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlX2Zvcm1hdD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCc7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVRvb2wodG9vbCwgeyBwYXJzZXIsIGNhbGxiYWNrLCB9KSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi50b29sIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS10b29sJyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJGNhbGxiYWNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2ssXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2w/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS10b29sJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgIWhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jb21wbGV0aW9uLFxuICAgICAgICAgICAgY2hvaWNlczogY29tcGxldGlvbi5jaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jaG9pY2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNob2ljZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9jYWxsczogY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0VG9vbENhbGxzQXJlQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2xDYWxscyhjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmIGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7IC8vIFRTIGRvZXNuJ3QgbmFycm93IGJhc2VkIG9uIGlzQ2hhdENvbXBsZXRpb25Ub29sXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAuLi50b29sQ2FsbC5mdW5jdGlvbixcbiAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpID8gaW5wdXRUb29sLiRwYXJzZVJhdyh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgOiBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRQYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhKCd0b29scycgaW4gcGFyYW1zKSB8fCAhcGFyYW1zLnRvb2xzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJiBpbnB1dFRvb2wuZnVuY3Rpb24/Lm5hbWUgPT09IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUpO1xuICAgIHJldHVybiAoaXNDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbChpbnB1dFRvb2wpICYmXG4gICAgICAgIChpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSB8fCBpbnB1dFRvb2w/LmZ1bmN0aW9uLnN0cmljdCB8fCBmYWxzZSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHModG9vbENhbGxzKSB7XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiB0b29sQ2FsbHMgfHwgW10pIHtcbiAgICAgICAgaWYgKHRvb2xDYWxsLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCBjYWxscyBhcmUgc3VwcG9ydGVkOyBSZWNlaXZlZCBcXGAke3Rvb2xDYWxsLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVJbnB1dFRvb2xzKHRvb2xzKSB7XG4gICAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzID8/IFtdKSB7XG4gICAgICAgIGlmICh0b29sLnR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgQ3VycmVudGx5IG9ubHkgXFxgZnVuY3Rpb25cXGAgdG9vbCB0eXBlcyBzdXBwb3J0IGF1dG8tcGFyc2luZzsgUmVjZWl2ZWQgXFxgJHt0b29sLnR5cGV9XFxgYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvb2wuZnVuY3Rpb24uc3RyaWN0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYFRoZSBcXGAke3Rvb2wuZnVuY3Rpb24ubmFtZX1cXGAgdG9vbCBpcyBub3QgbWFya2VkIHdpdGggXFxgc3RyaWN0OiB0cnVlXFxgLiBPbmx5IHN0cmljdCBmdW5jdGlvbiB0b29scyBjYW4gYmUgYXV0by1wYXJzZWRgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIiwiZXhwb3J0IGNvbnN0IGlnbm9yZU92ZXJyaWRlID0gU3ltYm9sKCdMZXQgem9kVG9Kc29uU2NoZW1hIGRlY2lkZSBvbiB3aGljaCBwYXJzZXIgdG8gdXNlJyk7XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBuYW1lOiB1bmRlZmluZWQsXG4gICAgJHJlZlN0cmF0ZWd5OiAncm9vdCcsXG4gICAgZWZmZWN0U3RyYXRlZ3k6ICdpbnB1dCcsXG4gICAgcGlwZVN0cmF0ZWd5OiAnYWxsJyxcbiAgICBkYXRlU3RyYXRlZ3k6ICdmb3JtYXQ6ZGF0ZS10aW1lJyxcbiAgICBtYXBTdHJhdGVneTogJ2VudHJpZXMnLFxuICAgIG51bGxhYmxlU3RyYXRlZ3k6ICdmcm9tLXRhcmdldCcsXG4gICAgcmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5OiAncGFzc3Rocm91Z2gnLFxuICAgIGRlZmluaXRpb25QYXRoOiAnZGVmaW5pdGlvbnMnLFxuICAgIHRhcmdldDogJ2pzb25TY2hlbWE3JyxcbiAgICBzdHJpY3RVbmlvbnM6IGZhbHNlLFxuICAgIGVycm9yTWVzc2FnZXM6IGZhbHNlLFxuICAgIG1hcmtkb3duRGVzY3JpcHRpb246IGZhbHNlLFxuICAgIHBhdHRlcm5TdHJhdGVneTogJ2VzY2FwZScsXG4gICAgYXBwbHlSZWdleEZsYWdzOiBmYWxzZSxcbiAgICBlbWFpbFN0cmF0ZWd5OiAnZm9ybWF0OmVtYWlsJyxcbiAgICBiYXNlNjRTdHJhdGVneTogJ2NvbnRlbnRFbmNvZGluZzpiYXNlNjQnLFxuICAgIG5hbWVTdHJhdGVneTogJ3JlZicsXG59O1xuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRPcHRpb25zID0gKG9wdGlvbnMpID0+IHtcbiAgICAvLyBXZSBuZWVkIHRvIGFkZCBgZGVmaW5pdGlvbnNgIGhlcmUgYXMgd2UgbWF5IG11dGF0ZSBpdFxuICAgIHJldHVybiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID9cbiAgICAgICAge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsXG4gICAgICAgICAgICBiYXNlUGF0aDogWycjJ10sXG4gICAgICAgICAgICBkZWZpbml0aW9uczoge30sXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9KTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PcHRpb25zLm1qcy5tYXAiLCJleHBvcnQgY29uc3Qgem9kRGVmID0gKHpvZFNjaGVtYSkgPT4ge1xuICAgIHJldHVybiAnX2RlZicgaW4gem9kU2NoZW1hID8gem9kU2NoZW1hLl9kZWYgOiB6b2RTY2hlbWE7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmoob2JqKSB7XG4gICAgaWYgKCFvYmopXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGZvciAoY29uc3QgX2sgaW4gb2JqKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXREZWZhdWx0T3B0aW9ucyB9IGZyb20gXCIuL09wdGlvbnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYgfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuZXhwb3J0IGNvbnN0IGdldFJlZnMgPSAob3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IF9vcHRpb25zID0gZ2V0RGVmYXVsdE9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3QgY3VycmVudFBhdGggPSBfb3B0aW9ucy5uYW1lICE9PSB1bmRlZmluZWQgP1xuICAgICAgICBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBfb3B0aW9ucy5uYW1lXVxuICAgICAgICA6IF9vcHRpb25zLmJhc2VQYXRoO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLl9vcHRpb25zLFxuICAgICAgICBjdXJyZW50UGF0aDogY3VycmVudFBhdGgsXG4gICAgICAgIHByb3BlcnR5UGF0aDogdW5kZWZpbmVkLFxuICAgICAgICBzZWVuUmVmczogbmV3IFNldCgpLFxuICAgICAgICBzZWVuOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKF9vcHRpb25zLmRlZmluaXRpb25zKS5tYXAoKFtuYW1lLCBkZWZdKSA9PiBbXG4gICAgICAgICAgICB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWY6IHpvZERlZihkZWYpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5fb3B0aW9ucy5iYXNlUGF0aCwgX29wdGlvbnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLFxuICAgICAgICAgICAgICAgIC8vIFJlc29sdXRpb24gb2YgcmVmZXJlbmNlcyB3aWxsIGJlIGZvcmNlZCBldmVuIHRob3VnaCBzZWVuLCBzbyBpdCdzIG9rIHRoYXQgdGhlIHNjaGVtYSBpcyB1bmRlZmluZWQgaGVyZSBmb3Igbm93LlxuICAgICAgICAgICAgICAgIGpzb25TY2hlbWE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlZnMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIGlmICghcmVmcz8uZXJyb3JNZXNzYWdlcylcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgcmVzLmVycm9yTWVzc2FnZSA9IHtcbiAgICAgICAgICAgIC4uLnJlcy5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICBba2V5XTogZXJyb3JNZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywga2V5LCB2YWx1ZSwgZXJyb3JNZXNzYWdlLCByZWZzKSB7XG4gICAgcmVzW2tleV0gPSB2YWx1ZTtcbiAgICBhZGRFcnJvck1lc3NhZ2UocmVzLCBrZXksIGVycm9yTWVzc2FnZSwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvck1lc3NhZ2VzLm1qcy5tYXAiLCJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiIsImltcG9ydCB7IHV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcImludmFsaWRfdHlwZVwiLFxuICAgIFwiaW52YWxpZF9saXRlcmFsXCIsXG4gICAgXCJjdXN0b21cIixcbiAgICBcImludmFsaWRfdW5pb25cIixcbiAgICBcImludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvclwiLFxuICAgIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gICAgXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgIFwiaW52YWxpZF9hcmd1bWVudHNcIixcbiAgICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgICBcImludmFsaWRfZGF0ZVwiLFxuICAgIFwiaW52YWxpZF9zdHJpbmdcIixcbiAgICBcInRvb19zbWFsbFwiLFxuICAgIFwidG9vX2JpZ1wiLFxuICAgIFwiaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXNcIixcbiAgICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgIFwibm90X2Zpbml0ZVwiLFxuXSk7XG5leHBvcnQgY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBnZXQgZXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlzc3Vlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgICAgICB0aGlzLmFkZElzc3VlID0gKHN1YikgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIHN1Yl07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkSXNzdWVzID0gKHN1YnMgPSBbXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIC4uLnN1YnNdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFuL2JhblxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGFjdHVhbFByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0ge307XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RFbCA9IHN1Yi5wYXRoWzBdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW2ZpcnN0RWxdID0gZmllbGRFcnJvcnNbZmlyc3RFbF0gfHwgW107XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbZmlyc3RFbF0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImltcG9ydCB7IFpvZElzc3VlQ29kZSB9IGZyb20gXCIuLi9ab2RFcnJvci5qc1wiO1xuaW1wb3J0IHsgdXRpbCwgWm9kUGFyc2VkVHlwZSB9IGZyb20gXCIuLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNvbnN0IGVycm9yTWFwID0gKGlzc3VlLCBfY3R4KSA9PiB7XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgc3dpdGNoIChpc3N1ZS5jb2RlKSB7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZTpcbiAgICAgICAgICAgIGlmIChpc3N1ZS5yZWNlaXZlZCA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJSZXF1aXJlZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBFeHBlY3RlZCAke2lzc3VlLmV4cGVjdGVkfSwgcmVjZWl2ZWQgJHtpc3N1ZS5yZWNlaXZlZH1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBsaXRlcmFsIHZhbHVlLCBleHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGlzc3VlLmV4cGVjdGVkLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlcil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgVW5yZWNvZ25pemVkIGtleShzKSBpbiBvYmplY3Q6ICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLmtleXMsIFwiLCBcIil9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3I6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2VudW1fdmFsdWU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZW51bSB2YWx1ZS4gRXhwZWN0ZWQgJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUub3B0aW9ucyl9LCByZWNlaXZlZCAnJHtpc3N1ZS5yZWNlaXZlZH0nYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50czpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiBhcmd1bWVudHNgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gcmV0dXJuIHR5cGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkYXRlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZzpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChcImluY2x1ZGVzXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgaW5jbHVkZSBcIiR7aXNzdWUudmFsaWRhdGlvbi5pbmNsdWRlc31cImA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbiA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IGF0IG9uZSBvciBtb3JlIHBvc2l0aW9ucyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9ufWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJzdGFydHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3Qgc3RhcnQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5zdGFydHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoXCJlbmRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGVuZCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmVuZHNXaXRofVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUudmFsaWRhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudmFsaWRhdGlvbiAhPT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkICR7aXNzdWUudmFsaWRhdGlvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19zbWFsbDpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBtb3JlIHRoYW5gfSAke2lzc3VlLm1pbmltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IFwiZXhhY3RseVwiIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IGxlYXN0YCA6IGBvdmVyYH0gJHtpc3N1ZS5taW5pbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWluaW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnRvb19iaWc6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbW9zdGAgOiBgdW5kZXJgfSAke2lzc3VlLm1heGltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEJpZ0ludCBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvYCA6IGBzbWFsbGVyIHRoYW5gfSAke25ldyBEYXRlKE51bWJlcihpc3N1ZS5tYXhpbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuY3VzdG9tOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlczpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW50ZXJzZWN0aW9uIHJlc3VsdHMgY291bGQgbm90IGJlIG1lcmdlZGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSBhIG11bHRpcGxlIG9mICR7aXNzdWUubXVsdGlwbGVPZn1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9maW5pdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gXCJOdW1iZXIgbXVzdCBiZSBmaW5pdGVcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbWVzc2FnZSA9IF9jdHguZGVmYXVsdEVycm9yO1xuICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZSk7XG4gICAgfVxuICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbn07XG5leHBvcnQgZGVmYXVsdCBlcnJvck1hcDtcbiIsImltcG9ydCBkZWZhdWx0RXJyb3JNYXAgZnJvbSBcIi4vbG9jYWxlcy9lbi5qc1wiO1xubGV0IG92ZXJyaWRlRXJyb3JNYXAgPSBkZWZhdWx0RXJyb3JNYXA7XG5leHBvcnQgeyBkZWZhdWx0RXJyb3JNYXAgfTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRFcnJvck1hcChtYXApIHtcbiAgICBvdmVycmlkZUVycm9yTWFwID0gbWFwO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yTWFwKCkge1xuICAgIHJldHVybiBvdmVycmlkZUVycm9yTWFwO1xufVxuIiwiaW1wb3J0IHsgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuLi9sb2NhbGVzL2VuLmpzXCI7XG5leHBvcnQgY29uc3QgbWFrZUlzc3VlID0gKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgcGF0aCwgZXJyb3JNYXBzLCBpc3N1ZURhdGEgfSA9IHBhcmFtcztcbiAgICBjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCAuLi4oaXNzdWVEYXRhLnBhdGggfHwgW10pXTtcbiAgICBjb25zdCBmdWxsSXNzdWUgPSB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgfTtcbiAgICBpZiAoaXNzdWVEYXRhLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZURhdGEubWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgY29uc3QgbWFwcyA9IGVycm9yTWFwc1xuICAgICAgICAuZmlsdGVyKChtKSA9PiAhIW0pXG4gICAgICAgIC5zbGljZSgpXG4gICAgICAgIC5yZXZlcnNlKCk7XG4gICAgZm9yIChjb25zdCBtYXAgb2YgbWFwcykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBtYXAoZnVsbElzc3VlLCB7IGRhdGEsIGRlZmF1bHRFcnJvcjogZXJyb3JNZXNzYWdlIH0pLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBFTVBUWV9QQVRIID0gW107XG5leHBvcnQgZnVuY3Rpb24gYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBpc3N1ZURhdGEpIHtcbiAgICBjb25zdCBvdmVycmlkZU1hcCA9IGdldEVycm9yTWFwKCk7XG4gICAgY29uc3QgaXNzdWUgPSBtYWtlSXNzdWUoe1xuICAgICAgICBpc3N1ZURhdGE6IGlzc3VlRGF0YSxcbiAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICBlcnJvck1hcHM6IFtcbiAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCAvLyBjb250ZXh0dWFsIGVycm9yIG1hcCBpcyBmaXJzdCBwcmlvcml0eVxuICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLCAvLyB0aGVuIHNjaGVtYS1ib3VuZCBtYXAgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBvdmVycmlkZU1hcCwgLy8gdGhlbiBnbG9iYWwgb3ZlcnJpZGUgbWFwXG4gICAgICAgICAgICBvdmVycmlkZU1hcCA9PT0gZGVmYXVsdEVycm9yTWFwID8gdW5kZWZpbmVkIDogZGVmYXVsdEVycm9yTWFwLCAvLyB0aGVuIGdsb2JhbCBkZWZhdWx0IG1hcFxuICAgICAgICBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICB9KTtcbiAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKGlzc3VlKTtcbn1cbmV4cG9ydCBjbGFzcyBQYXJzZVN0YXR1cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcInZhbGlkXCI7XG4gICAgfVxuICAgIGRpcnR5KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gXCJ2YWxpZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiZGlydHlcIjtcbiAgICB9XG4gICAgYWJvcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImFib3J0ZWRcIjtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKSB7XG4gICAgICAgIGNvbnN0IGFycmF5VmFsdWUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGFycmF5VmFsdWUucHVzaChzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGFycmF5VmFsdWUgfTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICB9XG4gICAgc3RhdGljIG1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IGZpbmFsT2JqZWN0ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBwYWlyO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgaWYgKGtleS52YWx1ZSAhPT0gXCJfX3Byb3RvX19cIiAmJiAodHlwZW9mIHZhbHVlLnZhbHVlICE9PSBcInVuZGVmaW5lZFwiIHx8IHBhaXIuYWx3YXlzU2V0KSkge1xuICAgICAgICAgICAgICAgIGZpbmFsT2JqZWN0W2tleS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsT2JqZWN0IH07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IElOVkFMSUQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBzdGF0dXM6IFwiYWJvcnRlZFwiLFxufSk7XG5leHBvcnQgY29uc3QgRElSVFkgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJkaXJ0eVwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBPSyA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlIH0pO1xuZXhwb3J0IGNvbnN0IGlzQWJvcnRlZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCI7XG5leHBvcnQgY29uc3QgaXNEaXJ0eSA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJkaXJ0eVwiO1xuZXhwb3J0IGNvbnN0IGlzVmFsaWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwidmFsaWRcIjtcbmV4cG9ydCBjb25zdCBpc0FzeW5jID0gKHgpID0+IHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHggaW5zdGFuY2VvZiBQcm9taXNlO1xuIiwiZXhwb3J0IHZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICAvLyBiaW9tZS1pZ25vcmUgbGludDpcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZT8ubWVzc2FnZTtcbn0pKGVycm9yVXRpbCB8fCAoZXJyb3JVdGlsID0ge30pKTtcbiIsImltcG9ydCB7IFpvZEVycm9yLCBab2RJc3N1ZUNvZGUsIH0gZnJvbSBcIi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IGRlZmF1bHRFcnJvck1hcCwgZ2V0RXJyb3JNYXAgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGVycm9yVXRpbCB9IGZyb20gXCIuL2hlbHBlcnMvZXJyb3JVdGlsLmpzXCI7XG5pbXBvcnQgeyBESVJUWSwgSU5WQUxJRCwgT0ssIFBhcnNlU3RhdHVzLCBhZGRJc3N1ZVRvQ29udGV4dCwgaXNBYm9ydGVkLCBpc0FzeW5jLCBpc0RpcnR5LCBpc1ZhbGlkLCBtYWtlSXNzdWUsIH0gZnJvbSBcIi4vaGVscGVycy9wYXJzZVV0aWwuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUsIGdldFBhcnNlZFR5cGUgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmNsYXNzIFBhcnNlSW5wdXRMYXp5UGF0aCB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB2YWx1ZSwgcGF0aCwga2V5KSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZFBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZWRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5fa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY3R4LmRhdGEgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gcmVxdWlyZWRfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBpbnZhbGlkX3R5cGVfZXJyb3IgPz8gY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgIH07XG4gICAgcmV0dXJuIHsgZXJyb3JNYXA6IGN1c3RvbU1hcCwgZGVzY3JpcHRpb24gfTtcbn1cbmV4cG9ydCBjbGFzcyBab2RUeXBlIHtcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGVzY3JpcHRpb247XG4gICAgfVxuICAgIF9nZXRUeXBlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBfZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCkge1xuICAgICAgICByZXR1cm4gKGN0eCB8fCB7XG4gICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ldyBQYXJzZVN0YXR1cygpLFxuICAgICAgICAgICAgY3R4OiB7XG4gICAgICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKSxcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBpbnB1dC5wYXJlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfcGFyc2VTeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3luY2hyb25vdXMgcGFyc2UgZW5jb3VudGVyZWQgcHJvbWlzZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgX3BhcnNlQXN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfVxuICAgIHBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNhZmVQYXJzZShkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgc2FmZVBhcnNlKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiBwYXJhbXM/LmFzeW5jID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIFwifnZhbGlkYXRlXCIoZGF0YSkge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAhIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnI/Lm1lc3NhZ2U/LnRvTG93ZXJDYXNlKCk/LmluY2x1ZGVzKFwiZW5jb3VudGVyZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5jb21tb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQXN5bmMoeyBkYXRhLCBwYXRoOiBbXSwgcGFyZW50OiBjdHggfSkudGhlbigocmVzdWx0KSA9PiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQudmFsdWUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IGN0eC5jb21tb24uaXNzdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zPy5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBwYXJhbXM/LnBhdGggfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdCkgPyBtYXliZUFzeW5jUmVzdWx0IDogUHJvbWlzZS5yZXNvbHZlKG1heWJlQXN5bmNSZXN1bHQpKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIHJlZmluZShjaGVjaywgbWVzc2FnZSkge1xuICAgICAgICBjb25zdCBnZXRJc3N1ZVByb3BlcnRpZXMgPSAodmFsKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG1lc3NhZ2UgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UodmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNoZWNrKHZhbCk7XG4gICAgICAgICAgICBjb25zdCBzZXRFcnJvciA9ICgpID0+IGN0eC5hZGRJc3N1ZSh7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmN1c3RvbSxcbiAgICAgICAgICAgICAgICAuLi5nZXRJc3N1ZVByb3BlcnRpZXModmFsKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBQcm9taXNlICE9PSBcInVuZGVmaW5lZFwiICYmIHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlZmluZW1lbnQoY2hlY2ssIHJlZmluZW1lbnREYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGVjayh2YWwpKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHR5cGVvZiByZWZpbmVtZW50RGF0YSA9PT0gXCJmdW5jdGlvblwiID8gcmVmaW5lbWVudERhdGEodmFsLCBjdHgpIDogcmVmaW5lbWVudERhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3JlZmluZW1lbnQocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicmVmaW5lbWVudFwiLCByZWZpbmVtZW50IH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdXBlclJlZmluZShyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KHJlZmluZW1lbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpIHtcbiAgICAgICAgLyoqIEFsaWFzIG9mIHNhZmVQYXJzZUFzeW5jICovXG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zYWZlUGFyc2VBc3luYztcbiAgICAgICAgdGhpcy5fZGVmID0gZGVmO1xuICAgICAgICB0aGlzLnBhcnNlID0gdGhpcy5wYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZSA9IHRoaXMuc2FmZVBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGFyc2VBc3luYyA9IHRoaXMucGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNhZmVQYXJzZUFzeW5jID0gdGhpcy5zYWZlUGFyc2VBc3luYy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc3BhLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lID0gdGhpcy5yZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmVtZW50ID0gdGhpcy5yZWZpbmVtZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VwZXJSZWZpbmUgPSB0aGlzLnN1cGVyUmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3B0aW9uYWwgPSB0aGlzLm9wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGFibGUgPSB0aGlzLm51bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubnVsbGlzaCA9IHRoaXMubnVsbGlzaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFycmF5ID0gdGhpcy5hcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnByb21pc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vciA9IHRoaXMub3IuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hbmQgPSB0aGlzLmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMudHJhbnNmb3JtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYnJhbmQgPSB0aGlzLmJyYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRoaXMuZGVmYXVsdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNhdGNoID0gdGhpcy5jYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlc2NyaWJlID0gdGhpcy5kZXNjcmliZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBpcGUgPSB0aGlzLnBpcGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWFkb25seSA9IHRoaXMucmVhZG9ubHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc051bGxhYmxlID0gdGhpcy5pc051bGxhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IHRoaXMuaXNPcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdID0ge1xuICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgIHZlbmRvcjogXCJ6b2RcIixcbiAgICAgICAgICAgIHZhbGlkYXRlOiAoZGF0YSkgPT4gdGhpc1tcIn52YWxpZGF0ZVwiXShkYXRhKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgb3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgbnVsbGlzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbGFibGUoKS5vcHRpb25hbCgpO1xuICAgIH1cbiAgICBhcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZEFycmF5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kL2k7XG4vLyBjb25zdCB1dWlkUmVnZXggPVxuLy8gICAvXihbYS1mMC05XXs4fS1bYS1mMC05XXs0fS1bMS01XVthLWYwLTldezN9LVthLWYwLTldezR9LVthLWYwLTldezEyfXwwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDApJC9pO1xuY29uc3QgdXVpZFJlZ2V4ID0gL15bMC05YS1mQS1GXXs4fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXs0fVxcYi1bMC05YS1mQS1GXXsxMn0kL2k7XG5jb25zdCBuYW5vaWRSZWdleCA9IC9eW2EtejAtOV8tXXsyMX0kL2k7XG5jb25zdCBqd3RSZWdleCA9IC9eW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10qJC87XG5jb25zdCBkdXJhdGlvblJlZ2V4ID0gL15bLStdP1AoPyEkKSg/Oig/OlstK10/XFxkK1kpfCg/OlstK10/XFxkK1suLF1cXGQrWSQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86KD86Wy0rXT9cXGQrVyl8KD86Wy0rXT9cXGQrWy4sXVxcZCtXJCkpPyg/Oig/OlstK10/XFxkK0QpfCg/OlstK10/XFxkK1suLF1cXGQrRCQpKT8oPzpUKD89W1xcZCstXSkoPzooPzpbLStdP1xcZCtIKXwoPzpbLStdP1xcZCtbLixdXFxkK0gkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/OlstK10/XFxkKyg/OlsuLF1cXGQrKT9TKT8pPz8kLztcbi8vIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ2MTgxLzE1NTAxNTVcbi8vIG9sZCB2ZXJzaW9uOiB0b28gc2xvdywgZGlkbid0IHN1cHBvcnQgdW5pY29kZVxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKCgoW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKyhcXC4oW2Etel18XFxkfFshI1xcJCUmJ1xcKlxcK1xcLVxcLz1cXD9cXF5fYHtcXHx9fl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKykqKXwoKFxceDIyKSgoKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KChbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHg3Zl18XFx4MjF8W1xceDIzLVxceDViXXxbXFx4NWQtXFx4N2VdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoXFxcXChbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGQtXFx4N2ZdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpKSooKChcXHgyMHxcXHgwOSkqKFxceDBkXFx4MGEpKT8oXFx4MjB8XFx4MDkpKyk/KFxceDIyKSkpQCgoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSlcXC4pKygoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKFthLXpdfFxcZHwtfFxcLnxffH58W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKihbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSQvaTtcbi8vb2xkIGVtYWlsIHJlZ2V4XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKFtePD4oKVtcXF0uLDs6XFxzQFwiXSsoXFwuW148PigpW1xcXS4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKCg/IS0pKFtePD4oKVtcXF0uLDs6XFxzQFwiXStcXC4pK1tePD4oKVtcXF0uLDs6XFxzQFwiXXsxLH0pW14tPD4oKVtcXF0uLDs6XFxzQFwiXSQvaTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSspKil8KFxcXCIuK1xcXCIpKUAoKFxcWygoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcXSl8KFxcW0lQdjY6KChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKVxcXSl8KFtBLVphLXowLTldKFtBLVphLXowLTktXSpbQS1aYS16MC05XSkqKFxcLltBLVphLXpdezIsfSkrKSkkLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXpBLVowLTlcXC5cXCFcXCNcXCRcXCVcXCZcXCdcXCpcXCtcXC9cXD1cXD9cXF5cXF9cXGBcXHtcXHxcXH1cXH5cXC1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eKD86W2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKnxcIig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxXFx4MjMtXFx4NWJcXHg1ZC1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKlwiKUAoPzooPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/fFxcWyg/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/fFthLXowLTktXSpbYS16MC05XTooPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMS1cXHg1YVxceDUzLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkrKVxcXSkkL2k7XG5jb25zdCBlbWFpbFJlZ2V4ID0gL14oPyFcXC4pKD8hLipcXC5cXC4pKFtBLVowLTlfJytcXC1cXC5dKilbQS1aMC05XystXUAoW0EtWjAtOV1bQS1aMC05XFwtXSpcXC4pK1tBLVpdezIsfSQvaTtcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXlthLXowLTkuISMkJSbigJkqKy89P15fYHt8fX4tXStAW2EtejAtOS1dKyg/OlxcLlthLXowLTlcXC1dKykqJC9pO1xuLy8gZnJvbSBodHRwczovL3RoZWtldmluc2NvdHQuY29tL2Vtb2ppcy1pbi1qYXZhc2NyaXB0LyN3cml0aW5nLWEtcmVndWxhci1leHByZXNzaW9uXG5jb25zdCBfZW1vamlSZWdleCA9IGBeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJGA7XG5sZXQgZW1vamlSZWdleDtcbi8vIGZhc3Rlciwgc2ltcGxlciwgc2FmZXJcbmNvbnN0IGlwdjRSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC87XG5jb25zdCBpcHY0Q2lkclJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC8oM1swLTJdfFsxMl0/WzAtOV0pJC87XG4vLyBjb25zdCBpcHY2UmVnZXggPVxuLy8gL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC87XG5jb25zdCBpcHY2UmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSkkLztcbmNvbnN0IGlwdjZDaWRyUmVnZXggPSAvXigoWzAtOWEtZkEtRl17MSw0fTopezcsN31bMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw3fTp8KFswLTlhLWZBLUZdezEsNH06KXsxLDZ9OlswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDV9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDJ9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwzfXwoWzAtOWEtZkEtRl17MSw0fTopezEsM30oOlswLTlhLWZBLUZdezEsNH0pezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDJ9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDV9fFswLTlhLWZBLUZdezEsNH06KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw2fSl8OigoOlswLTlhLWZBLUZdezEsNH0pezEsN318Oil8ZmU4MDooOlswLTlhLWZBLUZdezAsNH0pezAsNH0lWzAtOWEtekEtWl17MSx9fDo6KGZmZmYoOjB7MSw0fSl7MCwxfTopezAsMX0oKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSl8KFswLTlhLWZBLUZdezEsNH06KXsxLDR9OigoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKSlcXC8oMTJbMC04XXwxWzAxXVswLTldfFsxLTldP1swLTldKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIGh0dHBzOi8vYmFzZTY0Lmd1cnUvc3RhbmRhcmRzL2Jhc2U2NHVybFxuY29uc3QgYmFzZTY0dXJsUmVnZXggPSAvXihbMC05YS16QS1aLV9dezR9KSooKFswLTlhLXpBLVotX117Mn0oPT0pPyl8KFswLTlhLXpBLVotX117M30oPSk/KSk/JC87XG4vLyBzaW1wbGVcbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS1cXFxcZHsyfS1cXFxcZHsyfWA7XG4vLyBubyBsZWFwIHllYXIgdmFsaWRhdGlvblxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LSgoMFsxMzU3OF18MTB8MTIpLTMxfCgwWzEzLTldfDFbMC0yXSktMzB8KDBbMS05XXwxWzAtMl0pLSgwWzEtOV18MVxcXFxkfDJcXFxcZCkpYDtcbi8vIHdpdGggbGVhcCB5ZWFyIHZhbGlkYXRpb25cbmNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGAoKFxcXFxkXFxcXGRbMjQ2OF1bMDQ4XXxcXFxcZFxcXFxkWzEzNTc5XVsyNl18XFxcXGRcXFxcZDBbNDhdfFswMjQ2OF1bMDQ4XTAwfFsxMzU3OV1bMjZdMDApLTAyLTI5fFxcXFxkezR9LSgoMFsxMzU3OF18MVswMl0pLSgwWzEtOV18WzEyXVxcXFxkfDNbMDFdKXwoMFs0NjldfDExKS0oMFsxLTldfFsxMl1cXFxcZHwzMCl8KDAyKS0oMFsxLTldfDFcXFxcZHwyWzAtOF0pKSlgO1xuY29uc3QgZGF0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7ZGF0ZVJlZ2V4U291cmNlfSRgKTtcbmZ1bmN0aW9uIHRpbWVSZWdleFNvdXJjZShhcmdzKSB7XG4gICAgbGV0IHNlY29uZHNSZWdleFNvdXJjZSA9IGBbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfVxcXFwuXFxcXGR7JHthcmdzLnByZWNpc2lvbn19YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXJncy5wcmVjaXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9KFxcXFwuXFxcXGQrKT9gO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRzUXVhbnRpZmllciA9IGFyZ3MucHJlY2lzaW9uID8gXCIrXCIgOiBcIj9cIjsgLy8gcmVxdWlyZSBzZWNvbmRzIGlmIHByZWNpc2lvbiBpcyBub256ZXJvXG4gICAgcmV0dXJuIGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZCg6JHtzZWNvbmRzUmVnZXhTb3VyY2V9KSR7c2Vjb25kc1F1YW50aWZpZXJ9YDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmV4cG9ydCBmdW5jdGlvbiBkYXRldGltZVJlZ2V4KGFyZ3MpIHtcbiAgICBsZXQgcmVnZXggPSBgJHtkYXRlUmVnZXhTb3VyY2V9VCR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfWA7XG4gICAgY29uc3Qgb3B0cyA9IFtdO1xuICAgIG9wdHMucHVzaChhcmdzLmxvY2FsID8gYFo/YCA6IGBaYCk7XG4gICAgaWYgKGFyZ3Mub2Zmc2V0KVxuICAgICAgICBvcHRzLnB1c2goYChbKy1dXFxcXGR7Mn06P1xcXFxkezJ9KWApO1xuICAgIHJlZ2V4ID0gYCR7cmVnZXh9KCR7b3B0cy5qb2luKFwifFwiKX0pYDtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7cmVnZXh9JGApO1xufVxuZnVuY3Rpb24gaXNWYWxpZElQKGlwLCB2ZXJzaW9uKSB7XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY0XCIgfHwgIXZlcnNpb24pICYmIGlwdjRSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaXNWYWxpZEpXVChqd3QsIGFsZykge1xuICAgIGlmICghand0UmVnZXgudGVzdChqd3QpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW2hlYWRlcl0gPSBqd3Quc3BsaXQoXCIuXCIpO1xuICAgICAgICBpZiAoIWhlYWRlcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMucHJvcGVydHlQYXRoICYmXG4gICAgICAgIHJlZnMuY3VycmVudFBhdGguc2xpY2UoMCwgcmVmcy5wcm9wZXJ0eVBhdGgubGVuZ3RoKS50b1N0cmluZygpID09PSByZWZzLnByb3BlcnR5UGF0aC50b1N0cmluZygpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IHJlZnMuY3VycmVudFBhdGggfSk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QvdjMnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBpZiAoc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUm9vdCBzY2hlbWEgbXVzdCBoYXZlIHR5cGU6ICdvYmplY3QnIGJ1dCBnb3QgdHlwZTogJHtzY2hlbWEudHlwZSA/IGAnJHtzY2hlbWEudHlwZX0nYCA6ICd1bmRlZmluZWQnfWApO1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWFDb3B5ID0gc3RydWN0dXJlZENsb25lKHNjaGVtYSk7XG4gICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hQ29weSwgW10sIHNjaGVtYUNvcHkpO1xufVxuZnVuY3Rpb24gaXNOdWxsYWJsZShzY2hlbWEpIHtcbiAgICBpZiAodHlwZW9mIHNjaGVtYSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYS50eXBlID09PSAnbnVsbCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgb25lT2ZWYXJpYW50IG9mIHNjaGVtYS5vbmVPZiA/PyBbXSkge1xuICAgICAgICBpZiAoaXNOdWxsYWJsZShvbmVPZlZhcmlhbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGFsbE9mVmFyaWFudCBvZiBzY2hlbWEuYW55T2YgPz8gW10pIHtcbiAgICAgICAgaWYgKGlzTnVsbGFibGUoYWxsT2ZWYXJpYW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBNdXRhdGVzIHRoZSBnaXZlbiBKU09OIHNjaGVtYSB0byBlbnN1cmUgaXQgY29uZm9ybXMgdG8gdGhlIGBzdHJpY3RgIHN0YW5kYXJkXG4gKiB0aGF0IHRoZSBBUEkgZXhwZWN0cy5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShqc29uU2NoZW1hLCBwYXRoLCByb290KSB7XG4gICAgaWYgKHR5cGVvZiBqc29uU2NoZW1hID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW47IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgaWYgKCFpc09iamVjdChqc29uU2NoZW1hKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCAke0pTT04uc3RyaW5naWZ5KGpzb25TY2hlbWEpfSB0byBiZSBhbiBvYmplY3Q7IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICB9XG4gICAgLy8gSGFuZGxlICRkZWZzIChub24tc3RhbmRhcmQgYnV0IHNvbWV0aW1lcyB1c2VkKVxuICAgIGNvbnN0IGRlZnMgPSBqc29uU2NoZW1hLiRkZWZzO1xuICAgIGlmIChpc09iamVjdChkZWZzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtkZWZOYW1lLCBkZWZTY2hlbWFdIG9mIE9iamVjdC5lbnRyaWVzKGRlZnMpKSB7XG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGRlZlNjaGVtYSwgWy4uLnBhdGgsICckZGVmcycsIGRlZk5hbWVdLCByb290KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIYW5kbGUgZGVmaW5pdGlvbnMgKGRyYWZ0LTA0IHN0eWxlLCBkZXByZWNhdGVkIGluIGRyYWZ0LTA3IGJ1dCBzdGlsbCB1c2VkKVxuICAgIGNvbnN0IGRlZmluaXRpb25zID0ganNvblNjaGVtYS5kZWZpbml0aW9ucztcbiAgICBpZiAoaXNPYmplY3QoZGVmaW5pdGlvbnMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2RlZmluaXRpb25OYW1lLCBkZWZpbml0aW9uU2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhkZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoZGVmaW5pdGlvblNjaGVtYSwgWy4uLnBhdGgsICdkZWZpbml0aW9ucycsIGRlZmluaXRpb25OYW1lXSwgcm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQWRkIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSB0byBvYmplY3QgdHlwZXNcbiAgICBjb25zdCB0eXAgPSBqc29uU2NoZW1hLnR5cGU7XG4gICAgaWYgKHR5cCA9PT0gJ29iamVjdCcgJiYgISgnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIGpzb25TY2hlbWEpKSB7XG4gICAgICAgIGpzb25TY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcmVxdWlyZWQgPSBqc29uU2NoZW1hLnJlcXVpcmVkID8/IFtdO1xuICAgIC8vIEhhbmRsZSBvYmplY3QgcHJvcGVydGllc1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBqc29uU2NoZW1hLnByb3BlcnRpZXM7XG4gICAgaWYgKGlzT2JqZWN0KHByb3BlcnRpZXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBpZiAoIWlzTnVsbGFibGUodmFsdWUpICYmICFyZXF1aXJlZC5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBab2QgZmllbGQgYXQgXFxgJHtbLi4ucGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBqc29uU2NoZW1hLnJlcXVpcmVkID0gT2JqZWN0LmtleXMocHJvcGVydGllcyk7XG4gICAgICAgIGpzb25TY2hlbWEucHJvcGVydGllcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKS5tYXAoKFtrZXksIHByb3BTY2hlbWFdKSA9PiBbXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHByb3BTY2hlbWEsIFsuLi5wYXRoLCAncHJvcGVydGllcycsIGtleV0sIHJvb3QpLFxuICAgICAgICBdKSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBhcnJheXNcbiAgICBjb25zdCBpdGVtcyA9IGpzb25TY2hlbWEuaXRlbXM7XG4gICAgaWYgKGlzT2JqZWN0KGl0ZW1zKSkge1xuICAgICAgICBqc29uU2NoZW1hLml0ZW1zID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShpdGVtcywgWy4uLnBhdGgsICdpdGVtcyddLCByb290KTtcbiAgICB9XG4gICAgLy8gSGFuZGxlIHVuaW9ucyAoYW55T2YpXG4gICAgY29uc3QgYW55T2YgPSBqc29uU2NoZW1hLmFueU9mO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFueU9mKSkge1xuICAgICAgICBqc29uU2NoZW1hLmFueU9mID0gYW55T2YubWFwKCh2YXJpYW50LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHZhcmlhbnQsIFsuLi5wYXRoLCAnYW55T2YnLCBTdHJpbmcoaSldLCByb290KSk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBpbnRlcnNlY3Rpb25zIChhbGxPZilcbiAgICBjb25zdCBhbGxPZiA9IGpzb25TY2hlbWEuYWxsT2Y7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsT2YpKSB7XG4gICAgICAgIGlmIChhbGxPZi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShhbGxPZlswXSwgWy4uLnBhdGgsICdhbGxPZicsICcwJ10sIHJvb3QpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihqc29uU2NoZW1hLCByZXNvbHZlZCk7XG4gICAgICAgICAgICBkZWxldGUganNvblNjaGVtYS5hbGxPZjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGpzb25TY2hlbWEuYWxsT2YgPSBhbGxPZi5tYXAoKGVudHJ5LCBpKSA9PiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGVudHJ5LCBbLi4ucGF0aCwgJ2FsbE9mJywgU3RyaW5nKGkpXSwgcm9vdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFN0cmlwIGBudWxsYCBkZWZhdWx0cyBhcyB0aGVyZSdzIG5vIG1lYW5pbmdmdWwgZGlzdGluY3Rpb25cbiAgICBpZiAoanNvblNjaGVtYS5kZWZhdWx0ID09PSBudWxsKSB7XG4gICAgICAgIGRlbGV0ZSBqc29uU2NoZW1hLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8vIEhhbmRsZSAkcmVmIHdpdGggYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcmVmID0ganNvblNjaGVtYS4kcmVmO1xuICAgIGlmIChyZWYgJiYgaGFzTW9yZVRoYW5OS2V5cyhqc29uU2NoZW1hLCAxKSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlZiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlY2VpdmVkIG5vbi1zdHJpbmcgJHJlZiAtICR7cmVmfTsgcGF0aD0ke3BhdGguam9pbignLycpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gcmVzb2x2ZVJlZihyb290LCByZWYpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc29sdmVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgXFxgJHJlZjogJHtyZWZ9XFxgIHRvIHJlc29sdmUgdG8gYW4gb2JqZWN0IHNjaGVtYSBidXQgZ290IGJvb2xlYW5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc29sdmVkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBcXGAkcmVmOiAke3JlZn1cXGAgdG8gcmVzb2x2ZSB0byBhbiBvYmplY3QgYnV0IGdvdCAke0pTT04uc3RyaW5naWZ5KHJlc29sdmVkKX1gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcm9wZXJ0aWVzIGZyb20gdGhlIGpzb24gc2NoZW1hIHRha2UgcHJpb3JpdHkgb3ZlciB0aGUgb25lcyBvbiB0aGUgYCRyZWZgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oanNvblNjaGVtYSwgeyAuLi5yZXNvbHZlZCwgLi4uanNvblNjaGVtYSB9KTtcbiAgICAgICAgZGVsZXRlIGpzb25TY2hlbWEuJHJlZjtcbiAgICAgICAgLy8gU2luY2UgdGhlIHNjaGVtYSBleHBhbmRlZCBmcm9tIGAkcmVmYCBtaWdodCBub3QgaGF2ZSBgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlYCBhcHBsaWVkLFxuICAgICAgICAvLyB3ZSBjYWxsIGBlbnN1cmVTdHJpY3RKc29uU2NoZW1hYCBhZ2FpbiB0byBmaXggdGhlIGlubGluZWQgc2NoZW1hIGFuZCBlbnN1cmUgaXQncyB2YWxpZC5cbiAgICAgICAgcmV0dXJuIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoanNvblNjaGVtYSwgcGF0aCwgcm9vdCk7XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuZnVuY3Rpb24gcmVzb2x2ZVJlZihyb290LCByZWYpIHtcbiAgICBpZiAoIXJlZi5zdGFydHNXaXRoKCcjLycpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCAkcmVmIGZvcm1hdCAke0pTT04uc3RyaW5naWZ5KHJlZil9OyBEb2VzIG5vdCBzdGFydCB3aXRoICMvYCk7XG4gICAgfVxuICAgIGNvbnN0IHBhdGhQYXJ0cyA9IHJlZi5zbGljZSgyKS5zcGxpdCgnLycpO1xuICAgIGxldCByZXNvbHZlZCA9IHJvb3Q7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGF0aFBhcnRzKSB7XG4gICAgICAgIGlmICghaXNPYmplY3QocmVzb2x2ZWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGVuY291bnRlcmVkIG5vbi1vYmplY3QgZW50cnkgd2hpbGUgcmVzb2x2aW5nICR7cmVmfSAtICR7SlNPTi5zdHJpbmdpZnkocmVzb2x2ZWQpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmVzb2x2ZWRba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgS2V5ICR7a2V5fSBub3QgZm91bmQgd2hpbGUgcmVzb2x2aW5nICR7cmVmfWApO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmVkID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHZlZDtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbmZ1bmN0aW9uIGhhc01vcmVUaGFuTktleXMob2JqLCBuKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoY29uc3QgXyBpbiBvYmopIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBpZiAoaSA+IG4pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5tanMubWFwIiwiaW1wb3J0ICogYXMgejQgZnJvbSAnem9kL3Y0JztcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCwgbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQsIG1ha2VQYXJzZWFibGVUb29sLCB9IGZyb20gXCIuLi9saWIvcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIGFzIF96b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiLi4vX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sIH0gZnJvbSBcIi4uL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB0b1N0cmljdEpzb25TY2hlbWEgfSBmcm9tIFwiLi4vbGliL3RyYW5zZm9ybS5tanNcIjtcbmZ1bmN0aW9uIHpvZFYzVG9Kc29uU2NoZW1hKHNjaGVtYSwgb3B0aW9ucykge1xuICAgIHJldHVybiBfem9kVG9Kc29uU2NoZW1hKHNjaGVtYSwge1xuICAgICAgICBvcGVuYWlTdHJpY3RNb2RlOiB0cnVlLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICAgIG5hbWVTdHJhdGVneTogJ2R1cGxpY2F0ZS1yZWYnLFxuICAgICAgICAkcmVmU3RyYXRlZ3k6ICdleHRyYWN0LXRvLXJvb3QnLFxuICAgICAgICBudWxsYWJsZVN0cmF0ZWd5OiAncHJvcGVydHknLFxuICAgIH0pO1xufVxuZnVuY3Rpb24gem9kVjRUb0pzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgcmV0dXJuIHRvU3RyaWN0SnNvblNjaGVtYSh6NC50b0pTT05TY2hlbWEoc2NoZW1hLCB7XG4gICAgICAgIHRhcmdldDogJ2RyYWZ0LTcnLFxuICAgIH0pKTtcbn1cbmZ1bmN0aW9uIGlzWm9kVjQoem9kT2JqZWN0KSB7XG4gICAgcmV0dXJuICdfem9kJyBpbiB6b2RPYmplY3Q7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjaGF0IGNvbXBsZXRpb24gYEpTT05TY2hlbWFgIHJlc3BvbnNlIGZvcm1hdCBvYmplY3QgZnJvbVxuICogdGhlIGdpdmVuIFpvZCBzY2hlbWEuXG4gKlxuICogSWYgdGhpcyBpcyBwYXNzZWQgdG8gdGhlIGAucGFyc2UoKWAsIGAuc3RyZWFtKClgIG9yIGAucnVuVG9vbHMoKWBcbiAqIGNoYXQgY29tcGxldGlvbiBtZXRob2RzIHRoZW4gdGhlIHJlc3BvbnNlIG1lc3NhZ2Ugd2lsbCBjb250YWluIGFcbiAqIGAucGFyc2VkYCBwcm9wZXJ0eSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgcGFyc2luZyB0aGUgY29udGVudCB3aXRoXG4gKiB0aGUgZ2l2ZW4gWm9kIG9iamVjdC5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IGNsaWVudC5jaGF0LmNvbXBsZXRpb25zLnBhcnNlKHtcbiAqICAgIG1vZGVsOiAnZ3B0LTRvLTIwMjQtMDgtMDYnLFxuICogICAgbWVzc2FnZXM6IFtcbiAqICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIG1hdGggdHV0b3IuJyB9LFxuICogICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ3NvbHZlIDh4ICsgMzEgPSAyJyB9LFxuICogICAgXSxcbiAqICAgIHJlc3BvbnNlX2Zvcm1hdDogem9kUmVzcG9uc2VGb3JtYXQoXG4gKiAgICAgIHoub2JqZWN0KHtcbiAqICAgICAgICBzdGVwczogei5hcnJheSh6Lm9iamVjdCh7XG4gKiAgICAgICAgICBleHBsYW5hdGlvbjogei5zdHJpbmcoKSxcbiAqICAgICAgICAgIGFuc3dlcjogei5zdHJpbmcoKSxcbiAqICAgICAgICB9KSksXG4gKiAgICAgICAgZmluYWxfYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICB9KSxcbiAqICAgICAgJ21hdGhfYW5zd2VyJyxcbiAqICAgICksXG4gKiAgfSk7XG4gKiAgY29uc3QgbWVzc2FnZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZTtcbiAqICBpZiAobWVzc2FnZT8ucGFyc2VkKSB7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZCk7XG4gKiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnBhcnNlZC5maW5hbF9hbnN3ZXIpO1xuICogfVxuICogYGBgXG4gKlxuICogVGhpcyBjYW4gYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBgLmNyZWF0ZSgpYCBtZXRob2QgYnV0IHdpbGwgbm90XG4gKiByZXN1bHQgaW4gYW55IGF1dG9tYXRpYyBwYXJzaW5nLCB5b3UnbGwgaGF2ZSB0byBwYXJzZSB0aGUgcmVzcG9uc2UgeW91cnNlbGYuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RSZXNwb25zZUZvcm1hdCh6b2RPYmplY3QsIG5hbWUsIHByb3BzKSB7XG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVSZXNwb25zZUZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIGpzb25fc2NoZW1hOiB7XG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICAgICAgfSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB6b2RUZXh0Rm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRleHRGb3JtYXQoe1xuICAgICAgICB0eXBlOiAnanNvbl9zY2hlbWEnLFxuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICBzY2hlbWE6IGlzWm9kVjQoem9kT2JqZWN0KSA/IHpvZFY0VG9Kc29uU2NoZW1hKHpvZE9iamVjdCkgOiB6b2RWM1RvSnNvblNjaGVtYSh6b2RPYmplY3QsIHsgbmFtZSB9KSxcbiAgICB9LCAoY29udGVudCkgPT4gem9kT2JqZWN0LnBhcnNlKEpTT04ucGFyc2UoY29udGVudCkpKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgZnVuY3Rpb25gIHRvb2wgdGhhdCBjYW4gYmUgaW52b2tlZFxuICogYXV0b21hdGljYWxseSBieSB0aGUgY2hhdCBjb21wbGV0aW9uIGAucnVuVG9vbHMoKWAgbWV0aG9kIG9yIGF1dG9tYXRpY2FsbHlcbiAqIHBhcnNlZCBieSBgLnBhcnNlKClgIC8gYC5zdHJlYW0oKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b2RGdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPXG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGlzWm9kVjQob3B0aW9ucy5wYXJhbWV0ZXJzKSA/XG4gICAgICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIDogem9kVjNUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzLCB7IG5hbWU6IG9wdGlvbnMubmFtZSB9KSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgfSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kUmVzcG9uc2VzRnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sKHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBwYXJhbWV0ZXJzOiBpc1pvZFY0KG9wdGlvbnMucGFyYW1ldGVycykgP1xuICAgICAgICAgICAgem9kVjRUb0pzb25TY2hlbWEob3B0aW9ucy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgOiB6b2RWM1RvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMsIHsgbmFtZTogb3B0aW9ucy5uYW1lIH0pLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIC4uLihvcHRpb25zLmRlc2NyaXB0aW9uID8geyBkZXNjcmlwdGlvbjogb3B0aW9ucy5kZXNjcmlwdGlvbiB9IDogdW5kZWZpbmVkKSxcbiAgICB9LCB7XG4gICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmZ1bmN0aW9uLFxuICAgICAgICBwYXJzZXI6IChhcmdzKSA9PiBvcHRpb25zLnBhcmFtZXRlcnMucGFyc2UoSlNPTi5wYXJzZShhcmdzKSksXG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2QubWpzLm1hcCIsIi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIGVycm9ycyB0aHJvd24gYnkgdGhlIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudHNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBzdGF0ZTtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbn1cbi8qKlxuICogU3lzdGVtIGVycm9yIHRocm93biB3aGVuIHRoZSBsaWJyYXJ5IGVuY291bnRlcnMgYW4gZXJyb3IgdGhhdCBpcyBub3QgY2F1c2VkIGJ5IHRoZSB1c2VyJ3NcbiAqIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBTeXN0ZW1FcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIG1heGltdW0gbnVtYmVyIG9mIHR1cm5zIGlzIGV4Y2VlZGVkLlxuICovXG5leHBvcnQgY2xhc3MgTWF4VHVybnNFeGNlZWRlZEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIG1vZGVsIGJlaGF2aW9yIGlzIHVuZXhwZWN0ZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2RlbEJlaGF2aW9yRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIHRoZSBlcnJvciBpcyBjYXVzZWQgYnkgdGhlIGxpYnJhcnkgdXNlcidzIG1pc2NvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2VyRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgZ3VhcmRyYWlsIGV4ZWN1dGlvbiBmYWlscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgdG9vbCBjYWxsIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbENhbGxFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICBlcnJvcjtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBlcnJvciwgc3RhdGUpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgc3RhdGUpO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBpbnB1dCBndWFyZHJhaWwgdHJpcHdpcmUgaXMgdHJpZ2dlcmVkLlxuICovXG5leHBvcnQgY2xhc3MgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCBleHRlbmRzIEFnZW50c0Vycm9yIHtcbiAgICByZXN1bHQ7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgcmVzdWx0LCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVycm9ycy5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGFzWm9kVHlwZShzY2hlbWEpIHtcbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRab2REZWZpbml0aW9uKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ29iamVjdCcgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2FuZGlkYXRlID0gaW5wdXQ7XG4gICAgcmV0dXJuIGNhbmRpZGF0ZS5fem9kPy5kZWYgfHwgY2FuZGlkYXRlLl9kZWYgfHwgY2FuZGlkYXRlLmRlZjtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkWm9kVHlwZShpbnB1dCkge1xuICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGlucHV0KTtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCByYXdUeXBlID0gKHR5cGVvZiBkZWYudHlwZU5hbWUgPT09ICdzdHJpbmcnICYmIGRlZi50eXBlTmFtZSkgfHxcbiAgICAgICAgKHR5cGVvZiBkZWYudHlwZSA9PT0gJ3N0cmluZycgJiYgZGVmLnR5cGUpO1xuICAgIGlmICh0eXBlb2YgcmF3VHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbG93ZXIgPSByYXdUeXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGxvd2VyLnN0YXJ0c1dpdGgoJ3pvZCcpID8gbG93ZXIuc2xpY2UoMykgOiBsb3dlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZENvbXBhdC5tanMubWFwIiwiaW1wb3J0IHsgcmVhZFpvZERlZmluaXRpb24sIHJlYWRab2RUeXBlIH0gZnJvbSBcIi4vem9kQ29tcGF0Lm1qc1wiO1xuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGEgWm9kT2JqZWN0IHdpdGhvdXQgbmVlZGluZyB0byBoYXZlIFpvZCBhdCBydW50aW1lIHNpbmNlIGl0J3MgYW5cbiAqIG9wdGlvbmFsIGRlcGVuZGVuY3kuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1pvZE9iamVjdChpbnB1dCkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSByZWFkWm9kRGVmaW5pdGlvbihpbnB1dCk7XG4gICAgaWYgKCFkZWZpbml0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IHJlYWRab2RUeXBlKGlucHV0KTtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ29iamVjdCc7XG59XG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYW4gb2JqZWN0IHdpdGggYW4gYGlucHV0YCBwcm9wZXJ0eS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWdlbnRUb29sSW5wdXQoaW5wdXQpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQgIT09IG51bGwgJiZcbiAgICAgICAgJ2lucHV0JyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuaW5wdXQgPT09ICdzdHJpbmcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXR5cGVHdWFyZHMubWpzLm1hcCIsImltcG9ydCB7IHJlYWRab2REZWZpbml0aW9uLCByZWFkWm9kVHlwZSB9IGZyb20gXCIuL3pvZENvbXBhdC5tanNcIjtcbmNvbnN0IEpTT05fU0NIRU1BX0RSQUZUXzA3ID0gJ2h0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hIyc7XG5jb25zdCBPUFRJT05BTF9XUkFQUEVSUyA9IG5ldyBTZXQoWydvcHRpb25hbCddKTtcbmNvbnN0IERFQ09SQVRPUl9XUkFQUEVSUyA9IG5ldyBTZXQoW1xuICAgICdicmFuZCcsXG4gICAgJ2JyYW5kZWQnLFxuICAgICdjYXRjaCcsXG4gICAgJ2RlZmF1bHQnLFxuICAgICdlZmZlY3RzJyxcbiAgICAncGlwZWxpbmUnLFxuICAgICdwaXBlJyxcbiAgICAncHJlZmF1bHQnLFxuICAgICdyZWFkb25seScsXG4gICAgJ3JlZmluZW1lbnQnLFxuICAgICd0cmFuc2Zvcm0nLFxuXSk7XG4vLyBQcmltaXRpdmUgbGVhZiBub2RlcyBtYXAgMToxIHRvIEpTT04gU2NoZW1hIHR5cGVzOyBldmVyeXRoaW5nIGVsc2UgaXMgaGFuZGxlZFxuLy8gYnkgdGhlIHNwZWNpYWxpc2VkIGJ1aWxkZXJzIGZ1cnRoZXIgZG93bi5cbmNvbnN0IFNJTVBMRV9UWVBFX01BUFBJTkcgPSB7XG4gICAgc3RyaW5nOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgbnVtYmVyOiB7IHR5cGU6ICdudW1iZXInIH0sXG4gICAgYmlnaW50OiB7IHR5cGU6ICdpbnRlZ2VyJyB9LFxuICAgIGJvb2xlYW46IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgZGF0ZTogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiBoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUodmFsdWUpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ3Byb3BlcnRpZXMnIGluIHZhbHVlICYmXG4gICAgICAgICdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gdmFsdWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZEpzb25TY2hlbWFDb21wYXQoaW5wdXQpIHtcbiAgICAvLyBBdHRlbXB0IHRvIGJ1aWxkIGFuIG9iamVjdCBzY2hlbWEgZnJvbSBab2QncyBpbnRlcm5hbCBzaGFwZS4gSWYgd2UgY2Fubm90XG4gICAgLy8gdW5kZXJzdGFuZCB0aGUgc3RydWN0dXJlIHdlIHJldHVybiB1bmRlZmluZWQsIGxldHRpbmcgY2FsbGVycyByYWlzZSBhXG4gICAgLy8gZGVzY3JpcHRpdmUgZXJyb3IgaW5zdGVhZCBvZiBlbWl0dGluZyBhbiBpbnZhbGlkIHNjaGVtYS5cbiAgICBjb25zdCBzY2hlbWEgPSBidWlsZE9iamVjdFNjaGVtYShpbnB1dCk7XG4gICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYS5yZXF1aXJlZCkpIHtcbiAgICAgICAgc2NoZW1hLnJlcXVpcmVkID0gW107XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuJHNjaGVtYSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2NoZW1hLiRzY2hlbWEgPSBKU09OX1NDSEVNQV9EUkFGVF8wNztcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIGJ1aWxkT2JqZWN0U2NoZW1hKHZhbHVlKSB7XG4gICAgY29uc3Qgc2hhcGUgPSByZWFkU2hhcGUodmFsdWUpO1xuICAgIGlmICghc2hhcGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgcHJvcGVydGllcyA9IHt9O1xuICAgIGNvbnN0IHJlcXVpcmVkID0gW107XG4gICAgZm9yIChjb25zdCBba2V5LCBmaWVsZF0gb2YgT2JqZWN0LmVudHJpZXMoc2hhcGUpKSB7XG4gICAgICAgIGNvbnN0IHsgc2NoZW1hLCBvcHRpb25hbCB9ID0gY29udmVydFByb3BlcnR5KGZpZWxkKTtcbiAgICAgICAgaWYgKCFzY2hlbWEpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcHJvcGVydGllc1trZXldID0gc2NoZW1hO1xuICAgICAgICBpZiAoIW9wdGlvbmFsKSB7XG4gICAgICAgICAgICByZXF1aXJlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJ29iamVjdCcsIHByb3BlcnRpZXMsIHJlcXVpcmVkLCBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UgfTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRQcm9wZXJ0eSh2YWx1ZSkge1xuICAgIC8vIFJlbW92ZSB3cmFwcGVyIGRlY29yYXRvcnMgKGJyYW5kLCB0cmFuc2Zvcm0sIGV0Yy4pIGJlZm9yZSBhdHRlbXB0aW5nIHRvXG4gICAgLy8gY2xhc3NpZnkgdGhlIG5vZGUsIHRyYWNraW5nIHdoZXRoZXIgd2UgY3Jvc3NlZCBhbiBgb3B0aW9uYWxgIGJvdW5kYXJ5IHNvIHdlXG4gICAgLy8gY2FuIHBvcHVsYXRlIHRoZSBgcmVxdWlyZWRgIGFycmF5IGxhdGVyLlxuICAgIGxldCBjdXJyZW50ID0gdW53cmFwRGVjb3JhdG9ycyh2YWx1ZSk7XG4gICAgbGV0IG9wdGlvbmFsID0gZmFsc2U7XG4gICAgd2hpbGUgKE9QVElPTkFMX1dSQVBQRVJTLmhhcyhyZWFkWm9kVHlwZShjdXJyZW50KSA/PyAnJykpIHtcbiAgICAgICAgb3B0aW9uYWwgPSB0cnVlO1xuICAgICAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjdXJyZW50KTtcbiAgICAgICAgY29uc3QgbmV4dCA9IHVud3JhcERlY29yYXRvcnMoZGVmPy5pbm5lclR5cGUpO1xuICAgICAgICBpZiAoIW5leHQgfHwgbmV4dCA9PT0gY3VycmVudCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiB7IHNjaGVtYTogY29udmVydFNjaGVtYShjdXJyZW50KSwgb3B0aW9uYWwgfTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRTY2hlbWEodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCB1bndyYXBwZWQgPSB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKTtcbiAgICBjb25zdCB0eXBlID0gcmVhZFpvZFR5cGUodW53cmFwcGVkKTtcbiAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbih1bndyYXBwZWQpO1xuICAgIGlmICghdHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodHlwZSBpbiBTSU1QTEVfVFlQRV9NQVBQSU5HKSB7XG4gICAgICAgIHJldHVybiBTSU1QTEVfVFlQRV9NQVBQSU5HW3R5cGVdO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE9iamVjdFNjaGVtYSh1bndyYXBwZWQpO1xuICAgICAgICBjYXNlICdhcnJheSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRBcnJheVNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICd0dXBsZSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRUdXBsZVNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICd1bmlvbic6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRVbmlvblNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdpbnRlcnNlY3Rpb24nOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkSW50ZXJzZWN0aW9uU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ2xpdGVyYWwnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTGl0ZXJhbChkZWYpO1xuICAgICAgICBjYXNlICdlbnVtJzpcbiAgICAgICAgY2FzZSAnbmF0aXZlZW51bSc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRFbnVtKGRlZik7XG4gICAgICAgIGNhc2UgJ3JlY29yZCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRSZWNvcmRTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbWFwJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE1hcFNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdzZXQnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkU2V0U2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ251bGxhYmxlJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZE51bGxhYmxlU2NoZW1hKGRlZik7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8vIC0tLSBKU09OIFNjaGVtYSBidWlsZGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5mdW5jdGlvbiBidWlsZEFycmF5U2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGl0ZW1zID0gY29udmVydFNjaGVtYShleHRyYWN0Rmlyc3QoZGVmLCAnZWxlbWVudCcsICdpdGVtcycsICd0eXBlJykpO1xuICAgIHJldHVybiBpdGVtcyA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXMgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkVHVwbGVTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgaXRlbXMgPSBjb2VyY2VBcnJheShkZWY/Lml0ZW1zKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBjb252ZXJ0U2NoZW1hKGl0ZW0pKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgaXRlbXMsXG4gICAgICAgIG1pbkl0ZW1zOiBpdGVtcy5sZW5ndGgsXG4gICAgfTtcbiAgICBpZiAoIWRlZj8ucmVzdCkge1xuICAgICAgICBzY2hlbWEubWF4SXRlbXMgPSBpdGVtcy5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG5mdW5jdGlvbiBidWlsZFVuaW9uU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb2VyY2VBcnJheShkZWY/Lm9wdGlvbnMgPz8gZGVmPy5zY2hlbWFzKVxuICAgICAgICAubWFwKChvcHRpb24pID0+IGNvbnZlcnRTY2hlbWEob3B0aW9uKSlcbiAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICByZXR1cm4gb3B0aW9ucy5sZW5ndGggPyB7IGFueU9mOiBvcHRpb25zIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZEludGVyc2VjdGlvblNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBsZWZ0ID0gY29udmVydFNjaGVtYShkZWY/LmxlZnQpO1xuICAgIGNvbnN0IHJpZ2h0ID0gY29udmVydFNjaGVtYShkZWY/LnJpZ2h0KTtcbiAgICByZXR1cm4gbGVmdCAmJiByaWdodCA/IHsgYWxsT2Y6IFtsZWZ0LCByaWdodF0gfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVjb3JkU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSA/PyBkZWY/LnZhbHVlcyk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hXG4gICAgICAgID8geyB0eXBlOiAnb2JqZWN0JywgYWRkaXRpb25hbFByb3BlcnRpZXM6IHZhbHVlU2NoZW1hIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZE1hcFNjaGVtYShkZWYpIHtcbiAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IGNvbnZlcnRTY2hlbWEoZGVmPy52YWx1ZVR5cGUgPz8gZGVmPy52YWx1ZXMpO1xuICAgIHJldHVybiB2YWx1ZVNjaGVtYSA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHZhbHVlU2NoZW1hIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZFNldFNjaGVtYShkZWYpIHtcbiAgICBjb25zdCB2YWx1ZVNjaGVtYSA9IGNvbnZlcnRTY2hlbWEoZGVmPy52YWx1ZVR5cGUpO1xuICAgIHJldHVybiB2YWx1ZVNjaGVtYVxuICAgICAgICA/IHsgdHlwZTogJ2FycmF5JywgaXRlbXM6IHZhbHVlU2NoZW1hLCB1bmlxdWVJdGVtczogdHJ1ZSB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGROdWxsYWJsZVNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBpbm5lciA9IGNvbnZlcnRTY2hlbWEoZGVmPy5pbm5lclR5cGUgPz8gZGVmPy50eXBlKTtcbiAgICByZXR1cm4gaW5uZXIgPyB7IGFueU9mOiBbaW5uZXIsIHsgdHlwZTogJ251bGwnIH1dIH0gOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKSB7XG4gICAgbGV0IGN1cnJlbnQgPSB2YWx1ZTtcbiAgICB3aGlsZSAoREVDT1JBVE9SX1dSQVBQRVJTLmhhcyhyZWFkWm9kVHlwZShjdXJyZW50KSA/PyAnJykpIHtcbiAgICAgICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oY3VycmVudCk7XG4gICAgICAgIGNvbnN0IG5leHQgPSBkZWY/LmlubmVyVHlwZSA/P1xuICAgICAgICAgICAgZGVmPy5zY2hlbWEgPz9cbiAgICAgICAgICAgIGRlZj8uYmFzZSA/P1xuICAgICAgICAgICAgZGVmPy50eXBlID8/XG4gICAgICAgICAgICBkZWY/LndyYXBwZWQgPz9cbiAgICAgICAgICAgIGRlZj8udW5kZXJseWluZztcbiAgICAgICAgaWYgKCFuZXh0IHx8IG5leHQgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudDtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RGaXJzdChkZWYsIC4uLmtleXMpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChrZXkgaW4gZGVmICYmIGRlZltrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gY29lcmNlQXJyYXkodmFsdWUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IFtdIDogW3ZhbHVlXTtcbn1cbmZ1bmN0aW9uIGJ1aWxkTGl0ZXJhbChkZWYpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsaXRlcmFsID0gZXh0cmFjdEZpcnN0KGRlZiwgJ3ZhbHVlJywgJ2xpdGVyYWwnKTtcbiAgICBpZiAobGl0ZXJhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0OiBsaXRlcmFsLFxuICAgICAgICB0eXBlOiBsaXRlcmFsID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGxpdGVyYWwsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkRW51bShkZWYpIHtcbiAgICBpZiAoIWRlZikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkZWYudmFsdWVzKSkge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBkZWYudmFsdWVzIH07XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRlZi5vcHRpb25zKSkge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBkZWYub3B0aW9ucyB9O1xuICAgIH1cbiAgICBpZiAoZGVmLnZhbHVlcyAmJiB0eXBlb2YgZGVmLnZhbHVlcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHsgZW51bTogT2JqZWN0LnZhbHVlcyhkZWYudmFsdWVzKSB9O1xuICAgIH1cbiAgICBpZiAoZGVmLmVudW0gJiYgdHlwZW9mIGRlZi5lbnVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBPYmplY3QudmFsdWVzKGRlZi5lbnVtKSB9O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gcmVhZFNoYXBlKGlucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ29iamVjdCcgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgY2FuZGlkYXRlID0gaW5wdXQ7XG4gICAgaWYgKGNhbmRpZGF0ZS5zaGFwZSAmJiB0eXBlb2YgY2FuZGlkYXRlLnNoYXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gY2FuZGlkYXRlLnNoYXBlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNhbmRpZGF0ZS5zaGFwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZS5zaGFwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oY2FuZGlkYXRlKTtcbiAgICBjb25zdCBzaGFwZSA9IGRlZj8uc2hhcGU7XG4gICAgaWYgKHNoYXBlICYmIHR5cGVvZiBzaGFwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNoYXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhcGUoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2RKc29uU2NoZW1hQ29tcGF0Lm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgem9kSnNvblNjaGVtYUNvbXBhdCwgaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlLCB9IGZyb20gXCIuL3pvZEpzb25TY2hlbWFDb21wYXQubWpzXCI7XG5pbXBvcnQgeyBhc1pvZFR5cGUgfSBmcm9tIFwiLi96b2RDb21wYXQubWpzXCI7XG5jb25zdCB6b2RSZXNwb25zZXNGdW5jdGlvbkNvbXBhdCA9IHpvZFJlc3BvbnNlc0Z1bmN0aW9uO1xuLy8gVGhlIGAuc2NoZW1hYCBwYXlsb2FkIGlzIGFsbCB3ZSBuZWVkLCBzbyBhIGxpZ2h0d2VpZ2h0IHNpZ25hdHVyZSBrZWVwcyB0aGUgY29tcGlsZXIgaGFwcHkuXG5jb25zdCB6b2RUZXh0Rm9ybWF0Q29tcGF0ID0gem9kVGV4dEZvcm1hdDtcbi8vIG9wZW5haS9oZWxwZXJzL3pvZCBjYW5ub3QgZW1pdCBzdHJpY3Qgc2NoZW1hcyBmb3IgZXZlcnkgWm9kIHJ1bnRpbWVcbi8vIChub3RhYmx5IFpvZCB2NCksIHNvIHdlIGRlbGVnYXRlIHRvIGEgc21hbGwgbG9jYWwgY29udmVydGVyIGxpdmluZyBpblxuLy8gem9kSnNvblNjaGVtYUNvbXBhdC50cyB3aGVuZXZlciBpdHMgb3V0cHV0IGlzIG1pc3NpbmcgdGhlIHJlcXVpcmVkIEpTT04gU2NoZW1hIGJpdHMuXG5mdW5jdGlvbiBidWlsZEpzb25TY2hlbWFGcm9tWm9kKGlucHV0VHlwZSkge1xuICAgIHJldHVybiB6b2RKc29uU2NoZW1hQ29tcGF0KGlucHV0VHlwZSk7XG59XG4vKipcbiAqIENvbnZlcnQgYSBzdHJpbmcgdG8gYSBmdW5jdGlvbiB0b29sIG5hbWUgYnkgcmVwbGFjaW5nIHNwYWNlcyB3aXRoIHVuZGVyc2NvcmVzIGFuZFxuICogbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIHdpdGggdW5kZXJzY29yZXMuXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0b29sLlxuICogQHJldHVybnMgVGhlIGZ1bmN0aW9uIHRvb2wgbmFtZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRnVuY3Rpb25Ub29sTmFtZShuYW1lKSB7XG4gICAgLy8gUmVwbGFjZSBzcGFjZXMgd2l0aCB1bmRlcnNjb3Jlc1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1xccy9nLCAnXycpO1xuICAgIC8vIFJlcGxhY2Ugbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywgJ18nKTtcbiAgICAvLyBFbnN1cmUgdGhlIG5hbWUgaXMgbm90IGVtcHR5XG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eScpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZTtcbn1cbi8qKlxuICogR2V0IHRoZSBzY2hlbWEgYW5kIHBhcnNlciBmcm9tIGFuIGlucHV0IHR5cGUuIElmIHRoZSBpbnB1dCB0eXBlIGlzIGEgWm9kT2JqZWN0LCB3ZSB3aWxsIGNvbnZlcnRcbiAqIGl0IGludG8gYSBKU09OIFNjaGVtYSBhbmQgdXNlIFpvZCBhcyBwYXJzZXIuIElmIHRoZSBpbnB1dCB0eXBlIGlzIGEgSlNPTiBzY2hlbWEsIHdlIHVzZSB0aGVcbiAqIEpTT04ucGFyc2UgZnVuY3Rpb24gdG8gZ2V0IHRoZSBwYXJzZXIuXG4gKiBAcGFyYW0gaW5wdXRUeXBlIC0gVGhlIGlucHV0IHR5cGUgdG8gZ2V0IHRoZSBzY2hlbWEgYW5kIHBhcnNlciBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBzY2hlbWEgYW5kIHBhcnNlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoaW5wdXRUeXBlLCBuYW1lKSB7XG4gICAgY29uc3QgcGFyc2VyID0gKGlucHV0KSA9PiBKU09OLnBhcnNlKGlucHV0KTtcbiAgICBpZiAoaXNab2RPYmplY3QoaW5wdXRUeXBlKSkge1xuICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9IChvcmlnaW5hbEVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1NjaGVtYSA9IGJ1aWxkSnNvblNjaGVtYUZyb21ab2QoaW5wdXRUeXBlKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja1NjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogZmFsbGJhY2tTY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlcjogKHJhd0lucHV0KSA9PiBpbnB1dFR5cGUucGFyc2UoSlNPTi5wYXJzZShyYXdJbnB1dCkpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBvcmlnaW5hbEVycm9yIGluc3RhbmNlb2YgRXJyb3JcbiAgICAgICAgICAgICAgICA/IGAgVXBzdHJlYW0gaGVscGVyIGVycm9yOiAke29yaWdpbmFsRXJyb3IubWVzc2FnZX1gXG4gICAgICAgICAgICAgICAgOiAnJztcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFVuYWJsZSB0byBjb252ZXJ0IHRoZSBwcm92aWRlZCBab2Qgc2NoZW1hIHRvIEpTT04gU2NoZW1hLiBFbnN1cmUgdGhhdCB0aGUgXFxgem9kXFxgIHBhY2thZ2UgaXMgYXZhaWxhYmxlIGF0IHJ1bnRpbWUgb3IgcHJvdmlkZSBhIEpTT04gc2NoZW1hIG9iamVjdCBpbnN0ZWFkLiR7ZXJyb3JNZXNzYWdlfWApO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgZm9ybWF0dGVkRnVuY3Rpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRGdW5jdGlvbiA9IHpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0KHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IGFzWm9kVHlwZShpbnB1dFR5cGUpLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7IH0sIC8vIGVtcHR5IGZ1bmN0aW9uIGhlcmUgdG8gc2F0aXNmeSB0aGUgT3BlbkFJIGhlbHBlclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlKGZvcm1hdHRlZEZ1bmN0aW9uLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNjaGVtYTogZm9ybWF0dGVkRnVuY3Rpb24ucGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICBwYXJzZXI6IGZvcm1hdHRlZEZ1bmN0aW9uLiRwYXJzZVJhdyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgdXNlRmFsbGJhY2sgPSAoZXhpc3RpbmcsIG9yaWdpbmFsRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrU2NoZW1hID0gYnVpbGRKc29uU2NoZW1hRnJvbVpvZChvdXRwdXRUeXBlKTtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja1NjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGV4aXN0aW5nPy50eXBlID8/ICdqc29uX3NjaGVtYScsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGV4aXN0aW5nPy5uYW1lID8/ICdvdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICBzdHJpY3Q6IGV4aXN0aW5nPy5zdHJpY3QgPz8gZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYTogZmFsbGJhY2tTY2hlbWEsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICAgID8gYCBVcHN0cmVhbSBoZWxwZXIgZXJyb3I6ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVW5hYmxlIHRvIGNvbnZlcnQgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgdG8gSlNPTiBTY2hlbWEuIEVuc3VyZSB0aGF0IHRoZSBcXGB6b2RcXGAgcGFja2FnZSBpcyBhdmFpbGFibGUgYXQgcnVudGltZSBvciBwcm92aWRlIGEgSlNPTiBzY2hlbWEgb2JqZWN0IGluc3RlYWQuJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBvdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQgPSB6b2RUZXh0Rm9ybWF0Q29tcGF0KGFzWm9kVHlwZShvdXRwdXRUeXBlKSwgJ291dHB1dCcpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKHVuZGVmaW5lZCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUob3V0cHV0LnNjaGVtYSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogb3V0cHV0LnR5cGUsXG4gICAgICAgICAgICAgICAgbmFtZTogb3V0cHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNjaGVtYTogb3V0cHV0LnNjaGVtYSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZUZhbGxiYWNrKG91dHB1dCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRUeXBlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbHMubWpzLm1hcCIsIi8qKlxuICogSGVscGVycy5cbiAqL1xuXG52YXIgcyA9IDEwMDA7XG52YXIgbSA9IHMgKiA2MDtcbnZhciBoID0gbSAqIDYwO1xudmFyIGQgPSBoICogMjQ7XG52YXIgdyA9IGQgKiA3O1xudmFyIHkgPSBkICogMzY1LjI1O1xuXG4vKipcbiAqIFBhcnNlIG9yIGZvcm1hdCB0aGUgZ2l2ZW4gYHZhbGAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAgLSBgbG9uZ2AgdmVyYm9zZSBmb3JtYXR0aW5nIFtmYWxzZV1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IHZhbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHRocm93cyB7RXJyb3J9IHRocm93IGFuIGVycm9yIGlmIHZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgbnVtYmVyXG4gKiBAcmV0dXJuIHtTdHJpbmd8TnVtYmVyfVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh2YWwsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbDtcbiAgaWYgKHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHBhcnNlKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsKSkge1xuICAgIHJldHVybiBvcHRpb25zLmxvbmcgPyBmbXRMb25nKHZhbCkgOiBmbXRTaG9ydCh2YWwpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAndmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSB2YWxpZCBudW1iZXIuIHZhbD0nICtcbiAgICAgIEpTT04uc3RyaW5naWZ5KHZhbClcbiAgKTtcbn07XG5cbi8qKlxuICogUGFyc2UgdGhlIGdpdmVuIGBzdHJgIGFuZCByZXR1cm4gbWlsbGlzZWNvbmRzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgaWYgKHN0ci5sZW5ndGggPiAxMDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1hdGNoID0gL14oLT8oPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHdlZWtzP3x3fHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKFxuICAgIHN0clxuICApO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7XG4gIHZhciB0eXBlID0gKG1hdGNoWzJdIHx8ICdtcycpLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3llYXJzJzpcbiAgICBjYXNlICd5ZWFyJzpcbiAgICBjYXNlICd5cnMnOlxuICAgIGNhc2UgJ3lyJzpcbiAgICBjYXNlICd5JzpcbiAgICAgIHJldHVybiBuICogeTtcbiAgICBjYXNlICd3ZWVrcyc6XG4gICAgY2FzZSAnd2Vlayc6XG4gICAgY2FzZSAndyc6XG4gICAgICByZXR1cm4gbiAqIHc7XG4gICAgY2FzZSAnZGF5cyc6XG4gICAgY2FzZSAnZGF5JzpcbiAgICBjYXNlICdkJzpcbiAgICAgIHJldHVybiBuICogZDtcbiAgICBjYXNlICdob3Vycyc6XG4gICAgY2FzZSAnaG91cic6XG4gICAgY2FzZSAnaHJzJzpcbiAgICBjYXNlICdocic6XG4gICAgY2FzZSAnaCc6XG4gICAgICByZXR1cm4gbiAqIGg7XG4gICAgY2FzZSAnbWludXRlcyc6XG4gICAgY2FzZSAnbWludXRlJzpcbiAgICBjYXNlICdtaW5zJzpcbiAgICBjYXNlICdtaW4nOlxuICAgIGNhc2UgJ20nOlxuICAgICAgcmV0dXJuIG4gKiBtO1xuICAgIGNhc2UgJ3NlY29uZHMnOlxuICAgIGNhc2UgJ3NlY29uZCc6XG4gICAgY2FzZSAnc2Vjcyc6XG4gICAgY2FzZSAnc2VjJzpcbiAgICBjYXNlICdzJzpcbiAgICAgIHJldHVybiBuICogcztcbiAgICBjYXNlICdtaWxsaXNlY29uZHMnOlxuICAgIGNhc2UgJ21pbGxpc2Vjb25kJzpcbiAgICBjYXNlICdtc2Vjcyc6XG4gICAgY2FzZSAnbXNlYyc6XG4gICAgY2FzZSAnbXMnOlxuICAgICAgcmV0dXJuIG47XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBTaG9ydCBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRTaG9ydChtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICdkJztcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAnaCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgJ20nO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICdzJztcbiAgfVxuICByZXR1cm4gbXMgKyAnbXMnO1xufVxuXG4vKipcbiAqIExvbmcgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10TG9uZyhtcykge1xuICB2YXIgbXNBYnMgPSBNYXRoLmFicyhtcyk7XG4gIGlmIChtc0FicyA+PSBkKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGQsICdkYXknKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gaCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBoLCAnaG91cicpO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIG0sICdtaW51dGUnKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBzLCAnc2Vjb25kJyk7XG4gIH1cbiAgcmV0dXJuIG1zICsgJyBtcyc7XG59XG5cbi8qKlxuICogUGx1cmFsaXphdGlvbiBoZWxwZXIuXG4gKi9cblxuZnVuY3Rpb24gcGx1cmFsKG1zLCBtc0FicywgbiwgbmFtZSkge1xuICB2YXIgaXNQbHVyYWwgPSBtc0FicyA+PSBuICogMS41O1xuICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIG4pICsgJyAnICsgbmFtZSArIChpc1BsdXJhbCA/ICdzJyA6ICcnKTtcbn1cbiIsIlxuLyoqXG4gKiBUaGlzIGlzIHRoZSBjb21tb24gbG9naWMgZm9yIGJvdGggdGhlIE5vZGUuanMgYW5kIHdlYiBicm93c2VyXG4gKiBpbXBsZW1lbnRhdGlvbnMgb2YgYGRlYnVnKClgLlxuICovXG5cbmZ1bmN0aW9uIHNldHVwKGVudikge1xuXHRjcmVhdGVEZWJ1Zy5kZWJ1ZyA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5kZWZhdWx0ID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmNvZXJjZSA9IGNvZXJjZTtcblx0Y3JlYXRlRGVidWcuZGlzYWJsZSA9IGRpc2FibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZSA9IGVuYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlZCA9IGVuYWJsZWQ7XG5cdGNyZWF0ZURlYnVnLmh1bWFuaXplID0gcmVxdWlyZSgnbXMnKTtcblx0Y3JlYXRlRGVidWcuZGVzdHJveSA9IGRlc3Ryb3k7XG5cblx0T2JqZWN0LmtleXMoZW52KS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0Y3JlYXRlRGVidWdba2V5XSA9IGVudltrZXldO1xuXHR9KTtcblxuXHQvKipcblx0KiBUaGUgY3VycmVudGx5IGFjdGl2ZSBkZWJ1ZyBtb2RlIG5hbWVzLCBhbmQgbmFtZXMgdG8gc2tpcC5cblx0Ki9cblxuXHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdC8qKlxuXHQqIE1hcCBvZiBzcGVjaWFsIFwiJW5cIiBoYW5kbGluZyBmdW5jdGlvbnMsIGZvciB0aGUgZGVidWcgXCJmb3JtYXRcIiBhcmd1bWVudC5cblx0KlxuXHQqIFZhbGlkIGtleSBuYW1lcyBhcmUgYSBzaW5nbGUsIGxvd2VyIG9yIHVwcGVyLWNhc2UgbGV0dGVyLCBpLmUuIFwiblwiIGFuZCBcIk5cIi5cblx0Ki9cblx0Y3JlYXRlRGVidWcuZm9ybWF0dGVycyA9IHt9O1xuXG5cdC8qKlxuXHQqIFNlbGVjdHMgYSBjb2xvciBmb3IgYSBkZWJ1ZyBuYW1lc3BhY2Vcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlIFRoZSBuYW1lc3BhY2Ugc3RyaW5nIGZvciB0aGUgZGVidWcgaW5zdGFuY2UgdG8gYmUgY29sb3JlZFxuXHQqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IEFuIEFOU0kgY29sb3IgY29kZSBmb3IgdGhlIGdpdmVuIG5hbWVzcGFjZVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBzZWxlY3RDb2xvcihuYW1lc3BhY2UpIHtcblx0XHRsZXQgaGFzaCA9IDA7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzcGFjZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgbmFtZXNwYWNlLmNoYXJDb2RlQXQoaSk7XG5cdFx0XHRoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuXHRcdH1cblxuXHRcdHJldHVybiBjcmVhdGVEZWJ1Zy5jb2xvcnNbTWF0aC5hYnMoaGFzaCkgJSBjcmVhdGVEZWJ1Zy5jb2xvcnMubGVuZ3RoXTtcblx0fVxuXHRjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvciA9IHNlbGVjdENvbG9yO1xuXG5cdC8qKlxuXHQqIENyZWF0ZSBhIGRlYnVnZ2VyIHdpdGggdGhlIGdpdmVuIGBuYW1lc3BhY2VgLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZVxuXHQqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGNyZWF0ZURlYnVnKG5hbWVzcGFjZSkge1xuXHRcdGxldCBwcmV2VGltZTtcblx0XHRsZXQgZW5hYmxlT3ZlcnJpZGUgPSBudWxsO1xuXHRcdGxldCBuYW1lc3BhY2VzQ2FjaGU7XG5cdFx0bGV0IGVuYWJsZWRDYWNoZTtcblxuXHRcdGZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3MpIHtcblx0XHRcdC8vIERpc2FibGVkP1xuXHRcdFx0aWYgKCFkZWJ1Zy5lbmFibGVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2VsZiA9IGRlYnVnO1xuXG5cdFx0XHQvLyBTZXQgYGRpZmZgIHRpbWVzdGFtcFxuXHRcdFx0Y29uc3QgY3VyciA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNvbnN0IG1zID0gY3VyciAtIChwcmV2VGltZSB8fCBjdXJyKTtcblx0XHRcdHNlbGYuZGlmZiA9IG1zO1xuXHRcdFx0c2VsZi5wcmV2ID0gcHJldlRpbWU7XG5cdFx0XHRzZWxmLmN1cnIgPSBjdXJyO1xuXHRcdFx0cHJldlRpbWUgPSBjdXJyO1xuXG5cdFx0XHRhcmdzWzBdID0gY3JlYXRlRGVidWcuY29lcmNlKGFyZ3NbMF0pO1xuXG5cdFx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdC8vIEFueXRoaW5nIGVsc2UgbGV0J3MgaW5zcGVjdCB3aXRoICVPXG5cdFx0XHRcdGFyZ3MudW5zaGlmdCgnJU8nKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgYW55IGBmb3JtYXR0ZXJzYCB0cmFuc2Zvcm1hdGlvbnNcblx0XHRcdGxldCBpbmRleCA9IDA7XG5cdFx0XHRhcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXpBLVolXSkvZywgKG1hdGNoLCBmb3JtYXQpID0+IHtcblx0XHRcdFx0Ly8gSWYgd2UgZW5jb3VudGVyIGFuIGVzY2FwZWQgJSB0aGVuIGRvbid0IGluY3JlYXNlIHRoZSBhcnJheSBpbmRleFxuXHRcdFx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdFx0XHRyZXR1cm4gJyUnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdGNvbnN0IGZvcm1hdHRlciA9IGNyZWF0ZURlYnVnLmZvcm1hdHRlcnNbZm9ybWF0XTtcblx0XHRcdFx0aWYgKHR5cGVvZiBmb3JtYXR0ZXIgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjb25zdCB2YWwgPSBhcmdzW2luZGV4XTtcblx0XHRcdFx0XHRtYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsIHZhbCk7XG5cblx0XHRcdFx0XHQvLyBOb3cgd2UgbmVlZCB0byByZW1vdmUgYGFyZ3NbaW5kZXhdYCBzaW5jZSBpdCdzIGlubGluZWQgaW4gdGhlIGBmb3JtYXRgXG5cdFx0XHRcdFx0YXJncy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdGluZGV4LS07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEFwcGx5IGVudi1zcGVjaWZpYyBmb3JtYXR0aW5nIChjb2xvcnMsIGV0Yy4pXG5cdFx0XHRjcmVhdGVEZWJ1Zy5mb3JtYXRBcmdzLmNhbGwoc2VsZiwgYXJncyk7XG5cblx0XHRcdGNvbnN0IGxvZ0ZuID0gc2VsZi5sb2cgfHwgY3JlYXRlRGVidWcubG9nO1xuXHRcdFx0bG9nRm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cdFx0fVxuXG5cdFx0ZGVidWcubmFtZXNwYWNlID0gbmFtZXNwYWNlO1xuXHRcdGRlYnVnLnVzZUNvbG9ycyA9IGNyZWF0ZURlYnVnLnVzZUNvbG9ycygpO1xuXHRcdGRlYnVnLmNvbG9yID0gY3JlYXRlRGVidWcuc2VsZWN0Q29sb3IobmFtZXNwYWNlKTtcblx0XHRkZWJ1Zy5leHRlbmQgPSBleHRlbmQ7XG5cdFx0ZGVidWcuZGVzdHJveSA9IGNyZWF0ZURlYnVnLmRlc3Ryb3k7IC8vIFhYWCBUZW1wb3JhcnkuIFdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGRlYnVnLCAnZW5hYmxlZCcsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0Z2V0OiAoKSA9PiB7XG5cdFx0XHRcdGlmIChlbmFibGVPdmVycmlkZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdHJldHVybiBlbmFibGVPdmVycmlkZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmFtZXNwYWNlc0NhY2hlICE9PSBjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzKSB7XG5cdFx0XHRcdFx0bmFtZXNwYWNlc0NhY2hlID0gY3JlYXRlRGVidWcubmFtZXNwYWNlcztcblx0XHRcdFx0XHRlbmFibGVkQ2FjaGUgPSBjcmVhdGVEZWJ1Zy5lbmFibGVkKG5hbWVzcGFjZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZW5hYmxlZENhY2hlO1xuXHRcdFx0fSxcblx0XHRcdHNldDogdiA9PiB7XG5cdFx0XHRcdGVuYWJsZU92ZXJyaWRlID0gdjtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEVudi1zcGVjaWZpYyBpbml0aWFsaXphdGlvbiBsb2dpYyBmb3IgZGVidWcgaW5zdGFuY2VzXG5cdFx0aWYgKHR5cGVvZiBjcmVhdGVEZWJ1Zy5pbml0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRjcmVhdGVEZWJ1Zy5pbml0KGRlYnVnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGVidWc7XG5cdH1cblxuXHRmdW5jdGlvbiBleHRlbmQobmFtZXNwYWNlLCBkZWxpbWl0ZXIpIHtcblx0XHRjb25zdCBuZXdEZWJ1ZyA9IGNyZWF0ZURlYnVnKHRoaXMubmFtZXNwYWNlICsgKHR5cGVvZiBkZWxpbWl0ZXIgPT09ICd1bmRlZmluZWQnID8gJzonIDogZGVsaW1pdGVyKSArIG5hbWVzcGFjZSk7XG5cdFx0bmV3RGVidWcubG9nID0gdGhpcy5sb2c7XG5cdFx0cmV0dXJuIG5ld0RlYnVnO1xuXHR9XG5cblx0LyoqXG5cdCogRW5hYmxlcyBhIGRlYnVnIG1vZGUgYnkgbmFtZXNwYWNlcy4gVGhpcyBjYW4gaW5jbHVkZSBtb2Rlc1xuXHQqIHNlcGFyYXRlZCBieSBhIGNvbG9uIGFuZCB3aWxkY2FyZHMuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKSB7XG5cdFx0Y3JlYXRlRGVidWcuc2F2ZShuYW1lc3BhY2VzKTtcblx0XHRjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzID0gbmFtZXNwYWNlcztcblxuXHRcdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdFx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHRcdGNvbnN0IHNwbGl0ID0gKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJyA/IG5hbWVzcGFjZXMgOiAnJylcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9cXHMrL2csICcsJylcblx0XHRcdC5zcGxpdCgnLCcpXG5cdFx0XHQuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBzcGxpdCkge1xuXHRcdFx0aWYgKG5zWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChucy5zbGljZSgxKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5zKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBzdHJpbmcgbWF0Y2hlcyBhIG5hbWVzcGFjZSB0ZW1wbGF0ZSwgaG9ub3Jpbmdcblx0ICogYXN0ZXJpc2tzIGFzIHdpbGRjYXJkcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoZXNUZW1wbGF0ZShzZWFyY2gsIHRlbXBsYXRlKSB7XG5cdFx0bGV0IHNlYXJjaEluZGV4ID0gMDtcblx0XHRsZXQgdGVtcGxhdGVJbmRleCA9IDA7XG5cdFx0bGV0IHN0YXJJbmRleCA9IC0xO1xuXHRcdGxldCBtYXRjaEluZGV4ID0gMDtcblxuXHRcdHdoaWxlIChzZWFyY2hJbmRleCA8IHNlYXJjaC5sZW5ndGgpIHtcblx0XHRcdGlmICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gc2VhcmNoW3NlYXJjaEluZGV4XSB8fCB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSkge1xuXHRcdFx0XHQvLyBNYXRjaCBjaGFyYWN0ZXIgb3IgcHJvY2VlZCB3aXRoIHdpbGRjYXJkXG5cdFx0XHRcdGlmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHRcdFx0c3RhckluZGV4ID0gdGVtcGxhdGVJbmRleDtcblx0XHRcdFx0XHRtYXRjaEluZGV4ID0gc2VhcmNoSW5kZXg7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrOyAvLyBTa2lwIHRoZSAnKidcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWFyY2hJbmRleCsrO1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzdGFySW5kZXggIT09IC0xKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmVnYXRlZC1jb25kaXRpb25cblx0XHRcdFx0Ly8gQmFja3RyYWNrIHRvIHRoZSBsYXN0ICcqJyBhbmQgdHJ5IHRvIG1hdGNoIG1vcmUgY2hhcmFjdGVyc1xuXHRcdFx0XHR0ZW1wbGF0ZUluZGV4ID0gc3RhckluZGV4ICsgMTtcblx0XHRcdFx0bWF0Y2hJbmRleCsrO1xuXHRcdFx0XHRzZWFyY2hJbmRleCA9IG1hdGNoSW5kZXg7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIE5vIG1hdGNoXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIHRyYWlsaW5nICcqJyBpbiB0ZW1wbGF0ZVxuXHRcdHdoaWxlICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmIHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gdGVtcGxhdGVJbmRleCA9PT0gdGVtcGxhdGUubGVuZ3RoO1xuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcyxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcChuYW1lc3BhY2UgPT4gJy0nICsgbmFtZXNwYWNlKVxuXHRcdF0uam9pbignLCcpO1xuXHRcdGNyZWF0ZURlYnVnLmVuYWJsZSgnJyk7XG5cdFx0cmV0dXJuIG5hbWVzcGFjZXM7XG5cdH1cblxuXHQvKipcblx0KiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG5cdFx0Zm9yIChjb25zdCBza2lwIG9mIGNyZWF0ZURlYnVnLnNraXBzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIHNraXApKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIGNyZWF0ZURlYnVnLm5hbWVzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIG5zKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb2VyY2UgYHZhbGAuXG5cdCpcblx0KiBAcGFyYW0ge01peGVkfSB2YWxcblx0KiBAcmV0dXJuIHtNaXhlZH1cblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuXHRcdGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0cmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxuXG5cdC8qKlxuXHQqIFhYWCBETyBOT1QgVVNFLiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHN0dWIgZnVuY3Rpb24uXG5cdCogWFhYIEl0IFdJTEwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXHQqL1xuXHRmdW5jdGlvbiBkZXN0cm95KCkge1xuXHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHR9XG5cblx0Y3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSk7XG5cblx0cmV0dXJuIGNyZWF0ZURlYnVnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xuIiwiLyogZXNsaW50LWVudiBicm93c2VyICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gbG9jYWxzdG9yYWdlKCk7XG5leHBvcnRzLmRlc3Ryb3kgPSAoKCkgPT4ge1xuXHRsZXQgd2FybmVkID0gZmFsc2U7XG5cblx0cmV0dXJuICgpID0+IHtcblx0XHRpZiAoIXdhcm5lZCkge1xuXHRcdFx0d2FybmVkID0gdHJ1ZTtcblx0XHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHRcdH1cblx0fTtcbn0pKCk7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbmV4cG9ydHMuY29sb3JzID0gW1xuXHQnIzAwMDBDQycsXG5cdCcjMDAwMEZGJyxcblx0JyMwMDMzQ0MnLFxuXHQnIzAwMzNGRicsXG5cdCcjMDA2NkNDJyxcblx0JyMwMDY2RkYnLFxuXHQnIzAwOTlDQycsXG5cdCcjMDA5OUZGJyxcblx0JyMwMENDMDAnLFxuXHQnIzAwQ0MzMycsXG5cdCcjMDBDQzY2Jyxcblx0JyMwMENDOTknLFxuXHQnIzAwQ0NDQycsXG5cdCcjMDBDQ0ZGJyxcblx0JyMzMzAwQ0MnLFxuXHQnIzMzMDBGRicsXG5cdCcjMzMzM0NDJyxcblx0JyMzMzMzRkYnLFxuXHQnIzMzNjZDQycsXG5cdCcjMzM2NkZGJyxcblx0JyMzMzk5Q0MnLFxuXHQnIzMzOTlGRicsXG5cdCcjMzNDQzAwJyxcblx0JyMzM0NDMzMnLFxuXHQnIzMzQ0M2NicsXG5cdCcjMzNDQzk5Jyxcblx0JyMzM0NDQ0MnLFxuXHQnIzMzQ0NGRicsXG5cdCcjNjYwMENDJyxcblx0JyM2NjAwRkYnLFxuXHQnIzY2MzNDQycsXG5cdCcjNjYzM0ZGJyxcblx0JyM2NkNDMDAnLFxuXHQnIzY2Q0MzMycsXG5cdCcjOTkwMENDJyxcblx0JyM5OTAwRkYnLFxuXHQnIzk5MzNDQycsXG5cdCcjOTkzM0ZGJyxcblx0JyM5OUNDMDAnLFxuXHQnIzk5Q0MzMycsXG5cdCcjQ0MwMDAwJyxcblx0JyNDQzAwMzMnLFxuXHQnI0NDMDA2NicsXG5cdCcjQ0MwMDk5Jyxcblx0JyNDQzAwQ0MnLFxuXHQnI0NDMDBGRicsXG5cdCcjQ0MzMzAwJyxcblx0JyNDQzMzMzMnLFxuXHQnI0NDMzM2NicsXG5cdCcjQ0MzMzk5Jyxcblx0JyNDQzMzQ0MnLFxuXHQnI0NDMzNGRicsXG5cdCcjQ0M2NjAwJyxcblx0JyNDQzY2MzMnLFxuXHQnI0NDOTkwMCcsXG5cdCcjQ0M5OTMzJyxcblx0JyNDQ0NDMDAnLFxuXHQnI0NDQ0MzMycsXG5cdCcjRkYwMDAwJyxcblx0JyNGRjAwMzMnLFxuXHQnI0ZGMDA2NicsXG5cdCcjRkYwMDk5Jyxcblx0JyNGRjAwQ0MnLFxuXHQnI0ZGMDBGRicsXG5cdCcjRkYzMzAwJyxcblx0JyNGRjMzMzMnLFxuXHQnI0ZGMzM2NicsXG5cdCcjRkYzMzk5Jyxcblx0JyNGRjMzQ0MnLFxuXHQnI0ZGMzNGRicsXG5cdCcjRkY2NjAwJyxcblx0JyNGRjY2MzMnLFxuXHQnI0ZGOTkwMCcsXG5cdCcjRkY5OTMzJyxcblx0JyNGRkNDMDAnLFxuXHQnI0ZGQ0MzMydcbl07XG5cbi8qKlxuICogQ3VycmVudGx5IG9ubHkgV2ViS2l0LWJhc2VkIFdlYiBJbnNwZWN0b3JzLCBGaXJlZm94ID49IHYzMSxcbiAqIGFuZCB0aGUgRmlyZWJ1ZyBleHRlbnNpb24gKGFueSBGaXJlZm94IHZlcnNpb24pIGFyZSBrbm93blxuICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICpcbiAqIFRPRE86IGFkZCBhIGBsb2NhbFN0b3JhZ2VgIHZhcmlhYmxlIHRvIGV4cGxpY2l0bHkgZW5hYmxlL2Rpc2FibGUgY29sb3JzXG4gKi9cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcblx0Ly8gTkI6IEluIGFuIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBkb2N1bWVudCB3aWxsIGJlIGRlZmluZWQgYnV0IG5vdCBmdWxseVxuXHQvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZVxuXHQvLyBleHBsaWNpdGx5XG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiAod2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJyB8fCB3aW5kb3cucHJvY2Vzcy5fX253anMpKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBJbnRlcm5ldCBFeHBsb3JlciBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydCBjb2xvcnMuXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvKGVkZ2V8dHJpZGVudClcXC8oXFxkKykvKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGxldCBtO1xuXG5cdC8vIElzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczXG5cdC8vIGRvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiByZWFjdC1uYXRpdmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvcHVsbC8xNjMyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXNzaWduXG5cdHJldHVybiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5XZWJraXRBcHBlYXJhbmNlKSB8fFxuXHRcdC8vIElzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcblx0XHQodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLmZpcmVidWcgfHwgKHdpbmRvdy5jb25zb2xlLmV4Y2VwdGlvbiAmJiB3aW5kb3cuY29uc29sZS50YWJsZSkpKSB8fFxuXHRcdC8vIElzIGZpcmVmb3ggPj0gdjMxP1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvVG9vbHMvV2ViX0NvbnNvbGUjU3R5bGluZ19tZXNzYWdlc1xuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIChtID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykpICYmIHBhcnNlSW50KG1bMV0sIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJykgfHwgZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ0RFQlVHJykgO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxuXG5cdC8vIElmIGRlYnVnIGlzbid0IHNldCBpbiBMUywgYW5kIHdlJ3JlIGluIEVsZWN0cm9uLCB0cnkgdG8gbG9hZCAkREVCVUdcblx0aWYgKCFyICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAnZW52JyBpbiBwcm9jZXNzKSB7XG5cdFx0ciA9IHByb2Nlc3MuZW52LkRFQlVHO1xuXHR9XG5cblx0cmV0dXJuIHI7XG59XG5cbi8qKlxuICogTG9jYWxzdG9yYWdlIGF0dGVtcHRzIHRvIHJldHVybiB0aGUgbG9jYWxzdG9yYWdlLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc2FmYXJpIHRocm93c1xuICogd2hlbiBhIHVzZXIgZGlzYWJsZXMgY29va2llcy9sb2NhbHN0b3JhZ2VcbiAqIGFuZCB5b3UgYXR0ZW1wdCB0byBhY2Nlc3MgaXQuXG4gKlxuICogQHJldHVybiB7TG9jYWxTdG9yYWdlfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCkge1xuXHR0cnkge1xuXHRcdC8vIFRWTUxLaXQgKEFwcGxlIFRWIEpTIFJ1bnRpbWUpIGRvZXMgbm90IGhhdmUgYSB3aW5kb3cgb2JqZWN0LCBqdXN0IGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHRcblx0XHQvLyBUaGUgQnJvd3NlciBhbHNvIGhhcyBsb2NhbFN0b3JhZ2UgaW4gdGhlIGdsb2JhbCBjb250ZXh0LlxuXHRcdHJldHVybiBsb2NhbFN0b3JhZ2U7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9jb21tb24nKShleHBvcnRzKTtcblxuY29uc3Qge2Zvcm1hdHRlcnN9ID0gbW9kdWxlLmV4cG9ydHM7XG5cbi8qKlxuICogTWFwICVqIHRvIGBKU09OLnN0cmluZ2lmeSgpYCwgc2luY2Ugbm8gV2ViIEluc3BlY3RvcnMgZG8gdGhhdCBieSBkZWZhdWx0LlxuICovXG5cbmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uICh2KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHJldHVybiAnW1VuZXhwZWN0ZWRKU09OUGFyc2VFcnJvcl06ICcgKyBlcnJvci5tZXNzYWdlO1xuXHR9XG59O1xuIiwiaW1wb3J0IHsgbG9hZEVudiBhcyBfbG9hZEVudiwgaXNCcm93c2VyRW52aXJvbm1lbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBMb2FkcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSB0aGUgcHJvY2VzcyBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4gX2xvYWRFbnYoKTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIGEgZmxhZyBpcyBlbmFibGVkIGluIHRoZSBlbnZpcm9ubWVudC5cbiAqXG4gKiBAcGFyYW0gZmxhZ05hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmxhZyB0byBjaGVjay5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmxhZyBpcyBlbmFibGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqL1xuZnVuY3Rpb24gaXNFbmFibGVkKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAodHlwZW9mIGVudiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKGVudltmbGFnTmFtZV0gPT09ICd0cnVlJyB8fCBlbnZbZmxhZ05hbWVdID09PSAnMScpKTtcbn1cbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRyYWNpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCB0cmFjaW5nID0ge1xuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxvYWRFbnYoKS5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG4gICAgICAgICAgICAvLyBkaXNhYmxpbmcgYnkgZGVmYXVsdCBpbiB0ZXN0c1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ESVNBQkxFX1RSQUNJTkcnKTtcbiAgICB9LFxufTtcbi8qKlxuICogR2xvYmFsIGNvbmZpZ3VyYXRpb24gZm9yIGxvZ2dpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dnaW5nID0ge1xuICAgIGdldCBkb250TG9nTW9kZWxEYXRhKCkge1xuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RPTlRfTE9HX01PREVMX0RBVEEnKTtcbiAgICB9LFxuICAgIGdldCBkb250TG9nVG9vbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfVE9PTF9EQVRBJyk7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcubWpzLm1hcCIsImltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgeyBsb2dnaW5nIH0gZnJvbSBcIi4vY29uZmlnLm1qc1wiO1xuLyoqXG4gKiBCeSBkZWZhdWx0IHdlIGRvbid0IGxvZyBMTE0gaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dNb2RlbERhdGEgPSBsb2dnaW5nLmRvbnRMb2dNb2RlbERhdGE7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIHRvb2wgaW5wdXRzL291dHB1dHMsIHRvIHByZXZlbnQgZXhwb3Npbmcgc2Vuc2l0aXZlIGRhdGEuIFNldCB0aGlzIGZsYWdcbiAqIHRvIGVuYWJsZSBsb2dnaW5nIHRoZW0uXG4gKi9cbmNvbnN0IGRvbnRMb2dUb29sRGF0YSA9IGxvZ2dpbmcuZG9udExvZ1Rvb2xEYXRhO1xuLyoqXG4gKiBHZXQgYSBsb2dnZXIgZm9yIGEgZ2l2ZW4gcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0gbmFtZXNwYWNlIC0gdGhlIG5hbWVzcGFjZSB0byB1c2UgZm9yIHRoZSBsb2dnZXIuXG4gKiBAcmV0dXJucyBBIGxvZ2dlciBvYmplY3Qgd2l0aCBgZGVidWdgIGFuZCBgZXJyb3JgIG1ldGhvZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dnZXIobmFtZXNwYWNlID0gJ29wZW5haS1hZ2VudHMnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZXNwYWNlLFxuICAgICAgICBkZWJ1ZzogZGVidWcobmFtZXNwYWNlKSxcbiAgICAgICAgZXJyb3I6IGNvbnNvbGUuZXJyb3IsXG4gICAgICAgIHdhcm46IGNvbnNvbGUud2FybixcbiAgICAgICAgZG9udExvZ01vZGVsRGF0YSxcbiAgICAgICAgZG9udExvZ1Rvb2xEYXRhLFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOmNvcmUnKTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5tanMubWFwIiwiY29uc3QgQllURV9QUkVWSUVXX0xJTUlUID0gMjA7XG5leHBvcnQgZnVuY3Rpb24gdG9TbWFydFN0cmluZyh2YWx1ZSkge1xuICAgIC8vIFByb2R1Y2UgYSBodW1hbi1mcmllbmRseSBzdHJpbmcgcmVwcmVzZW50YXRpb24gd2hpbGUgcHJlc2VydmluZyBlbm91Z2ggZGV0YWlsIGZvciBkZWJ1Z2dpbmcgd29ya2Zsb3dzLlxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmFsdWUpKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgc21hcnRTdHJpbmdSZXBsYWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1tvYmplY3Qgd2l0aCBjaXJjdWxhciByZWZlcmVuY2VzXSc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlckxpa2UodmFsdWUpIHtcbiAgICAvLyBEZXRlY3QgcmF3IEFycmF5QnVmZmVyLWJhY2tlZCBwYXlsb2FkcyBzbyBjYWxsZXJzIGNhbiBnZW5lcmF0ZSBmdWxsIHByZXZpZXdzIHJhdGhlciB0aGFuIHRydW5jYXRlZCBoYXNoZXMuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNoYXJlZEFycmF5QnVmZmVyQ3RvciA9IGdsb2JhbFRoaXMuU2hhcmVkQXJyYXlCdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oc2hhcmVkQXJyYXlCdWZmZXJDdG9yICYmIHZhbHVlIGluc3RhbmNlb2Ygc2hhcmVkQXJyYXlCdWZmZXJDdG9yKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkge1xuICAgIC8vIFRyZWF0IHR5cGVkIGFycmF5IHZpZXdzIGFzIGJpbmFyeSBkYXRhIGZvciBjb25zaXN0ZW50IHNlcmlhbGl6YXRpb24uXG4gICAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCh2YWx1ZSkge1xuICAgIC8vIFN1cHBvcnQgc2VyaWFsaXplZCBCdWZmZXIgc25hcHNob3RzIChlLmcuLCBmcm9tIEpTT04ucGFyc2UpIGVtaXR0ZWQgYnkgc29tZSB0b29sIG91dHB1dHMuXG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdCdWZmZXInICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUJ1ZmZlcih2YWx1ZSkge1xuICAgIC8vIERldGVjdCBydW50aW1lIEJ1ZmZlcnMgd2l0aG91dCBpbXBvcnRpbmcgbm9kZS1zcGVjaWZpYyBzaGltcywgaGFuZGxpbmcgYnJvd3NlciBidWlsZHMgZ3JhY2VmdWxseS5cbiAgICBjb25zdCBidWZmZXJDdG9yID0gZ2xvYmFsVGhpcy5CdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oYnVmZmVyQ3RvciAmJlxuICAgICAgICB0eXBlb2YgYnVmZmVyQ3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICBidWZmZXJDdG9yLmlzQnVmZmVyKHZhbHVlKSk7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlQXJyYXkoYnl0ZXMpIHtcbiAgICBpZiAoYnl0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnW2J5dGUgYXJyYXkgKDAgYnl0ZXMpXSc7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpZXdMZW5ndGggPSBNYXRoLm1pbihieXRlcy5sZW5ndGgsIEJZVEVfUFJFVklFV19MSU1JVCk7XG4gICAgY29uc3QgcHJldmlld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aWV3TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcHJldmlld1BhcnRzLnB1c2goZm9ybWF0Qnl0ZShieXRlc1tpXSkpO1xuICAgIH1cbiAgICBjb25zdCBlbGxpcHNpcyA9IGJ5dGVzLmxlbmd0aCA+IEJZVEVfUFJFVklFV19MSU1JVCA/ICcg4oCmJyA6ICcnO1xuICAgIGNvbnN0IHByZXZpZXcgPSBwcmV2aWV3UGFydHMuam9pbignICcpO1xuICAgIHJldHVybiBgW2J5dGUgYXJyYXkgJHtwcmV2aWV3fSR7ZWxsaXBzaXN9ICgke2J5dGVzLmxlbmd0aH0gYnl0ZXMpXWA7XG59XG5mdW5jdGlvbiBmb3JtYXRCeXRlKGJ5dGUpIHtcbiAgICByZXR1cm4gYDB4JHtieXRlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpfWA7XG59XG5mdW5jdGlvbiBzbWFydFN0cmluZ1JlcGxhY2VyKF9rZXksIG5lc3RlZFZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJMaWtlKG5lc3RlZFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KG5lc3RlZFZhbHVlKSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyhuZXN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IG5lc3RlZFZhbHVlO1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpO1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QobmVzdGVkVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRCeXRlQXJyYXkoVWludDhBcnJheS5mcm9tKG5lc3RlZFZhbHVlLmRhdGEpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5lc3RlZFZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c21hcnRTdHJpbmcubWpzLm1hcCIsImltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG4vKipcbiAqIEV4cG9zZXMgYSBjb21wdXRlciB0byB0aGUgYWdlbnQgYXMgYSB0b29sIHRvIGJlIGNhbGxlZFxuICpcbiAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbXB1dGVyIHRvb2wgbGlrZSBzcGVjaWZ5aW5nIHRoZSBsb2NhdGlvbiBvZiB5b3VyIGFnZW50XG4gKiBAcmV0dXJucyBhIGNvbXB1dGVyIHRvb2wgZGVmaW5pdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZXJUb29sKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ2NvbXB1dGVyX3VzZV9wcmV2aWV3JyxcbiAgICAgICAgY29tcHV0ZXI6IG9wdGlvbnMuY29tcHV0ZXIsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaGVsbFRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnc2hlbGwnLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgPz8gJ3NoZWxsJyxcbiAgICAgICAgc2hlbGw6IG9wdGlvbnMuc2hlbGwsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UGF0Y2hUb29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdhcHBseV9wYXRjaCcsXG4gICAgICAgIGVkaXRvcjogb3B0aW9ucy5lZGl0b3IsXG4gICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgIG9uQXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgaG9zdGVkIE1DUCB0b29sIGRlZmluaXRpb24uXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIGZvciB0aGUgaG9zdGVkIE1DUCB0b29sLCBpbmNsdWRpbmcgc2VydmVyIGNvbm5lY3Rpb24gZGV0YWlsc1xuICogYW5kIGFwcHJvdmFsIHJlcXVpcmVtZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RlZE1jcFRvb2wob3B0aW9ucykge1xuICAgIGlmICgnc2VydmVyVXJsJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIC8vIHRoZSBNQ1Agc2VydmVycyBjb21hcHRpYmxlIHdpdGggdGhlIHNwZWNpZmljYXRpb25cbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfdXJsOiBvcHRpb25zLnNlcnZlclVybCxcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiBvcHRpb25zLmF1dGhvcml6YXRpb24sXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IG9wdGlvbnMuc2VydmVyVXJsLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKCdjb25uZWN0b3JJZCcgaW4gb3B0aW9ucykge1xuICAgICAgICAvLyBPcGVuQUkncyBjb25uZWN0b3JzXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgY29ubmVjdG9yX2lkOiBvcHRpb25zLmNvbm5lY3RvcklkLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyB0aGUgTUNQIHNlcnZlcnMgY29tYXB0aWJsZSB3aXRoIHRoZSBzcGVjaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnbmV2ZXInXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgICA6IGJ1aWxkUmVxdWlyZUFwcHJvdmFsKG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsKSxcbiAgICAgICAgICAgICAgICBvbl9hcHByb3ZhbDogb3B0aW9ucy5vbkFwcHJvdmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgcnVubmluZyB0aGUgdG9vbC5cbiAqXG4gKiBBbHdheXMgcmV0dXJucyBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6IDxlcnJvciBkZXRhaWxzPmBcbiAqXG4gKiBAcGFyYW0gY29udGV4dCBBbiBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBSdW5Db250ZXh0XG4gKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRoYXQgb2NjdXJyZWRcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRvb2xFcnJvckZ1bmN0aW9uKGNvbnRleHQsIGVycm9yKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogU3RyaW5nKGVycm9yKTtcbiAgICByZXR1cm4gYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuIFBsZWFzZSB0cnkgYWdhaW4uIEVycm9yOiAke2RldGFpbHN9YDtcbn1cbi8qKlxuICogRXhwb3NlcyBhIGZ1bmN0aW9uIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIHRoZSB0b29sXG4gKiBAcmV0dXJucyBBIG5ldyB0b29sXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgICAgID8gdG9GdW5jdGlvblRvb2xOYW1lKG9wdGlvbnMubmFtZSlcbiAgICAgICAgOiB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5leGVjdXRlLm5hbWUpO1xuICAgIGNvbnN0IHRvb2xFcnJvckZ1bmN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZXJyb3JGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb25cbiAgICAgICAgOiBvcHRpb25zLmVycm9yRnVuY3Rpb247XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eS4gRWl0aGVyIG5hbWUgeW91ciBmdW5jdGlvbiBvciBwcm92aWRlIGEgbmFtZSBpbiB0aGUgb3B0aW9ucy4nKTtcbiAgICB9XG4gICAgY29uc3Qgc3RyaWN0TW9kZSA9IG9wdGlvbnMuc3RyaWN0ID8/IHRydWU7XG4gICAgaWYgKCFzdHJpY3RNb2RlICYmIGlzWm9kT2JqZWN0KG9wdGlvbnMucGFyYW1ldGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU3RyaWN0IG1vZGUgaXMgcmVxdWlyZWQgZm9yIFpvZCBwYXJhbWV0ZXJzJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyc2VyLCBzY2hlbWE6IHBhcmFtZXRlcnMgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUob3B0aW9ucy5wYXJhbWV0ZXJzLCBuYW1lKTtcbiAgICBhc3luYyBmdW5jdGlvbiBfaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0LCBkZXRhaWxzKSB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgcGFyc2VkXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihpbnB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfTogJHtpbnB1dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZva2luZyB0b29sICR7bmFtZX0gd2l0aCBpbnB1dCAke2lucHV0fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGlvbnMuZXhlY3V0ZShwYXJzZWQsIHJ1bkNvbnRleHQsIGRldGFpbHMpO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRvb2wgJHtuYW1lfSBjb21wbGV0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IHJldHVybmVkOiAke3N0cmluZ1Jlc3VsdH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKHRvb2xFcnJvckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBydW5uaW5nIHRvb2wgKG5vbi1mYXRhbCknLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9vbEVycm9yRnVuY3Rpb24ocnVuQ29udGV4dCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgY29uc3QgaXNFbmFibGVkID0gdHlwZW9mIG9wdGlvbnMuaXNFbmFibGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gYXN5bmMgKHJ1bkNvbnRleHQsIGFnZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSBvcHRpb25zLmlzRW5hYmxlZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByZWRpY2F0ZSh7IHJ1bkNvbnRleHQsIGFnZW50IH0pO1xuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4ocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLmlzRW5hYmxlZCA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5pc0VuYWJsZWQgOiB0cnVlO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgICAgICBwYXJhbWV0ZXJzLFxuICAgICAgICBzdHJpY3Q6IHN0cmljdE1vZGUsXG4gICAgICAgIGludm9rZSxcbiAgICAgICAgbmVlZHNBcHByb3ZhbCxcbiAgICAgICAgaXNFbmFibGVkLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZFJlcXVpcmVBcHByb3ZhbChyZXF1aXJlQXBwcm92YWwpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLmFsd2F5cykge1xuICAgICAgICByZXN1bHQuYWx3YXlzID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwuYWx3YXlzLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLm5ldmVyKSB7XG4gICAgICAgIHJlc3VsdC5uZXZlciA9IHsgdG9vbF9uYW1lczogcmVxdWlyZUFwcHJvdmFsLm5ldmVyLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIoYWxsb3dlZFRvb2xzKSB7XG4gICAgaWYgKHR5cGVvZiBhbGxvd2VkVG9vbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbG93ZWRUb29scykpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzIH07XG4gICAgfVxuICAgIHJldHVybiB7IHRvb2xfbmFtZXM6IGFsbG93ZWRUb29scz8udG9vbE5hbWVzID8/IFtdIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJpbXBvcnQgeyB0b29sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IE1DUFNlcnZlclN0ZGlvIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAgYXMgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwLCBNQ1BTZXJ2ZXJTU0UgYXMgVW5kZXJseWluZ01DUFNlcnZlclNTRSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiwgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIGFzIGdsb2JhbExvZ2dlciwgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0ZGlvLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUgPSAnb3BlbmFpLWFnZW50czpzdHJlYW1hYmxlLWh0dHAtbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TU0VfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnNzZS1tY3AtY2xpZW50JztcbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RkaW8ge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NURElPX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICBjYWNoZVRvb2xzTGlzdDtcbiAgICBfY2FjaGVkVG9vbHMgPSB1bmRlZmluZWQ7XG4gICAgdG9vbEZpbHRlcjtcbiAgICBsb2dnZXI7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlciA9XG4gICAgICAgICAgICBvcHRpb25zLmxvZ2dlciA/P1xuICAgICAgICAgICAgICAgIGdldExvZ2dlcihERUZBVUxUX1NUUkVBTUFCTEVfSFRUUF9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTU0Uge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/IGdldExvZ2dlcihERUZBVUxUX1NTRV9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudG9vbEZpbHRlciA9IG9wdGlvbnMudG9vbEZpbHRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNaW5pbXVtIE1DUCB0b29sIGRhdGEgZGVmaW5pdGlvbi5cbiAqIFRoaXMgdHlwZSBkZWZpbml0aW9uIGRvZXMgbm90IGludGVuZCB0byBjb3ZlciBhbGwgcG9zc2libGUgcHJvcGVydGllcy5cbiAqIEl0IHN1cHBvcnRzIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIHVzZWQgaW4gdGhpcyBTREsuXG4gKi9cbmV4cG9ydCBjb25zdCBNQ1BUb29sID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFNjaGVtYTogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ29iamVjdCcpLFxuICAgICAgICBwcm9wZXJ0aWVzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgcmVxdWlyZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB6LmJvb2xlYW4oKSxcbiAgICB9KSxcbn0pO1xuLyoqXG4gKiBQdWJsaWMgaW50ZXJmYWNlIG9mIGFuIE1DUCBzZXJ2ZXIgdGhhdCBwcm92aWRlcyB0b29scy5cbiAqIFlvdSBjYW4gdXNlIHRoaXMgY2xhc3MgdG8gcGFzcyBNQ1Agc2VydmVyIHNldHRpbmdzIHRvIHlvdXIgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdGRpbyBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCB7XG4gICAgdW5kZXJseWluZztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBuZXcgVW5kZXJseWluZ01DUFNlcnZlclN0cmVhbWFibGVIdHRwKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNQ1BTZXJ2ZXJTU0UgZXh0ZW5kcyBCYXNlTUNQU2VydmVyU1NFIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU1NFKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5uYW1lO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgbGlzdFRvb2xzKCkge1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCAmJiB0aGlzLl9jYWNoZWRUb29scykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgdGhpcy51bmRlcmx5aW5nLmxpc3RUb29scygpO1xuICAgICAgICBpZiAodGhpcy5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVkVG9vbHMgPSB0b29scztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9vbHM7XG4gICAgfVxuICAgIGNhbGxUb29sKHRvb2xOYW1lLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9vbHNDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5pbnZhbGlkYXRlVG9vbHNDYWNoZSgpO1xuICAgIH1cbn1cbi8qKlxuICogRmV0Y2hlcyBhbmQgZmxhdHRlbnMgYWxsIHRvb2xzIGZyb20gbXVsdGlwbGUgTUNQIHNlcnZlcnMuXG4gKiBMb2dzIGFuZCBza2lwcyBhbnkgc2VydmVycyB0aGF0IGZhaWwgdG8gcmVzcG9uZC5cbiAqL1xuY29uc3QgX2NhY2hlZFRvb2xzID0ge307XG5jb25zdCBfY2FjaGVkVG9vbEtleXNCeVNlcnZlciA9IHt9O1xuLyoqXG4gKiBSZW1vdmUgY2FjaGVkIHRvb2xzIGZvciB0aGUgZ2l2ZW4gc2VydmVyIHNvIHRoZSBuZXh0IGxvb2t1cCBmZXRjaGVzIGZyZXNoIGRhdGEuXG4gKlxuICogQHBhcmFtIHNlcnZlck5hbWUgLSBOYW1lIG9mIHRoZSBNQ1Agc2VydmVyIHdob3NlIGNhY2hlIHNob3VsZCBiZSBjbGVhcmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW52YWxpZGF0ZVNlcnZlclRvb2xzQ2FjaGUoc2VydmVyTmFtZSkge1xuICAgIGNvbnN0IGNhY2hlZEtleXMgPSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICBpZiAoY2FjaGVkS2V5cykge1xuICAgICAgICBmb3IgKGNvbnN0IGNhY2hlS2V5IG9mIGNhY2hlZEtleXMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbHNbY2FjaGVLZXldO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBfY2FjaGVkVG9vbEtleXNCeVNlcnZlcltzZXJ2ZXJOYW1lXTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xuICAgIGZvciAoY29uc3QgY2FjaGVLZXkgb2YgT2JqZWN0LmtleXMoX2NhY2hlZFRvb2xzKSkge1xuICAgICAgICBpZiAoY2FjaGVLZXkuc3RhcnRzV2l0aChgJHtzZXJ2ZXJOYW1lfTpgKSkge1xuICAgICAgICAgICAgZGVsZXRlIF9jYWNoZWRUb29sc1tjYWNoZUtleV07XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIERlZmF1bHQgY2FjaGUga2V5IGdlbmVyYXRvciBmb3IgTUNQIHRvb2xzLlxuICogVXNlcyBzZXJ2ZXIgbmFtZSwgb3Igc2VydmVyK2FnZW50IGlmIHVzaW5nIGNhbGxhYmxlIGZpbHRlci5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRNQ1BUb29sQ2FjaGVLZXkgPSAoeyBzZXJ2ZXIsIGFnZW50LCB9KSA9PiB7XG4gICAgaWYgKHNlcnZlci50b29sRmlsdGVyICYmIHR5cGVvZiBzZXJ2ZXIudG9vbEZpbHRlciA9PT0gJ2Z1bmN0aW9uJyAmJiBhZ2VudCkge1xuICAgICAgICByZXR1cm4gYCR7c2VydmVyLm5hbWV9OiR7YWdlbnQubmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gc2VydmVyLm5hbWU7XG59O1xuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHsgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0LCBydW5Db250ZXh0LCBhZ2VudCwgZ2VuZXJhdGVNQ1BUb29sQ2FjaGVLZXksIH0pIHtcbiAgICBjb25zdCBjYWNoZUtleSA9IChnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSB8fCBkZWZhdWx0TUNQVG9vbENhY2hlS2V5KSh7XG4gICAgICAgIHNlcnZlcixcbiAgICAgICAgYWdlbnQsXG4gICAgICAgIHJ1bkNvbnRleHQsXG4gICAgfSk7XG4gICAgLy8gVXNlIGNhY2hlIGtleSBnZW5lcmF0b3IgaW5qZWN0ZWQgZnJvbSB0aGUgb3V0c2lkZSwgb3IgdGhlIGRlZmF1bHQgaWYgYWJzZW50LlxuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW2NhY2hlS2V5XSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW2NhY2hlS2V5XS5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgIH1cbiAgICBjb25zdCBsaXN0VG9vbHNGb3JTZXJ2ZXIgPSBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBjb25zdCBmZXRjaGVkTWNwVG9vbHMgPSBhd2FpdCBzZXJ2ZXIubGlzdFRvb2xzKCk7XG4gICAgICAgIGxldCBtY3BUb29scyA9IGZldGNoZWRNY3BUb29scztcbiAgICAgICAgaWYgKHJ1bkNvbnRleHQgJiYgYWdlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB7IHJ1bkNvbnRleHQsIGFnZW50LCBzZXJ2ZXJOYW1lOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRUb29scyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sIG9mIGZldGNoZWRNY3BUb29scykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHNlcnZlci50b29sRmlsdGVyO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gYXdhaXQgZmlsdGVyKGNvbnRleHQsIHRvb2wpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgY2FsbGFibGUgZmlsdGVyLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZFRvb2xOYW1lcyA9IGZpbHRlci5hbGxvd2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZFRvb2xOYW1lcyA9IGZpbHRlci5ibG9ja2VkVG9vbE5hbWVzID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbG93ZWRUb29sTmFtZXMubGVuZ3RoID4gMCB8fCBibG9ja2VkVG9vbE5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYWxsb3dlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja2VkID0gYmxvY2tlZFRvb2xOYW1lcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYmxvY2tlZFRvb2xOYW1lcy5pbmNsdWRlcyh0b29sLm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbGxvd2VkIHx8IGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgYmxvY2tlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghYWxsb3dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLmRlYnVnKGBNQ1AgVG9vbCAoc2VydmVyOiAke3NlcnZlci5uYW1lfSwgdG9vbDogJHt0b29sLm5hbWV9KSBpcyBub3QgYWxsb3dlZCBieSB0aGUgc3RhdGljIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsdGVyZWRUb29scy5wdXNoKHRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWNwVG9vbHMgPSBmaWx0ZXJlZFRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b29scyA9IG1jcFRvb2xzLm1hcCgodCkgPT4gbWNwVG9GdW5jdGlvblRvb2wodCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSk7XG4gICAgICAgIC8vIENhY2hlIHN0b3JlXG4gICAgICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QpIHtcbiAgICAgICAgICAgIF9jYWNoZWRUb29sc1tjYWNoZUtleV0gPSBtY3BUb29scztcbiAgICAgICAgICAgIGlmICghX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2NhY2hlZFRvb2xLZXlzQnlTZXJ2ZXJbc2VydmVyLm5hbWVdLmFkZChjYWNoZUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH07XG4gICAgaWYgKCFnZXRDdXJyZW50VHJhY2UoKSkge1xuICAgICAgICByZXR1cm4gbGlzdFRvb2xzRm9yU2VydmVyKCk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoTUNQTGlzdFRvb2xzU3BhbihsaXN0VG9vbHNGb3JTZXJ2ZXIsIHtcbiAgICAgICAgZGF0YTogeyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH0sXG4gICAgfSk7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIE1DUCB0b29scyBmcm9tIHRoZSBwcm92aWRlZCBzZXJ2ZXJzLCB1c2luZyB0aGUgZnVuY3Rpb24gdG9vbCBjb252ZXJzaW9uLlxuICogSWYgcnVuQ29udGV4dCBhbmQgYWdlbnQgYXJlIHByb3ZpZGVkLCBjYWxsYWJsZSB0b29sIGZpbHRlcnMgd2lsbCBiZSBhcHBsaWVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwVG9vbHMobWNwU2VydmVyc09yT3B0cywgcnVuQ29udGV4dCwgYWdlbnQsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IG9wdHMgPSBBcnJheS5pc0FycmF5KG1jcFNlcnZlcnNPck9wdHMpXG4gICAgICAgID8ge1xuICAgICAgICAgICAgbWNwU2VydmVyczogbWNwU2VydmVyc09yT3B0cyxcbiAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QsXG4gICAgICAgIH1cbiAgICAgICAgOiBtY3BTZXJ2ZXJzT3JPcHRzO1xuICAgIGNvbnN0IHsgbWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzID0gZmFsc2UsIHJ1bkNvbnRleHQ6IHJ1bkNvbnRleHRGcm9tT3B0cywgYWdlbnQ6IGFnZW50RnJvbU9wdHMsIGdlbmVyYXRlTUNQVG9vbENhY2hlS2V5LCB9ID0gb3B0cztcbiAgICBjb25zdCBhbGxUb29scyA9IFtdO1xuICAgIGNvbnN0IHRvb2xOYW1lcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IHNlcnZlciBvZiBtY3BTZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xzID0gYXdhaXQgZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIoe1xuICAgICAgICAgICAgc2VydmVyLFxuICAgICAgICAgICAgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzLFxuICAgICAgICAgICAgcnVuQ29udGV4dDogcnVuQ29udGV4dEZyb21PcHRzLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50RnJvbU9wdHMsXG4gICAgICAgICAgICBnZW5lcmF0ZU1DUFRvb2xDYWNoZUtleSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xOYW1lcyA9IG5ldyBTZXQoc2VydmVyVG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gWy4uLnNlcnZlclRvb2xOYW1lc10uZmlsdGVyKChuKSA9PiB0b29sTmFtZXMuaGFzKG4pKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBEdXBsaWNhdGUgdG9vbCBuYW1lcyBmb3VuZCBhY3Jvc3MgTUNQIHNlcnZlcnM6ICR7aW50ZXJzZWN0aW9uLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHNlcnZlclRvb2xzKSB7XG4gICAgICAgICAgICB0b29sTmFtZXMuYWRkKHQubmFtZSk7XG4gICAgICAgICAgICBhbGxUb29scy5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxUb29scztcbn1cbi8qKlxuICogQ29udmVydHMgYW4gTUNQIHRvb2wgZGVmaW5pdGlvbiB0byBhIGZ1bmN0aW9uIHRvb2wgZm9yIHRoZSBBZ2VudHMgU0RLLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWNwVG9GdW5jdGlvblRvb2wobWNwVG9vbCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gaW52b2tlKGlucHV0LCBfY29udGV4dCkge1xuICAgICAgICBsZXQgYXJncyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyAmJiBpbnB1dCkge1xuICAgICAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiYgaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXJncyA9IGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgICAgICBjdXJyZW50U3Bhbi5zcGFuRGF0YVsnbWNwX2RhdGEnXSA9IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBzZXJ2ZXIuY2FsbFRvb2wobWNwVG9vbC5uYW1lLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID09PSAxID8gY29udGVudFswXSA6IGNvbnRlbnQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgLi4ubWNwVG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgdHlwZTogbWNwVG9vbC5pbnB1dFNjaGVtYT8udHlwZSA/PyAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucHJvcGVydGllcyA/PyB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnJlcXVpcmVkID8/IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8uYWRkaXRpb25hbFByb3BlcnRpZXMgPz8gZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoY29udmVydFNjaGVtYXNUb1N0cmljdCB8fCBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IHRydWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmljdFNjaGVtYSA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogc3RyaWN0U2NoZW1hLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLndhcm4oYEVycm9yIGNvbnZlcnRpbmcgTUNQIHNjaGVtYSB0byBzdHJpY3QgbW9kZTogJHtlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5vblN0cmljdFNjaGVtYSA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcbiAgICB9O1xuICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgcGFyYW1ldGVyczogbm9uU3RyaWN0U2NoZW1hLFxuICAgICAgICBzdHJpY3Q6IGZhbHNlLFxuICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgfSk7XG59XG4vKipcbiAqIEVuc3VyZXMgdGhlIGdpdmVuIEpTT04gc2NoZW1hIGlzIHN0cmljdCAobm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLCByZXF1aXJlZCBmaWVsZHMgc2V0KS5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBjb25zdCBvdXQgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKCFvdXQucmVxdWlyZWQpXG4gICAgICAgIG91dC5yZXF1aXJlZCA9IFtdO1xuICAgIHJldHVybiBvdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tY3AubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG4vLyBVc2UgZnVuY3Rpb24gaW5zdGVhZCBvZiBleHBvcnRpbmcgdGhlIHZhbHVlIHRvIHByZXZlbnRcbi8vIGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVzb2x1dGlvbiBpc3N1ZXMgY2F1c2VkIGJ5IG90aGVyIGV4cG9ydHMgaW4gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJ1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0IGNsYXNzIEJyb3dzZXJFdmVudEVtaXR0ZXIge1xuICAgICN0YXJnZXQgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbiAgICAjbGlzdGVuZXJXcmFwcGVycyA9IG5ldyBNYXAoKTtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBsZXQgbGlzdGVuZXJzRm9yVHlwZSA9IHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuZ2V0KGV2ZW50VHlwZSk7XG4gICAgICAgIGlmICghbGlzdGVuZXJzRm9yVHlwZSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuc2V0KGV2ZW50VHlwZSwgbGlzdGVuZXJzRm9yVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdyYXBwZXJzID0gbGlzdGVuZXJzRm9yVHlwZS5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAoIXdyYXBwZXJzKSB7XG4gICAgICAgICAgICB3cmFwcGVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUuc2V0KGxpc3RlbmVyLCB3cmFwcGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlciA9ICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSk7XG4gICAgICAgIHdyYXBwZXJzLmFkZCh3cmFwcGVyKTtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCB3cmFwcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnNGb3JUeXBlID0gdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5nZXQoZXZlbnRUeXBlKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlcnMgPSBsaXN0ZW5lcnNGb3JUeXBlPy5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAod3JhcHBlcnM/LnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd3JhcHBlciBvZiB3cmFwcGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgd3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlPy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGU/LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNsaXN0ZW5lcldyYXBwZXJzLmRlbGV0ZShldmVudFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICB9XG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGUgPSBjbGFzcyBSZWFkYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBwaXBlVG8oX2Rlc3RpbmF0aW9uLCBfb3B0aW9ucykgeyB9XG4gICAgcGlwZVRocm91Z2goX3RyYW5zZm9ybSwgX29wdGlvbnMpIHsgfVxufTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbSA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW1Db250cm9sbGVyID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyO1xuZXhwb3J0IGNvbnN0IFRyYW5zZm9ybVN0cmVhbSA9IGdsb2JhbFRoaXMuVHJhbnNmb3JtU3RyZWFtO1xuZXhwb3J0IGNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBjb250ZXh0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHJ1bihjb250ZXh0LCBmbikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gICAgfVxuICAgIGVudGVyV2l0aChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCB7IE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC1zZXJ2ZXIvYnJvd3Nlci5tanNcIjtcbmNsYXNzIEJyb3dzZXJUaW1lciB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcykge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChjYWxsYmFjaywgbXMpO1xuICAgICAgICB0aW1lb3V0LnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQudW5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnVucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC5oYXNSZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQuaGFzUmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5oYXNSZWYgOiAoKSA9PiB0cnVlO1xuICAgICAgICB0aW1lb3V0LnJlZnJlc2ggPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmcmVzaCA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHJldHVybiB0aW1lb3V0O1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG59XG5jb25zdCB0aW1lciA9IG5ldyBCcm93c2VyVGltZXIoKTtcbmV4cG9ydCB7IHRpbWVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsImltcG9ydCB7IGxvYWRFbnYgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG5leHBvcnQgY29uc3QgT1BFTkFJX0RFRkFVTFRfTU9ERUxfRU5WX1ZBUklBQkxFX05BTUUgPSAnT1BFTkFJX0RFRkFVTFRfTU9ERUwnO1xuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIG1vZGVsIG5hbWUgaXMgYSBHUFQtNSBtb2RlbCBhbmQgcmVhc29uaW5nIHNldHRpbmdzIGFyZSByZXF1aXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKG1vZGVsTmFtZSkge1xuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aCgnZ3B0LTUtY2hhdCcpKSB7XG4gICAgICAgIC8vIGdwdC01LWNoYXQtbGF0ZXN0IGRvZXMgbm90IHJlcXVpcmUgcmVhc29uaW5nIHNldHRpbmdzXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbWF0Y2hlcyBhbnkgb2YgZ3B0LTUgbW9kZWxzXG4gICAgcmV0dXJuIG1vZGVsTmFtZS5zdGFydHNXaXRoKCdncHQtNScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbC5cbiAqIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MgYXJlIGNvbXBhdGlibGUgd2l0aCBHUFQtNSBtb2RlbHMuXG4gKiBJZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBub3QgYSBHUFQtNSBtb2RlbCwgdGhlIG1vZGVsIHNldHRpbmdzIGFyZSBjb21wYXRpYmxlIHdpdGggb3RoZXIgbW9kZWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNHcHQ1RGVmYXVsdCgpIHtcbiAgICByZXR1cm4gZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoZ2V0RGVmYXVsdE1vZGVsKCkpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWwoKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAoZW52W09QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FXT8udG9Mb3dlckNhc2UoKSA/PyAnZ3B0LTQuMScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzLlxuICogSWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbCwgcmV0dXJucyB0aGUgR1BULTUgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncy5cbiAqIE90aGVyd2lzZSwgcmV0dXJucyB0aGUgbGVnYWN5IGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncyhtb2RlbCkge1xuICAgIGNvbnN0IF9tb2RlbCA9IG1vZGVsID8/IGdldERlZmF1bHRNb2RlbCgpO1xuICAgIGlmIChncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChfbW9kZWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBXZSBjaG9zZSBcImxvd1wiIGluc3RlYWQgb2YgXCJtaW5pbWFsXCIgYmVjYXVzZSBzb21lIG9mIHRoZSBidWlsdC1pbiB0b29sc1xuICAgICAgICAgICAgLy8gKGUuZy4sIGZpbGUgc2VhcmNoLCBpbWFnZSBnZW5lcmF0aW9uLCBldGMuKSBkbyBub3Qgc3VwcG9ydCBcIm1pbmltYWxcIlxuICAgICAgICAgICAgLy8gSWYgeW91IHdhbnQgdG8gdXNlIFwibWluaW1hbFwiIHJlYXNvbmluZyBlZmZvcnQsIHlvdSBjYW4gcGFzcyB5b3VyIG93biBtb2RlbCBzZXR0aW5nc1xuICAgICAgICAgICAgcmVhc29uaW5nOiB7IGVmZm9ydDogJ2xvdycgfSxcbiAgICAgICAgICAgIHRleHQ6IHsgdmVyYm9zaXR5OiAnbG93JyB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0TW9kZWwubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmZXJNZXNzYWdlKGFnZW50KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsgYXNzaXN0YW50OiBhZ2VudC5uYW1lIH0pO1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCkge1xuICAgIHJldHVybiBgdHJhbnNmZXJfdG9fJHt0b0Z1bmN0aW9uVG9vbE5hbWUoYWdlbnQubmFtZSl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCkge1xuICAgIHJldHVybiBgSGFuZG9mZiB0byB0aGUgJHthZ2VudC5uYW1lfSBhZ2VudCB0byBoYW5kbGUgdGhlIHJlcXVlc3QuICR7YWdlbnQuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnfWA7XG59XG5leHBvcnQgY2xhc3MgSGFuZG9mZiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xOYW1lO1xuICAgIC8qKlxuICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbERlc2NyaXB0aW9uO1xuICAgIC8qKlxuICAgICAqIFRoZSBKU09OIHNjaGVtYSBmb3IgdGhlIGhhbmRvZmYgaW5wdXQuIENhbiBiZSBlbXB0eSBpZiB0aGUgaGFuZG9mZiBkb2VzIG5vdCB0YWtlIGFuIGlucHV0XG4gICAgICovXG4gICAgaW5wdXRKc29uU2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgIHJlcXVpcmVkOiBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgaW5wdXQgSlNPTiBzY2hlbWEgaXMgaW4gc3RyaWN0IG1vZGUuIFdlICoqc3Ryb25nbHkqKiByZWNvbW1lbmQgc2V0dGluZyB0aGlzIHRvXG4gICAgICogdHJ1ZSwgYXMgaXQgaW5jcmVhc2VzIHRoZSBsaWtlbGlob29kIG9mIGNvcnJlY3QgSlNPTiBpbnB1dC5cbiAgICAgKi9cbiAgICBzdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBoYW5kb2ZmLiBUaGUgcGFyYW1ldGVycyBwYXNzZWQgYXJlOlxuICAgICAqIDEuIFRoZSBoYW5kb2ZmIHJ1biBjb250ZXh0XG4gICAgICogMi4gVGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBMTE0sIGFzIGEgSlNPTiBzdHJpbmcuIEVtcHR5IHN0cmluZyBpZiBpbnB1dEpzb25TY2hlbWEgaXMgZW1wdHkuXG4gICAgICpcbiAgICAgKiBNdXN0IHJldHVybiBhbiBhZ2VudFxuICAgICAqL1xuICAgIG9uSW52b2tlSGFuZG9mZjtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50TmFtZTtcbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyB0aGUgaW5wdXRzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgbmV4dCBhZ2VudC4gQnkgZGVmYXVsdCwgdGhlIG5ldyBhZ2VudFxuICAgICAqIHNlZXMgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gc29tZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGZpbHRlciBpbnB1dHMgZS5nLiB0b1xuICAgICAqIHJlbW92ZSBvbGRlciBpbnB1dHMsIG9yIHJlbW92ZSB0b29scyBmcm9tIGV4aXN0aW5nIGlucHV0cy5cbiAgICAgKlxuICAgICAqIFRoZSBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzc3Rvcnkgc28gZmFyLCBpbmNsdWRpbmcgdGhlIGlucHV0IGl0ZW1cbiAgICAgKiB0aGF0IHRyaWdnZXJlZCB0aGUgaGFuZG9mZiBhbmQgYSB0b29sIGNhbGwgb3V0cHV0IGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBoYW5kb2ZmIHRvb2wncyBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBZb3UgYXJlIGZyZWUgdG8gbW9kaWZ5IHRoZSBpbnB1dCBoaXN0b3J5IG9yIG5ldyBpdGVtcyBhcyB5b3Ugc2VlIGZpdC4gVGhlIG5leHQgYWdlbnQgdGhhdCBydW5zXG4gICAgICogd2lsbCByZWNlaXZlIGBoYW5kb2ZmSW5wdXREYXRhLmFsbEl0ZW1zXG4gICAgICovXG4gICAgaW5wdXRGaWx0ZXI7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudDtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG9vbCBkZWZpbml0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW52b2tlIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIGdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdGhpcy5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgICAgICBzdHJpY3Q6IHRoaXMuc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNFbmFibGVkID0gYXN5bmMgKCkgPT4gdHJ1ZTtcbiAgICBjb25zdHJ1Y3RvcihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKSB7XG4gICAgICAgIHRoaXMuYWdlbnROYW1lID0gYWdlbnQubmFtZTtcbiAgICAgICAgdGhpcy5vbkludm9rZUhhbmRvZmYgPSBvbkludm9rZUhhbmRvZmY7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KTtcbiAgICAgICAgdGhpcy50b29sRGVzY3JpcHRpb24gPSBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCk7XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBoYW5kb2ZmIGZyb20gYW4gYWdlbnQuIEhhbmRvZmZzIGFyZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgd2hlbiB5b3UgcGFzcyBhbiBhZ2VudFxuICogaW50byB0aGUgYGhhbmRvZmZzYCBvcHRpb24gb2YgdGhlIGBBZ2VudGAgY29uc3RydWN0b3IuIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb25cbiAqIHRvIGNyZWF0ZSBhIGhhbmRvZmYgbWFudWFsbHksIGdpdmluZyB5b3UgbW9yZSBjb250cm9sIG92ZXIgY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVENvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRJbnB1dFR5cGUgVGhlIGlucHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRvZmYoYWdlbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IHBhcnNlciA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBoYXNPbkhhbmRvZmYgPSAhIWNvbmZpZy5vbkhhbmRvZmY7XG4gICAgY29uc3QgaGFzSW5wdXRUeXBlID0gISFjb25maWcuaW5wdXRUeXBlO1xuICAgIGNvbnN0IGhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlID0gaGFzT25IYW5kb2ZmID09PSBoYXNJbnB1dFR5cGU7XG4gICAgaWYgKCFoYXNCb3RoT3JOZWl0aGVySGFuZG9mZkFuZElucHV0VHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdZb3UgbXVzdCBwcm92aWRlIGVpdGhlciBib3RoIGBvbkhhbmRvZmZgIGFuZCBgaW5wdXRUeXBlYCBvciBuZWl0aGVyLicpO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBvbkludm9rZUhhbmRvZmYoY29udGV4dCwgaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgIGlmIChwYXJzZXIpIHtcbiAgICAgICAgICAgIGlmICghaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEhhbmRvZmYgZnVuY3Rpb24gZXhwZWN0ZWQgbm9uIGVtcHR5IGlucHV0IGJ1dCBnb3Q6ICR7aW5wdXRKc29uU3RyaW5nfWAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IGBpbnB1dCBpcyBlbXB0eWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gdmVyaWZ5IHRoYXQgaXQncyB2YWxpZCBpbnB1dCBidXQgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VyKGlucHV0SnNvblN0cmluZyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5vbkhhbmRvZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZihjb250ZXh0LCBwYXJzZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIEpTT04gcHJvdmlkZWRgLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBJbnZhbGlkIEpTT04gd2hlbiBwYXJzaW5nOiAke2lucHV0SnNvblN0cmluZ30uIEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIEpTT04gcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbmZpZy5vbkhhbmRvZmY/Lihjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIGNvbnN0IGhhbmRvZmYgPSBuZXcgSGFuZG9mZihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKTtcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5pc0VuYWJsZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3QgcHJlZGljYXRlID0gY29uZmlnLmlzRW5hYmxlZDtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoeyBydW5Db250ZXh0LCBhZ2VudCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmVkaWNhdGUoeyBydW5Db250ZXh0LCBhZ2VudCB9KTtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWcuaXNFbmFibGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoKSA9PiBjb25maWcuaXNFbmFibGVkO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmlucHV0VHlwZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGNvbmZpZy5pbnB1dFR5cGUsIGhhbmRvZmYudG9vbE5hbWUpO1xuICAgICAgICBoYW5kb2ZmLmlucHV0SnNvblNjaGVtYSA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgIGhhbmRvZmYuc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgICAgIHBhcnNlciA9IHJlc3VsdC5wYXJzZXI7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbE5hbWVPdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xOYW1lID0gY29uZmlnLnRvb2xOYW1lT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGUpIHtcbiAgICAgICAgaGFuZG9mZi50b29sRGVzY3JpcHRpb24gPSBjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgaGFuZG9mZi5pbnB1dEZpbHRlciA9IGNvbmZpZy5pbnB1dEZpbHRlcjtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmY7XG59XG4vKipcbiAqIFJldHVybnMgYSBoYW5kb2ZmIGZvciB0aGUgZ2l2ZW4gYWdlbnQuIElmIHRoZSBhZ2VudCBpcyBhbHJlYWR5IHdyYXBwZWQgaW50byBhIGhhbmRvZmYsXG4gKiBpdCB3aWxsIGJlIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGEgbmV3IGhhbmRvZmYgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIYW5kb2ZmKGFnZW50KSB7XG4gICAgaWYgKGFnZW50IGluc3RhbmNlb2YgSGFuZG9mZikge1xuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIHJldHVybiBoYW5kb2ZmKGFnZW50KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhbmRvZmYubWpzLm1hcCIsIi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0TWVzc2FnZVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0TWVzc2FnZSkge1xuICAgIGlmIChvdXRwdXRNZXNzYWdlLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAob3V0cHV0TWVzc2FnZS5yb2xlICE9PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0SXRlbSA9IG91dHB1dE1lc3NhZ2UuY29udGVudFtvdXRwdXRNZXNzYWdlLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RJdGVtLnR5cGUgIT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RJdGVtLnRleHQ7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gdGhlIG91dHB1dCBtZXNzYWdlLlxuICogQHBhcmFtIG91dHB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE91dHB1dFRleHQob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC5vdXRwdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIChnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG91dHB1dC5vdXRwdXRbb3V0cHV0Lm91dHB1dC5sZW5ndGggLSAxXSkgfHwgJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MsIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkLCBpc0dwdDVEZWZhdWx0LCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGdldEhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vLyBQZXItcHJvY2VzcywgZXBoZW1lcmFsIG1hcCBsaW5raW5nIGEgZnVuY3Rpb24gdG9vbCBjYWxsIHRvIGl0cyBuZXN0ZWRcbi8vIEFnZW50IHJ1biByZXN1bHQgd2l0aGluIHRoZSBzYW1lIHJ1bjsgZW50cnkgaXMgcmVtb3ZlZCBhZnRlciBjb25zdW1wdGlvbi5cbmNvbnN0IGFnZW50VG9vbFJ1blJlc3VsdHMgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbENhbGwsIHJ1blJlc3VsdCkge1xuICAgIGlmICh0b29sQ2FsbCkge1xuICAgICAgICBhZ2VudFRvb2xSdW5SZXN1bHRzLnNldCh0b29sQ2FsbCwgcnVuUmVzdWx0KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sQ2FsbCkge1xuICAgIGNvbnN0IHJ1blJlc3VsdCA9IGFnZW50VG9vbFJ1blJlc3VsdHMuZ2V0KHRvb2xDYWxsKTtcbiAgICBpZiAocnVuUmVzdWx0KSB7XG4gICAgICAgIGFnZW50VG9vbFJ1blJlc3VsdHMuZGVsZXRlKHRvb2xDYWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1blJlc3VsdDtcbn1cbi8vIFRoZSBwYXJhbWV0ZXIgdHlwZSBmbyBuZWVkQXBwcm92YWwgZnVuY3Rpb24gZm9yIHRoZSB0b29sIGNyZWF0ZWQgYnkgQWdlbnQuYXNUb29sKCkgbWV0aG9kXG5jb25zdCBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSA9IHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkgfSk7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBERUZBVUxUX01PREVMX1BMQUNFSE9MREVSID0gJyc7XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgcHJvbXB0O1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIF90b29sc0V4cGxpY2l0bHlDb25maWd1cmVkO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBjb25maWcucHJvbXB0O1xuICAgICAgICB0aGlzLmhhbmRvZmZEZXNjcmlwdGlvbiA9IGNvbmZpZy5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZnMgPSBjb25maWcuaGFuZG9mZnMgPz8gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgPz8gJyc7XG4gICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IGNvbmZpZy5tb2RlbFNldHRpbmdzID8/IGdldERlZmF1bHRNb2RlbFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudG9vbHMgPSBjb25maWcudG9vbHMgPz8gW107XG4gICAgICAgIHRoaXMuX3Rvb2xzRXhwbGljaXRseUNvbmZpZ3VyZWQgPSBjb25maWcudG9vbHMgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5tY3BTZXJ2ZXJzID0gY29uZmlnLm1jcFNlcnZlcnMgPz8gW107XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxzID0gY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxzID0gY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIGlmIChjb25maWcub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUeXBlID0gY29uZmlnLm91dHB1dFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b29sVXNlQmVoYXZpb3IgPSBjb25maWcudG9vbFVzZUJlaGF2aW9yID8/ICdydW5fbGxtX2FnYWluJztcbiAgICAgICAgdGhpcy5yZXNldFRvb2xDaG9pY2UgPSBjb25maWcucmVzZXRUb29sQ2hvaWNlID8/IHRydWU7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gVGhlIHVzZXIgc2V0cyBhIG5vbi1kZWZhdWx0IG1vZGVsXG4gICAgICAgIGNvbmZpZy5tb2RlbCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBpcyBncHQtNVxuICAgICAgICAgICAgaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgc3BlY2lmaWVkIG1vZGVsIGlzIG5vdCBhIGdwdC01IG1vZGVsXG4gICAgICAgICAgICAodHlwZW9mIGNvbmZpZy5tb2RlbCAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgICAgICAhZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoY29uZmlnLm1vZGVsKSkgJiZcbiAgICAgICAgICAgIC8vIFRoZSBtb2RlbCBzZXR0aW5ncyBhcmUgbm90IGN1c3RvbWl6ZWQgZm9yIHRoZSBzcGVjaWZpZWQgbW9kZWxcbiAgICAgICAgICAgIGNvbmZpZy5tb2RlbFNldHRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgc2NlbmFyaW8sIHdlIHNob3VsZCB1c2UgYSBnZW5lcmljIG1vZGVsIHNldHRpbmdzXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG5vbi1ncHQtNSBtb2RlbHMgYXJlIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIGRlZmF1bHQgZ3B0LTUgbW9kZWwgc2V0dGluZ3MuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgYmVzdC1lZmZvcnQgYXR0ZW1wdCB0byBtYWtlIHRoZSBhZ2VudCB3b3JrIHdpdGggbm9uLWdwdC01IG1vZGVscy5cbiAgICAgICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBSdW50aW1lIHdhcm5pbmcgZm9yIGhhbmRvZmYgb3V0cHV0IHR5cGUgY29tcGF0aWJpbGl0eSAtLS1cbiAgICAgICAgaWYgKGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYW5kb2ZmcyAmJiB0aGlzLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRUeXBlcyA9IG5ldyBTZXQoW0pTT04uc3RyaW5naWZ5KHRoaXMub3V0cHV0VHlwZSldKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGggb2YgdGhpcy5oYW5kb2Zmcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJ291dHB1dFR5cGUnIGluIGggJiYgaC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2FnZW50JyBpbiBoICYmIGguYWdlbnQub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGguYWdlbnQub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRUeXBlcy5zaXplID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgW0FnZW50XSBXYXJuaW5nOiBIYW5kb2ZmIGFnZW50cyBoYXZlIGRpZmZlcmVudCBvdXRwdXQgdHlwZXM6ICR7QXJyYXkuZnJvbShvdXRwdXRUeXBlcykuam9pbignLCAnKX0uIFlvdSBjYW4gbWFrZSBpdCB0eXBlLXNhZmUgYnkgdXNpbmcgQWdlbnQuY3JlYXRlKHsgLi4uIH0pIG1ldGhvZCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXRwdXQgc2NoZW1hIG5hbWUuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dFNjaGVtYU5hbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLm91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgcmV0dXJuICd0ZXh0JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1pvZE9iamVjdCh0aGlzLm91dHB1dFR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1pvZE91dHB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRoaXMub3V0cHV0VHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dFR5cGUubmFtZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3V0cHV0IHR5cGU6ICR7dGhpcy5vdXRwdXRUeXBlfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGFnZW50LCB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMgY2hhbmdlZC4gRm9yIGV4YW1wbGUsIHlvdSBjb3VsZCBkbzpcbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqIGNvbnN0IG5ld0FnZW50ID0gYWdlbnQuY2xvbmUoeyBpbnN0cnVjdGlvbnM6ICdOZXcgaW5zdHJ1Y3Rpb25zJyB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIEEgcGFydGlhbCBjb25maWd1cmF0aW9uIHRvIGNoYW5nZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBhZ2VudCB3aXRoIHRoZSBnaXZlbiBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGNsb25lKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IEFnZW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMsXG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhpcyBhZ2VudCBpbnRvIGEgdG9vbCwgY2FsbGFibGUgYnkgb3RoZXIgYWdlbnRzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSBoYW5kb2ZmcyBpbiB0d28gd2F5czpcbiAgICAgKiAxLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCByZWNlaXZlcyB0aGUgY29udmVyc2F0aW9uIGhpc3RvcnkuIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudFxuICAgICAqICAgIHJlY2VpdmVzIGdlbmVyYXRlZCBpbnB1dC5cbiAgICAgKiAyLiBJbiBoYW5kb2ZmcywgdGhlIG5ldyBhZ2VudCB0YWtlcyBvdmVyIHRoZSBjb252ZXJzYXRpb24uIEluIHRoaXMgdG9vbCwgdGhlIG5ldyBhZ2VudCBpc1xuICAgICAqICAgIGNhbGxlZCBhcyBhIHRvb2wsIGFuZCB0aGUgY29udmVyc2F0aW9uIGlzIGNvbnRpbnVlZCBieSB0aGUgb3JpZ2luYWwgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSB0b29sLlxuICAgICAqIEByZXR1cm5zIEEgdG9vbCB0aGF0IHJ1bnMgdGhlIGFnZW50IGFuZCByZXR1cm5zIHRoZSBvdXRwdXQgdGV4dC5cbiAgICAgKi9cbiAgICBhc1Rvb2wob3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IHRvb2xOYW1lLCB0b29sRGVzY3JpcHRpb24sIGN1c3RvbU91dHB1dEV4dHJhY3RvciwgbmVlZHNBcHByb3ZhbCwgcnVuQ29uZmlnLCBydW5PcHRpb25zLCBpc0VuYWJsZWQsIG9uU3RyZWFtLCB9ID0gb3B0aW9ucztcbiAgICAgICAgLy8gRXZlbnQgaGFuZGxlcnMgYXJlIHNjb3BlZCB0byB0aGlzIGFnZW50IHRvb2wgaW5zdGFuY2UgYW5kIGFyZSBub3Qgc2hhcmVkOyB3ZSBvbmx5IHN1cHBvcnQgcmVnaXN0cmF0aW9uIChubyByZW1vdmFsKSB0byBrZWVwIHRoZSBBUEkgc3VyZmFjZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgZW1pdEV2ZW50ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBpbnRlbnRpb25hbGx5IGtlZXAgb25seSBhZGQgc2VtYW50aWNzIChubyBvZmYpIHRvIHJlZHVjZSBzdXJmYWNlIGFyZWE7IGhhbmRsZXJzIGFyZSBzY29wZWQgdG8gdGhpcyBhZ2VudCB0b29sIGluc3RhbmNlLlxuICAgICAgICAgICAgY29uc3Qgc3BlY2lmaWMgPSBldmVudEhhbmRsZXJzLmdldChldmVudC5ldmVudC50eXBlKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbGRjYXJkID0gZXZlbnRIYW5kbGVycy5nZXQoJyonKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXG4gICAgICAgICAgICAgICAgLi4uKG9uU3RyZWFtID8gW29uU3RyZWFtXSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4oc3BlY2lmaWMgPyBBcnJheS5mcm9tKHNwZWNpZmljKSA6IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4od2lsZGNhcmQgPyBBcnJheS5mcm9tKHdpbGRjYXJkKSA6IFtdKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvLyBSdW4gYWxsIGhhbmRsZXJzIGluIHBhcmFsbGVsIHNvIGEgc2xvdyBvblN0cmVhbSBjYWxsYmFjayBkb2VzIG5vdCBibG9jayBvbiguLi4pIGhhbmRsZXJzIChhbmQgdmljZSB2ZXJzYSkuXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoY2FuZGlkYXRlcy5tYXAoKGhhbmRsZXIpID0+IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gaGFuZGxlcihldmVudCkpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGJhc2VUb29sID0gdG9vbCh7XG4gICAgICAgICAgICBuYW1lOiB0b29sTmFtZSA/PyB0b0Z1bmN0aW9uVG9vbE5hbWUodGhpcy5uYW1lKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sRGVzY3JpcHRpb24gPz8gJycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIG5lZWRzQXBwcm92YWwsXG4gICAgICAgICAgICBpc0VuYWJsZWQsXG4gICAgICAgICAgICBleGVjdXRlOiBhc3luYyAoZGF0YSwgY29udGV4dCwgZGV0YWlscykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNBZ2VudFRvb2xJbnB1dChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdBZ2VudCB0b29sIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcnVubmVyID0gbmV3IFJ1bm5lcihydW5Db25maWcgPz8ge30pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgZmxpcCB0byBzdHJlYW1pbmcgbW9kZSB3aGVuIGEgaGFuZGxlciBpcyBwcm92aWRlZCB0byBhdm9pZCBleHRyYSBvdmVyaGVhZCBmb3IgY2FsbGVycyB0aGF0IGRvIG5vdCBuZWVkIGV2ZW50cy5cbiAgICAgICAgICAgICAgICAvLyBGbGlwIHRvIHN0cmVhbWluZyBpZiBlaXRoZXIgYSBsZWdhY3kgb25TdHJlYW0gY2FsbGJhY2sgb3IgZXZlbnQgaGFuZGxlcnMgYXJlIHJlZ2lzdGVyZWQ7IG90aGVyd2lzZSBzdGF5IG9uIHRoZSBub24tc3RyZWFtIHBhdGggdG8gYXZvaWQgZXh0cmEgb3ZlcmhlYWQuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RyZWFtID0gdHlwZW9mIG9uU3RyZWFtID09PSAnZnVuY3Rpb24nIHx8IGV2ZW50SGFuZGxlcnMuc2l6ZSA+IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2hvdWxkU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgcnVubmVyLnJ1bih0aGlzLCBkYXRhLmlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHJ1bk9wdGlvbnMgPz8ge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA6IGF3YWl0IHJ1bm5lci5ydW4odGhpcywgZGF0YS5pbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihydW5PcHRpb25zID8/IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWdlbnROYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIC8vIFRvb2wgY2FsbHMgc2hvdWxkIGNhcnJ5IElEcywgYnV0IGRpcmVjdCBpbnZvY2F0aW9uIG9yIHByb3ZpZGVyIHF1aXJrcyBjYW4gb21pdCBpdCwgc28ga2VlcCB0aGlzIG9wdGlvbmFsLlxuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiBkZXRhaWxzPy50b29sQ2FsbD8uY2FsbElkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDYXN0IHRocm91Z2ggdW5rbm93bjogdGhlIGFzeW5jIGl0ZXJhdG9yIHNoYXBlIG1hdGNoZXMgYW5kIHdlIHdhbnQgdG8gZHJhaW4gdGhlIHN0cmVhbSBmb3Igc2lkZSBlZmZlY3RzIHdoaWxlIGtlZXBpbmcgdGhlIHB1YmxpYyBBUEkgc3RhYmxlLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJlYW1SZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIERyYWluIHRoZSBzdHJlYW0gdG8gZGVsaXZlciBldmVyeSBldmVudCB0byByZWdpc3RlcmVkIGhhbmRsZXJzOyBlbnN1cmUgY29tcGxldGlvbiBhd2FpdGVkIHNvIHRoZSBuZXN0ZWQgcnVuIGZpbmlzaGVzIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbWl0RXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnN0cmVhbVBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdHJlYW1SZXN1bHQuY29tcGxldGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlc1N0b3BBdFRvb2xOYW1lcyA9IHR5cGVvZiB0aGlzLnRvb2xVc2VCZWhhdmlvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b29sVXNlQmVoYXZpb3IgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgJ3N0b3BBdFRvb2xOYW1lcycgaW4gdGhpcy50b29sVXNlQmVoYXZpb3I7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21PdXRwdXRFeHRyYWN0b3IgIT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgICAgICAgICAgdXNlc1N0b3BBdFRvb2xOYW1lcykge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFlvdSdyZSBwYXNzaW5nIHRoZSBhZ2VudCAobmFtZTogJHt0aGlzLm5hbWV9KSB3aXRoIHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMgY29uZmlndXJlZCBhcyBhIHRvb2wgdG8gYSBkaWZmZXJlbnQgYWdlbnQ7IHRoaXMgbWF5IG5vdCB3b3JrIGFzIHlvdSBleHBlY3QuIFlvdSBtYXkgd2FudCB0byBoYXZlIGEgd3JhcHBlciBmdW5jdGlvbiB0b29sIHRvIGNvbnNpc3RlbnRseSByZXR1cm4gdGhlIGZpbmFsIG91dHB1dC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0VGV4dCA9IHR5cGVvZiBjdXN0b21PdXRwdXRFeHRyYWN0b3IgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyBhd2FpdCBjdXN0b21PdXRwdXRFeHRyYWN0b3IoY29tcGxldGVkUmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICA6IGdldE91dHB1dFRleHQoY29tcGxldGVkUmVzdWx0LnJhd1Jlc3BvbnNlc1tjb21wbGV0ZWRSZXN1bHQucmF3UmVzcG9uc2VzLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlscz8udG9vbENhbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUFnZW50VG9vbFJ1blJlc3VsdChkZXRhaWxzLnRvb2xDYWxsLCBjb21wbGV0ZWRSZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0VGV4dDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhZ2VudFRvb2wgPSB7XG4gICAgICAgICAgICAuLi5iYXNlVG9vbCxcbiAgICAgICAgICAgIG9uOiAobmFtZSwgaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNldCA9IGV2ZW50SGFuZGxlcnMuZ2V0KG5hbWUpID8/IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICBzZXQuYWRkKGhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIGV2ZW50SGFuZGxlcnMuc2V0KG5hbWUsIHNldCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFnZW50VG9vbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBhZ2VudFRvb2w7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHN5c3RlbSBwcm9tcHQgZm9yIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgaW5zdHJ1Y3Rpb25zLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFN5c3RlbVByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbnN0cnVjdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluc3RydWN0aW9ucyhydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb21wdCB0ZW1wbGF0ZSBmb3IgdGhlIGFnZW50LCBpZiBkZWZpbmVkLlxuICAgICAqXG4gICAgICogSWYgdGhlIGFnZW50IGhhcyBhIGZ1bmN0aW9uIGFzIGl0cyBwcm9tcHQsIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGVcbiAgICAgKiBydW5Db250ZXh0IGFuZCB0aGUgYWdlbnQgaW5zdGFuY2UuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UHJvbXB0KHJ1bkNvbnRleHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb21wdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvbXB0KHJ1bkNvbnRleHQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb21wdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgYXZhaWxhYmxlIHRvb2xzIGZyb20gdGhlIE1DUCBzZXJ2ZXJzLlxuICAgICAqIEByZXR1cm5zIHRoZSBNQ1AgcG93ZXJlZCB0b29sc1xuICAgICAqL1xuICAgIGFzeW5jIGdldE1jcFRvb2xzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMubWNwU2VydmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0QWxsTWNwVG9vbHMoe1xuICAgICAgICAgICAgICAgIG1jcFNlcnZlcnM6IHRoaXMubWNwU2VydmVycyxcbiAgICAgICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgICAgIGFnZW50OiB0aGlzLFxuICAgICAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3Q6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBTGwgYWdlbnQgdG9vbHMsIGluY2x1ZGluZyB0aGUgTUNQbCBhbmQgZnVuY3Rpb24gdG9vbHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbGwgY29uZmlndXJlZCB0b29sc1xuICAgICAqL1xuICAgIGFzeW5jIGdldEFsbFRvb2xzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgbWNwVG9vbHMgPSBhd2FpdCB0aGlzLmdldE1jcFRvb2xzKHJ1bkNvbnRleHQpO1xuICAgICAgICBjb25zdCBlbmFibGVkVG9vbHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgdGhpcy50b29scykge1xuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF5YmVJc0VuYWJsZWQgPSBjYW5kaWRhdGUuaXNFbmFibGVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuYWJsZWQgPSB0eXBlb2YgbWF5YmVJc0VuYWJsZWQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyBhd2FpdCBtYXliZUlzRW5hYmxlZChydW5Db250ZXh0LCB0aGlzKVxuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBtYXliZUlzRW5hYmxlZCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG1heWJlSXNFbmFibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFlbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVuYWJsZWRUb29scy5wdXNoKGNhbmRpZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5tY3BUb29scywgLi4uZW5hYmxlZFRvb2xzXTtcbiAgICB9XG4gICAgaGFzRXhwbGljaXRUb29sQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9vbHNFeHBsaWNpdGx5Q29uZmlndXJlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaGFuZG9mZnMgdGhhdCBzaG91bGQgYmUgZXhwb3NlZCB0byB0aGUgbW9kZWwgZm9yIHRoZSBjdXJyZW50IHJ1bi5cbiAgICAgKlxuICAgICAqIEhhbmRvZmZzIHRoYXQgcHJvdmlkZSBhbiBgaXNFbmFibGVkYCBmdW5jdGlvbiByZXR1cm5pbmcgYGZhbHNlYCBhcmUgb21pdHRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRFbmFibGVkSGFuZG9mZnMocnVuQ29udGV4dCkge1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IHRoaXMuaGFuZG9mZnM/Lm1hcCgoaCkgPT4gZ2V0SGFuZG9mZihoKSkgPz8gW107XG4gICAgICAgIGNvbnN0IGVuYWJsZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kb2ZmIG9mIGhhbmRvZmZzKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgaGFuZG9mZi5pc0VuYWJsZWQoeyBydW5Db250ZXh0LCBhZ2VudDogdGhpcyB9KSkge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQucHVzaChoYW5kb2ZmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJzZWQgb3V0LlxuICAgICAqL1xuICAgIHByb2Nlc3NGaW5hbE91dHB1dChvdXRwdXQpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShvdXRwdXQpO1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRUeXBlLnBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBhZ2VudCwgd2hpY2ggaXMgc2VyaWFsaXphYmxlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSBhZ2VudCdzIG5hbWUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFnZW50Lm1qcy5tYXAiLCIvKipcbiAqIERlZmluZXMgYW4gaW5wdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVJbnB1dEd1YXJkcmFpbCh7IG5hbWUsIGV4ZWN1dGUsIHJ1bkluUGFyYWxsZWwgPSB0cnVlLCB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2lucHV0JyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgcnVuSW5QYXJhbGxlbCxcbiAgICAgICAgZ3VhcmRyYWlsRnVuY3Rpb246IGV4ZWN1dGUsXG4gICAgICAgIGFzeW5jIHJ1bihhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyB0eXBlOiAnaW5wdXQnLCBuYW1lIH0sXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBhd2FpdCBleGVjdXRlKGFyZ3MpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIG91dHB1dCBndWFyZHJhaWwgZGVmaW5pdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZU91dHB1dEd1YXJkcmFpbCh7IG5hbWUsIGV4ZWN1dGUsIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnb3V0cHV0JyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZ3VhcmRyYWlsRnVuY3Rpb246IGV4ZWN1dGUsXG4gICAgICAgIGFzeW5jIHJ1bihhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyB0eXBlOiAnb3V0cHV0JywgbmFtZSB9LFxuICAgICAgICAgICAgICAgIGFnZW50OiBhcmdzLmFnZW50LFxuICAgICAgICAgICAgICAgIGFnZW50T3V0cHV0OiBhcmdzLmFnZW50T3V0cHV0LFxuICAgICAgICAgICAgICAgIG91dHB1dDogYXdhaXQgZXhlY3V0ZShhcmdzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWd1YXJkcmFpbC5tanMubWFwIiwibGV0IERFRkFVTFRfUFJPVklERVI7XG4vKipcbiAqIFNldCB0aGUgbW9kZWwgcHJvdmlkZXIgdXNlZCB3aGVuIG5vIGV4cGxpY2l0IHByb3ZpZGVyIGlzIHN1cHBsaWVkLlxuICpcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byB1c2UgYnkgZGVmYXVsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgREVGQVVMVF9QUk9WSURFUiA9IHByb3ZpZGVyO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICpcbiAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIoKSB7XG4gICAgaWYgKHR5cGVvZiBERUZBVUxUX1BST1ZJREVSID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIgc2V0LiBNYWtlIHN1cmUgdG8gc2V0IGEgcHJvdmlkZXIgdXNpbmcgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgYmVmb3JlIGNhbGxpbmcgZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgb3IgcGFzcyBhbiBleHBsaWNpdCBwcm92aWRlci4nKTtcbiAgICB9XG4gICAgcmV0dXJuIERFRkFVTFRfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlcnMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU2hhcmVkIGJhc2UgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlcnkgaXRlbSBpbiB0aGUgcHJvdG9jb2wgcHJvdmlkZXMgYSBgcHJvdmlkZXJEYXRhYCBmaWVsZCB0byBhY2NvbW1vZGF0ZSBjdXN0b20gZnVuY3Rpb25hbGl0eVxuICogb3IgbmV3IGZpZWxkc1xuICovXG5leHBvcnQgY29uc3QgU2hhcmVkQmFzZSA9IHoub2JqZWN0KHtcbiAgICAvKipcbiAgICAgKiBBZGRpdGlvbmFsIG9wdGlvbmFsIHByb3ZpZGVyIHNwZWNpZmljIGRhdGEuIFVzZWQgZm9yIGN1c3RvbSBmdW5jdGlvbmFsaXR5IG9yIG1vZGVsIHByb3ZpZGVyXG4gICAgICogc3BlY2lmaWMgZmllbGRzLlxuICAgICAqL1xuICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbn0pO1xuLyoqXG4gKiBFdmVyeSBpdGVtIGhhcyBhIHNoYXJlZCBvZiBzaGFyZWQgaXRlbSBkYXRhIGluY2x1ZGluZyBhbiBvcHRpb25hbCBJRC5cbiAqL1xuZXhwb3J0IGNvbnN0IEl0ZW1CYXNlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEFuIElEIHRvIGlkZW50aWZ5IHRoZSBpdGVtLiBUaGlzIGlzIG9wdGlvbmFsIGJ5IGRlZmF1bHQuIElmIGEgbW9kZWwgcHJvdmlkZXIgYWJzb2x1dGVseVxuICAgICAqIHJlcXVpcmVzIHRoaXMgZmllbGQsIGl0IHdpbGwgYmUgdmFsaWRhdGVkIG9uIHRoZSBtb2RlbCBsZXZlbC5cbiAgICAgKi9cbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBDb250ZW50IHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgUmVmdXNhbCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlZnVzYWwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcmVmdXNhbCBleHBsYW5hdGlvbiBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICByZWZ1c2FsOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgT3V0cHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0JyksXG4gICAgLyoqXG4gICAgICogVGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbnB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksXG4gICAgLyoqXG4gICAgICogQSB0ZXh0IGlucHV0IGZvciBleGFtcGxlIGEgbWVzc2FnZSBmcm9tIGEgdXNlclxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBSZWFzb25pbmdUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVhc29uaW5nX3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBBIHRleHQgaW5wdXQgZm9yIGV4YW1wbGUgYSBtZXNzYWdlIGZyb20gYSB1c2VyXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9pbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIHByb3ZpZGVkIGlubGluZSAoYGltYWdlYCksIGFzIGEgVVJMLCBvciBieSByZWZlcmVuY2UgdG8gYVxuICAgICAqIHByZXZpb3VzbHkgdXBsb2FkZWQgT3BlbkFJIGZpbGUuXG4gICAgICovXG4gICAgaW1hZ2U6IHpcbiAgICAgICAgLy8gMS4gaW1hZ2UgZGF0YVxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLy8gMi5maWxlIElEIGZvciB0aGUgaW1hZ2VcbiAgICAgICAgLm9yKHoub2JqZWN0KHsgaWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEJykgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnRWl0aGVyIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEsIGEgZGF0YSBVUkwsIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgbGV2ZWwgb2YgZGV0YWlsIHJlcXVlc3RlZCBmb3IgaW1hZ2UgdW5kZXJzdGFuZGluZyB0YXNrcy5cbiAgICAgKiBGdXR1cmUgbW9kZWxzIG1heSBhZGQgbmV3IHZhbHVlcywgdGhlcmVmb3JlIHRoaXMgYWNjZXB0cyBhbnkgc3RyaW5nLlxuICAgICAqL1xuICAgIGRldGFpbDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRGaWxlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfZmlsZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWxlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgcmF3IGRhdGEsIGEgVVJMLCBvciBhbiBPcGVuQUkgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBmaWxlOiB6XG4gICAgICAgIC8vIDEuIGZpbGUgZGF0YVxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdFaXRoZXIgYmFzZTY0IGVuY29kZWQgZmlsZSBkYXRhIG9yIGEgcHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTCcpXG4gICAgICAgIC8vIDIuIGZpbGUgSURcbiAgICAgICAgLm9yKHoub2JqZWN0KHsgaWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEJykgfSkpXG4gICAgICAgIC8vIDMuIHB1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkxcbiAgICAgICAgLm9yKHoub2JqZWN0KHsgdXJsOiB6LnN0cmluZygpLmRlc2NyaWJlKCdQdWJsaWNseSBhY2Nlc3NpYmxlIGZpbGUgVVJMJykgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQ29udGVudHMgb2YgdGhlIGZpbGUgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsIGZpbGVuYW1lIG1ldGFkYXRhIHdoZW4gdXBsb2FkaW5nIGZpbGUgZGF0YSBpbmxpbmUuXG4gICAgICovXG4gICAgZmlsZW5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEF1ZGlvQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgLyoqXG4gICAgICogVGhlIGF1ZGlvIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgYXVkaW86IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEgb3IgZmlsZSBpZCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmb3JtYXQgb2YgdGhlIGF1ZGlvLlxuICAgICAqL1xuICAgIGZvcm1hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zY3JpcHQgb2YgdGhlIGF1ZGlvLlxuICAgICAqL1xuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgSW1hZ2VDb250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgaW1hZ2UgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBpbWFnZTogei5zdHJpbmcoKS5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YScpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksXG4gICAgLyoqXG4gICAgICogVGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmNvbnN0IEltYWdlRGF0YU9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBkYXRhOiB6XG4gICAgICAgIC51bmlvbihbei5zdHJpbmcoKSwgei5pbnN0YW5jZW9mKFVpbnQ4QXJyYXkpXSlcbiAgICAgICAgLmRlc2NyaWJlKCdCYXNlNjQgaW1hZ2UgZGF0YSwgb3IgcmF3IGJ5dGVzIHRoYXQgd2lsbCBiZSBiYXNlNjQgZW5jb2RlZCBhdXRvbWF0aWNhbGx5LicpLFxuICAgIG1lZGlhVHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBJbWFnZVVybE9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1cmw6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnUHVibGljbHkgYWNjZXNzaWJsZSBVUkwgcG9pbnRpbmcgdG8gdGhlIGltYWdlIGNvbnRlbnQnKSxcbn0pO1xuY29uc3QgSW1hZ2VGaWxlSWRPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZmlsZUlkOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ09wZW5BSSBmaWxlIElEIHJlZmVyZW5jaW5nIHVwbG9hZGVkIGltYWdlIGNvbnRlbnQnKSxcbn0pO1xuY29uc3QgSW1hZ2VPYmplY3RTY2hlbWEgPSB6XG4gICAgLnVuaW9uKFtJbWFnZURhdGFPYmplY3RTY2hlbWEsIEltYWdlVXJsT2JqZWN0U2NoZW1hLCBJbWFnZUZpbGVJZE9iamVjdFNjaGVtYV0pXG4gICAgLmRlc2NyaWJlKCdJbmxpbmUgaW1hZ2UgZGF0YSBvciByZWZlcmVuY2VzIHRvIHVwbG9hZGVkIGNvbnRlbnQuJyk7XG5jb25zdCBGaWxlRGF0YU9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBkYXRhOiB6XG4gICAgICAgIC51bmlvbihbei5zdHJpbmcoKSwgei5pbnN0YW5jZW9mKFVpbnQ4QXJyYXkpXSlcbiAgICAgICAgLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBmaWxlIGRhdGEsIG9yIHJhdyBieXRlcyB0aGF0IHdpbGwgYmUgZW5jb2RlZCBhdXRvbWF0aWNhbGx5LicpLFxuICAgIG1lZGlhVHlwZTogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdJQU5BIG1lZGlhIHR5cGUgZGVzY3JpYmluZyB0aGUgZmlsZSBjb250ZW50cycpLFxuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdGaWxlbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhlIGlubGluZSBkYXRhJyksXG59KTtcbmNvbnN0IEZpbGVVcmxPYmplY3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXJsOiB6LnN0cmluZygpLmRlc2NyaWJlKCdQdWJsaWNseSBhY2Nlc3NpYmxlIFVSTCBmb3IgdGhlIGZpbGUgY29udGVudCcpLFxuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IEZpbGVJZE9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQgcmVmZXJlbmNpbmcgdXBsb2FkZWQgY29udGVudCcpLFxuICAgIGZpbGVuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IEZpbGVSZWZlcmVuY2VTY2hlbWEgPSB6XG4gICAgLnVuaW9uKFtcbiAgICB6LnN0cmluZygpLmRlc2NyaWJlKCdFeGlzdGluZyBkYXRhIFVSTCBvciBiYXNlNjQgc3RyaW5nJyksXG4gICAgRmlsZURhdGFPYmplY3RTY2hlbWEsXG4gICAgRmlsZVVybE9iamVjdFNjaGVtYSxcbiAgICBGaWxlSWRPYmplY3RTY2hlbWEsXG5dKVxuICAgIC5kZXNjcmliZSgnSW5saW5lIGRhdGEgKHdpdGggbWV0YWRhdGEpIG9yIHJlZmVyZW5jZXMgcG9pbnRpbmcgdG8gZmlsZSBjb250ZW50cy4nKTtcbmNvbnN0IHpTdHJpbmdXaXRoSGludHMgPSAoLi4uX2hpbnRzKSA9PiB6LnN0cmluZygpO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogSW5saW5lIGltYWdlIGNvbnRlbnQgb3IgYSByZWZlcmVuY2UgdG8gYW4gdXBsb2FkZWQgZmlsZS4gQWNjZXB0cyBhIFVSTC9kYXRhIFVSTCBzdHJpbmcgb3IgYW5cbiAgICAgKiBvYmplY3QgZGVzY3JpYmluZyB0aGUgZGF0YS91cmwvZmlsZUlkIHNvdXJjZS5cbiAgICAgKi9cbiAgICBpbWFnZTogei5zdHJpbmcoKS5vcihJbWFnZU9iamVjdFNjaGVtYSkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBDb250cm9scyB0aGUgcmVxdWVzdGVkIGxldmVsIG9mIGRldGFpbCBmb3IgdmlzaW9uIG1vZGVscy5cbiAgICAgKiBVc2UgYSBzdHJpbmcgdG8gYXZvaWQgY29uc3RyYWluaW5nIGZ1dHVyZSBtb2RlbCBjYXBhYmlsaXRpZXMuXG4gICAgICovXG4gICAgZGV0YWlsOiB6U3RyaW5nV2l0aEhpbnRzKCdsb3cnLCAnaGlnaCcsICdhdXRvJykub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xPdXRwdXRGaWxlQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2ZpbGUnKSxcbiAgICAvKipcbiAgICAgKiBGaWxlIG91dHB1dCByZWZlcmVuY2UuIFByb3ZpZGUgZWl0aGVyIGEgc3RyaW5nIChkYXRhIFVSTCAvIGJhc2U2NCksIGEgZGF0YSBvYmplY3QgKHJlcXVpcmVzXG4gICAgICogbWVkaWFUeXBlICsgZmlsZW5hbWUpLCBvciBhbiBvYmplY3QgcG9pbnRpbmcgdG8gYW4gdXBsb2FkZWQgZmlsZS9VUkwuXG4gICAgICovXG4gICAgZmlsZTogRmlsZVJlZmVyZW5jZVNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyVG9vbE91dHB1dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX3NjcmVlbnNob3QnKSxcbiAgICAvKipcbiAgICAgKiBBIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYSBVUkwgcmVwcmVzZW50aW5nIHRoZSBzY3JlZW5zaG90LlxuICAgICAqL1xuICAgIGRhdGE6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgVVJMJyksXG59KTtcbmV4cG9ydCBjb25zdCBjb21wdXRlckFjdGlvbnMgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnc2NyZWVuc2hvdCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdjbGljaycpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgICAgICBidXR0b246IHouZW51bShbJ2xlZnQnLCAncmlnaHQnLCAnd2hlZWwnLCAnYmFjaycsICdmb3J3YXJkJ10pLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdkb3VibGVfY2xpY2snKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Nyb2xsJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgICAgIHNjcm9sbF94OiB6Lm51bWJlcigpLFxuICAgICAgICBzY3JvbGxfeTogei5udW1iZXIoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndHlwZScpLFxuICAgICAgICB0ZXh0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd3YWl0JykgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21vdmUnKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgna2V5cHJlc3MnKSxcbiAgICAgICAga2V5czogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnZHJhZycpLFxuICAgICAgICBwYXRoOiB6LmFycmF5KHoub2JqZWN0KHsgeDogei5udW1iZXIoKSwgeTogei5udW1iZXIoKSB9KSksXG4gICAgfSksXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE1lc3NhZ2UgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBBc3Npc3RhbnRDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgT3V0cHV0VGV4dCxcbiAgICBSZWZ1c2FsLFxuICAgIEF1ZGlvQ29udGVudCxcbiAgICBJbWFnZUNvbnRlbnQsXG5dKTtcbmNvbnN0IE1lc3NhZ2VCYXNlID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbnkgaXRlbSB3aXRob3V0IGEgdHlwZSBpcyB0cmVhdGVkIGFzIGEgbWVzc2FnZVxuICAgICAqL1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBBc3Npc3RhbnRNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSBhc3Npc3RhbnQgKGkuZS4gdGhlIG1vZGVsKVxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnYXNzaXN0YW50JyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoQXNzaXN0YW50Q29udGVudCksXG59KTtcbmV4cG9ydCBjb25zdCBVc2VyQ29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIElucHV0VGV4dCxcbiAgICBJbnB1dEltYWdlLFxuICAgIElucHV0RmlsZSxcbiAgICBBdWRpb0NvbnRlbnQsXG5dKTtcbmV4cG9ydCBjb25zdCBVc2VyTWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8vIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgndXNlcicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoVXNlckNvbnRlbnQpLm9yKHouc3RyaW5nKCkpLFxufSk7XG5jb25zdCBTeXN0ZW1NZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgc3lzdGVtIG1lc3NhZ2UgdG8gdGhlIHVzZXJcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ3N5c3RlbScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBNZXNzYWdlSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCdyb2xlJywgW1xuICAgIFN5c3RlbU1lc3NhZ2VJdGVtLFxuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIFVzZXJNZXNzYWdlSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVG9vbCBjYWxsIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgSG9zdGVkVG9vbENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2hvc3RlZF90b29sX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgaG9zdGVkIHRvb2wuIEZvciBleGFtcGxlIGB3ZWJfc2VhcmNoX2NhbGxgIG9yIGBmaWxlX3NlYXJjaF9jYWxsYFxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGhvc3RlZCB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ1RoZSBhcmd1bWVudHMgb2YgdGhlIGhvc3RlZCB0b29sIGNhbGwnKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHByaW1hcnkgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuIEFkZGl0aW9uYWwgb3V0cHV0IG1pZ2h0IGJlIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbE91dHB1dENvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBUb29sT3V0cHV0VGV4dCxcbiAgICBUb29sT3V0cHV0SW1hZ2UsXG4gICAgVG9vbE91dHB1dEZpbGVDb250ZW50LFxuXSk7XG5leHBvcnQgY29uc3QgVG9vbENhbGxTdHJ1Y3R1cmVkT3V0cHV0ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgSW5wdXRUZXh0LFxuICAgIElucHV0SW1hZ2UsXG4gICAgSW5wdXRGaWxlLFxuXSk7XG5leHBvcnQgY29uc3QgRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsX3Jlc3VsdCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRoYXQgd2FzIGNhbGxlZFxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSB0b29sJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSB0b29sIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIHRvb2wgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBvdXRwdXQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IHpcbiAgICAgICAgLnVuaW9uKFtcbiAgICAgICAgei5zdHJpbmcoKSxcbiAgICAgICAgVG9vbENhbGxPdXRwdXRDb250ZW50LFxuICAgICAgICB6LmFycmF5KFRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCksXG4gICAgXSlcbiAgICAgICAgLmRlc2NyaWJlKCdPdXRwdXQgcmV0dXJuZWQgYnkgdGhlIHRvb2wgY2FsbC4gU3VwcG9ydHMgcGxhaW4gc3RyaW5ncywgbGVnYWN5IFRvb2xPdXRwdXQgaXRlbXMsIG9yIHN0cnVjdHVyZWQgaW5wdXRfKiBpdGVtcy4nKSxcbn0pO1xuZXhwb3J0IGNvbnN0IENvbXB1dGVyVXNlQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgY29tcHV0ZXIgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBjb21wdXRlciBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIGFjdGlvbiB0byBiZSBwZXJmb3JtZWQgYnkgdGhlIGNvbXB1dGVyLlxuICAgICAqL1xuICAgIGFjdGlvbjogY29tcHV0ZXJBY3Rpb25zLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9jYWxsX3Jlc3VsdCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgY29tcHV0ZXIgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIGNvbXB1dGVyIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgb3V0cHV0IG9mIHRoZSBjb21wdXRlciBjYWxsLlxuICAgICAqL1xuICAgIG91dHB1dDogQ29tcHV0ZXJUb29sT3V0cHV0LFxufSk7XG5leHBvcnQgY29uc3QgU2hlbGxBY3Rpb24gPSB6Lm9iamVjdCh7XG4gICAgY29tbWFuZHM6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgdGltZW91dE1zOiB6Lm51bWJlcigpLmludCgpLm1pbigwKS5vcHRpb25hbCgpLFxuICAgIG1heE91dHB1dExlbmd0aDogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFNoZWxsQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2hlbGxfY2FsbCcpLFxuICAgIGNhbGxJZDogei5zdHJpbmcoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLm9wdGlvbmFsKCksXG4gICAgYWN0aW9uOiBTaGVsbEFjdGlvbixcbn0pO1xuZXhwb3J0IGNvbnN0IFNoZWxsQ2FsbE91dGNvbWUgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgndGltZW91dCcpIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdleGl0JyksXG4gICAgICAgIGV4aXRDb2RlOiB6Lm51bWJlcigpLmludCgpLm51bGxhYmxlKCksXG4gICAgfSksXG5dKTtcbmV4cG9ydCBjb25zdCBTaGVsbENhbGxPdXRwdXRDb250ZW50ID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHN0ZG91dDogei5zdHJpbmcoKSxcbiAgICBzdGRlcnI6IHouc3RyaW5nKCksXG4gICAgb3V0Y29tZTogU2hlbGxDYWxsT3V0Y29tZSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgU2hlbGxDYWxsUmVzdWx0SXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzaGVsbF9jYWxsX291dHB1dCcpLFxuICAgIGNhbGxJZDogei5zdHJpbmcoKSxcbiAgICBtYXhPdXRwdXRMZW5ndGg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXQ6IHouYXJyYXkoU2hlbGxDYWxsT3V0cHV0Q29udGVudCksXG59KTtcbmV4cG9ydCBjb25zdCBBcHBseVBhdGNoT3BlcmF0aW9uQ3JlYXRlRmlsZSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NyZWF0ZV9maWxlJyksXG4gICAgcGF0aDogei5zdHJpbmcoKSxcbiAgICBkaWZmOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaE9wZXJhdGlvblVwZGF0ZUZpbGUgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd1cGRhdGVfZmlsZScpLFxuICAgIHBhdGg6IHouc3RyaW5nKCksXG4gICAgZGlmZjogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFwcGx5UGF0Y2hPcGVyYXRpb25EZWxldGVGaWxlID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZGVsZXRlX2ZpbGUnKSxcbiAgICBwYXRoOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaE9wZXJhdGlvbiA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIEFwcGx5UGF0Y2hPcGVyYXRpb25DcmVhdGVGaWxlLFxuICAgIEFwcGx5UGF0Y2hPcGVyYXRpb25VcGRhdGVGaWxlLFxuICAgIEFwcGx5UGF0Y2hPcGVyYXRpb25EZWxldGVGaWxlLFxuXSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2FwcGx5X3BhdGNoX2NhbGwnKSxcbiAgICBjYWxsSWQ6IHouc3RyaW5nKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnXSksXG4gICAgb3BlcmF0aW9uOiBBcHBseVBhdGNoT3BlcmF0aW9uLFxufSk7XG5leHBvcnQgY29uc3QgQXBwbHlQYXRjaENhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2FwcGx5X3BhdGNoX2NhbGxfb3V0cHV0JyksXG4gICAgY2FsbElkOiB6LnN0cmluZygpLFxuICAgIHN0YXR1czogei5lbnVtKFsnY29tcGxldGVkJywgJ2ZhaWxlZCddKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgU2hlbGxDYWxsSXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG5dKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNwZWNpYWwgaXRlbSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IFJlYXNvbmluZ0l0ZW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZycpLFxuICAgIC8qKlxuICAgICAqIFRoZSB1c2VyIGZhY2luZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVhc29uaW5nLiBBZGRpdGlvbmFsIGluZm9ybWF0aW9uIG1pZ2h0IGJlIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAgICAgKi9cbiAgICBjb250ZW50OiB6LmFycmF5KElucHV0VGV4dCksXG4gICAgLyoqXG4gICAgICogVGhlIHJhdyByZWFzb25pbmcgdGV4dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgKi9cbiAgICByYXdDb250ZW50OiB6LmFycmF5KFJlYXNvbmluZ1RleHQpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogVGhpcyBpcyBhIGNhdGNoIGFsbCBmb3IgaXRlbXMgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sLlxuICpcbiAqIEZvciBleGFtcGxlLCBhIG1vZGVsIG1pZ2h0IHJldHVybiBhbiBpdGVtIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHByb3RvY29sIHVzaW5nIHRoaXMgdHlwZS5cbiAqXG4gKiBJbiB0aGF0IGNhc2UgZXZlcnl0aGluZyByZXR1cm5lZCBmcm9tIHRoZSBtb2RlbCBzaG91bGQgYmUgcGFzc2VkIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAqXG4gKiBUaGlzIGVuYWJsZXMgbmV3IGZlYXR1cmVzIHRvIGJlIGFkZGVkIHRvIGJlIGFkZGVkIGJ5IGEgbW9kZWwgcHJvdmlkZXIgd2l0aG91dCBicmVha2luZyB0aGUgcHJvdG9jb2wuXG4gKi9cbmV4cG9ydCBjb25zdCBVbmtub3duSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd1bmtub3duJyksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEpvaW5lZCBpdGVtIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgT3V0cHV0TW9kZWxJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBTaGVsbENhbGxJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgIFNoZWxsQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQXBwbHlQYXRjaENhbGxSZXN1bHRJdGVtLFxuICAgIFJlYXNvbmluZ0l0ZW0sXG4gICAgVW5rbm93bkl0ZW0sXG5dKTtcbmV4cG9ydCBjb25zdCBNb2RlbEl0ZW0gPSB6LnVuaW9uKFtcbiAgICBVc2VyTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgQ29tcHV0ZXJVc2VDYWxsSXRlbSxcbiAgICBTaGVsbENhbGxJdGVtLFxuICAgIEFwcGx5UGF0Y2hDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgIENvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0sXG4gICAgU2hlbGxDYWxsUmVzdWx0SXRlbSxcbiAgICBBcHBseVBhdGNoQ2FsbFJlc3VsdEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWV0YSBkYXRhIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgUmVxdWVzdFVzYWdlRGF0YSA9IHoub2JqZWN0KHtcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBVc2FnZURhdGEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6XG4gICAgICAgIC51bmlvbihbXG4gICAgICAgIHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLFxuICAgICAgICB6LmFycmF5KHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpKSxcbiAgICBdKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6XG4gICAgICAgIC51bmlvbihbXG4gICAgICAgIHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLFxuICAgICAgICB6LmFycmF5KHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpKSxcbiAgICBdKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICByZXF1ZXN0VXNhZ2VFbnRyaWVzOiB6LmFycmF5KFJlcXVlc3RVc2FnZURhdGEpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0cmVhbSBldmVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBuZXcgb3V0cHV0IHRleHQgaXMgYXZhaWxhYmxlIHRvIHN0cmVhbSB0byB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50VGV4dFN0cmVhbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0X2RlbHRhJyksXG4gICAgLyoqXG4gICAgICogVGhlIGRlbHRhIHRleHQgdGhhdCB3YXMgc3RyZWFtZWQgYnkgdGhlIG1vZGVsdG8gdGhlIHVzZXIuXG4gICAgICovXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gYSBuZXcgcmVzcG9uc2UgaXMgc3RhcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Vfc3RhcnRlZCcpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgcmVzcG9uc2UgaXMgY29tcGxldGVkLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX2RvbmUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzcG9uc2UgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVzcG9uc2U6IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBJRCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1c2FnZSBkYXRhIGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICB1c2FnZTogVXNhZ2VEYXRhLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgICAgICovXG4gICAgICAgIG91dHB1dDogei5hcnJheShPdXRwdXRNb2RlbEl0ZW0pLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGZvciBldmVyeSBpdGVtIHRoYXQgZ2V0cyBzdHJlYW1lZCB0byB0aGUgbW9kZWwuIFVzZWQgdG8gZXhwb3NlIHRoZSByYXcgZXZlbnRzXG4gKiBmcm9tIHRoZSBtb2RlbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtb2RlbCcpLFxuICAgIGV2ZW50OiB6LmFueSgpLmRlc2NyaWJlKCdUaGUgZXZlbnQgZnJvbSB0aGUgbW9kZWwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgU3RyZWFtRXZlbnRUZXh0U3RyZWFtLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQsXG4gICAgU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQsXG4gICAgU3RyZWFtRXZlbnRHZW5lcmljSXRlbSxcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdG9jb2wubWpzLm1hcCIsImltcG9ydCB7IFJlcXVlc3RVc2FnZURhdGEsIFVzYWdlRGF0YSB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuLyoqXG4gKiBVc2FnZSBkZXRhaWxzIGZvciBhIHNpbmdsZSBBUEkgcmVxdWVzdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlcXVlc3RVc2FnZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB1c2VkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYW5kIHJlY2VpdmVkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgdG90YWxUb2tlbnM7XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgaW5wdXQgdG9rZW5zIHVzZWQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBpbnB1dFRva2Vuc0RldGFpbHM7XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgb3V0cHV0IHRva2VucyB1c2VkIGZvciB0aGlzIHJlcXVlc3QuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlscztcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gaW5wdXQ/LmlucHV0VG9rZW5zID8/IGlucHV0Py5pbnB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgPVxuICAgICAgICAgICAgaW5wdXQ/LnRvdGFsVG9rZW5zID8/XG4gICAgICAgICAgICAgICAgaW5wdXQ/LnRvdGFsX3Rva2VucyA/P1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKyB0aGlzLm91dHB1dFRva2VucztcbiAgICAgICAgY29uc3QgaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICA/IGlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5vdXRwdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IG91dHB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgID8gb3V0cHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgOiB7fTtcbiAgICB9XG59XG4vKipcbiAqIFRyYWNrcyB0b2tlbiB1c2FnZSBhbmQgcmVxdWVzdCBjb3VudHMgZm9yIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzYWdlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHJlcXVlc3RzIG1hZGUgdG8gdGhlIExMTSBBUEkuXG4gICAgICovXG4gICAgcmVxdWVzdHM7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zO1xuICAgIC8qKlxuICAgICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIHNlbnQgYW5kIHJlY2VpdmVkLCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIHRvdGFsVG9rZW5zO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIGlucHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzID0gW107XG4gICAgLyoqXG4gICAgICogRGV0YWlscyBhYm91dCB0aGUgb3V0cHV0IHRva2VucyB1c2VkIGFjcm9zcyBhbGwgcmVxdWVzdHMuXG4gICAgICovXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIC8qKlxuICAgICAqIExpc3Qgb2YgcGVyLXJlcXVlc3QgdXNhZ2UgZW50cmllcyBmb3IgZGV0YWlsZWQgY29zdCBjYWxjdWxhdGlvbnMuXG4gICAgICovXG4gICAgcmVxdWVzdFVzYWdlRW50cmllcztcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IGlucHV0Py5yZXF1ZXN0cyA/PyAxO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IGlucHV0Py5pbnB1dFRva2VucyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPVxuICAgICAgICAgICAgICAgIGlucHV0Py50b3RhbFRva2VucyA/P1xuICAgICAgICAgICAgICAgICAgICBpbnB1dD8udG90YWxfdG9rZW5zID8/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnMgKyB0aGlzLm91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IGlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5pbnB1dFRva2Vuc0RldGFpbHMgPz8gaW5wdXQ/LmlucHV0X3Rva2Vuc19kZXRhaWxzO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXRUb2tlbnNEZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXRUb2tlbnNEZXRhaWxzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBpbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICAgICAgPyBbaW5wdXRUb2tlbnNEZXRhaWxzXVxuICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5vdXRwdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXRUb2tlbnNEZXRhaWxzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IG91dHB1dFRva2Vuc0RldGFpbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBvdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICAgICAgICAgID8gW291dHB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0VXNhZ2VFbnRyaWVzID0gaW5wdXQ/LnJlcXVlc3RVc2FnZUVudHJpZXMgPz8gaW5wdXQ/LnJlcXVlc3RfdXNhZ2VfZW50cmllcztcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzID0gQXJyYXkuaXNBcnJheShyZXF1ZXN0VXNhZ2VFbnRyaWVzKVxuICAgICAgICAgICAgICAgID8gcmVxdWVzdFVzYWdlRW50cmllcy5tYXAoKGVudHJ5KSA9PiBlbnRyeSBpbnN0YW5jZW9mIFJlcXVlc3RVc2FnZSA/IGVudHJ5IDogbmV3IFJlcXVlc3RVc2FnZShlbnRyeSkpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPVxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzICYmXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRSZXF1ZXN0VXNhZ2VFbnRyaWVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBub3JtYWxpemVkUmVxdWVzdFVzYWdlRW50cmllc1xuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGQobmV3VXNhZ2UpIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0cyArPSBuZXdVc2FnZS5yZXF1ZXN0cyA/PyAwO1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zICs9IG5ld1VzYWdlLmlucHV0VG9rZW5zID8/IDA7XG4gICAgICAgIHRoaXMub3V0cHV0VG9rZW5zICs9IG5ld1VzYWdlLm91dHB1dFRva2VucyA/PyAwO1xuICAgICAgICB0aGlzLnRvdGFsVG9rZW5zICs9IG5ld1VzYWdlLnRvdGFsVG9rZW5zID8/IDA7XG4gICAgICAgIGlmIChuZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMucHVzaCguLi5uZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShuZXdVc2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzKSAmJlxuICAgICAgICAgICAgbmV3VXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMgPz89IFtdO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0VXNhZ2VFbnRyaWVzLnB1c2goLi4ubmV3VXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5tYXAoKGVudHJ5KSA9PiBlbnRyeSBpbnN0YW5jZW9mIFJlcXVlc3RVc2FnZSA/IGVudHJ5IDogbmV3IFJlcXVlc3RVc2FnZShlbnRyeSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdVc2FnZS5yZXF1ZXN0cyA9PT0gMSAmJiBuZXdVc2FnZS50b3RhbFRva2VucyA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFVzYWdlRW50cmllcyA/Pz0gW107XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RVc2FnZUVudHJpZXMucHVzaChuZXcgUmVxdWVzdFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogbmV3VXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiBuZXdVc2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IG5ld1VzYWdlLnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogbmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzPy5bMF0sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogbmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscz8uWzBdLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IHsgUmVxdWVzdFVzYWdlRGF0YSwgVXNhZ2VEYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2FnZS5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuLyoqXG4gKiBBIGNvbnRleHQgb2JqZWN0IHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Db250ZXh0IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGV4dCBvYmplY3QgeW91IHBhc3NlZCB0byB0aGUgYFJ1bm5lci5ydW4oKWAgbWV0aG9kLlxuICAgICAqL1xuICAgIGNvbnRleHQ7XG4gICAgLyoqXG4gICAgICogVGhlIHVzYWdlIG9mIHRoZSBhZ2VudCBydW4gc28gZmFyLiBGb3Igc3RyZWFtZWQgcmVzcG9uc2VzLCB0aGUgdXNhZ2Ugd2lsbCBiZSB1cGRhdGVkIGluIHJlYWwtdGltZVxuICAgICAqL1xuICAgIHVzYWdlO1xuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHRvb2wgbmFtZXMgdG8gd2hldGhlciB0aGV5IGhhdmUgYmVlbiBhcHByb3ZlZC5cbiAgICAgKi9cbiAgICAjYXBwcm92YWxzO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQgPSB7fSkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnVzYWdlID0gbmV3IFVzYWdlKCk7XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVidWlsZCB0aGUgYXBwcm92YWxzIG1hcCBmcm9tIGEgc2VyaWFsaXplZCBzdGF0ZS5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbHMgLSBUaGUgYXBwcm92YWxzIG1hcCB0byByZWJ1aWxkLlxuICAgICAqL1xuICAgIF9yZWJ1aWxkQXBwcm92YWxzKGFwcHJvdmFscykge1xuICAgICAgICB0aGlzLiNhcHByb3ZhbHMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGFwcHJvdmFscykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbCAtIERldGFpbHMgYWJvdXQgdGhlIHRvb2wgY2FsbCBiZWluZyBldmFsdWF0ZWQuXG4gICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQsIGBmYWxzZWAgaWYgYmxvY2tlZCBhbmQgYHVuZGVmaW5lZGAgaWYgbm90IHlldCBhcHByb3ZlZCBvciByZWplY3RlZC5cbiAgICAgKi9cbiAgICBpc1Rvb2xBcHByb3ZlZChhcHByb3ZhbCkge1xuICAgICAgICBjb25zdCB7IHRvb2xOYW1lLCBjYWxsSWQgfSA9IGFwcHJvdmFsO1xuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSk7XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZCA9PT0gdHJ1ZSAmJiBhcHByb3ZhbEVudHJ5LnJlamVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVG9vbCBpcyBwZXJtYW5lbnRseSBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZScpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBjb25zdCBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiA9IEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeT8ucmVqZWN0ZWQpXG4gICAgICAgICAgICA/IGFwcHJvdmFsRW50cnkucmVqZWN0ZWQuaW5jbHVkZXMoY2FsbElkKVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwgJiYgaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUb29sIGNhbGwgJHtjYWxsSWR9IGlzIGJvdGggYXBwcm92ZWQgYW5kIHJlamVjdGVkIGF0IHRoZSBzYW1lIHRpbWUuIEFwcHJvdmFsIHRha2VzIHByZWNlZGVuY2VgKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxSZWplY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgYXBwcm92YWwgYmVoYXZpb3Igb3B0aW9ucy5cbiAgICAgKi9cbiAgICBhcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIHsgYWx3YXlzQXBwcm92ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKSA/PyB7XG4gICAgICAgICAgICBhcHByb3ZlZDogW10sXG4gICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnkuYXBwcm92ZWQpKSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbiB0b29sIGhhcyBjYWxsX2lkLCBob3N0ZWQgdG9vbCBjYWxsIGhhcyBpZFxuICAgICAgICAgICAgY29uc3QgY2FsbElkID0gJ2NhbGxJZCcgaW4gYXBwcm92YWxJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICA/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmNhbGxJZCAvLyBmdW5jdGlvbiB0b29sc1xuICAgICAgICAgICAgICAgIDogYXBwcm92YWxJdGVtLnJhd0l0ZW0uaWQ7IC8vIGhvc3RlZCB0b29sc1xuICAgICAgICAgICAgYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5wdXNoKGNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwgYXBwcm92YWxFbnRyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdCBhIHRvb2wgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKi9cbiAgICByZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgeyBhbHdheXNSZWplY3QgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0udG9vbE5hbWUgPz8gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZTtcbiAgICAgICAgaWYgKGFsd2F5c1JlamVjdCkge1xuICAgICAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZWplY3RlZDogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKSA/PyB7XG4gICAgICAgICAgICBhcHByb3ZlZDogW10sXG4gICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnkucmVqZWN0ZWQpKSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbiB0b29sIGhhcyBjYWxsX2lkLCBob3N0ZWQgdG9vbCBjYWxsIGhhcyBpZFxuICAgICAgICAgICAgY29uc3QgY2FsbElkID0gJ2NhbGxJZCcgaW4gYXBwcm92YWxJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICA/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmNhbGxJZCAvLyBmdW5jdGlvbiB0b29sc1xuICAgICAgICAgICAgICAgIDogYXBwcm92YWxJdGVtLnJhd0l0ZW0uaWQ7IC8vIGhvc3RlZCB0b29sc1xuICAgICAgICAgICAgYXBwcm92YWxFbnRyeS5yZWplY3RlZC5wdXNoKGNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwgYXBwcm92YWxFbnRyeSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcbiAgICAgICAgICAgIHVzYWdlOiB0aGlzLnVzYWdlLFxuICAgICAgICAgICAgYXBwcm92YWxzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy4jYXBwcm92YWxzLmVudHJpZXMoKSksXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuQ29udGV4dC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZVRvb2wodG9vbCkge1xuICAgIGlmICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRvb2wucGFyYW1ldGVycyxcbiAgICAgICAgICAgIHN0cmljdDogdG9vbC5zdHJpY3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdjb21wdXRlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcicsXG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogdG9vbC5jb21wdXRlci5lbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGRpbWVuc2lvbnM6IHRvb2wuY29tcHV0ZXIuZGltZW5zaW9ucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ3NoZWxsJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3NoZWxsJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2FwcGx5X3BhdGNoJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FwcGx5X3BhdGNoJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICBwcm92aWRlckRhdGE6IHRvb2wucHJvdmlkZXJEYXRhLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplSGFuZG9mZihoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbE5hbWU6IGgudG9vbE5hbWUsXG4gICAgICAgIHRvb2xEZXNjcmlwdGlvbjogaC50b29sRGVzY3JpcHRpb24sXG4gICAgICAgIGlucHV0SnNvblNjaGVtYTogaC5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgIHN0cmljdEpzb25TY2hlbWE6IGguc3RyaWN0SnNvblNjaGVtYSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VyaWFsaXplLm1qcy5tYXAiLCJpbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5leHBvcnQgY2xhc3MgUnVuSXRlbUJhc2Uge1xuICAgIHR5cGUgPSAnYmFzZV9pdGVtJztcbiAgICByYXdJdGVtO1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIHJhd0l0ZW06IHRoaXMucmF3SXRlbSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuTWVzc2FnZU91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnQoKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiB0aGlzLnJhd0l0ZW0uY29udGVudCkge1xuICAgICAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIG91dHB1dDtcbiAgICB0eXBlID0gJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQsIG91dHB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgb3V0cHV0OiB0b1NtYXJ0U3RyaW5nKHRoaXMub3V0cHV0KSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuUmVhc29uaW5nSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAncmVhc29uaW5nX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZkNhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdoYW5kb2ZmX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5IYW5kb2ZmT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIHNvdXJjZUFnZW50O1xuICAgIHRhcmdldEFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgc291cmNlQWdlbnQsIHRhcmdldEFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuc291cmNlQWdlbnQgPSBzb3VyY2VBZ2VudDtcbiAgICAgICAgdGhpcy50YXJnZXRBZ2VudCA9IHRhcmdldEFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIHNvdXJjZUFnZW50OiB0aGlzLnNvdXJjZUFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgdGFyZ2V0QWdlbnQ6IHRoaXMudGFyZ2V0QWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xBcHByb3ZhbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0b29sTmFtZTtcbiAgICB0eXBlID0gJ3Rvb2xfYXBwcm92YWxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQsIFxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0IHRvb2wgbmFtZSB0byB1c2UgZm9yIGFwcHJvdmFsIHRyYWNraW5nIHdoZW4gbm90IHByZXNlbnQgb24gdGhlIHJhdyBpdGVtLlxuICAgICAqL1xuICAgIHRvb2xOYW1lKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICAgICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lO1xuICAgICAgICB0aGlzLnRvb2xOYW1lID0gdG9vbE5hbWUgPz8gcmF3SXRlbS5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB0b29sIG5hbWUgaWYgYXZhaWxhYmxlIG9uIHRoZSByYXcgaXRlbSBvciBwcm92aWRlZCBleHBsaWNpdGx5LlxuICAgICAqIEtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGggY29kZSB0aGF0IHByZXZpb3VzbHkgcmVsaWVkIG9uIGByYXdJdGVtLm5hbWVgLlxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b29sTmFtZSA/PyB0aGlzLnJhd0l0ZW0ubmFtZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXJndW1lbnRzIGlmIHRoZSByYXcgaXRlbSBoYXMgYW4gYXJndW1lbnRzIHByb3BlcnR5IG90aGVyd2lzZSB0aGlzIHdpbGwgYmUgdW5kZWZpbmVkLlxuICAgICAqL1xuICAgIGdldCBhcmd1bWVudHMoKSB7XG4gICAgICAgIHJldHVybiAnYXJndW1lbnRzJyBpbiB0aGlzLnJhd0l0ZW0gPyB0aGlzLnJhd0l0ZW0uYXJndW1lbnRzIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IGFsbCB0ZXh0IG91dHB1dCBmcm9tIGEgbGlzdCBvZiBydW4gaXRlbXMgYnkgY29uY2F0ZW5hdGluZyB0aGUgY29udGVudCBvZiBhbGxcbiAqIG1lc3NhZ2Ugb3V0cHV0IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIFRoZSBsaXN0IG9mIHJ1biBpdGVtcyB0byBleHRyYWN0IHRleHQgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIG9mIGFsbCB0aGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgcnVuIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEFsbFRleHRPdXRwdXQoaXRlbXMpIHtcbiAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSAnbWVzc2FnZV9vdXRwdXRfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uY29udGVudClcbiAgICAgICAgLmpvaW4oJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsImltcG9ydCB7IHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmZ1bmN0aW9uIF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3Bhbikge1xuICAgIHJldHVybiBhc3luYyAoZm4sIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRpbmcgYSBuZXcgc3BhbiBjb250ZXh0IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBwcmV2aW91cyBzcGFuIGlzIGNvcnJlY3RseSByZXNldFxuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBjcmVhdGVTcGFuKC4uLmFyZ3MpO1xuICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oc3Bhbik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oc3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZXJyb3IuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoUmVzcG9uc2VTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBjcmVhdGVHZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgcmVzcG9uc2Ugc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICBvcHRpb25zID0ge307XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoUmVzcG9uc2VTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVSZXNwb25zZVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoQWdlbnRTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGFnZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZ2VudFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2FnZW50JyxcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnM/LmRhdGE/Lm5hbWUgPz8gJ0FnZW50JyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhBZ2VudFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUFnZW50U3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhGdW5jdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgZnVuY3Rpb24gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgaW5wdXQ6IG9wdGlvbnM/LmRhdGE/LmlucHV0ID8/ICcnLFxuICAgICAgICAgICAgb3V0cHV0OiBvcHRpb25zPy5kYXRhPy5vdXRwdXQgPz8gJycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoRnVuY3Rpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVGdW5jdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhIYW5kb2ZmU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBoYW5kb2ZmIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIYW5kb2ZmU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7IHR5cGU6ICdoYW5kb2ZmJywgLi4ub3B0aW9ucz8uZGF0YSB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhIYW5kb2ZmU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlSGFuZG9mZlNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ2VuZXJhdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhHZW5lcmF0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgZ2VuZXJhdGlvbiwgaW5jbHVkaW5nIGlucHV0L291dHB1dCBtZXNzYWdlXG4gKiBzZXF1ZW5jZXMsIG1vZGVsIGluZm9ybWF0aW9uLCBhbmQgdXNhZ2UgZGF0YS4gSWYgeW91IG9ubHkgbmVlZCB0byBjYXB0dXJlIGEgbW9kZWwgcmVzcG9uc2VcbiAqIGlkZW50aWZpZXIsIGNvbnNpZGVyIHVzaW5nIGBjcmVhdGVSZXNwb25zZVNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdlbmVyYXRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdnZW5lcmF0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKiBBdXRvbWF0aWNhbGx5IGNyZWF0ZSBhIGdlbmVyYXRpb24gc3BhbiwgcnVuIGZuIGFuZCBjbG9zZSB0aGUgc3BhbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhHZW5lcmF0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR2VuZXJhdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY3VzdG9tIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEN1c3RvbVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhDdXN0b21TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVDdXN0b21TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGd1YXJkcmFpbCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhHdWFyZHJhaWxTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUd1YXJkcmFpbFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2d1YXJkcmFpbCcsXG4gICAgICAgICAgICB0cmlnZ2VyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhHdWFyZHJhaWxTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHdWFyZHJhaWxTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHRyYW5zY3JpcHRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFRyYW5zY3JpcHRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVUcmFuc2NyaXB0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBncm91cCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hHcm91cFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaF9ncm91cCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaEdyb3VwU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoR3JvdXBTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IE1DUCBsaXN0IHRvb2xzIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1DUExpc3RUb29sc1NwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ21jcF90b29scycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aE1DUExpc3RUb29sc1NwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZU1DUExpc3RUb29sc1NwYW4pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlU3BhbnMubWpzLm1hcCIsIi8qKlxuICogRW5jb2RlIGEgVWludDhBcnJheSBpbnRvIGEgYmFzZTY0IHN0cmluZyBpbiBib3RoIE5vZGUgYW5kIGJyb3dzZXIgZW52aXJvbm1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGRhdGEpIHtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBjb25zdCBnbG9iYWxCdWZmZXIgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcy5CdWZmZXJcbiAgICAgICAgPyBnbG9iYWxUaGlzLkJ1ZmZlclxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoZ2xvYmFsQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxCdWZmZXIuZnJvbShkYXRhKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgfVxuICAgIGxldCBiaW5hcnkgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZGF0YVtpXSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcy5idG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzLmJ0b2EoYmluYXJ5KTtcbiAgICB9XG4gICAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiaW5hcnkubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGMxID0gYmluYXJ5LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY29uc3QgYzIgPSBiaW5hcnkuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBjb25zdCBjMyA9IGJpbmFyeS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGNvbnN0IGVuYzEgPSBjMSA+PiAyO1xuICAgICAgICBjb25zdCBlbmMyID0gKChjMSAmIDB4MykgPDwgNCkgfCAoYzIgPj4gNCk7XG4gICAgICAgIGNvbnN0IGVuYzMgPSBpc05hTihjMikgPyA2NCA6ICgoYzIgJiAweGYpIDw8IDIpIHwgKGMzID4+IDYpO1xuICAgICAgICBjb25zdCBlbmM0ID0gaXNOYU4oYzMpID8gNjQgOiBjMyAmIDB4M2Y7XG4gICAgICAgIHJlc3VsdCArPVxuICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzEpICtcbiAgICAgICAgICAgICAgICBjaGFycy5jaGFyQXQoZW5jMikgK1xuICAgICAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmMzKSArXG4gICAgICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZTY0Lm1qcy5tYXAiLCIvKipcbiAqIFN0cmVhbWluZyBldmVudCBmcm9tIHRoZSBMTE0uIFRoZXNlIGFyZSBgcmF3YCBldmVudHMsIGkuZS4gdGhleSBhcmUgZGlyZWN0bHkgcGFzc2VkIHRocm91Z2ggZnJvbVxuICogdGhlIExMTS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQge1xuICAgIGRhdGE7XG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHR5cGUgPSAncmF3X21vZGVsX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRhdGEgVGhlIHJhdyByZXNwb25zZXMgc3RyZWFtIGV2ZW50cyBmcm9tIHRoZSBMTE0uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH1cbn1cbi8qKlxuICogU3RyZWFtaW5nIGV2ZW50cyB0aGF0IHdyYXAgYSBgUnVuSXRlbWAuIEFzIHRoZSBhZ2VudCBwcm9jZXNzZXMgdGhlIExMTSByZXNwb25zZSwgaXQgd2lsbCBnZW5lcmF0ZVxuICogdGhlc2UgZXZlbnRzIGZyb20gbmV3IG1lc3NhZ2VzLCB0b29sIGNhbGxzLCB0b29sIG91dHB1dHMsIGhhbmRvZmZzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5JdGVtU3RyZWFtRXZlbnQge1xuICAgIG5hbWU7XG4gICAgaXRlbTtcbiAgICB0eXBlID0gJ3J1bl9pdGVtX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBpdGVtIHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSwgaXRlbSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLml0ZW0gPSBpdGVtO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgdGhhdCBub3RpZmllcyB0aGF0IHRoZXJlIGlzIGEgbmV3IGFnZW50IHJ1bm5pbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCB7XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdhZ2VudF91cGRhdGVkX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFnZW50IFRoZSBuZXcgYWdlbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnRzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gaXNJbnZva2VDb21wdXRlcihjb21wdXRlcikge1xuICAgIHJldHVybiB0eXBlb2YgY29tcHV0ZXIuaW52b2tlID09PSBcImZ1bmN0aW9uXCI7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNJbnZva2VDb21wdXRlcihjb21wdXRlcikge1xuICAgIHJldHVybiBjb21wdXRlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbXB1dGVyLm1qcy5tYXAiLCJpbXBvcnQgeyBjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0LCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyB3aXRoRnVuY3Rpb25TcGFuLCB3aXRoSGFuZG9mZlNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NyZWF0ZVNwYW5zLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZW5jb2RlVWludDhBcnJheVRvQmFzZTY0IH0gZnJvbSBcIi4vdXRpbHMvYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgaXNBcnJheUJ1ZmZlclZpZXcsIGlzTm9kZUJ1ZmZlciwgaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QsIHRvU21hcnRTdHJpbmcsIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5pbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuaW1wb3J0IHsgYWRkRXJyb3JUb0N1cnJlbnRTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuSXRlbVN0cmVhbUV2ZW50IH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBpc0ludm9rZUNvbXB1dGVyIH0gZnJvbSBcIi4vY29tcHV0ZXIubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuZnVuY3Rpb24gaXNBcHByb3ZhbEl0ZW1MaWtlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCEoJ3Jhd0l0ZW0nIGluIHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJhd0l0ZW0gPSB2YWx1ZS5yYXdJdGVtO1xuICAgIGlmICghcmF3SXRlbSB8fCB0eXBlb2YgcmF3SXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBpdGVtVHlwZSA9IHJhd0l0ZW0udHlwZTtcbiAgICByZXR1cm4gaXRlbVR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyB8fCBpdGVtVHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnO1xufVxuZnVuY3Rpb24gZ2V0QXBwcm92YWxJZGVudGl0eShhcHByb3ZhbCkge1xuICAgIGNvbnN0IHJhd0l0ZW0gPSBhcHByb3ZhbC5yYXdJdGVtO1xuICAgIGlmICghcmF3SXRlbSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAocmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcgJiYgcmF3SXRlbS5jYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuIGBmdW5jdGlvbl9jYWxsOiR7cmF3SXRlbS5jYWxsSWR9YDtcbiAgICB9XG4gICAgaWYgKCdjYWxsSWQnIGluIHJhd0l0ZW0gJiYgcmF3SXRlbS5jYWxsSWQpIHtcbiAgICAgICAgcmV0dXJuIGAke3Jhd0l0ZW0udHlwZX06JHtyYXdJdGVtLmNhbGxJZH1gO1xuICAgIH1cbiAgICBjb25zdCBpZCA9ICdpZCcgaW4gcmF3SXRlbSA/IHJhd0l0ZW0uaWQgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGlkKSB7XG4gICAgICAgIHJldHVybiBgJHtyYXdJdGVtLnR5cGV9OiR7aWR9YDtcbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIHJhd0l0ZW0ucHJvdmlkZXJEYXRhID09PSAnb2JqZWN0JyAmJiByYXdJdGVtLnByb3ZpZGVyRGF0YVxuICAgICAgICA/IHJhd0l0ZW0ucHJvdmlkZXJEYXRhXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmIChwcm92aWRlckRhdGE/LmlkKSB7XG4gICAgICAgIHJldHVybiBgJHtyYXdJdGVtLnR5cGV9OnByb3ZpZGVyOiR7cHJvdmlkZXJEYXRhLmlkfWA7XG4gICAgfVxuICAgIGNvbnN0IGFnZW50TmFtZSA9ICdhZ2VudCcgaW4gYXBwcm92YWwgJiYgYXBwcm92YWwuYWdlbnQgPyBhcHByb3ZhbC5hZ2VudC5uYW1lIDogJyc7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGAke2FnZW50TmFtZX06JHtyYXdJdGVtLnR5cGV9OiR7SlNPTi5zdHJpbmdpZnkocmF3SXRlbSl9YDtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gYCR7YWdlbnROYW1lfToke3Jhd0l0ZW0udHlwZX1gO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZvcm1hdEZpbmFsT3V0cHV0VHlwZUVycm9yKGVycm9yKSB7XG4gICAgLy8gU3VyZmFjZSBzdHJ1Y3R1cmVkIG91dHB1dCB2YWxpZGF0aW9uIGhpbnRzIHdpdGhvdXQgZWNob2luZyBwb3RlbnRpYWxseSBsYXJnZSBvciBzZW5zaXRpdmUgcGF5bG9hZHMuXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgICAgICAgY29uc3QgaXNzdWUgPSBlcnJvci5pc3N1ZXNbMF07XG4gICAgICAgICAgICBpZiAoaXNzdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc3N1ZVBhdGhQYXJ0cyA9IEFycmF5LmlzQXJyYXkoaXNzdWUucGF0aCkgPyBpc3N1ZS5wYXRoIDogW107XG4gICAgICAgICAgICAgICAgY29uc3QgaXNzdWVQYXRoID0gaXNzdWVQYXRoUGFydHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICA/IGlzc3VlUGF0aFBhcnRzLm1hcCgocGFydCkgPT4gU3RyaW5nKHBhcnQpKS5qb2luKCcuJylcbiAgICAgICAgICAgICAgICAgICAgOiAnKHJvb3QpJztcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gdHJ1bmNhdGVGb3JEZXZlbG9wZXIoaXNzdWUubWVzc2FnZSA/PyAnJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGZhaWxlZCBzY2hlbWEgdmFsaWRhdGlvbiBhdCBcIiR7aXNzdWVQYXRofVwiICgke21lc3NhZ2V9KS5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICdJbnZhbGlkIG91dHB1dCB0eXBlOiBmaW5hbCBhc3Npc3RhbnQgb3V0cHV0IGZhaWxlZCBzY2hlbWEgdmFsaWRhdGlvbi4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBgSW52YWxpZCBvdXRwdXQgdHlwZTogJHt0cnVuY2F0ZUZvckRldmVsb3BlcihlcnJvci5tZXNzYWdlKX1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgLy8gU3dhbGxvdyBmb3JtYXR0aW5nIGVycm9ycyBzbyB3ZSBjYW4gcmV0dXJuIGEgZ2VuZXJpYyBtZXNzYWdlIGJlbG93LlxuICAgIH1cbiAgICByZXR1cm4gJ0ludmFsaWQgb3V0cHV0IHR5cGU6IGZpbmFsIGFzc2lzdGFudCBvdXRwdXQgZGlkIG5vdCBtYXRjaCB0aGUgZXhwZWN0ZWQgc2NoZW1hLic7XG59XG5mdW5jdGlvbiB0cnVuY2F0ZUZvckRldmVsb3BlcihtZXNzYWdlLCBtYXhMZW5ndGggPSAxNjApIHtcbiAgICBjb25zdCB0cmltbWVkID0gbWVzc2FnZS50cmltKCk7XG4gICAgaWYgKCF0cmltbWVkKSB7XG4gICAgICAgIHJldHVybiAnU2NoZW1hIHZhbGlkYXRpb24gZmFpbGVkLic7XG4gICAgfVxuICAgIGlmICh0cmltbWVkLmxlbmd0aCA8PSBtYXhMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRyaW1tZWQ7XG4gICAgfVxuICAgIHJldHVybiBgJHt0cmltbWVkLnNsaWNlKDAsIG1heExlbmd0aCAtIDMpfS4uLmA7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogV2Fsa3MgYSByYXcgbW9kZWwgcmVzcG9uc2UgYW5kIGNsYXNzaWZpZXMgZWFjaCBpdGVtIHNvIHRoZSBydW5uZXIgY2FuIHNjaGVkdWxlIGZvbGxvdy11cCB3b3JrLlxuICogUmV0dXJucyBib3RoIHRoZSBzZXJpYWxpemFibGUgUnVuSXRlbXMgKGZvciBoaXN0b3J5L3N0cmVhbWluZykgYW5kIHRoZSBhY3Rpb25hYmxlIHRvb2wgbWV0YWRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzTW9kZWxSZXNwb25zZShtb2RlbFJlc3BvbnNlLCBhZ2VudCwgdG9vbHMsIGhhbmRvZmZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBjb25zdCBydW5IYW5kb2ZmcyA9IFtdO1xuICAgIGNvbnN0IHJ1bkZ1bmN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bkNvbXB1dGVyQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1blNoZWxsQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bkFwcGx5UGF0Y2hBY3Rpb25zID0gW107XG4gICAgY29uc3QgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cyA9IFtdO1xuICAgIGNvbnN0IHRvb2xzVXNlZCA9IFtdO1xuICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKGhhbmRvZmZzLm1hcCgoaCkgPT4gW2gudG9vbE5hbWUsIGhdKSk7XG4gICAgLy8gUmVzb2x2ZSB0b29scyB1cGZyb250IHNvIHdlIGNhbiBsb29rIHVwIHRoZSBjb25jcmV0ZSBoYW5kbGVyIGluIE8oMSkgd2hpbGUgaXRlcmF0aW5nIG91dHB1dHMuXG4gICAgY29uc3QgZnVuY3Rpb25NYXAgPSBuZXcgTWFwKHRvb2xzLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnZnVuY3Rpb24nKS5tYXAoKHQpID0+IFt0Lm5hbWUsIHRdKSk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnY29tcHV0ZXInKTtcbiAgICBjb25zdCBzaGVsbFRvb2wgPSB0b29scy5maW5kKCh0KSA9PiB0LnR5cGUgPT09ICdzaGVsbCcpO1xuICAgIGNvbnN0IGFwcGx5UGF0Y2hUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnYXBwbHlfcGF0Y2gnKTtcbiAgICBjb25zdCBtY3BUb29sTWFwID0gbmV3IE1hcCh0b29sc1xuICAgICAgICAuZmlsdGVyKCh0KSA9PiB0LnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3AnKVxuICAgICAgICAubWFwKCh0KSA9PiB0KVxuICAgICAgICAubWFwKCh0KSA9PiBbdC5wcm92aWRlckRhdGEuc2VydmVyX2xhYmVsLCB0XSkpO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIG1vZGVsUmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0LnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IG91dHB1dC5uYW1lO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2godG9vbE5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcgfHxcbiAgICAgICAgICAgICAgICBvdXRwdXQubmFtZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0Jykge1xuICAgICAgICAgICAgICAgIC8vIEhvc3RlZCByZW1vdGUgTUNQIHNlcnZlcidzIGFwcHJvdmFsIHByb2Nlc3NcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1jcFNlcnZlckxhYmVsID0gcHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbDtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJUb29sID0gbWNwVG9vbE1hcC5nZXQobWNwU2VydmVyTGFiZWwpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWNwU2VydmVyVG9vbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBNQ1Agc2VydmVyICgke21jcFNlcnZlckxhYmVsfSkgbm90IGZvdW5kIGluIEFnZW50ICgke2FnZW50Lm5hbWV9KWA7XG4gICAgICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtY3Bfc2VydmVyX2xhYmVsOiBtY3BTZXJ2ZXJMYWJlbCB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRG8gdGhpcyBhcHByb3ZhbCBsYXRlcjpcbiAgICAgICAgICAgICAgICAvLyBXZSBzdXBwb3J0IGJvdGggb25BcHByb3ZhbCBjYWxsYmFjayAobGlrZSB0aGUgUHl0aG9uIFNESyBkb2VzKSBhbmQgSElUTCBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbXVzdCB1c2UgdGhpcyBuYW1lIHRvIGFsaWduIHdpdGggdGhlIG5hbWUgc2VudCBmcm9tIHRoZSBzZXJ2ZXJzXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb3ZpZGVyRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpZDogcHJvdmlkZXJEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCk7XG4gICAgICAgICAgICAgICAgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEl0ZW06IGFwcHJvdmFsSXRlbSxcbiAgICAgICAgICAgICAgICAgICAgbWNwVG9vbDogbWNwU2VydmVyVG9vbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1jcFNlcnZlclRvb2wucHJvdmlkZXJEYXRhLm9uX2FwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gb25BcHByb3ZhbCBmdW5jdGlvbiBleGlzdHMsIGl0IGNvbmZpcm1zIHRoZSBhcHByb3ZhbCByaWdodCBhZnRlciB0aGlzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaHVzLCB0aGlzIGFwcHJvdmFsIGl0ZW0gbXVzdCBiZSBhcHBlbmRlZCBvbmx5IGZvciB0aGUgbmV4dCB0dXJuIGludGVycnVwdGlvbiBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ3JlYXNvbmluZycpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blJlYXNvbmluZ0l0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnY29tcHV0ZXJfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnY29tcHV0ZXJfdXNlJyk7XG4gICAgICAgICAgICBpZiAoIWNvbXB1dGVyVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5Db21wdXRlckFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBjb21wdXRlcjogY29tcHV0ZXJUb29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdzaGVsbF9jYWxsJykge1xuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKCdzaGVsbCcpO1xuICAgICAgICAgICAgaWYgKCFzaGVsbFRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgc2hlbGwgYWN0aW9uIHdpdGhvdXQgYSBzaGVsbCB0b29sLicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgcHJvZHVjZWQgc2hlbGwgYWN0aW9uIHdpdGhvdXQgYSBzaGVsbCB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuU2hlbGxBY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgc2hlbGw6IHNoZWxsVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnYXBwbHlfcGF0Y2hfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnYXBwbHlfcGF0Y2gnKTtcbiAgICAgICAgICAgIGlmICghYXBwbHlQYXRjaFRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgYXBwbHlfcGF0Y2ggYWN0aW9uIHdpdGhvdXQgYW4gYXBwbHlfcGF0Y2ggdG9vbC4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ01vZGVsIHByb2R1Y2VkIGFwcGx5X3BhdGNoIGFjdGlvbiB3aXRob3V0IGFuIGFwcGx5X3BhdGNoIHRvb2wuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5BcHBseVBhdGNoQWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIGFwcGx5UGF0Y2g6IGFwcGx5UGF0Y2hUb29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvb2xzVXNlZC5wdXNoKG91dHB1dC5uYW1lKTtcbiAgICAgICAgY29uc3QgaGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KG91dHB1dC5uYW1lKTtcbiAgICAgICAgaWYgKGhhbmRvZmYpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBydW5IYW5kb2Zmcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmYsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgICAgICBpZiAoIWZ1bmN0aW9uVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogb3V0cHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHtvdXRwdXQubmFtZX0gbm90IGZvdW5kIGluIGFnZW50ICR7YWdlbnQubmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuRnVuY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogZnVuY3Rpb25Ub29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmV3SXRlbXM6IGl0ZW1zLFxuICAgICAgICBoYW5kb2ZmczogcnVuSGFuZG9mZnMsXG4gICAgICAgIGZ1bmN0aW9uczogcnVuRnVuY3Rpb25zLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHJ1bkNvbXB1dGVyQWN0aW9ucyxcbiAgICAgICAgc2hlbGxBY3Rpb25zOiBydW5TaGVsbEFjdGlvbnMsXG4gICAgICAgIGFwcGx5UGF0Y2hBY3Rpb25zOiBydW5BcHBseVBhdGNoQWN0aW9ucyxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogcnVuTUNQQXBwcm92YWxSZXF1ZXN0cyxcbiAgICAgICAgdG9vbHNVc2VkOiB0b29sc1VzZWQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5TaGVsbEFjdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkFwcGx5UGF0Y2hBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbmV4dFN0ZXBTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX2hhbmRvZmYnKSxcbiAgICAgICAgbmV3QWdlbnQ6IHouYW55KCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfcnVuX2FnYWluJyksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSxcbiAgICAgICAgZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG5dKTtcbi8qKlxuICogSW50ZXJuYWwgY29udmVuaWVuY2Ugd3JhcHBlciB0aGF0IGdyb3VwcyB0aGUgb3V0Y29tZSBvZiBhIHNpbmdsZSBhZ2VudCB0dXJuLiBJdCBsZXRzIHRoZSBjYWxsZXJcbiAqIHVwZGF0ZSB0aGUgUnVuU3RhdGUgaW4gb25lIHNob3QgYW5kIGRlY2lkZSB3aGljaCBzdGVwIHRvIGV4ZWN1dGUgbmV4dC5cbiAqL1xuY2xhc3MgU2luZ2xlU3RlcFJlc3VsdCB7XG4gICAgb3JpZ2luYWxJbnB1dDtcbiAgICBtb2RlbFJlc3BvbnNlO1xuICAgIHByZVN0ZXBJdGVtcztcbiAgICBuZXdTdGVwSXRlbXM7XG4gICAgbmV4dFN0ZXA7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGlucHV0IGl0ZW1zIChpLmUuLCB0aGUgaXRlbXMgYmVmb3JlIHJ1bigpIHdhcyBjYWxsZWQpLiBNYXkgYmUgbXV0YXRlZCBieSBoYW5kb2ZmIGlucHV0IGZpbHRlcnMuXG4gICAgICovXG4gICAgb3JpZ2luYWxJbnB1dCwgXG4gICAgLyoqXG4gICAgICogVGhlIG1vZGVsIHJlc3BvbnNlIGZvciB0aGUgY3VycmVudCBzdGVwXG4gICAgICovXG4gICAgbW9kZWxSZXNwb25zZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGl0ZW1zIGJlZm9yZSB0aGUgY3VycmVudCBzdGVwIHdhcyBleGVjdXRlZFxuICAgICAqL1xuICAgIHByZVN0ZXBJdGVtcywgXG4gICAgLyoqXG4gICAgICogVGhlIGl0ZW1zIGFmdGVyIHRoZSBjdXJyZW50IHN0ZXAgd2FzIGV4ZWN1dGVkXG4gICAgICovXG4gICAgbmV3U3RlcEl0ZW1zLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbmV4dCBzdGVwIHRvIGV4ZWN1dGVcbiAgICAgKi9cbiAgICBuZXh0U3RlcCkge1xuICAgICAgICB0aGlzLm9yaWdpbmFsSW5wdXQgPSBvcmlnaW5hbElucHV0O1xuICAgICAgICB0aGlzLm1vZGVsUmVzcG9uc2UgPSBtb2RlbFJlc3BvbnNlO1xuICAgICAgICB0aGlzLnByZVN0ZXBJdGVtcyA9IHByZVN0ZXBJdGVtcztcbiAgICAgICAgdGhpcy5uZXdTdGVwSXRlbXMgPSBuZXdTdGVwSXRlbXM7XG4gICAgICAgIHRoaXMubmV4dFN0ZXAgPSBuZXh0U3RlcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biAoaS5lLiBldmVyeXRoaW5nIGdlbmVyYXRlZCBhZnRlciBvcmlnaW5hbElucHV0KVxuICAgICAqL1xuICAgIGdldCBnZW5lcmF0ZWRJdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlU3RlcEl0ZW1zLmNvbmNhdCh0aGlzLm5ld1N0ZXBJdGVtcyk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFJlc2V0cyB0aGUgdG9vbCBjaG9pY2Ugd2hlbiB0aGUgYWdlbnQgaXMgY29uZmlndXJlZCB0byBwcmVmZXIgYSBmcmVzaCB0b29sIHNlbGVjdGlvbiBhZnRlclxuICogYW55IHRvb2wgdXNhZ2UuIFRoaXMgcHJldmVudHMgdGhlIHByb3ZpZGVyIGZyb20gcmV1c2luZyBzdGFsZSB0b29sIGhpbnRzIGFjcm9zcyB0dXJucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUmVzZXRUb29sQ2hvaWNlKGFnZW50LCB0b29sVXNlVHJhY2tlciwgbW9kZWxTZXR0aW5ncykge1xuICAgIGlmIChhZ2VudC5yZXNldFRvb2xDaG9pY2UgJiYgdG9vbFVzZVRyYWNrZXIuaGFzVXNlZFRvb2xzKGFnZW50KSkge1xuICAgICAgICByZXR1cm4geyAuLi5tb2RlbFNldHRpbmdzLCB0b29sQ2hvaWNlOiB1bmRlZmluZWQgfTtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGVsU2V0dGluZ3M7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogQ29udGludWVzIGEgdHVybiB0aGF0IHdhcyBwcmV2aW91c2x5IGludGVycnVwdGVkIHdhaXRpbmcgZm9yIHRvb2wgYXBwcm92YWwuIEV4ZWN1dGVzIHRoZSBub3dcbiAqIGFwcHJvdmVkIHRvb2xzIGFuZCByZXR1cm5zIHRoZSByZXN1bHRpbmcgc3RlcCB0cmFuc2l0aW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUludGVycnVwdGVkVHVybihhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIC8vIGNhbGxfaWRzIGZvciBmdW5jdGlvbiB0b29sc1xuICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbElkcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtICYmXG4gICAgICAgICdjYWxsSWQnIGluIGl0ZW0ucmF3SXRlbSAmJlxuICAgICAgICBpdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLnJhd0l0ZW0uY2FsbElkKTtcbiAgICAvLyBXZSBhbHJlYWR5IHBlcnNpc3RlZCB0aGUgdHVybiBvbmNlIHdoZW4gdGhlIGFwcHJvdmFsIGludGVycnVwdCB3YXMgcmFpc2VkLCBzbyB0aGVcbiAgICAvLyBjb3VudGVyIHJlZmxlY3RzIHRoZSBhcHByb3ZhbCBpdGVtcyBhcyBcImZsdXNoZWRcIi4gV2hlbiB3ZSByZXN1bWUgdGhlIHNhbWUgdHVybiB3ZSBuZWVkXG4gICAgLy8gdG8gcmV3aW5kIGl0IHNvIHRoZSBldmVudHVhbCB0b29sIG91dHB1dCBmb3IgdGhpcyBjYWxsIGlzIHN0aWxsIHdyaXR0ZW4gdG8gdGhlIHNlc3Npb24uXG4gICAgY29uc3QgcGVuZGluZ0FwcHJvdmFsSXRlbXMgPSBzdGF0ZVxuICAgICAgICAuZ2V0SW50ZXJydXB0aW9ucygpXG4gICAgICAgIC5maWx0ZXIoaXNBcHByb3ZhbEl0ZW1MaWtlKTtcbiAgICBpZiAocGVuZGluZ0FwcHJvdmFsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGFwcHJvdmFsIG9mIHBlbmRpbmdBcHByb3ZhbEl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCBpZGVudGl0eSA9IGdldEFwcHJvdmFsSWRlbnRpdHkoYXBwcm92YWwpO1xuICAgICAgICAgICAgaWYgKGlkZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgcGVuZGluZ0FwcHJvdmFsSWRlbnRpdGllcy5hZGQoaWRlbnRpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBsZXQgcmV3aW5kQ291bnQgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSBvcmlnaW5hbFByZVN0ZXBJdGVtcy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGlkZW50aXR5ID0gZ2V0QXBwcm92YWxJZGVudGl0eShpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlkZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMuaGFzKGlkZW50aXR5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV3aW5kQ291bnQrKztcbiAgICAgICAgICAgICAgICBwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzLmRlbGV0ZShpZGVudGl0eSk7XG4gICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdBcHByb3ZhbElkZW50aXRpZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQZXJzaXN0aW5nIHRoZSBhcHByb3ZhbCByZXF1ZXN0IGFscmVhZHkgYWR2YW5jZWQgdGhlIGNvdW50ZXIgb25jZSwgc28gdW5kbyB0aGUgaW5jcmVtZW50XG4gICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgd2Ugd3JpdGUgdGhlIGZpbmFsIHRvb2wgb3V0cHV0IGJhY2sgdG8gdGhlIHNlc3Npb24gd2hlbiB0aGUgdHVybiByZXN1bWVzLlxuICAgICAgICAgICAgaWYgKHJld2luZENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IE1hdGgubWF4KDAsIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCAtIHJld2luZENvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBSdW4gZnVuY3Rpb24gdG9vbHMgdGhhdCByZXF1aXJlIGFwcHJvdmFsIGFmdGVyIHRoZXkgZ2V0IHRoZWlyIGFwcHJvdmFsIHJlc3VsdHNcbiAgICBjb25zdCBmdW5jdGlvblRvb2xSdW5zID0gcHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLmZpbHRlcigocnVuKSA9PiB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbkNhbGxJZHMuaW5jbHVkZXMocnVuLnRvb2xDYWxsLmNhbGxJZCk7XG4gICAgfSk7XG4gICAgY29uc3QgZnVuY3Rpb25SZXN1bHRzID0gYXdhaXQgZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCBmdW5jdGlvblRvb2xSdW5zLCBydW5uZXIsIHN0YXRlKTtcbiAgICAvLyBUaGVyZSBpcyBubyBidWlsdC1pbiBISVRMIGFwcHJvdmFsIHN1cmZhY2UgZm9yIGNvbXB1dGVyIHRvb2xzIHRvZGF5LCBzbyBldmVyeSBwZW5kaW5nIGFjdGlvblxuICAgIC8vIGlzIGV4ZWN1dGVkIGltbWVkaWF0ZWx5IHdoZW4gdGhlIHR1cm4gcmVzdW1lcy5cbiAgICBjb25zdCBjb21wdXRlclJlc3VsdHMgPSBwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMubGVuZ3RoID4gMFxuICAgICAgICA/IGF3YWl0IGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dClcbiAgICAgICAgOiBbXTtcbiAgICAvLyBXaGVuIHJlc3VtaW5nIHdlIHJlY2VpdmUgdGhlIG9yaWdpbmFsIFJ1bkl0ZW0gcmVmZXJlbmNlczsgc3VwcHJlc3MgZHVwbGljYXRlcyBzbyBoaXN0b3J5IGFuZCBzdHJlYW1pbmcgZG8gbm90IGRvdWJsZS1lbWl0IHRoZSBzYW1lIGl0ZW1zLlxuICAgIGNvbnN0IG9yaWdpbmFsUHJlU3RlcEl0ZW1TZXQgPSBuZXcgU2V0KG9yaWdpbmFsUHJlU3RlcEl0ZW1zKTtcbiAgICBjb25zdCBuZXdJdGVtcyA9IFtdO1xuICAgIGNvbnN0IG5ld0l0ZW1zU2V0ID0gbmV3IFNldCgpO1xuICAgIGNvbnN0IGFwcGVuZElmTmV3ID0gKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKG9yaWdpbmFsUHJlU3RlcEl0ZW1TZXQuaGFzKGl0ZW0pIHx8IG5ld0l0ZW1zU2V0LmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG5ld0l0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIG5ld0l0ZW1zU2V0LmFkZChpdGVtKTtcbiAgICB9O1xuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIGZ1bmN0aW9uUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhyZXN1bHQucnVuSXRlbSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIGNvbXB1dGVyUmVzdWx0cykge1xuICAgICAgICBhcHBlbmRJZk5ldyhyZXN1bHQpO1xuICAgIH1cbiAgICAvLyBSdW4gTUNQIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgbWNwQXBwcm92YWxSdW5zID0gcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gKHJ1bi5yZXF1ZXN0SXRlbS50eXBlID09PSAndG9vbF9hcHByb3ZhbF9pdGVtJyAmJlxuICAgICAgICAgICAgcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgICAgICBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpO1xuICAgIH0pO1xuICAgIC8vIEhvc3RlZCBNQ1AgYXBwcm92YWxzIG1heSBzdGlsbCBiZSB3YWl0aW5nIG9uIGEgaHVtYW4gZGVjaXNpb24gd2hlbiB0aGUgdHVybiByZXN1bWVzLlxuICAgIGNvbnN0IHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbHMgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgcGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFsSWRzID0gbmV3IFNldCgpO1xuICAgIC8vIEtlZXAgdHJhY2sgb2YgYXBwcm92YWxzIHdlIHN0aWxsIG5lZWQgdG8gc3VyZmFjZSBuZXh0IHR1cm4gc28gSElUTCBmbG93cyBjYW4gcmVzdW1lIGNsZWFubHkuXG4gICAgZm9yIChjb25zdCBydW4gb2YgbWNwQXBwcm92YWxSdW5zKSB7XG4gICAgICAgIC8vIHRoZSBhcHByb3ZhbF9yZXF1ZXN0X2lkIFwibWNwcl8xMjMuLi5cIlxuICAgICAgICBjb25zdCByYXdJdGVtID0gcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW07XG4gICAgICAgIGlmIChyYXdJdGVtLnR5cGUgIT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSByYXdJdGVtLmlkO1xuICAgICAgICBjb25zdCBhcHByb3ZlZCA9IHN0YXRlLl9jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXRlbSBuYW1lIG11c3QgYmUgdGhlIHNhbWUgd2l0aCB0aGUgb25lIHNlbnQgZnJvbSBSZXNwb25zZXMgQVBJIHNlcnZlclxuICAgICAgICAgICAgdG9vbE5hbWU6IHJhd0l0ZW0ubmFtZSxcbiAgICAgICAgICAgIGNhbGxJZDogYXBwcm92YWxSZXF1ZXN0SWQsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFwcHJvdmVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0ge1xuICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmVkLFxuICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICAgICAgICAgIHJlYXNvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFRlbGwgUmVzcG9uc2VzIEFQSSBzZXJ2ZXIgdGhlIGFwcHJvdmFsIHJlc3VsdCBpbiB0aGUgbmV4dCB0dXJuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUl0ZW0gPSBuZXcgUnVuVG9vbENhbGxJdGVtKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgfSwgYWdlbnQpO1xuICAgICAgICAgICAgYXBwZW5kSWZOZXcocmVzcG9uc2VJdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbHMuYWRkKHJ1bi5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICBwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxJZHMuYWRkKGFwcHJvdmFsUmVxdWVzdElkKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX21jcF90b29sX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICB0b29sOiBydW4ubWNwVG9vbCxcbiAgICAgICAgICAgICAgICBydW5JdGVtOiBydW4ucmVxdWVzdEl0ZW0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFwcGVuZElmTmV3KHJ1bi5yZXF1ZXN0SXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VydmVyLW1hbmFnZWQgY29udmVyc2F0aW9ucyByZWx5IG9uIHByZVN0ZXBJdGVtcyB0byByZS1zdXJmYWNlIHBlbmRpbmcgYXBwcm92YWxzLlxuICAgIC8vIEtlZXAgdW5yZXNvbHZlZCBob3N0ZWQgTUNQIGFwcHJvdmFscyBpbiBwbGFjZSBzbyBISVRMIGZsb3dzIHN0aWxsIGhhdmUgc29tZXRoaW5nIHRvIGFwcHJvdmUgbmV4dCB0dXJuLlxuICAgIC8vIERyb3AgcmVzb2x2ZWQgYXBwcm92YWwgcGxhY2Vob2xkZXJzIHNvIHRoZXkgYXJlIG5vdCByZXBsYXllZCBvbiB0aGUgbmV4dCB0dXJuLCBidXQga2VlcFxuICAgIC8vIHBlbmRpbmcgYXBwcm92YWxzIGluIHBsYWNlIHRvIHNpZ25hbCB0aGUgb3V0c3RhbmRpbmcgd29yayB0byB0aGUgVUkgYW5kIHNlc3Npb24gc3RvcmUuXG4gICAgY29uc3QgcHJlU3RlcEl0ZW1zID0gb3JpZ2luYWxQcmVTdGVwSXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgIGlmICghKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcgJiZcbiAgICAgICAgICAgIGl0ZW0ucmF3SXRlbS5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpIHtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxzLmhhcyhpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSBpdGVtLnJhd0l0ZW0uaWQ7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWxSZXF1ZXN0SWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVuZGluZ0hvc3RlZE1DUEFwcHJvdmFsSWRzLmhhcyhhcHByb3ZhbFJlcXVlc3RJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIGNvbnN0IGNvbXBsZXRlZFN0ZXAgPSBhd2FpdCBtYXliZUNvbXBsZXRlVHVybkZyb21Ub29sUmVzdWx0cyh7XG4gICAgICAgIGFnZW50LFxuICAgICAgICBydW5uZXIsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBmdW5jdGlvblJlc3VsdHMsXG4gICAgICAgIG9yaWdpbmFsSW5wdXQsXG4gICAgICAgIG5ld1Jlc3BvbnNlLFxuICAgICAgICBwcmVTdGVwSXRlbXMsXG4gICAgICAgIG5ld0l0ZW1zLFxuICAgIH0pO1xuICAgIGlmIChjb21wbGV0ZWRTdGVwKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRTdGVwO1xuICAgIH1cbiAgICAvLyB3ZSBvbmx5IHJhbiBuZXcgdG9vbHMgYW5kIHNpZGUgZWZmZWN0cy4gV2UgbmVlZCB0byBydW4gdGhlIHJlc3Qgb2YgdGhlIGFnZW50XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBFeGVjdXRlcyBldmVyeSBmb2xsb3ctdXAgYWN0aW9uIHRoZSBtb2RlbCByZXF1ZXN0ZWQgKGZ1bmN0aW9uIHRvb2xzLCBjb21wdXRlciBhY3Rpb25zLCBNQ1AgZmxvd3MpLFxuICogYXBwZW5kcyB0aGVpciBvdXRwdXRzIHRvIHRoZSBydW4gaGlzdG9yeSwgYW5kIGRldGVybWluZXMgdGhlIG5leHQgc3RlcCBmb3IgdGhlIGFnZW50IGxvb3AuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZShhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIC8vIFJldXNlIHRoZSBzYW1lIGFycmF5IHJlZmVyZW5jZSBzbyB3ZSBjYW4gY29tcGFyZSBvYmplY3QgaWRlbnRpdHkgd2hlbiBkZWNpZGluZyB3aGV0aGVyIHRvXG4gICAgLy8gYXBwZW5kIG5ldyBpdGVtcywgZW5zdXJpbmcgd2UgbmV2ZXIgZG91YmxlLXN0cmVhbSBleGlzdGluZyBSdW5JdGVtcy5cbiAgICBjb25zdCBwcmVTdGVwSXRlbXMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtcztcbiAgICBjb25zdCBzZWVuSXRlbXMgPSBuZXcgU2V0KG9yaWdpbmFsUHJlU3RlcEl0ZW1zKTtcbiAgICBjb25zdCBuZXdJdGVtcyA9IFtdO1xuICAgIGNvbnN0IGFwcGVuZElmTmV3ID0gKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKHNlZW5JdGVtcy5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXdJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICBzZWVuSXRlbXMuYWRkKGl0ZW0pO1xuICAgIH07XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICAvLyBSdW4gZnVuY3Rpb24gdG9vbHMgYW5kIGNvbXB1dGVyIGFjdGlvbnMgaW4gcGFyYWxsZWw7IG5laXRoZXIgZGVwZW5kcyBvbiB0aGUgb3RoZXIncyBzaWRlIGVmZmVjdHMuXG4gICAgY29uc3QgW2Z1bmN0aW9uUmVzdWx0cywgY29tcHV0ZXJSZXN1bHRzLCBzaGVsbFJlc3VsdHMsIGFwcGx5UGF0Y2hSZXN1bHRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMsIHJ1bm5lciwgc3RhdGUpLFxuICAgICAgICBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICBleGVjdXRlU2hlbGxBY3Rpb25zKGFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS5zaGVsbEFjdGlvbnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICBleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmFwcGx5UGF0Y2hBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICBdKTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiBmdW5jdGlvblJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcocmVzdWx0LnJ1bkl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29tcHV0ZXJSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlbGxSZXN1bHRzKSB7XG4gICAgICAgIGFwcGVuZElmTmV3KGl0ZW0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXBwbHlQYXRjaFJlc3VsdHMpIHtcbiAgICAgICAgYXBwZW5kSWZOZXcoaXRlbSk7XG4gICAgfVxuICAgIC8vIHJ1biBob3N0ZWQgTUNQIGFwcHJvdmFsIHJlcXVlc3RzXG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFwcHJvdmFsUmVxdWVzdCBvZiBwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzKSB7XG4gICAgICAgICAgICBjb25zdCB0b29sRGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0gYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICAucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgaWYgKHRvb2xEYXRhLm9uX2FwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgLy8gc3luY2hyb25vdXNseSBoYW5kbGUgdGhlIGFwcHJvdmFsIHByb2Nlc3MgaGVyZVxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzdWx0ID0gYXdhaXQgdG9vbERhdGEub25fYXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXNwb25zZURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmFsUmVzdWx0LmFwcHJvdmUsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IHJlcXVlc3REYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246IGFwcHJvdmFsUmVzdWx0LnJlYXNvbixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogYXBwcm92YWxSZXNwb25zZURhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHJlY2VpdmUgYSB1c2VyJ3MgYXBwcm92YWwgb24gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2goYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfbWNwX3Rvb2xfYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogcmVxdWVzdERhdGEuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiByZXF1ZXN0RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSwgYWdlbnQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25SZXN1bHRzLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICAvLyBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsSXRlbS5ydW5JdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBwcm9jZXNzIGhhbmRvZmZzXG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2ZmcywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCk7XG4gICAgfVxuICAgIGNvbnN0IGNvbXBsZXRlZFN0ZXAgPSBhd2FpdCBtYXliZUNvbXBsZXRlVHVybkZyb21Ub29sUmVzdWx0cyh7XG4gICAgICAgIGFnZW50LFxuICAgICAgICBydW5uZXIsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBmdW5jdGlvblJlc3VsdHMsXG4gICAgICAgIG9yaWdpbmFsSW5wdXQsXG4gICAgICAgIG5ld1Jlc3BvbnNlLFxuICAgICAgICBwcmVTdGVwSXRlbXMsXG4gICAgICAgIG5ld0l0ZW1zLFxuICAgIH0pO1xuICAgIGlmIChjb21wbGV0ZWRTdGVwKSB7XG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRTdGVwO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgbW9kZWwgaXNzdWVkIGFueSB0b29sIGNhbGxzIG9yIGhhbmRvZmZzIGluIHRoaXMgdHVybixcbiAgICAvLyB3ZSBtdXN0IE5PVCB0cmVhdCBhbnkgYXNzaXN0YW50IG1lc3NhZ2UgaW4gdGhlIHNhbWUgdHVybiBhcyB0aGUgZmluYWwgb3V0cHV0LlxuICAgIC8vIFdlIHNob3VsZCBydW4gdGhlIGxvb3AgYWdhaW4gc28gdGhlIG1vZGVsIGNhbiBzZWUgdGhlIHRvb2wgcmVzdWx0cyBhbmQgcmVzcG9uZC5cbiAgICBjb25zdCBoYWRUb29sQ2FsbHNPckFjdGlvbnMgPSAocHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLnNoZWxsQWN0aW9ucz8ubGVuZ3RoID8/IDApID4gMCB8fFxuICAgICAgICAocHJvY2Vzc2VkUmVzcG9uc2UuYXBwbHlQYXRjaEFjdGlvbnM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzPy5sZW5ndGggPz8gMCkgPiAwO1xuICAgIGlmIChoYWRUb29sQ2FsbHNPckFjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgLy8gTm8gdG9vbCBjYWxscy9hY3Rpb25zIGluIHRoaXMgdHVybjsgc2FmZSB0byBjb25zaWRlciBhIHBsYWluIGFzc2lzdGFudCBtZXNzYWdlIGFzIGZpbmFsLlxuICAgIGNvbnN0IG1lc3NhZ2VJdGVtcyA9IG5ld0l0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKTtcbiAgICAvLyB3ZSB3aWxsIHVzZSB0aGUgbGFzdCBjb250ZW50IG91dHB1dCBhcyB0aGUgZmluYWwgb3V0cHV0XG4gICAgY29uc3QgcG90ZW50aWFsRmluYWxPdXRwdXQgPSBtZXNzYWdlSXRlbXMubGVuZ3RoID4gMFxuICAgICAgICA/IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UobWVzc2FnZUl0ZW1zW21lc3NhZ2VJdGVtcy5sZW5ndGggLSAxXS5yYXdJdGVtKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyBvdXRwdXQgd2UganVzdCBydW4gYWdhaW5cbiAgICBpZiAodHlwZW9mIHBvdGVudGlhbEZpbmFsT3V0cHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICAvLyBLZWVwIGxvb3BpbmcgaWYgYW55IHRvb2wgb3V0cHV0IHBsYWNlaG9sZGVycyBzdGlsbCByZXF1aXJlIGFuIGFwcHJvdmFsIGZvbGxvdy11cC5cbiAgICBjb25zdCBoYXNQZW5kaW5nVG9vbHNPckFwcHJvdmFscyA9IGZ1bmN0aW9uUmVzdWx0cy5zb21lKChyZXN1bHQpID0+IHJlc3VsdC5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSk7XG4gICAgaWYgKCFoYXNQZW5kaW5nVG9vbHNPckFwcHJvdmFscykge1xuICAgICAgICBpZiAoYWdlbnQub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBwb3RlbnRpYWxGaW5hbE91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhZ2VudC5vdXRwdXRUeXBlICE9PSAndGV4dCcgJiYgcG90ZW50aWFsRmluYWxPdXRwdXQpIHtcbiAgICAgICAgICAgIC8vIFN0cnVjdHVyZWQgb3V0cHV0IHNjaGVtYSA9PiBhbHdheXMgbGVhZHMgdG8gYSBmaW5hbCBvdXRwdXQgaWYgd2UgaGF2ZSB0ZXh0LlxuICAgICAgICAgICAgY29uc3QgeyBwYXJzZXIgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoYWdlbnQub3V0cHV0VHlwZSwgJ2ZpbmFsX291dHB1dCcpO1xuICAgICAgICAgICAgY29uc3QgW2Vycm9yXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihwb3RlbnRpYWxGaW5hbE91dHB1dCkpO1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0RXJyb3JNZXNzYWdlID0gZm9ybWF0RmluYWxPdXRwdXRUeXBlRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG91dHB1dEVycm9yTWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihvdXRwdXRFcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jywgb3V0cHV0OiBwb3RlbnRpYWxGaW5hbE91dHB1dCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xufVxuLy8gQ29uc29saWRhdGVzIHRoZSBsb2dpYyB0aGF0IGRldGVybWluZXMgd2hldGhlciB0b29sIHJlc3VsdHMgeWllbGRlZCBhIGZpbmFsIGFuc3dlcixcbi8vIHRyaWdnZXJlZCBhbiBpbnRlcnJ1cHRpb24sIG9yIHJlcXVpcmUgdGhlIGFnZW50IGxvb3AgdG8gY29udGludWUgcnVubmluZy5cbmFzeW5jIGZ1bmN0aW9uIG1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzKHsgYWdlbnQsIHJ1bm5lciwgc3RhdGUsIGZ1bmN0aW9uUmVzdWx0cywgb3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIH0pIHtcbiAgICBjb25zdCB0b29sT3V0Y29tZSA9IGF3YWl0IGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIGZ1bmN0aW9uUmVzdWx0cywgc3RhdGUpO1xuICAgIGlmICh0b29sT3V0Y29tZS5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xPdXRjb21lLmZpbmFsT3V0cHV0KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHRvb2xPdXRjb21lLmZpbmFsT3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgICAgICBvdXRwdXQ6IHRvb2xPdXRjb21lLmZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRvb2xPdXRjb21lLmlzSW50ZXJydXB0ZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0aW9uczogdG9vbE91dGNvbWUuaW50ZXJydXB0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBOb3JtYWxpemVzIHRvb2wgb3V0cHV0cyBvbmNlIHNvIGRvd25zdHJlYW0gY29kZSB3b3JrcyB3aXRoIGZ1bGx5IHN0cnVjdHVyZWQgcHJvdG9jb2wgaXRlbXMuXG4gKiBEb2luZyB0aGlzIGhlcmUga2VlcHMgQVBJIHN1cmZhY2Ugc3RhYmxlIGV2ZW4gd2hlbiBwcm92aWRlcnMgYWRkIG5ldyBzaGFwZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbENhbGwsIG91dHB1dCkge1xuICAgIGNvbnN0IG1heWJlU3RydWN0dXJlZE91dHB1dHMgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMob3V0cHV0KTtcbiAgICBpZiAobWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cykge1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmVkSXRlbXMgPSBtYXliZVN0cnVjdHVyZWRPdXRwdXRzLm1hcChjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgIG91dHB1dDogc3RydWN0dXJlZEl0ZW1zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9yZXN1bHQnLFxuICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB0ZXh0OiB0b1NtYXJ0U3RyaW5nKG91dHB1dCksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZpbGVWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGRpcmVjdEZpbGUgPSB2YWx1ZS5maWxlO1xuICAgIGlmICh0eXBlb2YgZGlyZWN0RmlsZSA9PT0gJ3N0cmluZycgJiYgZGlyZWN0RmlsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBkaXJlY3RGaWxlO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkT2JqZWN0ID0gbm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZShkaXJlY3RGaWxlKTtcbiAgICBpZiAobm9ybWFsaXplZE9iamVjdCkge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplZE9iamVjdDtcbiAgICB9XG4gICAgY29uc3QgbGVnYWN5VmFsdWUgPSBub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUodmFsdWUpO1xuICAgIGlmIChsZWdhY3lWYWx1ZSkge1xuICAgICAgICByZXR1cm4gbGVnYWN5VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoJ2RhdGEnIGluIHZhbHVlICYmIHZhbHVlLmRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBkYXRhVmFsdWUgPSB2YWx1ZS5kYXRhO1xuICAgICAgICBjb25zdCBoYXNTdHJpbmdEYXRhID0gdHlwZW9mIGRhdGFWYWx1ZSA9PT0gJ3N0cmluZycgJiYgZGF0YVZhbHVlLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IGhhc0JpbmFyeURhdGEgPSBkYXRhVmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIGRhdGFWYWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICBpZiAoIWhhc1N0cmluZ0RhdGEgJiYgIWhhc0JpbmFyeURhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5tZWRpYVR5cGUpIHx8XG4gICAgICAgICAgICAhaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiB0eXBlb2YgZGF0YVZhbHVlID09PSAnc3RyaW5nJyA/IGRhdGFWYWx1ZSA6IG5ldyBVaW50OEFycmF5KGRhdGFWYWx1ZSksXG4gICAgICAgICAgICBtZWRpYVR5cGU6IHZhbHVlLm1lZGlhVHlwZSxcbiAgICAgICAgICAgIGZpbGVuYW1lOiB2YWx1ZS5maWxlbmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUudXJsKSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHVybDogdmFsdWUudXJsIH07XG4gICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gdmFsdWUuZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgcmVmZXJlbmNlZElkID0gKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuaWQpICYmIHZhbHVlLmlkKSB8fFxuICAgICAgICAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlSWQpICYmIHZhbHVlLmZpbGVJZCk7XG4gICAgaWYgKHJlZmVyZW5jZWRJZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGlkOiByZWZlcmVuY2VkSWQgfTtcbiAgICAgICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZW5hbWUpKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSB2YWx1ZS5maWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxlZ2FjeUZpbGVWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGZpbGVuYW1lID0gdHlwZW9mIHZhbHVlLmZpbGVuYW1lID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlbmFtZS5sZW5ndGggPiAwXG4gICAgICAgID8gdmFsdWUuZmlsZW5hbWVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgbWVkaWFUeXBlID0gdHlwZW9mIHZhbHVlLm1lZGlhVHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubWVkaWFUeXBlLmxlbmd0aCA+IDBcbiAgICAgICAgPyB2YWx1ZS5tZWRpYVR5cGVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5maWxlRGF0YSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lZGlhVHlwZSB8fCAhZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IHZhbHVlLmZpbGVEYXRhLCBtZWRpYVR5cGUsIGZpbGVuYW1lIH07XG4gICAgfVxuICAgIGlmICh2YWx1ZS5maWxlRGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgdmFsdWUuZmlsZURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lZGlhVHlwZSB8fCAhZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG5ldyBVaW50OEFycmF5KHZhbHVlLmZpbGVEYXRhKSwgbWVkaWFUeXBlLCBmaWxlbmFtZSB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlLmZpbGVVcmwgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVVcmwubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHVybDogdmFsdWUuZmlsZVVybCB9O1xuICAgICAgICBpZiAoZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUuZmlsZUlkID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlSWQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGlkOiB2YWx1ZS5maWxlSWQgfTtcbiAgICAgICAgaWYgKGZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBpc05vbkVtcHR5U3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMDtcbn1cbmZ1bmN0aW9uIHRvSW5saW5lSW1hZ2VTdHJpbmcoZGF0YSwgbWVkaWFUeXBlKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAobWVkaWFUeXBlICYmICFkYXRhLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgICAgIHJldHVybiBhc0RhdGFVcmwoZGF0YSwgbWVkaWFUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGRhdGEpO1xuICAgIHJldHVybiBhc0RhdGFVcmwoYmFzZTY0LCBtZWRpYVR5cGUpO1xufVxuZnVuY3Rpb24gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKSB7XG4gICAgcmV0dXJuIG1lZGlhVHlwZSA/IGBkYXRhOiR7bWVkaWFUeXBlfTtiYXNlNjQsJHtiYXNlNjR9YCA6IGJhc2U2NDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBSdW5zIGV2ZXJ5IGZ1bmN0aW9uIHRvb2wgY2FsbCByZXF1ZXN0ZWQgYnkgdGhlIG1vZGVsIGFuZCByZXR1cm5zIHRoZWlyIG91dHB1dHMgYWxvbmdzaWRlXG4gKiB0aGUgYFJ1bkl0ZW1gIGluc3RhbmNlcyB0aGF0IHNob3VsZCBiZSBhcHBlbmRlZCB0byBoaXN0b3J5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUZ1bmN0aW9uVG9vbENhbGxzKGFnZW50LCB0b29sUnVucywgcnVubmVyLCBzdGF0ZSkge1xuICAgIGFzeW5jIGZ1bmN0aW9uIHJ1blNpbmdsZVRvb2wodG9vbFJ1bikge1xuICAgICAgICBsZXQgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0b29sUnVuLnRvb2wucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gdG9vbFJ1bi50b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTb21lIHRvb2xzIHJlcXVpcmUgYSBodW1hbiBvciBwb2xpY3kgY2hlY2sgYmVmb3JlIGV4ZWN1dGlvbjsgZGVmZXIgdW50aWwgYXBwcm92YWwgaXMgcmVjb3JkZWQuXG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sUnVuLnRvb2wubmVlZHNBcHByb3ZhbChzdGF0ZS5fY29udGV4dCwgcGFyc2VkQXJncywgdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAobmVlZHNBcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvLyByZWplY3RlZFxuICAgICAgICAgICAgICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgVG9vbCBleGVjdXRpb24gZm9yICR7dG9vbFJ1bi50b29sQ2FsbC5jYWxsSWR9IHdhcyBtYW51YWxseSByZWplY3RlZCBieSB1c2VyLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHJlc3BvbnNlKSwgYWdlbnQsIHJlc3BvbnNlKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFwcHJvdmFsICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBhcHByb3ZhbCBwcm9jZXNzIG5lZWRzIHRvIGJlIGRvbmUgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgYWdlbnQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpdGhGdW5jdGlvblNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uZXIuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLmlucHV0ID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbE91dHB1dCA9IGF3YWl0IHRvb2xSdW4udG9vbC5pbnZva2Uoc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzLCB7IHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsIH0pO1xuICAgICAgICAgICAgICAgIC8vIFVzZSBzdHJpbmcgZGF0YSBmb3IgdHJhY2luZyBhbmQgZXZlbnQgZW1pdHRlclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcodG9vbE91dHB1dCk7XG4gICAgICAgICAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gc3RyaW5nUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvblJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCB0b29sT3V0cHV0KSwgYWdlbnQsIHRvb2xPdXRwdXQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkUnVuUmVzdWx0ID0gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sUnVuLnRvb2xDYWxsKTtcbiAgICAgICAgICAgICAgICBpZiAobmVzdGVkUnVuUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0LmFnZW50UnVuUmVzdWx0ID0gbmVzdGVkUnVuUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRJbnRlcnJ1cHRpb25zID0gbmVzdGVkUnVuUmVzdWx0LmludGVycnVwdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRJbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0LmludGVycnVwdGlvbnMgPSBuZXN0ZWRJbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvblJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgcnVubmluZyB0b29sJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIEVtaXQgYWdlbnRfdG9vbF9lbmQgZXZlbiBvbiBlcnJvciB0byBtYWludGFpbiBjb25zaXN0ZW50IGV2ZW50IGxpZmVjeWNsZVxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yUmVzdWx0ID0gU3RyaW5nKGVycm9yKTtcbiAgICAgICAgICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xSdW4udG9vbCwgZXJyb3JSZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCBlcnJvclJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0b29sUnVucy5tYXAocnVuU2luZ2xlVG9vbCkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRvb2xDYWxsRXJyb3IoYEZhaWxlZCB0byBydW4gZnVuY3Rpb24gdG9vbHM6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gSW50ZXJuYWwgaGVscGVyOiBkaXNwYXRjaCBhIGNvbXB1dGVyIGFjdGlvbiBhbmQgcmV0dXJuIGEgc2NyZWVuc2hvdCAoc3luYy9hc3luYylcbmFzeW5jIGZ1bmN0aW9uIF9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QoY29tcHV0ZXIsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgYWN0aW9uID0gdG9vbENhbGwuYWN0aW9uO1xuICAgIGxldCBzY3JlZW5zaG90O1xuICAgIC8vIERpc3BhdGNoIGJhc2VkIG9uIGFjdGlvbiB0eXBlIHN0cmluZyAoYXNzdW1lIGFjdGlvbi50eXBlIGV4aXN0cylcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSwgYWN0aW9uLmJ1dHRvbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG91YmxlX2NsaWNrJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmRvdWJsZUNsaWNrKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZHJhZyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kcmFnKGFjdGlvbi5wYXRoLm1hcCgocCkgPT4gW3AueCwgcC55XSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2tleXByZXNzJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmtleXByZXNzKGFjdGlvbi5rZXlzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdtb3ZlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLm1vdmUoYWN0aW9uLngsIGFjdGlvbi55KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JlZW5zaG90JzpcbiAgICAgICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2Nyb2xsJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnNjcm9sbChhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5zY3JvbGxfeCwgYWN0aW9uLnNjcm9sbF95KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLnR5cGUoYWN0aW9uLnRleHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3dhaXQnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIud2FpdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBhY3Rpb247IC8vIGVuc3VyZXMgdGhhdCB3ZSBoYW5kbGUgZXZlcnkgYWN0aW9uIHdlIGtub3cgb2ZcbiAgICAgICAgICAgIC8vIFVua25vd24gYWN0aW9uLCBqdXN0IHRha2Ugc2NyZWVuc2hvdFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbnNob3Q7XG4gICAgfVxuICAgIC8vIEFsd2F5cyByZXR1cm4gc2NyZWVuc2hvdCBhcyBiYXNlNjQgc3RyaW5nXG4gICAgaWYgKHR5cGVvZiBjb21wdXRlci5zY3JlZW5zaG90ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHNjcmVlbnNob3QgPSBhd2FpdCBjb21wdXRlci5zY3JlZW5zaG90KCk7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NyZWVuc2hvdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignQ29tcHV0ZXIgZG9lcyBub3QgaW1wbGVtZW50IHNjcmVlbnNob3QoKScpO1xufVxuZnVuY3Rpb24gdG9FcnJvck1lc3NhZ2UoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSB8fCBlcnJvci50b1N0cmluZygpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZXJyb3IpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoZXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlU2hlbGxBY3Rpb25zKGFnZW50LCBhY3Rpb25zLCBydW5uZXIsIHJ1bkNvbnRleHQsIGN1c3RvbUxvZ2dlciA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IF9sb2dnZXIgPSBjdXN0b21Mb2dnZXIgPz8gbG9nZ2VyO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNoZWxsVG9vbCA9IGFjdGlvbi5zaGVsbDtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsSXRlbSA9IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCBhZ2VudCwgc2hlbGxUb29sLm5hbWUpO1xuICAgICAgICBjb25zdCByZXF1aXJlc0FwcHJvdmFsID0gYXdhaXQgc2hlbGxUb29sLm5lZWRzQXBwcm92YWwocnVuQ29udGV4dCwgdG9vbENhbGwuYWN0aW9uLCB0b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAocmVxdWlyZXNBcHByb3ZhbCkge1xuICAgICAgICAgICAgaWYgKHNoZWxsVG9vbC5vbkFwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjaXNpb24gPSBhd2FpdCBzaGVsbFRvb2wub25BcHByb3ZhbChydW5Db250ZXh0LCBhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIGlmIChkZWNpc2lvbi5hcHByb3ZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVjaXNpb24uYXBwcm92ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcnVuQ29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSBydW5Db250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogc2hlbGxUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVqZWN0aW9uT3V0cHV0ID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGRvdXQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBzdGRlcnI6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiB7IHR5cGU6ICdleGl0JywgZXhpdENvZGU6IG51bGwgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3NoZWxsX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogW3JlamVjdGlvbk91dHB1dF0sXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQsIHJlc3BvbnNlKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFnZW50LCBzaGVsbFRvb2wsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgc2hlbGxUb29sLCB7IHRvb2xDYWxsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaGVsbE91dHB1dHM7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyTWV0YSA9IHt9O1xuICAgICAgICBsZXQgbWF4T3V0cHV0TGVuZ3RoO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2hlbGxSZXN1bHQgPSBhd2FpdCBzaGVsbFRvb2wuc2hlbGwucnVuKHRvb2xDYWxsLmFjdGlvbik7XG4gICAgICAgICAgICBzaGVsbE91dHB1dHMgPSBzaGVsbFJlc3VsdC5vdXRwdXQgPz8gW107XG4gICAgICAgICAgICBpZiAoc2hlbGxSZXN1bHQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwcm92aWRlck1ldGEsIHNoZWxsUmVzdWx0LnByb3ZpZGVyRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoZWxsUmVzdWx0Lm1heE91dHB1dExlbmd0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBtYXhPdXRwdXRMZW5ndGggPSBzaGVsbFJlc3VsdC5tYXhPdXRwdXRMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gdG9FcnJvck1lc3NhZ2UoZXJyKTtcbiAgICAgICAgICAgIHNoZWxsT3V0cHV0cyA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZG91dDogJycsXG4gICAgICAgICAgICAgICAgICAgIHN0ZGVycjogZXJyb3JUZXh0LFxuICAgICAgICAgICAgICAgICAgICBvdXRjb21lOiB7IHR5cGU6ICdleGl0JywgZXhpdENvZGU6IG51bGwgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIHNoZWxsIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHNoZWxsT3V0cHV0cyA9IHNoZWxsT3V0cHV0cyA/PyBbXTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIHNoZWxsVG9vbCwgSlNPTi5zdHJpbmdpZnkoc2hlbGxPdXRwdXRzKSwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgc2hlbGxUb29sLCBKU09OLnN0cmluZ2lmeShzaGVsbE91dHB1dHMpLCB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByYXdJdGVtID0ge1xuICAgICAgICAgICAgdHlwZTogJ3NoZWxsX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgb3V0cHV0OiBzaGVsbE91dHB1dHMgPz8gW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgbWF4T3V0cHV0TGVuZ3RoID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmF3SXRlbS5tYXhPdXRwdXRMZW5ndGggPSBtYXhPdXRwdXRMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHByb3ZpZGVyTWV0YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmF3SXRlbS5wcm92aWRlckRhdGEgPSBwcm92aWRlck1ldGE7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIHJhd0l0ZW0ub3V0cHV0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVBcHBseVBhdGNoT3BlcmF0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBhcHBseVBhdGNoVG9vbCA9IGFjdGlvbi5hcHBseVBhdGNoO1xuICAgICAgICBjb25zdCB0b29sQ2FsbCA9IGFjdGlvbi50b29sQ2FsbDtcbiAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbENhbGwsIGFnZW50LCBhcHBseVBhdGNoVG9vbC5uYW1lKTtcbiAgICAgICAgY29uc3QgcmVxdWlyZXNBcHByb3ZhbCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLm5lZWRzQXBwcm92YWwocnVuQ29udGV4dCwgdG9vbENhbGwub3BlcmF0aW9uLCB0b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAocmVxdWlyZXNBcHByb3ZhbCkge1xuICAgICAgICAgICAgaWYgKGFwcGx5UGF0Y2hUb29sLm9uQXBwcm92YWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNpc2lvbiA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLm9uQXBwcm92YWwocnVuQ29udGV4dCwgYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVjaXNpb24uYXBwcm92ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBydW5Db250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlY2lzaW9uLmFwcHJvdmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gcnVuQ29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IGFwcGx5UGF0Y2hUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICdUb29sIGV4ZWN1dGlvbiB3YXMgbm90IGFwcHJvdmVkLic7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbHlfcGF0Y2hfY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCwgcmVzcG9uc2UpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgcnVuQ29udGV4dCwgYWdlbnQsIGFwcGx5UGF0Y2hUb29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFwcGx5UGF0Y2hUb29sLCB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhdHVzID0gJ2NvbXBsZXRlZCc7XG4gICAgICAgIGxldCBvdXRwdXQgPSAnJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBzd2l0Y2ggKHRvb2xDYWxsLm9wZXJhdGlvbi50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3JlYXRlX2ZpbGUnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBhcHBseVBhdGNoVG9vbC5lZGl0b3IuY3JlYXRlRmlsZSh0b29sQ2FsbC5vcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1cGRhdGVfZmlsZSc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGFwcGx5UGF0Y2hUb29sLmVkaXRvci51cGRhdGVGaWxlKHRvb2xDYWxsLm9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZV9maWxlJzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgYXBwbHlQYXRjaFRvb2wuZWRpdG9yLmRlbGV0ZUZpbGUodG9vbENhbGwub3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBhcHBseV9wYXRjaCBvcGVyYXRpb24nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC5zdGF0dXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzID0gcmVzdWx0LnN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC5vdXRwdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gcmVzdWx0Lm91dHB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzdGF0dXMgPSAnZmFpbGVkJztcbiAgICAgICAgICAgIG91dHB1dCA9IHRvRXJyb3JNZXNzYWdlKGVycik7XG4gICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBhcHBseV9wYXRjaCBvcGVyYXRpb246JywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhZ2VudCwgYXBwbHlQYXRjaFRvb2wsIG91dHB1dCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYXBwbHlQYXRjaFRvb2wsIG91dHB1dCwge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdhcHBseV9wYXRjaF9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG91dHB1dCkge1xuICAgICAgICAgICAgcmF3SXRlbS5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIG91dHB1dCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBFeGVjdXRlcyBhbnkgY29tcHV0ZXItdXNlIGFjdGlvbnMgZW1pdHRlZCBieSB0aGUgbW9kZWwgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBpdGVtcyBzbyB0aGVcbiAqIHJ1biBoaXN0b3J5IHJlZmxlY3RzIHRoZSBjb21wdXRlciBzZXNzaW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBjb21wdXRlciA9IGFjdGlvbi5jb21wdXRlci5jb21wdXRlcjtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX3N0YXJ0IChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSdW4gdGhlIGFjdGlvbiBhbmQgZ2V0IHNjcmVlbnNob3RcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChpc0ludm9rZUNvbXB1dGVyKGNvbXB1dGVyKSkge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IGNvbXB1dGVyLmludm9rZShydW5Db250ZXh0LCB0b29sQ2FsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBhd2FpdCBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2xvZ2dlci5lcnJvcignRmFpbGVkIHRvIGV4ZWN1dGUgY29tcHV0ZXIgYWN0aW9uOicsIGVycik7XG4gICAgICAgICAgICBvdXRwdXQgPSAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBIb29rczogb25fdG9vbF9lbmQgKGdsb2JhbCArIGFnZW50KVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCBvdXRwdXQsIHtcbiAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0LCB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXR1cm4gdGhlIHNjcmVlbnNob3QgYXMgYSBkYXRhIFVSTCB3aGVuIGF2YWlsYWJsZTsgZmFsbCBiYWNrIHRvIGFuIGVtcHR5IHN0cmluZyBvbiBmYWlsdXJlcy5cbiAgICAgICAgY29uc3QgaW1hZ2VVcmwgPSBvdXRwdXQgPyBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCR7b3V0cHV0fWAgOiAnJztcbiAgICAgICAgY29uc3QgcmF3SXRlbSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdjb21wdXRlcl9jYWxsX3Jlc3VsdCcsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogeyB0eXBlOiAnY29tcHV0ZXJfc2NyZWVuc2hvdCcsIGRhdGE6IGltYWdlVXJsIH0sXG4gICAgICAgIH07XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHJhd0l0ZW0sIGFnZW50LCBpbWFnZVVybCkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBEcml2ZXMgaGFuZG9mZiBjYWxscyBieSBpbnZva2luZyB0aGUgZG93bnN0cmVhbSBhZ2VudCBhbmQgY2FwdHVyaW5nIGFueSBnZW5lcmF0ZWQgaXRlbXMgc29cbiAqIHRoZSBjdXJyZW50IGFnZW50IGNhbiBjb250aW51ZSB3aXRoIHRoZSBuZXcgY29udGV4dC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcnVuSGFuZG9mZnMsIHJ1bm5lciwgcnVuQ29udGV4dCkge1xuICAgIG5ld1N0ZXBJdGVtcyA9IFsuLi5uZXdTdGVwSXRlbXNdO1xuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0luY29ycmVjdGx5IGNhbGxlZCBleGVjdXRlSGFuZG9mZkNhbGxzIHdpdGggbm8gaGFuZG9mZnMuIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4uIE1vdmluZyBvbi4nKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIG11bHRpcGxlIGhhbmRvZmZzLiBJZ25vcmluZyBhbGwgYnV0IHRoZSBmaXJzdCBvbmUgYnkgYWRkaW5nIHJlamVjdCByZXNwb25zZXMgZm9yIHRob3NlXG4gICAgICAgIGNvbnN0IG91dHB1dE1lc3NhZ2UgPSAnTXVsdGlwbGUgaGFuZG9mZnMgZGV0ZWN0ZWQsIGlnbm9yaW5nIHRoaXMgb25lLic7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcnVuSGFuZG9mZnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5ld1N0ZXBJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHJ1bkhhbmRvZmZzW2ldLnRvb2xDYWxsLCBvdXRwdXRNZXNzYWdlKSwgYWdlbnQsIG91dHB1dE1lc3NhZ2UpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3R1YWxIYW5kb2ZmID0gcnVuSGFuZG9mZnNbMF07XG4gICAgcmV0dXJuIHdpdGhIYW5kb2ZmU3Bhbihhc3luYyAoaGFuZG9mZlNwYW4pID0+IHtcbiAgICAgICAgY29uc3QgaGFuZG9mZiA9IGFjdHVhbEhhbmRvZmYuaGFuZG9mZjtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSBhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZihydW5Db250ZXh0LCBhY3R1YWxIYW5kb2ZmLnRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgIGhhbmRvZmZTcGFuLnNwYW5EYXRhLnRvX2FnZW50ID0gbmV3QWdlbnQubmFtZTtcbiAgICAgICAgaWYgKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZEFnZW50cyA9IHJ1bkhhbmRvZmZzLm1hcCgoaCkgPT4gaC5oYW5kb2ZmLmFnZW50TmFtZSk7XG4gICAgICAgICAgICBoYW5kb2ZmU3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ011bHRpcGxlIGhhbmRvZmZzIHJlcXVlc3RlZCcsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRfYWdlbnRzOiByZXF1ZXN0ZWRBZ2VudHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG5ld1N0ZXBJdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0oYWN0dWFsSGFuZG9mZi50b29sQ2FsbCwgZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KSksIGFnZW50LCBuZXdBZ2VudCkpO1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHJ1bkNvbnRleHQsIGFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIGNvbnN0IGlucHV0RmlsdGVyID0gaGFuZG9mZi5pbnB1dEZpbHRlciA/PyBydW5uZXIuY29uZmlnLmhhbmRvZmZJbnB1dEZpbHRlcjtcbiAgICAgICAgaWYgKGlucHV0RmlsdGVyKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0ZpbHRlcmluZyBpbnB1dHMgZm9yIGhhbmRvZmYnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXRGaWx0ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBoYW5kb2ZmU3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGlucHV0IGZpbHRlcicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6ICdub3QgY2FsbGFibGUnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGFuZG9mZklucHV0RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBpbnB1dEhpc3Rvcnk6IEFycmF5LmlzQXJyYXkob3JpZ2luYWxJbnB1dClcbiAgICAgICAgICAgICAgICAgICAgPyBbLi4ub3JpZ2luYWxJbnB1dF1cbiAgICAgICAgICAgICAgICAgICAgOiBvcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIHByZUhhbmRvZmZJdGVtczogWy4uLnByZVN0ZXBJdGVtc10sXG4gICAgICAgICAgICAgICAgbmV3SXRlbXM6IFsuLi5uZXdTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBpbnB1dEZpbHRlcihoYW5kb2ZmSW5wdXREYXRhKTtcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQgPSBmaWx0ZXJlZC5pbnB1dEhpc3Rvcnk7XG4gICAgICAgICAgICBwcmVTdGVwSXRlbXMgPSBmaWx0ZXJlZC5wcmVIYW5kb2ZmSXRlbXM7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMgPSBmaWx0ZXJlZC5uZXdJdGVtcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfaGFuZG9mZicsIG5ld0FnZW50IH0pO1xuICAgIH0sIHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZnJvbV9hZ2VudDogYWdlbnQubmFtZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbn1cbmNvbnN0IE5PVF9GSU5BTF9PVVRQVVQgPSB7XG4gICAgaXNGaW5hbE91dHB1dDogZmFsc2UsXG4gICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxufTtcbi8qKlxuICogQGludGVybmFsXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdG9vbCBleGVjdXRpb25zIHByb2R1Y2VkIGEgZmluYWwgYWdlbnQgb3V0cHV0LCB0cmlnZ2VyZWQgYW4gaW50ZXJydXB0aW9uLFxuICogb3Igd2hldGhlciB0aGUgYWdlbnQgbG9vcCBzaG91bGQgY29udGludWUgY29sbGVjdGluZyBtb3JlIHJlc3BvbnNlcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIHRvb2xSZXN1bHRzLCBzdGF0ZSkge1xuICAgIGlmICh0b29sUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGludGVycnVwdGlvbnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiB0b29sUmVzdWx0cykge1xuICAgICAgICBpZiAocmVzdWx0LnJ1bkl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2gocmVzdWx0LnJ1bkl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQudHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdC5pbnRlcnJ1cHRpb25zKSkge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnMucHVzaCguLi5yZXN1bHQuaW50ZXJydXB0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuYWdlbnRSdW5SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRJbnRlcnJ1cHRpb25zID0gcmVzdWx0LmFnZW50UnVuUmVzdWx0LmludGVycnVwdGlvbnM7XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZEludGVycnVwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2goLi4ubmVzdGVkSW50ZXJydXB0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdydW5fbGxtX2FnYWluJykge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RUb29sUmVzdWx0ID0gdG9vbFJlc3VsdHNbMF07XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3N0b3Bfb25fZmlyc3RfdG9vbCcpIHtcbiAgICAgICAgaWYgKGZpcnN0VG9vbFJlc3VsdD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoZmlyc3RUb29sUmVzdWx0Lm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCB0b29sVXNlQmVoYXZpb3IgPSBhZ2VudC50b29sVXNlQmVoYXZpb3I7XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHN0b3BwaW5nVG9vbCA9IHRvb2xSZXN1bHRzLmZpbmQoKHIpID0+IHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMuaW5jbHVkZXMoci50b29sLm5hbWUpKTtcbiAgICAgICAgaWYgKHN0b3BwaW5nVG9vbD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoc3RvcHBpbmdUb29sLm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbFVzZUJlaGF2aW9yKHN0YXRlLl9jb250ZXh0LCB0b29sUmVzdWx0cyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbFVzZUJlaGF2aW9yOiAke3Rvb2xVc2VCZWhhdmlvcn1gLCBzdGF0ZSk7XG59XG5mdW5jdGlvbiBnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKSB7XG4gICAgICAgIHJldHVybiAnbWVzc2FnZV9vdXRwdXRfY3JlYXRlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZkNhbGxJdGVtKSB7XG4gICAgICAgIHJldHVybiAnaGFuZG9mZl9yZXF1ZXN0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZPdXRwdXRJdGVtKSB7XG4gICAgICAgIHJldHVybiAnaGFuZG9mZl9vY2N1cnJlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxJdGVtKSB7XG4gICAgICAgIHJldHVybiAndG9vbF9jYWxsZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfb3V0cHV0JztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5SZWFzb25pbmdJdGVtKSB7XG4gICAgICAgIHJldHVybiAncmVhc29uaW5nX2l0ZW1fY3JlYXRlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJztcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQocmVzdWx0LCBpdGVtKSB7XG4gICAgY29uc3QgaXRlbU5hbWUgPSBnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lKGl0ZW0pO1xuICAgIGlmICghaXRlbU5hbWUpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ1Vua25vd24gaXRlbSB0eXBlOiAnLCBpdGVtKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkl0ZW1TdHJlYW1FdmVudChpdGVtTmFtZSwgaXRlbSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0KHJlc3VsdCwgaXRlbXMpIHtcbiAgICAvLyBQcmVzZXJ2ZSB0aGUgb3JkZXIgaW4gd2hpY2ggaXRlbXMgd2VyZSBnZW5lcmF0ZWQgYnkgZW5xdWV1ZWluZyBlYWNoIG9uZVxuICAgIC8vIGltbWVkaWF0ZWx5IG9uIHRoZSBzdHJlYW1lZCByZXN1bHQuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQocmVzdWx0LCBpdGVtKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgc3RlcCwgb3B0aW9ucykge1xuICAgIC8vIHNraXBJdGVtcyBjb250YWlucyBydW4gaXRlbXMgdGhhdCB3ZXJlIGFscmVhZHkgc3RyZWFtZWQgc28gd2UgYXZvaWRcbiAgICAvLyBlbnF1ZXVlaW5nIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGluc3RhbmNlLlxuICAgIGNvbnN0IHNraXBwZWRJdGVtcyA9IG9wdGlvbnM/LnNraXBJdGVtcztcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3RlcC5uZXdTdGVwSXRlbXMpIHtcbiAgICAgICAgaWYgKHNraXBwZWRJdGVtcz8uaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFnZW50VG9vbFVzZVRyYWNrZXIge1xuICAgICNhZ2VudFRvVG9vbHMgPSBuZXcgTWFwKCk7XG4gICAgYWRkVG9vbFVzZShhZ2VudCwgdG9vbE5hbWVzKSB7XG4gICAgICAgIHRoaXMuI2FnZW50VG9Ub29scy5zZXQoYWdlbnQsIHRvb2xOYW1lcyk7XG4gICAgfVxuICAgIGhhc1VzZWRUb29scyhhZ2VudCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYWdlbnRUb1Rvb2xzLmhhcyhhZ2VudCk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKHRoaXMuI2FnZW50VG9Ub29scy5lbnRyaWVzKCkpLm1hcCgoW2FnZW50LCB0b29sTmFtZXNdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW2FnZW50Lm5hbWUsIHRvb2xOYW1lc107XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogQ29udmVydCBhIHVzZXItcHJvdmlkZWQgaW5wdXQgaW50byBhIGxpc3Qgb2YgaW5wdXQgaXRlbXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0lucHV0SXRlbUxpc3QoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgY29udGVudDogaW5wdXQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLmlucHV0XTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBFeHRyYWN0IG1vZGVsIG91dHB1dCBpdGVtcyBmcm9tIHJ1biBpdGVtcywgZXhjbHVkaW5nIHRvb2wgYXBwcm92YWwgaXRlbXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMoaXRlbXMpIHtcbiAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlICE9PSAndG9vbF9hcHByb3ZhbF9pdGVtJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlKGl0ZW1zKSB7XG4gICAgLy8gUGVyc2lzdGVkIHNlc3Npb25zIG11c3QgYXZvaWQgcmF3IGJpbmFyeSBzbyB3ZSBjb252ZXJ0IGV2ZXJ5IGl0ZW0gaW50byBhIEpTT04tc2FmZSBzaGFwZSBiZWZvcmUgd3JpdGluZyB0byBzdG9yYWdlLlxuICAgIHJldHVybiBpdGVtcy5tYXAoKGl0ZW0pID0+IHNhbml0aXplVmFsdWVGb3JTZXNzaW9uKHN0cmlwVHJhbnNpZW50Q2FsbElkcyhpdGVtKSkpO1xufVxuZnVuY3Rpb24gc2FuaXRpemVWYWx1ZUZvclNlc3Npb24odmFsdWUsIGNvbnRleHQgPSB7fSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gQ29udmVydCBzdXBwb3J0ZWQgYmluYXJ5IHBheWxvYWRzIGludG8gQXJyYXlCdWZmZXIgdmlld3MgYmVmb3JlIHNlcmlhbGl6YXRpb24uXG4gICAgY29uc3QgYmluYXJ5ID0gdG9VaW50OEFycmF5SWZCaW5hcnkodmFsdWUpO1xuICAgIGlmIChiaW5hcnkpIHtcbiAgICAgICAgcmV0dXJuIHRvRGF0YVVybEZyb21CeXRlcyhiaW5hcnksIGNvbnRleHQubWVkaWFUeXBlKTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGVudHJ5KSA9PiBzYW5pdGl6ZVZhbHVlRm9yU2Vzc2lvbihlbnRyeSwgY29udGV4dCkpO1xuICAgIH1cbiAgICBpZiAoIWlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgcmVjb3JkID0gdmFsdWU7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgY29uc3QgbWVkaWFUeXBlID0gdHlwZW9mIHJlY29yZC5tZWRpYVR5cGUgPT09ICdzdHJpbmcnICYmIHJlY29yZC5tZWRpYVR5cGUubGVuZ3RoID4gMFxuICAgICAgICA/IHJlY29yZC5tZWRpYVR5cGVcbiAgICAgICAgOiBjb250ZXh0Lm1lZGlhVHlwZTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiBPYmplY3QuZW50cmllcyhyZWNvcmQpKSB7XG4gICAgICAgIC8vIFByb3BhZ2F0ZSBleHBsaWNpdCBtZWRpYSB0eXBlIG9ubHkgd2hlbiB3YWxraW5nIGludG8gYmluYXJ5IHBheWxvYWQgY29udGFpbmVycy5cbiAgICAgICAgY29uc3QgbmV4dENvbnRleHQgPSBrZXkgPT09ICdkYXRhJyB8fCBrZXkgPT09ICdmaWxlRGF0YScgPyB7IG1lZGlhVHlwZSB9IDogY29udGV4dDtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBzYW5pdGl6ZVZhbHVlRm9yU2Vzc2lvbihlbnRyeSwgbmV4dENvbnRleHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG9VaW50OEFycmF5SWZCaW5hcnkodmFsdWUpIHtcbiAgICAvLyBOb3JtYWxpemUgdGhlIGRpdmVyc2UgYmluYXJ5IGNvbnRhaW5lcnMgd2UgbWF5IHJlY2VpdmUgaW50byBhIHNoYXJlZCBVaW50OEFycmF5IHZpZXcuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb20oc25hcHNob3QuZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiB0b0RhdGFVcmxGcm9tQnl0ZXMoYnl0ZXMsIG1lZGlhVHlwZSkge1xuICAgIC8vIENvbnZlcnQgYmluYXJ5IHBheWxvYWRzIGludG8gYSBkdXJhYmxlIGRhdGEgVVJMIHNvIHNlc3Npb24gZmlsZXMgcmVtYWluIHNlbGYtY29udGFpbmVkLlxuICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChieXRlcyk7XG4gICAgLy8gTm90ZSB0aGF0IE9wZW5BSSBSZXNwb25zZXMgQVBJIG5ldmVyIGFjY2VwdHMgYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIGFzIGEgbWVkaWEgdHlwZSxcbiAgICAvLyBzbyB3ZSBmYWxsIGJhY2sgdG8gdGV4dC9wbGFpbjsgdGhhdCBzYWlkLCB0b29scyBhcmUgc3VwcG9zZWQgdG8gcmV0dXJuIGEgdmFsaWQgbWVkaWEgdHlwZSB3aGVuIHRoaXMgdXRpbGl0eSBpcyB1c2VkLlxuICAgIGNvbnN0IHR5cGUgPSBtZWRpYVR5cGUgJiYgIW1lZGlhVHlwZS5zdGFydHNXaXRoKCdkYXRhOicpID8gbWVkaWFUeXBlIDogJ3RleHQvcGxhaW4nO1xuICAgIHJldHVybiBgZGF0YToke3R5cGV9O2Jhc2U2NCwke2Jhc2U2NH1gO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpO1xuICAgIHJldHVybiBwcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBwcm90byA9PT0gbnVsbDtcbn1cbmZ1bmN0aW9uIHN0cmlwVHJhbnNpZW50Q2FsbElkcyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5tYXAoKGVudHJ5KSA9PiBzdHJpcFRyYW5zaWVudENhbGxJZHMoZW50cnkpKTtcbiAgICB9XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IHJlY29yZCA9IHZhbHVlO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGNvbnN0IGlzUHJvdG9jb2xJdGVtID0gdHlwZW9mIHJlY29yZC50eXBlID09PSAnc3RyaW5nJyAmJiByZWNvcmQudHlwZS5sZW5ndGggPiAwO1xuICAgIGNvbnN0IHNob3VsZFN0cmlwSWQgPSBpc1Byb3RvY29sSXRlbSAmJiBzaG91bGRTdHJpcElkRm9yVHlwZShyZWNvcmQudHlwZSk7XG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgT2JqZWN0LmVudHJpZXMocmVjb3JkKSkge1xuICAgICAgICBpZiAoc2hvdWxkU3RyaXBJZCAmJiBrZXkgPT09ICdpZCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFtrZXldID0gc3RyaXBUcmFuc2llbnRDYWxsSWRzKGVudHJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNob3VsZFN0cmlwSWRGb3JUeXBlKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnZnVuY3Rpb25fY2FsbCc6XG4gICAgICAgIGNhc2UgJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBQZXJzaXN0IGZ1bGwgdHVybiAoaW5wdXQgKyBvdXRwdXRzKSBmb3Igbm9uLXN0cmVhbWluZyBydW5zLlxuICovXG4vLyBQZXJzaXN0cyB0aGUgY29tYmluYXRpb24gb2YgdXNlciBpbnB1dHMgKHBvc3NpYmx5IGZpbHRlcmVkKSBhbmQgbW9kZWwgb3V0cHV0cyBmb3IgYSBjb21wbGV0ZWQgdHVybi5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlVG9TZXNzaW9uKHNlc3Npb24sIHNlc3Npb25JbnB1dEl0ZW1zLCByZXN1bHQpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpbnB1dEl0ZW1zID0gc2Vzc2lvbklucHV0SXRlbXMgPz8gW107XG4gICAgY29uc3Qgc3RhdGUgPSByZXN1bHQuc3RhdGU7XG4gICAgY29uc3QgYWxyZWFkeVBlcnNpc3RlZCA9IHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA/PyAwO1xuICAgIC8vIFBlcnNpc3Qgb25seSB0aGUgcG9ydGlvbiBvZiBfZ2VuZXJhdGVkSXRlbXMgdGhhdCBoYXMgbm90IHlldCBiZWVuIHN0b3JlZCBmb3IgdGhpcyB0dXJuLlxuICAgIGNvbnN0IG5ld1J1bkl0ZW1zID0gcmVzdWx0Lm5ld0l0ZW1zLnNsaWNlKGFscmVhZHlQZXJzaXN0ZWQpO1xuICAgIGlmIChwcm9jZXNzLmVudi5PUEVOQUlfQUdFTlRTX19ERUJVR19TQVZFX1NFU1NJT04pIHtcbiAgICAgICAgY29uc29sZS5kZWJ1Zygnc2F2ZVRvU2Vzc2lvbjpuZXdSdW5JdGVtcycsIG5ld1J1bkl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS50eXBlKSk7XG4gICAgfVxuICAgIGNvbnN0IG91dHB1dEl0ZW1zID0gZXh0cmFjdE91dHB1dEl0ZW1zRnJvbVJ1bkl0ZW1zKG5ld1J1bkl0ZW1zKTtcbiAgICBjb25zdCBpdGVtc1RvU2F2ZSA9IFsuLi5pbnB1dEl0ZW1zLCAuLi5vdXRwdXRJdGVtc107XG4gICAgaWYgKGl0ZW1zVG9TYXZlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPVxuICAgICAgICAgICAgYWxyZWFkeVBlcnNpc3RlZCArIG5ld1J1bkl0ZW1zLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzYW5pdGl6ZWRJdGVtcyA9IG5vcm1hbGl6ZUl0ZW1zRm9yU2Vzc2lvblBlcnNpc3RlbmNlKGl0ZW1zVG9TYXZlKTtcbiAgICBhd2FpdCBzZXNzaW9uLmFkZEl0ZW1zKHNhbml0aXplZEl0ZW1zKTtcbiAgICBzdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSBhbHJlYWR5UGVyc2lzdGVkICsgbmV3UnVuSXRlbXMubGVuZ3RoO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFBlcnNpc3Qgb25seSB0aGUgdXNlciBpbnB1dCBmb3Igc3RyZWFtaW5nIHJ1bnMgYXQgc3RhcnQuXG4gKi9cbi8vIEZvciBzdHJlYW1pbmcgcnVucyB3ZSBwZXJzaXN0IHVzZXIgaW5wdXQgYXMgc29vbiBhcyBpdCBpcyBzZW50IHNvIHJlY29ubmVjdGlvbnMgY2FuIHJlc3VtZS5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24oc2Vzc2lvbiwgc2Vzc2lvbklucHV0SXRlbXMpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXNlc3Npb25JbnB1dEl0ZW1zIHx8IHNlc3Npb25JbnB1dEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHNhbml0aXplZElucHV0ID0gbm9ybWFsaXplSXRlbXNGb3JTZXNzaW9uUGVyc2lzdGVuY2Uoc2Vzc2lvbklucHV0SXRlbXMpO1xuICAgIGF3YWl0IHNlc3Npb24uYWRkSXRlbXMoc2FuaXRpemVkSW5wdXQpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIFBlcnNpc3Qgb25seSB0aGUgbW9kZWwgb3V0cHV0cyBmb3Igc3RyZWFtaW5nIHJ1bnMgYXQgdGhlIGVuZCBvZiBhIHR1cm4uXG4gKi9cbi8vIENvbXBsZW1lbnRzIHNhdmVTdHJlYW1JbnB1dFRvU2Vzc2lvbiBieSByZWNvcmRpbmcgdGhlIHN0cmVhbWluZyBvdXRwdXRzIGF0IHRoZSBlbmQgb2YgdGhlIHR1cm4uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbihzZXNzaW9uLCByZXN1bHQpIHtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZSA9IHJlc3VsdC5zdGF0ZTtcbiAgICBjb25zdCBhbHJlYWR5UGVyc2lzdGVkID0gc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID8/IDA7XG4gICAgY29uc3QgbmV3UnVuSXRlbXMgPSByZXN1bHQubmV3SXRlbXMuc2xpY2UoYWxyZWFkeVBlcnNpc3RlZCk7XG4gICAgY29uc3QgaXRlbXNUb1NhdmUgPSBleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMobmV3UnVuSXRlbXMpO1xuICAgIGlmIChpdGVtc1RvU2F2ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID1cbiAgICAgICAgICAgIGFscmVhZHlQZXJzaXN0ZWQgKyBuZXdSdW5JdGVtcy5sZW5ndGg7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2FuaXRpemVkSXRlbXMgPSBub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZShpdGVtc1RvU2F2ZSk7XG4gICAgYXdhaXQgc2Vzc2lvbi5hZGRJdGVtcyhzYW5pdGl6ZWRJdGVtcyk7XG4gICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gYWxyZWFkeVBlcnNpc3RlZCArIG5ld1J1bkl0ZW1zLmxlbmd0aDtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVwYXJlSW5wdXRJdGVtc1dpdGhTZXNzaW9uKGlucHV0LCBzZXNzaW9uLCBzZXNzaW9uSW5wdXRDYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJlcGFyZWRJbnB1dDogaW5wdXQsXG4gICAgICAgICAgICBzZXNzaW9uSXRlbXM6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQgPSBvcHRpb25zPy5pbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dCA/PyB0cnVlO1xuICAgIGNvbnN0IHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zID0gb3B0aW9ucz8ucHJlc2VydmVEcm9wcGVkTmV3SXRlbXMgPz8gZmFsc2U7XG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IHNlc3Npb24uZ2V0SXRlbXMoKTtcbiAgICBjb25zdCBuZXdJbnB1dEl0ZW1zID0gQXJyYXkuaXNBcnJheShpbnB1dClcbiAgICAgICAgPyBbLi4uaW5wdXRdXG4gICAgICAgIDogdG9JbnB1dEl0ZW1MaXN0KGlucHV0KTtcbiAgICBpZiAoIXNlc3Npb25JbnB1dENhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcmVwYXJlZElucHV0OiBpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dFxuICAgICAgICAgICAgICAgID8gWy4uLmhpc3RvcnksIC4uLm5ld0lucHV0SXRlbXNdXG4gICAgICAgICAgICAgICAgOiBuZXdJbnB1dEl0ZW1zLFxuICAgICAgICAgICAgc2Vzc2lvbkl0ZW1zOiBuZXdJbnB1dEl0ZW1zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDYXB0dXJlIHNuYXBzaG90cyBiZWZvcmUgaW52b2tpbmcgdGhlIGNhbGxiYWNrIHNvIHdlIGNhbiByZWFzb24gYWJvdXQgdGhlIG9yaWdpbmFsIHN0YXRlIGV2ZW5cbiAgICAvLyBpZiB0aGUgY2FsbGJhY2sgbXV0YXRlcyB0aGUgaGlzdG9yeSBhcnJheSBpbi1wbGFjZS5cbiAgICBjb25zdCBoaXN0b3J5U25hcHNob3QgPSBoaXN0b3J5LnNsaWNlKCk7XG4gICAgY29uc3QgbmV3SW5wdXRTbmFwc2hvdCA9IG5ld0lucHV0SXRlbXMuc2xpY2UoKTtcbiAgICAvLyBEZWxlZ2F0ZSBoaXN0b3J5IHJlY29uY2lsaWF0aW9uIHRvIHRoZSB1c2VyLXN1cHBsaWVkIGNhbGxiYWNrLiBJdCBtdXN0IHJldHVybiBhIGNvbmNyZXRlIGxpc3RcbiAgICAvLyB0byBrZWVwIGRvd25zdHJlYW0gbW9kZWwgcmVxdWVzdHMgd2VsbC10eXBlZC5cbiAgICBjb25zdCBjb21iaW5lZCA9IGF3YWl0IHNlc3Npb25JbnB1dENhbGxiYWNrKGhpc3RvcnksIG5ld0lucHV0SXRlbXMpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShjb21iaW5lZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU2Vzc2lvbiBpbnB1dCBjYWxsYmFjayBtdXN0IHJldHVybiBhbiBhcnJheSBvZiBBZ2VudElucHV0SXRlbSBvYmplY3RzLicpO1xuICAgIH1cbiAgICBjb25zdCBoaXN0b3J5Q291bnRzID0gYnVpbGRJdGVtRnJlcXVlbmN5TWFwKGhpc3RvcnlTbmFwc2hvdCk7XG4gICAgY29uc3QgbmV3SW5wdXRDb3VudHMgPSBidWlsZEl0ZW1GcmVxdWVuY3lNYXAobmV3SW5wdXRTbmFwc2hvdCk7XG4gICAgY29uc3QgaGlzdG9yeVJlZnMgPSBidWlsZEl0ZW1SZWZlcmVuY2VNYXAoaGlzdG9yeVNuYXBzaG90KTtcbiAgICBjb25zdCBuZXdJbnB1dFJlZnMgPSBidWlsZEl0ZW1SZWZlcmVuY2VNYXAobmV3SW5wdXRTbmFwc2hvdCk7XG4gICAgY29uc3QgYXBwZW5kZWQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29tYmluZWQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gc2Vzc2lvbkl0ZW1LZXkoaXRlbSk7XG4gICAgICAgIGlmIChjb25zdW1lUmVmZXJlbmNlKG5ld0lucHV0UmVmcywga2V5LCBpdGVtKSkge1xuICAgICAgICAgICAgZGVjcmVtZW50Q291bnQobmV3SW5wdXRDb3VudHMsIGtleSk7XG4gICAgICAgICAgICBhcHBlbmRlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJpb3JpdGl6ZSBleGFjdCBoaXN0b3J5IG1hdGNoZXMgYmVmb3JlIHBheWxvYWQtYmFzZWQgY291bnRzIHNvIGNhbGxiYWNrcyB0aGF0IHN1cmZhY2VcbiAgICAgICAgLy8gaGlzdG9yeSBhaGVhZCBvZiBpZGVudGljYWwgbmV3IGlucHV0cyBrZWVwIHByZXZpb3VzbHkgcGVyc2lzdGVkIGl0ZW1zIG91dCBvZiB0aGUgbmV3IHF1ZXVlLlxuICAgICAgICBpZiAoY29uc3VtZVJlZmVyZW5jZShoaXN0b3J5UmVmcywga2V5LCBpdGVtKSkge1xuICAgICAgICAgICAgZGVjcmVtZW50Q291bnQoaGlzdG9yeUNvdW50cywga2V5KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhpc3RvcnlSZW1haW5pbmcgPSBoaXN0b3J5Q291bnRzLmdldChrZXkpID8/IDA7XG4gICAgICAgIGlmIChoaXN0b3J5UmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgaGlzdG9yeUNvdW50cy5zZXQoa2V5LCBoaXN0b3J5UmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdSZW1haW5pbmcgPSBuZXdJbnB1dENvdW50cy5nZXQoa2V5KSA/PyAwO1xuICAgICAgICBpZiAobmV3UmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgbmV3SW5wdXRDb3VudHMuc2V0KGtleSwgbmV3UmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICBhcHBlbmRlZC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYXBwZW5kZWQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgLy8gUHJlc2VydmUgcmVkYWN0ZWQgaW5wdXRzIGZvciBtb2RlbCBkZWxpdmVyeSB3aGVuIHJlcXVlc3RlZCAoZS5nLiBzZXJ2ZXItbWFuYWdlZCBoaXN0b3JpZXMpLlxuICAgIGNvbnN0IHByZXBhcmVkSXRlbXMgPSBpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dFxuICAgICAgICA/IGNvbWJpbmVkXG4gICAgICAgIDogYXBwZW5kZWQubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyBhcHBlbmRlZFxuICAgICAgICAgICAgOiBwcmVzZXJ2ZURyb3BwZWROZXdJdGVtc1xuICAgICAgICAgICAgICAgID8gbmV3SW5wdXRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIDogW107XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJlcGFyZWRJbnB1dDogcHJlcGFyZWRJdGVtcyxcbiAgICAgICAgLy8gUmVzcGVjdCBjYWxsYmFja3MgdGhhdCBpbnRlbnRpb25hbGx5IGRyb3AgdGhlIGxhdGVzdCBpbnB1dHMgKGUuZy4gdG8gcmVkYWN0IHNlbnNpdGl2ZVxuICAgICAgICAvLyB2YWx1ZXMpIGJ5IHBlcnNpc3Rpbmcgb25seSB0aGUgaXRlbXMgdGhleSBrZXB0IGluIHRoZSBjb21iaW5lZCBhcnJheS5cbiAgICAgICAgc2Vzc2lvbkl0ZW1zOiBhcHBlbmRlZCxcbiAgICB9O1xufVxuLyoqXG4gKiBBY2NlcHRzIHdoYXRldmVyIHRoZSB0b29sIHJldHVybmVkIGFuZCBhdHRlbXB0cyB0byBjb2VyY2UgaXQgaW50byB0aGUgc3RydWN0dXJlZCBwcm90b2NvbFxuICogc2hhcGVzIHdlIGV4cG9zZSB0byBkb3duc3RyZWFtIG1vZGVsIGFkYXB0ZXJzIChpbnB1dF90ZXh0L2lucHV0X2ltYWdlL2lucHV0X2ZpbGUpLiBUb29scyBhcmVcbiAqIGFsbG93ZWQgdG8gcmV0dXJuIGVpdGhlciBhIHNpbmdsZSBzdHJ1Y3R1cmVkIG9iamVjdCBvciBhbiBhcnJheSBvZiB0aGVtOyBhbnl0aGluZyBlbHNlIGZhbGxzXG4gKiBiYWNrIHRvIHRoZSBsZWdhY3kgc3RyaW5nIHBpcGVsaW5lLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMob3V0cHV0KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3V0cHV0KSkge1xuICAgICAgICBjb25zdCBzdHJ1Y3R1cmVkID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBvdXRwdXQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dChpdGVtKTtcbiAgICAgICAgICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RydWN0dXJlZC5wdXNoKG5vcm1hbGl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJ1Y3R1cmVkO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXQob3V0cHV0KTtcbiAgICByZXR1cm4gbm9ybWFsaXplZCA/IFtub3JtYWxpemVkXSA6IG51bGw7XG59XG4vKipcbiAqIEJlc3QtZWZmb3J0IG5vcm1hbGl6YXRpb24gb2YgYSBzaW5nbGUgdG9vbCBvdXRwdXQgaXRlbS4gSWYgdGhlIG9iamVjdCBhbHJlYWR5IG1hdGNoZXMgdGhlXG4gKiBwcm90b2NvbCBzaGFwZSB3ZSBzaW1wbHkgY2FzdCBpdDsgb3RoZXJ3aXNlIHdlIGNvcHkgdGhlIHJlY29nbmlzZWQgZmllbGRzIGludG8gdGhlIGNhbm9uaWNhbFxuICogc3RydWN0dXJlLiBSZXR1cm5pbmcgbnVsbCBsZXRzIHRoZSBjYWxsZXIga25vdyB3ZSBzaG91bGQgcmV2ZXJ0IHRvIHBsYWluLXN0cmluZyBoYW5kbGluZy5cbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXQodmFsdWUpIHtcbiAgICBpZiAoIWlzUmVjb3JkKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IHZhbHVlLnR5cGU7XG4gICAgaWYgKHR5cGUgPT09ICd0ZXh0JyAmJiB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0geyB0eXBlOiAndGV4dCcsIHRleHQ6IHZhbHVlLnRleHQgfTtcbiAgICAgICAgaWYgKGlzUmVjb3JkKHZhbHVlLnByb3ZpZGVyRGF0YSkpIHtcbiAgICAgICAgICAgIG91dHB1dC5wcm92aWRlckRhdGEgPSB2YWx1ZS5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0geyB0eXBlOiAnaW1hZ2UnIH07XG4gICAgICAgIGxldCBpbWFnZVN0cmluZztcbiAgICAgICAgbGV0IGltYWdlRmlsZUlkO1xuICAgICAgICBjb25zdCBmYWxsYmFja0ltYWdlTWVkaWFUeXBlID0gaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5tZWRpYVR5cGUpXG4gICAgICAgICAgICA/IHZhbHVlLm1lZGlhVHlwZVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGltYWdlRmllbGQgPSB2YWx1ZS5pbWFnZTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbWFnZUZpZWxkID09PSAnc3RyaW5nJyAmJiBpbWFnZUZpZWxkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlU3RyaW5nID0gaW1hZ2VGaWVsZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlY29yZChpbWFnZUZpZWxkKSkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VPYmogPSBpbWFnZUZpZWxkO1xuICAgICAgICAgICAgY29uc3QgaW5saW5lTWVkaWFUeXBlID0gaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5tZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgPyBpbWFnZU9iai5tZWRpYVR5cGVcbiAgICAgICAgICAgICAgICA6IGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGU7XG4gICAgICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai51cmwpKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBpbWFnZU9iai51cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKGltYWdlT2JqLmRhdGEsIGlubGluZU1lZGlhVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbWFnZU9iai5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgICAgICAgICAgIGltYWdlT2JqLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdG9JbmxpbmVJbWFnZVN0cmluZyhpbWFnZU9iai5kYXRhLCBpbmxpbmVNZWRpYVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpbWFnZVN0cmluZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZUlkID0gKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZmlsZUlkKSAmJiBpbWFnZU9iai5maWxlSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmlkKSAmJiBpbWFnZU9iai5pZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGVJZCkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZUZpbGVJZCA9IGNhbmRpZGF0ZUlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWltYWdlU3RyaW5nICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuaW1hZ2VVcmwgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB2YWx1ZS5pbWFnZVVybC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZVN0cmluZyA9IHZhbHVlLmltYWdlVXJsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW1hZ2VGaWxlSWQgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5maWxlSWQgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB2YWx1ZS5maWxlSWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VGaWxlSWQgPSB2YWx1ZS5maWxlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbWFnZVN0cmluZyAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmRhdGEgPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB2YWx1ZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlU3RyaW5nID0gZmFsbGJhY2tJbWFnZU1lZGlhVHlwZVxuICAgICAgICAgICAgICAgID8gdG9JbmxpbmVJbWFnZVN0cmluZyh2YWx1ZS5kYXRhLCBmYWxsYmFja0ltYWdlTWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgIDogdmFsdWUuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaW1hZ2VTdHJpbmcgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgICAgICB2YWx1ZS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdG9JbmxpbmVJbWFnZVN0cmluZyh2YWx1ZS5kYXRhLCBmYWxsYmFja0ltYWdlTWVkaWFUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlLmRldGFpbCA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZGV0YWlsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG91dHB1dC5kZXRhaWwgPSB2YWx1ZS5kZXRhaWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGltYWdlU3RyaW5nKSB7XG4gICAgICAgICAgICBvdXRwdXQuaW1hZ2UgPSBpbWFnZVN0cmluZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbWFnZUZpbGVJZCkge1xuICAgICAgICAgICAgb3V0cHV0LmltYWdlID0geyBmaWxlSWQ6IGltYWdlRmlsZUlkIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNSZWNvcmQodmFsdWUucHJvdmlkZXJEYXRhKSkge1xuICAgICAgICAgICAgb3V0cHV0LnByb3ZpZGVyRGF0YSA9IHZhbHVlLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIGNvbnN0IGZpbGVWYWx1ZSA9IG5vcm1hbGl6ZUZpbGVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIGlmICghZmlsZVZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICdmaWxlJywgZmlsZTogZmlsZVZhbHVlIH07XG4gICAgICAgIGlmIChpc1JlY29yZCh2YWx1ZS5wcm92aWRlckRhdGEpKSB7XG4gICAgICAgICAgICBvdXRwdXQucHJvdmlkZXJEYXRhID0gdmFsdWUucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBub3JtYWxpemVkIHRvb2wgb3V0cHV0IGludG8gdGhlIHByb3RvY29sIGBpbnB1dF8qYCBpdGVtcy4gVGhpcyBpcyB0aGUgbGFzdCBob3BcbiAqIGJlZm9yZSB3ZSBoYW5kIHRoZSBkYXRhIHRvIG1vZGVsLXNwZWNpZmljIGFkYXB0ZXJzLCBzbyB3ZSBnZW5lcmF0ZSB0aGUgZXhhY3Qgc2NoZW1hIGV4cGVjdGVkIGJ5XG4gKiB0aGUgcHJvdG9jb2wgZGVmaW5pdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRTdHJ1Y3R1cmVkVG9vbE91dHB1dFRvSW5wdXRJdGVtKG91dHB1dCkge1xuICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnB1dF90ZXh0JyxcbiAgICAgICAgICAgIHRleHQ6IG91dHB1dC50ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBpZiAob3V0cHV0LnByb3ZpZGVyRGF0YSkge1xuICAgICAgICAgICAgcmVzdWx0LnByb3ZpZGVyRGF0YSA9IG91dHB1dC5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgaWYgKG91dHB1dC50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHsgdHlwZTogJ2lucHV0X2ltYWdlJyB9O1xuICAgICAgICBpZiAodHlwZW9mIG91dHB1dC5kZXRhaWwgPT09ICdzdHJpbmcnICYmIG91dHB1dC5kZXRhaWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVzdWx0LmRldGFpbCA9IG91dHB1dC5kZXRhaWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvdXRwdXQuaW1hZ2UgPT09ICdzdHJpbmcnICYmIG91dHB1dC5pbWFnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSBvdXRwdXQuaW1hZ2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNSZWNvcmQob3V0cHV0LmltYWdlKSkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VPYmogPSBvdXRwdXQuaW1hZ2U7XG4gICAgICAgICAgICBjb25zdCBpbmxpbmVNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLm1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICA/IGltYWdlT2JqLm1lZGlhVHlwZVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoudXJsKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IGltYWdlT2JqLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPVxuICAgICAgICAgICAgICAgICAgICBpbmxpbmVNZWRpYVR5cGUgJiYgIWltYWdlT2JqLmRhdGEuc3RhcnRzV2l0aCgnZGF0YTonKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBhc0RhdGFVcmwoaW1hZ2VPYmouZGF0YSwgaW5saW5lTWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbWFnZU9iai5kYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW1hZ2VPYmouZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICAgICAgICAgICAgICBpbWFnZU9iai5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoaW1hZ2VPYmouZGF0YSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gYXNEYXRhVXJsKGJhc2U2NCwgaW5saW5lTWVkaWFUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9IChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmZpbGVJZCkgJiYgaW1hZ2VPYmouZmlsZUlkKSB8fFxuICAgICAgICAgICAgICAgICAgICAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5pZCkgJiYgaW1hZ2VPYmouaWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAocmVmZXJlbmNlZElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IHsgaWQ6IHJlZmVyZW5jZWRJZCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0cHV0LnByb3ZpZGVyRGF0YSkge1xuICAgICAgICAgICAgcmVzdWx0LnByb3ZpZGVyRGF0YSA9IG91dHB1dC5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgaWYgKG91dHB1dC50eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0eXBlOiAnaW5wdXRfZmlsZScgfTtcbiAgICAgICAgY29uc3QgZmlsZVZhbHVlID0gb3V0cHV0LmZpbGU7XG4gICAgICAgIGlmICh0eXBlb2YgZmlsZVZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSBmaWxlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZmlsZVZhbHVlICYmIHR5cGVvZiBmaWxlVmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCByZWNvcmQgPSBmaWxlVmFsdWU7XG4gICAgICAgICAgICBpZiAoJ2RhdGEnIGluIHJlY29yZCAmJiByZWNvcmQuZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHlwZSA9IHJlY29yZC5tZWRpYVR5cGUgPz8gJ3RleHQvcGxhaW4nO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVjb3JkLmRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0gYXNEYXRhVXJsKHJlY29yZC5kYXRhLCBtZWRpYVR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KHJlY29yZC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSBhc0RhdGFVcmwoYmFzZTY0LCBtZWRpYVR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiByZWNvcmQudXJsID09PSAnc3RyaW5nJyAmJiByZWNvcmQudXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IHsgdXJsOiByZWNvcmQudXJsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWZlcmVuY2VkSWQgPSAodHlwZW9mIHJlY29yZC5pZCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmlkLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVjb3JkLmlkKSB8fFxuICAgICAgICAgICAgICAgICAgICAodHlwZW9mIHJlY29yZC5maWxlSWQgPT09ICdzdHJpbmcnICYmIHJlY29yZC5maWxlSWQubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZWNvcmQuZmlsZUlkXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlZmVyZW5jZWRJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IHsgaWQ6IHJlZmVyZW5jZWRJZCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVjb3JkLmZpbGVuYW1lID09PSAnc3RyaW5nJyAmJiByZWNvcmQuZmlsZW5hbWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IHJlY29yZC5maWxlbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0cHV0LnByb3ZpZGVyRGF0YSkge1xuICAgICAgICAgICAgcmVzdWx0LnByb3ZpZGVyRGF0YSA9IG91dHB1dC5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgZXhoYXVzdGl2ZUNoZWNrID0gb3V0cHV0O1xuICAgIHJldHVybiBleGhhdXN0aXZlQ2hlY2s7XG59XG5mdW5jdGlvbiBidWlsZEl0ZW1GcmVxdWVuY3lNYXAoaXRlbXMpIHtcbiAgICBjb25zdCBjb3VudHMgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHNlc3Npb25JdGVtS2V5KGl0ZW0pO1xuICAgICAgICBjb3VudHMuc2V0KGtleSwgKGNvdW50cy5nZXQoa2V5KSA/PyAwKSArIDEpO1xuICAgIH1cbiAgICByZXR1cm4gY291bnRzO1xufVxuZnVuY3Rpb24gYnVpbGRJdGVtUmVmZXJlbmNlTWFwKGl0ZW1zKSB7XG4gICAgY29uc3QgcmVmcyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gc2Vzc2lvbkl0ZW1LZXkoaXRlbSk7XG4gICAgICAgIGNvbnN0IGxpc3QgPSByZWZzLmdldChrZXkpO1xuICAgICAgICBpZiAobGlzdCkge1xuICAgICAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVmcy5zZXQoa2V5LCBbaXRlbV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZWZzO1xufVxuZnVuY3Rpb24gY29uc3VtZVJlZmVyZW5jZShyZWZzLCBrZXksIHRhcmdldCkge1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSByZWZzLmdldChrZXkpO1xuICAgIGlmICghY2FuZGlkYXRlcyB8fCBjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gY2FuZGlkYXRlcy5maW5kSW5kZXgoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlID09PSB0YXJnZXQpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjYW5kaWRhdGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJlZnMuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gZGVjcmVtZW50Q291bnQobWFwLCBrZXkpIHtcbiAgICBjb25zdCByZW1haW5pbmcgPSAobWFwLmdldChrZXkpID8/IDApIC0gMTtcbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgbWFwLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWFwLnNldChrZXksIHJlbWFpbmluZyk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2Vzc2lvbkl0ZW1LZXkoaXRlbSkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLCBzZXNzaW9uU2VyaWFsaXphdGlvblJlcGxhY2VyKTtcbn1cbmZ1bmN0aW9uIHNlc3Npb25TZXJpYWxpemF0aW9uUmVwbGFjZXIoX2tleSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiAnQXJyYXlCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZhbHVlKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHZhbHVlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX190eXBlOiB2aWV3LmNvbnN0cnVjdG9yLm5hbWUsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc05vZGVCdWZmZXIodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0J1ZmZlcicsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQobmV3IFVpbnQ4QXJyYXkodmlldy5idWZmZXIsIHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlTGVuZ3RoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc1NlcmlhbGl6ZWRCdWZmZXJTbmFwc2hvdCh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0J1ZmZlcicsXG4gICAgICAgICAgICBkYXRhOiBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQoVWludDhBcnJheS5mcm9tKHZhbHVlLmRhdGEpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuSW1wbGVtZW50YXRpb24ubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgQWdlbnRUb29sVXNlVHJhY2tlciwgbmV4dFN0ZXBTY2hlbWEsIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1FcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFRyYWNlIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgaGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgKiBhcyBwcm90b2NvbCBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG4vKipcbiAqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgc2VyaWFsaXplZCBydW4gc3RhdGUuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCB0aGUgc2VyaWFsaXplZFxuICogcnVuIHN0YXRlIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBTREsuXG4gKiBJZiBhbnl0aGluZyBpbiB0aGlzIHNjaGVtYSBjaGFuZ2VzLCB0aGUgdmVyc2lvbiB3aWxsIGhhdmUgdG8gYmUgaW5jcmVtZW50ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OID0gJzEuMCc7XG5jb25zdCAkc2NoZW1hVmVyc2lvbiA9IHoubGl0ZXJhbChDVVJSRU5UX1NDSEVNQV9WRVJTSU9OKTtcbmNvbnN0IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkU3BhbkJhc2UgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlLnNwYW4nKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB0cmFjZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJlbnRfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydGVkX2F0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgZW5kZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlcnJvcjogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzcGFuX2RhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxufSk7XG5jb25zdCBTZXJpYWxpemVkU3BhbiA9IHNlcmlhbGl6ZWRTcGFuQmFzZS5leHRlbmQoe1xuICAgIHByZXZpb3VzX3NwYW46IHoubGF6eSgoKSA9PiBTZXJpYWxpemVkU3Bhbikub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgcmVxdWVzdFVzYWdlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlucHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIG91dHB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICB0b3RhbFRva2Vuczogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0VG9rZW5zRGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5udW1iZXIoKSkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgdXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIGlucHV0VG9rZW5zRGV0YWlsczogei5hcnJheSh6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKSkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiB6LmFycmF5KHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpKS5vcHRpb25hbCgpLFxuICAgIHJlcXVlc3RVc2FnZUVudHJpZXM6IHouYXJyYXkocmVxdWVzdFVzYWdlU2NoZW1hKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBtb2RlbFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICBvdXRwdXQ6IHouYXJyYXkocHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtKSxcbiAgICByZXNwb25zZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBpdGVtU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2Vfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlRvb2xDYWxsSXRlbS5vcihwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW0pLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmdfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5SZWFzb25pbmdJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX2NhbGxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdoYW5kb2ZmX291dHB1dF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgICAgIHNvdXJjZUFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIHRhcmdldEFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfYXBwcm92YWxfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtLm9yKHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSlcbiAgICAgICAgICAgIC5vcihwcm90b2NvbC5TaGVsbENhbGxJdGVtKVxuICAgICAgICAgICAgLm9yKHByb3RvY29sLkFwcGx5UGF0Y2hDYWxsSXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgICAgIHRvb2xOYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgfSksXG5dKTtcbmNvbnN0IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2UnKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB3b3JrZmxvd19uYW1lOiB6LnN0cmluZygpLFxuICAgIGdyb3VwX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgbmV3SXRlbXM6IHouYXJyYXkoaXRlbVNjaGVtYSksXG4gICAgdG9vbHNVc2VkOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIGhhbmRvZmZzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIGhhbmRvZmY6IHouYW55KCksXG4gICAgfSkpLFxuICAgIGZ1bmN0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICB0b29sOiB6LmFueSgpLFxuICAgIH0pKSxcbiAgICBjb21wdXRlckFjdGlvbnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgY29tcHV0ZXI6IHouYW55KCksXG4gICAgfSkpLFxuICAgIHNoZWxsQWN0aW9uczogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgc2hlbGw6IHouYW55KCksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIGFwcGx5UGF0Y2hBY3Rpb25zOiB6XG4gICAgICAgIC5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBhcHBseVBhdGNoOiB6LmFueSgpLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBtY3BBcHByb3ZhbFJlcXVlc3RzOiB6XG4gICAgICAgIC5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHJlcXVlc3RJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAvLyBwcm90b2NvbC5Ib3N0ZWRUb29sQ2FsbEl0ZW1cbiAgICAgICAgICAgIHJhd0l0ZW06IHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hvc3RlZF90b29sX2NhbGwnKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIHN0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIC8vIHRoaXMgYWx3YXlzIGV4aXN0cyBidXQgbWFya2VkIGFzIG9wdGlvbmFsIGZvciBlYXJseSB2ZXJzaW9uIGNvbXBhdGliaWxpdHk7IHdoZW4gcmVsZWFzaW5nIDEuMCwgd2UgY2FuIHJlbW92ZSB0aGUgbnVsbGFibGUgYW5kIG9wdGlvbmFsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgICAgIC8vIEhvc3RlZE1DUFRvb2xcbiAgICAgICAgbWNwVG9vbDogei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbCcpLFxuICAgICAgICAgICAgbmFtZTogei5saXRlcmFsKCdob3N0ZWRfbWNwJyksXG4gICAgICAgICAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICB9KSxcbiAgICB9KSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHRyaXB3aXJlVHJpZ2dlcmVkOiB6LmJvb2xlYW4oKSxcbiAgICBvdXRwdXRJbmZvOiB6LmFueSgpLFxufSk7XG5jb25zdCBpbnB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBndWFyZHJhaWw6IHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dCcpLFxuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIG91dHB1dDogZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEsXG59KTtcbmNvbnN0IG91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBndWFyZHJhaWw6IHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBhZ2VudE91dHB1dDogei5hbnkoKSxcbiAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG91dHB1dDogZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBTZXJpYWxpemVkUnVuU3RhdGUgPSB6Lm9iamVjdCh7XG4gICAgJHNjaGVtYVZlcnNpb24sXG4gICAgY3VycmVudFR1cm46IHoubnVtYmVyKCksXG4gICAgY3VycmVudEFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgb3JpZ2luYWxJbnB1dDogei5zdHJpbmcoKS5vcih6LmFycmF5KHByb3RvY29sLk1vZGVsSXRlbSkpLFxuICAgIG1vZGVsUmVzcG9uc2VzOiB6LmFycmF5KG1vZGVsUmVzcG9uc2VTY2hlbWEpLFxuICAgIGNvbnRleHQ6IHoub2JqZWN0KHtcbiAgICAgICAgdXNhZ2U6IHVzYWdlU2NoZW1hLFxuICAgICAgICBhcHByb3ZhbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoub2JqZWN0KHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiB6LmFycmF5KHouc3RyaW5nKCkpLm9yKHouYm9vbGVhbigpKSxcbiAgICAgICAgICAgIHJlamVjdGVkOiB6LmFycmF5KHouc3RyaW5nKCkpLm9yKHouYm9vbGVhbigpKSxcbiAgICAgICAgfSkpLFxuICAgICAgICBjb250ZXh0OiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICB9KSxcbiAgICB0b29sVXNlVHJhY2tlcjogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hcnJheSh6LnN0cmluZygpKSksXG4gICAgbWF4VHVybnM6IHoubnVtYmVyKCksXG4gICAgY3VycmVudEFnZW50U3BhbjogU2VyaWFsaXplZFNwYW4ubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIG5vQWN0aXZlQWdlbnRSdW46IHouYm9vbGVhbigpLFxuICAgIGlucHV0R3VhcmRyYWlsUmVzdWx0czogei5hcnJheShpbnB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSksXG4gICAgb3V0cHV0R3VhcmRyYWlsUmVzdWx0czogei5hcnJheShvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIGN1cnJlbnRTdGVwOiBuZXh0U3RlcFNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGxhc3RNb2RlbFJlc3BvbnNlOiBtb2RlbFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgZ2VuZXJhdGVkSXRlbXM6IHouYXJyYXkoaXRlbVNjaGVtYSksXG4gICAgbGFzdFByb2Nlc3NlZFJlc3BvbnNlOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBjdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudDogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgICB0cmFjZTogc2VyaWFsaXplZFRyYWNlU2NoZW1hLm51bGxhYmxlKCksXG59KTtcbi8qKlxuICogU2VyaWFsaXphYmxlIHNuYXBzaG90IG9mIGFuIGFnZW50J3MgcnVuLCBpbmNsdWRpbmcgY29udGV4dCwgdXNhZ2UgYW5kIHRyYWNlLlxuICogV2hpbGUgdGhpcyBjbGFzcyBoYXMgcHVibGljbHkgd3JpdGFibGUgcHJvcGVydGllcyAocHJlZml4ZWQgd2l0aCBgX2ApLCB0aGV5IGFyZSBub3QgbWVhbnQgdG8gYmVcbiAqIHVzZWQgZGlyZWN0bHkuIFRvIHJlYWQgdGhlc2UgcHJvcGVydGllcywgdXNlIHRoZSBgUnVuUmVzdWx0YCBpbnN0ZWFkLlxuICpcbiAqIE1hbmlwdWxhdGlvbiBvZiB0aGUgc3RhdGUgZGlyZWN0bHkgY2FuIGxlYWQgdG8gdW5leHBlY3RlZCBiZWhhdmlvciBhbmQgc2hvdWxkIGJlIGF2b2lkZWQuXG4gKiBJbnN0ZWFkLCB1c2UgdGhlIGBhcHByb3ZlYCBhbmQgYHJlamVjdGAgbWV0aG9kcyB0byBpbnRlcmFjdCB3aXRoIHRoZSBzdGF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blN0YXRlIHtcbiAgICAvKipcbiAgICAgKiBDdXJyZW50IHR1cm4gbnVtYmVyIGluIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgX2N1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgY3VycmVudGx5IGhhbmRsaW5nIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudDtcbiAgICAvKipcbiAgICAgKiBPcmlnaW5hbCB1c2VyIGlucHV0IHByaW9yIHRvIGFueSBwcm9jZXNzaW5nLlxuICAgICAqL1xuICAgIF9vcmlnaW5hbElucHV0O1xuICAgIC8qKlxuICAgICAqIFJlc3BvbnNlcyBmcm9tIHRoZSBtb2RlbCBzbyBmYXIuXG4gICAgICovXG4gICAgX21vZGVsUmVzcG9uc2VzO1xuICAgIC8qKlxuICAgICAqIEFjdGl2ZSB0cmFjaW5nIHNwYW4gZm9yIHRoZSBjdXJyZW50IGFnZW50IGlmIHRyYWNpbmcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBfY3VycmVudEFnZW50U3BhbjtcbiAgICAvKipcbiAgICAgKiBSdW4gY29udGV4dCB0cmFja2luZyBhcHByb3ZhbHMsIHVzYWdlLCBhbmQgb3RoZXIgbWV0YWRhdGEuXG4gICAgICovXG4gICAgX2NvbnRleHQ7XG4gICAgLyoqXG4gICAgICogVGhlIHVzYWdlIGFnZ3JlZ2F0ZWQgZm9yIHRoaXMgcnVuLiBUaGlzIGluY2x1ZGVzIHBlci1yZXF1ZXN0IGJyZWFrZG93bnMgd2hlbiBhdmFpbGFibGUuXG4gICAgICovXG4gICAgZ2V0IHVzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGV4dC51c2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoYXQgdG9vbHMgZWFjaCBhZ2VudCBoYXMgdXNlZC5cbiAgICAgKi9cbiAgICBfdG9vbFVzZVRyYWNrZXI7XG4gICAgLyoqXG4gICAgICogSXRlbXMgZ2VuZXJhdGVkIGJ5IHRoZSBhZ2VudCBkdXJpbmcgdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfZ2VuZXJhdGVkSXRlbXM7XG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIGBfZ2VuZXJhdGVkSXRlbXNgIGFscmVhZHkgZmx1c2hlZCB0byBzZXNzaW9uIHN0b3JhZ2UgZm9yIHRoZSBjdXJyZW50IHR1cm4uXG4gICAgICpcbiAgICAgKiBQZXJzaXN0aW5nIHRoZSBlbnRpcmUgdHVybiBvbiBldmVyeSBzYXZlIHdvdWxkIGR1cGxpY2F0ZSByZXNwb25zZXMgYW5kIHRvb2wgb3V0cHV0cy5cbiAgICAgKiBJbnN0ZWFkLCBgc2F2ZVRvU2Vzc2lvbmAgYXBwZW5kcyBvbmx5IHRoZSBkZWx0YSBzaW5jZSB0aGUgcHJldmlvdXMgd3JpdGUuIFRoaXMgY291bnRlclxuICAgICAqIHRyYWNrcyBob3cgbWFueSBnZW5lcmF0ZWQgcnVuIGl0ZW1zIGZyb20gKnRoaXMgdHVybiogd2VyZSBhbHJlYWR5IHdyaXR0ZW4gc28gdGhlIG5leHRcbiAgICAgKiBzYXZlIGNhbiBzbGljZSBvZmYgb25seSB0aGUgbmV3IGVudHJpZXMuIFdoZW4gYSB0dXJuIGlzIGludGVycnVwdGVkIChlLmcuLCBhd2FpdGluZyB0b29sXG4gICAgICogYXBwcm92YWwpIGFuZCBsYXRlciByZXN1bWVkLCB3ZSByZXdpbmQgdGhlIGNvdW50ZXIgYmVmb3JlIGNvbnRpbnVpbmcgc28gdGhlIHBlbmRpbmcgdG9vbFxuICAgICAqIG91dHB1dCBzdGlsbCBnZXRzIHN0b3JlZC5cbiAgICAgKi9cbiAgICBfY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQ7XG4gICAgLyoqXG4gICAgICogTWF4aW11bSBhbGxvd2VkIHR1cm5zIGJlZm9yZSBmb3JjaW5nIHRlcm1pbmF0aW9uLlxuICAgICAqL1xuICAgIF9tYXhUdXJucztcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBydW4gaGFzIGFuIGFjdGl2ZSBhZ2VudCBzdGVwIGluIHByb2dyZXNzLlxuICAgICAqL1xuICAgIF9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBMYXN0IG1vZGVsIHJlc3BvbnNlIGZvciB0aGUgcHJldmlvdXMgdHVybi5cbiAgICAgKi9cbiAgICBfbGFzdFR1cm5SZXNwb25zZTtcbiAgICAvKipcbiAgICAgKiBSZXN1bHRzIGZyb20gaW5wdXQgZ3VhcmRyYWlscyBhcHBsaWVkIHRvIHRoZSBydW4uXG4gICAgICovXG4gICAgX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBSZXN1bHRzIGZyb20gb3V0cHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIC8qKlxuICAgICAqIE5leHQgc3RlcCBjb21wdXRlZCBmb3IgdGhlIGFnZW50IHRvIHRha2UuXG4gICAgICovXG4gICAgX2N1cnJlbnRTdGVwID0gdW5kZWZpbmVkO1xuICAgIC8qKlxuICAgICAqIFBhcnNlZCBtb2RlbCByZXNwb25zZSBhZnRlciBhcHBseWluZyBndWFyZHJhaWxzIGFuZCB0b29scy5cbiAgICAgKi9cbiAgICBfbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gdW5kZWZpbmVkO1xuICAgIC8qKlxuICAgICAqIFRyYWNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJ1biBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX3RyYWNlID0gbnVsbDtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBvcmlnaW5hbElucHV0LCBzdGFydGluZ0FnZW50LCBtYXhUdXJucykge1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5fb3JpZ2luYWxJbnB1dCA9IHN0cnVjdHVyZWRDbG9uZShvcmlnaW5hbElucHV0KTtcbiAgICAgICAgdGhpcy5fbW9kZWxSZXNwb25zZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fY3VycmVudEFnZW50ID0gc3RhcnRpbmdBZ2VudDtcbiAgICAgICAgdGhpcy5fdG9vbFVzZVRyYWNrZXIgPSBuZXcgQWdlbnRUb29sVXNlVHJhY2tlcigpO1xuICAgICAgICB0aGlzLl9nZW5lcmF0ZWRJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9IDA7XG4gICAgICAgIHRoaXMuX21heFR1cm5zID0gbWF4VHVybnM7XG4gICAgICAgIHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX3RyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBhZ2VudCBydW4uIFRoaXMgaW5jbHVkZXMgdGhlIGlucHV0IGl0ZW1zIGFuZCB0aGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQodGhpcy5fb3JpZ2luYWxJbnB1dCwgdGhpcy5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBpbnRlcnJ1cHRpb25zIGlmIHRoZSBjdXJyZW50IHN0ZXAgaXMgYW4gaW50ZXJydXB0aW9uIG90aGVyd2lzZSByZXR1cm5zIGFuIGVtcHR5IGFycmF5LlxuICAgICAqL1xuICAgIGdldEludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRTdGVwLmRhdGEuaW50ZXJydXB0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZXMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gYXBwcm92ZSB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSBhcHByb3ZlIHRoZSBjdXJyZW50IHRvb2wgY2FsbC4gVG8gYWxsb3cgdGhlIHRvb2wgdG8gYmUgdXNlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRocm91Z2hvdXQgdGhlIHJ1biwgc2V0IHRoZSBgYWx3YXlzQXBwcm92ZWAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBhcHByb3ZhbC5cbiAgICAgKi9cbiAgICBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdHMgYSB0b29sIGNhbGwgcmVxdWVzdGVkIGJ5IHRoZSBhZ2VudCB0aHJvdWdoIGFuIGludGVycnVwdGlvbiBhbmQgYXBwcm92YWwgaXRlbSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogVG8gcmVqZWN0IHRoZSByZXF1ZXN0IHVzZSB0aGlzIG1ldGhvZCBhbmQgdGhlbiBydW4gdGhlIGFnZW50IGFnYWluIHdpdGggdGhlIHNhbWUgc3RhdGUgb2JqZWN0XG4gICAgICogdG8gY29udGludWUgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBvbmx5IHJlamVjdCB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c1JlamVjdGAgb3B0aW9uIHRvIGB0cnVlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBjYWxsIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIHJlamVjdGlvbi5cbiAgICAgKi9cbiAgICByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0LlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIEpTT04gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgICRzY2hlbWFWZXJzaW9uOiBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OLFxuICAgICAgICAgICAgY3VycmVudFR1cm46IHRoaXMuX2N1cnJlbnRUdXJuLFxuICAgICAgICAgICAgY3VycmVudEFnZW50OiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fY3VycmVudEFnZW50Lm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3JpZ2luYWxJbnB1dDogdGhpcy5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgIG1vZGVsUmVzcG9uc2VzOiB0aGlzLl9tb2RlbFJlc3BvbnNlcy5tYXAoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RzOiByZXNwb25zZS51c2FnZS5yZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5pbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2VuczogcmVzcG9uc2UudXNhZ2Uub3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLnRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS51c2FnZS5pbnB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RVc2FnZUVudHJpZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS51c2FnZS5yZXF1ZXN0VXNhZ2VFbnRyaWVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFVzYWdlRW50cmllczogcmVzcG9uc2UudXNhZ2UucmVxdWVzdFVzYWdlRW50cmllcy5tYXAoKGVudHJ5KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnM6IGVudHJ5LmlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiBlbnRyeS5vdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogZW50cnkudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IGVudHJ5LmlucHV0VG9rZW5zRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IGVudHJ5Lm91dHB1dFRva2Vuc0RldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiByZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLl9jb250ZXh0LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbFVzZVRyYWNrZXI6IHRoaXMuX3Rvb2xVc2VUcmFja2VyLnRvSlNPTigpLFxuICAgICAgICAgICAgbWF4VHVybnM6IHRoaXMuX21heFR1cm5zLFxuICAgICAgICAgICAgY3VycmVudEFnZW50U3BhbjogdGhpcy5fY3VycmVudEFnZW50U3Bhbj8udG9KU09OKCksXG4gICAgICAgICAgICBub0FjdGl2ZUFnZW50UnVuOiB0aGlzLl9ub0FjdGl2ZUFnZW50UnVuLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMsXG4gICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgICAgIGFnZW50OiByLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgY3VycmVudFN0ZXA6IHRoaXMuX2N1cnJlbnRTdGVwLFxuICAgICAgICAgICAgbGFzdE1vZGVsUmVzcG9uc2U6IHRoaXMuX2xhc3RUdXJuUmVzcG9uc2UsXG4gICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogdGhpcy5fZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnRvSlNPTigpKSxcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50OiB0aGlzLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCxcbiAgICAgICAgICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogdGhpcy5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLFxuICAgICAgICAgICAgdHJhY2U6IHRoaXMuX3RyYWNlID8gdGhpcy5fdHJhY2UudG9KU09OKCkgOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICAvLyBwYXJzaW5nIHRoZSBzY2hlbWEgdG8gZW5zdXJlIHRoZSBvdXRwdXQgaXMgdmFsaWQgZm9yIHJlcGFyc2luZ1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBTZXJpYWxpemVkUnVuU3RhdGUuc2FmZVBhcnNlKG91dHB1dCk7XG4gICAgICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTeXN0ZW1FcnJvcihgRmFpbGVkIHRvIHNlcmlhbGl6ZSBydW4gc3RhdGUuICR7cGFyc2VkLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZC5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgYSBydW4gc3RhdGUgZnJvbSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gZGVzZXJpYWxpemUgYSBydW4gc3RhdGUgZnJvbSBhIHN0cmluZyB0aGF0IHdhcyBzZXJpYWxpemVkIHVzaW5nIHRoZVxuICAgICAqIGB0b1N0cmluZ2AgbWV0aG9kLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tU3RyaW5nKGluaXRpYWxBZ2VudCwgc3RyKSB7XG4gICAgICAgIGNvbnN0IFtwYXJzaW5nRXJyb3IsIGpzb25SZXN1bHRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gSlNPTi5wYXJzZShzdHIpKTtcbiAgICAgICAgaWYgKHBhcnNpbmdFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgRmFpbGVkIHRvIHBhcnNlIHJ1biBzdGF0ZS4gJHtwYXJzaW5nRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHBhcnNpbmdFcnJvci5tZXNzYWdlIDogU3RyaW5nKHBhcnNpbmdFcnJvcil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFNjaGVtYVZlcnNpb24gPSBqc29uUmVzdWx0LiRzY2hlbWFWZXJzaW9uO1xuICAgICAgICBpZiAoIWN1cnJlbnRTY2hlbWFWZXJzaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdSdW4gc3RhdGUgaXMgbWlzc2luZyBzY2hlbWEgdmVyc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50U2NoZW1hVmVyc2lvbiAhPT0gQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgUnVuIHN0YXRlIHNjaGVtYSB2ZXJzaW9uICR7Y3VycmVudFNjaGVtYVZlcnNpb259IGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgdmVyc2lvbiAke0NVUlJFTlRfU0NIRU1BX1ZFUlNJT059YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGVKc29uID0gU2VyaWFsaXplZFJ1blN0YXRlLnBhcnNlKEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGNvbnN0IGFnZW50TWFwID0gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBSZWJ1aWxkIHRoZSBjb250ZXh0XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgUnVuQ29udGV4dChzdGF0ZUpzb24uY29udGV4dC5jb250ZXh0KTtcbiAgICAgICAgY29udGV4dC5fcmVidWlsZEFwcHJvdmFscyhzdGF0ZUpzb24uY29udGV4dC5hcHByb3ZhbHMpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBGaW5kIHRoZSBjdXJyZW50IGFnZW50IGZyb20gdGhlIGluaXRpYWwgYWdlbnRcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gYWdlbnRNYXAuZ2V0KHN0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZSk7XG4gICAgICAgIGlmICghY3VycmVudEFnZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBBZ2VudCAke3N0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBuZXcgUnVuU3RhdGUoY29udGV4dCwgJycsIGN1cnJlbnRBZ2VudCwgc3RhdGVKc29uLm1heFR1cm5zKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuID0gc3RhdGVKc29uLmN1cnJlbnRUdXJuO1xuICAgICAgICAvLyByZWJ1aWxkIHRvb2wgdXNlIHRyYWNrZXJcbiAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgZm9yIChjb25zdCBbYWdlbnROYW1lLCB0b29sTmFtZXNdIG9mIE9iamVjdC5lbnRyaWVzKHN0YXRlSnNvbi50b29sVXNlVHJhY2tlcikpIHtcbiAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGFnZW50TWFwLmdldChhZ2VudE5hbWUpLCB0b29sTmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlYnVpbGQgY3VycmVudCBhZ2VudCBzcGFuXG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgaWYgKCFzdGF0ZUpzb24udHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2UgaXMgbm90IHNldCwgc2tpcHBpbmcgdHJhY2luZyBzZXR1cCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJhY2UgPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgICAgIHRyYWNlSWQ6IHN0YXRlSnNvbi50cmFjZT8uaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogc3RhdGVKc29uLnRyYWNlPy53b3JrZmxvd19uYW1lLFxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHN0YXRlSnNvbi50cmFjZT8uZ3JvdXBfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBzdGF0ZUpzb24udHJhY2U/Lm1ldGFkYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgc3RhdGUuX3RyYWNlID0gdHJhY2U7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBzdGF0ZUpzb24ubm9BY3RpdmVBZ2VudFJ1bjtcbiAgICAgICAgc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9XG4gICAgICAgICAgICBzdGF0ZUpzb24uaW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgICAgICBzdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IHN0YXRlSnNvbi5vdXRwdXRHdWFyZHJhaWxSZXN1bHRzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICBhZ2VudDogYWdlbnRNYXAuZ2V0KHIuYWdlbnQubmFtZSksXG4gICAgICAgIH0pKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gc3RhdGVKc29uLmN1cnJlbnRTdGVwO1xuICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHN0YXRlSnNvbi5vcmlnaW5hbElucHV0O1xuICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMgPSBzdGF0ZUpzb24ubW9kZWxSZXNwb25zZXMubWFwKGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSk7XG4gICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlXG4gICAgICAgICAgICA/IGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzdGF0ZUpzb24ubGFzdE1vZGVsUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gc3RhdGVKc29uLmdlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gZGVzZXJpYWxpemVJdGVtKGl0ZW0sIGFnZW50TWFwKSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVyblBlcnNpc3RlZEl0ZW1Db3VudCA9XG4gICAgICAgICAgICBzdGF0ZUpzb24uY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPz8gMDtcbiAgICAgICAgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2VcbiAgICAgICAgICAgID8gYXdhaXQgZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2NvbnRleHQsIHN0YXRlSnNvbi5sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHN0YXRlSnNvbi5jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaGFuZG9mZicsXG4gICAgICAgICAgICAgICAgbmV3QWdlbnQ6IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudFN0ZXAubmV3QWdlbnQubmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpIHtcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgcXVldWUgPSBbaW5pdGlhbEFnZW50XTtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAobWFwLmhhcyhjdXJyZW50QWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG1hcC5zZXQoY3VycmVudEFnZW50Lm5hbWUsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZG9mZiBvZiBjdXJyZW50QWdlbnQuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgIGlmIChoYW5kb2ZmIGluc3RhbmNlb2YgQWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhhbmRvZmYuYWdlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5oYXMoaGFuZG9mZi5hZ2VudC5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGhhbmRvZmYuYWdlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4pIHtcbiAgICBjb25zdCBzcGFuRGF0YSA9IHNlcmlhbGl6ZWRTcGFuLnNwYW5fZGF0YTtcbiAgICBjb25zdCBwcmV2aW91c1NwYW4gPSBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuXG4gICAgICAgID8gZGVzZXJpYWxpemVTcGFuKHRyYWNlLCBzZXJpYWxpemVkU3Bhbi5wcmV2aW91c19zcGFuKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBzcGFuID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICBzcGFuSWQ6IHNlcmlhbGl6ZWRTcGFuLmlkLFxuICAgICAgICB0cmFjZUlkOiBzZXJpYWxpemVkU3Bhbi50cmFjZV9pZCxcbiAgICAgICAgcGFyZW50SWQ6IHNlcmlhbGl6ZWRTcGFuLnBhcmVudF9pZCA/PyB1bmRlZmluZWQsXG4gICAgICAgIHN0YXJ0ZWRBdDogc2VyaWFsaXplZFNwYW4uc3RhcnRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGVuZGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLmVuZGVkX2F0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YTogc3BhbkRhdGEsXG4gICAgfSwgdHJhY2UpO1xuICAgIHNwYW4ucHJldmlvdXNTcGFuID0gcHJldmlvdXNTcGFuO1xuICAgIHJldHVybiBzcGFuO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzZXJpYWxpemVkTW9kZWxSZXNwb25zZSkge1xuICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnVzYWdlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2FnZSxcbiAgICAgICAgb3V0cHV0OiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5vdXRwdXQubWFwKChpdGVtKSA9PiBwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0ucGFyc2UoaXRlbSkpLFxuICAgICAgICByZXNwb25zZUlkOiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICBwcm92aWRlckRhdGE6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplSXRlbShzZXJpYWxpemVkSXRlbSwgYWdlbnRNYXApIHtcbiAgICBzd2l0Y2ggKHNlcmlhbGl6ZWRJdGVtLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbWVzc2FnZV9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSksIHNlcmlhbGl6ZWRJdGVtLm91dHB1dCk7XG4gICAgICAgIGNhc2UgJ3JlYXNvbmluZ19pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVhc29uaW5nSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX2NhbGxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLnNvdXJjZUFnZW50Lm5hbWUpLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0udGFyZ2V0QWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICd0b29sX2FwcHJvdmFsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0udG9vbE5hbWUpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UoYWdlbnRNYXAsIGN1cnJlbnRBZ2VudCwgY29udGV4dCwgc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlKSB7XG4gICAgY29uc3QgYWxsVG9vbHMgPSBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoY29udGV4dCk7XG4gICAgY29uc3QgdG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBjb21wdXRlclRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdjb21wdXRlcicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3Qgc2hlbGxUb29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnc2hlbGwnKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGFwcGx5UGF0Y2hUb29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnYXBwbHlfcGF0Y2gnKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGhhbmRvZmZzID0gbmV3IE1hcChjdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkgaW5zdGFuY2VvZiBBZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIFtlbnRyeS5uYW1lLCBoYW5kb2ZmKGVudHJ5KV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtlbnRyeS50b29sTmFtZSwgZW50cnldO1xuICAgIH0pKTtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIG5ld0l0ZW1zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMubWFwKChpdGVtKSA9PiBkZXNlcmlhbGl6ZUl0ZW0oaXRlbSwgYWdlbnRNYXApKSxcbiAgICAgICAgdG9vbHNVc2VkOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkLFxuICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kb2Zmcy5oYXMoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEhhbmRvZmYgJHtoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogaGFuZG9mZi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2Zmcy5nZXQoaGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBmdW5jdGlvbnM6IGF3YWl0IFByb21pc2UuYWxsKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMubWFwKGFzeW5jIChmdW5jdGlvbkNhbGwpID0+IHtcbiAgICAgICAgICAgIGlmICghdG9vbHMuaGFzKGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVG9vbCAke2Z1bmN0aW9uQ2FsbC50b29sLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogZnVuY3Rpb25DYWxsLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xzLmdldChmdW5jdGlvbkNhbGwudG9vbC5uYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLm1hcCgoY29tcHV0ZXJBY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xOYW1lID0gY29tcHV0ZXJBY3Rpb24uY29tcHV0ZXIubmFtZTtcbiAgICAgICAgICAgIGlmICghY29tcHV0ZXJUb29scy5oYXModG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQ29tcHV0ZXIgdG9vbCAke3Rvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGNvbXB1dGVyQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGNvbXB1dGVyOiBjb21wdXRlclRvb2xzLmdldCh0b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgc2hlbGxBY3Rpb25zOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLnNoZWxsQWN0aW9ucyA/PyBbXSkubWFwKChzaGVsbEFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBzaGVsbEFjdGlvbi5zaGVsbC5uYW1lO1xuICAgICAgICAgICAgaWYgKCFzaGVsbFRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBTaGVsbCB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogc2hlbGxBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgc2hlbGw6IHNoZWxsVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBhcHBseVBhdGNoQWN0aW9uczogKHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5hcHBseVBhdGNoQWN0aW9ucyA/PyBbXSkubWFwKChhcHBseVBhdGNoQWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcGx5UGF0Y2hBY3Rpb24uYXBwbHlQYXRjaC5uYW1lO1xuICAgICAgICAgICAgaWYgKCFhcHBseVBhdGNoVG9vbHMuaGFzKHRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEFwcGx5IHBhdGNoIHRvb2wgJHt0b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBhcHBseVBhdGNoQWN0aW9uLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGFwcGx5UGF0Y2g6IGFwcGx5UGF0Y2hUb29scy5nZXQodG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cyA/PyBbXSkubWFwKChhcHByb3ZhbFJlcXVlc3QpID0+ICh7XG4gICAgICAgICAgICByZXF1ZXN0SXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtXG4gICAgICAgICAgICAgICAgLnJhd0l0ZW0sIGN1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICBtY3BUb29sOiBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbCxcbiAgICAgICAgfSkpLFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdC5oYW5kb2Zmcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZ1bmN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0Lm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5jb21wdXRlckFjdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5zaGVsbEFjdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5hcHBseVBhdGNoQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuU3RhdGUubWpzLm1hcCIsImltcG9ydCB7IEFnZW50IH0gZnJvbSBcIi4vYWdlbnQubWpzXCI7XG5pbXBvcnQgeyBkZWZpbmVJbnB1dEd1YXJkcmFpbCwgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJzLm1qc1wiO1xuaW1wb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuSG9va3MgfSBmcm9tIFwiLi9saWZlY3ljbGUubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHNlcmlhbGl6ZVRvb2wsIHNlcmlhbGl6ZUhhbmRvZmYgfSBmcm9tIFwiLi91dGlscy9zZXJpYWxpemUubWpzXCI7XG5pbXBvcnQgeyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBVc2VyRXJyb3IsIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgYWRkU3RlcFRvUnVuUmVzdWx0LCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuLCByZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZSwgbWF5YmVSZXNldFRvb2xDaG9pY2UsIHByb2Nlc3NNb2RlbFJlc3BvbnNlLCBzdHJlYW1TdGVwSXRlbXNUb1J1blJlc3VsdCwgc2F2ZVN0cmVhbUlucHV0VG9TZXNzaW9uLCBzYXZlU3RyZWFtUmVzdWx0VG9TZXNzaW9uLCBzYXZlVG9TZXNzaW9uLCBwcmVwYXJlSW5wdXRJdGVtc1dpdGhTZXNzaW9uLCB9IGZyb20gXCIuL3J1bkltcGxlbWVudGF0aW9uLm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVUcmFjZSwgYWRkRXJyb3JUb0N1cnJlbnRTcGFuLCByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWdlbnRTcGFuLCB3aXRoR3VhcmRyYWlsU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQsIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5pbXBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgaXNHcHQ1RGVmYXVsdCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NCB9IGZyb20gXCIuL3V0aWxzL2Jhc2U2NC5tanNcIjtcbmltcG9ydCB7IGlzQXJyYXlCdWZmZXJWaWV3LCBpc05vZGVCdWZmZXIsIGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90LCB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBydW5uZXIgPSBnZXREZWZhdWx0UnVubmVyKCk7XG4gICAgaWYgKG9wdGlvbnM/LnN0cmVhbSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJ1bm5lci5ydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIE9yY2hlc3RyYXRlcyBhZ2VudCBleGVjdXRpb24sIGluY2x1ZGluZyBndWFyZHJhaWxzLCB0b29sIGNhbGxzLCBzZXNzaW9uIHBlcnNpc3RlbmNlLCBhbmRcbiAqIHRyYWNpbmcuIFJldXNlIGEgYFJ1bm5lcmAgaW5zdGFuY2Ugd2hlbiB5b3Ugd2FudCBjb25zaXN0ZW50IGNvbmZpZ3VyYXRpb24gYWNyb3NzIG11bHRpcGxlIHJ1bnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uZXIgZXh0ZW5kcyBSdW5Ib29rcyB7XG4gICAgY29uZmlnO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBydW5uZXIgd2l0aCBvcHRpb25hbCBkZWZhdWx0cyB0aGF0IGFwcGx5IHRvIGV2ZXJ5IHN1YnNlcXVlbnQgcnVuIGludm9jYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gT3ZlcnJpZGVzIGZvciBtb2RlbHMsIGd1YXJkcmFpbHMsIHRyYWNpbmcsIG9yIHNlc3Npb24gYmVoYXZpb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBtb2RlbFByb3ZpZGVyOiBjb25maWcubW9kZWxQcm92aWRlciA/PyBnZXREZWZhdWx0TW9kZWxQcm92aWRlcigpLFxuICAgICAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IGNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgaGFuZG9mZklucHV0RmlsdGVyOiBjb25maWcuaGFuZG9mZklucHV0RmlsdGVyLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxzOiBjb25maWcuaW5wdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsczogY29uZmlnLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICB0cmFjaW5nRGlzYWJsZWQ6IGNvbmZpZy50cmFjaW5nRGlzYWJsZWQgPz8gZmFsc2UsXG4gICAgICAgICAgICB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhOiBjb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSA/PyB0cnVlLFxuICAgICAgICAgICAgd29ya2Zsb3dOYW1lOiBjb25maWcud29ya2Zsb3dOYW1lID8/ICdBZ2VudCB3b3JrZmxvdycsXG4gICAgICAgICAgICB0cmFjZUlkOiBjb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIGdyb3VwSWQ6IGNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgdHJhY2VNZXRhZGF0YTogY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgICAgICBzZXNzaW9uSW5wdXRDYWxsYmFjazogY29uZmlnLnNlc3Npb25JbnB1dENhbGxiYWNrLFxuICAgICAgICAgICAgY2FsbE1vZGVsSW5wdXRGaWx0ZXI6IGNvbmZpZy5jYWxsTW9kZWxJbnB1dEZpbHRlcixcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZUlucHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyA9IHtcbiAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgY29udGV4dDogdW5kZWZpbmVkLFxuICAgIH0pIHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRPcHRpb25zID0gb3B0aW9ucyA/PyB7IHN0cmVhbTogZmFsc2UsIGNvbnRleHQ6IHVuZGVmaW5lZCB9O1xuICAgICAgICAvLyBQZXItcnVuIG9wdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgcnVubmVyIGRlZmF1bHRzIGZvciBzZXNzaW9uIG1lbW9yeSBiZWhhdmlvci5cbiAgICAgICAgY29uc3Qgc2Vzc2lvbklucHV0Q2FsbGJhY2sgPSByZXNvbHZlZE9wdGlvbnMuc2Vzc2lvbklucHV0Q2FsbGJhY2sgPz8gdGhpcy5jb25maWcuc2Vzc2lvbklucHV0Q2FsbGJhY2s7XG4gICAgICAgIC8vIExpa2V3aXNlIGFsbG93IGNhbGxlcnMgdG8gb3ZlcnJpZGUgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgb24gaW5kaXZpZHVhbCBydW5zLlxuICAgICAgICBjb25zdCBjYWxsTW9kZWxJbnB1dEZpbHRlciA9IHJlc29sdmVkT3B0aW9ucy5jYWxsTW9kZWxJbnB1dEZpbHRlciA/PyB0aGlzLmNvbmZpZy5jYWxsTW9kZWxJbnB1dEZpbHRlcjtcbiAgICAgICAgY29uc3QgaGFzQ2FsbE1vZGVsSW5wdXRGaWx0ZXIgPSBCb29sZWFuKGNhbGxNb2RlbElucHV0RmlsdGVyKTtcbiAgICAgICAgY29uc3QgZWZmZWN0aXZlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnJlc29sdmVkT3B0aW9ucyxcbiAgICAgICAgICAgIHNlc3Npb25JbnB1dENhbGxiYWNrLFxuICAgICAgICAgICAgY2FsbE1vZGVsSW5wdXRGaWx0ZXIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24gPSBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMuY29udmVyc2F0aW9uSWQpIHx8XG4gICAgICAgICAgICBCb29sZWFuKGVmZmVjdGl2ZU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIHRyYWNrcyBjb252ZXJzYXRpb24gaGlzdG9yeSB3ZSBkZWZlciB0byBpdCBmb3IgcHJldmlvdXMgdHVybnMgc28gbG9jYWwgc2Vzc2lvblxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSBjYW4gZm9jdXMgc29sZWx5IG9uIHRoZSBuZXcgZGVsdGEgYmVpbmcgZ2VuZXJhdGVkIGluIHRoaXMgcHJvY2Vzcy5cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGVmZmVjdGl2ZU9wdGlvbnMuc2Vzc2lvbjtcbiAgICAgICAgY29uc3QgcmVzdW1pbmdGcm9tU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICBsZXQgc2Vzc2lvbklucHV0T3JpZ2luYWxTbmFwc2hvdCA9IHNlc3Npb24gJiYgcmVzdW1pbmdGcm9tU3RhdGUgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8vIFRyYWNrcyByZW1haW5pbmcgcGVyc2lzdGVuY2Ugc2xvdHMgcGVyIEFnZW50SW5wdXRJdGVtIGtleSBzbyByZXN1bWVkIHNlc3Npb25zIG9ubHkgd3JpdGUgZWFjaCBvcmlnaW5hbCBvY2N1cnJlbmNlIG9uY2UuXG4gICAgICAgIGxldCBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHMgPSBzZXNzaW9uICYmIHJlc3VtaW5nRnJvbVN0YXRlID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkO1xuICAgICAgICAvLyBLZWVwcyB0cmFjayBvZiB3aGljaCBpbnB1dHMgc2hvdWxkIGJlIHdyaXR0ZW4gYmFjayB0byBzZXNzaW9uIG1lbW9yeS4gYHNvdXJjZUl0ZW1zYCByZWZsZWN0c1xuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0cyAoc28gd2UgY2FuIHJlc3BlY3QgcmVzdW1lIGNvdW50cykgd2hpbGUgYGZpbHRlcmVkSXRlbXNgLCB3aGVuIHByZXNlbnQsXG4gICAgICAgIC8vIGNvbnRhaW5zIHRoZSBmaWx0ZXJlZC9yZWRhY3RlZCBjbG9uZXMgdGhhdCBtdXN0IGJlIHBlcnNpc3RlZCBmb3IgaGlzdG9yeS5cbiAgICAgICAgLy8gVGhlIGhlbHBlciByZWNvbmNpbGVzIHRoZSBmaWx0ZXJlZCBjb3BpZXMgcHJvZHVjZWQgYnkgY2FsbE1vZGVsSW5wdXRGaWx0ZXIgd2l0aCB0aGVpciBvcmlnaW5hbFxuICAgICAgICAvLyBjb3VudGVycGFydHMgc28gcmVzdW1lLWZyb20tc3RhdGUgYm9va2tlZXBpbmcgc3RheXMgY29uc2lzdGVudCBhbmQgZHVwbGljYXRlIHJlZmVyZW5jZXMgb25seVxuICAgICAgICAvLyBjb25zdW1lIGEgc2luZ2xlIHBlcnNpc3RlbmNlIHNsb3QuXG4gICAgICAgIGNvbnN0IHJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlID0gKHNvdXJjZUl0ZW1zLCBmaWx0ZXJlZEl0ZW1zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nV3JpdGVDb3VudHMgPSBzZXNzaW9uSW5wdXRQZW5kaW5nV3JpdGVDb3VudHM7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRJdGVtcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwZW5kaW5nV3JpdGVDb3VudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCA9IGZpbHRlcmVkSXRlbXMubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNpc3RhYmxlSXRlbXMgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VPY2N1cnJlbmNlQ291bnRzID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgICAgICAgICAvLyBUcmFjayBob3cgbWFueSB0aW1lcyBlYWNoIG9yaWdpbmFsIG9iamVjdCBhcHBlYXJzIHNvIGR1cGxpY2F0ZSByZWZlcmVuY2VzIG9ubHkgY29uc3VtZSBvbmUgcGVyc2lzdGVuY2Ugc2xvdC5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSB8fCB0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dENvdW50ID0gKHNvdXJjZU9jY3VycmVuY2VDb3VudHMuZ2V0KHNvdXJjZSkgPz8gMCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIG5leHRDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIExldCBmaWx0ZXJlZCBpdGVtcyB3aXRob3V0IGEgb25lLXRvLW9uZSBzb3VyY2UgbWF0Y2ggY2xhaW0gYW55IHJlbWFpbmluZyBwZXJzaXN0ZW5jZSBjb3VudC5cbiAgICAgICAgICAgICAgICBjb25zdCBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCByZW1haW5pbmddIG9mIHBlbmRpbmdXcml0ZUNvdW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJlZEl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkSXRlbSA9IGZpbHRlcmVkSXRlbXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgYWxsb2NhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZUl0ZW1zW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwZW5kaW5nT2NjdXJyZW5jZXMgPSAoc291cmNlT2NjdXJyZW5jZUNvdW50cy5nZXQoc291cmNlKSA/PyAwKSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VPY2N1cnJlbmNlQ291bnRzLnNldChzb3VyY2UsIHBlbmRpbmdPY2N1cnJlbmNlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ09jY3VycmVuY2VzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHBlbmRpbmdXcml0ZUNvdW50cy5nZXQoc291cmNlS2V5KSA/PyAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KHNvdXJjZUtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvY2F0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkS2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoZmlsdGVyZWRJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRSZW1haW5pbmcgPSBwZW5kaW5nV3JpdGVDb3VudHMuZ2V0KGZpbHRlcmVkS2V5KSA/PyAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGZpbHRlcmVkS2V5LCBmaWx0ZXJlZFJlbWFpbmluZyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG9jYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSAmJiBjb25zdW1lQW55UGVuZGluZ1dyaXRlU2xvdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0YWJsZUl0ZW1zLnB1c2goc3RydWN0dXJlZENsb25lKGZpbHRlcmVkSXRlbSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb2NhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFsbG9jYXRlZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXNvdXJjZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklucHV0RmlsdGVyZWRTbmFwc2hvdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBhdCBsZWFzdCBvbmUgY29weSBzbyBsYXRlciBwZXJzaXN0ZW5jZSByZXNvbHZlcyBldmVuIHdoZW4gbm8gY291bnRlcnMgcmVtYWluLlxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGFibGVJdGVtcy5wdXNoKHN0cnVjdHVyZWRDbG9uZShmaWx0ZXJlZEl0ZW0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGFibGVJdGVtcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90ID0gcGVyc2lzdGFibGVJdGVtcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBbXTtcbiAgICAgICAgICAgIGlmICghcGVuZGluZ1dyaXRlQ291bnRzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNvdXJjZUl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzb3VyY2VJdGVtcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmcgPSBwZW5kaW5nV3JpdGVDb3VudHMuZ2V0KGtleSkgPz8gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV3JpdGVDb3VudHMuc2V0KGtleSwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2goc3RydWN0dXJlZENsb25lKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSBmaWx0ZXJlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIGl0ZW1zIHNob3VsZCBiZSBjb21taXR0ZWQgdG8gc2Vzc2lvbiBtZW1vcnkgZm9yIHRoaXMgdHVybi5cbiAgICAgICAgLy8gRmlsdGVycyB0YWtlIHByZWNlZGVuY2UgYmVjYXVzZSB0aGV5IHJlZmxlY3QgdGhlIGV4YWN0IHBheWxvYWQgZGVsaXZlcmVkIHRvIHRoZSBtb2RlbC5cbiAgICAgICAgY29uc3QgcmVzb2x2ZVNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlc3Npb25JbnB1dEZpbHRlcmVkU25hcHNob3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0NhbGxNb2RlbElucHV0RmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90O1xuICAgICAgICB9O1xuICAgICAgICBsZXQgcHJlcGFyZWRJbnB1dCA9IGlucHV0O1xuICAgICAgICBpZiAoIShwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUpKSB7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiBBcnJheS5pc0FycmF5KHByZXBhcmVkSW5wdXQpICYmICFzZXNzaW9uSW5wdXRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1J1bkNvbmZpZy5zZXNzaW9uSW5wdXRDYWxsYmFjayBtdXN0IGJlIHByb3ZpZGVkIHdoZW4gdXNpbmcgc2Vzc2lvbiBoaXN0b3J5IHdpdGggbGlzdCBpbnB1dHMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcmVwYXJlZCA9IGF3YWl0IHByZXBhcmVJbnB1dEl0ZW1zV2l0aFNlc3Npb24ocHJlcGFyZWRJbnB1dCwgc2Vzc2lvbiwgc2Vzc2lvbklucHV0Q2FsbGJhY2ssIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBzZXJ2ZXIgdHJhY2tzIGNvbnZlcnNhdGlvbiBzdGF0ZSB3ZSBvbmx5IHNlbmQgdGhlIG5ldyB0dXJuIGlucHV0cztcbiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBtZXNzYWdlcyBhcmUgcmVjb3ZlcmVkIHZpYSBjb252ZXJzYXRpb25JZC9wcmV2aW91c1Jlc3BvbnNlSWQuXG4gICAgICAgICAgICAgICAgaW5jbHVkZUhpc3RvcnlJblByZXBhcmVkSW5wdXQ6ICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgICAgIHByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zOiBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbiAmJiBzZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2VydmVyIG1hbmFnZXMgbWVtb3J5IHdlIG9ubHkgcGVyc2lzdCB0aGUgbmV3IHR1cm4gaW5wdXRzIGxvY2FsbHkgc28gdGhlXG4gICAgICAgICAgICAgICAgLy8gY29udmVyc2F0aW9uIHNlcnZpY2Ugc3RheXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHByaW9yIGV4Y2hhbmdlcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uSXRlbXMgPSBwcmVwYXJlZC5zZXNzaW9uSXRlbXM7XG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25JdGVtcyAmJiBzZXNzaW9uSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlZElucHV0ID0gc2Vzc2lvbkl0ZW1zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZWRJbnB1dCA9IHByZXBhcmVkLnByZXBhcmVkSW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gcHJlcGFyZWQuc2Vzc2lvbkl0ZW1zID8/IFtdO1xuICAgICAgICAgICAgICAgIC8vIENsb25lIHRoZSBpdGVtcyB0aGF0IHdpbGwgYmUgcGVyc2lzdGVkIHNvIGxhdGVyIG11dGF0aW9ucyAoZmlsdGVycywgaG9va3MpIGNhbm5vdCBkZXN5bmMgaGlzdG9yeS5cbiAgICAgICAgICAgICAgICBzZXNzaW9uSW5wdXRPcmlnaW5hbFNuYXBzaG90ID0gaXRlbXMubWFwKChpdGVtKSA9PiBzdHJ1Y3R1cmVkQ2xvbmUoaXRlbSkpO1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHBlbmRpbmcgY291bnRzIHNvIGVhY2ggcHJlcGFyZWQgaXRlbSByZXNlcnZlcyBleGFjdGx5IG9uZSB3cml0ZSBzbG90IHVudGlsIGZpbHRlcnMgcmVzb2x2ZSBtYXRjaGVzLlxuICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JbnB1dFBlbmRpbmdXcml0ZUNvdW50cy5zZXQoa2V5LCAoc2Vzc2lvbklucHV0UGVuZGluZ1dyaXRlQ291bnRzLmdldChrZXkpID8/IDApICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFN0cmVhbWluZyBydW5zIHBlcnNpc3QgdGhlIGlucHV0IGFzeW5jaHJvbm91c2x5LCBzbyB0cmFjayBhIG9uZS1zaG90IGhlbHBlclxuICAgICAgICAvLyB0aGF0IGNhbiBiZSBhd2FpdGVkIGZyb20gbXVsdGlwbGUgYnJhbmNoZXMgd2l0aG91dCBkb3VibGUtd3JpdGluZy5cbiAgICAgICAgbGV0IGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkO1xuICAgICAgICAvLyBTZXNzaW9ucyByZW1haW4gdXNhYmxlIGFsb25nc2lkZSBzZXJ2ZXItbWFuYWdlZCBjb252ZXJzYXRpb25zIChlLmcuLCBPcGVuQUlDb252ZXJzYXRpb25zU2Vzc2lvbilcbiAgICAgICAgLy8gc28gY2FsbGVycyBjYW4gcmV1c2UgY2FsbGJhY2tzLCByZXN1bWUtZnJvbS1zdGF0ZSBsb2dpYywgYW5kIG90aGVyIGhlbHBlcnMgd2l0aG91dCBkdXBsaWNhdGluZ1xuICAgICAgICAvLyByZW1vdGUgaGlzdG9yeSwgc28gcGVyc2lzdGVuY2UgaXMgZ2F0ZWQgb24gc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbi5cbiAgICAgICAgaWYgKHNlc3Npb24gJiYgIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgIGxldCBwZXJzaXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVuc3VyZVN0cmVhbUlucHV0UGVyc2lzdGVkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtc1RvUGVyc2lzdCA9IHJlc29sdmVTZXNzaW9uSXRlbXNGb3JQZXJzaXN0ZW5jZSgpO1xuICAgICAgICAgICAgICAgIGlmICghaXRlbXNUb1BlcnNpc3QgfHwgaXRlbXNUb1BlcnNpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGVyc2lzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCBzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24oc2Vzc2lvbiwgaXRlbXNUb1BlcnNpc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGVjdXRlUnVuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVmZmVjdGl2ZU9wdGlvbnMuc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtUmVzdWx0ID0gYXdhaXQgdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgcHJlcGFyZWRJbnB1dCwgZWZmZWN0aXZlT3B0aW9ucywgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHJlY29yZFNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyZWFtUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcnVuUmVzdWx0ID0gYXdhaXQgdGhpcy4jcnVuSW5kaXZpZHVhbE5vblN0cmVhbShhZ2VudCwgcHJlcGFyZWRJbnB1dCwgZWZmZWN0aXZlT3B0aW9ucywgcmVjb3JkU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UpO1xuICAgICAgICAgICAgLy8gU2VlIG5vdGUgYWJvdmU6IGFsbG93IHNlc3Npb25zIHRvIHJ1biBmb3IgY2FsbGJhY2tzL3N0YXRlIGJ1dCBza2lwIHdyaXRlcyB3aGVuIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIGlzIHRoZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIHRyYW5zY3JpcHQgaGlzdG9yeS5cbiAgICAgICAgICAgIGlmIChzZXNzaW9uICYmICFzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVRvU2Vzc2lvbihzZXNzaW9uLCByZXNvbHZlU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UoKSwgcnVuUmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmVwYXJlZElucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUgJiYgcHJlcGFyZWRJbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UocHJlcGFyZWRJbnB1dC5fdHJhY2UsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocHJlcGFyZWRJbnB1dC5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihwcmVwYXJlZElucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSdW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZVRyYWNlKGFzeW5jICgpID0+IGV4ZWN1dGVSdW4oKSwge1xuICAgICAgICAgICAgdHJhY2VJZDogdGhpcy5jb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuY29uZmlnLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuY29uZmlnLmdyb3VwSWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5jb25maWcudHJhY2VNZXRhZGF0YSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gIEludGVybmFsc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaW5wdXRHdWFyZHJhaWxEZWZzO1xuICAgIG91dHB1dEd1YXJkcmFpbERlZnM7XG4gICAgI2dldElucHV0R3VhcmRyYWlsRGVmaW5pdGlvbnMoc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50LmlucHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpKTtcbiAgICB9XG4gICAgI3NwbGl0SW5wdXRHdWFyZHJhaWxzKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLiNnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zKHN0YXRlKTtcbiAgICAgICAgY29uc3QgYmxvY2tpbmcgPSBbXTtcbiAgICAgICAgY29uc3QgcGFyYWxsZWwgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBndWFyZHJhaWwgb2YgZ3VhcmRyYWlscykge1xuICAgICAgICAgICAgaWYgKGd1YXJkcmFpbC5ydW5JblBhcmFsbGVsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGJsb2NraW5nLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcmFsbGVsLnB1c2goZ3VhcmRyYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBibG9ja2luZywgcGFyYWxsZWwgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogUmVzb2x2ZXMgdGhlIGVmZmVjdGl2ZSBtb2RlbCBvbmNlIHNvIGJvdGggcnVuIGxvb3BzIG9iZXkgdGhlIHNhbWUgcHJlY2VkZW5jZSBydWxlcy5cbiAgICAgKi9cbiAgICBhc3luYyAjcmVzb2x2ZU1vZGVsRm9yQWdlbnQoYWdlbnQpIHtcbiAgICAgICAgY29uc3QgZXhwbGljdGx5TW9kZWxTZXQgPSAoYWdlbnQubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgYWdlbnQubW9kZWwgIT09IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVIpIHx8XG4gICAgICAgICAgICAodGhpcy5jb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLm1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKTtcbiAgICAgICAgbGV0IHJlc29sdmVkTW9kZWwgPSBzZWxlY3RNb2RlbChhZ2VudC5tb2RlbCwgdGhpcy5jb25maWcubW9kZWwpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc29sdmVkTW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXNvbHZlZE1vZGVsID0gYXdhaXQgdGhpcy5jb25maWcubW9kZWxQcm92aWRlci5nZXRNb2RlbChyZXNvbHZlZE1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBtb2RlbDogcmVzb2x2ZWRNb2RlbCwgZXhwbGljdGx5TW9kZWxTZXQgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oc3RhcnRpbmdBZ2VudCwgaW5wdXQsIG9wdGlvbnMsIFxuICAgIC8vIHNlc3Npb25JbnB1dFVwZGF0ZSBsZXRzIHRoZSBjYWxsZXIgYWRqdXN0IHF1ZXVlZCBzZXNzaW9uIGl0ZW1zIGFmdGVyIGZpbHRlcnMgcnVuIHNvIHdlXG4gICAgLy8gcGVyc2lzdCBleGFjdGx5IHdoYXQgd2Ugc2VuZCB0byB0aGUgbW9kZWwgKGUuZy4sIGFmdGVyIHJlZGFjdGlvbnMgb3IgdHJ1bmNhdGlvbikuXG4gICAgc2Vzc2lvbklucHV0VXBkYXRlKSB7XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNhdmVkIHN0YXRlIHdlIHVzZSB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IGlzUmVzdW1lZFN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaXNSZXN1bWVkU3RhdGVcbiAgICAgICAgICAgICAgICA/IGlucHV0XG4gICAgICAgICAgICAgICAgOiBuZXcgUnVuU3RhdGUob3B0aW9ucy5jb250ZXh0IGluc3RhbmNlb2YgUnVuQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBSdW5Db250ZXh0KG9wdGlvbnMuY29udGV4dCksIGlucHV0LCBzdGFydGluZ0FnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgPSBvcHRpb25zLmNvbnZlcnNhdGlvbklkIHx8IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkXG4gICAgICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBvcHRpb25zLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciAmJiBpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJpbWVGcm9tU3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbElucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHN0YXRlLl9tb2RlbFJlc3BvbnNlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlSW50ZXJydXB0ZWRUdXJuKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvdW50ZXIgd2lsbCBiZSByZXNldCB3aGVuIF9jdXJyZW50VHVybiBpcyBpbmNyZW1lbnRlZCAoc3RhcnRpbmcgYSBuZXcgdHVybilcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBzdGlsbCBpbiBhbiBpbnRlcnJ1cHRpb24sIHNvIHdlIG5lZWQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29udGludWluZyBmcm9tIGludGVycnVwdGlvbiB3aXRoIG5leHRfc3RlcF9ydW5fYWdhaW4sIHNldCBzdGVwIHRvIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gdGhlIGxvb3AgdHJlYXRzIGl0IGFzIGEgbmV3IHN0ZXAgd2l0aG91dCBpbmNyZW1lbnRpbmcgdGhlIHR1cm4uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciBoYXMgYWxyZWFkeSBiZWVuIGFkanVzdGVkIGJ5IHJlc29sdmVJbnRlcnJ1cHRlZFR1cm4ncyByZXdpbmQgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gPSBpc1Jlc3VtZWRTdGF0ZSAmJiBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWluZ0ludGVycnVwdGVkVHVybiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGFkdmFuY2UgdGhlIHR1cm4gd2hlbiByZXN1bWluZyBmcm9tIGFuIGludGVycnVwdGlvbjsgdGhlIG5leHQgbW9kZWwgY2FsbCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgcGFydCBvZiB0aGUgc2FtZSBsb2dpY2FsIHR1cm4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFR1cm4gPiBzdGF0ZS5fbWF4VHVybnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbj8uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHN0YXRlLl9tYXhUdXJucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtzdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUnVubmluZyBhZ2VudCAke3N0YXRlLl9jdXJyZW50QWdlbnQubmFtZX0gKHR1cm4gJHtzdGF0ZS5fY3VycmVudFR1cm59KWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgcnVuIGlucHV0IGd1YXJkcmFpbHMgb24gdGhlIGZpcnN0IHR1cm4gb2YgYSBuZXcgcnVuLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSAmJiAhaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy4jc3BsaXRJbnB1dEd1YXJkcmFpbHMoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChndWFyZHJhaWxzLmJsb2NraW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlLCBndWFyZHJhaWxzLmJsb2NraW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbHMucGFyYWxsZWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UgPSB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUsIGd1YXJkcmFpbHMucGFyYWxsZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuSW5wdXQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByZXBhcmVJbnB1dChzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZ2V0VHVybklucHV0KHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlcGFyZWRDYWxsID0gYXdhaXQgdGhpcy4jcHJlcGFyZU1vZGVsQ2FsbChzdGF0ZSwgb3B0aW9ucywgYXJ0aWZhY3RzLCB0dXJuSW5wdXQsIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIsIHNlc3Npb25JbnB1dFVwZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IGF3YWl0IHByZXBhcmVkQ2FsbC5tb2RlbC5nZXRSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb25zOiBwcmVwYXJlZENhbGwubW9kZWxJbnB1dC5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBwcmVwYXJlZENhbGwucHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4cGxpY2l0IGFnZW50L3J1biBjb25maWcgbW9kZWxzIHNob3VsZCB0YWtlIHByZWNlZGVuY2Ugb3ZlciBwcm9tcHQgZGVmYXVsdHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uKHByZXBhcmVkQ2FsbC5leHBsaWN0bHlNb2RlbFNldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgb3ZlcnJpZGVQcm9tcHRNb2RlbDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBwcmVwYXJlZENhbGwubW9kZWxJbnB1dC5pbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHByZXBhcmVkQ2FsbC5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IHByZXBhcmVkQ2FsbC5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzOiBwcmVwYXJlZENhbGwubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sc0V4cGxpY2l0bHlQcm92aWRlZDogcHJlcGFyZWRDYWxsLnRvb2xzRXhwbGljaXRseVByb3ZpZGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBwcmVwYXJlZENhbGwuc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFmdGVyIGVhY2ggdHVybiByZWNvcmQgdGhlIGl0ZW1zIGVjaG9lZCBieSB0aGUgc2VydmVyIHNvIGZ1dHVyZSByZXF1ZXN0cyBvbmx5XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNsdWRlIHRoZSBpbmNyZW1lbnRhbCBpbnB1dHMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBhY2tub3dsZWRnZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy50cmFja1NlcnZlckl0ZW1zKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2Uoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHByZXBhcmVkQ2FsbC50b29scywgcHJlcGFyZWRDYWxsLmhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuUGVyc2lzdGVkSXRlbUNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVzdWx0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50ID0gc3RhdGUuX2N1cnJlbnRTdGVwLm5ld0FnZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0geyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludGVycnVwdGVkLiBEb24ndCBydW4gYW55IGd1YXJkcmFpbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVzdWx0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUnVubmluZyBuZXh0IGxvb3AnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGluIGFnZW50IHJ1bicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyKSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHRoZSBzcGFuIGlmIHRoZSBydW4gd2FzIGludGVycnVwdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSwgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSkge1xuICAgICAgICBjb25zdCBzZXJ2ZXJNYW5hZ2VzQ29udmVyc2F0aW9uID0gQm9vbGVhbihvcHRpb25zLmNvbnZlcnNhdGlvbklkKSB8fCBCb29sZWFuKG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkKTtcbiAgICAgICAgY29uc3Qgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciA9IHNlcnZlck1hbmFnZXNDb252ZXJzYXRpb25cbiAgICAgICAgICAgID8gbmV3IFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIoe1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBvcHRpb25zLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzUmVzcG9uc2VJZDogb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBoYW5kZWRJbnB1dFRvTW9kZWwgPSBmYWxzZTtcbiAgICAgICAgbGV0IHN0cmVhbUlucHV0UGVyc2lzdGVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHBlcnNpc3RTdHJlYW1JbnB1dElmTmVlZGVkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHN0cmVhbUlucHV0UGVyc2lzdGVkIHx8ICFlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEJvdGggc3VjY2VzcyBhbmQgZXJyb3IgcGF0aHMgY2FsbCB0aGlzIGhlbHBlciwgc28gZ3VhcmQgYWdhaW5zdCBtdWx0aXBsZSB3cml0ZXMuXG4gICAgICAgICAgICBhd2FpdCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCgpO1xuICAgICAgICAgICAgc3RyZWFtSW5wdXRQZXJzaXN0ZWQgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciAmJiBpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmltZUZyb21TdGF0ZSh7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxJbnB1dDogcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgICAgIGdlbmVyYXRlZEl0ZW1zOiByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLFxuICAgICAgICAgICAgICAgIG1vZGVsUmVzcG9uc2VzOiByZXN1bHQuc3RhdGUuX21vZGVsUmVzcG9uc2VzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQ7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPz8ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ05vIG1vZGVsIHJlc3BvbnNlIGZvdW5kIGluIHByZXZpb3VzIHN0YXRlJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgcmVzb2x2ZUludGVycnVwdGVkVHVybihyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXNldCBjb3VudGVyIGhlcmUgLSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuIGFscmVhZHkgYWRqdXN0ZWQgaXQgdmlhIHJld2luZCBsb2dpY1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY291bnRlciB3aWxsIGJlIHJlc2V0IHdoZW4gX2N1cnJlbnRUdXJuIGlzIGluY3JlbWVudGVkIChzdGFydGluZyBhIG5ldyB0dXJuKVxuICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBzdGlsbCBpbiBhbiBpbnRlcnJ1cHRpb24sIHNvIHdlIG5lZWQgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29udGludWluZyBmcm9tIGludGVycnVwdGlvbiB3aXRoIG5leHRfc3RlcF9ydW5fYWdhaW4sIHNldCBzdGVwIHRvIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyB0aGUgbG9vcCB0cmVhdHMgaXQgYXMgYSBuZXcgc3RlcCB3aXRob3V0IGluY3JlbWVudGluZyB0aGUgdHVybi5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvdW50ZXIgaGFzIGFscmVhZHkgYmVlbiBhZGp1c3RlZCBieSByZXNvbHZlSW50ZXJydXB0ZWRUdXJuJ3MgcmV3aW5kIGxvZ2ljLlxuICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVpbmdJbnRlcnJ1cHRlZFR1cm4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnRpZmFjdHMgPSBhd2FpdCBwcmVwYXJlQWdlbnRBcnRpZmFjdHMocmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24gPSBpc1Jlc3VtZWRTdGF0ZSAmJiBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBhZHZhbmNlIHRoZSB0dXJuIHdoZW4gcmVzdW1pbmcgZnJvbSBhbiBpbnRlcnJ1cHRpb247IHRoZSBuZXh0IG1vZGVsIGNhbGwgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgcGFydCBvZiB0aGUgc2FtZSBsb2dpY2FsIHR1cm4uXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXN1bWluZ0Zyb21JbnRlcnJ1cHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm4rKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID4gcmVzdWx0LnN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01heCB0dXJucyBleGNlZWRlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHJlc3VsdC5zdGF0ZS5fbWF4VHVybnMgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3Jlc3VsdC5zdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7Y3VycmVudEFnZW50Lm5hbWV9ICh0dXJuICR7cmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBydW4gaW5wdXQgZ3VhcmRyYWlscyBvbiB0aGUgZmlyc3QgdHVybiBvZiBhIG5ldyBydW4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID09PSAxICYmICFpc1Jlc3VtaW5nRnJvbUludGVycnVwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IHRoaXMuI3NwbGl0SW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlscy5ibG9ja2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgZ3VhcmRyYWlscy5ibG9ja2luZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlscy5wYXJhbGxlbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuI3J1bklucHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIGd1YXJkcmFpbHMucGFyYWxsZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFsbGVsR3VhcmRyYWlsUHJvbWlzZSA9IHByb21pc2UuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWFyZHJhaWxFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmVwYXJlSW5wdXQocmVzdWx0LmlucHV0LCByZXN1bHQubmV3SXRlbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldFR1cm5JbnB1dChyZXN1bHQuaW5wdXQsIHJlc3VsdC5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHJlc3VsdC5zdGF0ZS5fY29udGV4dCwgY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXBhcmVkQ2FsbCA9IGF3YWl0IHRoaXMuI3ByZXBhcmVNb2RlbENhbGwocmVzdWx0LnN0YXRlLCBvcHRpb25zLCBhcnRpZmFjdHMsIHR1cm5JbnB1dCwgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciwgc2Vzc2lvbklucHV0VXBkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBoYW5kZWRJbnB1dFRvTW9kZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHByZXBhcmVkQ2FsbC5tb2RlbC5nZXRTdHJlYW1lZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBwcmVwYXJlZENhbGwucHJvbXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RyZWFtaW5nIHJlcXVlc3RzIHNob3VsZCBhbHNvIGhvbm9yIGV4cGxpY2l0bHkgY2hvc2VuIG1vZGVscy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwcmVwYXJlZENhbGwuZXhwbGljdGx5TW9kZWxTZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgb3ZlcnJpZGVQcm9tcHRNb2RlbDogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogcHJlcGFyZWRDYWxsLm1vZGVsSW5wdXQuaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHByZXBhcmVkQ2FsbC5wcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogcHJlcGFyZWRDYWxsLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5nczogcHJlcGFyZWRDYWxsLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzRXhwbGljaXRseVByb3ZpZGVkOiBwcmVwYXJlZENhbGwudG9vbHNFeHBsaWNpdGx5UHJvdmlkZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2ZmczogcHJlcGFyZWRDYWxsLnNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGU6IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShjdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGd1YXJkcmFpbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZ3VhcmRyYWlsRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZC5wYXJzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5yZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoZmluYWxSZXNwb25zZS51c2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHVzZXIncyBjb2RlIGV4aXRzIGEgbG9vcCB0byBjb25zdW1lIHRoZSBzdHJlYW0sIHdlIG5lZWQgdG8gYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGxvb3AgdG8gcHJldmVudCBpbnRlcm5hbCBmYWxzZSBlcnJvcnMgYW5kIHVubmVjZXNzYXJ5IHByb2Nlc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1blJhd01vZGVsU3RyZWFtRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwYXJhbGxlbEd1YXJkcmFpbFByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3VhcmRyYWlsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBndWFyZHJhaWxFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaW5hbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBkaWQgbm90IHByb2R1Y2UgYSBmaW5hbCByZXNwb25zZSEnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IGZpbmFsUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIHRyYWNrZXIgaW4gc3luYyB3aXRoIHRoZSBzdHJlYW1lZCByZXNwb25zZSBzbyByZWNvbm5lY3Rpb25zIHJlbWFpbiBhY2N1cmF0ZS5cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8udHJhY2tTZXJ2ZXJJdGVtcyhmaW5hbFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9tb2RlbFJlc3BvbnNlcy5wdXNoKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFJlc3BvbnNlID0gcHJvY2Vzc01vZGVsUmVzcG9uc2UocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBjdXJyZW50QWdlbnQsIHByZXBhcmVkQ2FsbC50b29scywgcHJlcGFyZWRDYWxsLmhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBpdGVtcyBlbWl0dGVkIGRpcmVjdGx5IGZyb20gdGhlIG1vZGVsIHJlc3BvbnNlIHNvIHdlIGRvIG5vdFxuICAgICAgICAgICAgICAgICAgICAvLyBzdHJlYW0gdGhlbSBhZ2FpbiBhZnRlciB0b29scyBhbmQgb3RoZXIgc2lkZSBlZmZlY3RzIGZpbmlzaC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlVG9vbEl0ZW1zID0gbmV3IFNldChwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVUb29sSXRlbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0KHJlc3VsdCwgcHJvY2Vzc2VkUmVzcG9uc2UubmV3SXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCByZXNvbHZlVHVybkFmdGVyTW9kZWxSZXNwb25zZShjdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCwgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgdHVyblJlc3VsdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEl0ZW1zOiBwcmVUb29sSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2UoY3VycmVudEFnZW50LCBwcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHVyblJlc3VsdC5uZXh0U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm5QZXJzaXN0ZWRJdGVtQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR3VhcmRyYWlscyBtdXN0IHN1Y2NlZWQgYmVmb3JlIHBlcnNpc3Rpbmcgc2Vzc2lvbiBtZW1vcnkgdG8gYXZvaWQgc3RvcmluZyBibG9ja2VkIG91dHB1dHMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VydmVyTWFuYWdlc0NvbnZlcnNhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2F2ZVN0cmVhbVJlc3VsdFRvU2Vzc2lvbihvcHRpb25zLnNlc3Npb24sIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIGRvbmUgZm9yIG5vdy4gRG9uJ3QgcnVuIGFueSBvdXRwdXQgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24ob3B0aW9ucy5zZXNzaW9uLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50ID0gcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgPy5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCkpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGhhbmRlZElucHV0VG9Nb2RlbCAmJiAhc3RyZWFtSW5wdXRQZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0U3RyZWFtSW5wdXRJZk5lZWRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucywgZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQsIHNlc3Npb25JbnB1dFVwZGF0ZSkge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIG9yIHJldXNlIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCBpc1Jlc3VtZWRTdGF0ZSA9IGlucHV0IGluc3RhbmNlb2YgUnVuU3RhdGU7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGlzUmVzdW1lZFN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgYWdlbnQsIG9wdGlvbnMubWF4VHVybnMgPz8gREVGQVVMVF9NQVhfVFVSTlMpO1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgc3RyZWFtZWQgcmVzdWx0IHdpdGggZXhpc3Rpbmcgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBTdHJlYW1lZFJ1blJlc3VsdCh7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gU2V0dXAgZGVmYXVsdHNcbiAgICAgICAgICAgIHJlc3VsdC5tYXhUdXJucyA9IG9wdGlvbnMubWF4VHVybnMgPz8gc3RhdGUuX21heFR1cm5zO1xuICAgICAgICAgICAgLy8gQ29udGludWUgdGhlIHN0cmVhbSBsb29wIHdpdGhvdXQgYmxvY2tpbmdcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbUxvb3BQcm9taXNlID0gdGhpcy4jcnVuU3RyZWFtTG9vcChyZXN1bHQsIG9wdGlvbnMsIGlzUmVzdW1lZFN0YXRlLCBlbnN1cmVTdHJlYW1JbnB1dFBlcnNpc3RlZCwgc2Vzc2lvbklucHV0VXBkYXRlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuX2RvbmUoKTtcbiAgICAgICAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICByZXN1bHQuX3JhaXNlRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gQXR0YWNoIHRoZSBzdHJlYW0gbG9vcCBwcm9taXNlIHNvIHRyYWNlIGVuZCB3YWl0cyBmb3IgdGhlIGxvb3AgdG8gY29tcGxldGVcbiAgICAgICAgICAgIHJlc3VsdC5fc2V0U3RyZWFtTG9vcFByb21pc2Uoc3RyZWFtTG9vcFByb21pc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jICNydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUsIGd1YXJkcmFpbHNPdmVycmlkZSkge1xuICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gZ3VhcmRyYWlsc092ZXJyaWRlID8/IHRoaXMuI2dldElucHV0R3VhcmRyYWlsRGVmaW5pdGlvbnMoc3RhdGUpO1xuICAgICAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIGlucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBzdGF0ZS5fY29udGV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cy5wdXNoKC4uLnJlc3VsdHMpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0d1YXJkcmFpbCB0cmlwd2lyZSB0cmlnZ2VyZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGd1YXJkcmFpbDogcmVzdWx0Lmd1YXJkcmFpbC5uYW1lIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgSW5wdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8pfWAsIHJlc3VsdCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcm9sbCBiYWNrIHRoZSBjdXJyZW50IHR1cm4gdG8gZW5hYmxlIHJlcnVuc1xuICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVybi0tO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgSW5wdXQgZ3VhcmRyYWlsIGZhaWxlZCB0byBjb21wbGV0ZTogJHtlfWAsIGUsIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGFzeW5jICNydW5PdXRwdXRHdWFyZHJhaWxzKHN0YXRlLCBvdXRwdXQpIHtcbiAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRHdWFyZHJhaWxzLm1hcChkZWZpbmVPdXRwdXRHdWFyZHJhaWwpKTtcbiAgICAgICAgaWYgKGd1YXJkcmFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYWdlbnRPdXRwdXQgPSBzdGF0ZS5fY3VycmVudEFnZW50LnByb2Nlc3NGaW5hbE91dHB1dChvdXRwdXQpO1xuICAgICAgICAgICAgY29uc3QgcnVuT3V0cHV0ID0gZ2V0VHVybklucHV0KFtdLCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpO1xuICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBzdGF0ZS5fY29udGV4dCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsUmVzcG9uc2U6IHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJ1bk91dHB1dCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBPdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8pfWAsIHJlc3VsdCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgT3V0cHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQXBwbGllcyBjYWxsLWxldmVsIGZpbHRlcnMgYW5kIG1lcmdlcyBzZXNzaW9uIHVwZGF0ZXMgc28gdGhlIG1vZGVsIHJlcXVlc3QgbWlycm9ycyBleGFjdGx5XG4gICAgICogd2hhdCB3ZSBwZXJzaXN0ZWQgZm9yIGhpc3RvcnkuXG4gICAgICovXG4gICAgYXN5bmMgI3ByZXBhcmVNb2RlbENhbGwoc3RhdGUsIG9wdGlvbnMsIGFydGlmYWN0cywgdHVybklucHV0LCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLCBzZXNzaW9uSW5wdXRVcGRhdGUpIHtcbiAgICAgICAgY29uc3QgeyBtb2RlbCwgZXhwbGljdGx5TW9kZWxTZXQgfSA9IGF3YWl0IHRoaXMuI3Jlc29sdmVNb2RlbEZvckFnZW50KHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICBsZXQgbW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAuLi5zdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsXG4gICAgICAgIH07XG4gICAgICAgIG1vZGVsU2V0dGluZ3MgPSBhZGp1c3RNb2RlbFNldHRpbmdzRm9yTm9uR1BUNVJ1bm5lck1vZGVsKGV4cGxpY3RseU1vZGVsU2V0LCBzdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3MsIG1vZGVsLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgbW9kZWxTZXR0aW5ncyA9IG1heWJlUmVzZXRUb29sQ2hvaWNlKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl90b29sVXNlVHJhY2tlciwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgIGNvbnN0IHN5c3RlbUluc3RydWN0aW9ucyA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHN0YXRlLl9jb250ZXh0KTtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRQcm9tcHQoc3RhdGUuX2NvbnRleHQpO1xuICAgICAgICBjb25zdCB7IG1vZGVsSW5wdXQsIHNvdXJjZUl0ZW1zLCBwZXJzaXN0ZWRJdGVtcywgZmlsdGVyQXBwbGllZCB9ID0gYXdhaXQgYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlcihzdGF0ZS5fY3VycmVudEFnZW50LCBvcHRpb25zLmNhbGxNb2RlbElucHV0RmlsdGVyLCBzdGF0ZS5fY29udGV4dCwgdHVybklucHV0LCBzeXN0ZW1JbnN0cnVjdGlvbnMpO1xuICAgICAgICAvLyBJbmZvcm0gdGhlIHRyYWNrZXIgd2hpY2ggZXhhY3Qgb3JpZ2luYWwgb2JqZWN0cyBtYWRlIGl0IHRvIHRoZSBwcm92aWRlciBzbyBmdXR1cmUgdHVybnNcbiAgICAgICAgLy8gb25seSBzZW5kIHRoZSBkZWx0YSB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/Lm1hcmtJbnB1dEFzU2VudChzb3VyY2VJdGVtcyk7XG4gICAgICAgIC8vIFByb3ZpZGUgZmlsdGVyZWQgY2xvbmVzIHdoZW5ldmVyIGZpbHRlcnMgcnVuIHNvIHNlc3Npb24gaGlzdG9yeSBtaXJyb3JzIHRoZSBtb2RlbCBwYXlsb2FkLlxuICAgICAgICAvLyBSZXR1cm5pbmcgYW4gZW1wdHkgYXJyYXkgaXMgaW50ZW50aW9uYWw6IGl0IHRlbGxzIHRoZSBzZXNzaW9uIGxheWVyIHRvIHBlcnNpc3QgXCJub3RoaW5nXCJcbiAgICAgICAgLy8gaW5zdGVhZCBvZiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZmlsdGVyZWQgb3JpZ2luYWxzIHdoZW4gdGhlIGZpbHRlciByZWRhY3RzIGV2ZXJ5dGhpbmcuXG4gICAgICAgIHNlc3Npb25JbnB1dFVwZGF0ZT8uKHNvdXJjZUl0ZW1zLCBmaWx0ZXJBcHBsaWVkID8gcGVyc2lzdGVkSXRlbXMgOiB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBwcmV2aW91c1Jlc3BvbnNlSWQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5wcmV2aW91c1Jlc3BvbnNlSWQgPz9cbiAgICAgICAgICAgIG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkO1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LmNvbnZlcnNhdGlvbklkID8/IG9wdGlvbnMuY29udmVyc2F0aW9uSWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5hcnRpZmFjdHMsXG4gICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgIGV4cGxpY3RseU1vZGVsU2V0LFxuICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgIG1vZGVsSW5wdXQsXG4gICAgICAgICAgICBwcm9tcHQsXG4gICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQsXG4gICAgICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIENvbnN0cnVjdHMgdGhlIG1vZGVsIGlucHV0IGFycmF5IGZvciB0aGUgY3VycmVudCB0dXJuIGJ5IGNvbWJpbmluZyB0aGUgb3JpZ2luYWwgdHVybiBpbnB1dCB3aXRoXG4gKiBhbnkgbmV3IHJ1biBpdGVtcyAoZXhjbHVkaW5nIHRvb2wgYXBwcm92YWwgcGxhY2Vob2xkZXJzKS4gVGhpcyBoZWxwcyBlbnN1cmUgdGhhdCByZXBlYXRlZCBjYWxsc1xuICogdG8gdGhlIFJlc3BvbnNlcyBBUEkgb25seSBzZW5kIG5ld2x5IGdlbmVyYXRlZCBjb250ZW50LlxuICpcbiAqIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUdXJuSW5wdXQob3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICBjb25zdCByYXdJdGVtcyA9IGdlbmVyYXRlZEl0ZW1zXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpIC8vIGRvbid0IGluY2x1ZGUgYXBwcm92YWwgaXRlbXMgdG8gYXZvaWQgZG91YmxlIGZ1bmN0aW9uIGNhbGxzXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG4gICAgcmV0dXJuIFsuLi50b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpLCAuLi5yYXdJdGVtc107XG59XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gIEludGVybmFsIGhlbHBlcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCBERUZBVUxUX01BWF9UVVJOUyA9IDEwO1xubGV0IF9kZWZhdWx0UnVubmVyID0gdW5kZWZpbmVkO1xuZnVuY3Rpb24gZ2V0RGVmYXVsdFJ1bm5lcigpIHtcbiAgICBpZiAoX2RlZmF1bHRSdW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xuICAgIH1cbiAgICBfZGVmYXVsdFJ1bm5lciA9IG5ldyBSdW5uZXIoKTtcbiAgICByZXR1cm4gX2RlZmF1bHRSdW5uZXI7XG59XG4vKipcbiAqIFJlc29sdmVzIHRoZSBlZmZlY3RpdmUgbW9kZWwgZm9yIHRoZSBuZXh0IHR1cm4gYnkgZ2l2aW5nIHByZWNlZGVuY2UgdG8gdGhlIGFnZW50LXNwZWNpZmljXG4gKiBjb25maWd1cmF0aW9uIHdoZW4gcHJlc2VudCwgb3RoZXJ3aXNlIGZhbGxpbmcgYmFjayB0byB0aGUgcnVubmVyLWxldmVsIGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RNb2RlbChhZ2VudE1vZGVsLCBydW5Db25maWdNb2RlbCkge1xuICAgIC8vIFdoZW4gaW5pdGlhbGl6aW5nIGFuIGFnZW50IHdpdGhvdXQgbW9kZWwgbmFtZSwgdGhlIG1vZGVsIHByb3BlcnR5IGlzIHNldCB0byBhbiBlbXB0eSBzdHJpbmcuIFNvLFxuICAgIC8vICogYWdlbnRNb2RlbCA9PT0gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUiAmIHJ1bkNvbmZpZ01vZGVsIGV4aXN0cywgcnVuQ29uZmlnTW9kZWwgd2lsbCBiZSB1c2VkXG4gICAgLy8gKiBhZ2VudE1vZGVsIGlzIHNldCwgdGhlIGFnZW50TW9kZWwgd2lsbCBiZSB1c2VkIG92ZXIgcnVuQ29uZmlnTW9kZWxcbiAgICBpZiAoKHR5cGVvZiBhZ2VudE1vZGVsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBhZ2VudE1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKSB8fFxuICAgICAgICBhZ2VudE1vZGVsIC8vIGFueSB0cnV0aHkgdmFsdWVcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIGFnZW50TW9kZWw7XG4gICAgfVxuICAgIHJldHVybiBydW5Db25maWdNb2RlbCA/PyBhZ2VudE1vZGVsID8/IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVI7XG59XG4vKipcbiAqIE5vcm1hbGl6ZXMgdHJhY2luZyBjb25maWd1cmF0aW9uIGludG8gdGhlIGZvcm1hdCBleHBlY3RlZCBieSBtb2RlbCBwcm92aWRlcnMuXG4gKiBSZXR1cm5zIGBmYWxzZWAgdG8gZGlzYWJsZSB0cmFjaW5nLCBgdHJ1ZWAgdG8gaW5jbHVkZSBmdWxsIHBheWxvYWQgZGF0YSwgb3JcbiAqIGAnZW5hYmxlZF93aXRob3V0X2RhdGEnYCB0byBvbWl0IHNlbnNpdGl2ZSBjb250ZW50IHdoaWxlIHN0aWxsIGVtaXR0aW5nIHNwYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2luZyh0cmFjaW5nRGlzYWJsZWQsIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICBpZiAodHJhY2luZ0Rpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAnZW5hYmxlZF93aXRob3V0X2RhdGEnO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYXBwbHlDYWxsTW9kZWxJbnB1dEZpbHRlcihhZ2VudCwgY2FsbE1vZGVsSW5wdXRGaWx0ZXIsIGNvbnRleHQsIGlucHV0SXRlbXMsIHN5c3RlbUluc3RydWN0aW9ucykge1xuICAgIGNvbnN0IGNsb25lSW5wdXRJdGVtcyA9IChpdGVtcywgbWFwKSA9PiBpdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgY2xvbmVkID0gc3RydWN0dXJlZENsb25lKGl0ZW0pO1xuICAgICAgICBpZiAobWFwICYmIGNsb25lZCAmJiB0eXBlb2YgY2xvbmVkID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgbWFwLnNldChjbG9uZWQsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZWQ7XG4gICAgfSk7XG4gICAgLy8gUmVjb3JkIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGUgY2xvbmVkIGFycmF5IHBhc3NlZCB0byBmaWx0ZXJzIGFuZCB0aGUgb3JpZ2luYWwgaW5wdXRzLlxuICAgIGNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgICBjb25zdCBvcmlnaW5hbFBvb2wgPSBidWlsZEFnZW50SW5wdXRQb29sKGlucHV0SXRlbXMpO1xuICAgIGNvbnN0IGZhbGxiYWNrT3JpZ2luYWxzID0gW107XG4gICAgLy8gVHJhY2sgYW55IG9yaWdpbmFsIG9iamVjdCBpbnB1dHMgc28gZmlsdGVyZWQgcmVwbGFjZW1lbnRzIGNhbiBzdGlsbCBtYXJrIHRoZW0gYXMgZGVsaXZlcmVkLlxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnB1dEl0ZW1zKSB7XG4gICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZmFsbGJhY2tPcmlnaW5hbHMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZW1vdmVGcm9tRmFsbGJhY2sgPSAoY2FuZGlkYXRlKSA9PiB7XG4gICAgICAgIGlmICghY2FuZGlkYXRlIHx8IHR5cGVvZiBjYW5kaWRhdGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBmYWxsYmFja09yaWdpbmFscy5maW5kSW5kZXgoKG9yaWdpbmFsKSA9PiBvcmlnaW5hbCA9PT0gY2FuZGlkYXRlKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgZmFsbGJhY2tPcmlnaW5hbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdGFrZUZhbGxiYWNrT3JpZ2luYWwgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBmYWxsYmFja09yaWdpbmFscy5zaGlmdCgpO1xuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgcmVtb3ZlQWdlbnRJbnB1dEZyb21Qb29sKG9yaWdpbmFsUG9vbCwgbmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgICAvLyBBbHdheXMgY3JlYXRlIGEgZGVlcCBjb3B5IHNvIGRvd25zdHJlYW0gbXV0YXRpb25zIGluc2lkZSBmaWx0ZXJzIGNhbm5vdCBhZmZlY3RcbiAgICAvLyB0aGUgY2FjaGVkIHR1cm4gc3RhdGUuXG4gICAgY29uc3QgY2xvbmVkQmFzZUlucHV0ID0gY2xvbmVJbnB1dEl0ZW1zKGlucHV0SXRlbXMsIGNsb25lTWFwKTtcbiAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICBpbnB1dDogY2xvbmVkQmFzZUlucHV0LFxuICAgICAgICBpbnN0cnVjdGlvbnM6IHN5c3RlbUluc3RydWN0aW9ucyxcbiAgICB9O1xuICAgIGlmICghY2FsbE1vZGVsSW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsSW5wdXQ6IGJhc2UsXG4gICAgICAgICAgICBzb3VyY2VJdGVtczogWy4uLmlucHV0SXRlbXNdLFxuICAgICAgICAgICAgcGVyc2lzdGVkSXRlbXM6IFtdLFxuICAgICAgICAgICAgZmlsdGVyQXBwbGllZDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxNb2RlbElucHV0RmlsdGVyKHtcbiAgICAgICAgICAgIG1vZGVsRGF0YTogYmFzZSxcbiAgICAgICAgICAgIGFnZW50LFxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dC5jb250ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXN1bHQgfHwgIUFycmF5LmlzQXJyYXkocmVzdWx0LmlucHV0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignY2FsbE1vZGVsSW5wdXRGaWx0ZXIgbXVzdCByZXR1cm4gYSBNb2RlbElucHV0RGF0YSBvYmplY3Qgd2l0aCBhbiBpbnB1dCBhcnJheS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmVzZXJ2ZSBhIHBvaW50ZXIgdG8gdGhlIG9yaWdpbmFsIG9iamVjdCBiYWNraW5nIGVhY2ggZmlsdGVyZWQgY2xvbmUgc28gZG93bnN0cmVhbVxuICAgICAgICAvLyB0cmFja2VycyBjYW4ga2VlcCB0aGVpciBib29ra2VlcGluZyBjb25zaXN0ZW50IGV2ZW4gYWZ0ZXIgcmVkYWN0aW9uLlxuICAgICAgICBjb25zdCBzb3VyY2VJdGVtcyA9IHJlc3VsdC5pbnB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmICghaXRlbSB8fCB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBjbG9uZU1hcC5nZXQoaXRlbSk7XG4gICAgICAgICAgICBpZiAob3JpZ2luYWwpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tRmFsbGJhY2sob3JpZ2luYWwpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUFnZW50SW5wdXRGcm9tUG9vbChvcmlnaW5hbFBvb2wsIG9yaWdpbmFsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBnZXRBZ2VudElucHV0SXRlbUtleShpdGVtKTtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRCeUNvbnRlbnQgPSB0YWtlQWdlbnRJbnB1dEZyb21Qb29sKG9yaWdpbmFsUG9vbCwga2V5KTtcbiAgICAgICAgICAgIGlmIChtYXRjaGVkQnlDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRnJvbUZhbGxiYWNrKG1hdGNoZWRCeUNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVkQnlDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2sgPSB0YWtlRmFsbGJhY2tPcmlnaW5hbCgpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNsb25lZEZpbHRlcmVkSW5wdXQgPSBjbG9uZUlucHV0SXRlbXMocmVzdWx0LmlucHV0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsSW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogY2xvbmVkRmlsdGVyZWRJbnB1dCxcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHR5cGVvZiByZXN1bHQuaW5zdHJ1Y3Rpb25zID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICA/IHN5c3RlbUluc3RydWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICA6IHJlc3VsdC5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc291cmNlSXRlbXMsXG4gICAgICAgICAgICBwZXJzaXN0ZWRJdGVtczogY2xvbmVkRmlsdGVyZWRJbnB1dC5tYXAoKGl0ZW0pID0+IHN0cnVjdHVyZWRDbG9uZShpdGVtKSksXG4gICAgICAgICAgICBmaWx0ZXJBcHBsaWVkOiB0cnVlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBjYWxsTW9kZWxJbnB1dEZpbHRlcicsXG4gICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG4vLyBUcmFja3Mgd2hpY2ggaXRlbXMgaGF2ZSBhbHJlYWR5IGJlZW4gc2VudCB0byBvciByZWNlaXZlZCBmcm9tIHRoZSBSZXNwb25zZXMgQVBJIHdoZW4gdGhlIGNhbGxlclxuLy8gc3VwcGxpZXMgYGNvbnZlcnNhdGlvbklkYC9gcHJldmlvdXNSZXNwb25zZUlkYC4gVGhpcyBlbnN1cmVzIHdlIG9ubHkgc2VuZCB0aGUgZGVsdGEgZWFjaCB0dXJuLlxuY2xhc3MgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciB7XG4gICAgLy8gQ29udmVyc2F0aW9uIElEOlxuICAgIC8vIC0gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMjdXNpbmctdGhlLWNvbnZlcnNhdGlvbnMtYXBpXG4gICAgLy8gLSBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9hcGktcmVmZXJlbmNlL2NvbnZlcnNhdGlvbnMvY3JlYXRlXG4gICAgY29udmVyc2F0aW9uSWQ7XG4gICAgLy8gUHJldmlvdXMgUmVzcG9uc2UgSUQ6XG4gICAgLy8gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMjcGFzc2luZy1jb250ZXh0LWZyb20tdGhlLXByZXZpb3VzLXJlc3BvbnNlXG4gICAgcHJldmlvdXNSZXNwb25zZUlkO1xuICAgIC8vIFVzaW5nIHRoaXMgZmxhZyBiZWNhdXNlIFdlYWtTZXQgZG9lcyBub3QgcHJvdmlkZSBhIHdheSB0byBjaGVjayBpdHMgc2l6ZVxuICAgIHNlbnRJbml0aWFsSW5wdXQgPSBmYWxzZTtcbiAgICAvLyBUaGUgaXRlbXMgYWxyZWFkeSBzZW50IHRvIHRoZSBtb2RlbDsgdXNpbmcgV2Vha1NldCBmb3IgbWVtb3J5IGVmZmljaWVuY3lcbiAgICBzZW50SXRlbXMgPSBuZXcgV2Vha1NldCgpO1xuICAgIC8vIFRoZSBpdGVtcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXI7IHVzaW5nIFdlYWtTZXQgZm9yIG1lbW9yeSBlZmZpY2llbmN5XG4gICAgc2VydmVySXRlbXMgPSBuZXcgV2Vha1NldCgpO1xuICAgIC8vIFRyYWNrIGluaXRpYWwgaW5wdXQgaXRlbXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzZW50IHNvIHRoZXkgY2FuIGJlIHJldHJpZWQgb24gbGF0ZXIgdHVybnMuXG4gICAgcmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3Rvcih7IGNvbnZlcnNhdGlvbklkLCBwcmV2aW91c1Jlc3BvbnNlSWQsIH0pIHtcbiAgICAgICAgdGhpcy5jb252ZXJzYXRpb25JZCA9IGNvbnZlcnNhdGlvbklkID8/IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3BvbnNlSWQgPSBwcmV2aW91c1Jlc3BvbnNlSWQgPz8gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmUtcG9wdWxhdGVzIHRyYWNrZXIgY2FjaGVzIGZyb20gYW4gZXhpc3RpbmcgUnVuU3RhdGUgd2hlbiByZXN1bWluZyBzZXJ2ZXItbWFuYWdlZCBydW5zLlxuICAgICAqL1xuICAgIHByaW1lRnJvbVN0YXRlKHsgb3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMsIG1vZGVsUmVzcG9uc2VzLCB9KSB7XG4gICAgICAgIGlmICh0aGlzLnNlbnRJbml0aWFsSW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSkge1xuICAgICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VudEluaXRpYWxJbnB1dCA9IHRydWU7XG4gICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICAgICAgY29uc3QgbGF0ZXN0UmVzcG9uc2UgPSBtb2RlbFJlc3BvbnNlc1ttb2RlbFJlc3BvbnNlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgZm9yIChjb25zdCByZXNwb25zZSBvZiBtb2RlbFJlc3BvbnNlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnZlcnNhdGlvbklkICYmIGxhdGVzdFJlc3BvbnNlPy5yZXNwb25zZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IGxhdGVzdFJlc3BvbnNlLnJlc3BvbnNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCByYXdJdGVtID0gaXRlbS5yYXdJdGVtO1xuICAgICAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHR5cGVvZiByYXdJdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VydmVySXRlbXMuaGFzKHJhd0l0ZW0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKHJhd0l0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZHMgdGhlIHJhdyBpdGVtcyByZXR1cm5lZCBieSB0aGUgc2VydmVyIHNvIGZ1dHVyZSBkZWx0YSBjYWxjdWxhdGlvbnMgc2tpcCB0aGVtLlxuICAgICAqIEFsc28gY2FwdHVyZXMgdGhlIGxhdGVzdCByZXNwb25zZSBpZGVudGlmaWVyIHRvIGNoYWluIGZvbGxvdy11cCBjYWxscyB3aGVuIHBvc3NpYmxlLlxuICAgICAqL1xuICAgIHRyYWNrU2VydmVySXRlbXMobW9kZWxSZXNwb25zZSkge1xuICAgICAgICBpZiAoIW1vZGVsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbW9kZWxSZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVySXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb252ZXJzYXRpb25JZCAmJiBtb2RlbFJlc3BvbnNlLnJlc3BvbnNlSWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNSZXNwb25zZUlkID0gbW9kZWxSZXNwb25zZS5yZXNwb25zZUlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1pbmltdW0gc2V0IG9mIGl0ZW1zIHRoYXQgc3RpbGwgbmVlZCB0byBiZSBkZWxpdmVyZWQgdG8gdGhlIHNlcnZlciBmb3IgdGhlXG4gICAgICogY3VycmVudCB0dXJuLiBUaGlzIGluY2x1ZGVzIHRoZSBvcmlnaW5hbCB0dXJuIGlucHV0cyAodW50aWwgYWNrbm93bGVkZ2VkKSBwbHVzIGFueVxuICAgICAqIG5ld2x5IGdlbmVyYXRlZCBpdGVtcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGVjaG9lZCBiYWNrIGJ5IHRoZSBBUEkuXG4gICAgICovXG4gICAgcHJlcGFyZUlucHV0KG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGlucHV0SXRlbXMgPSBbXTtcbiAgICAgICAgaWYgKCF0aGlzLnNlbnRJbml0aWFsSW5wdXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxJdGVtcyA9IHRvQWdlbnRJbnB1dExpc3Qob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgZnVsbCBpbml0aWFsIHBheWxvYWQgc28gYSBmaWx0ZXIgY2FuIGRyb3AgaXRlbXMgd2l0aG91dCBsb3NpbmcgdGhlaXIgb3JpZ2luYWxzLlxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKC4uLmluaXRpYWxJdGVtcyk7XG4gICAgICAgICAgICB0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dCA9IGluaXRpYWxJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IEJvb2xlYW4oaXRlbSkgJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKTtcbiAgICAgICAgICAgIHRoaXMuc2VudEluaXRpYWxJbnB1dCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgJiZcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFJlLXF1ZXVlIHByaW9yIGluaXRpYWwgaXRlbXMgdW50aWwgdGhlIHRyYWNrZXIgY29uZmlybXMgdGhleSB3ZXJlIGRlbGl2ZXJlZCB0byB0aGUgQVBJLlxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKC4uLnRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByYXdJdGVtID0gaXRlbS5yYXdJdGVtO1xuICAgICAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHR5cGVvZiByYXdJdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VudEl0ZW1zLmhhcyhyYXdJdGVtKSB8fCB0aGlzLnNlcnZlckl0ZW1zLmhhcyhyYXdJdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXRJdGVtcy5wdXNoKHJhd0l0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnB1dEl0ZW1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGUgcHJvdmlkZWQgb3JpZ2luYWxzIGFzIGRlbGl2ZXJlZCBzbyBmdXR1cmUgdHVybnMgZG8gbm90IHJlc2VuZCB0aGVtIGFuZCBhbnlcbiAgICAgKiBwZW5kaW5nIGluaXRpYWwgaW5wdXRzIGNhbiBiZSBkcm9wcGVkIG9uY2UgdGhlIHNlcnZlciBhY2tub3dsZWRnZXMgcmVjZWlwdC5cbiAgICAgKi9cbiAgICBtYXJrSW5wdXRBc1NlbnQoaXRlbXMpIHtcbiAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWxpdmVyZWQgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKCFpdGVtIHx8IHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0JyB8fCBkZWxpdmVyZWQuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTb21lIGlucHV0cyBtYXkgYmUgcmVwZWF0ZWQgaW4gdGhlIGZpbHRlcmVkIGxpc3Q7IG9ubHkgbWFyayB1bmlxdWUgb3JpZ2luYWxzIG9uY2UuXG4gICAgICAgICAgICBkZWxpdmVyZWQuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQgfHxcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gdGhpcy5yZW1haW5pbmdJbml0aWFsSW5wdXQuZmlsdGVyKChpdGVtKSA9PiAhZGVsaXZlcmVkLmhhcyhpdGVtKSk7XG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ0luaXRpYWxJbnB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSW5pdGlhbElucHV0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogV2hlbiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IHZhcmlhbnQsIGFnZW50cyBtYXkgY2FycnkgR1BULTUtc3BlY2lmaWMgcHJvdmlkZXJEYXRhXG4gKiAoZS5nLiwgcmVhc29uaW5nIGVmZm9ydCwgdGV4dCB2ZXJib3NpdHkpLiBJZiBhIHJ1biByZXNvbHZlcyB0byBhIG5vbi1HUFQtNSBtb2RlbCBhbmQgdGhlXG4gKiBhZ2VudCByZWxpZWQgb24gdGhlIGRlZmF1bHQgbW9kZWwgKGkuZS4sIG5vIGV4cGxpY2l0IG1vZGVsIHNldCksIHRoZXNlIEdQVC01LW9ubHkgc2V0dGluZ3NcbiAqIGFyZSBpbmNvbXBhdGlibGUgYW5kIHNob3VsZCBiZSBzdHJpcHBlZCB0byBhdm9pZCBydW50aW1lIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgYWdlbnRNb2RlbFNldHRpbmdzLCBydW5uZXJNb2RlbCwgbW9kZWxTZXR0aW5ncykge1xuICAgIGlmIChcbiAgICAvLyBncHQtNSBpcyBlbmFibGVkIGZvciB0aGUgZGVmYXVsdCBtb2RlbCBmb3IgYWdlbnRzXG4gICAgaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgIC8vIGV4cGxpY2l0bHkgc2V0IG1vZGVsIGZvciB0aGUgYWdlbnRcbiAgICAgICAgZXhwbGljdGx5TW9kZWxTZXQgJiZcbiAgICAgICAgLy8gdGhpcyBydW5uZXIgdXNlcyBhIG5vbi1ncHQtNSBtb2RlbFxuICAgICAgICAodHlwZW9mIHJ1bm5lck1vZGVsICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgIWdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKHJ1bm5lck1vZGVsKSkgJiZcbiAgICAgICAgKGFnZW50TW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZyB8fFxuICAgICAgICAgICAgYWdlbnRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8udGV4dD8udmVyYm9zaXR5IHx8XG4gICAgICAgICAgICBhZ2VudE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmdfZWZmb3J0KSkge1xuICAgICAgICBjb25zdCBjb3BpZWRNb2RlbFNldHRpbmdzID0geyAuLi5tb2RlbFNldHRpbmdzIH07XG4gICAgICAgIC8vIHRoZSBpbmNvbXBhdGlibGUgcGFyYW1ldGVycyBzaG91bGQgYmUgcmVtb3ZlZCB0byBhdm9pZCBydW50aW1lIGVycm9yc1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZztcbiAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy50ZXh0Py52ZXJib3NpdHk7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8ucmVhc29uaW5nX2VmZm9ydDtcbiAgICAgICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nKSB7XG4gICAgICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5yZWFzb25pbmcuZWZmb3J0O1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nLnN1bW1hcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MudGV4dCkge1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MudGV4dC52ZXJib3NpdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvcGllZE1vZGVsU2V0dGluZ3M7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIENvbGxlY3RzIHRvb2xzL2hhbmRvZmZzIGVhcmx5IHNvIHdlIGNhbiBhbm5vdGF0ZSBzcGFucyBiZWZvcmUgbW9kZWwgZXhlY3V0aW9uIGJlZ2lucy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcHJlcGFyZUFnZW50QXJ0aWZhY3RzKHN0YXRlKSB7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2ZmcyhzdGF0ZS5fY29udGV4dCk7XG4gICAgY29uc3QgdG9vbHMgPSBhd2FpdCBzdGF0ZS5fY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHN0YXRlLl9jb250ZXh0KTtcbiAgICBpZiAoIXN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZOYW1lcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gaC5hZ2VudE5hbWUpO1xuICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGNyZWF0ZUFnZW50U3Bhbih7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICAgICAgdG9vbHM6IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKSxcbiAgICAgICAgICAgICAgICBvdXRwdXRfdHlwZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRTY2hlbWFOYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnN0YXJ0KCk7XG4gICAgICAgIHNldEN1cnJlbnRTcGFuKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNwYW5EYXRhLnRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBoYW5kb2ZmcyxcbiAgICAgICAgdG9vbHMsXG4gICAgICAgIHNlcmlhbGl6ZWRIYW5kb2ZmczogaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBzZXJpYWxpemVIYW5kb2ZmKGhhbmRvZmYpKSxcbiAgICAgICAgc2VyaWFsaXplZFRvb2xzOiB0b29scy5tYXAoKHRvb2wpID0+IHNlcmlhbGl6ZVRvb2wodG9vbCkpLFxuICAgICAgICB0b29sc0V4cGxpY2l0bHlQcm92aWRlZDogc3RhdGUuX2N1cnJlbnRBZ2VudC5oYXNFeHBsaWNpdFRvb2xDb25maWcoKSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0QWdlbnRJbnB1dEl0ZW1LZXkoaXRlbSkge1xuICAgIC8vIERlZXAgc2VyaWFsaXphdGlvbiBrZWVwcyBiaW5hcnkgaW5wdXRzIGNvbXBhcmFibGUgYWZ0ZXIgZmlsdGVycyBjbG9uZSB0aGVtLlxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtLCBhZ2VudElucHV0U2VyaWFsaXphdGlvblJlcGxhY2VyKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkQWdlbnRJbnB1dFBvb2woaXRlbXMpIHtcbiAgICAvLyBUcmFjayBldmVyeSBvcmlnaW5hbCBvYmplY3Qgc28gZmlsdGVycyBjYW4gc2FmZWx5IHJldHVybiBjbG9uZWQgY29waWVzLlxuICAgIGNvbnN0IHBvb2wgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHBvb2wuZ2V0KGtleSk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgZXhpc3RpbmcucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBvb2wuc2V0KGtleSwgW2l0ZW1dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9vbDtcbn1cbmZ1bmN0aW9uIHRha2VBZ2VudElucHV0RnJvbVBvb2wocG9vbCwga2V5KSB7XG4gICAgLy8gUHJlZmVyIHJldXNpbmcgdGhlIGVhcmxpZXN0IHVudG91Y2hlZCBvcmlnaW5hbCB0byBrZWVwIG9yZGVyaW5nIHN0YWJsZS5cbiAgICBjb25zdCBjYW5kaWRhdGVzID0gcG9vbC5nZXQoa2V5KTtcbiAgICBpZiAoIWNhbmRpZGF0ZXMgfHwgY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgW2ZpcnN0XSA9IGNhbmRpZGF0ZXM7XG4gICAgY2FuZGlkYXRlcy5zaGlmdCgpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gZmlyc3Q7XG59XG5mdW5jdGlvbiByZW1vdmVBZ2VudElucHV0RnJvbVBvb2wocG9vbCwgaXRlbSkge1xuICAgIC8vIFJlbW92ZSBleGFjdGx5IHRoZSBtYXRjaGVkIGluc3RhbmNlIHNvIGR1cGxpY2F0ZSBwYXlsb2FkcyByZW1haW4gYXZhaWxhYmxlLlxuICAgIGNvbnN0IGtleSA9IGdldEFnZW50SW5wdXRJdGVtS2V5KGl0ZW0pO1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBwb29sLmdldChrZXkpO1xuICAgIGlmICghY2FuZGlkYXRlcyB8fCBjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gY2FuZGlkYXRlcy5maW5kSW5kZXgoKGNhbmRpZGF0ZSkgPT4gY2FuZGlkYXRlID09PSBpdGVtKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FuZGlkYXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwb29sLmRlbGV0ZShrZXkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFnZW50SW5wdXRTZXJpYWxpemF0aW9uUmVwbGFjZXIoX2tleSwgdmFsdWUpIHtcbiAgICAvLyBNaXJyb3IgcnVuSW1wbGVtZW50YXRpb24gc2VyaWFsaXphdGlvbiBzbyBidWZmZXIgc25hcHNob3RzIHJvdW5kLXRyaXAuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogJ0FycmF5QnVmZmVyJyxcbiAgICAgICAgICAgIGRhdGE6IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChuZXcgVWludDhBcnJheSh2YWx1ZSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9fdHlwZTogdmlldy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNOb2RlQnVmZmVyKHZhbHVlKSkge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KG5ldyBVaW50OEFycmF5KHZpZXcuYnVmZmVyLCB2aWV3LmJ5dGVPZmZzZXQsIHZpZXcuYnl0ZUxlbmd0aCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3R5cGU6ICdCdWZmZXInLFxuICAgICAgICAgICAgZGF0YTogZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KFVpbnQ4QXJyYXkuZnJvbSh2YWx1ZS5kYXRhKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8vIE5vcm1hbGl6ZXMgdXNlci1wcm92aWRlZCBpbnB1dCBpbnRvIHRoZSBzdHJ1Y3R1cmUgdGhlIG1vZGVsIGV4cGVjdHMuIFN0cmluZ3MgYmVjb21lIHVzZXIgbWVzc2FnZXMsXG4vLyBhcnJheXMgYXJlIGtlcHQgYXMtaXMgc28gZG93bnN0cmVhbSBsb29wcyBjYW4gdHJlYXQgYm90aCBzY2VuYXJpb3MgdW5pZm9ybWx5LlxuZnVuY3Rpb24gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSB7XG4gICAgLy8gQWxsb3cgY2FsbGVycyB0byBwYXNzIHBsYWluIHN0cmluZ3Mgd2hpbGUgcHJlc2VydmluZyBvcmlnaW5hbCBpdGVtIG9yZGVyLlxuICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxJbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFt7IHR5cGU6ICdtZXNzYWdlJywgcm9sZTogJ3VzZXInLCBjb250ZW50OiBvcmlnaW5hbElucHV0IH1dO1xuICAgIH1cbiAgICByZXR1cm4gWy4uLm9yaWdpbmFsSW5wdXRdO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuLm1qcy5tYXAiLCJpbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSBhcyBfUmVhZGFibGVTdHJlYW0sIFRyYW5zZm9ybVN0cmVhbSwgUmVhZGFibGUsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFRleHRTdHJlYW0gfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmNsYXNzIFJ1blJlc3VsdEJhc2Uge1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZ1xuICAgICAqIHRoZSBhZ2VudCBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuaW5wdXQsIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhlc2UgaW5jbHVkZSB0aGluZ3MgbGlrZSBuZXcgbWVzc2FnZXMsIHRvb2xcbiAgICAgKiBjYWxscyBhbmQgdGhlaXIgb3V0cHV0cywgZXRjLlxuICAgICAqXG4gICAgICogSXQgZG9lcyBub3QgaW5jbHVkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYWdlbnRzIGFuZCBpbnN0ZWFkIHJlcHJlc2VudHMgdGhlIG1vZGVsIGRhdGEuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG91dHB1dCBpbmNsdWRpbmcgdGhlIGFnZW50cywgdXNlIHRoZSBgbmV3SXRlbXNgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQoW10sIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGlucHV0IGl0ZW1zLlxuICAgICAqL1xuICAgIGdldCBpbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX29yaWdpbmFsSW5wdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBydW4gaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGlzIGFzc29jaWF0ZXMgdGhlIG1vZGVsIGRhdGEgd2l0aCB0aGUgYWdlbnRzLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBtb2RlbCBkYXRhIHRoYXQgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4sIHVzZSB0aGUgYG91dHB1dGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG5ld0l0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgTExNIHJlc3BvbnNlcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCByYXdSZXNwb25zZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9tb2RlbFJlc3BvbnNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVzcG9uc2UgSUQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgbGFzdFJlc3BvbnNlSWQoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IHRoaXMucmF3UmVzcG9uc2VzO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VzICYmIHJlc3BvbnNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0ucmVzcG9uc2VJZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IGFnZW50IHRoYXQgd2FzIHJ1blxuICAgICAqL1xuICAgIGdldCBsYXN0QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW55IGludGVycnVwdGlvbnMgdGhhdCBvY2N1cnJlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biBmb3IgZXhhbXBsZSBmb3IgdG9vbCBhcHByb3ZhbHMuXG4gICAgICovXG4gICAgZ2V0IGludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuIElmIHRoZSBvdXRwdXQgdHlwZSB3YXMgc2V0IHRvIGFueXRoaW5nIG90aGVyIHRoYW4gYHRleHRgLFxuICAgICAqIHRoaXMgd2lsbCBiZSBwYXJzZWQgZWl0aGVyIGFzIEpTT04gb3IgdXNpbmcgdGhlIFpvZCBzY2hlbWEgeW91IHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGdldCBmaW5hbE91dHB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLndhcm4oJ0FjY2Vzc2VkIGZpbmFsT3V0cHV0IGJlZm9yZSBhZ2VudCBydW4gaXMgY29tcGxldGVkLicpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICBzdXBlcihzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1biBpbiBzdHJlYW1pbmcgbW9kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbWVkUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgdGhhdCBpcyBydW5uaW5nXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB0dXJuIG51bWJlclxuICAgICAqL1xuICAgIGN1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgdGhhdCBjYW4gYmUgcnVuXG4gICAgICovXG4gICAgbWF4VHVybnM7XG4gICAgI2Vycm9yID0gbnVsbDtcbiAgICAjc2lnbmFsO1xuICAgICNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlU3RyZWFtO1xuICAgICNjb21wbGV0ZWRQcm9taXNlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlamVjdDtcbiAgICAjY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgI3N0cmVhbUxvb3BQcm9taXNlO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI3NpZ25hbCA9IHJlc3VsdC5zaWduYWw7XG4gICAgICAgIHRoaXMuI3JlYWRhYmxlU3RyZWFtID0gbmV3IF9SZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuI2NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy4jcmVhZGFibGVDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jcmVhZGFibGVTdHJlYW0ubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEZhaWxlZCB0byBjbG9zZSByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuI3JlYWRhYmxlU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FuY2VsKHRoaXMuI3NpZ25hbD8ucmVhc29uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIGNhbmNlbCByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZUFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBoYW5kbGVBYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBIYW5kbGVzIGFuIGVycm9yIGluIHRoZSBzdHJlYW0gbG9vcC5cbiAgICAgKi9cbiAgICBfcmFpc2VFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0Py4oZXJyKTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXN1bHRlZCBpbiBhbiBlcnJvcjogJHtlfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAqL1xuICAgIGdldCBjYW5jZWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjYW5jZWxsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgcmVhZGFibGUgc3RyZWFtLlxuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIG9mIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXQgdGhpcyBwcm9taXNlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkIGlmIHlvdSBhcmUgbm90IGNvbnN1bWluZyB0aGVcbiAgICAgKiBzdHJlYW0gZGlyZWN0bHkuXG4gICAgICovXG4gICAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbXBsZXRlZFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVycm9yIHRocm93biBkdXJpbmcgdGhlIHJ1biwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICB0b1RleHRTdHJlYW0ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuI3JlYWRhYmxlU3RyZWFtLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgICAgdHJhbnNmb3JtKGV2ZW50LCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JyAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgPT09ICdvdXRwdXRfdGV4dF9kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IFN0cmVhbUV2ZW50VGV4dFN0cmVhbS5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGl0ZW0uZGVsdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGF0aWJsZVdpdGhOb2RlU3RyZWFtcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWRhYmxlLmZyb21XZWIoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFNldHMgdGhlIHN0cmVhbSBsb29wIHByb21pc2UgdGhhdCBjb21wbGV0ZXMgd2hlbiB0aGUgaW50ZXJuYWwgc3RyZWFtIGxvb3AgZmluaXNoZXMuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRlZmVyIHRyYWNlIGVuZCB1bnRpbCBhbGwgYWdlbnQgd29yayBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBfc2V0U3RyZWFtTG9vcFByb21pc2UocHJvbWlzZSkge1xuICAgICAgICB0aGlzLiNzdHJlYW1Mb29wUHJvbWlzZSA9IHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RyZWFtIGxvb3AgY29tcGxldGVzLlxuICAgICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgdHJhY2luZyBzeXN0ZW0gdG8gd2FpdCBmb3IgYWxsIGFnZW50IHdvcmsgYmVmb3JlIGVuZGluZyB0aGUgdHJhY2UuXG4gICAgICovXG4gICAgX2dldFN0cmVhbUxvb3BQcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyZWFtTG9vcFByb21pc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4uL3Jlc3VsdC5tanNcIjtcbmxldCBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xuZnVuY3Rpb24gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkge1xuICAgIF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UgPz89IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IHRyYWNlIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHRyYWNlIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gdHJhY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlPy50cmFjZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudFRyYWNlLnRyYWNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCBzcGFuIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHNwYW4gb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjdXJyZW50U3Bhbj8uc3Bhbikge1xuICAgICAgICByZXR1cm4gY3VycmVudFNwYW4uc3BhbjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgaXMgYW4gQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgdGhhdCBzdG9yZXMgdGhlIGN1cnJlbnQgdHJhY2UuXG4gKiBJdCB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiBkaWZmZXJlbnQgZXZlbnQgbG9vcCBleGVjdXRpb25zLlxuICpcbiAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgc2hvdWxkIGJlIHRoZSBvbmx5IHdheSB0aGF0IHRoaXMgY29udGV4dCBnZXRzIGludGVyZmFjZWQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikge1xuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgIGlmICghdHJhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2UgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0cmFjZS5zdGFydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbih0cmFjZSk7XG4gICAgICAgIC8vIElmIHJlc3VsdCBpcyBhIFN0cmVhbWVkUnVuUmVzdWx0LCBkZWZlciB0cmFjZSBlbmQgdW50aWwgc3RyZWFtIGxvb3AgY29tcGxldGVzXG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBTdHJlYW1lZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9vcFByb21pc2UgPSByZXN1bHQuX2dldFN0cmVhbUxvb3BQcm9taXNlKCk7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTG9vcFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1Mb29wUHJvbWlzZS5maW5hbGx5KCgpID0+IHRyYWNlLmVuZCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBub24tc3RyZWFtaW5nIHJlc3VsdHMsIGVuZCB0cmFjZSBzeW5jaHJvbm91c2x5XG4gICAgICAgIGF3YWl0IHRyYWNlLmVuZCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdHJhY2UgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uXG4gKiBwYXNzZWQgdG8gaXQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhY2UodHJhY2UsIGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBuZXdUcmFjZSA9IHR5cGVvZiB0cmFjZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWU6IHRyYWNlLFxuICAgICAgICB9KVxuICAgICAgICA6IHRyYWNlO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oeyB0cmFjZTogbmV3VHJhY2UgfSwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgYWN0aXZlIHRyYWNlIGluIHRoZSBleGVjdXRpb24gY29udGV4dC4gSWYgdGhlcmVcbiAqIGlzLCBpdCB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCB0aGUgZXhpc3RpbmcgdHJhY2UuIElmIHRoZXJlIGlzIG5vIHRyYWNlLCBpdCB3aWxsIGNyZWF0ZVxuICogYSBuZXcgb25lIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnp1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVRyYWNlKGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlKSB7XG4gICAgICAgIC8vIGlmIHRoaXMgZXhlY3V0aW9uIGNvbnRleHQgYWxyZWFkeSBoYXMgYSB0cmFjZSBpbnN0YW5jZSBpbiBpdCB3ZSBqdXN0IGNvbnRpbnVlXG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgIH1cbiAgICBjb25zdCBuZXdUcmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZShvcHRpb25zKTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHNldCB0aGUgY3VycmVudCBzcGFuIGluIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gc3BhbiAtIFRoZSBzcGFuIHRvIHNldCBhcyB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VycmVudFNwYW4oc3Bhbikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LnNwYW4pIHtcbiAgICAgICAgY29udGV4dC5zcGFuLnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQuc3BhbjtcbiAgICB9XG4gICAgY29udGV4dC5zcGFuID0gc3BhbjtcbiAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LnNwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3Bhbj8ucHJldmlvdXNTcGFuO1xuICAgICAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGFuIGVycm9yIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKlxuICogQHBhcmFtIHNwYW5FcnJvciAtIFRoZSBlcnJvciB0byBhZGQgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVycm9yVG9DdXJyZW50U3BhbihzcGFuRXJyb3IpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgIGN1cnJlbnRTcGFuLnNldEVycm9yKHNwYW5FcnJvcik7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlIGN1cnJlbnQgY29udGV4dCBieSBjcmVhdGluZyBuZXcgaW5zdGFuY2VzIG9mIHRoZSB0cmFjZSwgc3BhbiwgYW5kXG4gKiBwcmV2aW91cyBzcGFuLlxuICpcbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdG8gY2xvbmUuXG4gKiBAcmV0dXJucyBBIGNsb25lIG9mIHRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVDdXJyZW50Q29udGV4dChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2U6IGNvbnRleHQudHJhY2U/LmNsb25lKCksXG4gICAgICAgIHNwYW46IGNvbnRleHQuc3Bhbj8uY2xvbmUoKSxcbiAgICAgICAgcHJldmlvdXNTcGFuOiBjb250ZXh0LnByZXZpb3VzU3Bhbj8uY2xvbmUoKSxcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIGEgbmV3IHNwYW4gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIHdpdGggdGhlIG5ldyBzcGFuIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTmV3U3BhbkNvbnRleHQoZm4pIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKCFjdXJyZW50Q29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGNvbnN0IGNvcHlPZkNvbnRleHQgPSBjbG9uZUN1cnJlbnRDb250ZXh0KGN1cnJlbnRDb250ZXh0KTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKGNvcHlPZkNvbnRleHQsIGZuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHRpbWVyIGFzIF90aW1lciwgaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG4vKipcbiAqIFByaW50cyB0aGUgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgY29uc29sZVxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZVNwYW5FeHBvcnRlciB7XG4gICAgYXN5bmMgZXhwb3J0KGl0ZW1zKSB7XG4gICAgICAgIGlmICh0cmFjaW5nLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQuIFNraXBwaW5nIGV4cG9ydCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RyYWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCB0cmFjZSB0cmFjZUlkPSR7aXRlbS50cmFjZUlkfSBuYW1lPSR7aXRlbS5uYW1lfSR7aXRlbS5ncm91cElkID8gYCBncm91cElkPSR7aXRlbS5ncm91cElkfWAgOiAnJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvciA/PyBkZWZhdWx0UHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBvcHRpb25zLnN0YXJ0ZWQgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VFbmQodGhpcyk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHRoaXMuI3N0YXJ0ZWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gYWN0aXZlIHRyYWNlLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50U3BhbiBpbnN0YW5jZW9mIE5vb3BTcGFuIHx8XG4gICAgICAgICAgICAgICAgY3VycmVudFRyYWNlIGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBQYXJlbnQgJHtjdXJyZW50U3Bhbn0gb3IgJHtjdXJyZW50VHJhY2V9IGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBjdXJyZW50VHJhY2UudHJhY2VJZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgcGFyZW50IHNwYW4gJXMnLCBjdXJyZW50U3Bhbi5zcGFuSWQpO1xuICAgICAgICAgICAgICAgIHBhcmVudElkID0gY3VycmVudFNwYW4uc3BhbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBwYXJlbnQgc3BhbiwgdXNpbmcgY3VycmVudCB0cmFjZSAlcycsIGN1cnJlbnRUcmFjZS50cmFjZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBUcmFjZSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHRyYWNlIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBTcGFuKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCBzcGFuIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LnNwYW5JZDtcbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gdHJhY2VJZCBmb3VuZC4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nIHNwYW4gJHtKU09OLnN0cmluZ2lmeShzcGFuT3B0aW9ucy5kYXRhKX0gd2l0aCBpZCAke3NwYW5PcHRpb25zLnNwYW5JZCA/PyB0cmFjZUlkfWApO1xuICAgICAgICByZXR1cm4gbmV3IFNwYW4oe1xuICAgICAgICAgICAgLi4uc3Bhbk9wdGlvbnMsXG4gICAgICAgICAgICB0cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgIH0sIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXInKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXIgJW8nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFkZHMgbGlzdGVuZXJzIHRvIGBwcm9jZXNzYCB0byBlbnN1cmUgYHNodXRkb3duYCBvY2N1cnMgYmVmb3JlIGV4aXQuICovXG4gICAgI2FkZENsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIE5vZGUuanMgcHJvY2VzcyB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB0aW1lb3V0LCBmb3JjaW5nIGV4aXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSGFuZGxlIG5vcm1hbCB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgcHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGNsZWFudXApO1xuICAgICAgICAgICAgLy8gSGFuZGxlIENUUkwrQyAoU0lHSU5UKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHSU5UJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMTMwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzKCdTSUdURVJNJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBhc3luYyAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcmVqZWN0aW9uJywgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cygndW5oYW5kbGVkUmVqZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKGV2ZW50KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGggPiAxO1xufVxubGV0IEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghR0xPQkFMX1RSQUNFX1BST1ZJREVSKSB7XG4gICAgICAgIEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBHTE9CQUxfVFJBQ0VfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8qKlxuICogU3RhcnQgdGhlIHRyYWNlIGV4cG9ydCBsb29wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRUcmFjZUV4cG9ydExvb3AoKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnN0YXJ0RXhwb3J0TG9vcCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmV4cG9ydCB7IGFwcGx5RGlmZiB9IGZyb20gXCIuL3V0aWxzL2FwcGx5RGlmZi5tanNcIjtcbmV4cG9ydCB7IGdldEFsbE1jcFRvb2xzLCBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZSwgbWNwVG9GdW5jdGlvblRvb2wsIE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC5tanNcIjtcbmV4cG9ydCB7IGNyZWF0ZU1DUFRvb2xTdGF0aWNGaWx0ZXIsIH0gZnJvbSBcIi4vbWNwVXRpbC5tanNcIjtcbmV4cG9ydCB7IE9QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FLCBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgZ2V0RGVmYXVsdE1vZGVsLCBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncywgaXNHcHQ1RGVmYXVsdCwgfSBmcm9tIFwiLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5leHBvcnQgeyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmV4cG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5leHBvcnQgeyBydW4sIFJ1bm5lciwgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5leHBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmV4cG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5leHBvcnQgeyBjb21wdXRlclRvb2wsIHNoZWxsVG9vbCwgYXBwbHlQYXRjaFRvb2wsIGhvc3RlZE1jcFRvb2wsIHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5leHBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyLCBUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IFJlcXVlc3RVc2FnZSwgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmV4cG9ydCB7IE1lbW9yeVNlc3Npb24gfSBmcm9tIFwiLi9tZW1vcnkvbWVtb3J5U2Vzc2lvbi5tanNcIjtcbmV4cG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuLyoqXG4gKiBBZGQgdGhlIGRlZmF1bHQgcHJvY2Vzc29yLCB3aGljaCBleHBvcnRzIHRyYWNlcyBhbmQgc3BhbnMgdG8gdGhlIGJhY2tlbmQgaW4gYmF0Y2hlcy4gWW91IGNhblxuICogY2hhbmdlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGJ5IGVpdGhlcjpcbiAqIDEuIGNhbGxpbmcgYWRkVHJhY2VQcm9jZXNzb3IsIHdoaWNoIGFkZHMgYWRkaXRpb25hbCBwcm9jZXNzb3JzLCBvclxuICogMi4gY2FsbGluZyBzZXRUcmFjZVByb2Nlc3NvcnMsIHdoaWNoIHNldHMgdGhlIHByb2Nlc3NvcnMgYW5kIGRpc2NhcmRzIHRoZSBkZWZhdWx0IG9uZVxuICovXG5hZGRUcmFjZVByb2Nlc3NvcihkZWZhdWx0UHJvY2Vzc29yKCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCBNRVRBREFUQSBmcm9tIFwiLi9tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IFJ1blRvb2xBcHByb3ZhbEl0ZW0gfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbi8qKlxuICogQ29udmVydHMgYSBiYXNlNjQgc3RyaW5nIHRvIGFuIEFycmF5QnVmZmVyXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0XG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCkge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IGF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBsZW4gPSBiaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGJ5dGVzW2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcy5idWZmZXI7XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIEFycmF5QnVmZmVyIHRvIGEgYmFzZTY0IHN0cmluZ1xuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyKSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcikpO1xuICAgIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gYW4gYXVkaW8gb3V0cHV0IG1lc3NhZ2VcbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlKGl0ZW0pIHtcbiAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0gPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0gIT09ICdvYmplY3QnIHx8XG4gICAgICAgICEoJ3R5cGUnIGluIGl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtLnR5cGUgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICFpdGVtLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghKCdjb250ZW50JyBpbiBpdGVtKSB8fFxuICAgICAgICAhQXJyYXkuaXNBcnJheShpdGVtLmNvbnRlbnQpIHx8XG4gICAgICAgIGl0ZW0uY29udGVudC5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RDb250ZW50SXRlbSA9IGl0ZW0uY29udGVudFtpdGVtLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKCEoJ3R5cGUnIGluIGxhc3RDb250ZW50SXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGxhc3RDb250ZW50SXRlbS50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udGV4dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRleHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICdvdXRwdXRfYXVkaW8nKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGxhc3RDb250ZW50SXRlbS50cmFuc2NyaXB0XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQ29tcGFyZSB0d28gY29udmVyc2F0aW9uIGhpc3RvcmllcyB0byBkZXRlcm1pbmUgdGhlIHJlbW92YWxzLCBhZGRpdGlvbnMsIGFuZCB1cGRhdGVzLlxuICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3RvcnkuXG4gKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeS5cbiAqIEByZXR1cm5zIEEgZGlmZiBvZiB0aGUgdHdvIGhpc3Rvcmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpZmZSZWFsdGltZUhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSkge1xuICAgIGNvbnN0IHJlbW92YWxzID0gb2xkSGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFuZXdIaXN0b3J5LnNvbWUoKG5ld0l0ZW0pID0+IG5ld0l0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IGFkZGl0aW9ucyA9IG5ld0hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiAhb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQpKTtcbiAgICBjb25zdCB1cGRhdGVzID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+IG9sZEhpc3Rvcnkuc29tZSgob2xkSXRlbSkgPT4gb2xkSXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkICYmXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG9sZEl0ZW0pICE9PSBKU09OLnN0cmluZ2lmeShpdGVtKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92YWxzLFxuICAgICAgICBhZGRpdGlvbnMsXG4gICAgICAgIHVwZGF0ZXMsXG4gICAgfTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgV2ViUlRDLlxuICogQHJldHVybnMgVHJ1ZSBpZiBXZWJSVEMgaXMgc3VwcG9ydGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNXZWJSVENTdXBwb3J0KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93WydSVENQZWVyQ29ubmVjdGlvbiddICE9PSAndW5kZWZpbmVkJztcbn1cbi8qKlxuICogUmVtb3ZlcyB0aGUgYXVkaW8gZGF0YSBmcm9tIGFsbCBjb250ZW50IGluIGEgbWVzc2FnZSBieSBzZXR0aW5nIGl0IHRvIG51bGwuXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSkge1xuICAgIGlmIChpdGVtLnJvbGUgPT09ICdzeXN0ZW0nKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdvdXRwdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxuLy8gUmVhbHRpbWUgY2FuIHJlc2VuZCB0cnVuY2F0ZWQgYXNzaXN0YW50IGl0ZW1zIHdpdGhvdXQgdHJhbnNjcmlwdHMgYWZ0ZXIgYW5cbi8vIGludGVycnVwdC9yZXRyaWV2ZSBjeWNsZS4gVGhpcyBoZWxwZXIgbWVyZ2VzIHRob3NlIHVwZGF0ZXMgd2l0aCB0aGUgbGF0ZXN0XG4vLyBrbm93biB0cmFuc2NyaXB0IHNvIFVJcyByZXRhaW4gdGhlIHBvcnRpb24gb2YgdGhlIG1lc3NhZ2UgdGhlIHVzZXIgYWxyZWFkeVxuLy8gaGVhcmQuXG5mdW5jdGlvbiBwcmVzZXJ2ZUFzc2lzdGFudEF1ZGlvVHJhbnNjcmlwdHMoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgaWYgKGV4aXN0aW5nLnJvbGUgIT09ICdhc3Npc3RhbnQnIHx8IGluY29taW5nLnJvbGUgIT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiBpbmNvbWluZztcbiAgICB9XG4gICAgY29uc3QgbWVyZ2VkQ29udGVudCA9IGluY29taW5nLmNvbnRlbnQubWFwKChlbnRyeSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgIT09ICdvdXRwdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNjcmlwdE1pc3NpbmcgPSB0eXBlb2YgZW50cnkudHJhbnNjcmlwdCAhPT0gJ3N0cmluZycgfHwgZW50cnkudHJhbnNjcmlwdC5sZW5ndGggPT09IDA7XG4gICAgICAgIGlmICghdHJhbnNjcmlwdE1pc3NpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2aW91c0VudHJ5ID0gZXhpc3RpbmcuY29udGVudFtpbmRleF07XG4gICAgICAgIGlmIChwcmV2aW91c0VudHJ5ICYmXG4gICAgICAgICAgICBwcmV2aW91c0VudHJ5LnR5cGUgPT09ICdvdXRwdXRfYXVkaW8nICYmXG4gICAgICAgICAgICB0eXBlb2YgcHJldmlvdXNFbnRyeS50cmFuc2NyaXB0ID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgcHJldmlvdXNFbnRyeS50cmFuc2NyaXB0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgdHJhbnNjcmlwdDogcHJldmlvdXNFbnRyeS50cmFuc2NyaXB0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uaW5jb21pbmcsXG4gICAgICAgIGNvbnRlbnQ6IG1lcmdlZENvbnRlbnQsXG4gICAgfTtcbn1cbi8qKlxuICogVXBkYXRlcyB0aGUgcmVhbHRpbWUgaGlzdG9yeSBhcnJheSBiYXNlZCBvbiB0aGUgaW5jb21pbmcgZXZlbnQgYW5kIG9wdGlvbnMuXG4gKiBAcGFyYW0gaGlzdG9yeSAtIFRoZSBjdXJyZW50IGhpc3RvcnkgYXJyYXkuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcHJvY2VzcyAoUmVhbHRpbWVJdGVtKS5cbiAqIEBwYXJhbSBzaG91bGRJbmNsdWRlQXVkaW9EYXRhIC0gV2hldGhlciB0byBpbmNsdWRlIGF1ZGlvIGRhdGEgaW4gbWVzc2FnZSBpdGVtcy5cbiAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGhpc3RvcnkgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZWFsdGltZUhpc3RvcnkoaGlzdG9yeSwgZXZlbnQsIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEpIHtcbiAgICAvLyBNZXJnZSB0cmFuc2NyaXB0IGludG8gcGxhY2Vob2xkZXIgaW5wdXRfYXVkaW8gbWVzc2FnZVxuICAgIGlmIChldmVudC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSB7XG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtX2lkICYmXG4gICAgICAgICAgICAgICAgaXRlbS50eXBlID09PSAnbWVzc2FnZScgJiZcbiAgICAgICAgICAgICAgICAncm9sZScgaW4gaXRlbSAmJlxuICAgICAgICAgICAgICAgIGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBldmVudC50cmFuc2NyaXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdXBkYXRlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbmV3RXZlbnQgPSAhc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAmJiBldmVudC50eXBlID09PSAnbWVzc2FnZSdcbiAgICAgICAgPyByZW1vdmVBdWRpb0Zyb21Db250ZW50KGV2ZW50KVxuICAgICAgICA6IGV2ZW50O1xuICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IGhpc3RvcnlbZXhpc3RpbmdJbmRleF07XG4gICAgICAgIGNvbnN0IG1lcmdlZEV2ZW50ID0gbmV3RXZlbnQudHlwZSA9PT0gJ21lc3NhZ2UnICYmIGV4aXN0aW5nSXRlbS50eXBlID09PSAnbWVzc2FnZSdcbiAgICAgICAgICAgID8gcHJlc2VydmVBc3Npc3RhbnRBdWRpb1RyYW5zY3JpcHRzKGV4aXN0aW5nSXRlbSwgbmV3RXZlbnQpXG4gICAgICAgICAgICA6IG5ld0V2ZW50O1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgaXRlbVxuICAgICAgICByZXR1cm4gaGlzdG9yeS5tYXAoKGl0ZW0sIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gZXhpc3RpbmdJbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXJnZWRFdmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAmJiBpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVBdWRpb0Zyb21Db250ZW50KGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC5wcmV2aW91c0l0ZW1JZCkge1xuICAgICAgICAvLyBJbnNlcnQgYWZ0ZXIgcHJldmlvdXNJdGVtSWQgaWYgZm91bmQsIGVsc2UgYXQgZW5kXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQucHJldmlvdXNJdGVtSWQpO1xuICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKDAsIHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgICAgIG5ld0V2ZW50LFxuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UocHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIGhlYWRlcnMgdG8gdXNlIGZvciB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY29uc3QgSEVBREVSUyA9IHtcbiAgICAnVXNlci1BZ2VudCc6IGBBZ2VudHMvSmF2YVNjcmlwdCAke01FVEFEQVRBLnZlcnNpb259YCxcbiAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YCxcbn07XG4vKipcbiAqIEJyb3dzZXIgd2Vic29ja2V0IGhlYWRlclxuICovXG5leHBvcnQgY29uc3QgV0VCU09DS0VUX01FVEEgPSBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWA7XG5leHBvcnQgZnVuY3Rpb24gcmVhbHRpbWVBcHByb3ZhbEl0ZW1Ub0FwcHJvdmFsSXRlbShhZ2VudCwgaXRlbSkge1xuICAgIGNvbnN0IHsgbmFtZSwgYXJndW1lbnRzOiBhcmdzLCAuLi5yZXN0IH0gPSBpdGVtO1xuICAgIHJldHVybiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBKU09OLnN0cmluZ2lmeShhcmdzKSxcbiAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgIC4uLnJlc3QsXG4gICAgICAgIH0sXG4gICAgfSwgYWdlbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0oaXRlbSkge1xuICAgIGlmIChpdGVtLnJhd0l0ZW0udHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnICYmXG4gICAgICAgIGl0ZW0ucmF3SXRlbS50eXBlICE9PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFwcHJvdmFsIGl0ZW0gdHlwZSBmb3IgUmVhbHRpbWUgTUNQIGFwcHJvdmFsIHJlcXVlc3QnKTtcbiAgICB9XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIHByb3ZpZGVyRGF0YSB9ID0gaXRlbS5yYXdJdGVtO1xuICAgIGNvbnN0IHsgaXRlbUlkLCBzZXJ2ZXJMYWJlbCwgLi4ucmVzdCB9ID0gcHJvdmlkZXJEYXRhID8/IHt9O1xuICAgIGlmICghaXRlbUlkIHx8ICFzZXJ2ZXJMYWJlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXBwcm92YWwgaXRlbSBmb3IgUmVhbHRpbWUgTUNQIGFwcHJvdmFsIHJlcXVlc3QnKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgaXRlbUlkLFxuICAgICAgICBzZXJ2ZXJMYWJlbCxcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBhcmdzID8gSlNPTi5wYXJzZShhcmdzKSA6IHt9LFxuICAgICAgICBhcHByb3ZlZDogbnVsbCxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImltcG9ydCB7IEFnZW50LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLyoqXG4gKiBBIHNwZWNpYWxpemVkIGFnZW50IGluc3RhbmNlIHRoYXQgaXMgbWVhbnQgdG8gYmUgdXNlZCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCB0byBidWlsZFxuICogdm9pY2UgYWdlbnRzLiBEdWUgdG8gdGhlIG5hdHVyZSBvZiB0aGlzIGFnZW50LCBzb21lIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBhcmUgbm90IHN1cHBvcnRlZFxuICogdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHJlZ3VsYXIgYEFnZW50YCBpbnN0YW5jZXMuIEZvciBleGFtcGxlOlxuICogLSBgbW9kZWxgIGNob2ljZSBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYG1vZGVsU2V0dGluZ3NgIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgb3V0cHV0VHlwZWAgaXMgbm90IHN1cHBvcnRlZCBhcyBSZWFsdGltZUFnZW50cyBkbyBub3Qgc3VwcG9ydCBzdHJ1Y3R1cmVkIG91dHB1dHNcbiAqIC0gYHRvb2xVc2VCZWhhdmlvcmAgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGB2b2ljZWAgY2FuIGJlIGNvbmZpZ3VyZWQgb24gYW4gYEFnZW50YCBsZXZlbCBob3dldmVyIGl0IGNhbm5vdCBiZSBjaGFuZ2VkIGFmdGVyIHRoZSBmaXJzdFxuICogICAgYWdlbnQgd2l0aGluIGEgYFJlYWx0aW1lU2Vzc2lvbmAgc3Bva2VcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IGFnZW50ID0gbmV3IFJlYWx0aW1lQWdlbnQoe1xuICogICBuYW1lOiAnbXktYWdlbnQnLFxuICogICBpbnN0cnVjdGlvbnM6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBjYW4gYW5zd2VyIHF1ZXN0aW9ucyBhbmQgaGVscCB3aXRoIHRhc2tzLicsXG4gKiB9KVxuICpcbiAqIGNvbnN0IHNlc3Npb24gPSBuZXcgUmVhbHRpbWVTZXNzaW9uKGFnZW50KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUmVhbHRpbWVBZ2VudCBleHRlbmRzIEFnZW50IHtcbiAgICAvKipcbiAgICAgKiBUaGUgdm9pY2UgaW50ZW5kZWQgdG8gYmUgdXNlZCBieSB0aGUgYWdlbnQuIElmIGFub3RoZXIgYWdlbnQgYWxyZWFkeSBzcG9rZSBkdXJpbmcgdGhlXG4gICAgICogUmVhbHRpbWVTZXNzaW9uLCBjaGFuZ2luZyB0aGUgdm9pY2UgZHVyaW5nIGEgaGFuZG9mZiB3aWxsIGZhaWwuXG4gICAgICovXG4gICAgdm9pY2U7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgICAgIHRoaXMudm9pY2UgPSBjb25maWcudm9pY2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVBZ2VudC5tanMubWFwIiwiaW1wb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZWJvdW5jZVRleHRMZW5ndGg6IHNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA/PyAxMDAsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCh7IHBvbGljeUhpbnQ6IHBvbGljeUhpbnRJbnB1dCwgLi4ub3B0aW9ucyB9KSB7XG4gICAgY29uc3QgYmFzZUd1YXJkcmFpbCA9IGRlZmluZU91dHB1dEd1YXJkcmFpbChvcHRpb25zKTtcbiAgICBjb25zdCBwb2xpY3lIaW50ID0gcG9saWN5SGludElucHV0ID8/IGJhc2VHdWFyZHJhaWwubmFtZTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5iYXNlR3VhcmRyYWlsLFxuICAgICAgICBwb2xpY3lIaW50LFxuICAgICAgICBydW46IGFzeW5jIChhcmdzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBiYXNlR3VhcmRyYWlsLnJ1bihhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyAuLi5yZXN1bHQuZ3VhcmRyYWlsLCBwb2xpY3lIaW50IH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1lc3NhZ2UgdGhhdCBpbmZvcm1zIHRoZSBtb2RlbCBhYm91dCB3aHkgdGhlIGd1YXJkcmFpbCB3YXMgdHJpZ2dlcmVkIGFuZCB0b1xuICogY29ycmVjdCB0aGUgYmVoYXZpb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShyZXN1bHQpIHtcbiAgICByZXR1cm4gYFxyXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXHJcbkZhaWxlZCBHdWFyZHJhaWwgUmVhc29uOiAke3Jlc3VsdC5ndWFyZHJhaWwucG9saWN5SGludH0uIFxyXG5GYWlsdXJlIERldGFpbHM6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvID8/IHt9KX0uIFxyXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cclxuYC50cmltKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ndWFyZHJhaWwubWpzLm1hcCIsImZ1bmN0aW9uIGlzRGVmaW5lZChrZXksIG9iamVjdCkge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgZnVkZ2luZyB3aXRoIHR5cGVzIGhlcmUgZm9yIHRoZSBpbmRleCB0eXBlc1xuICAgIHJldHVybiBrZXkgaW4gb2JqZWN0ICYmIHR5cGVvZiBvYmplY3Rba2V5XSAhPT0gJ3VuZGVmaW5lZCc7XG59XG5mdW5jdGlvbiBpc0RlcHJlY2F0ZWRDb25maWcoY29uZmlnKSB7XG4gICAgcmV0dXJuIChpc0RlZmluZWQoJ21vZGFsaXRpZXMnLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnaW5wdXRBdWRpb0Zvcm1hdCcsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdvdXRwdXRBdWRpb0Zvcm1hdCcsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdpbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCd0dXJuRGV0ZWN0aW9uJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ2lucHV0QXVkaW9Ob2lzZVJlZHVjdGlvbicsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdzcGVlZCcsIGNvbmZpZykpO1xufVxuLyoqXG4gKiBDb252ZXJ0IGFueSBnaXZlbiBjb25maWcgKG9sZCBvciBuZXcpIHRvIHRoZSBuZXcgR0EgY29uZmlnIHNoYXBlLlxuICogSWYgYSBuZXcgY29uZmlnIGlzIHByb3ZpZGVkLCBpdCB3aWxsIGJlIHJldHVybmVkIGFzLWlzIChub3JtYWxpemVkIHNoYWxsb3dseSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b05ld1Nlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgaWYgKCFpc0RlcHJlY2F0ZWRDb25maWcoY29uZmlnKSkge1xuICAgICAgICBjb25zdCBpbnB1dENvbmZpZyA9IGNvbmZpZy5hdWRpbz8uaW5wdXRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLmF1ZGlvLmlucHV0LmZvcm1hdCksXG4gICAgICAgICAgICAgICAgbm9pc2VSZWR1Y3Rpb246IGNvbmZpZy5hdWRpby5pbnB1dC5ub2lzZVJlZHVjdGlvbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IGNvbmZpZy5hdWRpby5pbnB1dC50cmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHR1cm5EZXRlY3Rpb246IGNvbmZpZy5hdWRpby5pbnB1dC50dXJuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RlZE91dHB1dFZvaWNlID0gY29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlID8/IGNvbmZpZy52b2ljZTtcbiAgICAgICAgY29uc3Qgb3V0cHV0Q29uZmlnID0gY29uZmlnLmF1ZGlvPy5vdXRwdXQgfHwgdHlwZW9mIHJlcXVlc3RlZE91dHB1dFZvaWNlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0KSxcbiAgICAgICAgICAgICAgICB2b2ljZTogcmVxdWVzdGVkT3V0cHV0Vm9pY2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IGNvbmZpZy5hdWRpbz8ub3V0cHV0Py5zcGVlZCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogY29uZmlnLmluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIHRvb2xDaG9pY2U6IGNvbmZpZy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scyxcbiAgICAgICAgICAgIHRyYWNpbmc6IGNvbmZpZy50cmFjaW5nLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiBjb25maWcucHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgcHJvbXB0OiBjb25maWcucHJvbXB0LFxuICAgICAgICAgICAgb3V0cHV0TW9kYWxpdGllczogY29uZmlnLm91dHB1dE1vZGFsaXRpZXMsXG4gICAgICAgICAgICBhdWRpbzogaW5wdXRDb25maWcgfHwgb3V0cHV0Q29uZmlnXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiBpbnB1dENvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBvdXRwdXRDb25maWcsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgIHRvb2xDaG9pY2U6IGNvbmZpZy50b29sQ2hvaWNlLFxuICAgICAgICB0b29sczogY29uZmlnLnRvb2xzLFxuICAgICAgICB0cmFjaW5nOiBjb25maWcudHJhY2luZyxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiBjb25maWcucHJvdmlkZXJEYXRhLFxuICAgICAgICBwcm9tcHQ6IGNvbmZpZy5wcm9tcHQsXG4gICAgICAgIG91dHB1dE1vZGFsaXRpZXM6IGNvbmZpZy5tb2RhbGl0aWVzLFxuICAgICAgICBhdWRpbzoge1xuICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5pbnB1dEF1ZGlvRm9ybWF0KSxcbiAgICAgICAgICAgICAgICBub2lzZVJlZHVjdGlvbjogY29uZmlnLmlucHV0QXVkaW9Ob2lzZVJlZHVjdGlvbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgIHRyYW5zY3JpcHRpb246IGNvbmZpZy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiBjb25maWcudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5vdXRwdXRBdWRpb0Zvcm1hdCksXG4gICAgICAgICAgICAgICAgdm9pY2U6IGNvbmZpZy52b2ljZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogY29uZmlnLnNwZWVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGZvcm1hdCkge1xuICAgIGlmICghZm9ybWF0KVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSAnb2JqZWN0JylcbiAgICAgICAgcmV0dXJuIGZvcm1hdDtcbiAgICBjb25zdCBmID0gU3RyaW5nKGZvcm1hdCk7XG4gICAgaWYgKGYgPT09ICdwY20xNicpXG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9O1xuICAgIGlmIChmID09PSAnZzcxMV91bGF3JylcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbXUnIH07XG4gICAgaWYgKGYgPT09ICdnNzExX2FsYXcnKVxuICAgICAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtYScgfTtcbiAgICAvLyBEZWZhdWx0IGZhbGxiYWNrOiBhc3N1bWUgMjRrSHogUENNIGlmIHVua25vd24gc3RyaW5nXG4gICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbScsIHJhdGU6IDI0MDAwIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnRNZXNzYWdlcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5leHBvcnQgY29uc3QgYmFzZUl0ZW1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCdyb2xlJywgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ3N5c3RlbScpLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ3VzZXInKSxcbiAgICAgICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnXSksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSwgdGV4dDogei5zdHJpbmcoKSB9KS5vcih6Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvJyksXG4gICAgICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgICAgIHJvbGU6IHoubGl0ZXJhbCgnYXNzaXN0YW50JyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW8nKSxcbiAgICAgICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuXSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVUb29sQ2FsbEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGwnKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVNY3BDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHouZW51bShbJ21jcF9jYWxsJywgJ21jcF90b29sX2NhbGwnXSksXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWNwQ2FsbEFwcHJvdmFsUmVxdWVzdEl0ZW0gPSB6Lm9iamVjdCh7XG4gICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2FwcHJvdmFsX3JlcXVlc3QnKSxcbiAgICBzZXJ2ZXJMYWJlbDogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIGFyZ3VtZW50czogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgYXBwcm92ZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsImltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOnJlYWx0aW1lJyk7XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuLy8gRXZlbnQgc2NoZW1hcyBtaXJyb3JpbmcgdGhlIHN0cnVjdHVyZXMgZGVmaW5lZCBpbiB0aGUgT3BlbkFJIFNESyB0eXBpbmdzLlxuLy8gTW9zdCBmaWVsZHMgZnJvbSB0aGUgaW50ZXJmYWNlcyBpbiBgcmVhbHRpbWUuZC50c2AgYXJlIGNhcHR1cmVkIGhlcmUgdG9cbi8vIHByb3ZpZGUgYmV0dGVyIHJ1bnRpbWUgdmFsaWRhdGlvbiB3aGVuIHBhcnNpbmcgZXZlbnRzIGZyb20gdGhlIHNlcnZlci5cbmV4cG9ydCBjb25zdCByZWFsdGltZVJlc3BvbnNlID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBjb252ZXJzYXRpb25faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1heF9vdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9yKHoubGl0ZXJhbCgnaW5mJykpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIC8vIEdBIHJlbmFtZTogbW9kYWxpdGllcyAtPiBvdXRwdXRfbW9kYWxpdGllc1xuICAgIG91dHB1dF9tb2RhbGl0aWVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUucmVzcG9uc2UnKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAvLyBHQSBncm91cGluZzogYXVkaW8ub3V0cHV0Lntmb3JtYXQsdm9pY2V9XG4gICAgYXVkaW86IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIG91dHB1dDogelxuICAgICAgICAgICAgLm9iamVjdCh7XG4gICAgICAgICAgICBmb3JtYXQ6IHouYW55KCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICAgICAgdm9pY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgICAgIC5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1czogelxuICAgICAgICAuZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2ZhaWxlZCcsICdjYW5jZWxsZWQnLCAnaW5fcHJvZ3Jlc3MnXSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3RhdHVzX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB1c2FnZTogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIGlucHV0X3Rva2VuX2RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5fZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxufSk7XG4vLyBCYXNpYyBjb250ZW50IHNjaGVtYSB1c2VkIGJ5IENvbnZlcnNhdGlvbkl0ZW0uXG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdGV4dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei51bmlvbihbXG4gICAgICAgIHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvJyksXG4gICAgICAgIHoubGl0ZXJhbCgnaXRlbV9yZWZlcmVuY2UnKSxcbiAgICAgICAgei5saXRlcmFsKCdvdXRwdXRfdGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ291dHB1dF9hdWRpbycpLFxuICAgIF0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjb250ZW50OiB6LmFycmF5KGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hKS5vcHRpb25hbCgpLFxuICAgIG5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHJvbGU6IHouZW51bShbJ3VzZXInLCAnYXNzaXN0YW50JywgJ3N5c3RlbSddKS5vcHRpb25hbCgpLFxuICAgIHN0YXR1czogei5lbnVtKFsnY29tcGxldGVkJywgJ2luY29tcGxldGUnLCAnaW5fcHJvZ3Jlc3MnXSkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6XG4gICAgICAgIC5lbnVtKFtcbiAgICAgICAgJ21lc3NhZ2UnLFxuICAgICAgICAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICdtY3BfbGlzdF90b29scycsXG4gICAgICAgICdtY3BfdG9vbF9jYWxsJyxcbiAgICAgICAgJ21jcF9jYWxsJyxcbiAgICAgICAgJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgXSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgYXBwcm92YWxfcmVxdWVzdF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgYXBwcm92ZTogei5ib29sZWFuKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHJlYXNvbjogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgc2VydmVyX2xhYmVsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRvb2xzOiB6XG4gICAgICAgIC5hcnJheSh6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKSxcbiAgICAgICAgaW5wdXRfc2NoZW1hOiB6LnJlY29yZCh6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5wYXNzdGhyb3VnaCgpKVxuICAgICAgICAub3B0aW9uYWwoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBjb252ZXJzYXRpb246IHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLmNvbnZlcnNhdGlvbicpLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbi8vIEdBIHJlbmFtZTogY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCAtPiBjb252ZXJzYXRpb24uaXRlbS5hZGRlZFxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1BZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG4vLyBHQSBhZGRpdGlvbjogY29udmVyc2F0aW9uLml0ZW0uZG9uZVxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9rZW5zJyksXG4gICAgICAgIHRvdGFsX3Rva2Vuczogei5udW1iZXIoKSxcbiAgICAgICAgaW5wdXRfdG9rZW5zOiB6Lm51bWJlcigpLFxuICAgICAgICBpbnB1dF90b2tlbl9kZXRhaWxzOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICB0ZXh0X3Rva2Vuczogei5udW1iZXIoKSxcbiAgICAgICAgICAgIGF1ZGlvX3Rva2Vuczogei5udW1iZXIoKSxcbiAgICAgICAgfSksXG4gICAgICAgIG91dHB1dF90b2tlbnM6IHoubnVtYmVyKCksXG4gICAgfSlcbiAgICAgICAgLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBlcnJvcjogei5vYmplY3Qoe1xuICAgICAgICBjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcGFyYW06IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGVycm9yRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdlcnJvcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXR0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fc3RhcnRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JhdGVfbGltaXRzLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByYXRlX2xpbWl0czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG5hbWU6IHouZW51bShbJ3JlcXVlc3RzJywgJ3Rva2VucyddKS5vcHRpb25hbCgpLFxuICAgICAgICByZW1haW5pbmc6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVzZXRfc2Vjb25kczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIH0pKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfYXVkaW8uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAvLyAgR0EgbWF5IGludHJvZHVjZSByZXNwb25zZS5vdXRwdXRfYXVkaW9fdHJhbnNjcmlwdC5kb25lXG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfYXVkaW9fdHJhbnNjcmlwdC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jb250ZW50X3BhcnQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFydDogei5vYmplY3Qoe1xuICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5lbnVtKFsndGV4dCcsICdhdWRpbyddKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZURvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZTogcmVhbHRpbWVSZXNwb25zZSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIC8vIE5vIHJlbmFtZSBzcGVjaWZpZWQgZm9yIGRvbmU7IGtlZXAgcmVzcG9uc2UudGV4dC5kb25lXG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfdGV4dC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jYW5jZWwnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZTogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBtY3BMaXN0VG9vbHNJblByb2dyZXNzRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5pbl9wcm9ncmVzcycpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgbWNwTGlzdFRvb2xzQ29tcGxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfbGlzdF90b29scy5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbF9hcmd1bWVudHMuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvYmZ1c2NhdGlvbjogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsX2FyZ3VtZW50cy5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VNY3BDYWxsSW5Qcm9ncmVzc0V2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGwuaW5fcHJvZ3Jlc3MnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlTWNwQ2FsbENvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGwuY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBtY3BMaXN0VG9vbHNGYWlsZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9saXN0X3Rvb2xzLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIFRoaXMgc2NoZW1hIGlzIHVzZWQgaWYgYW4gZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LiBUaGUgUmVhbHRpbWUgQVBJIG1pZ2h0IGludHJvZHVjZVxuICogbmV3IGV2ZW50cyBhdCBzb21lIHBvaW50IGFuZCB3ZSBzaG91bGQgaGFuZGxlIHRoZW0gZ3JhY2VmdWxseSBieSB0cmVhdGluZyB0aGVtIGFzIGdlbmVyaWMgZXZlbnRzXG4gKiBvbmx5IHJlcXVpcmluZyBhIHR5cGUgYW5kIGFuIG9wdGlvbmFsIGV2ZW50X2lkLlxuICovXG5leHBvcnQgY29uc3QgZ2VuZXJpY0V2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1Eb25lRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEsXG4gICAgZXJyb3JFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgbWNwTGlzdFRvb2xzSW5Qcm9ncmVzc0V2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hLFxuICAgIG1jcExpc3RUb29sc0ZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxDb21wbGV0ZWRFdmVudFNjaGVtYSxcbl0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lQ2xpZW50RXZlbnRTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbl0pO1xuLyoqXG4gKiBQYXJzZXMgYSByZWFsdGltZSBldmVudCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQsIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIGdlbmVyaWMgZXZlbnQuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGV2ZW50IG9yIG51bGwgaWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVhbHRpbWVFdmVudChldmVudCkge1xuICAgIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YS50b1N0cmluZygpKTtcbiAgICBjb25zdCBwYXJzZWQgPSByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1BhcnNlZCA9IGdlbmVyaWNFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICAgICAgaWYgKGdlbmVyaWNQYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZ2VuZXJpY1BhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZGF0YTogcGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogZmFsc2UgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lRXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCBVc2FnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgdG9OZXdTZXNzaW9uQ29uZmlnLCB9IGZyb20gXCIuL2NsaWVudE1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbSwgcmVhbHRpbWVNY3BDYWxsSXRlbSwgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSwgcmVhbHRpbWVUb29sQ2FsbEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCwgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBhcnJheUJ1ZmZlclRvQmFzZTY0LCBkaWZmUmVhbHRpbWVIaXN0b3J5IH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBtb2RlbCB0aGF0IGlzIHVzZWQgZHVyaW5nIHRoZSBjb25uZWN0aW9uIGlmIG5vIG1vZGVsIGlzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwgPSAnZ3B0LXJlYWx0aW1lJztcbi8qKlxuICogVGhlIGRlZmF1bHQgc2Vzc2lvbiBjb25maWcgdGhhdCBnZXRzIHNlbmQgb3ZlciBkdXJpbmcgc2Vzc2lvbiBjb25uZWN0aW9uIHVubGVzcyBvdmVycmlkZGVuXG4gKiBieSB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHID0ge1xuICAgIG91dHB1dE1vZGFsaXRpZXM6IFsnYXVkaW8nXSxcbiAgICBhdWRpbzoge1xuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgZm9ybWF0OiB7IHR5cGU6ICdhdWRpby9wY20nLCByYXRlOiAyNDAwMCB9LFxuICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogeyBtb2RlbDogJ2dwdC00by1taW5pLXRyYW5zY3JpYmUnIH0sXG4gICAgICAgICAgICB0dXJuRGV0ZWN0aW9uOiB7IHR5cGU6ICdzZW1hbnRpY192YWQnIH0sXG4gICAgICAgICAgICBub2lzZVJlZHVjdGlvbjogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHsgdHlwZTogJ2F1ZGlvL3BjbScsIHJhdGU6IDI0MDAwIH0sXG4gICAgICAgICAgICBzcGVlZDogMSxcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZUJhc2UgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgI21vZGVsO1xuICAgICNhcGlLZXk7XG4gICAgI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICNyYXdTZXNzaW9uQ29uZmlnID0gbnVsbDtcbiAgICBldmVudEVtaXR0ZXIgPSBuZXcgUnVudGltZUV2ZW50RW1pdHRlcigpO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUw7XG4gICAgICAgIHRoaXMuI2FwaUtleSA9IG9wdGlvbnMuYXBpS2V5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudE1vZGVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbW9kZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IG1vZGVsIHRoYXQgaXMgYmVpbmcgdXNlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyLlxuICAgICAqICoqTm90ZSoqOiBUaGUgbW9kZWwgY2Fubm90IGJlIGNoYW5nZWQgbWlkIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBzZXQgY3VycmVudE1vZGVsKG1vZGVsKSB7XG4gICAgICAgIHRoaXMuI21vZGVsID0gbW9kZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhvb2sgZm9yIHN1YmNsYXNzZXMgdG8gY2xlYW4gdXAgdHJhbnNwb3J0LXNwZWNpZmljIHN0YXRlIHdoZW4gYXVkaW9cbiAgICAgKiBwbGF5YmFjayBmaW5pc2hlcy4gRGVmYXVsdHMgdG8gYSBuby1vcC5cbiAgICAgKi9cbiAgICBfYWZ0ZXJBdWRpb0RvbmVFdmVudCgpIHtcbiAgICAgICAgLy8gSW50ZW50aW9uYWxseSBlbXB0eS5cbiAgICB9XG4gICAgZ2V0IF9yYXdTZXNzaW9uQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA/PyBudWxsO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0QXBpS2V5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy4jYXBpS2V5O1xuICAgICAgICBpZiAodHlwZW9mIGFwaUtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUtleSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcGlLZXk7XG4gICAgfVxuICAgIF9vbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnKicsIHBhcnNlZCk7XG4gICAgICAgIGlmIChpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBwYXJzZWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQocGFyc2VkLnR5cGUsIHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9zdGFydGVkJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9zdGFydGVkJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLnVwZGF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNyYXdTZXNzaW9uQ29uZmlnID0gcGFyc2VkLnNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UgZG9uZSBldmVudCcsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBpbnB1dFRva2VucyArIG91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VuX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3VzYWdlX3VwZGF0ZScsIHVzYWdlKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9kb25lJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9kb25lJyxcbiAgICAgICAgICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5pZCA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLm91dHB1dCA/PyBbXSxcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VuX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRvbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2RvbmUnKTtcbiAgICAgICAgICAgIHRoaXMuX2FmdGVyQXVkaW9Eb25lRXZlbnQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX2RlbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSB7XG4gICAgICAgICAgICAvLyByaWdodCBub3cgcmF0aGVyIHRoYW4ga2VlcGluZyB0cmFjayBvZiBwYXJ0aWFscyBhbmQgcmVidWlsZGluZyB0aGUgaXRlbSB3ZVxuICAgICAgICAgICAgLy8gd2lsbCByZXRyaWV2ZSBpdCBpbnN0ZWFkIHdoaWNoIHRyaWdnZXJzIHRoZSBgY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkYCBldmVudCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfdGV4dC5kZWx0YScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdF9kZWx0YScsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBwYXJzZWQuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWQnKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgTUNQIGxpc3QgdG9vbHMgaXRlbXMgKG9ubHkgYWN0IHdoZW4gZG9uZSB0byBlbnN1cmUgdG9vbHMgYXJlIHByZXNlbnQpXG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9saXN0X3Rvb2xzJyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJMYWJlbCA9IHBhcnNlZC5pdGVtLnNlcnZlcl9sYWJlbCA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCB0b29scyA9IChwYXJzZWQuaXRlbS50b29scyA/PyBbXSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbHNfbGlzdGVkJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29scyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBlbWl0dGluZyBtY3BfdG9vbHNfbGlzdGVkJywgZXJyLCBwYXJzZWQuaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBhZGQgdGhpcyBpdGVtIHRvIGhpc3Rvcnk7IGl0J3MgYSB0cmFuc3BvcnQtbGV2ZWwgc2lkZS1jaGFubmVsLlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uYWRkZWQnIHx8XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnICYmXG4gICAgICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BBcHByb3ZhbFJlcXVlc3QgPSByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckxhYmVsOiBpdGVtLnNlcnZlcl9sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IEpTT04ucGFyc2UoaXRlbS5hcmd1bWVudHMgfHwgJ3t9JyksXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmVkOiBpdGVtLmFwcHJvdmVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BBcHByb3ZhbFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLCBtY3BBcHByb3ZhbFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX3Rvb2xfY2FsbCcgfHxcbiAgICAgICAgICAgICAgICBwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJ1xuICAgICAgICAgICAgICAgICAgICA/ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgIDogJ2luX3Byb2dyZXNzJztcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BDYWxsID0gcmVhbHRpbWVNY3BDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBwYXJzZWQuaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnNlZC5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcGFyc2VkLml0ZW0ub3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BDYWxsKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5tY3BfY2FsbC5pbl9wcm9ncmVzcycpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQ7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdtY3BfbGlzdF90b29scy5pbl9wcm9ncmVzcycpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQ7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtX2lkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkLml0ZW07XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcgJiYgaXRlbS5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbENhbGwgPSByZWFsdGltZVRvb2xDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsIC8vIHdlIHNldCBpdCB0byBpbl9wcm9ncmVzcyBmb3IgdGhlIFVJIGFzIGl0IHdpbGwgb25seSBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBudWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCB0b29sQ2FsbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdmdW5jdGlvbl9jYWxsJywge1xuICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IGl0ZW0uY2FsbF9pZCA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtY3BfdG9vbF9jYWxsJyB8fCBpdGVtLnR5cGUgPT09ICdtY3BfY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BDYWxsID0gcmVhbHRpbWVNY3BDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2NvbXBsZXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IGl0ZW0ub3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BDYWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsdGltZUl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpdGVtLnN0YXR1cyA/PyAnY29tcGxldGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogKGl0ZW0uc3RhdHVzID8/ICdpbl9wcm9ncmVzcycpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCByZWFsdGltZUl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX29uT3BlbigpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgX29uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZGlzY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcgaXRlbSBpbiB0aGUgY29udmVyc2F0aW9uIGFuZFxuICAgICAqIHRyaWdnZXIgYSByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3RoZXJFdmVudERhdGEgLSBBZGRpdGlvbmFsIGV2ZW50IGRhdGEgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF90ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiBtZXNzYWdlLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ2lucHV0X2ltYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2ltYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogY29udGVudC5pbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihjb250ZW50LnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vdGhlckV2ZW50RGF0YSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0cmlnZ2VyUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgY29udGVudDogW3sgdHlwZTogJ2lucHV0X2ltYWdlJywgaW1hZ2UgfV0sXG4gICAgICAgIH0sIHt9LCB7IHRyaWdnZXJSZXNwb25zZSB9KTtcbiAgICB9XG4gICAgX2dldE1lcmdlZFNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHRvTmV3U2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG5ld0NvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogbmV3Q29uZmlnLm1vZGVsID8/IHRoaXMuI21vZGVsLFxuICAgICAgICAgICAgb3V0cHV0X21vZGFsaXRpZXM6IG5ld0NvbmZpZy5vdXRwdXRNb2RhbGl0aWVzID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcub3V0cHV0TW9kYWxpdGllcyxcbiAgICAgICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py5mb3JtYXQgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5pbnB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBub2lzZV9yZWR1Y3Rpb246IG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py50cmFuc2NyaXB0aW9uID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LnRyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIHR1cm5fZGV0ZWN0aW9uOiBPcGVuQUlSZWFsdGltZUJhc2UuYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24pID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0ID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiBuZXdDb25maWcuYXVkaW8/Lm91dHB1dD8udm9pY2UgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlLFxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnNwZWVkID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py5zcGVlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBuZXdDb25maWcudG9vbENob2ljZSA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLnRvb2xDaG9pY2UsXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihuZXdDb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG5ld0NvbmZpZy5wcm9tcHQpIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLnByb21wdCA9IHtcbiAgICAgICAgICAgICAgICBpZDogbmV3Q29uZmlnLnByb21wdC5wcm9tcHRJZCxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBuZXdDb25maWcucHJvbXB0LnZlcnNpb24sXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiBuZXdDb25maWcucHJvbXB0LnZhcmlhYmxlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld0NvbmZpZy50b29scyAmJiBuZXdDb25maWcudG9vbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2Vzc2lvbkRhdGEudG9vbHMgPSBuZXdDb25maWcudG9vbHMubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZCB0aGUgcGF5bG9hZCBvYmplY3QgZXhwZWN0ZWQgYnkgdGhlIFJlYWx0aW1lIEFQSSB3aGVuIGNyZWF0aW5nIG9yIHVwZGF0aW5nIGEgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIFRoZSBoZWxwZXIgY2VudHJhbGlzZXMgdGhlIGNvbnZlcnNpb24gZnJvbSBjYW1lbENhc2UgcnVudGltZSBjb25maWcgdG8gdGhlIHNuYWtlX2Nhc2UgcGF5bG9hZFxuICAgICAqIHJlcXVpcmVkIGJ5IHRoZSBSZWFsdGltZSBBUEkgc28gdHJhbnNwb3J0cyB0aGF0IG5lZWQgYSBvbmUtb2ZmIHBheWxvYWQgKGZvciBleGFtcGxlIFNJUCBjYWxsXG4gICAgICogYWNjZXB0YW5jZSkgY2FuIHJldXNlIHRoZSBzYW1lIGxvZ2ljIHdpdGhvdXQgZHVwbGljYXRpbmcgcHJpdmF0ZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gbWVyZ2Ugd2l0aCBkZWZhdWx0cy5cbiAgICAgKi9cbiAgICBidWlsZFNlc3Npb25QYXlsb2FkKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgIH1cbiAgICBzdGF0aWMgYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKGMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIGNyZWF0ZVJlc3BvbnNlLCBjcmVhdGVfcmVzcG9uc2UsIGVhZ2VybmVzcywgaW50ZXJydXB0UmVzcG9uc2UsIGludGVycnVwdF9yZXNwb25zZSwgcHJlZml4UGFkZGluZ01zLCBwcmVmaXhfcGFkZGluZ19tcywgc2lsZW5jZUR1cmF0aW9uTXMsIHNpbGVuY2VfZHVyYXRpb25fbXMsIHRocmVzaG9sZCwgaWRsZVRpbWVvdXRNcywgaWRsZV90aW1lb3V0X21zLCAuLi5yZXN0IH0gPSBjO1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY3JlYXRlX3Jlc3BvbnNlOiBjcmVhdGVSZXNwb25zZSA/IGNyZWF0ZVJlc3BvbnNlIDogY3JlYXRlX3Jlc3BvbnNlLFxuICAgICAgICAgICAgZWFnZXJuZXNzLFxuICAgICAgICAgICAgaW50ZXJydXB0X3Jlc3BvbnNlOiBpbnRlcnJ1cHRSZXNwb25zZVxuICAgICAgICAgICAgICAgID8gaW50ZXJydXB0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICA6IGludGVycnVwdF9yZXNwb25zZSxcbiAgICAgICAgICAgIHByZWZpeF9wYWRkaW5nX21zOiBwcmVmaXhQYWRkaW5nTXMgPyBwcmVmaXhQYWRkaW5nTXMgOiBwcmVmaXhfcGFkZGluZ19tcyxcbiAgICAgICAgICAgIHNpbGVuY2VfZHVyYXRpb25fbXM6IHNpbGVuY2VEdXJhdGlvbk1zXG4gICAgICAgICAgICAgICAgPyBzaWxlbmNlRHVyYXRpb25Nc1xuICAgICAgICAgICAgICAgIDogc2lsZW5jZV9kdXJhdGlvbl9tcyxcbiAgICAgICAgICAgIGlkbGVfdGltZW91dF9tczogaWRsZVRpbWVvdXRNcyA/IGlkbGVUaW1lb3V0TXMgOiBpZGxlX3RpbWVvdXRfbXMsXG4gICAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9O1xuICAgICAgICAvLyBSZW1vdmUgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIHRoZSBjb25maWdcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWdba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25maWdba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjb25maWcpLmxlbmd0aCA+IDAgPyBjb25maWcgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGludGVybmFsIHRyYWNpbmcgY29uZmlnLiBUaGlzIGlzIHVzZWQgdG8gdHJhY2sgdGhlIHRyYWNpbmcgY29uZmlnIHRoYXQgaGFzIGJlZW4gc2V0XG4gICAgICogZHVyaW5nIHRoZSBzZXNzaW9uLmNyZWF0ZSBldmVudC5cbiAgICAgKi9cbiAgICBzZXQgX3RyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gdHJhY2luZ0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdHJhY2luZyBjb25maWcgZm9yIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgc2VuZCB0aGUgdHJhY2luZyBjb25maWcgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFjaW5nQ29uZmlnIC0gVGhlIHRyYWNpbmcgY29uZmlnIHRvIHNldC4gV2UgZG9uJ3Qgc3VwcG9ydCAnYXV0bycgaGVyZSBhcyB0aGUgU0RLIHdpbGwgYWx3YXlzIGNvbmZpZ3VyZSBhIFdvcmtmbG93IE5hbWUgdW5sZXNzIGl0IGV4aXN0c1xuICAgICAqL1xuICAgIF91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gdHJlYXRpbmcgaXQgYXMgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgLy8gdHVybiBvbiB0cmFjaW5nIGluIGF1dG8gbW9kZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnICE9PSBudWxsICYmXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBhbHJlYWR5IHNldCwgd2UgY2FuJ3QgY2hhbmdlIGl0XG4gICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2luZyBjb25maWcgaXMgYWxyZWFkeSBzZXQsIHNraXBwaW5nIHNldHRpbmcgaXQgYWdhaW4uIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSBudWxsKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0Rpc2FibGluZyB0cmFjaW5nIGZvciB0aGlzIHNlc3Npb24uIEl0IGNhbm5vdCBiZSB0dXJuZWQgb24gZm9yIHRoaXMgc2Vzc2lvbiBmcm9tIHRoaXMgcG9pbnQgb24uJyk7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnID09PSBudWxsIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgY3VycmVudGx5IG5vdCBzZXQgc28gd2UgY2FuIHNldCBpdCB0byB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/Lm1ldGFkYXRhICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ01pc21hdGNoIGluIHRyYWNpbmcgY29uZmlnLiBJZ25vcmluZyB0aGUgbmV3IHRyYWNpbmcgY29uZmlnLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4gQ3VycmVudCB0cmFjaW5nIGNvbmZpZzogJXMsIG5ldyB0cmFjaW5nIGNvbmZpZzogJXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiN0cmFjaW5nQ29uZmlnKSwgSlNPTi5zdHJpbmdpZnkodHJhY2luZ0NvbmZpZykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNlc3Npb24gY29uZmlnLiBUaGlzIHdpbGwgbWVyZ2UgaXQgd2l0aCB0aGUgY3VycmVudCBzZXNzaW9uIGNvbmZpZyB3aXRoIHRoZSBkZWZhdWx0XG4gICAgICogdmFsdWVzIGFuZCBzZW5kIGl0IHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gVGhlIHNlc3Npb24gY29uZmlnIHRvIHVwZGF0ZS5cbiAgICAgKi9cbiAgICB1cGRhdGVTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHRoaXMuYnVpbGRTZXNzaW9uUGF5bG9hZChjb25maWcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbkRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBvdXRwdXQgb2YgYSBmdW5jdGlvbiBjYWxsIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbENhbGwgLSBUaGUgdG9vbCBjYWxsIHRvIHNlbmQgdGhlIG91dHB1dCBmb3IuXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHN0YXJ0UmVzcG9uc2UgLSBXaGV0aGVyIHRvIHN0YXJ0IGEgbmV3IHJlc3BvbnNlIGFmdGVyIHNlbmRpbmcgdGhlIG91dHB1dC5cbiAgICAgKi9cbiAgICBzZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHN0YXJ0UmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkOiB0b29sQ2FsbC5wcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHRvb2xDYWxsLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHRvb2wgY2FsbCBpdGVtJywgZXJyb3IsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gSWYgYHsgY29tbWl0OiB0cnVlIH1gIGlzIHBhc3NlZCwgdGhlIGF1ZGlvIGJ1ZmZlclxuICAgICAqIHdpbGwgYmUgY29tbWl0dGVkIGFuZCB0aGUgbW9kZWwgd2lsbCBzdGFydCBwcm9jZXNzaW5nIGl0LiBUaGlzIGlzIG5lY2Vzc2FyeSBpZiB5b3UgaGF2ZVxuICAgICAqIGRpc2FibGVkIHR1cm4gZGV0ZWN0aW9uIC8gdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCB7IGNvbW1pdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcsXG4gICAgICAgICAgICBhdWRpbzogYXJyYXlCdWZmZXJUb0Jhc2U2NChhdWRpbyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWl0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi4gVGhpcyB3aWxsIGNyZWF0ZSBhIGRpZmYgYmV0d2VlbiB0aGUgb2xkIGFuZCBuZXcgaGlzdG9yeVxuICAgICAqIGFuZCBzZW5kIHRoZSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBSZWFsdGltZSBBUEkgdG8gdXBkYXRlIHRoZSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHJlc2V0SGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcmVtb3ZhbHMsIGFkZGl0aW9ucywgdXBkYXRlcyB9ID0gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KTtcbiAgICAgICAgY29uc3QgcmVtb3ZhbElkcyA9IG5ldyBTZXQocmVtb3ZhbHMubWFwKChpdGVtKSA9PiBpdGVtLml0ZW1JZCkpO1xuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGFuIHVwZGF0ZSBldmVudCBmb3IgaXRlbXMgc28gd2Ugd2lsbCByZW1vdmUgYW5kIHJlLWFkZCB3aGF0J3MgdGhlcmVcbiAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuICAgICAgICAgICAgcmVtb3ZhbElkcy5hZGQodXBkYXRlLml0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92YWxJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbUlkIG9mIHJlbW92YWxJZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkaXRpb25zQW5kVXBkYXRlcyA9IFsuLi5hZGRpdGlvbnMsIC4uLnVwZGF0ZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGFkZGl0aW9uIG9mIGFkZGl0aW9uc0FuZFVwZGF0ZXMpIHtcbiAgICAgICAgICAgIGlmIChhZGRpdGlvbi50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogYWRkaXRpb24ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYWRkaXRpb24uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGFkZGl0aW9uLml0ZW1JZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbi5yb2xlICE9PSAnc3lzdGVtJyAmJiBhZGRpdGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVudHJ5LnN0YXR1cyA9IGFkZGl0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbUVudHJ5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Z1bmN0aW9uIGNhbGxzIGNhbm5vdCBiZSBtYW51YWxseSBhZGRlZCBvciB1cGRhdGVkIGF0IHRoZSBtb21lbnQuIElnbm9yaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRNY3BSZXNwb25zZShhcHByb3ZhbFJlcXVlc3QsIGFwcHJvdmVkKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgcHJldmlvdXNfaXRlbV9pZDogYXBwcm92YWxSZXF1ZXN0Lml0ZW1JZCxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwX2FwcHJvdmFsX3Jlc3BvbnNlJyxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlcXVlc3QuaXRlbUlkLFxuICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVCYXNlLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgSEVBREVSUyB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViUlRDLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXQgY2FuXG4gKiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqXG4gKiBVbmxlc3MgeW91IHNwZWNpZnkgYSBgbWVkaWFTdHJlYW1gIG9yIGBhdWRpb0VsZW1lbnRgIG9wdGlvbiwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGUgbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlJUQyBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgb3B0aW9ucztcbiAgICAjdXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgY2FsbElkOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICNtdXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMuYmFzZVVybCA/PyBgaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZS9jYWxsc2A7XG4gICAgICAgIHRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ID0gb3B0aW9ucy51c2VJbnNlY3VyZUFwaUtleSA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY2FsbCBJRCBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNhbGxJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLmNhbGxJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuc3RhdHVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbmNsdWRpbmcgdGhlIHBlZXIgY29ubmVjdGlvbiBhbmQgZGF0YVxuICAgICAqIGNoYW5uZWwuXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI211dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE9wZW5BSSBSZWFsdGltZSBBUElcbiAgICAgKiB2aWEgV2ViUlRDLlxuICAgICAqXG4gICAgICogSWYgeW91IGFyZSB1c2luZyBhIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICAgICAqIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RpbmcnKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignUmVhbHRpbWUgY29ubmVjdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzLiBQbGVhc2UgYXdhaXQgb3JpZ2luYWwgcHJvbWlzZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IG9wdGlvbnMudXJsID8/IHRoaXMuI3VybDtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBpc0NsaWVudEtleSA9IHR5cGVvZiBhcGlLZXkgPT09ICdzdHJpbmcnICYmIGFwaUtleS5zdGFydHNXaXRoKCdla18nKTtcbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkgJiYgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ICYmICFpc0NsaWVudEtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVXNpbmcgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudCByZXF1aXJlcyBhbiBlcGhlbWVyYWwgY2xpZW50IGtleS4gSWYgeW91IG5lZWQgdG8gdXNlIGEgcmVndWxhciBBUEkga2V5LCB1c2UgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgb3Igc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJTZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25VcmwgPSBuZXcgVVJMKGJhc2VVcmwpO1xuICAgICAgICAgICAgICAgIGxldCBwZWVyQ29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFDaGFubmVsID0gcGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwoJ29haS1ldmVudHMnKTtcbiAgICAgICAgICAgICAgICBsZXQgY2FsbElkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIgPSAoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Rpc2Nvbm5lY3RlZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjbG9zZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICdjb25uZWN0ZWQnIHN0YXRlIGlzIGhhbmRsZWQgYnkgZGF0YUNoYW5uZWwub25vcGVuLiBTbyB3ZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpdCBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICduZXcnIGFuZCAnY29ubmVjdGluZycgYXJlIGludGVybWVkaWF0ZSBzdGF0ZXMgYW5kIGRvIG5vdCByZXF1aXJlIGFjdGlvbiBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXR0YWNoQ29ubmVjdGlvblN0YXRlSGFuZGxlcihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsSWQsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbmRpbmcgdGhlIHNlc3Npb24gY29uZmlnIGFnYWluIGhlcmUgb25jZSB0aGUgY2hhbm5lbCBpcyBjb25uZWN0ZWQgdG8gZW5zdXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhlIHNlc3Npb24gY29uZmlnIGlzIHNlbnQgdG8gdGhlIHNlcnZlciBiZWZvcmUgdGhlIGZpcnN0IHJlc3BvbnNlIGlzIHJlY2VpdmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgaXQgb24gY29ubmVjdGlvbiBzaG91bGQgd29yayBidXQgdGhlIGNvbmZpZyBpcyBub3QgYmVpbmcgdmFsaWRhdGVkIG9uIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBzZXJ2ZXIuIFRoaXMgdHJpZ2dlcnMgYSB2YWxpZGF0aW9uIGVycm9yIGlmIHRoZSBjb25maWcgaXMgbm90IHZhbGlkLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcodXNlclNlc3Npb25Db25maWcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhY2luZ0NvbmZpZyA9IHBhcnNlZC5zZXNzaW9uLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnlpbmcgdG8gdHVybiBvbiB0cmFjaW5nIGFmdGVyIHRoZSBzZXNzaW9uIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0eXBlb2YgdXNlclNlc3Npb25Db25maWcudHJhY2luZyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdXNlclNlc3Npb25Db25maWcudHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgYXVkaW8gcGxheWJhY2tcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXVkaW9FbGVtZW50ID8/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBldmVudC5zdHJlYW1zWzBdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gZ2V0IG1pY3JvcGhvbmUgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5vcHRpb25zLm1lZGlhU3RyZWFtID8/XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsUGVlckNvbm5lY3Rpb24gPSBwZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsUGVlckNvbm5lY3Rpb24gIT09IHBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFBlZXJDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdHRhY2hDb25uZWN0aW9uU3RhdGVIYW5kbGVyKHBlZXJDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7IC4uLnRoaXMuI3N0YXRlLCBwZWVyQ29ubmVjdGlvbiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFvZmZlci5zZHApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG9mZmVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNkcFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY29ubmVjdGlvblVybCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogb2ZmZXIuc2RwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3NkcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IEhFQURFUlNbJ1gtT3BlbkFJLUFnZW50cy1TREsnXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjYWxsSWQgPSBzZHBSZXNwb25zZS5oZWFkZXJzPy5nZXQoJ0xvY2F0aW9uJyk/LnNwbGl0KCcvJykucG9wKCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7IC4uLnRoaXMuI3N0YXRlLCBjYWxsSWQgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgICAgICAgICAgICAgICBzZHA6IGF3YWl0IHNkcFJlc3BvbnNlLnRleHQoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLmRhdGFDaGFubmVsIHx8XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGRhdGEgY2hhbm5lbCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSBvciB1bm11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzZW5kZXIudHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrLmVuYWJsZWQgPSAhbXV0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2FmdGVyQXVkaW9Eb25lRXZlbnQoKSB7XG4gICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJIGFuZCBkaXNjb25uZWN0cyB0aGUgdW5kZXJseWluZyBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBzZW5kZXIudHJhY2s/LnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzICE9PSAnZGlzY29ubmVjdGVkJykge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBjdXJyZW50IHJlc3BvbnNlIGlmIG9uZSBpcyBvbmdvaW5nIGFuZCBjbGVhciB0aGUgYXVkaW8gYnVmZmVyIHNvIHRoYXQgdGhlIGFnZW50XG4gICAgICogc3RvcHMgdGFsa2luZy5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXInLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmV4cG9ydCBjb25zdCBXZWJTb2NrZXQgPSBnbG9iYWxUaGlzLldlYlNvY2tldDtcbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBjb25zdCB1c2VXZWJTb2NrZXRQcm90b2NvbHMgPSB0cnVlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hpbXMtYnJvd3Nlci5tanMubWFwIiwiaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQsIHVzZVdlYlNvY2tldFByb3RvY29scywgV2ViU29ja2V0LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL19zaGltcyc7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgYmFzZTY0VG9BcnJheUJ1ZmZlciwgSEVBREVSUywgV0VCU09DS0VUX01FVEEgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG4vKipcbiAqIFRyYW5zcG9ydCBsYXllciB0aGF0J3MgaGFuZGxpbmcgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCBPcGVuQUkncyBSZWFsdGltZSBBUElcbiAqIHZpYSBXZWJTb2NrZXRzLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXRcbiAqIGNhbiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IGV4dGVuZHMgT3BlbkFJUmVhbHRpbWVCYXNlIHtcbiAgICAjYXBpS2V5O1xuICAgICN1cmw7XG4gICAgI2RlZmF1bHRVcmw7XG4gICAgI3N0YXRlID0ge1xuICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjY3VycmVudEl0ZW1JZDtcbiAgICAjY3VycmVudEF1ZGlvQ29udGVudEluZGV4O1xuICAgIC8qKlxuICAgICAqIFRpbWVzdGFtcCBtYWludGFpbmVkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIgdG8gYWlkIHdpdGggdGhlIGNhbGN1bGF0aW9uIG9mIHRoZSBlbGFwc2VkIHRpbWVcbiAgICAgKiBzaW5jZSB0aGUgcmVzcG9uc2Ugc3RhcnRlZCB0byBjb21wdXRlIHRoZSByaWdodCBpbnRlcnJ1cHRpb24gdGltZS5cbiAgICAgKlxuICAgICAqIE1vc3RseSBpbnRlcm5hbCBidXQgbWlnaHQgYmUgdXNlZCBieSBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXJzIGZvciB0aGVpciBpbnRlcnJ1cHRpb25cbiAgICAgKiBjYWxjdWxhdGlvbi5cbiAgICAgKi9cbiAgICBfZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICBfYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICNjcmVhdGVXZWJTb2NrZXQ7XG4gICAgI3NraXBPcGVuRXZlbnRMaXN0ZW5lcnM7XG4gICAgI3Jlc2V0QXVkaW9QbGF5YmFja1N0YXRlKCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLiNkZWZhdWx0VXJsID0gb3B0aW9ucy51cmw7XG4gICAgICAgIHRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ID0gb3B0aW9ucy51c2VJbnNlY3VyZUFwaUtleSA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy4jY3JlYXRlV2ViU29ja2V0ID0gb3B0aW9ucy5jcmVhdGVXZWJTb2NrZXQ7XG4gICAgICAgIHRoaXMuI3NraXBPcGVuRXZlbnRMaXN0ZW5lcnMgPSBvcHRpb25zLnNraXBPcGVuRXZlbnRMaXN0ZW5lcnMgPz8gZmFsc2U7XG4gICAgfVxuICAgIGdldENvbW1vblJlcXVlc3RIZWFkZXJzKCkge1xuICAgICAgICByZXR1cm4gSEVBREVSUztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuc3RhdHVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsd2F5cyByZXR1cm5zIGBudWxsYCBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBoYW5kbGUgbXV0aW5nLiBJbnN0ZWFkLFxuICAgICAqIHRoaXMgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIGNsaWVudCBieSBub3QgdHJpZ2dlcmluZyB0aGUgYHNlbmRBdWRpb2AgbWV0aG9kLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGl0ZW0gSUQgb2YgdGhlIG9uZ29pbmcgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRJdGVtSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50SXRlbUlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyB0aGUgYGF1ZGlvYCBldmVudCB0aGF0IGEgY2xpZW50IG1pZ2h0IGxpc3RlbiB0byB0byByZWNlaXZlIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICogUHJvdGVjdGVkIGZvciB5b3UgdG8gYmUgYWJsZSB0byBvdmVycmlkZSBhbmQgZGlzYWJsZSBlbWl0dGluZyB0aGlzIGV2ZW50IGluIGNhc2UgeW91ciBleHRlbmRlZFxuICAgICAqIHRyYW5zcG9ydCBsYXllciBoYW5kbGVzIGF1ZGlvIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW9FdmVudCAtIFRoZSBhdWRpbyBldmVudCB0byBlbWl0LlxuICAgICAqL1xuICAgIF9vbkF1ZGlvKGF1ZGlvRXZlbnQpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdhdWRpbycsIGF1ZGlvRXZlbnQpO1xuICAgIH1cbiAgICBfYWZ0ZXJBdWRpb0RvbmVFdmVudCgpIHtcbiAgICAgICAgdGhpcy4jcmVzZXRBdWRpb1BsYXliYWNrU3RhdGUoKTtcbiAgICB9XG4gICAgYXN5bmMgI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLiNhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FQSSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNhbGwgYGNvbm5lY3QoKWAgd2l0aCBhbiBBUEkga2V5IGZpcnN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmXG4gICAgICAgICAgICAhdGhpcy4jYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpICYmXG4gICAgICAgICAgICAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBoYXZlIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3cyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLiNjcmVhdGVXZWJTb2NrZXQpIHtcbiAgICAgICAgICAgIHdzID0gYXdhaXQgdGhpcy4jY3JlYXRlV2ViU29ja2V0KHtcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuI3VybCxcbiAgICAgICAgICAgICAgICBhcGlLZXk6IHRoaXMuI2FwaUtleSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYnJvd3NlcnMgYW5kIHdvcmtlcmQgc2hvdWxkIHVzZSB0aGUgcHJvdG9jb2xzIGFyZ3VtZW50LCBub2RlIHNob3VsZCB1c2UgdGhlIGhlYWRlcnMgYXJndW1lbnRcbiAgICAgICAgICAgIGNvbnN0IHdlYnNvY2tldEFyZ3VtZW50cyA9IHVzZVdlYlNvY2tldFByb3RvY29sc1xuICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICAvLyBBdXRoXG4gICAgICAgICAgICAgICAgICAgICdvcGVuYWktaW5zZWN1cmUtYXBpLWtleS4nICsgdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICBXRUJTT0NLRVRfTUVUQSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiNhcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0Q29tbW9uUmVxdWVzdEhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHRoaXMuI3VybCwgd2Vic29ja2V0QXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgIGNvbnN0IG9uU29ja2V0T3BlblJlYWR5ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLiNza2lwT3BlbkV2ZW50TGlzdGVuZXJzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBvblNvY2tldE9wZW5SZWFkeSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIG9uU29ja2V0T3BlblJlYWR5KTtcbiAgICAgICAgfVxuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHBhcnNlZC5jb250ZW50X2luZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSBwYXJzZWQuaXRlbV9pZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBzdGFydCB0aW1lc3RhbXAgaXMgbm90IHNldCwgd2Ugc2V0IGl0IHRvIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGVsYXBzZWQgdGltZSBmb3IgaW50ZXJydXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmYgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHBhcnNlZC5kZWx0YSk7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhdWRpbyBsZW5ndGggaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgLy8gR0EgZm9ybWF0OiBzZXNzaW9uLmF1ZGlvLm91dHB1dC5mb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCB7IHR5cGU6IFwiYXVkaW8vcGNtXCIsIHJhdGUgfSBvciBcImF1ZGlvL3BjbXVcIiBldGMuXG4gICAgICAgICAgICAgICAgY29uc3QgZm10ID0gdGhpcy5fcmF3U2Vzc2lvbkNvbmZpZz8uYXVkaW8/Lm91dHB1dD8uZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChmbXQgJiYgdHlwZW9mIGZtdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RydWN0dXJlZCBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZtdC50eXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gJ2F1ZGlvL3BjbXUnIHx8IHQgPT09ICdhdWRpby9wY21hJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gOGtIeiwgMSBieXRlIHBlciBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gODtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09PSAnYXVkaW8vcGNtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0ZSA9IGZtdC5yYXRlID8/IDI0MDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnl0ZXMgLT4gc2FtcGxlcyAoMiBieXRlcyBwZXIgc2FtcGxlKSAtPiBtc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSAoYnVmZi5ieXRlTGVuZ3RoIC8gMiAvIHJhdGUpICogMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGFzc3VtcHRpb24gc2ltaWxhciB0byBsZWdhY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBmbXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmbXQuc3RhcnRzV2l0aCgnZzcxMV8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyA4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXNzdW1lIDI0a0h6IFBDTTE2XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCB0byAyNGtIeiBQQ00xNiBiZWhhdmlvciBpZiB1bnNwZWNpZmllZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYnVmZixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fb25BdWRpbyhhdWRpb0V2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCA9IHRoaXMuX3Jhd1Nlc3Npb25Db25maWc/LmF1ZGlvPy5pbnB1dD8udHVybl9kZXRlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPy5pbnRlcnJ1cHRfcmVzcG9uc2UgPz8gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoIWF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0eXBlb2Ygc2Vzc2lvbkNvbmZpZy50cmFjaW5nID09PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICA6IHNlc3Npb25Db25maWcudHJhY2luZztcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsSWQgPSBvcHRpb25zLmNhbGxJZDtcbiAgICAgICAgbGV0IHVybDtcbiAgICAgICAgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICAgICAgICB1cmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgICAgIHRoaXMuI2RlZmF1bHRVcmwgPSBvcHRpb25zLnVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWxsSWQpIHtcbiAgICAgICAgICAgIHVybCA9IGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9jYWxsX2lkPSR7Y2FsbElkfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy4jZGVmYXVsdFVybCkge1xuICAgICAgICAgICAgdXJsID0gdGhpcy4jZGVmYXVsdFVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVybCA9IGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9tb2RlbD0ke3RoaXMuY3VycmVudE1vZGVsfWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdXJsID0gdXJsO1xuICAgICAgICBjb25zdCBzZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpLmNhdGNoKHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVNlc3Npb25Db25maWcoc2Vzc2lvbkNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLndlYnNvY2tldCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShldmVudCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgYWxzbyByZXNldCBhbnkgaW50ZXJuYWwgY29ubmVjdGlvbiB0cmFja2luZyB1c2VkIGZvciBpbnRlcnJ1cHRpb24gaGFuZGxpbmcuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldD8uY2xvc2UoKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2lsbCB0aHJvdyBhbiBlcnJvciBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBtdXRlKF9tdXRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011dGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQuIFlvdSBoYXZlIHRvIG11dGUgdGhlIGF1ZGlvIGlucHV0IHlvdXJzZWxmLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGF1ZGlvIGJ1ZmZlciB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgZm9yIHlvdXIgY2xpZW50IHRvIHNlbmQgYXVkaW8gdG8gdGhlXG4gICAgICogbW9kZWwgdG8gcmVzcG9uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICBzdXBlci5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBjYW5jZWwgcmVzcG9uc2UgZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIHRvIGNhbmNlbCBhbiBvbmdvaW5nXG4gICAgICogIHJlc3BvbnNlIHRoYXQgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBnZW5lcmF0aW5nLlxuICAgICAqL1xuICAgIF9jYW5jZWxSZXNwb25zZSgpIHtcbiAgICAgICAgLy8gY2FuY2VsIHRoZSBvbmdvaW5nIHJlc3BvbnNlXG4gICAgICAgIGlmICh0aGlzLiNvbmdvaW5nUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY2FuY2VsJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRG8gTk9UIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIENhbGwgYGludGVycnVwdCgpYCBpbnN0ZWFkIGZvciBwcm9wZXIgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZW5kIHRoZSByaWdodCBldmVudHMgdG8gdGhlIEFQSSB0byBpbmZvcm0gdGhlIG1vZGVsIHRoYXQgdGhlIHVzZXIgaGFzXG4gICAgICogaW50ZXJydXB0ZWQgdGhlIHJlc3BvbnNlLiBJdCBtaWdodCBiZSBvdmVycmlkZGVuL2V4dGVuZGVkIGJ5IGFuIGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllci4gU2VlXG4gICAgICogdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYCBmb3IgYW4gZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGFwc2VkVGltZSAtIFRoZSBlbGFwc2VkIHRpbWUgc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQuXG4gICAgICovXG4gICAgX2ludGVycnVwdChlbGFwc2VkVGltZSwgY2FuY2VsT25nb2luZ1Jlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgZW1pdCB0aGlzIGV2ZW50IHNvIHRoZSBjbGllbnQgY2FuIHN0b3AgcGxheWluZyBhdWRpb1xuICAgICAgICBpZiAoY2FuY2VsT25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxSZXNwb25zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPz8gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICAvLyBhdWRpb19lbmRfbXMgbXVzdCBiZSBhbiBpbnRlZ2VyXG4gICAgICAgIGNvbnN0IGF1ZGlvX2VuZF9tcyA9IE1hdGgubWF4KDAsIE1hdGguZmxvb3IoTWF0aC5taW4oZWxhcHNlZFRpbWUsIGxlbmd0aCkpKTtcbiAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19pbnRlcnJ1cHRlZCcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnLFxuICAgICAgICAgICAgaXRlbV9pZDogdGhpcy4jY3VycmVudEl0ZW1JZCxcbiAgICAgICAgICAgIGNvbnRlbnRfaW5kZXg6IHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCxcbiAgICAgICAgICAgIGF1ZGlvX2VuZF9tcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgb25nb2luZyByZXNwb25zZS4gVGhpcyBtZXRob2QgaXMgdHJpZ2dlcmVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGNsaWVudCB3aGVuXG4gICAgICogdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpIGlzIGVuYWJsZWQgKGRlZmF1bHQpIGFzIHdlbGwgYXMgd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIGdvdFxuICAgICAqIHRyaWdnZXJlZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYWxzbyBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IGlmIHlvdSB3YW50IHRvIGludGVycnVwdCB0aGUgY29udmVyc2F0aW9uIGZvciBleGFtcGxlXG4gICAgICogYmFzZWQgb24gYW4gZXZlbnQgaW4gdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoY2FuY2VsT25nb2luZ1Jlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuI2N1cnJlbnRJdGVtSWQgfHwgdHlwZW9mIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxhcHNlZFRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcDtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVycnVwdChlbGFwc2VkVGltZSwgY2FuY2VsT25nb2luZ1Jlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyZXNldEF1ZGlvUGxheWJhY2tTdGF0ZSgpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBVc2VyRXJyb3IsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MID0gU3ltYm9sKCdiYWNrZ3JvdW5kUmVzdWx0Jyk7XG5leHBvcnQgZnVuY3Rpb24gYmFja2dyb3VuZFJlc3VsdChjb250ZW50KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgW0JBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTF06IHRydWUsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0JhY2tncm91bmRSZXN1bHQocmVzdWx0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgcmVzdWx0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICByZXN1bHQgIT09IG51bGwgJiZcbiAgICAgICAgQkFDS0dST1VORF9SRVNVTFRfU1lNQk9MIGluIHJlc3VsdCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZFJlYWx0aW1lVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgKHRvb2wudHlwZSA9PT0gJ2hvc3RlZF90b29sJyAmJiB0b29sLm5hbWUgPT09ICdob3N0ZWRfbWNwJykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRvUmVhbHRpbWVUb29sRGVmaW5pdGlvbih0b29sKSB7XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbDtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2hvc3RlZF90b29sJyAmJiB0b29sLm5hbWUgPT09ICdob3N0ZWRfbWNwJykge1xuICAgICAgICBjb25zdCBzZXJ2ZXJVcmwgPSB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfdXJsICYmIHRvb2wucHJvdmlkZXJEYXRhLnNlcnZlcl91cmwubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfdXJsXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgc2VydmVyX2xhYmVsOiB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWwsXG4gICAgICAgICAgICBzZXJ2ZXJfdXJsOiBzZXJ2ZXJVcmwsXG4gICAgICAgICAgICBoZWFkZXJzOiB0b29sLnByb3ZpZGVyRGF0YS5oZWFkZXJzLFxuICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9vbC5wcm92aWRlckRhdGEuYWxsb3dlZF90b29scyxcbiAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6IHRvb2wucHJvdmlkZXJEYXRhLnJlcXVpcmVfYXBwcm92YWwsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbCB0eXBlOiAke3Rvb2x9YCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UsIE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIFJ1bkNvbnRleHQsIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgaXNab2RPYmplY3QsIHRvU21hcnRTdHJpbmcgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL3V0aWxzJztcbmltcG9ydCB7IGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsLCBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncywgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlJUQyB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmltcG9ydCB7IGFwcHJvdmFsSXRlbVRvUmVhbHRpbWVBcHByb3ZhbEl0ZW0sIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSwgaGFzV2ViUlRDU3VwcG9ydCwgcmVhbHRpbWVBcHByb3ZhbEl0ZW1Ub0FwcHJvdmFsSXRlbSwgdXBkYXRlUmVhbHRpbWVIaXN0b3J5LCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBpc0JhY2tncm91bmRSZXN1bHQsIGlzVmFsaWRSZWFsdGltZVRvb2wsIHRvUmVhbHRpbWVUb29sRGVmaW5pdGlvbiwgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuZnVuY3Rpb24gY2xvbmVEZWZhdWx0U2Vzc2lvbkNvbmZpZygpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRykpO1xufVxuLyoqXG4gKiBBIGBSZWFsdGltZVNlc3Npb25gIGlzIHRoZSBjb3JuZXJzdG9uZSBvZiBidWlsZGluZyBWb2ljZSBBZ2VudHMuIEl0J3MgdGhlIGVxdWl2YWxlbnQgb2YgYVxuICogUnVubmVyIGluIHRleHQtYmFzZWQgYWdlbnRzIGV4Y2VwdCB0aGF0IGl0IGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBtdWx0aXBsZSB0dXJucyBieSBtYWludGFpbmluZyBhXG4gKiBjb25uZWN0aW9uIHdpdGggdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIFRoZSBzZXNzaW9uIGhhbmRsZXMgbWFuYWdpbmcgdGhlIGxvY2FsIGhpc3RvcnkgY29weSwgZXhlY3V0ZXMgdG9vbHMsIHJ1bnMgb3V0cHV0IGd1YXJkcmFpbHMsIGFuZFxuICogZmFjaWxpdGF0ZXMgaGFuZG9mZnMuXG4gKlxuICogVGhlIGFjdHVhbCBhdWRpbyBoYW5kbGluZyBhbmQgZ2VuZXJhdGlvbiBvZiBtb2RlbCByZXNwb25zZXMgaXMgaGFuZGxlZCBieSB0aGUgdW5kZXJseWluZ1xuICogdHJhbnNwb3J0IGxheWVyLiBCeSBkZWZhdWx0IGlmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyIHdpdGggV2ViUlRDIHN1cHBvcnQsIHRoZSBzZXNzaW9uIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgdXNlIHRoZSBXZWJSVEMgdmVyc2lvbiBvZiB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSS4gT24gdGhlIHNlcnZlciBvciBpZiB5b3UgcGFzc1xuICogYHdlYnNvY2tldGAgYXMgdGhlIHRyYW5zcG9ydCBsYXllciwgdGhlIHNlc3Npb24gd2lsbCBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHVzaW5nIFdlYlNvY2tldHMuXG4gKlxuICogSW4gdGhlIGNhc2Ugb2YgV2ViUlRDLCBpbiB0aGUgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqXG4gKiBZb3UgY2FuIGFsc28gY3JlYXRlIGEgdHJhbnNwb3J0IGxheWVyIGluc3RhbmNlIHlvdXJzZWxmIGFuZCBwYXNzIGl0IGluIHRvIGhhdmUgbW9yZSBjb250cm9sIG92ZXJcbiAqIHRoZSBjb25maWd1cmF0aW9uIG9yIGV2ZW4gZXh0ZW5kIHRoZSBleGlzdGluZyBvbmVzLiBDaGVjayBvdXQgdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYFxuICogZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGNyZWF0ZSBhIGN1c3RvbSB0cmFuc3BvcnQgbGF5ZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBhZ2VudCA9IG5ldyBSZWFsdGltZUFnZW50KHtcbiAqICAgbmFtZTogJ215LWFnZW50JyxcbiAqICAgaW5zdHJ1Y3Rpb25zOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgY2FuIGFuc3dlciBxdWVzdGlvbnMgYW5kIGhlbHAgd2l0aCB0YXNrcy4nLFxuICogfSlcbiAqXG4gKiBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCk7XG4gKiBzZXNzaW9uLmNvbm5lY3Qoe1xuICogICBhcGlLZXk6ICd5b3VyLWFwaS1rZXknLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWx0aW1lU2Vzc2lvbiBleHRlbmRzIFJ1bnRpbWVFdmVudEVtaXR0ZXIge1xuICAgIGluaXRpYWxBZ2VudDtcbiAgICBvcHRpb25zO1xuICAgICN0cmFuc3BvcnQ7XG4gICAgI2N1cnJlbnRBZ2VudDtcbiAgICAjY3VycmVudFRvb2xzO1xuICAgICNjb250ZXh0O1xuICAgICNvdXRwdXRHdWFyZHJhaWxzID0gW107XG4gICAgI291dHB1dEd1YXJkcmFpbFNldHRpbmdzO1xuICAgICN0cmFuc2NyaWJlZFRleHREZWx0YXMgPSB7fTtcbiAgICAjaGlzdG9yeSA9IFtdO1xuICAgICNzaG91bGRJbmNsdWRlQXVkaW9EYXRhO1xuICAgICNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgI2F1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgIC8vIFRyYWNrcyBhbGwgTUNQIHRvb2xzIGZldGNoZWQgcGVyIHNlcnZlciBsYWJlbCAoZnJvbSBtY3BfbGlzdF90b29scyByZXN1bHRzKS5cbiAgICAjYWxsTWNwVG9vbHNCeVNlcnZlciA9IG5ldyBNYXAoKTtcbiAgICAvLyBUcmFja3MgY3VycmVudGx5IGF2YWlsYWJsZSBNQ1AgdG9vbHMgYmFzZWQgb24gdGhlIGFjdGl2ZSBhZ2VudCdzIGNvbmZpZ3VyZWQgc2VydmVyX2xhYmVscy5cbiAgICAjYXZhaWxhYmxlTWNwVG9vbHMgPSBbXTtcbiAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgbGFzdCBmdWxsIHNlc3Npb24gY29uZmlnIHdlIHNlbnQgKGNhbWVsQ2FzZSBrZXlzKSBzbyB0aGF0XG4gICAgLy8gc3Vic2VxdWVudCB1cGRhdGVzIChlLmcuIGR1cmluZyBhZ2VudCBoYW5kb2ZmcykgcHJlc2VydmUgcHJvcGVydGllcyB0aGF0IGFyZVxuICAgIC8vIG5vdCBleHBsaWNpdGx5IHJlY2FsY3VsYXRlZCBoZXJlIChzdWNoIGFzIGlucHV0QXVkaW9Gb3JtYXQsIG91dHB1dEF1ZGlvRm9ybWF0LFxuICAgIC8vIG1vZGFsaXRpZXMsIHNwZWVkLCB0b29sQ2hvaWNlLCB0dXJuRGV0ZWN0aW9uLCBldGMuKS4gV2l0aG91dCB0aGlzLCB1cGRhdGluZ1xuICAgIC8vIHRoZSBhZ2VudCB3b3VsZCBkcm9wIGF1ZGlvIGZvcm1hdCBvdmVycmlkZXMgKGUuZy4gZzcxMV91bGF3KSBhbmQgcmV2ZXJ0IHRvXG4gICAgLy8gdHJhbnNwb3J0IGRlZmF1bHRzIGNhdXNpbmcgaXNzdWVzIGZvciBpbnRlZ3JhdGlvbnMgbGlrZSBUd2lsaW8uXG4gICAgI2xhc3RTZXNzaW9uQ29uZmlnID0gY2xvbmVEZWZhdWx0U2Vzc2lvbkNvbmZpZygpO1xuICAgICNhdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzID0gdHJ1ZTtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsQWdlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCh0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnICYmIGhhc1dlYlJUQ1N1cHBvcnQoKSkgfHxcbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2VicnRjJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViUlRDKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJzb2NrZXQnIHx8XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy4jY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmNvbnRleHQgPz8ge30pLFxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy4jaGlzdG9yeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbHMgPSAob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA9IGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Mob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA/PyB7fSk7XG4gICAgICAgIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEgPSBvcHRpb25zLmhpc3RvcnlTdG9yZUF1ZGlvID8/IGZhbHNlO1xuICAgICAgICB0aGlzLiNhdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA/PyB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNwb3J0IGxheWVyIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHRyYW5zcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgaW4gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdXNhZ2Ugb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHVzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dC51c2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuIE1pZ2h0IGJlIGBudWxsYCBpZiB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3RcbiAgICAgKiBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQubXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jaGlzdG9yeTtcbiAgICB9XG4gICAgZ2V0IGF2YWlsYWJsZU1jcFRvb2xzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHM7XG4gICAgfVxuICAgIGFzeW5jICNzZXRDdXJyZW50QWdlbnQoYWdlbnQpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50ID0gYWdlbnQ7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZzID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2Zmcyh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgaGFuZG9mZlRvb2xzID0gaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiBoYW5kb2ZmLmdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpKTtcbiAgICAgICAgY29uc3QgYWxsVG9vbHMgPSAoYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHRoaXMuI2NvbnRleHQpKVxuICAgICAgICAgICAgLmZpbHRlcihpc1ZhbGlkUmVhbHRpbWVUb29sKVxuICAgICAgICAgICAgLm1hcCh0b1JlYWx0aW1lVG9vbERlZmluaXRpb24pO1xuICAgICAgICBjb25zdCBoYXNUb29sc0RlZmluZWQgPSB0eXBlb2YgdGhpcy4jY3VycmVudEFnZW50LnRvb2xzICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC5tY3BTZXJ2ZXJzICE9PSAndW5kZWZpbmVkJztcbiAgICAgICAgY29uc3QgaGFzSGFuZG9mZnNEZWZpbmVkID0gaGFuZG9mZnMubGVuZ3RoID4gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudFRvb2xzID1cbiAgICAgICAgICAgIGhhc1Rvb2xzRGVmaW5lZCB8fCBoYXNIYW5kb2Zmc0RlZmluZWRcbiAgICAgICAgICAgICAgICA/IFsuLi5hbGxUb29scywgLi4uaGFuZG9mZlRvb2xzXVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAvLyBSZWNvbXB1dGUgY3VycmVudGx5IGF2YWlsYWJsZSBNQ1AgdG9vbHMgYmFzZWQgb24gdGhlIG5ldyBhZ2VudCdzIGFjdGl2ZSBzZXJ2ZXIgbGFiZWxzLlxuICAgICAgICB0aGlzLiN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpO1xuICAgIH1cbiAgICBhc3luYyAjZ2V0U2Vzc2lvbkNvbmZpZyhhZGRpdGlvbmFsQ29uZmlnID0ge30pIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVzQ29uZmlnID0gYWRkaXRpb25hbENvbmZpZyA/PyB7fTtcbiAgICAgICAgY29uc3Qgb3B0aW9uc0NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgPz8ge307XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQodGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGdldEF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSA9IChjb25maWcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQ29uZmlnID0gY29uZmlnXG4gICAgICAgICAgICAgICAgLmF1ZGlvO1xuICAgICAgICAgICAgcmV0dXJuIGF1ZGlvQ29uZmlnPy5vdXRwdXQ/LnZvaWNlO1xuICAgICAgICB9O1xuICAgICAgICAvLyBSZWFsdGltZSBleHBlY3RzIHRyYWNpbmcgdG8gYmUgZXhwbGljaXRseSBudWxsIHRvIGRpc2FibGUgaXQ7IGxlYXZpbmcgdGhlIHByZXZpb3VzIGNvbmZpZ1xuICAgICAgICAvLyBpbiBwbGFjZSB3b3VsZCBvdGhlcndpc2UgY29udGludWUgZW1pdHRpbmcgc3BhbnMuXG4gICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgIC50cmFjaW5nRGlzYWJsZWRcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogJ2F1dG8nO1xuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJiB0cmFjaW5nQ29uZmlnICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcuZ3JvdXBfaWQgPSB0aGlzLm9wdGlvbnMuZ3JvdXBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcubWV0YWRhdGEgPSB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCB8fCB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0luIG9yZGVyIHRvIHNldCB0cmFjZU1ldGFkYXRhIG9yIGEgZ3JvdXBJZCB5b3UgbmVlZCB0byBzcGVjaWZ5IGEgd29ya2Zsb3dOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSA9IGdldEF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZShvdmVycmlkZXNDb25maWcpID8/XG4gICAgICAgICAgICBnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUob3B0aW9uc0NvbmZpZyk7XG4gICAgICAgIGNvbnN0IHRvcExldmVsVm9pY2VPdmVycmlkZSA9IG92ZXJyaWRlc0NvbmZpZy52b2ljZSA/PyBvcHRpb25zQ29uZmlnLnZvaWNlO1xuICAgICAgICBjb25zdCByZXNvbHZlZFZvaWNlID0gdHlwZW9mIGF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXVkaW9PdXRwdXRWb2ljZU92ZXJyaWRlXG4gICAgICAgICAgICA6IHR5cGVvZiB0b3BMZXZlbFZvaWNlT3ZlcnJpZGUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyB0b3BMZXZlbFZvaWNlT3ZlcnJpZGVcbiAgICAgICAgICAgICAgICA6IHRoaXMuI2N1cnJlbnRBZ2VudC52b2ljZTtcbiAgICAgICAgLy8gU3RhcnQgZnJvbSBhbnkgcHJldmlvdXNseS1zZW50IGNvbmZpZyAoc28gd2UgcHJlc2VydmUgdmFsdWVzIGxpa2UgYXVkaW8gZm9ybWF0cylcbiAgICAgICAgLy8gYW5kIHRoZSBvcmlnaW5hbCBvcHRpb25zLmNvbmZpZyBwcm92aWRlZCBieSB0aGUgdXNlci4gUHJlZmVyZW5jZSBvcmRlcjpcbiAgICAgICAgLy8gMS4gTGFzdCBzZXNzaW9uIGNvbmZpZyB3ZSBzZW50ICgjbGFzdFNlc3Npb25Db25maWcpXG4gICAgICAgIC8vIDIuIE9yaWdpbmFsIG9wdGlvbnMuY29uZmlnXG4gICAgICAgIC8vIDMuIEFkZGl0aW9uYWwgY29uZmlnIHBhc3NlZCBpbnRvIHRoaXMgaW52b2NhdGlvbiAoZXhwbGljaXQgb3ZlcnJpZGVzKVxuICAgICAgICAvLyBGaW5hbGx5IHdlIG92ZXJ3cml0ZSBkeW5hbWljIGZpZWxkcyAoaW5zdHJ1Y3Rpb25zLCB2b2ljZSwgbW9kZWwsIHRvb2xzLCB0cmFjaW5nKVxuICAgICAgICAvLyB0byBlbnN1cmUgdGhleSBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBhZ2VudCAmIHJ1bnRpbWUgc3RhdGUuXG4gICAgICAgIGNvbnN0IGJhc2UgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy4jbGFzdFNlc3Npb25Db25maWcgPz8ge30pLFxuICAgICAgICAgICAgLi4ub3B0aW9uc0NvbmZpZyxcbiAgICAgICAgICAgIC4uLm92ZXJyaWRlc0NvbmZpZyxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gTm90ZTogQ2VydGFpbiBmaWVsZHMgY2Fubm90IGJlIHVwZGF0ZWQgYWZ0ZXIgdGhlIHNlc3Npb24gYmVnaW5zLCBzdWNoIGFzIHZvaWNlIGFuZCBtb2RlbFxuICAgICAgICBjb25zdCBmdWxsQ29uZmlnID0ge1xuICAgICAgICAgICAgLi4uYmFzZSxcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIHZvaWNlOiByZXNvbHZlZFZvaWNlLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLiNjdXJyZW50VG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgcHJvbXB0OiB0eXBlb2YgdGhpcy4jY3VycmVudEFnZW50LnByb21wdCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LnByb21wdCh0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpXG4gICAgICAgICAgICAgICAgOiB0aGlzLiNjdXJyZW50QWdlbnQucHJvbXB0LFxuICAgICAgICB9O1xuICAgICAgICAvLyBVcGRhdGUgb3VyIGNhY2hlIHNvIHN1YnNlcXVlbnQgdXBkYXRlcyBpbmhlcml0IHRoZSBmdWxsIHNldCBpbmNsdWRpbmcgYW55XG4gICAgICAgIC8vIGR5bmFtaWMgZmllbGRzIHdlIGp1c3Qgb3Zlcndyb3RlLlxuICAgICAgICB0aGlzLiNsYXN0U2Vzc2lvbkNvbmZpZyA9IGZ1bGxDb25maWc7XG4gICAgICAgIHJldHVybiBmdWxsQ29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlIHRoZSBpbml0aWFsIHNlc3Npb24gY29uZmlnIHRoYXQgdGhlIGN1cnJlbnQgc2Vzc2lvbiB3aWxsIHVzZSB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1pcnJvcnMgdGhlIGNvbmZpZ3VyYXRpb24gcGF5bG9hZCB3ZSBzZW5kIGR1cmluZyBgY29ubmVjdGAsIGluY2x1ZGluZyBkeW5hbWljIHZhbHVlc1xuICAgICAqIHN1Y2ggYXMgdGhlIHVwc3RyZWFtIGFnZW50IGluc3RydWN0aW9ucywgdG9vbCBkZWZpbml0aW9ucywgYW5kIHByb21wdCBjb250ZW50IGdlbmVyYXRlZCBhdFxuICAgICAqIHJ1bnRpbWUuIEtlZXBpbmcgdGhpcyBoZWxwZXIgZXhwb3NlZCBhbGxvd3MgdHJhbnNwb3J0cyBvciBvcmNoZXN0cmF0aW9uIGxheWVycyB0byBwcmVjb21wdXRlXG4gICAgICogYSBDYWxsQWNjZXB0LWNvbXBhdGlibGUgcGF5bG9hZCB3aXRob3V0IG9wZW5pbmcgYSBzb2NrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBzZXNzaW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0SW5pdGlhbFNlc3Npb25Db25maWcob3ZlcnJpZGVzID0ge30pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2dldFNlc3Npb25Db25maWcoe1xuICAgICAgICAgICAgLi4uKHRoaXMub3B0aW9ucy5jb25maWcgPz8ge30pLFxuICAgICAgICAgICAgLi4uKG92ZXJyaWRlcyA/PyB7fSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBoZWxwZXIgdG8gY29tcHV0ZSB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZyB3aXRob3V0IG1hbnVhbGx5IGluc3RhbnRpYXRpbmcgYW5kIGNvbm5lY3RpbmcgYSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBwcmltYXJpbHkgdXNlZnVsIGZvciBpbnRlZ3JhdGlvbnMgdGhhdCBtdXN0IHByb3ZpZGUgdGhlIHNlc3Npb24gY29uZmlndXJhdGlvbiB0byBhXG4gICAgICogdGhpcmQgcGFydHkgKGZvciBleGFtcGxlIHRoZSBTSVAgYGNhbGxzLmFjY2VwdGAgZW5kcG9pbnQpIGJlZm9yZSB0aGUgYWN0dWFsIHJlYWx0aW1lIHNlc3Npb25cbiAgICAgKiBpcyBhdHRhY2hlZC4gVGhlIGhlbHBlciBpbnN0YW50aWF0ZXMgYSB0aHJvd2F3YXkgc2Vzc2lvbiBzbyBhbGwgYWdlbnQtZHJpdmVuIGR5bmFtaWMgZmllbGRzXG4gICAgICogcmVzb2x2ZSBpbiBleGFjdGx5IHRoZSBzYW1lIHdheSBhcyB0aGUgbGl2ZSBzZXNzaW9uIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWdlbnQgLSBUaGUgc3RhcnRpbmcgYWdlbnQgZm9yIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2Vzc2lvbiBvcHRpb25zIHVzZWQgdG8gc2VlZCB0aGUgY29uZmlnIGNhbGN1bGF0aW9uLlxuICAgICAqIEBwYXJhbSBvdmVycmlkZXMgLSBBZGRpdGlvbmFsIGNvbmZpZyBvdmVycmlkZXMgYXBwbGllZCBvbiB0b3Agb2YgdGhlIHByb3ZpZGVkIG9wdGlvbnMuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGNvbXB1dGVJbml0aWFsU2Vzc2lvbkNvbmZpZyhhZ2VudCwgb3B0aW9ucyA9IHt9LCBvdmVycmlkZXMgPSB7fSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCwgb3B0aW9ucyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgc2Vzc2lvbi5nZXRJbml0aWFsU2Vzc2lvbkNvbmZpZyhvdmVycmlkZXMpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgc2Vzc2lvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUFnZW50KG5ld0FnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgaGFuZG9mZikge1xuICAgICAgICBjb25zdCBuZXdBZ2VudCA9IChhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZih0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMpKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICAvLyB1cGRhdGUgc2Vzc2lvbiB3aXRoIG5ldyBhZ2VudFxuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBnZXRUcmFuc2Zlck1lc3NhZ2UobmV3QWdlbnQpO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgdG9vbCkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sLm5lZWRzQXBwcm92YWwodGhpcy4jY29udGV4dCwgcGFyc2VkQXJncywgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gdGhpcy5jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCByZXN1bHQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHJlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCByZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFwcHJvdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbCxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgdGhpcy4jY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbC5pbnZva2UodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBzdHJpbmdSZXN1bHQ7XG4gICAgICAgIGlmIChpc0JhY2tncm91bmRSZXN1bHQocmVzdWx0KSkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgZ2VuZXJhdGUgYSBuZXcgcmVzcG9uc2UsIGp1c3Qgc2VuZCB0aGUgcmVzdWx0XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdC5jb250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25DYWxsKHRvb2xDYWxsKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRIYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKGVuYWJsZWRIYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IFtoYW5kb2ZmLnRvb2xOYW1lLCBoYW5kb2ZmXSkpO1xuICAgICAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sTWFwID0gbmV3IE1hcChhbGxUb29scy5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlSGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICBpZiAocG9zc2libGVIYW5kb2ZmKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBwb3NzaWJsZUhhbmRvZmYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sID0gZnVuY3Rpb25Ub29sTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgICAgIGlmIChmdW5jdGlvblRvb2wgJiYgZnVuY3Rpb25Ub29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCBmdW5jdGlvblRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xDYWxsLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNydW5PdXRwdXRHdWFyZHJhaWxzKG91dHB1dCwgcmVzcG9uc2VJZCwgaXRlbUlkKSB7XG4gICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLm1hcCgoZ3VhcmRyYWlsKSA9PiBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpKSk7XG4gICAgICAgIGNvbnN0IGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQgPSByZXN1bHRzLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgIGlmIChmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVuc3VyZXMgdGhhdCBpZiBvbmUgZ3VhcmRyYWlsIGFscmVhZHkgdHJpcHMgYW5kIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGFub3RoZXJcbiAgICAgICAgICAgIC8vIGd1YXJkcmFpbCBydW4sIHdlIGRvbid0IHRyaXAgYWdhaW5cbiAgICAgICAgICAgIGlmICh0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2d1YXJkcmFpbF90cmlwcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBlcnJvciwge1xuICAgICAgICAgICAgICAgIGl0ZW1JZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrVGV4dCA9IGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShmZWVkYmFja1RleHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgICNzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCcqJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9ldmVudCcsIGV2ZW50KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZWQgdXNlciB0cmFuc2NyaXB0aW9uIGV2ZW50c1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRFdmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGNvbXBsZXRlZEV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdtY3BfdG9vbHNfbGlzdGVkJywgKHsgc2VydmVyTGFiZWwsIHRvb2xzIH0pID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYWxsTWNwVG9vbHNCeVNlcnZlci5zZXQoc2VydmVyTGFiZWwsIHRvb2xzID8/IFtdKTtcbiAgICAgICAgICAgICAgICB0aGlzLiN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBlcnIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuI2F1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX3N0YXJ0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9kb25lJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZXZlbnQucmVzcG9uc2Uub3V0cHV0W2V2ZW50LnJlc3BvbnNlLm91dHB1dC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHRPdXRwdXQgPSBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkgPz8gJyc7XG4gICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBpdGVtPy5pZCA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHModGV4dE91dHB1dCwgZXZlbnQucmVzcG9uc2UuaWQsIGl0ZW1JZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX2RvbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0b3BwZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgIGxldCBsYXN0SXRlbUlkO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX3RyYW5zY3JpcHRfZGVsdGEnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBldmVudC5kZWx0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBldmVudC5pdGVtSWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VJZCA9IGV2ZW50LnJlc3BvbnNlSWQ7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJdGVtSWQgIT09IGl0ZW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbUlkID0gaXRlbUlkO1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGV4dCA9IHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSBjdXJyZW50VGV4dCArIGRlbHRhO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID0gbmV3VGV4dDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1J1bkluZGV4ID0gTWF0aC5mbG9vcihuZXdUZXh0Lmxlbmd0aCAvIHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1J1bkluZGV4ID4gbGFzdFJ1bkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IG5ld1J1bkluZGV4O1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBjYW5jZWwgZXhpc3RpbmcgcnVucyBiZWNhdXNlIHdlIHdhbnQgdGhlIGZpcnN0IG9uZSB0byBmYWlsIHRvIGZhaWxcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRyYW5zcG9ydCBsYXllciBzaG91bGQgdXBvbiBmYWlsdXJlIGhhbmRsZSB0aGUgaW50ZXJydXB0aW9uIGFuZCBzdG9wIHRoZSBtb2RlbFxuICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIGdlbmVyYXRpbmcgZnVydGhlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKG5ld1RleHQsIHJlc3BvbnNlSWQsIGl0ZW1JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2l0ZW1fdXBkYXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gIXRoaXMuI2hpc3Rvcnkuc29tZSgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBldmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZEl0ZW0gPSB0aGlzLiNoaXN0b3J5LmZpbmQoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfYWRkZWQnLCBhZGRlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV9kZWxldGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB0aGlzLiNoaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pdGVtSWQgIT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZnVuY3Rpb25fY2FsbCcsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvbkNhbGwoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBoYW5kbGluZyBmdW5jdGlvbiBjYWxsJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd1c2FnZV91cGRhdGUnLCAodXNhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbnRleHQudXNhZ2UuYWRkKHVzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9faW50ZXJydXB0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgKHRvb2xDYWxsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sQ2FsbCk7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignbWNwX2FwcHJvdmFsX3JlcXVlc3QnLCAoYXBwcm92YWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbEl0ZW06IHJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0odGhpcy4jY3VycmVudEFnZW50LCBhcHByb3ZhbFJlcXVlc3QpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGVzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIE1DUCB0b29scyBiYXNlZCBvbiB0aGUgY3VycmVudCBhZ2VudCdzIGFjdGl2ZVxuICAgICAqIE1DUCBzZXJ2ZXIgY29uZmlndXJhdGlvbnMgYW5kIHRoZSBjYWNoZWQgcGVyLXNlcnZlciB0b29sIGxpc3RpbmdzLiBFbWl0c1xuICAgICAqIGBtY3BfdG9vbHNfY2hhbmdlZGAgaWYgdGhlIHNldCBjaGFuZ2VkLlxuICAgICAqL1xuICAgICN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgLy8gQ29sbGVjdCBhY3RpdmUgTUNQIHNlcnZlciBsYWJlbHMgYW5kIG9wdGlvbmFsIGFsbG93ZWQgZmlsdGVycyBmcm9tIHRoZSBjdXJyZW50IGFnZW50XG4gICAgICAgIGNvbnN0IGFjdGl2ZU1jcENvbmZpZ3MgPSB0aGlzLiNjdXJyZW50VG9vbHM/LmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnbWNwJyk7XG4gICAgICAgIGNvbnN0IGFsbG93ZWRGcm9tQ29uZmlnID0gKGNmZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGNmZy5hbGxvd2VkX3Rvb2xzO1xuICAgICAgICAgICAgaWYgKCFhbGxvd2VkKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGxvd2VkKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsb3dlZDtcbiAgICAgICAgICAgIGlmIChhbGxvd2VkICYmIEFycmF5LmlzQXJyYXkoYWxsb3dlZC50b29sX25hbWVzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsb3dlZC50b29sX25hbWVzO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGVkdXBCeU5hbWUgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2ZnIG9mIGFjdGl2ZU1jcENvbmZpZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xzID0gdGhpcy4jYWxsTWNwVG9vbHNCeVNlcnZlci5nZXQoY2ZnLnNlcnZlcl9sYWJlbCkgPz8gW107XG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZEZyb21Db25maWcoY2ZnKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scykge1xuICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkICYmICFhbGxvd2VkLmluY2x1ZGVzKHRvb2wubmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmICghZGVkdXBCeU5hbWUuaGFzKHRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVkdXBCeU5hbWUuc2V0KHRvb2wubmFtZSwgdG9vbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHQgPSBBcnJheS5mcm9tKGRlZHVwQnlOYW1lLnZhbHVlcygpKTtcbiAgICAgICAgY29uc3QgcHJldiA9IHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gcHJldi5sZW5ndGggIT09IG5leHQubGVuZ3RoIHx8XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcmV2Lm1hcCgodCkgPT4gdC5uYW1lKS5zb3J0KCkpICE9PVxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG5leHQubWFwKCh0KSA9PiB0Lm5hbWUpLnNvcnQoKSk7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLiNhdmFpbGFibGVNY3BUb29scyA9IG5leHQ7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sc19jaGFuZ2VkJywgdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICBjYWxsSWQ6IG9wdGlvbnMuY2FsbElkLFxuICAgICAgICAgICAgaW5pdGlhbFNlc3Npb25Db25maWc6IGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcodGhpcy5vcHRpb25zLmNvbmZpZyksXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBFbnN1cmUgdGhlIGNhY2hlZCBsYXN0U2Vzc2lvbkNvbmZpZyBpbmNsdWRlcyBldmVyeXRoaW5nIHBhc3NlZCBhcyB0aGUgaW5pdGlhbCBzZXNzaW9uIGNvbmZpZ1xuICAgICAgICAvLyAodGhlIGNhbGwgYWJvdmUgYWxyZWFkeSBzZXQgaXQgdmlhICNnZXRTZXNzaW9uQ29uZmlnIGJ1dCBpbiBjYXNlIGFkZGl0aW9uYWwgb3ZlcnJpZGVzIHdlcmVcbiAgICAgICAgLy8gcGFzc2VkIGRpcmVjdGx5IGhlcmUgaW4gdGhlIGZ1dHVyZSB3ZSBjb3VsZCBtZXJnZSB0aGVtKS4gRm9yIG5vdyBpdCdzIGEgbm8tb3AuXG4gICAgICAgIHRoaXMuI2hpc3RvcnkgPSBbXTtcbiAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5IHRvIHNldC5cbiAgICAgKi9cbiAgICB1cGRhdGVIaXN0b3J5KG5ld0hpc3RvcnkpIHtcbiAgICAgICAgbGV0IHVwZGF0ZWRIaXN0b3J5O1xuICAgICAgICBpZiAodHlwZW9mIG5ld0hpc3RvcnkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeSh0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZWRIaXN0b3J5ID0gbmV3SGlzdG9yeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiN0cmFuc3BvcnQucmVzZXRIaXN0b3J5KHRoaXMuI2hpc3RvcnksIHVwZGF0ZWRIaXN0b3J5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvdGhlckV2ZW50RGF0YSAtIEFkZGl0aW9uYWwgZXZlbnQgZGF0YSB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNZXNzYWdlKG1lc3NhZ2UsIG90aGVyRXZlbnREYXRhKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGltYWdlIHRvIHRoZSBzZXNzaW9uXG4gICAgICogQHBhcmFtIGltYWdlIC0gVGhlIGltYWdlIHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuYWRkSW1hZ2UoaW1hZ2UsIHsgdHJpZ2dlclJlc3BvbnNlIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5tdXRlKG11dGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCBmcm9tIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGF1ZGlvIHRvIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmNvbW1pdCAtIFdoZXRoZXIgdG8gZmluaXNoIHRoZSB0dXJuIHdpdGggdGhpcyBhdWRpby5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBzZXNzaW9uIGFydGlmaWNpYWxseSBmb3IgZXhhbXBsZSBpZiB5b3Ugd2FudCB0byBidWlsZCBhIFwic3RvcCB0YWxraW5nXCJcbiAgICAgKiBidXR0b24uXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuaW50ZXJydXB0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzQXBwcm92ZSAtIFdoZXRoZXIgdG8gYWx3YXlzIGFwcHJvdmUgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHRvb2xOYW1lID0gYXBwcm92YWxJdGVtLnRvb2xOYW1lID8/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGNvbnN0IHRvb2wgPSB0aGlzLiNjdXJyZW50QWdlbnQudG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC5uYW1lID09PSB0b29sTmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Fsd2F5cyBhcHByb3ZpbmcgTUNQIHRvb2xzIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSB0aGUgYWxsb3dlZCB0b29scyBjb25maWd1cmF0aW9uIGluc3RlYWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtY3BBcHByb3ZhbFJlcXVlc3QgPSBhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1jcFJlc3BvbnNlKG1jcEFwcHJvdmFsUmVxdWVzdCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbE5hbWUgPz8gJ3Vua25vd24nfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3QgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbHdheXNSZWplY3QgLSBXaGV0aGVyIHRvIGFsd2F5cyByZWplY3QgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIHdlIHN0aWxsIG5lZWQgdG8gc2ltdWxhdGUgYSB0b29sIGNhbGwgdG8gdGhlIGFnZW50IHRvIGxldCB0aGUgYWdlbnQga25vd1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS50b29sTmFtZSA/PyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gdG9vbE5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWx3YXlzUmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Fsd2F5cyByZWplY3RpbmcgTUNQIHRvb2xzIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSB0aGUgYWxsb3dlZCB0b29scyBjb25maWd1cmF0aW9uIGluc3RlYWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtY3BBcHByb3ZhbFJlcXVlc3QgPSBhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1jcFJlc3BvbnNlKG1jcEFwcHJvdmFsUmVxdWVzdCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xOYW1lID8/ICd1bmtub3duJ30gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZVNlc3Npb24ubWpzLm1hcCIsImltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5pbXBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCBjb25uZWN0cyB0byBhbiBleGlzdGluZyBTSVAtaW5pdGlhdGVkIFJlYWx0aW1lIGNhbGwgdmlhIGNhbGwgSUQuXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVNJUCBleHRlbmRzIE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkIHRoZSBpbml0aWFsIHNlc3Npb24gcGF5bG9hZCBmb3IgYSBTSVAtYXR0YWNoZWQgc2Vzc2lvbiwgbWF0Y2hpbmcgdGhlIGNvbmZpZyB0aGF0IGEgUmVhbHRpbWVTZXNzaW9uIHdvdWxkIHNlbmQgb24gY29ubmVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgZW5hYmxlcyBTSVAgZGVwbG95bWVudHMgdG8gYWNjZXB0IGFuIGluY29taW5nIGNhbGwgd2l0aCBhIHBheWxvYWQgdGhhdCBhbHJlYWR5IHJlZmxlY3RzXG4gICAgICogdGhlIGFjdGl2ZSBhZ2VudCdzIGluc3RydWN0aW9ucywgdG9vbHMsIHByb21wdCwgYW5kIHRyYWNpbmcgbWV0YWRhdGEgd2l0aG91dCBkdXBsaWNhdGluZyB0aGVcbiAgICAgKiBzZXNzaW9uIGxvZ2ljIG91dHNpZGUgb2YgdGhlIFNESy4gVGhlIHJldHVybmVkIG9iamVjdCBzdHJ1Y3R1cmFsbHkgbWF0Y2hlcyB0aGUgUkVTVFxuICAgICAqIGBDYWxsQWNjZXB0UGFyYW1zYCBpbnRlcmZhY2UsIHNvIGl0IGNhbiBiZSBmb3J3YXJkZWQgZGlyZWN0bHkgdG9cbiAgICAgKiBgb3BlbmFpLnJlYWx0aW1lLmNhbGxzLmFjY2VwdCguLi4pYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhZ2VudCAtIFRoZSBzdGFydGluZyBhZ2VudCB1c2VkIHRvIHNlZWQgdGhlIHNlc3Npb24gaW5zdHJ1Y3Rpb25zLCB0b29scywgYW5kIHByb21wdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNlc3Npb24gb3B0aW9ucyB0aGF0IG1pcnJvciB0aGUgb25lcyBwYXNzZWQgdG8gdGhlIFJlYWx0aW1lU2Vzc2lvbiBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0gb3ZlcnJpZGVzIC0gQWRkaXRpb25hbCBjb25maWcgb3ZlcnJpZGVzIGFwcGxpZWQgb24gdG9wIG9mIHRoZSBzZXNzaW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGJ1aWxkSW5pdGlhbENvbmZpZyhhZ2VudCwgb3B0aW9ucyA9IHt9LCBvdmVycmlkZXMgPSB7fSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uQ29uZmlnID0gYXdhaXQgUmVhbHRpbWVTZXNzaW9uLmNvbXB1dGVJbml0aWFsU2Vzc2lvbkNvbmZpZyhhZ2VudCwgb3B0aW9ucywgb3ZlcnJpZGVzKTtcbiAgICAgICAgY29uc3QgdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lU0lQKCk7XG4gICAgICAgIHJldHVybiB0cmFuc3BvcnQuYnVpbGRTZXNzaW9uUGF5bG9hZChzZXNzaW9uQ29uZmlnKTtcbiAgICB9XG4gICAgc2VuZEF1ZGlvKF9hdWRpbywgX29wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBTSVAgaW50ZWdyYXRpb25zIHN0cmVhbSBhdWRpbyB0byBPcGVuQUkgZGlyZWN0bHkgdGhyb3VnaCB0aGUgdGVsZXBob255IHByb3ZpZGVyLCBzbyB0aGVcbiAgICAgICAgLy8gdHJhbnNwb3J0IGRlbGliZXJhdGVseSBwcmV2ZW50cyB1c2VybGFuZCBjb2RlIGZyb20gc2VuZGluZyBkdXBsaWNhdGUgYnVmZmVycy5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUlSZWFsdGltZVNJUCBkb2VzIG5vdCBzdXBwb3J0IHNlbmRpbmcgYXVkaW8gYnVmZmVyczsgYXVkaW8gaXMgaGFuZGxlZCBieSB0aGUgU0lQIGNhbGwuJyk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMuY2FsbElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdPcGVuQUlSZWFsdGltZVNJUCByZXF1aXJlcyBgY2FsbElkYCBpbiB0aGUgY29ubmVjdCBvcHRpb25zLicpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHN1cGVyLmNvbm5lY3Qob3B0aW9ucyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVTaXAubWpzLm1hcCIsImltcG9ydCAqIGFzIHV0aWxJbXBvcnQgZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZUFnZW50IH0gZnJvbSBcIi4vcmVhbHRpbWVBZ2VudC5tanNcIjtcbmV4cG9ydCB7IFJlYWx0aW1lU2Vzc2lvbiwgfSBmcm9tIFwiLi9yZWFsdGltZVNlc3Npb24ubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlJUQywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0LCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVTSVAgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVNpcC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBiYXNlNjRUb0FycmF5QnVmZmVyOiB1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIsXG4gICAgYXJyYXlCdWZmZXJUb0Jhc2U2NDogdXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0LFxuICAgIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZTogdXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsXG59O1xuZXhwb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgdG9vbCwgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IHsgYmFja2dyb3VuZFJlc3VsdCwgaXNCYWNrZ3JvdW5kUmVzdWx0IH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOlsiTUVUQURBVEEiLCJzYWZlRXhlY3V0ZSIsImZuIiwiZXJyb3IiLCJnZXRFbnVtVmFsdWVzIiwiZW50cmllcyIsIm51bWVyaWNWYWx1ZXMiLCJ2IiwiayIsIl8iLCIkWm9kUmVnaXN0cnkiLCJzY2hlbWEiLCJfbWV0YSIsIm1ldGEiLCJwIiwicG0iLCJyZWdpc3RyeSIsImdsb2JhbFJlZ2lzdHJ5IiwiSlNPTlNjaGVtYUdlbmVyYXRvciIsInBhcmFtcyIsIl9wYXJhbXMiLCJfYSIsImRlZiIsImZvcm1hdE1hcCIsInNlZW4iLCJyZXN1bHQiLCJvdmVycmlkZVNjaGVtYSIsIl9iIiwicGFyZW50IiwiX2pzb24iLCJqc29uIiwibWluaW11bSIsIm1heGltdW0iLCJmb3JtYXQiLCJwYXR0ZXJucyIsImNvbnRlbnRFbmNvZGluZyIsInJlZ2V4ZXMiLCJyZWdleCIsIm11bHRpcGxlT2YiLCJleGNsdXNpdmVNYXhpbXVtIiwiZXhjbHVzaXZlTWluaW11bSIsInNoYXBlIiwia2V5IiwiYWxsS2V5cyIsInJlcXVpcmVkS2V5cyIsIl9jIiwieCIsImkiLCJhIiwiYiIsImlzU2ltcGxlSW50ZXJzZWN0aW9uIiwidmFsIiwiYWxsT2YiLCJwcmVmaXhJdGVtcyIsInJlc3QiLCJ2YWx1ZXMiLCJ2YWxzIiwiZmlsZSIsIm1pbWUiLCJtIiwiaW5uZXIiLCJjYXRjaFZhbHVlIiwicGF0dGVybiIsImlubmVyVHlwZSIsImlzVHJhbnNmb3JtaW5nIiwicm9vdCIsIm1ha2VVUkkiLCJlbnRyeSIsImRlZnNTZWdtZW50IiwiZXh0ZXJuYWxJZCIsInVyaUdlbmVyYXRvciIsImlkIiwiZGVmVXJpUHJlZml4IiwiZGVmSWQiLCJleHRyYWN0VG9EZWYiLCJyZWYiLCJleHQiLCJmbGF0dGVuUmVmIiwiem9kU2NoZW1hIiwiX2NhY2hlZCIsInJlZlNjaGVtYSIsIl9kIiwiX2UiLCJkZWZzIiwiX2YiLCJ0b0pTT05TY2hlbWEiLCJpbnB1dCIsImdlbiIsInNjaGVtYXMiLCJleHRlcm5hbCIsIl9zY2hlbWEiLCJfY3R4IiwiY3R4Iiwib3B0aW9uIiwiaXRlbSIsIm1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0IiwicmVzcG9uc2VfZm9ybWF0IiwicGFyc2VyIiwib2JqIiwiaWdub3JlT3ZlcnJpZGUiLCJkZWZhdWx0T3B0aW9ucyIsImdldERlZmF1bHRPcHRpb25zIiwib3B0aW9ucyIsInpvZERlZiIsImlzRW1wdHlPYmoiLCJfayIsImdldFJlZnMiLCJfb3B0aW9ucyIsImN1cnJlbnRQYXRoIiwibmFtZSIsImFkZEVycm9yTWVzc2FnZSIsInJlcyIsImVycm9yTWVzc2FnZSIsInJlZnMiLCJzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIiwidmFsdWUiLCJ1dGlsIiwiYXNzZXJ0SXMiLCJfYXJnIiwiYXNzZXJ0TmV2ZXIiLCJfeCIsIml0ZW1zIiwidmFsaWRLZXlzIiwiZmlsdGVyZWQiLCJlIiwib2JqZWN0Iiwia2V5cyIsImFyciIsImNoZWNrZXIiLCJqb2luVmFsdWVzIiwiYXJyYXkiLCJzZXBhcmF0b3IiLCJvYmplY3RVdGlsIiwiZmlyc3QiLCJzZWNvbmQiLCJab2RQYXJzZWRUeXBlIiwiZ2V0UGFyc2VkVHlwZSIsImRhdGEiLCJab2RJc3N1ZUNvZGUiLCJab2RFcnJvciIsImlzc3VlcyIsInN1YiIsInN1YnMiLCJhY3R1YWxQcm90byIsIl9tYXBwZXIiLCJtYXBwZXIiLCJpc3N1ZSIsImZpZWxkRXJyb3JzIiwicHJvY2Vzc0Vycm9yIiwiY3VyciIsImVsIiwiZm9ybUVycm9ycyIsImZpcnN0RWwiLCJlcnJvck1hcCIsIm1lc3NhZ2UiLCJvdmVycmlkZUVycm9yTWFwIiwiZGVmYXVsdEVycm9yTWFwIiwiZ2V0RXJyb3JNYXAiLCJtYWtlSXNzdWUiLCJwYXRoIiwiZXJyb3JNYXBzIiwiaXNzdWVEYXRhIiwiZnVsbFBhdGgiLCJmdWxsSXNzdWUiLCJtYXBzIiwibWFwIiwiYWRkSXNzdWVUb0NvbnRleHQiLCJvdmVycmlkZU1hcCIsIlBhcnNlU3RhdHVzIiwic3RhdHVzIiwicmVzdWx0cyIsImFycmF5VmFsdWUiLCJJTlZBTElEIiwicGFpcnMiLCJzeW5jUGFpcnMiLCJwYWlyIiwiZmluYWxPYmplY3QiLCJESVJUWSIsIk9LIiwiaXNBYm9ydGVkIiwiaXNEaXJ0eSIsImlzVmFsaWQiLCJpc0FzeW5jIiwiZXJyb3JVdGlsIiwiUGFyc2VJbnB1dExhenlQYXRoIiwiaGFuZGxlUmVzdWx0IiwicHJvY2Vzc0NyZWF0ZVBhcmFtcyIsImludmFsaWRfdHlwZV9lcnJvciIsInJlcXVpcmVkX2Vycm9yIiwiZGVzY3JpcHRpb24iLCJpc3MiLCJab2RUeXBlIiwiZXJyIiwibWF5YmVBc3luY1Jlc3VsdCIsImNoZWNrIiwiZ2V0SXNzdWVQcm9wZXJ0aWVzIiwic2V0RXJyb3IiLCJyZWZpbmVtZW50RGF0YSIsInJlZmluZW1lbnQiLCJab2RFZmZlY3RzIiwiWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIiwiWm9kT3B0aW9uYWwiLCJab2ROdWxsYWJsZSIsIlpvZEFycmF5IiwiWm9kUHJvbWlzZSIsIlpvZFVuaW9uIiwiaW5jb21pbmciLCJab2RJbnRlcnNlY3Rpb24iLCJ0cmFuc2Zvcm0iLCJkZWZhdWx0VmFsdWVGdW5jIiwiWm9kRGVmYXVsdCIsIlpvZEJyYW5kZWQiLCJjYXRjaFZhbHVlRnVuYyIsIlpvZENhdGNoIiwiVGhpcyIsInRhcmdldCIsIlpvZFBpcGVsaW5lIiwiWm9kUmVhZG9ubHkiLCJjdWlkUmVnZXgiLCJjdWlkMlJlZ2V4IiwidWxpZFJlZ2V4IiwidXVpZFJlZ2V4IiwibmFub2lkUmVnZXgiLCJqd3RSZWdleCIsImR1cmF0aW9uUmVnZXgiLCJlbWFpbFJlZ2V4IiwiX2Vtb2ppUmVnZXgiLCJlbW9qaVJlZ2V4IiwiaXB2NFJlZ2V4IiwiaXB2NENpZHJSZWdleCIsImlwdjZSZWdleCIsImlwdjZDaWRyUmVnZXgiLCJiYXNlNjRSZWdleCIsImJhc2U2NHVybFJlZ2V4IiwiZGF0ZVJlZ2V4U291cmNlIiwiZGF0ZVJlZ2V4IiwidGltZVJlZ2V4U291cmNlIiwiYXJncyIsInNlY29uZHNSZWdleFNvdXJjZSIsInNlY29uZHNRdWFudGlmaWVyIiwidGltZVJlZ2V4IiwiZGF0ZXRpbWVSZWdleCIsIm9wdHMiLCJpc1ZhbGlkSVAiLCJpcCIsInZlcnNpb24iLCJpc1ZhbGlkSldUIiwiand0IiwiYWxnIiwiaGVhZGVyIiwiYmFzZTY0IiwiZGVjb2RlZCIsImlzVmFsaWRDaWRyIiwiWm9kU3RyaW5nIiwidG9vQmlnIiwidG9vU21hbGwiLCJ2YWxpZGF0aW9uIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwibGVuIiwiY2giLCJtaW4iLCJtYXgiLCJmbG9hdFNhZmVSZW1haW5kZXIiLCJzdGVwIiwidmFsRGVjQ291bnQiLCJzdGVwRGVjQ291bnQiLCJkZWNDb3VudCIsInZhbEludCIsInN0ZXBJbnQiLCJab2ROdW1iZXIiLCJraW5kIiwiaW5jbHVzaXZlIiwiWm9kQmlnSW50IiwiWm9kQm9vbGVhbiIsIlpvZERhdGUiLCJtaW5EYXRlIiwibWF4RGF0ZSIsIlpvZFN5bWJvbCIsIlpvZFVuZGVmaW5lZCIsIlpvZE51bGwiLCJab2RBbnkiLCJab2RVbmtub3duIiwiWm9kTmV2ZXIiLCJab2RWb2lkIiwiZGVlcFBhcnRpYWxpZnkiLCJab2RPYmplY3QiLCJuZXdTaGFwZSIsImZpZWxkU2NoZW1hIiwiWm9kVHVwbGUiLCJzaGFwZUtleXMiLCJleHRyYUtleXMiLCJrZXlWYWxpZGF0b3IiLCJ1bmtub3duS2V5cyIsImNhdGNoYWxsIiwiZGVmYXVsdEVycm9yIiwiYXVnbWVudGF0aW9uIiwibWVyZ2luZyIsImluZGV4IiwibWFzayIsIm5ld0ZpZWxkIiwiY3JlYXRlWm9kRW51bSIsImhhbmRsZVJlc3VsdHMiLCJ1bmlvbkVycm9ycyIsImNoaWxkQ3R4IiwiZGlydHkiLCJ0eXBlcyIsImdldERpc2NyaW1pbmF0b3IiLCJ0eXBlIiwiWm9kTGF6eSIsIlpvZExpdGVyYWwiLCJab2RFbnVtIiwiWm9kTmF0aXZlRW51bSIsIlpvZERpc2NyaW1pbmF0ZWRVbmlvbiIsImRpc2NyaW1pbmF0b3IiLCJkaXNjcmltaW5hdG9yVmFsdWUiLCJvcHRpb25zTWFwIiwiZGlzY3JpbWluYXRvclZhbHVlcyIsIm1lcmdlVmFsdWVzIiwiYVR5cGUiLCJiVHlwZSIsImJLZXlzIiwic2hhcmVkS2V5cyIsIm5ld09iaiIsInNoYXJlZFZhbHVlIiwibmV3QXJyYXkiLCJpdGVtQSIsIml0ZW1CIiwiaGFuZGxlUGFyc2VkIiwicGFyc2VkTGVmdCIsInBhcnNlZFJpZ2h0IiwibWVyZ2VkIiwibGVmdCIsInJpZ2h0IiwiaXRlbUluZGV4IiwiWm9kUmVjb3JkIiwia2V5VHlwZSIsInZhbHVlVHlwZSIsInRoaXJkIiwiWm9kTWFwIiwiZmluYWxNYXAiLCJab2RTZXQiLCJmaW5hbGl6ZVNldCIsImVsZW1lbnRzIiwicGFyc2VkU2V0IiwiZWxlbWVudCIsIm1pblNpemUiLCJtYXhTaXplIiwic2l6ZSIsImdldHRlciIsImV4cGVjdGVkVmFsdWVzIiwiZW51bVZhbHVlcyIsIm5ld0RlZiIsIm9wdCIsIm5hdGl2ZUVudW1WYWx1ZXMiLCJwcm9taXNpZmllZCIsImVmZmVjdCIsImNoZWNrQ3R4IiwiYXJnIiwicHJvY2Vzc2VkIiwiZXhlY3V0ZVJlZmluZW1lbnQiLCJhY2MiLCJiYXNlIiwicHJlcHJvY2VzcyIsIm5ld0N0eCIsIlpvZE5hTiIsImluUmVzdWx0IiwiZnJlZXplIiwiY2xlYW5QYXJhbXMiLCJjdXN0b20iLCJmYXRhbCIsInIiLCJfZmF0YWwiLCJpbnN0YW5jZU9mVHlwZSIsImNscyIsInN0cmluZ1R5cGUiLCJudW1iZXJUeXBlIiwiYm9vbGVhblR5cGUiLCJhbnlUeXBlIiwiYXJyYXlUeXBlIiwib2JqZWN0VHlwZSIsInVuaW9uVHlwZSIsImRpc2NyaW1pbmF0ZWRVbmlvblR5cGUiLCJyZWNvcmRUeXBlIiwibGF6eVR5cGUiLCJsaXRlcmFsVHlwZSIsImVudW1UeXBlIiwicGFyc2VBbnlEZWYiLCJwYXJzZUFycmF5RGVmIiwicGFyc2VEZWYiLCJwYXJzZUJpZ2ludERlZiIsInBhcnNlQm9vbGVhbkRlZiIsInBhcnNlQnJhbmRlZERlZiIsIl9kZWYiLCJwYXJzZUNhdGNoRGVmIiwicGFyc2VEYXRlRGVmIiwib3ZlcnJpZGVEYXRlU3RyYXRlZ3kiLCJzdHJhdGVneSIsImludGVnZXJEYXRlUGFyc2VyIiwicGFyc2VEZWZhdWx0RGVmIiwicGFyc2VFZmZlY3RzRGVmIiwiZm9yY2VSZXNvbHV0aW9uIiwicGFyc2VFbnVtRGVmIiwiaXNKc29uU2NoZW1hN0FsbE9mVHlwZSIsInBhcnNlSW50ZXJzZWN0aW9uRGVmIiwidW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIiwibWVyZ2VkQWxsT2YiLCJuZXN0ZWRTY2hlbWEiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlTGl0ZXJhbERlZiIsInBhcnNlZFR5cGUiLCJ6b2RQYXR0ZXJucyIsInBhcnNlU3RyaW5nRGVmIiwicHJvY2Vzc1BhdHRlcm4iLCJlc2NhcGVOb25BbHBoYU51bWVyaWMiLCJhZGRGb3JtYXQiLCJhZGRQYXR0ZXJuIiwiYyIsInByb2Nlc3NSZWdFeHAiLCJyZWdleE9yRnVuY3Rpb24iLCJmbGFncyIsInNvdXJjZSIsImlzRXNjYXBlZCIsImluQ2hhckdyb3VwIiwiaW5DaGFyUmFuZ2UiLCJyZWdleFRlc3QiLCJwYXJzZVJlY29yZERlZiIsInBhcnNlTWFwRGVmIiwicGFyc2VOYXRpdmVFbnVtRGVmIiwiYWN0dWFsVmFsdWVzIiwicGFyc2VkVHlwZXMiLCJwYXJzZU5ldmVyRGVmIiwicGFyc2VOdWxsRGVmIiwicHJpbWl0aXZlTWFwcGluZ3MiLCJwYXJzZVVuaW9uRGVmIiwiYXNBbnlPZiIsInVuaXF1ZVR5cGVzIiwiYW55T2YiLCJwYXJzZU51bGxhYmxlRGVmIiwicGFyc2VOdW1iZXJEZWYiLCJkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlT2JqZWN0RGVmIiwicHJvcE5hbWUiLCJwcm9wRGVmIiwicHJvcGVydHlQYXRoIiwicGFyc2VkRGVmIiwicGFyc2VPcHRpb25hbERlZiIsImlubmVyU2NoZW1hIiwicGFyc2VQaXBlbGluZURlZiIsInBhcnNlUHJvbWlzZURlZiIsInBhcnNlU2V0RGVmIiwicGFyc2VUdXBsZURlZiIsInBhcnNlVW5kZWZpbmVkRGVmIiwicGFyc2VVbmtub3duRGVmIiwicGFyc2VSZWFkb25seURlZiIsInNlZW5JdGVtIiwib3ZlcnJpZGVSZXN1bHQiLCJzZWVuU2NoZW1hIiwiZ2V0JHJlZiIsIm5ld0l0ZW0iLCJqc29uU2NoZW1hIiwic2VsZWN0UGFyc2VyIiwiYWRkTWV0YSIsImdldFJlbGF0aXZlUGF0aCIsInBhdGhBIiwicGF0aEIiLCJ0eXBlTmFtZSIsInpvZFRvSnNvblNjaGVtYSIsIm1haW4iLCJ0aXRsZSIsImRlZmluaXRpb25zIiwicHJvY2Vzc2VkRGVmaW5pdGlvbnMiLCJuZXdEZWZpbml0aW9ucyIsImNvbWJpbmVkIiwibWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCIsInRvb2wiLCJjYWxsYmFjayIsInRvU3RyaWN0SnNvblNjaGVtYSIsInNjaGVtYUNvcHkiLCJlbnN1cmVTdHJpY3RKc29uU2NoZW1hIiwiaXNOdWxsYWJsZSIsIm9uZU9mVmFyaWFudCIsImFsbE9mVmFyaWFudCIsImlzT2JqZWN0IiwiZGVmTmFtZSIsImRlZlNjaGVtYSIsImRlZmluaXRpb25OYW1lIiwiZGVmaW5pdGlvblNjaGVtYSIsInJlcXVpcmVkIiwicHJvcGVydGllcyIsInByb3BTY2hlbWEiLCJ2YXJpYW50IiwicmVzb2x2ZWQiLCJoYXNNb3JlVGhhbk5LZXlzIiwicmVzb2x2ZVJlZiIsInBhdGhQYXJ0cyIsIm4iLCJ6b2RWM1RvSnNvblNjaGVtYSIsIl96b2RUb0pzb25TY2hlbWEiLCJ6b2RWNFRvSnNvblNjaGVtYSIsIno0LnRvSlNPTlNjaGVtYSIsImlzWm9kVjQiLCJ6b2RPYmplY3QiLCJ6b2RUZXh0Rm9ybWF0IiwicHJvcHMiLCJjb250ZW50Iiwiem9kUmVzcG9uc2VzRnVuY3Rpb24iLCJBZ2VudHNFcnJvciIsInN0YXRlIiwiX19wdWJsaWNGaWVsZCIsIlN5c3RlbUVycm9yIiwiTWF4VHVybnNFeGNlZWRlZEVycm9yIiwiTW9kZWxCZWhhdmlvckVycm9yIiwiVXNlckVycm9yIiwiR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IiLCJUb29sQ2FsbEVycm9yIiwiSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsIk91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwicmVhZFpvZERlZmluaXRpb24iLCJjYW5kaWRhdGUiLCJyZWFkWm9kVHlwZSIsInJhd1R5cGUiLCJsb3dlciIsImlzWm9kT2JqZWN0IiwiaXNBZ2VudFRvb2xJbnB1dCIsIkpTT05fU0NIRU1BX0RSQUZUXzA3IiwiT1BUSU9OQUxfV1JBUFBFUlMiLCJERUNPUkFUT1JfV1JBUFBFUlMiLCJTSU1QTEVfVFlQRV9NQVBQSU5HIiwiaGFzSnNvblNjaGVtYU9iamVjdFNoYXBlIiwiem9kSnNvblNjaGVtYUNvbXBhdCIsImJ1aWxkT2JqZWN0U2NoZW1hIiwicmVhZFNoYXBlIiwiZmllbGQiLCJvcHRpb25hbCIsImNvbnZlcnRQcm9wZXJ0eSIsImN1cnJlbnQiLCJ1bndyYXBEZWNvcmF0b3JzIiwibmV4dCIsImNvbnZlcnRTY2hlbWEiLCJ1bndyYXBwZWQiLCJidWlsZEFycmF5U2NoZW1hIiwiYnVpbGRUdXBsZVNjaGVtYSIsImJ1aWxkVW5pb25TY2hlbWEiLCJidWlsZEludGVyc2VjdGlvblNjaGVtYSIsImJ1aWxkTGl0ZXJhbCIsImJ1aWxkRW51bSIsImJ1aWxkUmVjb3JkU2NoZW1hIiwiYnVpbGRNYXBTY2hlbWEiLCJidWlsZFNldFNjaGVtYSIsImJ1aWxkTnVsbGFibGVTY2hlbWEiLCJleHRyYWN0Rmlyc3QiLCJjb2VyY2VBcnJheSIsInZhbHVlU2NoZW1hIiwibGl0ZXJhbCIsInpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0Iiwiem9kVGV4dEZvcm1hdENvbXBhdCIsImJ1aWxkSnNvblNjaGVtYUZyb21ab2QiLCJpbnB1dFR5cGUiLCJ0b0Z1bmN0aW9uVG9vbE5hbWUiLCJnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIiwidXNlRmFsbGJhY2siLCJvcmlnaW5hbEVycm9yIiwiZmFsbGJhY2tTY2hlbWEiLCJyYXdJbnB1dCIsImZvcm1hdHRlZEZ1bmN0aW9uIiwiY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIiwib3V0cHV0VHlwZSIsImV4aXN0aW5nIiwib3V0cHV0IiwicyIsImgiLCJkIiwidyIsInkiLCJtcyIsInBhcnNlIiwiZm10TG9uZyIsImZtdFNob3J0Iiwic3RyIiwibWF0Y2giLCJtc0FicyIsInBsdXJhbCIsImlzUGx1cmFsIiwic2V0dXAiLCJlbnYiLCJjcmVhdGVEZWJ1ZyIsImNvZXJjZSIsImRpc2FibGUiLCJlbmFibGUiLCJlbmFibGVkIiwicmVxdWlyZSQkMCIsImRlc3Ryb3kiLCJzZWxlY3RDb2xvciIsIm5hbWVzcGFjZSIsImhhc2giLCJwcmV2VGltZSIsImVuYWJsZU92ZXJyaWRlIiwibmFtZXNwYWNlc0NhY2hlIiwiZW5hYmxlZENhY2hlIiwiZGVidWciLCJzZWxmIiwiZm9ybWF0dGVyIiwiZXh0ZW5kIiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJuYW1lc3BhY2VzIiwic3BsaXQiLCJucyIsIm1hdGNoZXNUZW1wbGF0ZSIsInNlYXJjaCIsInRlbXBsYXRlIiwic2VhcmNoSW5kZXgiLCJ0ZW1wbGF0ZUluZGV4Iiwic3RhckluZGV4IiwibWF0Y2hJbmRleCIsInNraXAiLCJjb21tb24iLCJleHBvcnRzIiwiZm9ybWF0QXJncyIsInNhdmUiLCJsb2FkIiwidXNlQ29sb3JzIiwibG9jYWxzdG9yYWdlIiwid2FybmVkIiwibW9kdWxlIiwibGFzdEMiLCJmb3JtYXR0ZXJzIiwibG9hZEVudiIsIl9sb2FkRW52IiwiaXNFbmFibGVkIiwiZmxhZ05hbWUiLCJ0cmFjaW5nIiwibG9nZ2luZyIsImRvbnRMb2dNb2RlbERhdGEiLCJkb250TG9nVG9vbERhdGEiLCJnZXRMb2dnZXIiLCJsb2dnZXIiLCJCWVRFX1BSRVZJRVdfTElNSVQiLCJ0b1NtYXJ0U3RyaW5nIiwiaXNBcnJheUJ1ZmZlckxpa2UiLCJmb3JtYXRCeXRlQXJyYXkiLCJpc0FycmF5QnVmZmVyVmlldyIsInZpZXciLCJzbWFydFN0cmluZ1JlcGxhY2VyIiwic2hhcmVkQXJyYXlCdWZmZXJDdG9yIiwiaXNTZXJpYWxpemVkQnVmZmVyU25hcHNob3QiLCJpc05vZGVCdWZmZXIiLCJidWZmZXJDdG9yIiwiYnl0ZXMiLCJwcmV2aWV3TGVuZ3RoIiwicHJldmlld1BhcnRzIiwiZm9ybWF0Qnl0ZSIsImVsbGlwc2lzIiwiYnl0ZSIsIl9rZXkiLCJuZXN0ZWRWYWx1ZSIsImRlZmF1bHRUb29sRXJyb3JGdW5jdGlvbiIsImNvbnRleHQiLCJ0b29sRXJyb3JGdW5jdGlvbiIsInN0cmljdE1vZGUiLCJwYXJhbWV0ZXJzIiwiX2ludm9rZSIsInJ1bkNvbnRleHQiLCJkZXRhaWxzIiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJhZ2VudCIsInByZWRpY2F0ZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsIl9jYWNoZWRUb29scyIsIl9jYWNoZWRUb29sS2V5c0J5U2VydmVyIiwiZGVmYXVsdE1DUFRvb2xDYWNoZUtleSIsInNlcnZlciIsImdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsImdlbmVyYXRlTUNQVG9vbENhY2hlS2V5IiwiY2FjaGVLZXkiLCJ0IiwibWNwVG9GdW5jdGlvblRvb2wiLCJsaXN0VG9vbHNGb3JTZXJ2ZXIiLCJzcGFuIiwiZmV0Y2hlZE1jcFRvb2xzIiwibWNwVG9vbHMiLCJmaWx0ZXJlZFRvb2xzIiwiZmlsdGVyIiwiZ2xvYmFsTG9nZ2VyIiwiYWxsb3dlZFRvb2xOYW1lcyIsImJsb2NrZWRUb29sTmFtZXMiLCJhbGxvd2VkIiwiYmxvY2tlZCIsInRvb2xzIiwiZ2V0Q3VycmVudFRyYWNlIiwid2l0aE1DUExpc3RUb29sc1NwYW4iLCJnZXRBbGxNY3BUb29scyIsIm1jcFNlcnZlcnNPck9wdHMiLCJtY3BTZXJ2ZXJzIiwiY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzIiwicnVuQ29udGV4dEZyb21PcHRzIiwiYWdlbnRGcm9tT3B0cyIsImFsbFRvb2xzIiwidG9vbE5hbWVzIiwic2VydmVyVG9vbHMiLCJpbnRlcnNlY3Rpb24iLCJtY3BUb29sIiwiX2NvbnRleHQiLCJzdHJpY3RTY2hlbWEiLCJub25TdHJpY3RTY2hlbWEiLCJvdXQiLCJCcm93c2VyRXZlbnRFbWl0dGVyIiwiX19wcml2YXRlQWRkIiwiX3RhcmdldCIsIl9saXN0ZW5lcldyYXBwZXJzIiwibGlzdGVuZXIiLCJldmVudFR5cGUiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiX19wcml2YXRlR2V0Iiwid3JhcHBlcnMiLCJ3cmFwcGVyIiwiZXZlbnQiLCJoYW5kbGVyIiwicmFuZG9tVVVJRCIsIlJlYWRhYmxlIiwiX2Rlc3RpbmF0aW9uIiwiX3RyYW5zZm9ybSIsIlJlYWRhYmxlU3RyZWFtIiwiVHJhbnNmb3JtU3RyZWFtIiwiQXN5bmNMb2NhbFN0b3JhZ2UiLCJCcm93c2VyVGltZXIiLCJ0aW1lb3V0IiwidGltZW91dElkIiwidGltZXIiLCJFdmVudEVtaXR0ZXJEZWxlZ2F0ZSIsIkFnZW50SG9va3MiLCJSdW50aW1lRXZlbnRFbWl0dGVyIiwiUnVuSG9va3MiLCJPUEVOQUlfREVGQVVMVF9NT0RFTF9FTlZfVkFSSUFCTEVfTkFNRSIsImdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkIiwibW9kZWxOYW1lIiwiaXNHcHQ1RGVmYXVsdCIsImdldERlZmF1bHRNb2RlbCIsImdldERlZmF1bHRNb2RlbFNldHRpbmdzIiwibW9kZWwiLCJfbW9kZWwiLCJnZXRUcmFuc2Zlck1lc3NhZ2UiLCJkZWZhdWx0SGFuZG9mZlRvb2xOYW1lIiwiZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24iLCJIYW5kb2ZmIiwib25JbnZva2VIYW5kb2ZmIiwiaGFuZG9mZiIsImNvbmZpZyIsImhhc09uSGFuZG9mZiIsImhhc0lucHV0VHlwZSIsImlucHV0SnNvblN0cmluZyIsImFkZEVycm9yVG9DdXJyZW50U3BhbiIsImdldEhhbmRvZmYiLCJnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIiwib3V0cHV0TWVzc2FnZSIsImxhc3RJdGVtIiwiZ2V0T3V0cHV0VGV4dCIsImFnZW50VG9vbFJ1blJlc3VsdHMiLCJzYXZlQWdlbnRUb29sUnVuUmVzdWx0IiwidG9vbENhbGwiLCJydW5SZXN1bHQiLCJjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0IiwiQWdlbnRBc1Rvb2xOZWVkQXBwcm92YWxTY2hhbWUiLCJfQWdlbnQiLCJvdXRwdXRUeXBlcyIsInRvb2xOYW1lIiwidG9vbERlc2NyaXB0aW9uIiwiY3VzdG9tT3V0cHV0RXh0cmFjdG9yIiwicnVuQ29uZmlnIiwicnVuT3B0aW9ucyIsIm9uU3RyZWFtIiwiZXZlbnRIYW5kbGVycyIsImVtaXRFdmVudCIsInNwZWNpZmljIiwid2lsZGNhcmQiLCJjYW5kaWRhdGVzIiwiYWdlbnRUb29sIiwicnVubmVyIiwiUnVubmVyIiwic2hvdWxkU3RyZWFtIiwic3RyZWFtUGF5bG9hZCIsInN0cmVhbVJlc3VsdCIsImNvbXBsZXRlZFJlc3VsdCIsInVzZXNTdG9wQXRUb29sTmFtZXMiLCJvdXRwdXRUZXh0Iiwic2V0IiwiZW5hYmxlZFRvb2xzIiwibWF5YmVJc0VuYWJsZWQiLCJoYW5kb2ZmcyIsIkFnZW50IiwiZGVmaW5lSW5wdXRHdWFyZHJhaWwiLCJleGVjdXRlIiwicnVuSW5QYXJhbGxlbCIsImRlZmluZU91dHB1dEd1YXJkcmFpbCIsImdldERlZmF1bHRNb2RlbFByb3ZpZGVyIiwiU2hhcmVkQmFzZSIsIkl0ZW1CYXNlIiwiUmVmdXNhbCIsIk91dHB1dFRleHQiLCJJbnB1dFRleHQiLCJSZWFzb25pbmdUZXh0IiwiSW5wdXRJbWFnZSIsInpcbiAgICAgICAgLy8gMS4gaW1hZ2UgZGF0YVxuICAgICAgICAuc3RyaW5nIiwiSW5wdXRGaWxlIiwielxuICAgICAgICAvLyAxLiBmaWxlIGRhdGFcbiAgICAgICAgLnN0cmluZyIsIkF1ZGlvQ29udGVudCIsInpcbiAgICAgICAgLnN0cmluZyIsIkltYWdlQ29udGVudCIsIlRvb2xPdXRwdXRUZXh0IiwiSW1hZ2VEYXRhT2JqZWN0U2NoZW1hIiwielxuICAgICAgICAudW5pb24iLCJ6Lmluc3RhbmNlb2YiLCJJbWFnZVVybE9iamVjdFNjaGVtYSIsIkltYWdlRmlsZUlkT2JqZWN0U2NoZW1hIiwiSW1hZ2VPYmplY3RTY2hlbWEiLCJ6XG4gICAgLnVuaW9uIiwiRmlsZURhdGFPYmplY3RTY2hlbWEiLCJGaWxlVXJsT2JqZWN0U2NoZW1hIiwiRmlsZUlkT2JqZWN0U2NoZW1hIiwiRmlsZVJlZmVyZW5jZVNjaGVtYSIsInpTdHJpbmdXaXRoSGludHMiLCJfaGludHMiLCJUb29sT3V0cHV0SW1hZ2UiLCJUb29sT3V0cHV0RmlsZUNvbnRlbnQiLCJDb21wdXRlclRvb2xPdXRwdXQiLCJjb21wdXRlckFjdGlvbnMiLCJ6LmRpc2NyaW1pbmF0ZWRVbmlvbiIsInoubnVtYmVyIiwiei5lbnVtIiwiQXNzaXN0YW50Q29udGVudCIsIk1lc3NhZ2VCYXNlIiwiQXNzaXN0YW50TWVzc2FnZUl0ZW0iLCJVc2VyQ29udGVudCIsIlVzZXJNZXNzYWdlSXRlbSIsIlN5c3RlbU1lc3NhZ2VJdGVtIiwiSG9zdGVkVG9vbENhbGxJdGVtIiwiRnVuY3Rpb25DYWxsSXRlbSIsIlRvb2xDYWxsT3V0cHV0Q29udGVudCIsIlRvb2xDYWxsU3RydWN0dXJlZE91dHB1dCIsIkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJDb21wdXRlclVzZUNhbGxJdGVtIiwiQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSIsIlNoZWxsQWN0aW9uIiwiU2hlbGxDYWxsSXRlbSIsIlNoZWxsQ2FsbE91dGNvbWUiLCJTaGVsbENhbGxPdXRwdXRDb250ZW50IiwielxuICAgIC5vYmplY3QiLCJTaGVsbENhbGxSZXN1bHRJdGVtIiwiQXBwbHlQYXRjaE9wZXJhdGlvbkNyZWF0ZUZpbGUiLCJBcHBseVBhdGNoT3BlcmF0aW9uVXBkYXRlRmlsZSIsIkFwcGx5UGF0Y2hPcGVyYXRpb25EZWxldGVGaWxlIiwiQXBwbHlQYXRjaE9wZXJhdGlvbiIsIkFwcGx5UGF0Y2hDYWxsSXRlbSIsIkFwcGx5UGF0Y2hDYWxsUmVzdWx0SXRlbSIsIlRvb2xDYWxsSXRlbSIsIlJlYXNvbmluZ0l0ZW0iLCJVbmtub3duSXRlbSIsIk91dHB1dE1vZGVsSXRlbSIsIk1vZGVsSXRlbSIsInoudW5pb24iLCJSZXF1ZXN0VXNhZ2VEYXRhIiwiVXNhZ2VEYXRhIiwiU3RyZWFtRXZlbnRUZXh0U3RyZWFtIiwiU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQiLCJTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIiwiU3RyZWFtRXZlbnRHZW5lcmljSXRlbSIsIlJlcXVlc3RVc2FnZSIsImlucHV0VG9rZW5zRGV0YWlscyIsIm91dHB1dFRva2Vuc0RldGFpbHMiLCJVc2FnZSIsInJlcXVlc3RVc2FnZUVudHJpZXMiLCJub3JtYWxpemVkUmVxdWVzdFVzYWdlRW50cmllcyIsIm5ld1VzYWdlIiwiUnVuQ29udGV4dCIsIl9hcHByb3ZhbHMiLCJfX3ByaXZhdGVTZXQiLCJhcHByb3ZhbHMiLCJhcHByb3ZhbCIsImNhbGxJZCIsImFwcHJvdmFsRW50cnkiLCJpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsIiwiaW5kaXZpZHVhbENhbGxSZWplY3Rpb24iLCJhcHByb3ZhbEl0ZW0iLCJhbHdheXNBcHByb3ZlIiwiYWx3YXlzUmVqZWN0Iiwic2VyaWFsaXplVG9vbCIsInNlcmlhbGl6ZUhhbmRvZmYiLCJSdW5JdGVtQmFzZSIsIlJ1bk1lc3NhZ2VPdXRwdXRJdGVtIiwicmF3SXRlbSIsInBhcnQiLCJSdW5Ub29sQ2FsbEl0ZW0iLCJSdW5Ub29sQ2FsbE91dHB1dEl0ZW0iLCJSdW5SZWFzb25pbmdJdGVtIiwiUnVuSGFuZG9mZkNhbGxJdGVtIiwiUnVuSGFuZG9mZk91dHB1dEl0ZW0iLCJzb3VyY2VBZ2VudCIsInRhcmdldEFnZW50IiwiUnVuVG9vbEFwcHJvdmFsSXRlbSIsIl93aXRoU3BhbkZhY3RvcnkiLCJjcmVhdGVTcGFuIiwid2l0aE5ld1NwYW5Db250ZXh0Iiwic2V0Q3VycmVudFNwYW4iLCJyZXNldEN1cnJlbnRTcGFuIiwiY3JlYXRlQWdlbnRTcGFuIiwiZ2V0R2xvYmFsVHJhY2VQcm92aWRlciIsImNyZWF0ZUZ1bmN0aW9uU3BhbiIsIndpdGhGdW5jdGlvblNwYW4iLCJjcmVhdGVIYW5kb2ZmU3BhbiIsIndpdGhIYW5kb2ZmU3BhbiIsImNyZWF0ZUd1YXJkcmFpbFNwYW4iLCJ3aXRoR3VhcmRyYWlsU3BhbiIsImNyZWF0ZU1DUExpc3RUb29sc1NwYW4iLCJlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQiLCJnbG9iYWxCdWZmZXIiLCJiaW5hcnkiLCJjaGFycyIsImMxIiwiYzIiLCJjMyIsImVuYzEiLCJlbmMyIiwiZW5jMyIsImVuYzQiLCJSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IiwiUnVuSXRlbVN0cmVhbUV2ZW50IiwiUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQiLCJpc0ludm9rZUNvbXB1dGVyIiwiY29tcHV0ZXIiLCJpc0FwcHJvdmFsSXRlbUxpa2UiLCJpdGVtVHlwZSIsImdldEFwcHJvdmFsSWRlbnRpdHkiLCJwcm92aWRlckRhdGEiLCJhZ2VudE5hbWUiLCJmb3JtYXRGaW5hbE91dHB1dFR5cGVFcnJvciIsInouWm9kRXJyb3IiLCJpc3N1ZVBhdGhQYXJ0cyIsImlzc3VlUGF0aCIsInRydW5jYXRlRm9yRGV2ZWxvcGVyIiwidHJpbW1lZCIsInByb2Nlc3NNb2RlbFJlc3BvbnNlIiwibW9kZWxSZXNwb25zZSIsInJ1bkhhbmRvZmZzIiwicnVuRnVuY3Rpb25zIiwicnVuQ29tcHV0ZXJBY3Rpb25zIiwicnVuU2hlbGxBY3Rpb25zIiwicnVuQXBwbHlQYXRjaEFjdGlvbnMiLCJydW5NQ1BBcHByb3ZhbFJlcXVlc3RzIiwidG9vbHNVc2VkIiwiaGFuZG9mZk1hcCIsImZ1bmN0aW9uTWFwIiwiY29tcHV0ZXJUb29sIiwic2hlbGxUb29sIiwiYXBwbHlQYXRjaFRvb2wiLCJtY3BUb29sTWFwIiwibWNwU2VydmVyTGFiZWwiLCJtY3BTZXJ2ZXJUb29sIiwiZnVuY3Rpb25Ub29sIiwibmV4dFN0ZXBTY2hlbWEiLCJTaW5nbGVTdGVwUmVzdWx0Iiwib3JpZ2luYWxJbnB1dCIsInByZVN0ZXBJdGVtcyIsIm5ld1N0ZXBJdGVtcyIsIm5leHRTdGVwIiwibWF5YmVSZXNldFRvb2xDaG9pY2UiLCJ0b29sVXNlVHJhY2tlciIsIm1vZGVsU2V0dGluZ3MiLCJyZXNvbHZlSW50ZXJydXB0ZWRUdXJuIiwib3JpZ2luYWxQcmVTdGVwSXRlbXMiLCJuZXdSZXNwb25zZSIsInByb2Nlc3NlZFJlc3BvbnNlIiwiZnVuY3Rpb25DYWxsSWRzIiwicGVuZGluZ0FwcHJvdmFsSXRlbXMiLCJwZW5kaW5nQXBwcm92YWxJZGVudGl0aWVzIiwiaWRlbnRpdHkiLCJyZXdpbmRDb3VudCIsImZ1bmN0aW9uVG9vbFJ1bnMiLCJydW4iLCJmdW5jdGlvblJlc3VsdHMiLCJleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMiLCJjb21wdXRlclJlc3VsdHMiLCJleGVjdXRlQ29tcHV0ZXJBY3Rpb25zIiwib3JpZ2luYWxQcmVTdGVwSXRlbVNldCIsIm5ld0l0ZW1zIiwibmV3SXRlbXNTZXQiLCJhcHBlbmRJZk5ldyIsIm1jcEFwcHJvdmFsUnVucyIsInBlbmRpbmdIb3N0ZWRNQ1BBcHByb3ZhbHMiLCJwZW5kaW5nSG9zdGVkTUNQQXBwcm92YWxJZHMiLCJhcHByb3ZhbFJlcXVlc3RJZCIsImFwcHJvdmVkIiwicmVzcG9uc2VJdGVtIiwiY29tcGxldGVkU3RlcCIsIm1heWJlQ29tcGxldGVUdXJuRnJvbVRvb2xSZXN1bHRzIiwicmVzb2x2ZVR1cm5BZnRlck1vZGVsUmVzcG9uc2UiLCJzZWVuSXRlbXMiLCJzaGVsbFJlc3VsdHMiLCJhcHBseVBhdGNoUmVzdWx0cyIsImV4ZWN1dGVTaGVsbEFjdGlvbnMiLCJleGVjdXRlQXBwbHlQYXRjaE9wZXJhdGlvbnMiLCJhcHByb3ZhbFJlcXVlc3QiLCJ0b29sRGF0YSIsInJlcXVlc3REYXRhIiwiYXBwcm92YWxSZXN1bHQiLCJhcHByb3ZhbFJlc3BvbnNlRGF0YSIsImV4ZWN1dGVIYW5kb2ZmQ2FsbHMiLCJtZXNzYWdlSXRlbXMiLCJwb3RlbnRpYWxGaW5hbE91dHB1dCIsIm91dHB1dEVycm9yTWVzc2FnZSIsInRvb2xPdXRjb21lIiwiY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyIsImdldFRvb2xDYWxsT3V0cHV0SXRlbSIsIm1heWJlU3RydWN0dXJlZE91dHB1dHMiLCJub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMiLCJzdHJ1Y3R1cmVkSXRlbXMiLCJjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbSIsIm5vcm1hbGl6ZUZpbGVWYWx1ZSIsImRpcmVjdEZpbGUiLCJub3JtYWxpemVkT2JqZWN0Iiwibm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSIsImxlZ2FjeVZhbHVlIiwibm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlIiwiaXNSZWNvcmQiLCJkYXRhVmFsdWUiLCJoYXNTdHJpbmdEYXRhIiwiaGFzQmluYXJ5RGF0YSIsImlzTm9uRW1wdHlTdHJpbmciLCJyZWZlcmVuY2VkSWQiLCJmaWxlbmFtZSIsIm1lZGlhVHlwZSIsInRvSW5saW5lSW1hZ2VTdHJpbmciLCJhc0RhdGFVcmwiLCJ0b29sUnVucyIsInJ1blNpbmdsZVRvb2wiLCJ0b29sUnVuIiwicGFyc2VkQXJncyIsInJlc3BvbnNlIiwidG9vbE91dHB1dCIsImZ1bmN0aW9uUmVzdWx0IiwibmVzdGVkUnVuUmVzdWx0IiwibmVzdGVkSW50ZXJydXB0aW9ucyIsImVycm9yUmVzdWx0IiwiX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdCIsImFjdGlvbiIsInNjcmVlbnNob3QiLCJ0b0Vycm9yTWVzc2FnZSIsImFjdGlvbnMiLCJjdXN0b21Mb2dnZXIiLCJfbG9nZ2VyIiwiZGVjaXNpb24iLCJyZWplY3Rpb25PdXRwdXQiLCJzaGVsbE91dHB1dHMiLCJwcm92aWRlck1ldGEiLCJtYXhPdXRwdXRMZW5ndGgiLCJzaGVsbFJlc3VsdCIsImltYWdlVXJsIiwiYWN0dWFsSGFuZG9mZiIsImhhbmRvZmZTcGFuIiwibmV3QWdlbnQiLCJyZXF1ZXN0ZWRBZ2VudHMiLCJpbnB1dEZpbHRlciIsImhhbmRvZmZJbnB1dERhdGEiLCJOT1RfRklOQUxfT1VUUFVUIiwidG9vbFJlc3VsdHMiLCJpbnRlcnJ1cHRpb25zIiwiZmlyc3RUb29sUmVzdWx0IiwidG9vbFVzZUJlaGF2aW9yIiwic3RvcHBpbmdUb29sIiwiZ2V0UnVuSXRlbVN0cmVhbUV2ZW50TmFtZSIsImVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQiLCJpdGVtTmFtZSIsInN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0IiwiYWRkU3RlcFRvUnVuUmVzdWx0Iiwic2tpcHBlZEl0ZW1zIiwiQWdlbnRUb29sVXNlVHJhY2tlciIsIl9hZ2VudFRvVG9vbHMiLCJ0b0lucHV0SXRlbUxpc3QiLCJleHRyYWN0T3V0cHV0SXRlbXNGcm9tUnVuSXRlbXMiLCJub3JtYWxpemVJdGVtc0ZvclNlc3Npb25QZXJzaXN0ZW5jZSIsInNhbml0aXplVmFsdWVGb3JTZXNzaW9uIiwic3RyaXBUcmFuc2llbnRDYWxsSWRzIiwidG9VaW50OEFycmF5SWZCaW5hcnkiLCJ0b0RhdGFVcmxGcm9tQnl0ZXMiLCJpc1BsYWluT2JqZWN0IiwicmVjb3JkIiwibmV4dENvbnRleHQiLCJzbmFwc2hvdCIsInByb3RvIiwic2hvdWxkU3RyaXBJZCIsInNob3VsZFN0cmlwSWRGb3JUeXBlIiwic2F2ZVRvU2Vzc2lvbiIsInNlc3Npb24iLCJzZXNzaW9uSW5wdXRJdGVtcyIsImlucHV0SXRlbXMiLCJhbHJlYWR5UGVyc2lzdGVkIiwibmV3UnVuSXRlbXMiLCJvdXRwdXRJdGVtcyIsIml0ZW1zVG9TYXZlIiwic2FuaXRpemVkSXRlbXMiLCJzYXZlU3RyZWFtSW5wdXRUb1Nlc3Npb24iLCJzYW5pdGl6ZWRJbnB1dCIsInNhdmVTdHJlYW1SZXN1bHRUb1Nlc3Npb24iLCJwcmVwYXJlSW5wdXRJdGVtc1dpdGhTZXNzaW9uIiwic2Vzc2lvbklucHV0Q2FsbGJhY2siLCJpbmNsdWRlSGlzdG9yeUluUHJlcGFyZWRJbnB1dCIsInByZXNlcnZlRHJvcHBlZE5ld0l0ZW1zIiwiaGlzdG9yeSIsIm5ld0lucHV0SXRlbXMiLCJoaXN0b3J5U25hcHNob3QiLCJuZXdJbnB1dFNuYXBzaG90IiwiaGlzdG9yeUNvdW50cyIsImJ1aWxkSXRlbUZyZXF1ZW5jeU1hcCIsIm5ld0lucHV0Q291bnRzIiwiaGlzdG9yeVJlZnMiLCJidWlsZEl0ZW1SZWZlcmVuY2VNYXAiLCJuZXdJbnB1dFJlZnMiLCJhcHBlbmRlZCIsInNlc3Npb25JdGVtS2V5IiwiY29uc3VtZVJlZmVyZW5jZSIsImRlY3JlbWVudENvdW50IiwiaGlzdG9yeVJlbWFpbmluZyIsIm5ld1JlbWFpbmluZyIsInN0cnVjdHVyZWQiLCJub3JtYWxpemVkIiwibm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXQiLCJpbWFnZVN0cmluZyIsImltYWdlRmlsZUlkIiwiZmFsbGJhY2tJbWFnZU1lZGlhVHlwZSIsImltYWdlRmllbGQiLCJpbWFnZU9iaiIsImlubGluZU1lZGlhVHlwZSIsImNhbmRpZGF0ZUlkIiwiZmlsZVZhbHVlIiwiY291bnRzIiwibGlzdCIsInJlbWFpbmluZyIsInNlc3Npb25TZXJpYWxpemF0aW9uUmVwbGFjZXIiLCJDVVJSRU5UX1NDSEVNQV9WRVJTSU9OIiwiJHNjaGVtYVZlcnNpb24iLCJzZXJpYWxpemVkQWdlbnRTY2hlbWEiLCJzZXJpYWxpemVkU3BhbkJhc2UiLCJ6XG4gICAgICAgIC5vYmplY3QiLCJTZXJpYWxpemVkU3BhbiIsInoubGF6eSIsInJlcXVlc3RVc2FnZVNjaGVtYSIsInVzYWdlU2NoZW1hIiwibW9kZWxSZXNwb25zZVNjaGVtYSIsInByb3RvY29sLk91dHB1dE1vZGVsSXRlbSIsIml0ZW1TY2hlbWEiLCJwcm90b2NvbC5Bc3Npc3RhbnRNZXNzYWdlSXRlbSIsInByb3RvY29sLlRvb2xDYWxsSXRlbSIsInByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5SZWFzb25pbmdJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSIsInByb3RvY29sLlNoZWxsQ2FsbEl0ZW0iLCJwcm90b2NvbC5BcHBseVBhdGNoQ2FsbEl0ZW0iLCJzZXJpYWxpemVkVHJhY2VTY2hlbWEiLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2VTY2hlbWEiLCJ6XG4gICAgICAgIC5hcnJheSIsImd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hIiwiaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEiLCJTZXJpYWxpemVkUnVuU3RhdGUiLCJwcm90b2NvbC5Nb2RlbEl0ZW0iLCJSdW5TdGF0ZSIsInN0YXJ0aW5nQWdlbnQiLCJtYXhUdXJucyIsImdldFR1cm5JbnB1dCIsImluaXRpYWxBZ2VudCIsInBhcnNpbmdFcnJvciIsImpzb25SZXN1bHQiLCJjdXJyZW50U2NoZW1hVmVyc2lvbiIsInN0YXRlSnNvbiIsImFnZW50TWFwIiwiYnVpbGRBZ2VudE1hcCIsImN1cnJlbnRBZ2VudCIsInRyYWNlIiwiZGVzZXJpYWxpemVTcGFuIiwiZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlIiwiZGVzZXJpYWxpemVJdGVtIiwiZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZSIsInF1ZXVlIiwic2VyaWFsaXplZFNwYW4iLCJzcGFuRGF0YSIsInByZXZpb3VzU3BhbiIsInNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlIiwic2VyaWFsaXplZEl0ZW0iLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UiLCJjb21wdXRlclRvb2xzIiwic2hlbGxUb29scyIsImFwcGx5UGF0Y2hUb29scyIsImZ1bmN0aW9uQ2FsbCIsImNvbXB1dGVyQWN0aW9uIiwic2hlbGxBY3Rpb24iLCJhcHBseVBhdGNoQWN0aW9uIiwiX1J1bm5lcl9pbnN0YW5jZXMiLCJyZXNvbHZlZE9wdGlvbnMiLCJjYWxsTW9kZWxJbnB1dEZpbHRlciIsImhhc0NhbGxNb2RlbElucHV0RmlsdGVyIiwiZWZmZWN0aXZlT3B0aW9ucyIsInNlcnZlck1hbmFnZXNDb252ZXJzYXRpb24iLCJyZXN1bWluZ0Zyb21TdGF0ZSIsInNlc3Npb25JbnB1dE9yaWdpbmFsU25hcHNob3QiLCJzZXNzaW9uSW5wdXRGaWx0ZXJlZFNuYXBzaG90Iiwic2Vzc2lvbklucHV0UGVuZGluZ1dyaXRlQ291bnRzIiwicmVjb3JkU2Vzc2lvbkl0ZW1zRm9yUGVyc2lzdGVuY2UiLCJzb3VyY2VJdGVtcyIsImZpbHRlcmVkSXRlbXMiLCJwZW5kaW5nV3JpdGVDb3VudHMiLCJwZXJzaXN0YWJsZUl0ZW1zIiwic291cmNlT2NjdXJyZW5jZUNvdW50cyIsIm5leHRDb3VudCIsImNvbnN1bWVBbnlQZW5kaW5nV3JpdGVTbG90IiwiZmlsdGVyZWRJdGVtIiwiYWxsb2NhdGVkIiwicGVuZGluZ09jY3VycmVuY2VzIiwic291cmNlS2V5IiwiZ2V0QWdlbnRJbnB1dEl0ZW1LZXkiLCJmaWx0ZXJlZEtleSIsImZpbHRlcmVkUmVtYWluaW5nIiwicmVzb2x2ZVNlc3Npb25JdGVtc0ZvclBlcnNpc3RlbmNlIiwicHJlcGFyZWRJbnB1dCIsInByZXBhcmVkIiwic2Vzc2lvbkl0ZW1zIiwiZW5zdXJlU3RyZWFtSW5wdXRQZXJzaXN0ZWQiLCJwZXJzaXN0ZWQiLCJpdGVtc1RvUGVyc2lzdCIsImV4ZWN1dGVSdW4iLCJfX3ByaXZhdGVNZXRob2QiLCJydW5JbmRpdmlkdWFsU3RyZWFtX2ZuIiwicnVuSW5kaXZpZHVhbE5vblN0cmVhbV9mbiIsIndpdGhUcmFjZSIsImdldE9yQ3JlYXRlVHJhY2UiLCJnZXRJbnB1dEd1YXJkcmFpbERlZmluaXRpb25zX2ZuIiwic3BsaXRJbnB1dEd1YXJkcmFpbHNfZm4iLCJndWFyZHJhaWxzIiwiYmxvY2tpbmciLCJwYXJhbGxlbCIsImd1YXJkcmFpbCIsInJlc29sdmVNb2RlbEZvckFnZW50X2ZuIiwiZXhwbGljdGx5TW9kZWxTZXQiLCJyZXNvbHZlZE1vZGVsIiwic2VsZWN0TW9kZWwiLCJzZXNzaW9uSW5wdXRVcGRhdGUiLCJpc1Jlc3VtZWRTdGF0ZSIsIkRFRkFVTFRfTUFYX1RVUk5TIiwic2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciIsIlNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIiLCJjb250aW51aW5nSW50ZXJydXB0ZWRUdXJuIiwidHVyblJlc3VsdCIsIlJ1blJlc3VsdCIsImFydGlmYWN0cyIsInByZXBhcmVBZ2VudEFydGlmYWN0cyIsImlzUmVzdW1pbmdGcm9tSW50ZXJydXB0aW9uIiwicGFyYWxsZWxHdWFyZHJhaWxQcm9taXNlIiwicnVuSW5wdXRHdWFyZHJhaWxzX2ZuIiwidHVybklucHV0IiwicHJlcGFyZWRDYWxsIiwicHJlcGFyZU1vZGVsQ2FsbF9mbiIsImdldFRyYWNpbmciLCJydW5PdXRwdXRHdWFyZHJhaWxzX2ZuIiwicnVuU3RyZWFtTG9vcF9mbiIsImhhbmRlZElucHV0VG9Nb2RlbCIsInN0cmVhbUlucHV0UGVyc2lzdGVkIiwicGVyc2lzdFN0cmVhbUlucHV0SWZOZWVkZWQiLCJndWFyZHJhaWxFcnJvciIsImZpbmFsUmVzcG9uc2UiLCJwcmVUb29sSXRlbXMiLCJTdHJlYW1lZFJ1blJlc3VsdCIsInN0cmVhbUxvb3BQcm9taXNlIiwiZ3VhcmRyYWlsc092ZXJyaWRlIiwiZ3VhcmRyYWlsQXJncyIsImFnZW50T3V0cHV0IiwicnVuT3V0cHV0IiwiYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbCIsInN5c3RlbUluc3RydWN0aW9ucyIsInByb21wdCIsIm1vZGVsSW5wdXQiLCJwZXJzaXN0ZWRJdGVtcyIsImZpbHRlckFwcGxpZWQiLCJhcHBseUNhbGxNb2RlbElucHV0RmlsdGVyIiwicHJldmlvdXNSZXNwb25zZUlkIiwiY29udmVyc2F0aW9uSWQiLCJnZW5lcmF0ZWRJdGVtcyIsInJhd0l0ZW1zIiwidG9BZ2VudElucHV0TGlzdCIsImFnZW50TW9kZWwiLCJydW5Db25maWdNb2RlbCIsInRyYWNpbmdEaXNhYmxlZCIsInRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEiLCJjbG9uZUlucHV0SXRlbXMiLCJjbG9uZWQiLCJjbG9uZU1hcCIsIm9yaWdpbmFsUG9vbCIsImJ1aWxkQWdlbnRJbnB1dFBvb2wiLCJmYWxsYmFja09yaWdpbmFscyIsInJlbW92ZUZyb21GYWxsYmFjayIsIm9yaWdpbmFsIiwidGFrZUZhbGxiYWNrT3JpZ2luYWwiLCJyZW1vdmVBZ2VudElucHV0RnJvbVBvb2wiLCJtYXRjaGVkQnlDb250ZW50IiwidGFrZUFnZW50SW5wdXRGcm9tUG9vbCIsImZhbGxiYWNrIiwiY2xvbmVkRmlsdGVyZWRJbnB1dCIsIm1vZGVsUmVzcG9uc2VzIiwibGF0ZXN0UmVzcG9uc2UiLCJpbml0aWFsSXRlbXMiLCJkZWxpdmVyZWQiLCJhZ2VudE1vZGVsU2V0dGluZ3MiLCJydW5uZXJNb2RlbCIsImNvcGllZE1vZGVsU2V0dGluZ3MiLCJfZyIsIl9oIiwiaGFuZG9mZk5hbWVzIiwiYWdlbnRJbnB1dFNlcmlhbGl6YXRpb25SZXBsYWNlciIsInBvb2wiLCJSdW5SZXN1bHRCYXNlIiwicmVzcG9uc2VzIiwiX2Vycm9yIiwiX3NpZ25hbCIsIl9yZWFkYWJsZUNvbnRyb2xsZXIiLCJfcmVhZGFibGVTdHJlYW0iLCJfY29tcGxldGVkUHJvbWlzZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVzb2x2ZSIsIl9jb21wbGV0ZWRQcm9taXNlUmVqZWN0IiwiX2NhbmNlbGxlZCIsIl9zdHJlYW1Mb29wUHJvbWlzZSIsIl9SZWFkYWJsZVN0cmVhbSIsImNvbnRyb2xsZXIiLCJyZXNvbHZlIiwicmVqZWN0IiwiaGFuZGxlQWJvcnQiLCJzdHJlYW0iLCJwcm9taXNlIiwiX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImN1cnJlbnRUcmFjZSIsIl93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUiLCJuZXdUcmFjZSIsInNwYW5FcnJvciIsImNsb25lQ3VycmVudENvbnRleHQiLCJjdXJyZW50Q29udGV4dCIsImNvcHlPZkNvbnRleHQiLCJDb25zb2xlU3BhbkV4cG9ydGVyIiwiQmF0Y2hUcmFjZVByb2Nlc3NvciIsImV4cG9ydGVyIiwibWF4UXVldWVTaXplIiwibWF4QmF0Y2hTaXplIiwic2NoZWR1bGVEZWxheSIsImV4cG9ydFRyaWdnZXJSYXRpbyIsIl9CYXRjaFRyYWNlUHJvY2Vzc29yX2luc3RhbmNlcyIsIl9tYXhRdWV1ZVNpemUiLCJfbWF4QmF0Y2hTaXplIiwiX3NjaGVkdWxlRGVsYXkiLCJfZXhwb3J0VHJpZ2dlclNpemUiLCJfZXhwb3J0ZXIiLCJfYnVmZmVyIiwiX3RpbWVyIiwiX3RpbWVvdXQiLCJfZXhwb3J0SW5Qcm9ncmVzcyIsIl90aW1lb3V0QWJvcnRDb250cm9sbGVyIiwicnVuRXhwb3J0TG9vcF9mbiIsInNhZmVBZGRJdGVtX2ZuIiwiX3RyYWNlIiwiX3NwYW4iLCJleHBvcnRCYXRjaGVzX2ZuIiwiZm9yY2UiLCJ0b0V4cG9ydCIsImJhdGNoIiwiTXVsdGlUcmFjaW5nUHJvY2Vzc29yIiwiX3Byb2Nlc3NvcnMiLCJwcm9jZXNzb3IiLCJwcm9jZXNzb3JzIiwiX2RlZmF1bHRFeHBvcnRlciIsIl9kZWZhdWx0UHJvY2Vzc29yIiwiZGVmYXVsdEV4cG9ydGVyIiwiZGVmYXVsdFByb2Nlc3NvciIsInRpbWVJc28iLCJnZW5lcmF0ZVRyYWNlSWQiLCJnZW5lcmF0ZVNwYW5JZCIsInJlbW92ZVByaXZhdGVGaWVsZHMiLCJfU3BhbiIsIl9kYXRhIiwiX3RyYWNlSWQiLCJfc3BhbklkIiwiX3BhcmVudElkIiwiX3Byb2Nlc3NvciIsIl9zdGFydGVkQXQiLCJfZW5kZWRBdCIsIl9wcmV2aW91c1NwYW4iLCJTcGFuIiwiTm9vcFNwYW4iLCJfVHJhY2UiLCJfc3RhcnRlZCIsIlRyYWNlIiwiTm9vcFRyYWNlIiwiVHJhY2VQcm92aWRlciIsIl9UcmFjZVByb3ZpZGVyX2luc3RhbmNlcyIsIl9tdWx0aVByb2Nlc3NvciIsIl9kaXNhYmxlZCIsImFkZENsZWFudXBMaXN0ZW5lcnNfZm4iLCJkaXNhYmxlZCIsInRyYWNlT3B0aW9ucyIsInRyYWNlSWQiLCJzcGFuT3B0aW9ucyIsInBhcmVudElkIiwiY2xlYW51cCIsImhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyIsInJlYXNvbiIsImhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzIiwiR0xPQkFMX1RSQUNFX1BST1ZJREVSIiwiYWRkVHJhY2VQcm9jZXNzb3IiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiYmluYXJ5U3RyaW5nIiwiYXJyYXlCdWZmZXJUb0Jhc2U2NCIsImFycmF5QnVmZmVyIiwiZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlIiwibGFzdENvbnRlbnRJdGVtIiwiZGlmZlJlYWx0aW1lSGlzdG9yeSIsIm9sZEhpc3RvcnkiLCJuZXdIaXN0b3J5IiwicmVtb3ZhbHMiLCJhZGRpdGlvbnMiLCJvbGRJdGVtIiwidXBkYXRlcyIsImhhc1dlYlJUQ1N1cHBvcnQiLCJyZW1vdmVBdWRpb0Zyb21Db250ZW50IiwicHJlc2VydmVBc3Npc3RhbnRBdWRpb1RyYW5zY3JpcHRzIiwibWVyZ2VkQ29udGVudCIsInByZXZpb3VzRW50cnkiLCJ1cGRhdGVSZWFsdGltZUhpc3RvcnkiLCJzaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwidXBkYXRlZENvbnRlbnQiLCJuZXdFdmVudCIsImV4aXN0aW5nSW5kZXgiLCJleGlzdGluZ0l0ZW0iLCJtZXJnZWRFdmVudCIsImlkeCIsInByZXZJbmRleCIsIkhFQURFUlMiLCJXRUJTT0NLRVRfTUVUQSIsInJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0iLCJhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtIiwiaXRlbUlkIiwic2VydmVyTGFiZWwiLCJSZWFsdGltZUFnZW50IiwiZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyIsInNldHRpbmdzIiwiZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwiLCJwb2xpY3lIaW50SW5wdXQiLCJiYXNlR3VhcmRyYWlsIiwicG9saWN5SGludCIsImdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlIiwiaXNEZWZpbmVkIiwiaXNEZXByZWNhdGVkQ29uZmlnIiwidG9OZXdTZXNzaW9uQ29uZmlnIiwiaW5wdXRDb25maWciLCJub3JtYWxpemVBdWRpb0Zvcm1hdCIsInJlcXVlc3RlZE91dHB1dFZvaWNlIiwib3V0cHV0Q29uZmlnIiwiZiIsInJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEiLCJyZWFsdGltZVRvb2xDYWxsSXRlbSIsInJlYWx0aW1lTWNwQ2FsbEl0ZW0iLCJyZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtIiwicmVhbHRpbWVSZXNwb25zZSIsInpcbiAgICAgICAgICAgIC5vYmplY3QiLCJ6XG4gICAgICAgIC5lbnVtIiwiY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtU2NoZW1hIiwiY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSIsImVycm9yRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSIsIm91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsInJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hIiwic2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbENvbXBsZXRlZEV2ZW50U2NoZW1hIiwibWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEiLCJnZW5lcmljRXZlbnRTY2hlbWEiLCJyZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hIiwicGFyc2VSZWFsdGltZUV2ZW50IiwicmF3IiwiZ2VuZXJpY1BhcnNlZCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUciLCJfT3BlbkFJUmVhbHRpbWVCYXNlIiwiX2FwaUtleSIsIl90cmFjaW5nQ29uZmlnIiwiX3Jhd1Nlc3Npb25Db25maWciLCJhcGlLZXkiLCJpc0dlbmVyaWMiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInRvdGFsVG9rZW5zIiwidXNhZ2UiLCJwcmV2aW91c0l0ZW1JZCIsIm1jcEFwcHJvdmFsUmVxdWVzdCIsIm1jcENhbGwiLCJyZWFsdGltZUl0ZW0iLCJvdGhlckV2ZW50RGF0YSIsInRyaWdnZXJSZXNwb25zZSIsImltYWdlIiwibmV3Q29uZmlnIiwic2Vzc2lvbkRhdGEiLCJfaiIsIl9pIiwiX2wiLCJfbiIsIl9tIiwiX3AiLCJfbyIsIl9yIiwiX3EiLCJfdCIsIl9zIiwiX3YiLCJfdSIsIl93IiwiX3oiLCJfeSIsIl9CIiwiX0EiLCJjcmVhdGVSZXNwb25zZSIsImNyZWF0ZV9yZXNwb25zZSIsImVhZ2VybmVzcyIsImludGVycnVwdFJlc3BvbnNlIiwiaW50ZXJydXB0X3Jlc3BvbnNlIiwicHJlZml4UGFkZGluZ01zIiwicHJlZml4X3BhZGRpbmdfbXMiLCJzaWxlbmNlRHVyYXRpb25NcyIsInNpbGVuY2VfZHVyYXRpb25fbXMiLCJ0aHJlc2hvbGQiLCJpZGxlVGltZW91dE1zIiwiaWRsZV90aW1lb3V0X21zIiwidHJhY2luZ0NvbmZpZyIsInN0YXJ0UmVzcG9uc2UiLCJhdWRpbyIsImNvbW1pdCIsInJlbW92YWxJZHMiLCJ1cGRhdGUiLCJhZGRpdGlvbnNBbmRVcGRhdGVzIiwiYWRkaXRpb24iLCJpdGVtRW50cnkiLCJPcGVuQUlSZWFsdGltZUJhc2UiLCJPcGVuQUlSZWFsdGltZVdlYlJUQyIsIl91cmwiLCJfc3RhdGUiLCJfdXNlSW5zZWN1cmVBcGlLZXkiLCJfb25nb2luZ1Jlc3BvbnNlIiwiX211dGVkIiwiYmFzZVVybCIsImlzQ2xpZW50S2V5IiwidXNlclNlc3Npb25Db25maWciLCJjb25uZWN0aW9uVXJsIiwicGVlckNvbm5lY3Rpb24iLCJkYXRhQ2hhbm5lbCIsImF0dGFjaENvbm5lY3Rpb25TdGF0ZUhhbmRsZXIiLCJjb25uZWN0aW9uIiwiYXVkaW9FbGVtZW50Iiwib3JpZ2luYWxQZWVyQ29ubmVjdGlvbiIsIm9mZmVyIiwic2RwUmVzcG9uc2UiLCJhbnN3ZXIiLCJtdXRlZCIsInNlbmRlciIsIldlYlNvY2tldCIsIk9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IiwiX09wZW5BSVJlYWx0aW1lV2ViU29ja2V0X2luc3RhbmNlcyIsIl9kZWZhdWx0VXJsIiwiX2N1cnJlbnRJdGVtSWQiLCJfY3VycmVudEF1ZGlvQ29udGVudEluZGV4IiwiX2NyZWF0ZVdlYlNvY2tldCIsIl9za2lwT3BlbkV2ZW50TGlzdGVuZXJzIiwiYXVkaW9FdmVudCIsInJlc2V0QXVkaW9QbGF5YmFja1N0YXRlX2ZuIiwidXJsIiwic2Vzc2lvbkNvbmZpZyIsInNldHVwV2ViU29ja2V0X2ZuIiwiZWxhcHNlZFRpbWUiLCJjYW5jZWxPbmdvaW5nUmVzcG9uc2UiLCJsZW5ndGgiLCJhdWRpb19lbmRfbXMiLCJ3cyIsIndlYnNvY2tldEFyZ3VtZW50cyIsIm9uU29ja2V0T3BlblJlYWR5IiwiYnVmZiIsImZtdCIsInJhdGUiLCJhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQiLCJCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0wiLCJiYWNrZ3JvdW5kUmVzdWx0IiwiaXNCYWNrZ3JvdW5kUmVzdWx0IiwiaXNWYWxpZFJlYWx0aW1lVG9vbCIsInRvUmVhbHRpbWVUb29sRGVmaW5pdGlvbiIsInNlcnZlclVybCIsImNsb25lRGVmYXVsdFNlc3Npb25Db25maWciLCJfUmVhbHRpbWVTZXNzaW9uIiwiX1JlYWx0aW1lU2Vzc2lvbl9pbnN0YW5jZXMiLCJfdHJhbnNwb3J0IiwiX2N1cnJlbnRBZ2VudCIsIl9jdXJyZW50VG9vbHMiLCJfb3V0cHV0R3VhcmRyYWlscyIsIl9vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyIsIl90cmFuc2NyaWJlZFRleHREZWx0YXMiLCJfaGlzdG9yeSIsIl9zaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwiX2ludGVycnVwdGVkQnlHdWFyZHJhaWwiLCJfYXVkaW9TdGFydGVkIiwiX2FsbE1jcFRvb2xzQnlTZXJ2ZXIiLCJfYXZhaWxhYmxlTWNwVG9vbHMiLCJfbGFzdFNlc3Npb25Db25maWciLCJfYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyIsIm92ZXJyaWRlcyIsInNldEN1cnJlbnRBZ2VudF9mbiIsImdldFNlc3Npb25Db25maWdfZm4iLCJzZXRFdmVudExpc3RlbmVyc19mbiIsInVwZGF0ZWRIaXN0b3J5IiwiaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbF9mbiIsImhhbmRvZmZUb29scyIsImhhc1Rvb2xzRGVmaW5lZCIsImhhc0hhbmRvZmZzRGVmaW5lZCIsInVwZGF0ZUF2YWlsYWJsZU1jcFRvb2xzX2ZuIiwiYWRkaXRpb25hbENvbmZpZyIsIm92ZXJyaWRlc0NvbmZpZyIsIm9wdGlvbnNDb25maWciLCJpbnN0cnVjdGlvbnMiLCJnZXRBdWRpb091dHB1dFZvaWNlT3ZlcnJpZGUiLCJhdWRpb0NvbmZpZyIsImF1ZGlvT3V0cHV0Vm9pY2VPdmVycmlkZSIsInRvcExldmVsVm9pY2VPdmVycmlkZSIsInJlc29sdmVkVm9pY2UiLCJmdWxsQ29uZmlnIiwiaGFuZGxlSGFuZG9mZl9mbiIsImhhbmRsZUZ1bmN0aW9uQ2FsbF9mbiIsImVuYWJsZWRIYW5kb2ZmcyIsImZ1bmN0aW9uVG9vbE1hcCIsInBvc3NpYmxlSGFuZG9mZiIsInJlc3BvbnNlSWQiLCJmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkIiwiZmVlZGJhY2tUZXh0IiwiY29tcGxldGVkRXZlbnQiLCJ0ZXh0T3V0cHV0IiwibGFzdFJ1bkluZGV4IiwibGFzdEl0ZW1JZCIsImRlbHRhIiwibmV3VGV4dCIsIm5ld1J1bkluZGV4IiwiaXNOZXciLCJhZGRlZEl0ZW0iLCJhY3RpdmVNY3BDb25maWdzIiwiYWxsb3dlZEZyb21Db25maWciLCJjZmciLCJkZWR1cEJ5TmFtZSIsInByZXYiLCJSZWFsdGltZVNlc3Npb24iLCJPcGVuQUlSZWFsdGltZVNJUCIsIl9hdWRpbyIsInV0aWxzIiwidXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyIiwidXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0IiwidXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDTyxNQUFNQSxLQUFXO0FBQUEsRUFFcEIsU0FBVztBQUtmO0FDUk8sZUFBZUMsR0FBWUMsR0FBSTtBQUNsQyxNQUFJO0FBQ0EsV0FBTyxDQUFDLE1BQU0sTUFBTUEsR0FBSTtBQUFBLEVBQzVCLFNBQ09DLEdBQU87QUFDVixXQUFPLENBQUNBLEdBQU8sSUFBSTtBQUFB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QUFNQSxDQUFPO0FBQUEsRUFDakI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBY0EsYUFBYSxtQkFBbUJ5akIsR0FBT3pqQixJQUFVLENBQUEsR0FBSStoRCxJQUFZLENBQUEsR0FBSTtBQUNqRSxVQUFNcEMsSUFBZ0IsTUFBTThFLEdBQWdCLDRCQUE0QmhoQyxHQUFPempCLEdBQVMraEQsQ0FBUztBQUVqRyxXQURrQixJQUFJMkMsR0FBaUIsRUFDdEIsb0JBQW9CL0UsQ0FBYTtBQUFBLEVBQ3REO0FBQUEsRUFDQSxVQUFVZ0YsR0FBUXRrRCxJQUFXLElBQUk7QUFHN0IsVUFBTSxJQUFJLE1BQU0sNkZBQTZGO0FBQUEsRUFDakg7QUFBQSxFQUNBLE1BQU0sUUFBUUwsR0FBUztBQUNuQixRQUFJLENBQUNBLEVBQVE7QUFDVCxZQUFNLElBQUkyWixHQUFVLDZEQUE2RDtBQUVyRixVQUFNLE1BQU0sUUFBUTNaLENBQU87QUFBQSxFQUMvQjtBQUNKO0FDaENZLE1BQUM0a0QsS0FBUTtBQUFBLEVBQ2pCLHFCQUFxQkM7QUFBQUEsRUFDckIscUJBQXFCQztBQUFBQSxFQUNyQixtQ0FBbUNDO0FBQ3ZDOyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlsyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsNTcsNTgsNTldfQ==
